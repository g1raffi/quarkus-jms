function _log(a,b){if(_canLog){var c=Array.prototype.slice.apply(arguments,[1]),d=new Date,e=d.getHours()+":"+d.getMinutes()+":"+d.getSeconds()+"."+d.getMilliseconds();c[0]=e+" - "+c[0];try{switch(a){case"info":window.console.info.apply(window.console,c);break;case"warn":window.console.warn.apply(window.console,c);break;default:window.console.log.apply(window.console,c)}}catch(a){window.console||(_canLog=!1)}}}function logMsg(a){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)}function KeyTable(a){function b(a){return function(b,c,e){if(null!==b&&"number"!=typeof b||null!==c&&"number"!=typeof c||"function"!=typeof e)if("object"==typeof b&&"function"==typeof c){var f=o(b);d(a,f[0],f[1],c)}else alert("Unhandable event type was added: x"+b+"  y:"+c+"  z:"+e);else d(a,b,c,e)}}function c(a){return function(b,c,d){if(null!==b&&"number"!=typeof arguments[0]||null!==c&&"number"!=typeof arguments[1])if("object"==typeof arguments[0]){var f=o(b);"function"==typeof arguments[1]?e(a,f[0],f[1],c):e(a,f[0],f[1])}else alert("Unhandable event type was removed: x"+b+"  y:"+c+"  z:"+d);else"function"==typeof arguments[2]?e(a,b,c,d):e(a,b,c)}}function d(a,b,c,d){D[a].push({x:b,y:c,fn:d})}function e(a,b,c,d){for(var e=0,f=0,g=D[a].length;f<g-e;f++)if(void 0!==d)D[a][f-e].x==b&&D[a][f-e].y==c&&D[a][f-e].fn==d&&(D[a].splice(f-e,1),e++);else if(D[a][f-e].x==b&&D[a][f-e].y==c)return D[a].splice(f,1),1;return e}function f(a,b,c){for(var d=0,e=D[a],f=0;f<e.length;f++)(e[f].x==b&&e[f].y==c||null===e[f].x&&e[f].y==c||e[f].x==b&&null===e[f].y||null===e[f].x&&null===e[f].y)&&(e[f].fn(n(b,c),b,c),d++);return d}function g(a,b){if(x!=a){void 0===b&&(b=!0),null!==x&&i(x),jQuery(a).addClass(B),jQuery(a).parent().addClass(B);var c;if(E){c=E.fnSettings();var d=s(a);if(null===d)return;for(var e=d[1],g=C;e>=c.fnDisplayEnd();)c._iDisplayLength>=0?c._iDisplayStart+c._iDisplayLength<c.fnRecordsDisplay()&&(c._iDisplayStart+=c._iDisplayLength):c._iDisplayStart=0,E.oApi._fnCalculateEnd(c);for(;e<c._iDisplayStart;)c._iDisplayStart=c._iDisplayLength>=0?c._iDisplayStart-c._iDisplayLength:0,c._iDisplayStart<0&&(c._iDisplayStart=0),E.oApi._fnCalculateEnd(c);E.oApi._fnDraw(c),C=g}var h=o(a);x=a,y=h[0],z=h[1];var j,k,m,n,t,u,v;if(b&&(j=document.documentElement.clientHeight,k=document.documentElement.clientWidth,m=document.body.scrollTop||document.documentElement.scrollTop,n=document.body.scrollLeft||document.documentElement.scrollLeft,t=a.offsetHeight,u=a.offsetWidth,v=r(a),!E||void 0===c.oScroll||""===c.oScroll.sX&&""===c.oScroll.sY||(v[1]-=$(c.nTable.parentNode).scrollTop(),v[0]-=$(c.nTable.parentNode).scrollLeft()),v[1]+t>m+j?p(v[1]+t-j):v[1]<m&&p(v[1]),v[0]+u>n+k?q(v[0]+u-k):v[0]<n&&q(v[0])),E&&void 0!==c.oScroll&&(""!==c.oScroll.sX||""!==c.oScroll.sY)){var w=c.nTable.parentNode;j=w.clientHeight,k=w.clientWidth,m=w.scrollTop,n=w.scrollLeft,t=a.offsetHeight,u=a.offsetWidth,a.offsetTop+t>j+m?w.scrollTop=a.offsetTop+t-j:a.offsetTop<m&&(w.scrollTop=a.offsetTop),a.offsetLeft+u>k+n?w.scrollLeft=a.offsetLeft+u-k:a.offsetLeft<n&&(w.scrollLeft=a.offsetLeft)}l(),f("focus",y,z)}}function h(){i(x),y=null,z=null,x=null,m()}function i(a){jQuery(a).removeClass(B),jQuery(a).parent().removeClass(B),f("blur",y,z)}function j(a){for(var b=this;"TD"!=b.nodeName;)b=b.parentNode;g(b),l()}function k(a){if(A.block||!C)return!0;if(a.metaKey||a.altKey||a.ctrlKey)return!0;var b,c,d,e=w.getElementsByTagName("tr")[0].getElementsByTagName("td").length;if(E){d=E.fnSettings().aiDisplay.length;var i=s(x);if(null===i)return;y=i[0],z=i[1]}else d=w.getElementsByTagName("tr").length;var j=9==a.keyCode&&a.shiftKey?-1:a.keyCode;switch(j){case 13:return a.preventDefault(),a.stopPropagation(),f("action",y,z),!0;case 27:if(!f("esc",y,z))return void h();b=y,c=z;break;case-1:case 37:if(y>0)b=y-1,c=z;else{if(!(z>0))return!(-1!=j||!u)&&(F=!0,v.focus(),setTimeout(function(){F=!1},0),C=!1,h(),!0);b=e-1,c=z-1}break;case 38:if(!(z>0))return!1;b=y,c=z-1;break;case 9:case 39:if(y<e-1)b=y+1,c=z;else{if(!(z<d-1))return!(9!=j||!u)&&(F=!0,v.focus(),setTimeout(function(){F=!1},0),C=!1,h(),!0);b=0,c=z+1}break;case 40:if(!(z<d-1))return!1;b=y,c=z+1;break;default:return!0}return g(n(b,c)),!1}function l(){C||(C=!0)}function m(){C=!1}function n(a,b){if(E){var c=E.fnSettings();return void 0!==c.aoData[c.aiDisplay[b]]?c.aoData[c.aiDisplay[b]].nTr.getElementsByTagName("td")[a]:null}return jQuery("tr:eq("+b+")>td:eq("+a+")",w)[0]}function o(a){if(E){var b=E.fnSettings();return[jQuery("td",a.parentNode).index(a),jQuery("tr",a.parentNode.parentNode).index(a.parentNode)+b._iDisplayStart]}return[jQuery("td",a.parentNode).index(a),jQuery("tr",a.parentNode.parentNode).index(a.parentNode)]}function p(a){document.documentElement.scrollTop=a,document.body.scrollTop=a}function q(a){document.documentElement.scrollLeft=a,document.body.scrollLeft=a}function r(a){var b=0,c=0;if(a.offsetParent)for(b=a.offsetLeft,c=a.offsetTop,a=a.offsetParent;a;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;return[b,c]}function s(a){for(var b=E.fnSettings(),c=0,d=b.aiDisplay.length;c<d;c++)for(var e=b.aoData[b.aiDisplay[c]].nTr,f=e.getElementsByTagName("td"),g=0,h=f.length;g<h;g++)if(f[g]==a)return[g,c];return null}function t(a,b){if(A=b,void 0===a&&(a={}),void 0===a.focus&&(a.focus=[0,0]),void 0===a.table?a.table=jQuery("table.KeyTable")[0]:$(a.table).addClass("KeyTable"),void 0!==a.focusClass&&(B=a.focusClass),void 0!==a.datatable&&(E=a.datatable),void 0===a.initScroll&&(a.initScroll=!0),void 0===a.form&&(a.form=!1),u=a.form,w=a.table.getElementsByTagName("tbody")[0],u){var c=document.createElement("div");v=document.createElement("input"),c.style.height="1px",c.style.width="0px",c.style.overflow="hidden",void 0!==a.tabIndex&&(v.tabIndex=a.tabIndex),c.appendChild(v),a.table.parentNode.insertBefore(c,a.table.nextSibling),jQuery(v).focus(function(){F||(C=!0,F=!1,void 0!==a.focus.nodeName?g(a.focus,a.initScroll):g(n(a.focus[0],a.focus[1]),a.initScroll),setTimeout(function(){v.blur()},0))}),C=!1}else void 0!==a.focus.nodeName?g(a.focus,a.initScroll):g(n(a.focus[0],a.focus[1]),a.initScroll),l();jQuery.browser.mozilla||jQuery.browser.opera?jQuery(document).bind("keypress",k):jQuery(document).bind("keydown",k),E?jQuery("tbody td",E.fnSettings().nTable).live("click",j):jQuery("td",w).live("click",j),jQuery(document).click(function(b){for(var c=b.target,d=!1;c;){if(c==a.table){d=!0;break}c=c.parentNode}d||h()})}this.block=!1,this.event={remove:{}},this.fnGetCurrentPosition=function(){return[y,z]},this.fnGetCurrentData=function(){return x.innerHTML},this.fnGetCurrentTD=function(){return x},this.fnSetPosition=function(a,b){g("object"==typeof a&&a.nodeName?a:n(a,b))};var u,v,w=null,x=null,y=null,z=null,A=null,B="focus",C=!1,D={action:[],esc:[],focus:[],blur:[]},E=null,F=!1;for(var G in D)G&&(this.event[G]=b(G),this.event.remove[G]=c(G));t(a,this)}function dmr_js(){function ob(){var a=!1;try{var b=cb.location.search;return(-1!=b.indexOf(L)||-1!=b.indexOf(M)||cb.external&&cb.external.gwtOnLoad)&&-1==b.indexOf(N)}catch(a){}return ob=function(){return a},a}function pb(){eb&&fb&&eb(mb,I,gb,lb)}function qb(){function a(a){var b=a.lastIndexOf(o);-1==b&&(b=a.length);var c=a.indexOf(y);-1==c&&(c=a.length);var d=a.lastIndexOf(p,Math.min(c,b));return d>=0?a.substring(0,d+1):k}var b,c,d=E;for(db.write(w+d+n),c=db.getElementById(d),b=c&&c.previousSibling;b&&b.tagName!=C;)b=b.previousSibling;if(b&&b.src&&(gb=a(b.src)),gb==k){var e=db.getElementsByTagName(F);gb=e.length>0?e[e.length-1].href:a(db.location.href)}else if(gb.match(/^\w+:\/\//));else{var f=db.createElement(V);f.src=gb+G,gb=a(f.src)}c&&c.parentNode.removeChild(c)}function rb(){for(var b=document.getElementsByTagName(W),c=0,d=b.length;c<d;++c){var e=b[c],f=e.getAttribute(Y),g;if(f)if(f==Q){if(g=e.getAttribute(H)){var h,i=g.indexOf(x);i>=0?(f=g.substring(0,i),h=g.substring(i+1)):(f=g,h=k),hb[f]=h}}else if(f==P){if(g=e.getAttribute(H))try{nb=eval(g)}catch(a){alert(A+g+m)}}else if(f==O&&(g=e.getAttribute(H)))try{mb=eval(g)}catch(a){alert(A+g+l)}}}function sb(a,b){for(var c=kb,d=0,e=a.length-1;d<e;++d)c=c[a[d]]||(c[a[d]]=[]);c[a[e]]=b}function tb(a){var b=jb[a](),c=ib[a];if(b in c)return b;var d=[];for(var e in c)d[c[e]]=e;throw nb&&nb(a,d,b),null}function xb(){fb||(fb=!0,pb(),db.removeEventListener&&db.removeEventListener(B,xb,!1),wb&&clearInterval(wb))}var yb="",zb='" for "gwt:onLoadErrorFn"',Ab='" for "gwt:onPropertyErrorFn"',Bb='"><\/script>',Cb="#",Db="/",Eb=":",Fb=":1",Gb=":2",Hb=":3",Ib=":4",Jb=":5",Kb='<script id="',Lb="=",Mb="?",Nb="BD3C858A7B7FD66E09CD776C958780B6",Ob='Bad handler "',Pb="DOMContentLoaded",Qb="SCRIPT",Rb="Single-script hosted mode not yet implemented. See issue ",Sb="__gwt_marker_dmr.js",Tb="base",Ub="clear.cache.gif",Vb="content",Wb="dmr.js",Xb="gecko",Yb="gecko1_8",Zb="gwt.codesvr=",$b="gwt.hosted=",_b="gwt.hybrid",ac="gwt:onLoadErrorFn",bc="gwt:onPropertyErrorFn",cc="gwt:property",dc="http://code.google.com/p/google-web-toolkit/issues/detail?id=2079",ec="ie6",fc="ie8",gc="ie9",hc="img",ic="meta",jc="msie",kc="name",lc="opera",mc="safari",nc="unknown",oc="user.agent",pc="webkit",k=yb,l=zb,m=Ab,n=Bb,o=Cb,p=Db,q=Eb,r=Fb,s=Gb,t=Hb,u=Ib,v=Jb,w=Kb,x=Lb,y=Mb,z=Nb,A=Ob,B=Pb,C=Qb,D=Rb,E=Sb,F=Tb,G=Ub,H=Vb,I=Wb,J=Xb,K=Yb,L=Zb,M=$b,N=_b,O=ac,P=bc,Q=cc,R=dc,S=ec,T=fc,U=gc,V=hc,W=ic,X=jc,Y=kc,Z=lc,$=mc,_=nc,ab=oc,bb=pc,cb=window,db=document,eb,fb,gb=k,hb={},ib=[],jb=[],kb=[],lb=0,mb,nb;if(cb.__gwt_stylesLoaded||(cb.__gwt_stylesLoaded={}),cb.__gwt_scriptsLoaded||(cb.__gwt_scriptsLoaded={}),jb[ab]=function(){var a=navigator.userAgent.toLowerCase(),b=function(a){return 1e3*parseInt(a[1])+parseInt(a[2])};return function(){return-1!=a.indexOf(Z)}()?Z:function(){return-1!=a.indexOf(bb)}()?$:function(){return-1!=a.indexOf(X)&&db.documentMode>=9}()?U:function(){return-1!=a.indexOf(X)&&db.documentMode>=8}()?T:function(){var c=/msie ([0-9]+)\.([0-9]+)/.exec(a);if(c&&3==c.length)return b(c)>=6e3}()?S:function(){return-1!=a.indexOf(J)}()?K:_},ib[ab]={gecko1_8:0,ie6:1,ie8:2,ie9:3,opera:4,safari:5},dmr_js.onScriptLoad=function(a){dmr_js=null,eb=a,pb()},ob())return void alert(D+R);qb(),rb();try{var ub;sb([K],z),sb([S],z+r),sb([T],z+s),sb([U],z+t),sb([Z],z+u),sb([$],z+v),ub=kb[tb(ab)];var vb=ub.indexOf(q);-1!=vb&&(lb=Number(ub.substring(vb+1)))}catch(a){return}var wb;db.addEventListener&&db.addEventListener(B,function(){xb()},!1);var wb=setInterval(function(){/loaded|complete/.test(db.readyState)&&xb()},50)}function lineCount(a){var b=0;return a&&(b=1,a.toString().each(/\n/,function(){return b++})),b}function safeNull(a){return"boolean"==typeof a?a:"number"==typeof a?a:a||""}function safeNullAsString(a,b){if("boolean"==typeof a)return""+a;if("number"==typeof a)return""+a;if("string"==typeof a)return a.indexOf("IllegalStateException: Broker is not yet started")>=0&&(a="<em>Broker is not yet started</em>"),""+a;if("javax.management.openmbean.CompositeData"===b||"[Ljavax.management.openmbean.CompositeData;"===b||"java.util.Map"===b){return angular.toJson(a,!0)}if("javax.management.ObjectName"===b)return""+(null==a?"":a.canonicalName);if("javax.management.openmbean.TabularData"===b){var c=[];for(var d in a){var e=a[d],f=d+"="+e;c.push(f)}return c=c.sortBy(function(a){return a.toString()}),c.join("\n")}return angular.isArray(a)?a.join("\n"):a?""+a:""}function toSearchArgumentArray(a){if(a){if(angular.isArray(a))return a;if(angular.isString(a))return a.split(",")}return[]}function folderMatchesPatterns(a,b){if(a){var c=a.folderNames;if(c)return b.any(function(a){for(var b=0;b<a.length;b++){var d=c[b],e=a[b];if(!d)return!1;if(e.indexOf(d)<0)return!1}return!0})}return!1}function scopeStoreJolokiaHandle(a,b,c){c&&(a.$on("$destroy",function(){closeHandle(a,b)}),a.jolokiaHandle=c)}function closeHandle(a,b){var c=a.jolokiaHandle;c&&(b.unregister(c),a.jolokiaHandle=null)}function onSuccess(a,b){return void 0===b&&(b={}),b.mimeType="application/json",angular.isDefined(a)&&(b.success=a),b.method||(b.method="POST"),b.canonicalNaming=!1,b.canonicalProperties=!1,b.error||(b.error=function(a){Core.defaultJolokiaErrorHandler(a,b)}),b}function supportsLocalStorage(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}}function isNumberTypeName(a){if(a){var b=a.toString().toLowerCase();return numberTypeNames[b]}return!1}function escapeMBean(a){return encodeURI(a.replace(/\//g,"!/"))}function escapeMBeanPath(a){return a.replace(/\//g,"!/").replace(":","/")}function escapeDots(a){return a.replace(/\./g,"-")}function escapeTreeCssStyles(a){return escapeDots(a).replace(/span/g,"sp-an")}function showLogPanel(){var a=$("#log-panel"),b=$("body");localStorage.showLog="true",a.css({bottom:"50%"}),b.css({"overflow-y":"hidden"})}function logLevelClass(a){if(a){var b=a[0];if("w"===b||"W"===b)return"warning";if("e"===b||"E"===b)return"error";if("i"===b||"I"===b)return"info";if("d"===b||"D"===b)return""}return""}if(function(a,b){function c(a){var b=oa[a]={};return $.each(a.split(ba),function(a,c){b[c]=!0}),b}function d(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(qa,"-$1").toLowerCase();if("string"==typeof(d=a.getAttribute(e))){try{d="true"===d||"false"!==d&&("null"===d?null:+d+""===d?+d:pa.test(d)?$.parseJSON(d):d)}catch(a){}$.data(a,c,d)}else d=b}return d}function e(a){var b;for(b in a)if(("data"!==b||!$.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function f(){return!1}function g(){return!0}function h(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function i(a,b){do{a=a[b]}while(a&&1!==a.nodeType);return a}function j(a,b,c){if(b=b||0,$.isFunction(b))return $.grep(a,function(a,d){return!!b.call(a,d,a)===c});if(b.nodeType)return $.grep(a,function(a,d){return a===b===c});if("string"==typeof b){var d=$.grep(a,function(a){return 1===a.nodeType});if(Ka.test(b))return $.filter(b,d,!c);b=$.filter(b,d)}return $.grep(a,function(a,d){return $.inArray(a,b)>=0===c})}function k(a){var b=Na.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function l(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function m(a,b){if(1===b.nodeType&&$.hasData(a)){var c,d,e,f=$._data(a),g=$._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;d<e;d++)$.event.add(b,c,h[c][d])}g.data&&(g.data=$.extend({},g.data))}}function n(a,b){var c;1===b.nodeType&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),$.support.html5Clone&&a.innerHTML&&!$.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&Xa.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.selected=a.defaultSelected:"input"===c||"textarea"===c?b.defaultValue=a.defaultValue:"script"===c&&b.text!==a.text&&(b.text=a.text),b.removeAttribute($.expando))}function o(a){return void 0!==a.getElementsByTagName?a.getElementsByTagName("*"):void 0!==a.querySelectorAll?a.querySelectorAll("*"):[]}function p(a){Xa.test(a.type)&&(a.defaultChecked=a.checked)}function q(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=rb.length;e--;)if((b=rb[e]+c)in a)return b;return d}function r(a,b){return a=b||a,"none"===$.css(a,"display")||!$.contains(a.ownerDocument,a)}function s(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)c=a[f],c.style&&(e[f]=$._data(c,"olddisplay"),b?(e[f]||"none"!==c.style.display||(c.style.display=""),""===c.style.display&&r(c)&&(e[f]=$._data(c,"olddisplay",w(c.nodeName)))):(d=cb(c,"display"),e[f]||"none"===d||$._data(c,"olddisplay",d)));for(f=0;f<g;f++)c=a[f],c.style&&(b&&"none"!==c.style.display&&""!==c.style.display||(c.style.display=b?e[f]||"":"none"));return a}function t(a,b,c){var d=kb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function u(a,b,c,d){for(var e=c===(d?"border":"content")?4:"width"===b?1:0,f=0;e<4;e+=2)"margin"===c&&(f+=$.css(a,c+qb[e],!0)),d?("content"===c&&(f-=parseFloat(cb(a,"padding"+qb[e]))||0),"margin"!==c&&(f-=parseFloat(cb(a,"border"+qb[e]+"Width"))||0)):(f+=parseFloat(cb(a,"padding"+qb[e]))||0,"padding"!==c&&(f+=parseFloat(cb(a,"border"+qb[e]+"Width"))||0));return f}function v(a,b,c){var d="width"===b?a.offsetWidth:a.offsetHeight,e=!0,f=$.support.boxSizing&&"border-box"===$.css(a,"boxSizing");if(d<=0||null==d){if(d=cb(a,b),(d<0||null==d)&&(d=a.style[b]),lb.test(d))return d;e=f&&($.support.boxSizingReliable||d===a.style[b]),d=parseFloat(d)||0}return d+u(a,b,c||(f?"border":"content"),e)+"px"}function w(a){if(nb[a])return nb[a];var b=$("<"+a+">").appendTo(P.body),c=b.css("display");return b.remove(),"none"!==c&&""!==c||(db=P.body.appendChild(db||$.extend(P.createElement("iframe"),{frameBorder:0,width:0,height:0})),eb&&db.createElement||(eb=(db.contentWindow||db.contentDocument).document,eb.write("<!doctype html><html><body>"),eb.close()),b=eb.body.appendChild(eb.createElement(a)),c=cb(b,"display"),P.body.removeChild(db)),nb[a]=c,c}function x(a,b,c,d){var e;if($.isArray(b))$.each(b,function(b,e){c||ub.test(a)?d(a,e):x(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==$.type(b))d(a,b);else for(e in b)x(a+"["+e+"]",b[e],c,d)}function y(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e,f,g=b.toLowerCase().split(ba),h=0,i=g.length;if($.isFunction(c))for(;h<i;h++)d=g[h],f=/^\+/.test(d),f&&(d=d.substr(1)||"*"),e=a[d]=a[d]||[],e[f?"unshift":"push"](c)}}function z(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;for(var h,i=a[f],j=0,k=i?i.length:0,l=a===Kb;j<k&&(l||!h);j++)"string"==typeof(h=i[j](c,d,e))&&(!l||g[h]?h=b:(c.dataTypes.unshift(h),h=z(a,c,d,e,h,g)));return!l&&h||g["*"]||(h=z(a,c,d,e,"*",g)),h}function A(a,c){var d,e,f=$.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&$.extend(!0,a,e)}function B(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(f in k)f in d&&(c[k[f]]=d[f]);for(;"*"===j[0];)j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader("content-type"));if(e)for(f in i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=j[0];else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break}h||(h=f)}g=g||h}if(g)return g!==j[0]&&j.unshift(g),d[g]}function C(a,b){var c,d,e,f,g=a.dataTypes.slice(),h=g[0],i={},j=0;if(a.dataFilter&&(b=a.dataFilter(b,a.dataType)),g[1])for(c in a.converters)i[c.toLowerCase()]=a.converters[c];for(;e=g[++j];)if("*"!==e){if("*"!==h&&h!==e){if(!(c=i[h+" "+e]||i["* "+e]))for(d in i)if(f=d.split(" "),f[1]===e&&(c=i[h+" "+f[0]]||i["* "+f[0]])){!0===c?c=i[d]:!0!==i[d]&&(e=f[0],g.splice(j--,0,e));break}if(!0!==c)if(c&&a.throws)b=c(b);else try{b=c(b)}catch(a){return{state:"parsererror",error:c?a:"No conversion from "+h+" to "+e}}}h=e}return{state:"success",data:b}}function D(){try{return new a.XMLHttpRequest}catch(a){}}function E(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}}function F(){return setTimeout(function(){Ub=b},0),Ub=$.now()}function G(a,b){$.each(b,function(b,c){for(var d=($b[b]||[]).concat($b["*"]),e=0,f=d.length;e<f;e++)if(d[e].call(a,b,c))return})}function H(a,b,c){var d,e=0,f=Zb.length,g=$.Deferred().always(function(){delete h.elem}),h=function(){for(var b=Ub||F(),c=Math.max(0,i.startTime+i.duration-b),d=c/i.duration||0,e=1-d,f=0,h=i.tweens.length;f<h;f++)i.tweens[f].run(e);return g.notifyWith(a,[i,e,c]),e<1&&h?c:(g.resolveWith(a,[i]),!1)},i=g.promise({elem:a,props:$.extend({},b),opts:$.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Ub||F(),duration:c.duration,tweens:[],createTween:function(b,c,d){var e=$.Tween(a,i.opts,b,c,i.opts.specialEasing[b]||i.opts.easing);return i.tweens.push(e),e},stop:function(b){for(var c=0,d=b?i.tweens.length:0;c<d;c++)i.tweens[c].run(1);return b?g.resolveWith(a,[i,b]):g.rejectWith(a,[i,b]),this}}),j=i.props;for(I(j,i.opts.specialEasing);e<f;e++)if(d=Zb[e].call(i,a,j,i.opts))return d;return G(i,j),$.isFunction(i.opts.start)&&i.opts.start.call(a,i),$.fx.timer($.extend(h,{anim:i,queue:i.opts.queue,elem:a})),i.progress(i.opts.progress).done(i.opts.done,i.opts.complete).fail(i.opts.fail).always(i.opts.always)}function I(a,b){var c,d,e,f,g;for(c in a)if(d=$.camelCase(c),e=b[d],f=a[c],$.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),(g=$.cssHooks[d])&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function J(a,b,c){var d,e,f,g,h,i,j,k,l,m=this,n=a.style,o={},p=[],q=a.nodeType&&r(a);c.queue||(k=$._queueHooks(a,"fx"),null==k.unqueued&&(k.unqueued=0,l=k.empty.fire,k.empty.fire=function(){k.unqueued||l()}),k.unqueued++,m.always(function(){m.always(function(){k.unqueued--,$.queue(a,"fx").length||k.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],"inline"===$.css(a,"display")&&"none"===$.css(a,"float")&&($.support.inlineBlockNeedsLayout&&"inline"!==w(a.nodeName)?n.zoom=1:n.display="inline-block")),c.overflow&&(n.overflow="hidden",$.support.shrinkWrapBlocks||m.done(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(d in b)if(f=b[d],Wb.exec(f)){if(delete b[d],i=i||"toggle"===f,f===(q?"hide":"show"))continue;p.push(d)}if(g=p.length){h=$._data(a,"fxshow")||$._data(a,"fxshow",{}),"hidden"in h&&(q=h.hidden),i&&(h.hidden=!q),q?$(a).show():m.done(function(){$(a).hide()}),m.done(function(){var b;$.removeData(a,"fxshow",!0);for(b in o)$.style(a,b,o[b])});for(d=0;d<g;d++)e=p[d],j=m.createTween(e,q?h[e]:0),o[e]=h[e]||$.style(a,e),e in h||(h[e]=j.start,q&&(j.end=j.start,j.start="width"===e||"height"===e?1:0))}}function K(a,b,c,d,e){return new K.prototype.init(a,b,c,d,e)}function L(a,b){var c,d={height:a},e=0;for(b=b?1:0;e<4;e+=2-b)c=qb[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function M(a){return $.isWindow(a)?a:9===a.nodeType&&(a.defaultView||a.parentWindow)}var N,O,P=a.document,Q=a.location,R=a.navigator,S=a.jQuery,T=a.$,U=Array.prototype.push,V=Array.prototype.slice,W=Array.prototype.indexOf,X=Object.prototype.toString,Y=Object.prototype.hasOwnProperty,Z=String.prototype.trim,$=function(a,b){return new $.fn.init(a,b,N)},_=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,aa=/\S/,ba=/\s+/,ca=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,da=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,ea=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,fa=/^[\],:{}\s]*$/,ga=/(?:^|:|,)(?:\s*\[)+/g,ha=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ia=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,ja=/^-ms-/,ka=/-([\da-z])/gi,la=function(a,b){return(b+"").toUpperCase()},ma=function(){P.addEventListener?(P.removeEventListener("DOMContentLoaded",ma,!1),$.ready()):"complete"===P.readyState&&(P.detachEvent("onreadystatechange",ma),$.ready())},na={};$.fn=$.prototype={constructor:$,init:function(a,c,d){var e,f,g;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("string"==typeof a){if(!(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:da.exec(a))||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1])return c=c instanceof $?c[0]:c,g=c&&c.nodeType?c.ownerDocument||c:P,a=$.parseHTML(e[1],g,!0),ea.test(e[1])&&$.isPlainObject(c)&&this.attr.call(a,c,!0),$.merge(this,a);if((f=P.getElementById(e[2]))&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1,this[0]=f}return this.context=P,this.selector=a,this}return $.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),$.makeArray(a,this))},selector:"",jquery:"1.8.3+1",length:0,size:function(){return this.length},toArray:function(){return V.call(this)},get:function(a){return null==a?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=$.merge(this.constructor(),a);return d.prevObject=this,d.context=this.context,"find"===b?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},each:function(a,b){return $.each(this,a,b)},ready:function(a){return $.ready.promise().done(a),this},eq:function(a){return a=+a,-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(V.apply(this,arguments),"slice",V.call(arguments).join(","))},map:function(a){return this.pushStack($.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:U,sort:[].sort,splice:[].splice},$.fn.init.prototype=$.fn,$.extend=$.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"==typeof h||$.isFunction(h)||(h={}),j===i&&(h=this,--i);i<j;i++)if(null!=(a=arguments[i]))for(c in a)d=h[c],e=a[c],h!==e&&(k&&e&&($.isPlainObject(e)||(f=$.isArray(e)))?(f?(f=!1,g=d&&$.isArray(d)?d:[]):g=d&&$.isPlainObject(d)?d:{},h[c]=$.extend(k,g,e)):e!==b&&(h[c]=e));return h},$.extend({noConflict:function(b){return a.$===$&&(a.$=T),b&&a.jQuery===$&&(a.jQuery=S),$},isReady:!1,readyWait:1,holdReady:function(a){a?$.readyWait++:$.ready(!0)},ready:function(a){if(!0===a?!--$.readyWait:!$.isReady){if(!P.body)return setTimeout($.ready,1);$.isReady=!0,!0!==a&&--$.readyWait>0||(O.resolveWith(P,[$]),$.fn.trigger&&$(P).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===$.type(a)},isArray:Array.isArray||function(a){return"array"===$.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):na[X.call(a)]||"object"},isPlainObject:function(a){if(!a||"object"!==$.type(a)||a.nodeType||$.isWindow(a))return!1;try{if(a.constructor&&!Y.call(a,"constructor")&&!Y.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(a){return!1}var c;for(c in a);return c===b||Y.call(a,c)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){var d;return a&&"string"==typeof a?("boolean"==typeof b&&(c=b,b=0),b=b||P,(d=ea.exec(a))?[b.createElement(d[1])]:(d=$.buildFragment([a],b,c?null:[]),$.merge([],(d.cacheable?$.clone(d.fragment):d.fragment).childNodes))):null},parseJSON:function(b){return b&&"string"==typeof b?(b=$.trim(b),a.JSON&&a.JSON.parse?a.JSON.parse(b):fa.test(b.replace(ha,"@").replace(ia,"]").replace(ga,""))?new Function("return "+b)():void $.error("Invalid JSON: "+b)):null},parseXML:function(c){var d,e;if(!c||"string"!=typeof c)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(a){d=b}return d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||$.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&aa.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(ja,"ms-").replace(ka,la)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,c,d){var e,f=0,g=a.length,h=g===b||$.isFunction(a);if(d)if(h){for(e in a)if(!1===c.apply(a[e],d))break}else for(;f<g&&!1!==c.apply(a[f++],d););else if(h){for(e in a)if(!1===c.call(a[e],e,a[e]))break}else for(;f<g&&!1!==c.call(a[f],f,a[f++]););return a},trim:Z&&!Z.call("\ufeff ")?function(a){return null==a?"":Z.call(a)}:function(a){return null==a?"":(a+"").replace(ca,"")},makeArray:function(a,b){var c,d=b||[];return null!=a&&(c=$.type(a),null==a.length||"string"===c||"function"===c||"regexp"===c||$.isWindow(a)?U.call(d,a):$.merge(d,a)),d},inArray:function(a,b,c){var d;if(b){if(W)return W.call(b,a,c);for(d=b.length,c=c?c<0?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"==typeof d)for(;f<d;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;f<g;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,c,d){var e,f,g=[],h=0,i=a.length;if(a instanceof $||i!==b&&"number"==typeof i&&(i>0&&a[0]&&a[i-1]||0===i||$.isArray(a)))for(;h<i;h++)null!=(e=c(a[h],h,d))&&(g[g.length]=e);else for(f in a)null!=(e=c(a[f],f,d))&&(g[g.length]=e);return g.concat.apply([],g)},guid:1,proxy:function(a,c){var d,e,f;return"string"==typeof c&&(d=a[c],c=a,a=d),$.isFunction(a)?(e=V.call(arguments,2),f=function(){return a.apply(c,e.concat(V.call(arguments)))},f.guid=a.guid=a.guid||$.guid++,f):b},access:function(a,c,d,e,f,g,h){var i,j=null==d,k=0,l=a.length;if(d&&"object"==typeof d){for(k in d)$.access(a,c,k,d[k],1,g,e);f=1}else if(e!==b){if(i=h===b&&$.isFunction(e),j&&(i?(i=c,c=function(a,b,c){return i.call($(a),c)}):(c.call(a,e),c=null)),c)for(;k<l;k++)c(a[k],d,i?e.call(a[k],k,c(a[k],d)):e,h);f=1}return f?a:j?c.call(a):l?c(a[0],d):g},now:function(){return(new Date).getTime()}}),$.ready.promise=function(b){if(!O)if(O=$.Deferred(),"complete"===P.readyState)setTimeout($.ready,1);else if(P.addEventListener)P.addEventListener("DOMContentLoaded",ma,!1),a.addEventListener("load",$.ready,!1);else{P.attachEvent("onreadystatechange",ma),a.attachEvent("onload",$.ready);var c=!1;try{c=null==a.frameElement&&P.documentElement}catch(a){}c&&c.doScroll&&function a(){if(!$.isReady){try{c.doScroll("left")}catch(b){return setTimeout(a,50)}$.ready()}}()}return O.promise(b)},$.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){na["[object "+b+"]"]=b.toLowerCase()}),N=$(P);var oa={};$.Callbacks=function(a){a="string"==typeof a?oa[a]||c(a):$.extend({},a);var d,e,f,g,h,i,j=[],k=!a.once&&[],l=function(b){for(d=a.memory&&b,e=!0,i=g||0,g=0,h=j.length,f=!0;j&&i<h;i++)if(!1===j[i].apply(b[0],b[1])&&a.stopOnFalse){d=!1;break}f=!1,j&&(k?k.length&&l(k.shift()):d?j=[]:m.disable())},m={add:function(){if(j){var b=j.length;!function b(c){$.each(c,function(c,d){var e=$.type(d);"function"===e?a.unique&&m.has(d)||j.push(d):d&&d.length&&"string"!==e&&b(d)})}(arguments),f?h=j.length:d&&(g=b,l(d))}return this},remove:function(){return j&&$.each(arguments,function(a,b){for(var c;(c=$.inArray(b,j,c))>-1;)j.splice(c,1),f&&(c<=h&&h--,c<=i&&i--)}),this},has:function(a){return $.inArray(a,j)>-1},empty:function(){return j=[],this},disable:function(){return j=k=d=b,this},disabled:function(){return!j},lock:function(){return k=b,d||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],!j||e&&!k||(f?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!e}};return m},$.extend({Deferred:function(a){var b=[["resolve","done",$.Callbacks("once memory"),"resolved"],["reject","fail",$.Callbacks("once memory"),"rejected"],["notify","progress",$.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return $.Deferred(function(c){$.each(b,function(b,d){var f=d[0],g=a[b];e[d[1]]($.isFunction(g)?function(){var a=g.apply(this,arguments);a&&$.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f+"With"](this===e?c:this,[a])}:c[f])}),a=null}).promise()},promise:function(a){return null!=a?$.extend(a,d):d}},e={};return d.pipe=d.then,$.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=g.fire,e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=V.call(arguments),g=f.length,h=1!==g||a&&$.isFunction(a.promise)?g:0,i=1===h?a:$.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?V.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);e<g;e++)f[e]&&$.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}}),$.support=function(){var b,c,d,e,f,g,h,i,j,k,l,m=P.createElement("div")
;if(m.setAttribute("className","t"),m.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=m.getElementsByTagName("*"),d=m.getElementsByTagName("a")[0],!c||!d||!c.length)return{};e=P.createElement("select"),f=e.appendChild(P.createElement("option")),g=m.getElementsByTagName("input")[0],d.style.cssText="top:1px;float:left;opacity:.5",b={leadingWhitespace:3===m.firstChild.nodeType,tbody:!m.getElementsByTagName("tbody").length,htmlSerialize:!!m.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:"on"===g.value,optSelected:f.selected,getSetAttribute:"t"!==m.className,enctype:!!P.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==P.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===P.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},g.checked=!0,b.noCloneChecked=g.cloneNode(!0).checked,e.disabled=!0,b.optDisabled=!f.disabled;try{delete m.test}catch(a){b.deleteExpando=!1}if(!m.addEventListener&&m.attachEvent&&m.fireEvent&&(m.attachEvent("onclick",l=function(){b.noCloneEvent=!1}),m.cloneNode(!0).fireEvent("onclick"),m.detachEvent("onclick",l)),g=P.createElement("input"),g.value="t",g.setAttribute("type","radio"),b.radioValue="t"===g.value,g.setAttribute("checked","checked"),g.setAttribute("name","t"),m.appendChild(g),h=P.createDocumentFragment(),h.appendChild(m.lastChild),b.checkClone=h.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=g.checked,h.removeChild(g),h.appendChild(m),m.attachEvent)for(j in{submit:!0,change:!0,focusin:!0})i="on"+j,k=i in m,k||(m.setAttribute(i,"return;"),k="function"==typeof m[i]),b[j+"Bubbles"]=k;return $(function(){var c,d,e,f,g="padding:0;margin:0;border:0;display:block;overflow:hidden;",h=P.getElementsByTagName("body")[0];h&&(c=P.createElement("div"),c.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",h.insertBefore(c,h.firstChild),d=P.createElement("div"),c.appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=d.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",k=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",b.reliableHiddenOffsets=k&&0===e[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.boxSizing=4===d.offsetWidth,b.doesNotIncludeMarginInBodyOffset=1!==h.offsetTop,a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(d,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(d,null)||{width:"4px"}).width,f=P.createElement("div"),f.style.cssText=d.style.cssText=g,f.style.marginRight=f.style.width="0",d.style.width="1px",d.appendChild(f),b.reliableMarginRight=!parseFloat((a.getComputedStyle(f,null)||{}).marginRight)),void 0!==d.style.zoom&&(d.innerHTML="",d.style.cssText=g+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.style.overflow="visible",d.innerHTML="<div></div>",d.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==d.offsetWidth,c.style.zoom=1),h.removeChild(c),c=d=e=f=null)}),h.removeChild(m),c=d=e=f=g=h=m=null,b}();var pa=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,qa=/([A-Z])/g;$.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+($.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return!!(a=a.nodeType?$.cache[a[$.expando]]:a[$.expando])&&!e(a)},data:function(a,c,d,e){if($.acceptData(a)){var f,g,h=$.expando,i="string"==typeof c,j=a.nodeType,k=j?$.cache:a,l=j?a[h]:a[h]&&h;if(l&&k[l]&&(e||k[l].data)||!i||d!==b)return l||(j?a[h]=l=$.deletedIds.pop()||$.guid++:l=h),k[l]||(k[l]={},j||(k[l].toJSON=$.noop)),"object"!=typeof c&&"function"!=typeof c||(e?k[l]=$.extend(k[l],c):k[l].data=$.extend(k[l].data,c)),f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[$.camelCase(c)]=d),i?null==(g=f[c])&&(g=f[$.camelCase(c)]):g=f,g}},removeData:function(a,b,c){if($.acceptData(a)){var d,f,g,h=a.nodeType,i=h?$.cache:a,j=h?a[$.expando]:$.expando;if(i[j]){if(b&&(d=c?i[j]:i[j].data)){$.isArray(b)||(b in d?b=[b]:(b=$.camelCase(b),b=b in d?[b]:b.split(" ")));for(f=0,g=b.length;f<g;f++)delete d[b[f]];if(!(c?e:$.isEmptyObject)(d))return}(c||(delete i[j].data,e(i[j])))&&(h?$.cleanData([a],!0):$.support.deleteExpando||i!=i.window?delete i[j]:i[j]=null)}}},_data:function(a,b,c){return $.data(a,b,c,!0)},acceptData:function(a){var b=a.nodeName&&$.noData[a.nodeName.toLowerCase()];return!b||!0!==b&&a.getAttribute("classid")===b}}),$.fn.extend({data:function(a,c){var e,f,g,h,i,j=this[0],k=0,l=null;if(a===b){if(this.length&&(l=$.data(j),1===j.nodeType&&!$._data(j,"parsedAttrs"))){for(g=j.attributes,i=g.length;k<i;k++)h=g[k].name,h.indexOf("data-")||(h=$.camelCase(h.substring(5)),d(j,h,l[h]));$._data(j,"parsedAttrs",!0)}return l}return"object"==typeof a?this.each(function(){$.data(this,a)}):(e=a.split(".",2),e[1]=e[1]?"."+e[1]:"",f=e[1]+"!",$.access(this,function(c){if(c===b)return l=this.triggerHandler("getData"+f,[e[0]]),l===b&&j&&(l=$.data(j,a),l=d(j,a,l)),l===b&&e[1]?this.data(e[0]):l;e[1]=c,this.each(function(){var b=$(this);b.triggerHandler("setData"+f,e),$.data(this,a,c),b.triggerHandler("changeData"+f,e)})},null,c,arguments.length>1,null,!1))},removeData:function(a){return this.each(function(){$.removeData(this,a)})}}),$.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=$._data(a,b),c&&(!d||$.isArray(c)?d=$._data(a,b,$.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=$.queue(a,b),d=c.length,e=c.shift(),f=$._queueHooks(a,b),g=function(){$.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return $._data(a,c)||$._data(a,c,{empty:$.Callbacks("once memory").add(function(){$.removeData(a,b+"queue",!0),$.removeData(a,c,!0)})})}}),$.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),arguments.length<d?$.queue(this[0],a):c===b?this:this.each(function(){var b=$.queue(this,a,c);$._queueHooks(this,a),"fx"===a&&"inprogress"!==b[0]&&$.dequeue(this,a)})},dequeue:function(a){return this.each(function(){$.dequeue(this,a)})},delay:function(a,b){return a=$.fx?$.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=$.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(c=a,a=b),a=a||"fx";h--;)(d=$._data(g[h],a+"queueHooks"))&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var ra,sa,ta,ua=/[\t\r\n]/g,va=/\r/g,wa=/^(?:button|input)$/i,xa=/^(?:button|input|object|select|textarea)$/i,ya=/^a(?:rea|)$/i,za=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Aa=$.support.getSetAttribute;$.fn.extend({attr:function(a,b){return $.access(this,$.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){$.removeAttr(this,a)})},prop:function(a,b){return $.access(this,$.prop,a,b,arguments.length>1)},removeProp:function(a){return a=$.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(a){}})},addClass:function(a){var b,c,d,e,f,g,h;if($.isFunction(a))return this.each(function(b){$(this).addClass(a.call(this,b,this.className))});if(a&&"string"==typeof a)for(b=a.split(ba),c=0,d=this.length;c<d;c++)if(e=this[c],1===e.nodeType)if(e.className||1!==b.length){for(f=" "+e.className+" ",g=0,h=b.length;g<h;g++)f.indexOf(" "+b[g]+" ")<0&&(f+=b[g]+" ");e.className=$.trim(f)}else e.className=a;return this},removeClass:function(a){var c,d,e,f,g,h,i;if($.isFunction(a))return this.each(function(b){$(this).removeClass(a.call(this,b,this.className))});if(a&&"string"==typeof a||a===b)for(c=(a||"").split(ba),h=0,i=this.length;h<i;h++)if(e=this[h],1===e.nodeType&&e.className){for(d=(" "+e.className+" ").replace(ua," "),f=0,g=c.length;f<g;f++)for(;d.indexOf(" "+c[f]+" ")>=0;)d=d.replace(" "+c[f]+" "," ");e.className=a?$.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"==typeof b;return $.isFunction(a)?this.each(function(c){$(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var e,f=0,g=$(this),h=b,i=a.split(ba);e=i[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else"undefined"!==c&&"boolean"!==c||(this.className&&$._data(this,"__className__",this.className),this.className=this.className||!1===a?"":$._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;c<d;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ua," ").indexOf(b)>=0)return!0;return!1},val:function(a){var c,d,e,f=this[0];{if(arguments.length)return e=$.isFunction(a),this.each(function(d){var f,g=$(this);1===this.nodeType&&(f=e?a.call(this,d,g.val()):a,null==f?f="":"number"==typeof f?f+="":$.isArray(f)&&(f=$.map(f,function(a){return null==a?"":a+""})),(c=$.valHooks[this.type]||$.valHooks[this.nodeName.toLowerCase()])&&"set"in c&&c.set(this,f,"value")!==b||(this.value=f))});if(f)return(c=$.valHooks[f.type]||$.valHooks[f.nodeName.toLowerCase()])&&"get"in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,"string"==typeof d?d.replace(va,""):null==d?"":d)}}}),$.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||e<0,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;i<h;i++)if(c=d[i],(c.selected||i===e)&&($.support.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!$.nodeName(c.parentNode,"optgroup"))){if(b=$(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c=$.makeArray(b);return $(a).find("option").each(function(){this.selected=$.inArray($(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(a&&3!==i&&8!==i&&2!==i)return e&&$.isFunction($.fn[c])?$(a)[c](d):void 0===a.getAttribute?$.prop(a,c,d):(h=1!==i||!$.isXMLDoc(a),h&&(c=c.toLowerCase(),g=$.attrHooks[c]||(za.test(c)?sa:ra)),d!==b?null===d?void $.removeAttr(a,c):g&&"set"in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,d+""),d):g&&"get"in g&&h&&null!==(f=g.get(a,c))?f:(f=a.getAttribute(c),null===f?b:f))},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&1===a.nodeType)for(d=b.split(ba);g<d.length;g++)(e=d[g])&&(c=$.propFix[e]||e,f=za.test(e),f||$.attr(a,e,""),a.removeAttribute(Aa?e:c),f&&c in a&&(a[c]=!1))},attrHooks:{type:{set:function(a,b){if(wa.test(a.nodeName)&&a.parentNode)$.error("type property can't be changed");else if(!$.support.radioValue&&"radio"===b&&$.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return ra&&$.nodeName(a,"button")?ra.get(a,b):b in a?a.value:null},set:function(a,b,c){if(ra&&$.nodeName(a,"button"))return ra.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return g=1!==h||!$.isXMLDoc(a),g&&(c=$.propFix[c]||c,f=$.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):xa.test(a.nodeName)||ya.test(a.nodeName)&&a.href?0:b}}}}),sa={get:function(a,c){var d,e=$.prop(a,c);return!0===e||"boolean"!=typeof e&&(d=a.getAttributeNode(c))&&!1!==d.nodeValue?c.toLowerCase():b},set:function(a,b,c){var d;return!1===b?$.removeAttr(a,c):(d=$.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},Aa||(ta={name:!0,id:!0,coords:!0},ra=$.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(ta[c]?""!==d.value:d.specified)?d.value:b},set:function(a,b,c){var d=a.getAttributeNode(c);return d||(d=P.createAttribute(c),a.setAttributeNode(d)),d.value=b+""}},$.each(["width","height"],function(a,b){$.attrHooks[b]=$.extend($.attrHooks[b],{set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}})}),$.attrHooks.contenteditable={get:ra.get,set:function(a,b,c){""===b&&(b="false"),ra.set(a,b,c)}}),$.support.hrefNormalized||$.each(["href","src","width","height"],function(a,c){$.attrHooks[c]=$.extend($.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return null===d?b:d}})}),$.support.style||($.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=b+""}}),$.support.optSelected||($.propHooks.selected=$.extend($.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),$.support.enctype||($.propFix.enctype="encoding"),$.support.checkOn||$.each(["radio","checkbox"],function(){$.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}}),$.each(["radio","checkbox"],function(){$.valHooks[this]=$.extend($.valHooks[this],{set:function(a,b){if($.isArray(b))return a.checked=$.inArray($(a).val(),b)>=0}})});var Ba=/^(?:textarea|input|select)$/i,Ca=/^([^\.]*|)(?:\.(.+)|)$/,Da=/(?:^|\s)hover(\.\S+|)\b/,Ea=/^key/,Fa=/^(?:mouse|contextmenu)|click/,Ga=/^(?:focusinfocus|focusoutblur)$/,Ha=function(a){return $.event.special.hover?a:a.replace(Da,"mouseenter$1 mouseleave$1")};$.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q;if(3!==a.nodeType&&8!==a.nodeType&&c&&d&&(g=$._data(a))){for(d.handler&&(o=d,d=o.handler,f=o.selector),d.guid||(d.guid=$.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return void 0===$||a&&$.event.triggered===a.type?b:$.event.dispatch.apply(h.elem,arguments)},h.elem=a),c=$.trim(Ha(c)).split(" "),j=0;j<c.length;j++)k=Ca.exec(c[j])||[],l=k[1],m=(k[2]||"").split(".").sort(),q=$.event.special[l]||{},l=(f?q.delegateType:q.bindType)||l,q=$.event.special[l]||{},n=$.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&$.expr.match.needsContext.test(f),namespace:m.join(".")},o),p=i[l],p||(p=i[l]=[],p.delegateCount=0,q.setup&&!1!==q.setup.call(a,e,m,h)||(a.addEventListener?a.addEventListener(l,h,!1):a.attachEvent&&a.attachEvent("on"+l,h))),q.add&&(q.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?p.splice(p.delegateCount++,0,n):p.push(n),$.event.global[l]=!0;a=null}},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=$.hasData(a)&&$._data(a);if(q&&(m=q.events)){for(b=$.trim(Ha(b||"")).split(" "),f=0;f<b.length;f++)if(g=Ca.exec(b[f])||[],h=i=g[1],j=g[2],h){for(n=$.event.special[h]||{},h=(d?n.delegateType:n.bindType)||h,o=m[h]||[],k=o.length,j=j?new RegExp("(^|\\.)"+j.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l=0;l<o.length;l++)p=o[l],!e&&i!==p.origType||c&&c.guid!==p.guid||j&&!j.test(p.namespace)||d&&d!==p.selector&&("**"!==d||!p.selector)||(o.splice(l--,1),p.selector&&o.delegateCount--,n.remove&&n.remove.call(a,p));0===o.length&&k!==o.length&&(n.teardown&&!1!==n.teardown.call(a,j,q.handle)||$.removeEvent(a,h,q.handle),delete m[h])}else for(h in m)$.event.remove(a,h+b[f],c,d,!0);$.isEmptyObject(m)&&(delete q.handle,$.removeData(a,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,f){if(!e||3!==e.nodeType&&8!==e.nodeType){var g,h,i,j,k,l,m,n,o,p,q=c.type||c,r=[];if(!Ga.test(q+$.event.triggered)&&(q.indexOf("!")>=0&&(q=q.slice(0,-1),h=!0),q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),e&&!$.event.customEvent[q]||$.event.global[q]))if(c="object"==typeof c?c[$.expando]?c:new $.Event(q,c):new $.Event(q),c.type=q,c.isTrigger=!0,c.exclusive=h,c.namespace=r.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l=q.indexOf(":")<0?"on"+q:"",e){if(c.result=b,c.target||(c.target=e),d=null!=d?$.makeArray(d):[],d.unshift(c),m=$.event.special[q]||{},!m.trigger||!1!==m.trigger.apply(e,d)){if(o=[[e,m.bindType||q]],!f&&!m.noBubble&&!$.isWindow(e)){for(p=m.delegateType||q,j=Ga.test(p+q)?e:e.parentNode,k=e;j;j=j.parentNode)o.push([j,p]),k=j;k===(e.ownerDocument||P)&&o.push([k.defaultView||k.parentWindow||a,p])}for(i=0;i<o.length&&!c.isPropagationStopped();i++)j=o[i][0],c.type=o[i][1],n=($._data(j,"events")||{})[c.type]&&$._data(j,"handle"),n&&n.apply(j,d),(n=l&&j[l])&&$.acceptData(j)&&n.apply&&!1===n.apply(j,d)&&c.preventDefault();return c.type=q,f||c.isDefaultPrevented()||m._default&&!1!==m._default.apply(e.ownerDocument,d)||"click"===q&&$.nodeName(e,"a")||!$.acceptData(e)||l&&e[q]&&("focus"!==q&&"blur"!==q||0!==c.target.offsetWidth)&&!$.isWindow(e)&&(k=e[l],k&&(e[l]=null),$.event.triggered=q,e[q](),$.event.triggered=b,k&&(e[l]=k)),c.result}}else{g=$.cache;for(i in g)g[i].events&&g[i].events[q]&&$.event.trigger(c,d,g[i].handle.elem,!0)}}},dispatch:function(c){c=$.event.fix(c||a.event);var d,e,f,g,h,i,j,k,l,m=($._data(this,"events")||{})[c.type]||[],n=m.delegateCount,o=V.call(arguments),p=!c.exclusive&&!c.namespace,q=$.event.special[c.type]||{},r=[];if(o[0]=c,c.delegateTarget=this,!q.preDispatch||!1!==q.preDispatch.call(this,c)){if(n&&(!c.button||"click"!==c.type))for(f=c.target;f!=this;f=f.parentNode||this)if(!0!==f.disabled||"click"!==c.type){for(h={},j=[],d=0;d<n;d++)k=m[d],l=k.selector,h[l]===b&&(h[l]=k.needsContext?$(l,this).index(f)>=0:$.find(l,this,null,[f]).length),h[l]&&j.push(k);j.length&&r.push({elem:f,matches:j})}for(m.length>n&&r.push({elem:this,matches:m.slice(n)}),d=0;d<r.length&&!c.isPropagationStopped();d++)for(i=r[d],c.currentTarget=i.elem,e=0;e<i.matches.length&&!c.isImmediatePropagationStopped();e++)k=i.matches[e],(p||!c.namespace&&!k.namespace||c.namespace_re&&c.namespace_re.test(k.namespace))&&(c.data=k.data,c.handleObj=k,(g=(($.event.special[k.origType]||{}).handle||k.handler).apply(i.elem,o))!==b&&(c.result=g,!1===g&&(c.preventDefault(),c.stopPropagation())));return q.postDispatch&&q.postDispatch.call(this,c),c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return null==a.pageX&&null!=c.clientX&&(d=a.target.ownerDocument||P,e=d.documentElement,f=d.body,a.pageX=c.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=c.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),a.which||g===b||(a.which=1&g?1:2&g?3:4&g?2:0),a}},fix:function(a){if(a[$.expando])return a;var b,c,d=a,e=$.event.fixHooks[a.type]||{},f=e.props?this.props.concat(e.props):this.props;for(a=$.Event(d),b=f.length;b;)c=f[--b],a[c]=d[c];return a.target||(a.target=d.srcElement||P),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,e.filter?e.filter(a,d):a},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){$.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=$.extend(new $.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?$.event.trigger(e,null,b):$.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},$.event.handle=$.event.dispatch,$.removeEvent=P.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(void 0===a[d]&&(a[d]=null),a.detachEvent(d,c))},$.Event=function(a,b){if(!(this instanceof $.Event))return new $.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?g:f):this.type=a,b&&$.extend(this,b),this.timeStamp=a&&a.timeStamp||$.now(),this[$.expando]=!0},$.Event.prototype={preventDefault:function(){this.isDefaultPrevented=g;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=g;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=g,this.stopPropagation()},isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f},$.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){$.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;f.selector;return e&&(e===d||$.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),$.support.submitBubbles||($.event.special.submit={setup:function(){if($.nodeName(this,"form"))return!1;$.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=$.nodeName(c,"input")||$.nodeName(c,"button")?c.form:b;d&&!$._data(d,"_submit_attached")&&($.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),$._data(d,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&$.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if($.nodeName(this,"form"))return!1;$.event.remove(this,"._submit")}}),$.support.changeBubbles||($.event.special.change={setup:function(){if(Ba.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||($.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),$.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),$.event.simulate("change",this,a,!0)})),!1;$.event.add(this,"beforeactivate._change",function(a){var b=a.target;Ba.test(b.nodeName)&&!$._data(b,"_change_attached")&&($.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||$.event.simulate("change",this.parentNode,a,!0)}),$._data(b,"_change_attached",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){return $.event.remove(this,"._change"),!Ba.test(this.nodeName)}}),$.support.focusinBubbles||$.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){$.event.simulate(b,a.target,$.event.fix(a),!0)};$.event.special[b]={setup:function(){0==c++&&P.addEventListener(a,d,!0)},teardown:function(){0==--c&&P.removeEventListener(a,d,!0)}}}),$.fn.extend({on:function(a,c,d,e,g){var h,i;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),!1===e)e=f;else if(!e)return this;return 1===g&&(h=e,e=function(a){return $().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=$.guid++)),this.each(function(){$.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,g;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,$(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(g in a)this.off(g,c,a[g]);return this}return!1!==c&&"function"!=typeof c||(d=c,c=b),!1===d&&(d=f),this.each(function(){$.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return $(this.context).on(a,this.selector,b,c),this},die:function(a,b){return $(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){$.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return $.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||$.guid++,d=0,e=function(c){var e=($._data(this,"lastToggle"+a.guid)||0)%d;return $._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};for(e.guid=c;d<b.length;)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),$.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){$.fn[b]=function(a,c){return null==c&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},Ea.test(b)&&($.event.fixHooks[b]=$.event.keyHooks),Fa.test(b)&&($.event.fixHooks[b]=$.event.mouseHooks)}),function(a,b){function c(a,b,c,d){c=c||[],b=b||F;var e,f,g,h,i=b.nodeType;if(!a||"string"!=typeof a)return c;if(1!==i&&9!==i)return[];if(!(g=v(b))&&!d&&(e=ca.exec(a)))if(h=e[1]){if(9===i){if(!(f=b.getElementById(h))||!f.parentNode)return c;if(f.id===h)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(h))&&w(b,f)&&f.id===h)return c.push(f),c}else{if(e[2])return K.apply(c,L.call(b.getElementsByTagName(a),0)),c;if((h=e[3])&&ma&&b.getElementsByClassName)return K.apply(c,L.call(b.getElementsByClassName(h),0)),c}return p(a.replace(Z,"$1"),b,c,d,g)}function d(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function e(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function f(a){return N(function(b){return b=+b,N(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function g(a,b,c){if(a===b)return c;for(var d=a.nextSibling;d;){if(d===b)return-1;d=d.nextSibling}return 1}function h(a,b){var d,e,f,g,h,i,j,k=Q[D][a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=t.preFilter;h;){d&&!(e=_.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=aa.exec(h))&&(f.push(d=new E(e.shift())),h=h.slice(d.length),d.type=e[0].replace(Z," "));for(g in t.filter)!(e=ha[g].exec(h))||j[g]&&!(e=j[g](e))||(f.push(d=new E(e.shift())),h=h.slice(d.length),d.type=g,d.matches=e);if(!d)break}return b?h.length:h?c.error(a):Q(a,i).slice(0)}function i(a,b,c){var d=b.dir,e=c&&"parentNode"===b.dir,f=I++;return b.first?function(b,c,f){for(;b=b[d];)if(e||1===b.nodeType)return a(b,c,f)}:function(b,c,g){if(g){for(;b=b[d];)if((e||1===b.nodeType)&&a(b,c,g))return b}else for(var h,i=H+" "+f+" ",j=i+r;b=b[d];)if(e||1===b.nodeType){if((h=b[D])===j)return b.sizset;if("string"==typeof h&&0===h.indexOf(i)){if(b.sizset)return b}else{if(b[D]=j,a(b,c,g))return b.sizset=!0,b;b.sizset=!1}}}}function j(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function k(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function l(a,b,c,d,e,f){return d&&!d[D]&&(d=l(d)),e&&!e[D]&&(e=l(e,f)),N(function(f,g,h,i){var j,l,m,n=[],p=[],q=g.length,r=f||o(b||"*",h.nodeType?[h]:h,[]),s=!a||!f&&b?r:k(r,n,a,h,i),t=c?e||(f?a:q||d)?[]:g:s;if(c&&c(s,t,h,i),d)for(j=k(t,p),d(j,[],h,i),l=j.length;l--;)(m=j[l])&&(t[p[l]]=!(s[p[l]]=m));if(f){if(e||a){if(e){for(j=[],l=t.length;l--;)(m=t[l])&&j.push(s[l]=m);e(null,t=[],j,i)}for(l=t.length;l--;)(m=t[l])&&(j=e?M.call(f,m):n[l])>-1&&(f[j]=!(g[j]=m))}}else t=k(t===g?t.splice(q,t.length):t),e?e(null,g,t,i):K.apply(g,t)})}function m(a){for(var b,c,d,e=a.length,f=t.relative[a[0].type],g=f||t.relative[" "],h=f?1:0,k=i(function(a){return a===b},g,!0),n=i(function(a){return M.call(b,a)>-1},g,!0),o=[function(a,c,d){return!f&&(d||c!==A)||((b=c).nodeType?k(a,c,d):n(a,c,d))}];h<e;h++)if(c=t.relative[a[h].type])o=[i(j(o),c)];else{if(c=t.filter[a[h].type].apply(null,a[h].matches),c[D]){for(d=++h;d<e&&!t.relative[a[d].type];d++);return l(h>1&&j(o),h>1&&a.slice(0,h-1).join("").replace(Z,"$1"),c,h<d&&m(a.slice(h,d)),d<e&&m(a=a.slice(d)),d<e&&a.join(""))}o.push(c)}return j(o)}function n(a,b){var d=b.length>0,e=a.length>0,f=function(g,h,i,j,l){var m,n,o,p=[],q=0,s="0",u=g&&[],v=null!=l,w=A,x=g||e&&t.find.TAG("*",l&&h.parentNode||h),y=H+=null==w?1:Math.E;for(v&&(A=h!==F&&h,r=f.el);null!=(m=x[s]);s++){if(e&&m){for(n=0;o=a[n];n++)if(o(m,h,i)){j.push(m);break}v&&(H=y,r=++f.el)}d&&((m=!o&&m)&&q--,g&&u.push(m))}if(q+=s,d&&s!==q){for(n=0;o=b[n];n++)o(u,p,h,i);if(g){if(q>0)for(;s--;)u[s]||p[s]||(p[s]=J.call(j));p=k(p)}K.apply(j,p),v&&!g&&p.length>0&&q+b.length>1&&c.uniqueSort(j)}return v&&(H=y,A=w),u};return f.el=0,d?N(f):f}function o(a,b,d){for(var e=0,f=b.length;e<f;e++)c(a,b[e],d);return d}function p(a,b,c,d,e){var f,g,i,j,k,l=h(a);l.length;if(!d&&1===l.length){if(g=l[0]=l[0].slice(0),g.length>2&&"ID"===(i=g[0]).type&&9===b.nodeType&&!e&&t.relative[g[1].type]){if(!(b=t.find.ID(i.matches[0].replace(ga,""),b,e)[0]))return c;a=a.slice(g.shift().length)}for(f=ha.POS.test(a)?-1:g.length-1;f>=0&&(i=g[f],!t.relative[j=i.type]);f--)if((k=t.find[j])&&(d=k(i.matches[0].replace(ga,""),da.test(g[0].type)&&b.parentNode||b,e))){if(g.splice(f,1),!(a=d.length&&g.join("")))return K.apply(c,L.call(d,0)),c;break}}return x(a,l)(d,b,e,c,da.test(a)),c}function q(){}var r,s,t,u,v,w,x,y,z,A,B=!0,C="undefined",D=("sizcache"+Math.random()).replace(".",""),E=String,F=a.document,G=F.documentElement,H=0,I=0,J=[].pop,K=[].push,L=[].slice,M=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},N=function(a,b){return a[D]=null==b||b,a},O=function(){var a={},b=[];return N(function(c,d){return b.push(c)>t.cacheLength&&delete a[b.shift()],a[c+" "]=d},a)},P=O(),Q=O(),R=O(),S="[\\x20\\t\\r\\n\\f]",T="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",U=T.replace("w","w#"),V="([*^$|!~]?=)",W="\\["+S+"*("+T+")"+S+"*(?:"+V+S+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+U+")|)|)"+S+"*\\]",X=":("+T+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+W+")|[^:]|\\\\.)*|.*))\\)|)",Y=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+S+"*((?:-\\d)?\\d*)"+S+"*\\)|)(?=[^-]|$)",Z=new RegExp("^"+S+"+|((?:^|[^\\\\])(?:\\\\.)*)"+S+"+$","g"),_=new RegExp("^"+S+"*,"+S+"*"),aa=new RegExp("^"+S+"*([\\x20\\t\\r\\n\\f>+~])"+S+"*"),ba=new RegExp(X),ca=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,da=/[\x20\t\r\n\f]*[+~]/,ea=/h\d/i,fa=/input|select|textarea|button/i,ga=/\\(?!\\)/g,ha={ID:new RegExp("^#("+T+")"),CLASS:new RegExp("^\\.("+T+")"),NAME:new RegExp("^\\[name=['\"]?("+T+")['\"]?\\]"),TAG:new RegExp("^("+T.replace("w","w*")+")"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+X),POS:new RegExp(Y,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+S+"*(even|odd|(([+-]|)(\\d*)n|)"+S+"*(?:([+-]|)"+S+"*(\\d+)|))"+S+"*\\)|)","i"),needsContext:new RegExp("^"+S+"*[>+~]|"+Y,"i")},ia=function(a){var b=F.createElement("div");try{return a(b)}catch(a){return!1}finally{b=null}},ja=ia(function(a){return a.appendChild(F.createComment("")),!a.getElementsByTagName("*").length}),ka=ia(function(a){return a.innerHTML="<a href='#'></a>",
a.firstChild&&typeof a.firstChild.getAttribute!==C&&"#"===a.firstChild.getAttribute("href")}),la=ia(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");return"boolean"!==b&&"string"!==b}),ma=ia(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!(!a.getElementsByClassName||!a.getElementsByClassName("e").length)&&(a.lastChild.className="e",2===a.getElementsByClassName("e").length)}),na=ia(function(a){a.id=D+0,a.innerHTML="<a name='"+D+"'></a><div name='"+D+"'></div>",G.insertBefore(a,G.firstChild);var b=F.getElementsByName&&F.getElementsByName(D).length===2+F.getElementsByName(D+0).length;return s=!F.getElementById(D),G.removeChild(a),b});try{L.call(G.childNodes,0)[0].nodeType}catch(a){L=function(a){for(var b,c=[];b=this[a];a++)c.push(b);return c}}c.matches=function(a,b){return c(a,null,null,b)},c.matchesSelector=function(a,b){return c(b,null,null,[a]).length>0},u=c.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=u(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=u(b);return c},v=c.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},w=c.contains=G.contains?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&1===d.nodeType&&c.contains&&c.contains(d))}:G.compareDocumentPosition?function(a,b){return b&&!!(16&a.compareDocumentPosition(b))}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;return!1},c.attr=function(a,b){var c,d=v(a);return d||(b=b.toLowerCase()),(c=t.attrHandle[b])?c(a):d||la?a.getAttribute(b):(c=a.getAttributeNode(b),c?"boolean"==typeof a[b]?a[b]?b:null:c.specified?c.value:null:null)},t=c.selectors={cacheLength:50,createPseudo:N,match:ha,attrHandle:ka?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},find:{ID:s?function(a,b,c){if(typeof b.getElementById!==C&&!c){var d=b.getElementById(a);return d&&d.parentNode?[d]:[]}}:function(a,c,d){if(typeof c.getElementById!==C&&!d){var e=c.getElementById(a);return e?e.id===a||typeof e.getAttributeNode!==C&&e.getAttributeNode("id").value===a?[e]:b:[]}},TAG:ja?function(a,b){if(typeof b.getElementsByTagName!==C)return b.getElementsByTagName(a)}:function(a,b){var c=b.getElementsByTagName(a);if("*"===a){for(var d,e=[],f=0;d=c[f];f++)1===d.nodeType&&e.push(d);return e}return c},NAME:na&&function(a,b){if(typeof b.getElementsByName!==C)return b.getElementsByName(name)},CLASS:ma&&function(a,b,c){if(typeof b.getElementsByClassName!==C&&!c)return b.getElementsByClassName(a)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ga,""),a[3]=(a[4]||a[5]||"").replace(ga,""),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1]?(a[2]||c.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*("even"===a[2]||"odd"===a[2])),a[4]=+(a[6]+a[7]||"odd"===a[2])):a[2]&&c.error(a[0]),a},PSEUDO:function(a){var b,c;return ha.CHILD.test(a[0])?null:(a[3]?a[2]=a[3]:(b=a[4])&&(ba.test(b)&&(c=h(b,!0))&&(c=b.indexOf(")",b.length-c)-b.length)&&(b=b.slice(0,c),a[0]=a[0].slice(0,c)),a[2]=b),a.slice(0,3))}},filter:{ID:s?function(a){return a=a.replace(ga,""),function(b){return b.getAttribute("id")===a}}:function(a){return a=a.replace(ga,""),function(b){var c=typeof b.getAttributeNode!==C&&b.getAttributeNode("id");return c&&c.value===a}},TAG:function(a){return"*"===a?function(){return!0}:(a=a.replace(ga,"").toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=P[D][a+" "];return b||(b=new RegExp("(^|"+S+")"+a+"("+S+"|$)"))&&P(a,function(a){return b.test(a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")})},ATTR:function(a,b,d){return function(e,f){var g=c.attr(e,a);return null==g?"!="===b:!b||(g+="","="===b?g===d:"!="===b?g!==d:"^="===b?d&&0===g.indexOf(d):"*="===b?d&&g.indexOf(d)>-1:"$="===b?d&&g.substr(g.length-d.length)===d:"~="===b?(" "+g+" ").indexOf(d)>-1:"|="===b&&(g===d||g.substr(0,d.length+1)===d+"-"))}},CHILD:function(a,b,c,d){return"nth"===a?function(a){var b,e,f=a.parentNode;if(1===c&&0===d)return!0;if(f)for(e=0,b=f.firstChild;b&&(1!==b.nodeType||(e++,a!==b));b=b.nextSibling);return(e-=d)===c||e%c==0&&e/c>=0}:function(b){var c=b;switch(a){case"only":case"first":for(;c=c.previousSibling;)if(1===c.nodeType)return!1;if("first"===a)return!0;c=b;case"last":for(;c=c.nextSibling;)if(1===c.nodeType)return!1;return!0}}},PSEUDO:function(a,b){var d,e=t.pseudos[a]||t.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return e[D]?e(b):e.length>1?(d=[a,a,"",b],t.setFilters.hasOwnProperty(a.toLowerCase())?N(function(a,c){for(var d,f=e(a,b),g=f.length;g--;)d=M.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,d)}):e}},pseudos:{not:N(function(a){var b=[],c=[],d=x(a.replace(Z,"$1"));return d[D]?N(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:N(function(a){return function(b){return c(a,b).length>0}}),contains:N(function(a){return function(b){return(b.textContent||b.innerText||u(b)).indexOf(a)>-1}}),enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},parent:function(a){return!t.pseudos.empty(a)},empty:function(a){var b;for(a=a.firstChild;a;){if(a.nodeName>"@"||3===(b=a.nodeType)||4===b)return!1;a=a.nextSibling}return!0},header:function(a){return ea.test(a.nodeName)},text:function(a){var b,c;return"input"===a.nodeName.toLowerCase()&&"text"===(b=a.type)&&(null==(c=a.getAttribute("type"))||c.toLowerCase()===b)},radio:d("radio"),checkbox:d("checkbox"),file:d("file"),password:d("password"),image:d("image"),submit:e("submit"),reset:e("reset"),button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return fa.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},active:function(a){return a===a.ownerDocument.activeElement},first:f(function(){return[0]}),last:f(function(a,b){return[b-1]}),eq:f(function(a,b,c){return[c<0?c+b:c]}),even:f(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:f(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:f(function(a,b,c){for(var d=c<0?c+b:c;--d>=0;)a.push(d);return a}),gt:f(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}},y=G.compareDocumentPosition?function(a,b){return a===b?(z=!0,0):(a.compareDocumentPosition&&b.compareDocumentPosition?4&a.compareDocumentPosition(b):a.compareDocumentPosition)?-1:1}:function(a,b){if(a===b)return z=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return g(a,b);if(!h)return-1;if(!i)return 1;for(;j;)e.unshift(j),j=j.parentNode;for(j=i;j;)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return g(e[k],f[k]);return k===c?g(a,f[k],-1):g(e[k],b,1)},[0,0].sort(y),B=!z,c.uniqueSort=function(a){var b,c=[],d=1,e=0;if(z=B,a.sort(y),z){for(;b=a[d];d++)b===a[d-1]&&(e=c.push(d));for(;e--;)a.splice(c[e],1)}return a},c.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},x=c.compile=function(a,b){var c,d=[],e=[],f=R[D][a+" "];if(!f){for(b||(b=h(a)),c=b.length;c--;)f=m(b[c]),f[D]?d.push(f):e.push(f);f=R(a,n(e,d))}return f},F.querySelectorAll&&function(){var a,b=p,d=/'|\\/g,e=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,f=[":focus"],g=[":active"],i=G.matchesSelector||G.mozMatchesSelector||G.webkitMatchesSelector||G.oMatchesSelector||G.msMatchesSelector;ia(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||f.push("\\["+S+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),a.querySelectorAll(":checked").length||f.push(":checked")}),ia(function(a){a.innerHTML="<p test=''></p>",a.querySelectorAll("[test^='']").length&&f.push("[*^$]="+S+"*(?:\"\"|'')"),a.innerHTML="<input type='hidden'/>",a.querySelectorAll(":enabled").length||f.push(":enabled",":disabled")}),f=new RegExp(f.join("|")),p=function(a,c,e,g,i){if(!g&&!i&&!f.test(a)){var j,k,l=!0,m=D,n=c,o=9===c.nodeType&&a;if(1===c.nodeType&&"object"!==c.nodeName.toLowerCase()){for(j=h(a),(l=c.getAttribute("id"))?m=l.replace(d,"\\$&"):c.setAttribute("id",m),m="[id='"+m+"'] ",k=j.length;k--;)j[k]=m+j[k].join("");n=da.test(a)&&c.parentNode||c,o=j.join(",")}if(o)try{return K.apply(e,L.call(n.querySelectorAll(o),0)),e}catch(a){}finally{l||c.removeAttribute("id")}}return b(a,c,e,g,i)},i&&(ia(function(b){a=i.call(b,"div");try{i.call(b,"[test!='']:sizzle"),g.push("!=",X)}catch(a){}}),g=new RegExp(g.join("|")),c.matchesSelector=function(b,d){if(d=d.replace(e,"='$1']"),!v(b)&&!g.test(d)&&!f.test(d))try{var h=i.call(b,d);if(h||a||b.document&&11!==b.document.nodeType)return h}catch(a){}return c(d,null,null,[b]).length>0})}(),t.pseudos.nth=t.pseudos.eq,t.filters=q.prototype=t.pseudos,t.setFilters=new q,c.attr=$.attr,$.find=c,$.expr=c.selectors,$.expr[":"]=$.expr.pseudos,$.unique=c.uniqueSort,$.text=c.getText,$.isXMLDoc=c.isXML,$.contains=c.contains}(a);var Ia=/Until$/,Ja=/^(?:parents|prev(?:Until|All))/,Ka=/^.[^:#\[\.,]*$/,La=$.expr.match.needsContext,Ma={children:!0,contents:!0,next:!0,prev:!0};$.fn.extend({find:function(a){var b,c,d,e,f,g,h=this;if("string"!=typeof a)return $(a).filter(function(){for(b=0,c=h.length;b<c;b++)if($.contains(h[b],this))return!0});for(g=this.pushStack("","find",a),b=0,c=this.length;b<c;b++)if(d=g.length,$.find(a,this[b],g),b>0)for(e=d;e<g.length;e++)for(f=0;f<d;f++)if(g[f]===g[e]){g.splice(e--,1);break}return g},has:function(a){var b,c=$(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if($.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(j(this,a,!1),"not",a)},filter:function(a){return this.pushStack(j(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"==typeof a?La.test(a)?$(a,this.context).index(this[0])>=0:$.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=La.test(a)||"string"!=typeof a?$(a,b||this.context):0;d<e;d++)for(c=this[d];c&&c.ownerDocument&&c!==b&&11!==c.nodeType;){if(g?g.index(c)>-1:$.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}return f=f.length>1?$.unique(f):f,this.pushStack(f,"closest",a)},index:function(a){return a?"string"==typeof a?$.inArray(this[0],$(a)):$.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c="string"==typeof a?$(a,b):$.makeArray(a&&a.nodeType?[a]:a),d=$.merge(this.get(),c);return this.pushStack(h(c[0])||h(d[0])?d:$.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),$.fn.andSelf=$.fn.addBack,$.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return $.dir(a,"parentNode")},parentsUntil:function(a,b,c){return $.dir(a,"parentNode",c)},next:function(a){return i(a,"nextSibling")},prev:function(a){return i(a,"previousSibling")},nextAll:function(a){return $.dir(a,"nextSibling")},prevAll:function(a){return $.dir(a,"previousSibling")},nextUntil:function(a,b,c){return $.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return $.dir(a,"previousSibling",c)},siblings:function(a){return $.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return $.sibling(a.firstChild)},contents:function(a){return $.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:$.merge([],a.childNodes)}},function(a,b){$.fn[a]=function(c,d){var e=$.map(this,b,c);return Ia.test(a)||(d=c),d&&"string"==typeof d&&(e=$.filter(d,e)),e=this.length>1&&!Ma[a]?$.unique(e):e,this.length>1&&Ja.test(a)&&(e=e.reverse()),this.pushStack(e,a,V.call(arguments).join(","))}}),$.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),1===b.length?$.find.matchesSelector(b[0],a)?[b[0]]:[]:$.find.matches(a,b)},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!$(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Na="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Oa=/ jQuery\d+="(?:null|\d+)"/g,Pa=/^\s+/,Qa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ra=/<([\w:]+)/,Sa=/<tbody/i,Ta=/<|&#?\w+;/,Ua=/<(?:script|style|link)/i,Va=/<(?:script|object|embed|option|style)/i,Wa=new RegExp("<(?:"+Na+")[\\s/>]","i"),Xa=/^(?:checkbox|radio)$/,Ya=/checked\s*(?:[^=]|=\s*.checked.)/i,Za=/\/(java|ecma)script/i,$a=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,_a={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ab=k(P),bb=ab.appendChild(P.createElement("div"));_a.optgroup=_a.option,_a.tbody=_a.tfoot=_a.colgroup=_a.caption=_a.thead,_a.th=_a.td,$.support.htmlSerialize||(_a._default=[1,"X<div>","</div>"]),$.fn.extend({text:function(a){return $.access(this,function(a){return a===b?$.text(this):this.empty().append((this[0]&&this[0].ownerDocument||P).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if($.isFunction(a))return this.each(function(b){$(this).wrapAll(a.call(this,b))});if(this[0]){var b=$(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return $.isFunction(a)?this.each(function(b){$(this).wrapInner(a.call(this,b))}):this.each(function(){var b=$(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=$.isFunction(a);return this.each(function(c){$(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){$.nodeName(this,"body")||$(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){1!==this.nodeType&&11!==this.nodeType||this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){1!==this.nodeType&&11!==this.nodeType||this.insertBefore(a,this.firstChild)})},before:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=$.clean(arguments);return this.pushStack($.merge(a,this),"before",this.selector)}},after:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=$.clean(arguments);return this.pushStack($.merge(this,a),"after",this.selector)}},remove:function(a,b){for(var c,d=0;null!=(c=this[d]);d++)a&&!$.filter(a,[c]).length||(b||1!==c.nodeType||($.cleanData(c.getElementsByTagName("*")),$.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)for(1===a.nodeType&&$.cleanData(a.getElementsByTagName("*"));a.firstChild;)a.removeChild(a.firstChild);return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return $.clone(this,a,b)})},html:function(a){return $.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(Oa,""):b;if("string"==typeof a&&!Ua.test(a)&&($.support.htmlSerialize||!Wa.test(a))&&($.support.leadingWhitespace||!Pa.test(a))&&!_a[(Ra.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Qa,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},1===c.nodeType&&($.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(a){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){return h(this[0])?this.length?this.pushStack($($.isFunction(a)?a():a),"replaceWith",a):this:$.isFunction(a)?this.each(function(b){var c=$(this),d=c.html();c.replaceWith(a.call(this,b,d))}):("string"!=typeof a&&(a=$(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;$(this).remove(),b?$(b).before(a):$(c).append(a)}))},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=[].concat.apply([],a);var e,f,g,h,i=0,j=a[0],k=[],m=this.length;if(!$.support.checkClone&&m>1&&"string"==typeof j&&Ya.test(j))return this.each(function(){$(this).domManip(a,c,d)});if($.isFunction(j))return this.each(function(e){var f=$(this);a[0]=j.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){if(e=$.buildFragment(a,this,k),g=e.fragment,f=g.firstChild,1===g.childNodes.length&&(g=f),f)for(c=c&&$.nodeName(f,"tr"),h=e.cacheable||m-1;i<m;i++)d.call(c&&$.nodeName(this[i],"table")?l(this[i],"tbody"):this[i],i===h?g:$.clone(g,!0,!0));g=f=null,k.length&&$.each(k,function(a,b){b.src?$.ajax?$.ajax({url:b.src,type:"GET",dataType:"script",async:!1,global:!1,throws:!0}):$.error("no ajax"):$.globalEval((b.text||b.textContent||b.innerHTML||"").replace($a,"")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),$.buildFragment=function(a,c,d){var e,f,g,h=a[0];return c=c||P,c=!c.nodeType&&c[0]||c,c=c.ownerDocument||c,!(1===a.length&&"string"==typeof h&&h.length<512&&c===P&&"<"===h.charAt(0))||Va.test(h)||!$.support.checkClone&&Ya.test(h)||!$.support.html5Clone&&Wa.test(h)||(f=!0,e=$.fragments[h],g=e!==b),e||(e=c.createDocumentFragment(),$.clean(a,c,e,d),f&&($.fragments[h]=g&&e)),{fragment:e,cacheable:f}},$.fragments={},$.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){$.fn[a]=function(c){var d,e=0,f=[],g=$(c),h=g.length,i=1===this.length&&this[0].parentNode;if((null==i||i&&11===i.nodeType&&1===i.childNodes.length)&&1===h)return g[b](this[0]),this;for(;e<h;e++)d=(e>0?this.clone(!0):this).get(),$(g[e])[b](d),f=f.concat(d);return this.pushStack(f,a,g.selector)}}),$.extend({clone:function(a,b,c){var d,e,f,g;if($.support.html5Clone||$.isXMLDoc(a)||!Wa.test("<"+a.nodeName+">")?g=a.cloneNode(!0):(bb.innerHTML=a.outerHTML,bb.removeChild(g=bb.firstChild)),!($.support.noCloneEvent&&$.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||$.isXMLDoc(a)))for(n(a,g),d=o(a),e=o(g),f=0;d[f];++f)e[f]&&n(d[f],e[f]);if(b&&(m(a,g),c))for(d=o(a),e=o(g),f=0;d[f];++f)m(d[f],e[f]);return d=e=null,g},clean:function(a,b,c,d){var e,f,g,h,i,j,l,m,n,o,q,r=b===P&&ab,s=[];for(b&&void 0!==b.createDocumentFragment||(b=P),e=0;null!=(g=a[e]);e++)if("number"==typeof g&&(g+=""),g){if("string"==typeof g)if(Ta.test(g)){for(r=r||k(b),l=b.createElement("div"),r.appendChild(l),g=g.replace(Qa,"<$1></$2>"),h=(Ra.exec(g)||["",""])[1].toLowerCase(),i=_a[h]||_a._default,j=i[0],l.innerHTML=i[1]+g+i[2];j--;)l=l.lastChild;if(!$.support.tbody)for(m=Sa.test(g),n="table"!==h||m?"<table>"!==i[1]||m?[]:l.childNodes:l.firstChild&&l.firstChild.childNodes,f=n.length-1;f>=0;--f)$.nodeName(n[f],"tbody")&&!n[f].childNodes.length&&n[f].parentNode.removeChild(n[f]);!$.support.leadingWhitespace&&Pa.test(g)&&l.insertBefore(b.createTextNode(Pa.exec(g)[0]),l.firstChild),g=l.childNodes,l.parentNode.removeChild(l)}else g=b.createTextNode(g);g.nodeType?s.push(g):$.merge(s,g)}if(l&&(g=l=r=null),!$.support.appendChecked)for(e=0;null!=(g=s[e]);e++)$.nodeName(g,"input")?p(g):void 0!==g.getElementsByTagName&&$.grep(g.getElementsByTagName("input"),p);if(c)for(o=function(a){if(!a.type||Za.test(a.type))return d?d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a)},e=0;null!=(g=s[e]);e++)$.nodeName(g,"script")&&o(g)||(c.appendChild(g),void 0!==g.getElementsByTagName&&(q=$.grep($.merge([],g.getElementsByTagName("script")),o),s.splice.apply(s,[e+1,0].concat(q)),e+=q.length));return s},cleanData:function(a,b){for(var c,d,e,f,g=0,h=$.expando,i=$.cache,j=$.support.deleteExpando,k=$.event.special;null!=(e=a[g]);g++)if((b||$.acceptData(e))&&(d=e[h],c=d&&i[d])){if(c.events)for(f in c.events)k[f]?$.event.remove(e,f):$.removeEvent(e,f,c.handle);i[d]&&(delete i[d],j?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=null,$.deletedIds.push(d))}}}),function(){var a,b;$.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a=$.uaMatch(R.userAgent),b={},a.browser&&(b[a.browser]=!0,b.version=a.version),b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0),$.browser=b,$.sub=function(){function a(b,c){return new a.fn.init(b,c)}$.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(c,d){return d&&d instanceof $&&!(d instanceof a)&&(d=a(d)),$.fn.init.call(this,c,d,b)},a.fn.init.prototype=a.fn;var b=a(P);return a}}();var cb,db,eb,fb=/alpha\([^)]*\)/i,gb=/opacity=([^)]*)/,hb=/^(top|right|bottom|left)$/,ib=/^(none|table(?!-c[ea]).+)/,jb=/^margin/,kb=new RegExp("^("+_+")(.*)$","i"),lb=new RegExp("^("+_+")(?!px)[a-z%]+$","i"),mb=new RegExp("^([-+])=("+_+")","i"),nb={BODY:"block"},ob={position:"absolute",visibility:"hidden",display:"block"},pb={letterSpacing:0,fontWeight:400},qb=["Top","Right","Bottom","Left"],rb=["Webkit","O","Moz","ms"],sb=$.fn.toggle;$.fn.extend({css:function(a,c){return $.access(this,function(a,c,d){return d!==b?$.style(a,c,d):$.css(a,c)},a,c,arguments.length>1)},show:function(){return s(this,!0)},hide:function(){return s(this)},toggle:function(a,b){var c="boolean"==typeof a;return $.isFunction(a)&&$.isFunction(b)?sb.apply(this,arguments):this.each(function(){(c?a:r(this))?$(this).show():$(this).hide()})}}),$.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=cb(a,"opacity");return""===c?"1":c}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:$.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=$.camelCase(c),j=a.style;if(c=$.cssProps[i]||($.cssProps[i]=q(j,i)),h=$.cssHooks[c]||$.cssHooks[i],d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];if(!(g=typeof d,"string"===g&&(f=mb.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat($.css(a,c)),g="number"),null==d||"number"===g&&isNaN(d)||("number"!==g||$.cssNumber[i]||(d+="px"),h&&"set"in h&&(d=h.set(a,d,e))===b)))try{j[c]=d}catch(a){}}},css:function(a,c,d,e){var f,g,h,i=$.camelCase(c);return c=$.cssProps[i]||($.cssProps[i]=q(a.style,i)),h=$.cssHooks[c]||$.cssHooks[i],h&&"get"in h&&(f=h.get(a,!0,e)),f===b&&(f=cb(a,c)),"normal"===f&&c in pb&&(f=pb[c]),d||e!==b?(g=parseFloat(f),d||$.isNumeric(g)?g||0:f):f},swap:function(a,b,c){var d,e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];d=c.call(a);for(e in b)a.style[e]=f[e];return d}}),a.getComputedStyle?cb=function(b,c){var d,e,f,g,h=a.getComputedStyle(b,null),i=b.style;return h&&(d=h.getPropertyValue(c)||h[c],""!==d||$.contains(b.ownerDocument,b)||(d=$.style(b,c)),lb.test(d)&&jb.test(c)&&(e=i.width,f=i.minWidth,g=i.maxWidth,i.minWidth=i.maxWidth=i.width=d,d=h.width,i.width=e,i.minWidth=f,i.maxWidth=g)),d}:P.documentElement.currentStyle&&(cb=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;return null==e&&f&&f[b]&&(e=f[b]),lb.test(e)&&!hb.test(b)&&(c=f.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),f.left="fontSize"===b?"1em":e,e=f.pixelLeft+"px",f.left=c,d&&(a.runtimeStyle.left=d)),""===e?"auto":e}),$.each(["height","width"],function(a,b){$.cssHooks[b]={get:function(a,c,d){if(c)return 0===a.offsetWidth&&ib.test(cb(a,"display"))?$.swap(a,ob,function(){return v(a,b,d)}):v(a,b,d)},set:function(a,c,d){return t(a,c,d?u(a,b,d,$.support.boxSizing&&"border-box"===$.css(a,"boxSizing")):0)}}}),$.support.opacity||($.cssHooks.opacity={get:function(a,b){return gb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=$.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,b>=1&&""===$.trim(f.replace(fb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),d&&!d.filter)||(c.filter=fb.test(f)?f.replace(fb,e):f+" "+e)}}),$(function(){$.support.reliableMarginRight||($.cssHooks.marginRight={get:function(a,b){return $.swap(a,{display:"inline-block"},function(){if(b)return cb(a,"marginRight")})}}),!$.support.pixelPosition&&$.fn.position&&$.each(["top","left"],function(a,b){$.cssHooks[b]={get:function(a,c){if(c){var d=cb(a,b);return lb.test(d)?$(a).position()[b]+"px":d}}}})}),$.expr&&$.expr.filters&&($.expr.filters.hidden=function(a){return 0===a.offsetWidth&&0===a.offsetHeight||!$.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||cb(a,"display"))},$.expr.filters.visible=function(a){return!$.expr.filters.hidden(a)}),$.each({margin:"",padding:"",border:"Width"},function(a,b){$.cssHooks[a+b]={expand:function(c){var d,e="string"==typeof c?c.split(" "):[c],f={};for(d=0;d<4;d++)f[a+qb[d]+b]=e[d]||e[d-2]||e[0];return f}},jb.test(a)||($.cssHooks[a+b].set=t)});var tb=/%20/g,ub=/\[\]$/,vb=/\r?\n/g,wb=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,xb=/^(?:select|textarea)/i;$.fn.extend({serialize:function(){return $.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?$.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||xb.test(this.nodeName)||wb.test(this.type))}).map(function(a,b){var c=$(this).val();return null==c?null:$.isArray(c)?$.map(c,function(a,c){return{name:b.name,value:a.replace(vb,"\r\n")}}):{name:b.name,value:c.replace(vb,"\r\n")}}).get()}}),$.param=function(a,c){var d,e=[],f=function(a,b){b=$.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=$.ajaxSettings&&$.ajaxSettings.traditional),$.isArray(a)||a.jquery&&!$.isPlainObject(a))$.each(a,function(){f(this.name,this.value)});else for(d in a)x(d,a[d],c,f);return e.join("&").replace(tb,"+")};var yb,zb,Ab=/#.*$/,Bb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Cb=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Db=/^(?:GET|HEAD)$/,Eb=/^\/\//,Fb=/\?/,Gb=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Hb=/([?&])_=[^&]*/,Ib=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Jb=$.fn.load,Kb={},Lb={},Mb=["*/"]+["*"];try{zb=Q.href}catch(a){zb=P.createElement("a"),zb.href="",zb=zb.href}yb=Ib.exec(zb.toLowerCase())||[],$.fn.load=function(a,c,d){if("string"!=typeof a&&Jb)return Jb.apply(this,arguments);if(!this.length)return this;var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),$.isFunction(c)?(d=c,c=b):c&&"object"==typeof c&&(f="POST"),$.ajax({url:a,type:f,dataType:"html",data:c,complete:function(a,b){d&&h.each(d,g||[a.responseText,b,a])}}).done(function(a){g=arguments,h.html(e?$("<div>").append(a.replace(Gb,"")).find(e):a)}),this},$.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){$.fn[b]=function(a){return this.on(b,a)}}),$.each(["get","post"],function(a,c){$[c]=function(a,d,e,f){return $.isFunction(d)&&(f=f||e,e=d,d=b),$.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),$.extend({getScript:function(a,c){return $.get(a,b,c,"script")},getJSON:function(a,b,c){return $.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?A(a,$.ajaxSettings):(b=a,a=$.ajaxSettings),A(a,b),a},ajaxSettings:{url:zb,isLocal:Cb.test(yb[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Mb},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":$.parseJSON,"text xml":$.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:y(Kb),ajaxTransport:y(Lb),ajax:function(a,c){function d(a,c,d,g){var j,l,s,t,v,x=c;2!==u&&(u=2,i&&clearTimeout(i),h=b,f=g||"",w.readyState=a>0?4:0,d&&(t=B(m,w,d)),a>=200&&a<300||304===a?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&($.lastModified[e]=v),(v=w.getResponseHeader("Etag"))&&($.etag[e]=v)),304===a?(x="notmodified",j=!0):(j=C(m,t),x=j.state,l=j.data,s=j.error,j=!s)):(s=x,x&&!a||(x="error",a<0&&(a=0))),w.status=a,w.statusText=(c||x)+"",j?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=b,k&&o.trigger("ajax"+(j?"Success":"Error"),[w,m,j?l:s]),q.fireWith(n,[w,x]),k&&(o.trigger("ajaxComplete",[w,m]),--$.active||$.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=$.ajaxSetup({},c),n=m.context||m,o=n!==m&&(n.nodeType||n instanceof $)?$(n):$.event,p=$.Deferred(),q=$.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,setRequestHeader:function(a,b){if(!u){var c=a.toLowerCase();a=t[c]=t[c]||a,s[a]=b}return this},getAllResponseHeaders:function(){return 2===u?f:null},getResponseHeader:function(a){var c;if(2===u){if(!g)for(g={};c=Bb.exec(f);)g[c[1].toLowerCase()]=c[2];c=g[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return u||(m.mimeType=a),this},abort:function(a){return a=a||v,h&&h.abort(a),d(0,a),this}};if(p.promise(w),w.success=w.done,w.error=w.fail,w.complete=q.add,w.statusCode=function(a){if(a){var b;if(u<2)for(b in a)r[b]=[r[b],a[b]];else b=a[w.status],w.always(b)}return this},m.url=((a||m.url)+"").replace(Ab,"").replace(Eb,yb[1]+"//"),m.dataTypes=$.trim(m.dataType||"*").toLowerCase().split(ba),null==m.crossDomain&&(j=Ib.exec(m.url.toLowerCase()),m.crossDomain=!(!j||j[1]===yb[1]&&j[2]===yb[2]&&(j[3]||("http:"===j[1]?80:443))==(yb[3]||("http:"===yb[1]?80:443)))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=$.param(m.data,m.traditional)),z(Kb,m,c,w),2===u)return w;if(k=m.global,m.type=m.type.toUpperCase(),m.hasContent=!Db.test(m.type),k&&0==$.active++&&$.event.trigger("ajaxStart"),!m.hasContent&&(m.data&&(m.url+=(Fb.test(m.url)?"&":"?")+m.data,delete m.data),e=m.url,!1===m.cache)){var x=$.now(),y=m.url.replace(Hb,"$1_="+x);m.url=y+(y===m.url?(Fb.test(m.url)?"&":"?")+"_="+x:"")}(m.data&&m.hasContent&&!1!==m.contentType||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),m.ifModified&&(e=e||m.url,$.lastModified[e]&&w.setRequestHeader("If-Modified-Since",$.lastModified[e]),$.etag[e]&&w.setRequestHeader("If-None-Match",$.etag[e])),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Mb+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)w.setRequestHeader(l,m.headers[l]);if(m.beforeSend&&(!1===m.beforeSend.call(n,w,m)||2===u))return w.abort();v="abort";for(l in{success:1,error:1,complete:1})w[l](m[l]);if(h=z(Lb,m,c,w)){w.readyState=1,k&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,h.send(s,d)}catch(a){if(!(u<2))throw a;d(-1,a)}}else d(-1,"No Transport");return w},active:0,lastModified:{},etag:{}});var Nb=[],Ob=/\?/,Pb=/(=)\?(?=&|$)|\?\?/,Qb=$.now();$.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Nb.pop()||$.expando+"_"+Qb++
;return this[a]=!0,a}}),$.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.data,j=c.url,k=!1!==c.jsonp,l=k&&Pb.test(j),m=k&&!l&&"string"==typeof i&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Pb.test(i);if("jsonp"===c.dataTypes[0]||l||m)return f=c.jsonpCallback=$.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,g=a[f],l?c.url=j.replace(Pb,"$1"+f):m?c.data=i.replace(Pb,"$1"+f):k&&(c.url+=(Ob.test(j)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||$.error(f+" was not called"),h[0]},c.dataTypes[0]="json",a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,Nb.push(f)),h&&$.isFunction(g)&&g(h[0]),h=g=b}),"script"}),$.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return $.globalEval(a),a}}}),$.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),$.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=P.head||P.getElementsByTagName("head")[0]||P.documentElement;return{send:function(e,f){c=P.createElement("script"),c.async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){(e||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||f(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var Rb,Sb=!!a.ActiveXObject&&function(){for(var a in Rb)Rb[a](0,1)},Tb=0;$.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&D()||E()}:D,function(a){$.extend($.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}($.ajaxSettings.xhr()),$.support.ajax&&$.ajaxTransport(function(c){if(!c.crossDomain||$.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(a){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l,m;try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=$.noop,Sb&&delete Rb[g]),e)4!==i.readyState&&i.abort();else{h=i.status,k=i.getAllResponseHeaders(),l={},m=i.responseXML,m&&m.documentElement&&(l.xml=m);try{l.text=i.responseText}catch(a){}try{j=i.statusText}catch(a){j=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(a){e||f(-1,a)}l&&f(h,j,l,k)},c.async?4===i.readyState?setTimeout(d,0):(g=++Tb,Sb&&(Rb||(Rb={},$(a).unload(Sb)),Rb[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var Ub,Vb,Wb=/^(?:toggle|show|hide)$/,Xb=new RegExp("^(?:([-+])=|)("+_+")([a-z%]*)$","i"),Yb=/queueHooks$/,Zb=[J],$b={"*":[function(a,b){var c,d,e=this.createTween(a,b),f=Xb.exec(b),g=e.cur(),h=+g||0,i=1,j=20;if(f){if(c=+f[2],"px"!==(d=f[3]||($.cssNumber[a]?"":"px"))&&h){h=$.css(e.elem,a,!0)||c||1;do{i=i||".5",h/=i,$.style(e.elem,a,h+d)}while(i!==(i=e.cur()/g)&&1!==i&&--j)}e.unit=d,e.start=h,e.end=f[1]?h+(f[1]+1)*c:c}return e}]};$.Animation=$.extend(H,{tweener:function(a,b){$.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;d<e;d++)c=a[d],$b[c]=$b[c]||[],$b[c].unshift(b)},prefilter:function(a,b){b?Zb.unshift(a):Zb.push(a)}}),$.Tween=K,K.prototype={constructor:K,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||($.cssNumber[c]?"":"px")},cur:function(){var a=K.propHooks[this.prop];return a&&a.get?a.get(this):K.propHooks._default.get(this)},run:function(a){var b,c=K.propHooks[this.prop];return this.options.duration?this.pos=b=$.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):K.propHooks._default.set(this),this}},K.prototype.init.prototype=K.prototype,K.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=$.css(a.elem,a.prop,!1,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){$.fx.step[a.prop]?$.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[$.cssProps[a.prop]]||$.cssHooks[a.prop])?$.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},K.propHooks.scrollTop=K.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},$.each(["toggle","show","hide"],function(a,b){var c=$.fn[b];$.fn[b]=function(d,e,f){return null==d||"boolean"==typeof d||!a&&$.isFunction(d)&&$.isFunction(e)?c.apply(this,arguments):this.animate(L(b,!0),d,e,f)}}),$.fn.extend({fadeTo:function(a,b,c,d){return this.filter(r).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=$.isEmptyObject(a),f=$.speed(b,c,d),g=function(){var b=H(this,$.extend({},a),f);e&&b.stop(!0)};return e||!1===f.queue?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=$.timers,g=$._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&Yb.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));!b&&d||$.dequeue(this,a)})}}),$.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){$.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),$.speed=function(a,b,c){var d=a&&"object"==typeof a?$.extend({},a):{complete:c||!c&&b||$.isFunction(a)&&a,duration:a,easing:c&&b||b&&!$.isFunction(b)&&b};return d.duration=$.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in $.fx.speeds?$.fx.speeds[d.duration]:$.fx.speeds._default,null!=d.queue&&!0!==d.queue||(d.queue="fx"),d.old=d.complete,d.complete=function(){$.isFunction(d.old)&&d.old.call(this),d.queue&&$.dequeue(this,d.queue)},d},$.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},$.timers=[],$.fx=K.prototype.init,$.fx.tick=function(){var a,c=$.timers,d=0;for(Ub=$.now();d<c.length;d++)(a=c[d])()||c[d]!==a||c.splice(d--,1);c.length||$.fx.stop(),Ub=b},$.fx.timer=function(a){a()&&$.timers.push(a)&&!Vb&&(Vb=setInterval($.fx.tick,$.fx.interval))},$.fx.interval=13,$.fx.stop=function(){clearInterval(Vb),Vb=null},$.fx.speeds={slow:600,fast:200,_default:400},$.fx.step={},$.expr&&$.expr.filters&&($.expr.filters.animated=function(a){return $.grep($.timers,function(b){return a===b.elem}).length});var _b=/^(?:body|html)$/i;$.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){$.offset.setOffset(this,a,b)});var c,d,e,f,g,h,i,j={top:0,left:0},k=this[0],l=k&&k.ownerDocument;if(l)return(d=l.body)===k?$.offset.bodyOffset(k):(c=l.documentElement,$.contains(c,k)?(void 0!==k.getBoundingClientRect&&(j=k.getBoundingClientRect()),e=M(l),f=c.clientTop||d.clientTop||0,g=c.clientLeft||d.clientLeft||0,h=e.pageYOffset||c.scrollTop,i=e.pageXOffset||c.scrollLeft,{top:j.top+h-f,left:j.left+i-g}):j)},$.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return $.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat($.css(a,"marginTop"))||0,c+=parseFloat($.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=$.css(a,"position");"static"===d&&(a.style.position="relative");var e,f,g=$(a),h=g.offset(),i=$.css(a,"top"),j=$.css(a,"left"),k=("absolute"===d||"fixed"===d)&&$.inArray("auto",[i,j])>-1,l={},m={};k?(m=g.position(),e=m.top,f=m.left):(e=parseFloat(i)||0,f=parseFloat(j)||0),$.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(l.top=b.top-h.top+e),null!=b.left&&(l.left=b.left-h.left+f),"using"in b?b.using.call(a,l):g.css(l)}},$.fn.extend({position:function(){if(this[0]){var a=this[0],b=this.offsetParent(),c=this.offset(),d=_b.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat($.css(a,"marginTop"))||0,c.left-=parseFloat($.css(a,"marginLeft"))||0,d.top+=parseFloat($.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat($.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||P.body;a&&!_b.test(a.nodeName)&&"static"===$.css(a,"position");)a=a.offsetParent;return a||P.body})}}),$.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);$.fn[a]=function(e){return $.access(this,function(a,e,f){var g=M(a);if(f===b)return g?c in g?g[c]:g.document.documentElement[e]:a[e];g?g.scrollTo(d?$(g).scrollLeft():f,d?f:$(g).scrollTop()):a[e]=f},a,e,arguments.length,null)}}),$.each({Height:"height",Width:"width"},function(a,c){$.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){$.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(!0===e||!0===f?"margin":"border");return $.access(this,function(c,d,e){var f;return $.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?$.css(c,d,e,h):$.style(c,d,e,h)},c,g?e:b,g,null)}})}),a.jQuery=a.$=$,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return $})}(window),function(a){"use strict";var b={};b.VERSION="0.9.14";var c,d={},e=function(a,b){return function(){return b.apply(a,arguments)}},f=function(){var a,b,c=arguments,d=c[0];for(b=1;b<c.length;b++)for(a in c[b])a in d||!c[b].hasOwnProperty(a)||(d[a]=c[b][a]);return d},g=function(a,b){return{value:a,name:b}};b.DEBUG=g(1,"DEBUG"),b.INFO=g(2,"INFO"),b.WARN=g(4,"WARN"),b.ERROR=g(8,"ERROR"),b.OFF=g(99,"OFF");var h=function(a){this.context=a,this.setLevel(a.filterLevel),this.log=this.info};h.prototype={setLevel:function(a){a&&"value"in a&&(this.context.filterLevel=a)},enabledFor:function(a){var b=this.context.filterLevel;return a.value>=b.value},debug:function(){this.invoke(b.DEBUG,arguments)},info:function(){this.invoke(b.INFO,arguments)},warn:function(){this.invoke(b.WARN,arguments)},error:function(){this.invoke(b.ERROR,arguments)},invoke:function(a,b){c&&this.enabledFor(a)&&c(b,f({level:a},this.context))}};var i=new h({filterLevel:b.OFF});!function(){var a=b;a.enabledFor=e(i,i.enabledFor),a.debug=e(i,i.debug),a.info=e(i,i.info),a.warn=e(i,i.warn),a.error=e(i,i.error),a.log=a.info}(),b.setHandler=function(a){c=a},b.setLevel=function(a){i.setLevel(a);for(var b in d)d.hasOwnProperty(b)&&d[b].setLevel(a)},b.get=function(a){return d[a]||(d[a]=new h(f({name:a},i.context)))},b.useDefaults=function(a){"undefined"!=typeof console&&(b.setLevel(a||b.DEBUG),b.setHandler(function(a,c){var d=console.log;c.name&&(a[0]="["+c.name+"] "+a[0]),c.level===b.WARN&&console.warn?d=console.warn:c.level===b.ERROR&&console.error?d=console.error:c.level===b.INFO&&console.info&&(d=console.info),Function.prototype.apply.call(d,console,a)}))},"function"==typeof define&&define.amd?define(b):"undefined"!=typeof module&&module.exports?module.exports=b:(b._prevLogger=a.Logger,b.noConflict=function(){return a.Logger=b._prevLogger,b},a.Logger=b)}(this),function(a){"use strict";a(function(){a.support.transition=function(){var a=function(){var a,b=document.createElement("bootstrap"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(a in c)if(void 0!==b.style[a])return c[a]}();return a&&{end:a}}()})}(window.jQuery),function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){d.trigger("closed").remove()}var d,e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,"")),d=a(f),b&&b.preventDefault(),d.length||(d=e.hasClass("alert")?e:e.parent()),d.trigger(b=a.Event("close")),b.isDefaultPrevented()||(d.removeClass("in"),a.support.transition&&d.hasClass("fade")?d.on(a.support.transition.end,c):c())},a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("alert");e||d.data("alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a(document).on("click.alert.data-api",b,c.prototype.close)}(window.jQuery),function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.button.defaults,c)};b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a+="Text",d.resetText||c.data("resetText",c[e]()),c[e](d[a]||this.options[a]),setTimeout(function(){"loadingText"==a?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active"),this.$element.toggleClass("active")},a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f="object"==typeof c&&c;e||d.data("button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.defaults={loadingText:"loading..."},a.fn.button.Constructor=b,a(document).on("click.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle")})}(window.jQuery),function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=c,this.options.slide&&this.slide(this.options.slide),"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.prototype={cycle:function(b){return b||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},to:function(b){var c=this.$element.find(".item.active"),d=c.parent().children(),e=d.index(c),f=this;if(!(b>d.length-1||b<0))return this.sliding?this.$element.one("slid",function(){f.to(b)}):e==b?this.pause().cycle():this.slide(b>e?"next":"prev",a(d[b]))},pause:function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){if(!this.sliding)return this.slide("next")},prev:function(){if(!this.sliding)return this.slide("prev")},slide:function(b,c){var d,e=this.$element.find(".item.active"),f=c||e[b](),g=this.interval,h="next"==b?"left":"right",i="next"==b?"first":"last",j=this;if(this.sliding=!0,g&&this.pause(),f=f.length?f:this.$element.find(".item")[i](),d=a.Event("slide",{relatedTarget:f[0]}),!f.hasClass("active")){if(a.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(d),d.isDefaultPrevented())return;f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),this.$element.one(a.support.transition.end,function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),j.sliding=!1,setTimeout(function(){j.$element.trigger("slid")},0)})}else{if(this.$element.trigger(d),d.isDefaultPrevented())return;e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return g&&this.cycle(),this}}},a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("carousel"),f=a.extend({},a.fn.carousel.defaults,"object"==typeof c&&c),g="string"==typeof c?c:f.slide;e||d.data("carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.cycle()})},a.fn.carousel.defaults={interval:5e3,pause:"hover"},a.fn.carousel.Constructor=b,a(document).on("click.carousel.data-api","[data-slide]",function(b){var c,d=a(this),e=a(d.attr("data-target")||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")),f=a.extend({},e.data(),d.data());e.carousel(f),b.preventDefault()})}(window.jQuery),function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.collapse.defaults,c),this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){return this.$element.hasClass("width")?"width":"height"},show:function(){var b,c,d,e;if(!this.transitioning){if(b=this.dimension(),c=a.camelCase(["scroll",b].join("-")),(d=this.$parent&&this.$parent.find("> .accordion-group > .in"))&&d.length){if((e=d.data("collapse"))&&e.transitioning)return;d.collapse("hide"),e||d.data("collapse",null)}this.$element[b](0),this.transition("addClass",a.Event("show"),"shown"),a.support.transition&&this.$element[b](this.$element[0][c])}},hide:function(){var b;this.transitioning||(b=this.dimension(),this.reset(this.$element[b]()),this.transition("removeClass",a.Event("hide"),"hidden"),this.$element[b](0))},reset:function(a){var b=this.dimension();return this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth,this.$element[null!==a?"addClass":"removeClass"]("collapse"),this},transition:function(b,c,d){var e=this,f=function(){"show"==c.type&&e.reset(),e.transitioning=0,e.$element.trigger(d)};this.$element.trigger(c),c.isDefaultPrevented()||(this.transitioning=1,this.$element[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f="object"==typeof c&&c;e||d.data("collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.defaults={toggle:!0},a.fn.collapse.Constructor=b,a(document).on("click.collapse.data-api","[data-toggle=collapse]",function(b){var c,d=a(this),e=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),f=a(e).data("collapse")?"toggle":d.data();d[a(e).hasClass("in")?"addClass":"removeClass"]("collapsed"),a(e).collapse(f)})}(window.jQuery),function(a){"use strict";function b(){a(d).each(function(){c(a(this)).removeClass("open")})}function c(b){var c,d=b.attr("data-target");return d||(d=b.attr("href"),d=d&&/#/.test(d)&&d.replace(/.*(?=#[^\s]*$)/,"")),c=a(d),c.length||(c=b.parent()),c}var d="[data-toggle=dropdown]",e=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};e.prototype={constructor:e,toggle:function(d){var e,f,g=a(this);if(!g.is(".disabled, :disabled"))return e=c(g),f=e.hasClass("open"),b(),f||(e.toggleClass("open"),g.focus()),!1},keydown:function(b){var d,e,f,g,h;if(/(38|40|27)/.test(b.keyCode)&&(d=a(this),b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled"))){if(f=c(d),!(g=f.hasClass("open"))||g&&27==b.keyCode)return d.click();e=a("[role=menu] li:not(.divider) a",f),e.length&&(h=e.index(e.filter(":focus")),38==b.keyCode&&h>0&&h--,40==b.keyCode&&h<e.length-1&&h++,~h||(h=0),e.eq(h).focus())}}},a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("dropdown");d||c.data("dropdown",d=new e(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=e,a(document).on("click.dropdown.data-api touchstart.dropdown.data-api",b).on("click.dropdown touchstart.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",d,e.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",d+", [role=menu]",e.prototype.keydown)}(window.jQuery),function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,c=a.Event("show");this.$element.trigger(c),this.isShown||c.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var c=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in").attr("aria-hidden",!1),b.enforceFocus(),c?b.$element.one(a.support.transition.end,function(){b.$element.focus().trigger("shown")}):b.$element.focus().trigger("shown")}))},hide:function(b){b&&b.preventDefault();b=a.Event("hide"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var b=this;a(document).on("focusin.modal",function(a){b.$element[0]===a.target||b.$element.has(a.target).length||b.$element.focus()})},escape:function(){var a=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(b){27==b.which&&a.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),b.hideModal()})},hideModal:function(a){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?a.proxy(this.$element[0].focus,this.$element[0]):a.proxy(this.hide,this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),d?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,a.proxy(this.removeBackdrop,this)):this.removeBackdrop()):b&&b()}},a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),"object"==typeof c&&c);e||d.data("modal",e=new b(this,f)),"string"==typeof c?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a(document).on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f).one("hide",function(){c.focus()})})}(window.jQuery),function(a){"use strict";var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f;this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,"click"==this.options.trigger?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):"manual"!=this.options.trigger&&(e="hover"==this.options.trigger?"mouseenter":"focus",f="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.leave,this))),this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,b,this.$element.data()),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);if(!c.options.delay||!c.options.delay.show)return c.show();clearTimeout(this.timeout),c.hoverState="in",this.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);if(this.timeout&&clearTimeout(this.timeout),!c.options.delay||!c.options.delay.hide)return c.hide();c.hoverState="out",this.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)},show:function(){var a,b,c,d,e,f,g;if(this.hasContent()&&this.enabled){switch(a=this.tip(),this.setContent(),this.options.animation&&a.addClass("fade"),f="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,b=/in/.test(f),a.detach().css({top:0,left:0,display:"block"}).insertAfter(this.$element),c=this.getPosition(b),d=a[0].offsetWidth,e=a[0].offsetHeight,b?f.split(" ")[1]:f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}a.offset(g).addClass(f).addClass("in")}},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function b(){var b=setTimeout(function(){c.off(a.support.transition.end).detach()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.detach()})}var c=this.tip();return c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?b():c.detach(),this},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(b){return a.extend({},b?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var a=this.$element,b=this.options;return a.attr("data-original-title")||("function"==typeof b.title?b.title.call(a[0]):b.title)},tip:function(){return this.$tip=this.$tip||a(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);c[c.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}},a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f="object"==typeof c&&c;e||d.data("tooltip",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!1}}(window.jQuery),function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content > *")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}}),a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f="object"==typeof c&&c;e||d.data("popover",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),function(a){"use strict";function b(b,c){var d,e=a.proxy(this.process,this),f=a(a(b).is("body")?window:b);this.options=a.extend({},a.fn.scrollspy.defaults,c),this.$scrollElement=f.on("scroll.scroll-spy.data-api",e),this.selector=(this.options.target||(d=a(b).attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=a("body"),this.refresh(),this.process()}b.prototype={constructor:b,refresh:function(){var b=this;this.offsets=a([]),this.targets=a([]),this.$body.find(this.selector).map(function(){var b=a(this),c=b.data("target")||b.attr("href"),d=/^#\w/.test(c)&&a(c);return d&&d.length&&[[d.position().top,c]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},process:function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,d=c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(b>=d)return g!=(a=f.last()[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},activate:function(b){var c,d;this.activeTarget=b,a(this.selector).parent(".active").removeClass("active"),d=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',c=a(d).parent("li").addClass("active"),c.parent(".dropdown-menu").length&&(c=c.closest("li.dropdown").addClass("active")),c.trigger("activate")}},a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f="object"==typeof c&&c;e||d.data("scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.defaults={offset:10},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery),function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var b,c,d,e=this.element,f=e.closest("ul:not(.dropdown-menu)"),g=e.attr("data-target");g||(g=e.attr("href"),g=g&&g.replace(/.*(?=#[^\s]*$)/,"")),e.parent("li").hasClass("active")||(b=f.find(".active:last a")[0],d=a.Event("show",{relatedTarget:b}),e.trigger(d),d.isDefaultPrevented()||(c=a(g),this.activate(e.parent("li"),f),this.activate(c,c.parent(),function(){e.trigger({type:"shown",relatedTarget:b})})))},activate:function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e):e(),f.removeClass("in")}},a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");e||d.data("tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(window.jQuery),function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.$menu=a(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").attr("data-value")
;return this.$element.val(this.updater(a)).change(),this.hide()},updater:function(a){return a},show:function(){var b=a.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:b.top+b.height,left:b.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(b){var c;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(c=a.isFunction(this.source)?this.source(this.query,a.proxy(this.process,this)):this.source,c?this.process(c):this)},process:function(b){var c=this;return b=a.grep(b,function(a){return c.matcher(a)}),b=this.sorter(b),b.length?this.render(b.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){for(var b,c=[],d=[],e=[];b=a.shift();)b.toLowerCase().indexOf(this.query.toLowerCase())?~b.indexOf(this.query)?d.push(b):e.push(b):c.push(b);return c.concat(d,e)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var c=this;return b=a(b).map(function(b,d){return b=a(c.options.item).attr("data-value",d),b.find("a").html(c.highlighter(d)),b[0]}),b.first().addClass("active"),this.$menu.html(b),this},next:function(b){var c=this.$menu.find(".active").removeClass("active"),d=c.next();d.length||(d=a(this.$menu.find("li")[0])),d.addClass("active")},prev:function(a){var b=this.$menu.find(".active").removeClass("active"),c=b.prev();c.length||(c=this.$menu.find("li").last()),c.addClass("active")},listen:function(){this.$element.on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",a.proxy(this.keydown,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this))},eventSupported:function(a){var b=a in this.$element;return b||(this.$element.setAttribute(a,"return;"),b="function"==typeof this.$element[a]),b},move:function(a){if(this.shown){switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault(),this.prev();break;case 40:a.preventDefault(),this.next()}a.stopPropagation()}},keydown:function(b){this.suppressKeyPressRepeat=!~a.inArray(b.keyCode,[40,38,9,13,27]),this.move(b)},keypress:function(a){this.suppressKeyPressRepeat||this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation(),a.preventDefault()},blur:function(a){var b=this;setTimeout(function(){b.hide()},150)},click:function(a){a.stopPropagation(),a.preventDefault(),this.select()},mouseenter:function(b){this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")}},a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f="object"==typeof c&&c;e||d.data("typeahead",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},a.fn.typeahead.Constructor=b,a(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(b){var c=a(this);c.data("typeahead")||(b.preventDefault(),c.typeahead(c.data()))})}(window.jQuery),function(a){"use strict";var b=function(b,c){this.options=a.extend({},a.fn.affix.defaults,c),this.$window=a(window).on("scroll.affix.data-api",a.proxy(this.checkPosition,this)).on("click.affix.data-api",a.proxy(function(){setTimeout(a.proxy(this.checkPosition,this),1)},this)),this.$element=a(b),this.checkPosition()};b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b,c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.bottom,h=f.top,i="affix affix-top affix-bottom";"object"!=typeof f&&(g=h=f),"function"==typeof h&&(h=f.top()),"function"==typeof g&&(g=f.bottom()),b=!(null!=this.unpin&&d+this.unpin<=e.top)&&(null!=g&&e.top+this.$element.height()>=c-g?"bottom":null!=h&&d<=h&&"top"),this.affixed!==b&&(this.affixed=b,this.unpin="bottom"==b?e.top-d:null,this.$element.removeClass(i).addClass("affix"+(b?"-"+b:"")))}},a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("affix"),f="object"==typeof c&&c;e||d.data("affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.defaults={offset:0},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(window.jQuery),function(){function a(a){return a.target}function b(a){return a.source}function c(a,b){try{for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}catch(c){a.prototype=b}}function d(a){for(var b=-1,c=a.length,d=[];c>++b;)d.push(a[b]);return d}function e(a){return Array.prototype.slice.call(a)}function f(){}function g(a){return a}function h(){return!0}function i(a){return"function"==typeof a?a:function(){return a}}function j(a,b,c){return function(){var d=c.apply(b,arguments);return arguments.length?a:d}}function k(a){return null!=a&&!isNaN(a)}function l(a){return a.length}function m(a){return a.trim().replace(/\s+/g," ")}function n(a){for(var b=1;a*b%1;)b*=10;return b}function o(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function p(a){return a.responseText}function q(a){return JSON.parse(a.responseText)}function r(a){var b=document.createRange();return b.selectNode(document.body),b.createContextualFragment(a.responseText)}function s(a){return a.responseXML}function t(){}function u(a){function b(){for(var b,d=c,e=-1,f=d.length;f>++e;)(b=d[e].on)&&b.apply(this,arguments);return a}var c=[],d=new f;return b.on=function(b,e){var f,g=d.get(b);return 2>arguments.length?g&&g.on:(g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),d.remove(b)),e&&c.push(d.set(b,{on:e})),a)},b}function v(a,b){return b-(a?1+Math.floor(Math.log(a+Math.pow(10,1+Math.floor(Math.log(a)/Math.LN10)-b))/Math.LN10):1)}function w(a){return a+""}function x(a,b){var c=Math.pow(10,3*Math.abs(8-b));return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}}function y(a){return function(b){return 0>=b?0:b>=1?1:a(b)}}function z(a){return function(b){return 1-a(1-b)}}function A(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function B(a){return a*a}function C(a){return a*a*a}function D(a){if(0>=a)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(.5>a?c:3*(a-b)+c-.75)}function E(a){return function(b){return Math.pow(b,a)}}function F(a){return 1-Math.cos(a*Je/2)}function G(a){return Math.pow(2,10*(a-1))}function H(a){return 1-Math.sqrt(1-a*a)}function I(a,b){var c;return 2>arguments.length&&(b=.45),arguments.length?c=b/(2*Je)*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,10*-d)*Math.sin(2*(d-c)*Je/b)}}function J(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function K(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function L(){d3.event.stopPropagation(),d3.event.preventDefault()}function M(){for(var a,b=d3.event;a=b.sourceEvent;)b=a;return b}function N(a){for(var b=new t,c=0,d=arguments.length;d>++c;)b[arguments[c]]=u(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=d3.event;e.target=a,d3.event=e,b[e.type].apply(c,d)}finally{d3.event=f}}},b}function O(a){var b=[a.a,a.b],c=[a.c,a.d],d=Q(b),e=P(b,c),f=Q(R(c,b,-e))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1),this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Me,this.translate=[a.e,a.f],this.scale=[d,f],this.skew=f?Math.atan2(e,f)*Me:0}function P(a,b){return a[0]*b[0]+a[1]*b[1]}function Q(a){var b=Math.sqrt(P(a,a));return b&&(a[0]/=b,a[1]/=b),b}function R(a,b,c){return a[0]+=c*b[0],a[1]+=c*b[1],a}function S(a){return"transform"==a?d3.interpolateTransform:d3.interpolate}function T(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return(c-a)*b}}function U(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return Math.max(0,Math.min(1,(c-a)*b))}}function V(){}function W(a,b,c){return new X(a,b,c)}function X(a,b,c){this.r=a,this.g=b,this.b=c}function Y(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function Z(a,b,c){var d,e,f,g=0,h=0,i=0;if(d=/([a-z]+)\((.*)\)/i.exec(a))switch(e=d[2].split(","),d[1]){case"hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case"rgb":return b(ba(e[0]),ba(e[1]),ba(e[2]))}return(f=df.get(a))?b(f.r,f.g,f.b):(null!=a&&"#"===a.charAt(0)&&(4===a.length?(g=a.charAt(1),g+=g,h=a.charAt(2),h+=h,i=a.charAt(3),i+=i):7===a.length&&(g=a.substring(1,3),h=a.substring(3,5),i=a.substring(5,7)),g=parseInt(g,16),h=parseInt(h,16),i=parseInt(i,16)),b(g,h,i))}function $(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),h=g-f,i=(g+f)/2;return h?(e=.5>i?h/(g+f):h/(2-g-f),d=a==g?(b-c)/h+(c>b?6:0):b==g?(c-a)/h+2:(a-b)/h+4,d*=60):e=d=0,ca(d,e,i)}function _(a,b,c){a=aa(a),b=aa(b),c=aa(c);var d=na((.4124564*a+.3575761*b+.1804375*c)/hf),e=na((.2126729*a+.7151522*b+.072175*c)/jf);return ia(116*e-16,500*(d-e),200*(e-na((.0193339*a+.119192*b+.9503041*c)/kf)))}function aa(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function ba(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function ca(a,b,c){return new da(a,b,c)}function da(a,b,c){this.h=a,this.s=b,this.l=c}function ea(a,b,c){function d(a){return a>360?a-=360:0>a&&(a+=360),60>a?f+(g-f)*a/60:180>a?g:240>a?f+(g-f)*(240-a)/60:f}function e(a){return Math.round(255*d(a))}var f,g;return a%=360,0>a&&(a+=360),b=0>b?0:b>1?1:b,c=0>c?0:c>1?1:c,g=.5>=c?c*(1+b):c+b-c*b,f=2*c-g,W(e(a+120),e(a),e(a-120))}function fa(a,b,c){return new ga(a,b,c)}function ga(a,b,c){this.h=a,this.c=b,this.l=c}function ha(a,b,c){return ia(c,Math.cos(a*=Le)*b,Math.sin(a)*b)}function ia(a,b,c){return new ja(a,b,c)}function ja(a,b,c){this.l=a,this.a=b,this.b=c}function ka(a,b,c){var d=(a+16)/116,e=d+b/500,f=d-c/200;return e=ma(e)*hf,d=ma(d)*jf,f=ma(f)*kf,W(oa(3.2404542*e-1.5371385*d-.4985314*f),oa(-.969266*e+1.8760108*d+.041556*f),oa(.0556434*e-.2040259*d+1.0572252*f))}function la(a,b,c){return fa(Math.atan2(c,b)/Je*180,Math.sqrt(b*b+c*c),a)}function ma(a){return a>.206893034?a*a*a:(a-4/29)/7.787037}function na(a){return a>.008856?Math.pow(a,1/3):7.787037*a+4/29}function oa(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function pa(a){return Oe(a,rf),a}function qa(a){return function(){return mf(a,this)}}function ra(a){return function(){return nf(a,this)}}function sa(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=d3.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?h:g:a.local?f:e}function ta(a){return RegExp("(?:^|\\s+)"+d3.requote(a)+"(?:\\s+|$)","g")}function ua(a,b){function c(){for(var c=-1;e>++c;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);e>++c;)a[c](this,d)}a=a.trim().split(/\s+/).map(va);var e=a.length;return"function"==typeof b?d:c}function va(a){var b=ta(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.className,f=null!=e.baseVal,g=f?e.baseVal:e;d?(b.lastIndex=0,b.test(g)||(g=m(g+" "+a),f?e.baseVal=g:c.className=g)):g&&(g=m(g.replace(b," ")),f?e.baseVal=g:c.className=g)}}function wa(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function xa(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function ya(a){return{__data__:a}}function za(a){return function(){return qf(this,a)}}function Aa(a){return arguments.length||(a=d3.ascending),function(b,c){return a(b&&b.__data__,c&&c.__data__)}}function Ba(a,b,c){function d(){var b=this[f];b&&(this.removeEventListener(a,b,b.$),delete this[f])}function e(){function e(a){var c=d3.event;d3.event=a,h[0]=g.__data__;try{b.apply(g,h)}finally{d3.event=c}}var g=this,h=Ne(arguments);d.call(this),this.addEventListener(a,this[f]=e,e.$=c),e._=b}var f="__on"+a,g=a.indexOf(".");return g>0&&(a=a.substring(0,g)),b?e:d}function Ca(a,b){for(var c=0,d=a.length;d>c;c++)for(var e,f=a[c],g=0,h=f.length;h>g;g++)(e=f[g])&&b(e,g,c);return a}function Da(a){return Oe(a,tf),a}function Ea(a,b){return Oe(a,vf),a.id=b,a}function Fa(a,b,c,d){var e=a.__transition__||(a.__transition__={active:0,count:0}),g=e[c];if(!g){var h=d.time;return g=e[c]={tween:new f,event:d3.dispatch("start","end"),time:h,ease:d.ease,delay:d.delay,duration:d.duration},++e.count,d3.timer(function(d){function f(d){return e.active>c?j():(e.active=c,m.start.call(a,k,b),g.tween.forEach(function(c,d){(d=d.call(a,k,b))&&p.push(d)}),i(d)||d3.timer(i,0,h),1)}function i(d){if(e.active!==c)return j();for(var f=(d-n)/o,g=l(f),h=p.length;h>0;)p[--h].call(a,g);return f>=1?(j(),m.end.call(a,k,b),1):void 0}function j(){return--e.count?delete e[c]:delete a.__transition__,1}var k=a.__data__,l=g.ease,m=g.event,n=g.delay,o=g.duration,p=[];return d>=n?f(d):d3.timer(f,n,h),1},0,h),g}}function Ga(a){return null==a&&(a=""),function(){this.textContent=a}}function Ha(a,b,c,d){var e=a.id;return Ca(a,"function"==typeof c?function(a,f,g){a.__transition__[e].tween.set(b,d(c.call(a,a.__data__,f,g)))}:(c=d(c),function(a){a.__transition__[e].tween.set(b,c)}))}function Ia(){for(var a,b=Date.now(),c=Cf;c;)a=b-c.then,a>=c.delay&&(c.flush=c.callback(a)),c=c.next;var d=Ja()-b;d>24?(isFinite(d)&&(clearTimeout(zf),zf=setTimeout(Ia,d)),yf=0):(yf=1,Df(Ia))}function Ja(){for(var a=null,b=Cf,c=1/0;b;)b.flush?(delete Bf[b.callback.id],b=a?a.next=b.next:Cf=b.next):(c=Math.min(c,b.then+b.delay),b=(a=b).next);return c}function Ka(a,b){var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();if(0>Ef&&(window.scrollX||window.scrollY)){c=d3.select(document.body).append("svg").style("position","absolute").style("top",0).style("left",0);var e=c[0][0].getScreenCTM();Ef=!(e.f||e.e),c.remove()}return Ef?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY),d=d.matrixTransform(a.getScreenCTM().inverse()),[d.x,d.y]}var f=a.getBoundingClientRect();return[b.clientX-f.left-a.clientLeft,b.clientY-f.top-a.clientTop]}function La(){}function Ma(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function Na(a){return a.rangeExtent?a.rangeExtent():Ma(a.range())}function Oa(a,b){var c,d=0,e=a.length-1,f=a[d],g=a[e];return f>g&&(c=d,d=e,e=c,c=f,f=g,g=c),(b=b(g-f))&&(a[d]=b.floor(f),a[e]=b.ceil(g)),a}function Pa(){return Math}function Qa(a,b,c,d){function e(){var e=Math.min(a.length,b.length)>2?Xa:Wa,i=d?U:T;return g=e(a,b,i,c),h=e(b,a,i,d3.interpolate),f}function f(a){return g(a)}var g,h;return f.invert=function(a){return h(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(d3.interpolateRound)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return Ua(a,b)},f.tickFormat=function(b){return Va(a,b)},f.nice=function(){return Oa(a,Sa),e()},f.copy=function(){return Qa(a,b,c,d)},e()}function Ra(a,b){return d3.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Sa(a){return(a=Math.pow(10,Math.round(Math.log(a)/Math.LN10)-1))&&{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}}function Ta(a,b){var c=Ma(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;return.15>=f?e*=10:.35>=f?e*=5:.75>=f&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function Ua(a,b){return d3.range.apply(d3,Ta(a,b))}function Va(a,b){return d3.format(",."+Math.max(0,-Math.floor(Math.log(Ta(a,b)[2])/Math.LN10+.01))+"f")}function Wa(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Xa(a,b,c,d){var e=[],f=[],g=0,h=Math.min(a.length,b.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());h>=++g;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=d3.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function Ya(a,b){function c(c){return a(b(c))}var d=b.pow;return c.invert=function(b){return d(a.invert(b))},c.domain=function(e){return arguments.length?(b=0>e[0]?$a:Za,d=b.pow,a.domain(e.map(b)),c):a.domain().map(d)},c.nice=function(){return a.domain(Oa(a.domain(),Pa)),c},c.ticks=function(){var c=Ma(a.domain()),e=[];if(c.every(isFinite)){var f=Math.floor(c[0]),g=Math.ceil(c[1]),h=d(c[0]),i=d(c[1]);if(b===$a)for(e.push(d(f));g>f++;)for(var j=9;j>0;j--)e.push(d(f)*j);else{for(;g>f;f++)for(var j=1;10>j;j++)e.push(d(f)*j);e.push(d(f))}for(f=0;h>e[f];f++);for(g=e.length;e[g-1]>i;g--);e=e.slice(f,g)}return e},c.tickFormat=function(a,e){if(2>arguments.length&&(e=Ff),!arguments.length)return e;var f,g=Math.max(.1,a/c.ticks().length),h=b===$a?(f=-1e-12,Math.floor):(f=1e-12,Math.ceil);return function(a){return g>=a/d(h(b(a)+f))?e(a):""}},c.copy=function(){return Ya(a.copy(),b)},Ra(c,a)}function Za(a){return Math.log(0>a?0:a)/Math.LN10}function $a(a){return-Math.log(a>0?0:-a)/Math.LN10}function _a(a,b){function c(b){return a(d(b))}var d=ab(b),e=ab(1/b);return c.invert=function(b){return e(a.invert(b))},c.domain=function(b){return arguments.length?(a.domain(b.map(d)),c):a.domain().map(e)},c.ticks=function(a){return Ua(c.domain(),a)},c.tickFormat=function(a){return Va(c.domain(),a)},c.nice=function(){return c.domain(Oa(c.domain(),Sa))},c.exponent=function(a){if(!arguments.length)return b;var f=c.domain();return d=ab(b=a),e=ab(1/b),c.domain(f)},c.copy=function(){return _a(a.copy(),b)},Ra(c,a)}function ab(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function bb(a,b){function c(b){return g[((e.get(b)||e.set(b,a.push(b)))-1)%g.length]}function d(b,c){return d3.range(a.length).map(function(a){return b+c*a})}var e,g,h;return c.domain=function(d){if(!arguments.length)return a;a=[],e=new f;for(var g,h=-1,i=d.length;i>++h;)e.has(g=d[h])||e.set(g,a.push(g));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(g=a,h=0,b={t:"range",a:arguments},c):g},c.rangePoints=function(e,f){2>arguments.length&&(f=0);var i=e[0],j=e[1],k=(j-i)/(Math.max(1,a.length-1)+f);return g=d(2>a.length?(i+j)/2:i+k*f/2,k),h=0,b={t:"rangePoints",a:arguments},c},c.rangeBands=function(e,f,i){2>arguments.length&&(f=0),3>arguments.length&&(i=f);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=(l-k)/(a.length-f+2*i);return g=d(k+m*i,m),j&&g.reverse(),h=m*(1-f),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(e,f,i){2>arguments.length&&(f=0),3>arguments.length&&(i=f);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=Math.floor((l-k)/(a.length-f+2*i)),n=l-k-(a.length-f)*m;return g=d(k+Math.round(n/2),m),j&&g.reverse(),h=Math.round(m*(1-f)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return h},c.rangeExtent=function(){return Ma(b.a[0])},c.copy=function(){return bb(a,b)},c.domain(a)}function cb(a,b){function c(){var c=0,f=b.length;for(e=[];f>++c;)e[c-1]=d3.quantile(a,c/f);return d}function d(a){return isNaN(a=+a)?NaN:b[d3.bisect(e,a)]}var e;return d.domain=function(b){return arguments.length?(a=b.filter(function(a){return!isNaN(a)}).sort(d3.ascending),c()):a},d.range=function(a){return arguments.length?(b=a,c()):b},d.quantiles=function(){return e},d.copy=function(){return cb(a,b)},c()}function db(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.copy=function(){return db(a,b,c)},e()}function eb(a,b){function c(c){return b[d3.bisect(a,c)]}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?(b=a,c):b},c.copy=function(){return eb(a,b)},c}function fb(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return Ua(a,b)},b.tickFormat=function(b){return Va(a,b)},b.copy=function(){return fb(a)},b}function gb(a){return a.innerRadius}function hb(a){return a.outerRadius}function ib(a){return a.startAngle}function jb(a){return a.endAngle}function kb(a){function b(b){function g(){k.push("M",f(a(l),j))}for(var h,k=[],l=[],m=-1,n=b.length,o=i(c),p=i(d);n>++m;)e.call(this,h=b[m],m)?l.push([+o.call(this,h,m),+p.call(this,h,m)]):l.length&&(g(),l=[]);return l.length&&g(),k.length?k.join(""):null}var c=lb,d=mb,e=h,f=nb,g=f.key,j=.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(g="function"==typeof a?f=a:(f=Mf.get(a)||nb).key,b):g},b.tension=function(a){return arguments.length?(j=a,b):j},b}function lb(a){return a[0]}function mb(a){return a[1]}function nb(a){return a.join("L")}function ob(a){return nb(a)+"Z"}function pb(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];c>++b;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function qb(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];c>++b;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function rb(a,b){return 4>a.length?nb(a):a[1]+ub(a.slice(1,a.length-1),vb(a,b))}function sb(a,b){return 3>a.length?nb(a):a[0]+ub((a.push(a[0]),a),vb([a[a.length-2]].concat(a,[a[1]]),b))}function tb(a,b){return 3>a.length?nb(a):a[0]+ub(a,vb(a,b))}function ub(a,b){if(1>b.length||a.length!=b.length&&a.length!=b.length+2)return nb(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],i=2),b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;b.length>j;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+k[0]+","+k[1]}return d}function vb(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],h=1,i=a.length;i>++h;)c=f,f=g,g=a[h],d.push([e*(g[0]-c[0]),e*(g[1]-c[1])]);return d}function wb(a){if(3>a.length)return nb(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f];for(Bb(i,g,h);c>++b;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),Bb(i,g,h);for(b=-1;2>++b;)g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),Bb(i,g,h);return i.join("")}function xb(a){if(4>a.length)return nb(a);for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];3>++d;)b=a[d],f.push(b[0]),g.push(b[1]);for(c.push(Ab(Pf,f)+","+Ab(Pf,g)),--d;e>++d;)b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),Bb(c,f,g);return c.join("")}function yb(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],h=[];4>++d;)c=a[d%e],g.push(c[0]),h.push(c[1]);for(b=[Ab(Pf,g),",",Ab(Pf,h)],--d;f>++d;)c=a[d%e],g.shift(),g.push(c[0]),h.shift(),h.push(c[1]),Bb(b,g,h);return b.join("")}function zb(a,b){var c=a.length-1;if(c)for(var d,e,f=a[0][0],g=a[0][1],h=a[c][0]-f,i=a[c][1]-g,j=-1;c>=++j;)d=a[j],e=j/c,d[0]=b*d[0]+(1-b)*(f+e*h),d[1]=b*d[1]+(1-b)*(g+e*i);return wb(a)}function Ab(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Bb(a,b,c){a.push("C",Ab(Nf,b),",",Ab(Nf,c),",",Ab(Of,b),",",Ab(Of,c),",",Ab(Pf,b),",",Ab(Pf,c))}function Cb(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Db(a){for(var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=Cb(e,f);c>++b;)d[b]=(g+(g=Cb(e=f,f=a[b+1])))/2;return d[b]=g,d}function Eb(a){for(var b,c,d,e,f=[],g=Db(a),h=-1,i=a.length-1;i>++h;)b=Cb(a[h],a[h+1]),1e-6>Math.abs(b)?g[h]=g[h+1]=0:(c=g[h]/b,d=g[h+1]/b,(e=c*c+d*d)>9&&(e=3*b/Math.sqrt(e),g[h]=e*c,g[h+1]=e*d));for(h=-1;i>=++h;)e=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),f.push([e||0,g[h]*e||0]);return f}function Fb(a){return 3>a.length?nb(a):a[0]+ub(a,Eb(a))}function Gb(a){for(var b,c,d,e=-1,f=a.length;f>++e;)b=a[e],c=b[0],d=b[1]+Kf,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);return a}function Hb(a){function b(b){function h(){q.push("M",j(a(s),n),m,l(a(r.reverse()),n),"Z")}for(var k,o,p,q=[],r=[],s=[],t=-1,u=b.length,v=i(c),w=i(e),x=c===d?function(){return o}:i(d),y=e===f?function(){return p}:i(f);u>++t;)g.call(this,k=b[t],t)?(r.push([o=+v.call(this,k,t),p=+w.call(this,k,t)]),s.push([+x.call(this,k,t),+y.call(this,k,t)])):r.length&&(h(),r=[],s=[]);return r.length&&h(),q.length?q.join(""):null}var c=lb,d=lb,e=0,f=mb,g=h,j=nb,k=j.key,l=j,m="L",n=.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(g=a,b):g},b.interpolate=function(a){return arguments.length?(k="function"==typeof a?j=a:(j=Mf.get(a)||nb).key,l=j.reverse||j,m=j.closed?"M":"L",b):k},b.tension=function(a){return arguments.length?(n=a,b):n},b}function Ib(a){return a.radius}function Jb(a){return[a.x,a.y]}function Kb(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]+Kf;return[c*Math.cos(d),c*Math.sin(d)]}}function Lb(){return 64}function Mb(){return"circle"}function Nb(a){var b=Math.sqrt(a/Je);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Ob(a,b){a.attr("transform",function(a){return"translate("+b(a)+",0)"})}function Pb(a,b){a.attr("transform",function(a){return"translate(0,"+b(a)+")"})}function Qb(a,b,c){if(d=[],c&&b.length>1){for(var d,e,f,g=Ma(a.domain()),h=-1,i=b.length,j=(b[1]-b[0])/++c;i>++h;)for(e=c;--e>0;)(f=+b[h]-e*j)>=g[0]&&d.push(f);for(--h,e=0;c>++e&&(f=+b[h]+e*j)<g[1];)d.push(f)}return d}function Rb(){Vf||(Vf=d3.select("body").append("div").style("visibility","hidden").style("top",0).style("height",0).style("width",0).style("overflow-y","scroll").append("div").style("height","2000px").node().parentNode);var a,b=d3.event;try{Vf.scrollTop=1e3,Vf.dispatchEvent(b),a=1e3-Vf.scrollTop}catch(c){a=b.wheelDelta||5*-b.detail}return a}function Sb(a){for(var b=a.source,c=a.target,d=Ub(b,c),e=[b];b!==d;)b=b.parent,e.push(b);for(var f=e.length;c!==d;)e.splice(f,0,c),c=c.parent;return e}function Tb(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function Ub(a,b){if(a===b)return a;for(var c=Tb(a),d=Tb(b),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();return g}function Vb(a){a.fixed|=2}function Wb(a){a.fixed&=1}function Xb(a){a.fixed|=4,a.px=a.x,a.py=a.y}function Yb(a){a.fixed&=3}function Zb(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,g=a.nodes,h=g.length,i=-1;h>++i;)null!=(f=g[i])&&(Zb(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);if(a.point){a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5);var j=b*c[a.point.index];a.charge+=a.pointCharge=j,d+=j*a.point.x,e+=j*a.point.y}a.cx=d/a.charge,a.cy=e/a.charge}function $b(){return 20}function _b(){return 1}function ac(a){return a.x}function bc(a){return a.y}function cc(a,b,c){a.y0=b,a.y=c}function dc(a){return d3.range(a.length)}function ec(a){for(var b=-1,c=a[0].length,d=[];c>++b;)d[b]=0;return d}function fc(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;f>c;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function gc(a){return a.reduce(hc,0)}function hc(a,b){return a+b[1]}function ic(a,b){return jc(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function jc(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];b>=++c;)f[c]=e*c+d;return f}function kc(a){return[d3.min(a),d3.max(a)]}function lc(a,b){return d3.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=pc,a}function mc(a){return a.children}function nc(a){return a.value}function oc(a,b){return b.value-a.value}function pc(a){return d3.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function qc(a,b){return a.value-b.value}function rc(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function sc(a,b){a._pack_next=b,b._pack_prev=a}function tc(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return e*e-c*c-d*d>.001}function uc(a){function b(a){k=Math.min(a.x-a.r,k),l=Math.max(a.x+a.r,l),m=Math.min(a.y-a.r,m),n=Math.max(a.y+a.r,n)}if((c=a.children)&&(j=c.length)){var c,d,e,f,g,h,i,j,k=1/0,l=-1/0,m=1/0,n=-1/0;if(c.forEach(vc),d=c[0],d.x=-d.r,d.y=0,b(d),j>1&&(e=c[1],e.x=e.r,e.y=0,b(e),j>2))for(f=c[2],yc(d,e,f),b(f),rc(d,f),d._pack_prev=f,rc(f,e),e=d._pack_next,g=3;j>g;g++){yc(d,e,f=c[g]);var o=0,p=1,q=1;for(h=e._pack_next;h!==e;h=h._pack_next,p++)if(tc(h,f)){o=1;break}if(1==o)for(i=d._pack_prev;i!==h._pack_prev&&!tc(i,f);i=i._pack_prev,q++);o?(q>p||p==q&&e.r<d.r?sc(d,e=h):sc(d=i,e),g--):(rc(d,f),e=f,b(f))}var r=(k+l)/2,s=(m+n)/2,t=0;for(g=0;j>g;g++)f=c[g],f.x-=r,f.y-=s,t=Math.max(t,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=t,c.forEach(wc)}}function vc(a){a._pack_next=a._pack_prev=a}function wc(a){delete a._pack_next,delete a._pack_prev}function xc(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e)for(var f=-1,g=e.length;g>++f;)xc(e[f],b,c,d)}function yc(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f;g*=g,d*=d;var i=.5+(d-g)/(2*h),j=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=a.x+i*e+j*f,c.y=a.y+i*f-j*e}else c.x=a.x+d,c.y=a.y}function zc(a){return 1+d3.max(a,function(a){return a.y})}function Ac(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Bc(a){var b=a.children;return b&&b.length?Bc(b[0]):a}function Cc(a){var b,c=a.children;return c&&(b=c.length)?Cc(c[b-1]):a}function Dc(a,b){return a.parent==b.parent?1:2}function Ec(a){var b=a.children;return b&&b.length?b[0]:a._tree.thread}function Fc(a){var b,c=a.children;return c&&(b=c.length)?c[b-1]:a._tree.thread}function Gc(a,b){var c=a.children;if(c&&(e=c.length))for(var d,e,f=-1;e>++f;)b(d=Gc(c[f],b),a)>0&&(a=d);return a}function Hc(a,b){return a.x-b.x}function Ic(a,b){return b.x-a.x}function Jc(a,b){return a.depth-b.depth}function Kc(a,b){function c(a,d){var e=a.children;if(e&&(g=e.length))for(var f,g,h=null,i=-1;g>++i;)f=e[i],c(f,h),h=f;b(a,d)}c(a,null)}function Lc(a){for(var b,c=0,d=0,e=a.children,f=e.length;--f>=0;)b=e[f]._tree,b.prelim+=c,b.mod+=c,c+=b.shift+(d+=b.change)}function Mc(a,b,c){a=a._tree,b=b._tree;var d=c/(b.number-a.number);a.change+=d,b.change-=d,b.shift+=c,b.prelim+=c,b.mod+=c}function Nc(a,b,c){return a._tree.ancestor.parent==b.parent?a._tree.ancestor:c}function Oc(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Pc(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return 0>e&&(c+=e/2,e=0),0>f&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function Qc(a,b){function c(a,c){return d3.xhr(a,b,c).response(d)}function d(a){return c.parse(a.responseText)}function e(b){return b.map(f).join(a)}function f(a){return g.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var g=RegExp('["'+a+"\n]"),h=a.charCodeAt(0);return c.parse=function(a){var b;return c.parseRows(a,function(a){return b?b(a):void(b=Function("d","return {"+a.map(function(a,b){
return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}"))})},c.parseRows=function(a,b){function c(){if(k>=j)return g;if(e)return e=!1,f;var b=k;if(34===a.charCodeAt(b)){for(var c=b;j>c++;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}k=c+2;var d=a.charCodeAt(c+1);return 13===d?(e=!0,10===a.charCodeAt(c+2)&&++k):10===d&&(e=!0),a.substring(b+1,c).replace(/""/g,'"')}for(;j>k;){var d=a.charCodeAt(k++),i=1;if(10===d)e=!0;else if(13===d)e=!0,10===a.charCodeAt(k)&&(++k,++i);else if(d!==h)continue;return a.substring(b,k-i)}return a.substring(b)}for(var d,e,f={},g={},i=[],j=a.length,k=0,l=0;(d=c())!==g;){for(var m=[];d!==f&&d!==g;)m.push(d),d=c();(!b||(m=b(m,l++)))&&i.push(m)}return i},c.format=function(a){return a.map(e).join("\n")},c}function Rc(a,b){_f.hasOwnProperty(a.type)&&_f[a.type](a,b)}function Sc(a,b,c){var d,e=-1,f=a.length-c;for(b.lineStart();f>++e;)d=a[e],b.point(d[0],d[1]);b.lineEnd()}function Tc(a,b){var c=-1,d=a.length;for(b.polygonStart();d>++c;)Sc(a[c],b,1);b.polygonEnd()}function Uc(a){return[Math.atan2(a[1],a[0]),Math.asin(Math.max(-1,Math.min(1,a[2])))]}function Vc(a,b){return Ke>Math.abs(a[0]-b[0])&&Ke>Math.abs(a[1]-b[1])}function Wc(a){var b=a[0],c=a[1],d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function Xc(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function Yc(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function Zc(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function $c(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function _c(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}function ad(a){function b(b){function d(c,d){c=a(c,d),b.point(c[0],c[1])}function f(){k=NaN,p.point=g,b.lineStart()}function g(d,f){var g=Wc([d,f]),h=a(d,f);c(k,l,j,m,n,o,k=h[0],l=h[1],j=d,m=g[0],n=g[1],o=g[2],e,b),b.point(k,l)}function h(){p.point=d,b.lineEnd()}function i(){var a,d,i,q,r,s,t;f(),p.point=function(b,c){g(a=b,d=c),i=k,q=l,r=m,s=n,t=o,p.point=g},p.lineEnd=function(){c(k,l,j,m,n,o,i,q,a,r,s,t,e,b),p.lineEnd=h,h()}}var j,k,l,m,n,o,p={point:d,lineStart:f,lineEnd:h,polygonStart:function(){b.polygonStart(),p.lineStart=i},polygonEnd:function(){b.polygonEnd(),p.lineStart=f}};return p}function c(b,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=j-b,s=k-e,t=r*r+s*s;if(t>4*d&&p--){var u=g+m,v=h+n,w=i+o,x=Math.sqrt(u*u+v*v+w*w),y=Math.asin(w/=x),z=Ke>Math.abs(Math.abs(w)-1)?(f+l)/2:Math.atan2(v,u),A=a(z,y),B=A[0],C=A[1],D=B-b,E=C-e,F=s*D-r*E;(F*F/t>d||Math.abs((r*D+s*E)/t-.5)>.3)&&(c(b,e,f,g,h,i,B,C,z,u/=x,v/=x,w,p,q),q.point(B,C),c(B,C,z,u,v,w,j,k,l,m,n,o,p,q))}}var d=.5,e=16;return b.precision=function(a){return arguments.length?(e=(d=a*a)>0&&16,b):Math.sqrt(d)},b}function bd(a,b){function c(a,b){var c=Math.sqrt(f-2*e*Math.sin(b))/e;return[c*Math.sin(a*=e),g-c*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;return c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,Math.asin((f-(a*a+c*c)*e*e)/(2*e))]},c}function cd(a){function b(a,b){d>a&&(d=a),a>f&&(f=a),e>b&&(e=b),b>g&&(g=b)}function c(){h.point=h.lineEnd=La}var d,e,f,g,h={point:b,lineStart:La,lineEnd:La,polygonStart:function(){h.lineEnd=c},polygonEnd:function(){h.point=b}},i=a?a.stream(h):h;return function(a){return g=f=-(d=e=1/0),d3.geo.stream(a,i),[[d,e],[f,g]]}}function dd(a,b){if(!cg){++dg,a*=Le;var c=Math.cos(b*=Le);eg+=(c*Math.cos(a)-eg)/dg,fg+=(c*Math.sin(a)-fg)/dg,gg+=(Math.sin(b)-gg)/dg}}function ed(){var a,b;2>cg&&(cg=2,dg=eg=fg=gg=0),cg=1,fd(),cg=2;var c=hg.point;hg.point=function(d,e){c(a=d,b=e)},hg.lineEnd=function(){hg.point(a,b),gd(),hg.lineEnd=gd}}function fd(){function a(a,e){a*=Le;var f=Math.cos(e*=Le),g=f*Math.cos(a),h=f*Math.sin(a),i=Math.sin(e),j=Math.atan2(Math.sqrt((j=c*i-d*h)*j+(j=d*g-b*i)*j+(j=b*h-c*g)*j),b*g+c*h+d*i);dg+=j,eg+=j*(b+(b=g)),fg+=j*(c+(c=h)),gg+=j*(d+(d=i))}var b,c,d;if(1!==cg){if(!(1>cg))return;cg=1,dg=eg=fg=gg=0}hg.point=function(e,f){e*=Le;var g=Math.cos(f*=Le);b=g*Math.cos(e),c=g*Math.sin(e),d=Math.sin(f),hg.point=a}}function gd(){hg.point=dd}function hd(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){null!=e?(e=id(c,e),f=id(c,f),(g>0?f>e:e>f)&&(e+=2*g*Je)):(e=a+2*g*Je,f=a);for(var i,j=g*b,k=e;g>0?k>f:f>k;k-=j)h.point((i=Uc([c,-d*Math.cos(k),-d*Math.sin(k)]))[0],i[1])}}function id(a,b){var c=Wc(b);c[0]-=a,_c(c);var d=Math.acos(Math.max(-1,Math.min(1,-c[1])));return((0>-c[2]?-d:d)+2*Math.PI-Ke)%(2*Math.PI)}function jd(a,b,c){return function(d){function e(b,c){a(b,c)&&d.point(b,c)}function f(a,b){q.point(a,b)}function g(){r.point=f,q.lineStart()}function h(){r.point=e,q.lineEnd()}function i(a,b){t.point(a,b),p.push([a,b])}function j(){t.lineStart(),p=[]}function k(){i(p[0][0],p[0][1]),t.lineEnd();var a,b=t.clean(),c=s.buffer(),e=c.length;if(!e)return o=!0,n+=pd(p,-1),void(p=null);if(p=null,1&b){a=c[0],m+=pd(a,1);var f,e=a.length-1,g=-1;for(d.lineStart();e>++g;)d.point((f=a[g])[0],f[1]);return void d.lineEnd()}e>1&&2&b&&c.push(c.pop().concat(c.shift())),l.push(c.filter(nd))}var l,m,n,o,p,q=b(d),r={point:e,lineStart:g,lineEnd:h,polygonStart:function(){r.point=i,r.lineStart=j,r.lineEnd=k,o=!1,n=m=0,l=[],d.polygonStart()},polygonEnd:function(){r.point=e,r.lineStart=g,r.lineEnd=h,l=d3.merge(l),l.length?kd(l,c,d):(-Ke>m||o&&-Ke>n)&&(d.lineStart(),c(null,null,1,d),d.lineEnd()),d.polygonEnd(),l=null},sphere:function(){d.polygonStart(),d.lineStart(),c(null,null,1,d),d.lineEnd(),d.polygonEnd()}},s=od(),t=b(s);return r}}function kd(a,b,c){var d=[],e=[];if(a.forEach(function(a){var b=a.length;if(!(1>=b)){var c=a[0],f=a[b-1],g={point:c,points:a,other:null,visited:!1,entry:!0,subject:!0},h={point:c,points:[c],other:g,visited:!1,entry:!1,subject:!1};g.other=h,d.push(g),e.push(h),g={point:f,points:[f],other:null,visited:!1,entry:!1,subject:!0},h={point:f,points:[f],other:g,visited:!1,entry:!0,subject:!1},g.other=h,d.push(g),e.push(h)}}),e.sort(md),ld(d),ld(e),d.length)for(var f,g,h,i=d[0];;){for(f=i;f.visited;)if((f=f.next)===i)return;g=f.points,c.lineStart();do{if(f.visited=f.other.visited=!0,f.entry){if(f.subject)for(var j=0;g.length>j;j++)c.point((h=g[j])[0],h[1]);else b(f.point,f.next.point,1,c);f=f.next}else{if(f.subject){g=f.prev.points;for(var j=g.length;--j>=0;)c.point((h=g[j])[0],h[1])}else b(f.point,f.prev.point,-1,c);f=f.prev}f=f.other,g=f.points}while(!f.visited);c.lineEnd()}}function ld(a){if(b=a.length){for(var b,c,d=0,e=a[0];b>++d;)e.next=c=a[d],c.prev=e,e=c;e.next=c=a[0],c.prev=e}}function md(a,b){return(0>(a=a.point)[0]?a[1]-Je/2-Ke:Je/2-a[1])-(0>(b=b.point)[0]?b[1]-Je/2-Ke:Je/2-b[1])}function nd(a){return a.length>1}function od(){var a,b=[];return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:La,buffer:function(){var c=b;return b=[],a=null,c}}}function pd(a,b){if(!(c=a.length))return 0;for(var c,d,e,f=0,g=0,h=a[0],i=h[0],j=h[1],k=Math.cos(j),l=Math.atan2(b*Math.sin(i)*k,Math.sin(j)),m=1-b*Math.cos(i)*k,n=l;c>++f;)h=a[f],k=Math.cos(j=h[1]),d=Math.atan2(b*Math.sin(i=h[0])*k,Math.sin(j)),e=1-b*Math.cos(i)*k,Ke>Math.abs(m-2)&&Ke>Math.abs(e-2)||(Ke>Math.abs(e)||Ke>Math.abs(m)||(Ke>Math.abs(Math.abs(d-l)-Je)?e+m>2&&(g+=4*(d-l)):g+=Ke>Math.abs(m-2)?4*(d-n):((3*Je+d-l)%(2*Je)-Je)*(m+e)),n=l,l=d,m=e);return g}function qd(a){var b,c=NaN,d=NaN,e=NaN;return{lineStart:function(){a.lineStart(),b=1},point:function(f,g){var h=f>0?Je:-Je,i=Math.abs(f-c);Ke>Math.abs(i-Je)?(a.point(c,d=(d+g)/2>0?Je/2:-Je/2),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(f,d),b=0):e!==h&&i>=Je&&(Ke>Math.abs(c-e)&&(c-=e*Ke),Ke>Math.abs(f-h)&&(f-=h*Ke),d=rd(c,d,f,g),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),b=0),a.point(c=f,d=g),e=h},lineEnd:function(){a.lineEnd(),c=d=NaN},clean:function(){return 2-b}}}function rd(a,b,c,d){var e,f,g=Math.sin(a-c);return Math.abs(g)>Ke?Math.atan((Math.sin(b)*(f=Math.cos(d))*Math.sin(c)-Math.sin(d)*(e=Math.cos(b))*Math.sin(a))/(e*f*g)):(b+d)/2}function sd(a,b,c,d){var e;if(null==a)e=c*Je/2,d.point(-Je,e),d.point(0,e),d.point(Je,e),d.point(Je,0),d.point(Je,-e),d.point(0,-e),d.point(-Je,-e),d.point(-Je,0),d.point(-Je,e);else if(Math.abs(a[0]-b[0])>Ke){var f=(a[0]<b[0]?1:-1)*Je;e=c*f/2,d.point(-f,e),d.point(0,e),d.point(f,e)}else d.point(b[0],b[1])}function td(a){function b(a,b){return Math.cos(a)*Math.cos(b)>f}function c(a){var c,e,f,g;return{lineStart:function(){f=e=!1,g=1},point:function(h,i){var j,k=[h,i],l=b(h,i);!c&&(f=e=l)&&a.lineStart(),l!==e&&(j=d(c,k),(Vc(c,j)||Vc(k,j))&&(k[0]+=Ke,k[1]+=Ke,l=b(k[0],k[1]))),l!==e&&(g=0,(e=l)?(a.lineStart(),j=d(k,c),a.point(j[0],j[1])):(j=d(c,k),a.point(j[0],j[1]),a.lineEnd()),c=j),!l||c&&Vc(c,k)||a.point(k[0],k[1]),c=k},lineEnd:function(){e&&a.lineEnd(),c=null},clean:function(){return g|(f&&e)<<1}}}function d(a,b){var c=Wc(a,0),d=Wc(b,0),e=[1,0,0],g=Yc(c,d),h=Xc(g,g),i=g[0],j=h-i*i;if(!j)return a;var k=f*h/j,l=-f*i/j,m=Yc(e,g),n=$c(e,k);Zc(n,$c(g,l));var o=m,p=Xc(n,o),q=Xc(o,o),r=Math.sqrt(p*p-q*(Xc(n,n)-1)),s=$c(o,(-p-r)/q);return Zc(s,n),Uc(s)}var e=a*Le,f=Math.cos(e);return jd(b,c,hd(e,6*Le))}function ud(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),a.invert(c[0],c[1])}),c}function vd(a,b){return[a,b]}function wd(a,b,c){var d=d3.range(a,b-Ke,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function xd(a,b,c){var d=d3.range(a,b-Ke,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function yd(a,b,c,d){function e(a){var b=Math.sin(a*=n)*o,c=Math.sin(n-a)*o,d=c*j+b*l,e=c*k+b*m,f=c*g+b*i;return[Math.atan2(e,d)/Le,Math.atan2(f,Math.sqrt(d*d+e*e))/Le]}var f=Math.cos(b),g=Math.sin(b),h=Math.cos(d),i=Math.sin(d),j=f*Math.cos(a),k=f*Math.sin(a),l=h*Math.cos(c),m=h*Math.sin(c),n=Math.acos(Math.max(-1,Math.min(1,g*i+f*h*Math.cos(c-a)))),o=1/Math.sin(n);return e.distance=n,e}function zd(a,b){return[a/(2*Je),Math.max(-.5,Math.min(.5,Math.log(Math.tan(Je/4+b/2))/(2*Je)))]}function Ad(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Bd(a){var b=ad(function(b,c){return a([b*Me,c*Me])});return function(a){return a=b(a),{point:function(b,c){a.point(b*Le,c*Le)},sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}}function Cd(){function a(a,b){g.push("M",a,",",b,f)}function b(a,b){g.push("M",a,",",b),h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function e(){g.push("Z")}var f=Ad(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d,h.point=a},pointRadius:function(a){return f=Ad(a),h},result:function(){if(g.length){var a=g.join("");return g=[],a}}};return h}function Dd(a){function b(b,c){a.moveTo(b,c),a.arc(b,c,g,0,2*Je)}function c(b,c){a.moveTo(b,c),h.point=d}function d(b,c){a.lineTo(b,c)}function e(){h.point=b}function f(){a.closePath()}var g=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=e,h.point=b},pointRadius:function(a){return g=a,h},result:La};return h}function Ed(){function a(a,b){mg+=e*a-d*b,d=a,e=b}var b,c,d,e;ng.point=function(f,g){ng.point=a,b=d=f,c=e=g},ng.lineEnd=function(){a(b,c)}}function Fd(a,b){cg||(eg+=a,fg+=b,++gg)}function Gd(){function a(a,d){var e=a-b,f=d-c,g=Math.sqrt(e*e+f*f);eg+=g*(b+a)/2,fg+=g*(c+d)/2,gg+=g,b=a,c=d}var b,c;if(1!==cg){if(!(1>cg))return;cg=1,eg=fg=gg=0}og.point=function(d,e){og.point=a,b=d,c=e}}function Hd(){og.point=Fd}function Id(){function a(a,b){var c=e*a-d*b;eg+=c*(d+a),fg+=c*(e+b),gg+=3*c,d=a,e=b}var b,c,d,e;2>cg&&(cg=2,eg=fg=gg=0),og.point=function(f,g){og.point=a,b=d=f,c=e=g},og.lineEnd=function(){a(b,c)}}function Jd(){function a(a,b){if(a*=Le,b*=Le,!(Ke>Math.abs(Math.abs(f)-Je/2)&&Ke>Math.abs(Math.abs(b)-Je/2))){var c=Math.cos(b),i=Math.sin(b);if(Ke>Math.abs(f-Je/2))qg+=2*(a-d);else{var j=a-e,k=Math.cos(j),l=Math.atan2(Math.sqrt((l=c*Math.sin(j))*l+(l=g*i-h*c*k)*l),h*i+g*c*k),m=(l+Je+f+b)/4;qg+=(0>j&&j>-Je||j>Je?-4:4)*Math.atan(Math.sqrt(Math.abs(Math.tan(m)*Math.tan(m-l/2)*Math.tan(m-Je/4-f/2)*Math.tan(m-Je/4-b/2))))}d=e,e=a,f=b,g=c,h=i}}var b,c,d,e,f,g,h;rg.point=function(i,j){rg.point=a,d=e=(b=i)*Le,f=(c=j)*Le,g=Math.cos(f),h=Math.sin(f)},rg.lineEnd=function(){a(b,c)}}function Kd(a){return Ld(function(){return a})()}function Ld(a){function b(a){return a=g(a[0]*Le,a[1]*Le),[a[0]*k+h,i-a[1]*k]}function c(a){return a=g.invert((a[0]-h)/k,(i-a[1])/k),[a[0]*Me,a[1]*Me]}function d(){g=ud(f=Nd(p,q,r),e);var a=e(n,o);return h=l-a[0]*k,i=m+a[1]*k,b}var e,f,g,h,i,j=ad(function(a,b){return a=e(a,b),[a[0]*k+h,i-a[1]*k]}),k=150,l=480,m=250,n=0,o=0,p=0,q=0,r=0,s=ig,t=null;return b.stream=function(a){return Md(f,s(j(a)))},b.clipAngle=function(a){return arguments.length?(s=null==a?(t=a,ig):td(t=+a),b):t},b.scale=function(a){return arguments.length?(k=+a,d()):k},b.translate=function(a){return arguments.length?(l=+a[0],m=+a[1],d()):[l,m]},b.center=function(a){return arguments.length?(n=a[0]%360*Le,o=a[1]%360*Le,d()):[n*Me,o*Me]},b.rotate=function(a){return arguments.length?(p=a[0]%360*Le,q=a[1]%360*Le,r=a.length>2?a[2]%360*Le:0,d()):[p*Me,q*Me,r*Me]},d3.rebind(b,j,"precision"),function(){return e=a.apply(this,arguments),b.invert=e.invert&&c,d()}}function Md(a,b){return{point:function(c,d){d=a(c*Le,d*Le),c=d[0],b.point(c>Je?c-2*Je:-Je>c?c+2*Je:c,d[1])},sphere:function(){b.sphere()},lineStart:function(){b.lineStart()},lineEnd:function(){b.lineEnd()},polygonStart:function(){b.polygonStart()},polygonEnd:function(){b.polygonEnd()}}}function Nd(a,b,c){return a?b||c?ud(Pd(a),Qd(b,c)):Pd(a):b||c?Qd(b,c):vd}function Od(a){return function(b,c){return b+=a,[b>Je?b-2*Je:-Je>b?b+2*Je:b,c]}}function Pd(a){var b=Od(a);return b.invert=Od(-a),b}function Qd(a,b){function c(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*d+h*e;return[Math.atan2(i*f-k*g,h*d-j*e),Math.asin(Math.max(-1,Math.min(1,k*f+i*g)))]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*f-i*g;return[Math.atan2(i*f+j*g,h*d+k*e),Math.asin(Math.max(-1,Math.min(1,k*d-h*e)))]},c}function Rd(a,b){function c(b,c){var d=Math.cos(b),e=Math.cos(c),f=a(d*e);return[f*e*Math.sin(b),f*Math.sin(c)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),g=Math.cos(e);return[Math.atan2(a*f,d*g),Math.asin(d&&c*f/d)]},c}function Sd(a,b,c,d){var e,f,g,h,i,j;return e=d[a],f=e[0],g=e[1],e=d[b],h=e[0],i=e[1],e=d[c],j=e[0],(e[1]-g)*(h-f)-(i-g)*(j-f)>0}function Td(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Ud(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,h=d[0]-f,i=a[1],j=c[1],k=b[1]-i,l=d[1]-j,m=(h*(i-j)-l*(e-f))/(l*g-h*k);return[e+m*g,i+m*k]}function Vd(a,b){var c={list:a.map(function(a,b){return{index:b,x:a[0],y:a[1]}}).sort(function(a,b){return a.y<b.y?-1:a.y>b.y?1:a.x<b.x?-1:a.x>b.x?1:0}),bottomSite:null},d={list:[],leftEnd:null,rightEnd:null,init:function(){d.leftEnd=d.createHalfEdge(null,"l"),d.rightEnd=d.createHalfEdge(null,"l"),d.leftEnd.r=d.rightEnd,d.rightEnd.l=d.leftEnd,d.list.unshift(d.leftEnd,d.rightEnd)},createHalfEdge:function(a,b){return{edge:a,side:b,vertex:null,l:null,r:null}},insert:function(a,b){b.l=a,b.r=a.r,a.r.l=b,a.r=b},leftBound:function(a){var b=d.leftEnd;do{b=b.r}while(b!=d.rightEnd&&e.rightOf(b,a));return b=b.l},del:function(a){a.l.r=a.r,a.r.l=a.l,a.edge=null},right:function(a){return a.r},left:function(a){return a.l},leftRegion:function(a){return null==a.edge?c.bottomSite:a.edge.region[a.side]},rightRegion:function(a){return null==a.edge?c.bottomSite:a.edge.region[tg[a.side]]}},e={bisect:function(a,b){var c={region:{l:a,r:b},ep:{l:null,r:null}},d=b.x-a.x,e=b.y-a.y,f=d>0?d:-d,g=e>0?e:-e;return c.c=a.x*d+a.y*e+.5*(d*d+e*e),f>g?(c.a=1,c.b=e/d,c.c/=d):(c.b=1,c.a=d/e,c.c/=e),c},intersect:function(a,b){var c=a.edge,d=b.edge;if(!c||!d||c.region.r==d.region.r)return null;var e=c.a*d.b-c.b*d.a;if(1e-10>Math.abs(e))return null;var f,g,h=(c.c*d.b-d.c*c.b)/e,i=(d.c*c.a-c.c*d.a)/e,j=c.region.r,k=d.region.r;j.y<k.y||j.y==k.y&&j.x<k.x?(f=a,g=c):(f=b,g=d);var l=h>=g.region.r.x;return l&&"l"===f.side||!l&&"r"===f.side?null:{x:h,y:i}},rightOf:function(a,b){var c=a.edge,d=c.region.r,e=b.x>d.x;if(e&&"l"===a.side)return 1;if(!e&&"r"===a.side)return 0;if(1===c.a){var f=b.y-d.y,g=b.x-d.x,h=0,i=0;if(!e&&0>c.b||e&&c.b>=0?i=h=f>=c.b*g:(i=b.x+b.y*c.b>c.c,0>c.b&&(i=!i),i||(h=1)),!h){var j=d.x-c.region.l.x;i=c.b*(g*g-f*f)<j*f*(1+2*g/j+c.b*c.b),0>c.b&&(i=!i)}}else{var k=c.c-c.a*b.x,l=b.y-k,m=b.x-d.x,n=k-d.y;i=l*l>m*m+n*n}return"l"===a.side?i:!i},endPoint:function(a,c,d){a.ep[c]=d,a.ep[tg[c]]&&b(a)},distance:function(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)}},f={list:[],insert:function(a,b,c){a.vertex=b,a.ystar=b.y+c;for(var d=0,e=f.list,g=e.length;g>d;d++){var h=e[d];if(!(a.ystar>h.ystar||a.ystar==h.ystar&&b.x>h.vertex.x))break}e.splice(d,0,a)},del:function(a){for(var b=0,c=f.list,d=c.length;d>b&&c[b]!=a;++b);c.splice(b,1)},empty:function(){return 0===f.list.length},nextEvent:function(a){for(var b=0,c=f.list,d=c.length;d>b;++b)if(c[b]==a)return c[b+1];return null},min:function(){var a=f.list[0];return{x:a.vertex.x,y:a.ystar}},extractMin:function(){return f.list.shift()}};d.init(),c.bottomSite=c.list.shift();for(var g,h,i,j,k,l,m,n,o,p,q,r,s,t=c.list.shift();;)if(f.empty()||(g=f.min()),t&&(f.empty()||t.y<g.y||t.y==g.y&&t.x<g.x))h=d.leftBound(t),i=d.right(h),m=d.rightRegion(h),r=e.bisect(m,t),l=d.createHalfEdge(r,"l"),d.insert(h,l),p=e.intersect(h,l),p&&(f.del(h),f.insert(h,p,e.distance(p,t))),h=l,l=d.createHalfEdge(r,"r"),d.insert(h,l),p=e.intersect(l,i),p&&f.insert(l,p,e.distance(p,t)),t=c.list.shift();else{if(f.empty())break;h=f.extractMin(),j=d.left(h),i=d.right(h),k=d.right(i),m=d.leftRegion(h),n=d.rightRegion(i),q=h.vertex,e.endPoint(h.edge,h.side,q),e.endPoint(i.edge,i.side,q),d.del(h),f.del(i),d.del(i),s="l",m.y>n.y&&(o=m,m=n,n=o,s="r"),r=e.bisect(m,n),l=d.createHalfEdge(r,s),d.insert(j,l),e.endPoint(r,tg[s],q),p=e.intersect(j,l),p&&(f.del(j),f.insert(j,p,e.distance(p,m))),(p=e.intersect(l,k))&&f.insert(l,p,e.distance(p,m))}for(h=d.right(d.leftEnd);h!=d.rightEnd;h=d.right(h))b(h.edge)}function Wd(){return{leaf:!0,nodes:[],point:null}}function Xd(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f),i=b.nodes;i[0]&&Xd(a,i[0],c,d,g,h),i[1]&&Xd(a,i[1],g,d,e,h),i[2]&&Xd(a,i[2],c,h,g,f),i[3]&&Xd(a,i[3],g,h,e,f)}}function Yd(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Zd(a,b,c,d){for(var e,f,g=0,h=b.length,i=c.length;h>g;){if(d>=i)return-1;if(37===(e=b.charCodeAt(g++))){if(!(f=Mg[b.charAt(g++)])||0>(d=f(a,c,d)))return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function $d(a){return RegExp("^(?:"+a.map(d3.requote).join("|")+")","i")}function _d(a){for(var b=new f,c=-1,d=a.length;d>++c;)b.set(a[c].toLowerCase(),c);return b}function ae(a,b,c){a+="";var d=a.length;return c>d?Array(c-d+1).join(b)+a:a}function be(a,b,c){Fg.lastIndex=0;var d=Fg.exec(b.substring(c));return d?c+=d[0].length:-1}function ce(a,b,c){Eg.lastIndex=0;var d=Eg.exec(b.substring(c));return d?c+=d[0].length:-1}function de(a,b,c){Ig.lastIndex=0;var d=Ig.exec(b.substring(c));return d?(a.m=Jg.get(d[0].toLowerCase()),c+=d[0].length):-1}function ee(a,b,c){Gg.lastIndex=0;var d=Gg.exec(b.substring(c));return d?(a.m=Hg.get(d[0].toLowerCase()),c+=d[0].length):-1}function fe(a,b,c){return Zd(a,""+Lg.c,b,c)}function ge(a,b,c){return Zd(a,""+Lg.x,b,c)}function he(a,b,c){return Zd(a,""+Lg.X,b,c)}function ie(a,b,c){Ng.lastIndex=0;var d=Ng.exec(b.substring(c,c+4));return d?(a.y=+d[0],c+=d[0].length):-1}function je(a,b,c){Ng.lastIndex=0;var d=Ng.exec(b.substring(c,c+2));return d?(a.y=ke(+d[0]),c+=d[0].length):-1}function ke(a){return a+(a>68?1900:2e3)}function le(a,b,c){Ng.lastIndex=0;var d=Ng.exec(b.substring(c,c+2));return d?(a.m=d[0]-1,c+=d[0].length):-1}function me(a,b,c){Ng.lastIndex=0;var d=Ng.exec(b.substring(c,c+2));return d?(a.d=+d[0],c+=d[0].length):-1}function ne(a,b,c){Ng.lastIndex=0;var d=Ng.exec(b.substring(c,c+2));return d?(a.H=+d[0],c+=d[0].length):-1}function oe(a,b,c){Ng.lastIndex=0;var d=Ng.exec(b.substring(c,c+2));return d?(a.M=+d[0],c+=d[0].length):-1}function pe(a,b,c){Ng.lastIndex=0;var d=Ng.exec(b.substring(c,c+2));return d?(a.S=+d[0],c+=d[0].length):-1}function qe(a,b,c){Ng.lastIndex=0;var d=Ng.exec(b.substring(c,c+3));return d?(a.L=+d[0],c+=d[0].length):-1}function re(a,b,c){var d=Og.get(b.substring(c,c+=2).toLowerCase());return null==d?-1:(a.p=d,c)}function se(a){var b=a.getTimezoneOffset(),c=b>0?"-":"+",d=~~(Math.abs(b)/60),e=Math.abs(b)%60;return c+ae(d,"0",2)+ae(e,"0",2)}function te(a){return a.toISOString()}function ue(a,b,c){function d(b){var c=a(b),d=f(c,1);return d-b>b-c?c:d}function e(c){return b(c=a(new ug(c-1)),1),c}function f(a,c){return b(a=new ug(+a),c),a}function g(a,d,f){var g=e(a),h=[];if(f>1)for(;d>g;)c(g)%f||h.push(new Date(+g)),b(g,1);else for(;d>g;)h.push(new Date(+g)),b(g,1);return h}function h(a,b,c){try{ug=Yd;var d=new Yd;return d._=a,g(d,b,c)}finally{ug=Date}}a.floor=a,a.round=d,a.ceil=e,a.offset=f,a.range=g;var i=a.utc=ve(a);return i.floor=i,i.round=ve(d),i.ceil=ve(e),i.offset=ve(f),i.range=h,a}function ve(a){return function(b,c){try{ug=Yd;var d=new Yd;return d._=b,a(d,c)._}finally{ug=Date}}}function we(a,b,c){function d(b){return a(b)}return d.invert=function(b){return ye(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(ye)},d.nice=function(a){return d.domain(Oa(d.domain(),function(){return a}))},d.ticks=function(c,e){var f=xe(d.domain());if("function"!=typeof c){var g=f[1]-f[0],h=g/c,i=d3.bisect(Qg,h);if(i==Qg.length)return b.year(f,c);if(!i)return a.ticks(c).map(ye);Math.log(h/Qg[i-1])<Math.log(Qg[i]/h)&&--i,c=b[i],e=c[1],c=c[0].range}return c(f[0],new Date(+f[1]+1),e)},d.tickFormat=function(){return c},d.copy=function(){return we(a.copy(),b,c)},d3.rebind(d,a,"range","rangeRound","interpolate","clamp")}function xe(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function ye(a){return new Date(a)}function ze(a){return function(b){for(var c=a.length-1,d=a[c];!d[1](b);)d=a[--c];return d[0](b)}}function Ae(a){var b=new Date(a,0,1);return b.setFullYear(a),b}function Be(a){var b=a.getFullYear(),c=Ae(b);return b+(a-c)/(Ae(b+1)-c)}function Ce(a){var b=new Date(Date.UTC(a,0,1));return b.setUTCFullYear(a),b}function De(a){var b=a.getUTCFullYear(),c=Ce(b);return b+(a-c)/(Ce(b+1)-c)}var Ee=".",Fe=",",Ge=[3,3];Date.now||(Date.now=function(){return+new Date});try{document.createElement("div").style.setProperty("opacity",0,"")}catch(a){var He=CSSStyleDeclaration.prototype,Ie=He.setProperty;He.setProperty=function(a,b,c){Ie.call(this,a,b+"",c)}}d3={version:"3.0.0"};var Je=Math.PI,Ke=1e-6,Le=Je/180,Me=180/Je,Ne=e;try{Ne(document.documentElement.childNodes)[0].nodeType}catch(a){Ne=d}var Oe=[].__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]};d3.map=function(a){var b=new f;for(var c in a)b.set(c,a[c]);return b},c(f,{has:function(a){return Pe+a in this},get:function(a){return this[Pe+a]},set:function(a,b){return this[Pe+a]=b},remove:function(a){return(a=Pe+a)in this&&delete this[a]},keys:function(){var a=[];return this.forEach(function(b){a.push(b)}),a},values:function(){var a=[];return this.forEach(function(b,c){a.push(c)}),a},entries:function(){var a=[];return this.forEach(function(b,c){a.push({key:b,value:c})}),a},forEach:function(a){for(var b in this)b.charCodeAt(0)===Qe&&a.call(this,b.substring(1),this[b])}});var Pe="\0",Qe=Pe.charCodeAt(0);d3.functor=i,d3.rebind=function(a,b){for(var c,d=1,e=arguments.length;e>++d;)a[c=arguments[d]]=j(a,b,b[c]);return a},d3.ascending=function(a,b){return b>a?-1:a>b?1:a>=b?0:NaN},d3.descending=function(a,b){return a>b?-1:b>a?1:b>=a?0:NaN},d3.mean=function(a,b){var c,d=a.length,e=0,f=-1,g=0;if(1===arguments.length)for(;d>++f;)k(c=a[f])&&(e+=(c-e)/++g);else for(;d>++f;)k(c=b.call(a,a[f],f))&&(e+=(c-e)/++g);return g?e:void 0},d3.median=function(a,b){return arguments.length>1&&(a=a.map(b)),a=a.filter(k),a.length?d3.quantile(a.sort(d3.ascending),.5):void 0},d3.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;f>++e&&(null==(c=a[e])||c!=c);)c=void 0;for(;f>++e;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;f>++e&&(null==(c=b.call(a,a[e],e))||c!=c);)c=void 0;for(;f>++e;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c},d3.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;f>++e&&(null==(c=a[e])||c!=c);)c=void 0;for(;f>++e;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;f>++e&&(null==(c=b.call(a,a[e],e))||c!=c);)c=void 0;for(;f>++e;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c},d3.extent=function(a,b){var c,d,e,f=-1,g=a.length;if(1===arguments.length){for(;g>++f&&(null==(c=e=a[f])||c!=c);)c=e=void 0;for(;g>++f;)null!=(d=a[f])&&(c>d&&(c=d),d>e&&(e=d))}else{for(;g>++f&&(null==(c=e=b.call(a,a[f],f))||c!=c);)c=void 0;for(;g>++f;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),d>e&&(e=d))}return[c,e]},d3.random={normal:function(a,b){var c=arguments.length;return 2>c&&(b=1),1>c&&(a=0),function(){var c,d,e;do{c=2*Math.random()-1,d=2*Math.random()-1,e=c*c+d*d}while(!e||e>1);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(a,b){var c=arguments.length;2>c&&(b=1),1>c&&(a=0);var d=d3.random.normal();return function(){return Math.exp(a+b*d())}},irwinHall:function(a){return function(){for(var b=0,c=0;a>c;c++)b+=Math.random();return b/a}}},d3.sum=function(a,b){var c,d=0,e=a.length,f=-1;if(1===arguments.length)for(;e>++f;)isNaN(c=+a[f])||(d+=c);else for(;e>++f;)isNaN(c=+b.call(a,a[f],f))||(d+=c);return d},d3.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1],f=c-d;return f?e+f*(a[d]-e):e},d3.shuffle=function(a){for(var b,c,d=a.length;d;)c=0|Math.random()*d--,b=a[d],a[d]=a[c],a[c]=b;return a},d3.transpose=function(a){return d3.zip.apply(d3,a)},d3.zip=function(){if(!(d=arguments.length))return[];for(var a=-1,b=d3.min(arguments,l),c=Array(b);b>++a;)for(var d,e=-1,f=c[a]=Array(d);d>++e;)f[e]=arguments[e][a];return c},d3.bisector=function(a){return{left:function(b,c,d,e){for(3>arguments.length&&(d=0),4>arguments.length&&(e=b.length);e>d;){var f=d+e>>>1;c>a.call(b,b[f],f)?d=f+1:e=f}return d},right:function(b,c,d,e){for(3>arguments.length&&(d=0),4>arguments.length&&(e=b.length);e>d;){var f=d+e>>>1;a.call(b,b[f],f)>c?e=f:d=f+1}return d}}};var Re=d3.bisector(function(a){return a});d3.bisectLeft=Re.left,d3.bisect=d3.bisectRight=Re.right,d3.nest=function(){function a(b,h){if(h>=g.length)return d?d.call(e,b):c?b.sort(c):b;for(var i,j,k,l=-1,m=b.length,n=g[h++],o=new f,p={};m>++l;)(k=o.get(i=n(j=b[l])))?k.push(j):o.set(i,[j]);return o.forEach(function(b,c){p[b]=a(c,h)}),p}function b(a,c){if(c>=g.length)return a;var d,e=[],f=h[c++];for(d in a)e.push({key:d,values:b(a[d],c)});return f&&e.sort(function(a,b){return f(a.key,b.key)}),e}var c,d,e={},g=[],h=[];return e.map=function(b){return a(b,0)},e.entries=function(c){return b(a(c,0),0)},e.key=function(a){return g.push(a),e},e.sortKeys=function(a){return h[g.length-1]=a,e},e.sortValues=function(a){return c=a,e},e.rollup=function(a){return d=a,e},e},d3.keys=function(a){var b=[];for(var c in a)b.push(c);return b},d3.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},d3.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},d3.permute=function(a,b){for(var c=[],d=-1,e=b.length;e>++d;)c[d]=a[b[d]];return c},d3.merge=function(a){return Array.prototype.concat.apply([],a)},d3.range=function(a,b,c){if(3>arguments.length&&(c=1,2>arguments.length&&(b=a,a=0)),1/0==(b-a)/c)throw Error("infinite range");var d,e=[],f=n(Math.abs(c)),g=-1;if(a*=f,b*=f,0>(c*=f))for(;(d=a+c*++g)>b;)e.push(d/f);else for(;b>(d=a+c*++g);)e.push(d/f);return e},d3.requote=function(a){return a.replace(Se,"\\$&")};var Se=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;d3.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)},d3.xhr=function(a,b,c){function d(){var a=j.status;!a&&j.responseText||a>=200&&300>a||304===a?f.load.call(e,i.call(e,j)):f.error.call(e,j)}var e={},f=d3.dispatch("progress","load","error"),h={},i=g,j=new(window.XDomainRequest&&/^(http(s)?:)?\/\//.test(a)?XDomainRequest:XMLHttpRequest);return"onload"in j?j.onload=j.onerror=d:j.onreadystatechange=function(){j.readyState>3&&d()},j.onprogress=function(a){var b=d3.event;d3.event=a;try{f.progress.call(e,j)}finally{d3.event=b}},e.header=function(a,b){return a=(a+"").toLowerCase(),2>arguments.length?h[a]:(null==b?delete h[a]:h[a]=b+"",e)},e.mimeType=function(a){return arguments.length?(b=null==a?null:a+"",e):b},e.response=function(a){return i=a,e},["get","post"].forEach(function(a){e[a]=function(){return e.send.apply(e,[a].concat(Ne(arguments)))}}),e.send=function(c,d,f){if(2===arguments.length&&"function"==typeof d&&(f=d,d=null),j.open(c,a,!0),null==b||"accept"in h||(h.accept=b+",*/*"),j.setRequestHeader)for(var g in h)j.setRequestHeader(g,h[g]);return null!=b&&j.overrideMimeType&&j.overrideMimeType(b),null!=f&&e.on("error",f).on("load",function(a){f(null,a)}),j.send(null==d?null:d),e},e.abort=function(){return j.abort(),e},d3.rebind(e,f,"on"),2===arguments.length&&"function"==typeof b&&(c=b,b=null),null==c?e:e.get(o(c))},d3.text=function(){return d3.xhr.apply(d3,arguments).response(p)},d3.json=function(a,b){return d3.xhr(a,"application/json",b).response(q)},d3.html=function(a,b){return d3.xhr(a,"text/html",b).response(r)},d3.xml=function(){return d3.xhr.apply(d3,arguments).response(s)};var Te={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};d3.ns={prefix:Te,qualify:function(a){var b=a.indexOf(":"),c=a;return b>=0&&(c=a.substring(0,b),a=a.substring(b+1)),Te.hasOwnProperty(c)?{space:Te[c],local:a}:a}},d3.dispatch=function(){for(var a=new t,b=-1,c=arguments.length;c>++b;)a[arguments[b]]=u(a);return a},t.prototype.on=function(a,b){var c=a.indexOf("."),d="";return c>0&&(d=a.substring(c+1),a=a.substring(0,c)),2>arguments.length?this[a].on(d):this[a].on(d,b)},d3.format=function(a){var b=Ue.exec(a),c=b[1]||" ",d=b[2]||">",e=b[3]||"",f=b[4]||"",g=b[5],h=+b[6],i=b[7],j=b[8],k=b[9],l=1,m="",n=!1;switch(j&&(j=+j.substring(1)),(g||"0"===c&&"="===d)&&(g=c="0",d="=",i&&(h-=Math.floor((h-1)/4))),k){case"n":i=!0,k="g";break;case"%":l=100,m="%",k="f";break;case"p":l=100,m="%",k="r";break;case"b":case"o":case"x":case"X":f&&(f="0"+k.toLowerCase());case"c":case"d":n=!0,j=0;break;case"s":l=-1,k="r"}"#"===f&&(f=""),"r"!=k||j||(k="g"),k=Ve.get(k)||w;var o=g&&i;return function(a){if(n&&a%1)return"";var b=0>a||0===a&&0>1/a?(a=-a,"-"):e;if(0>l){var p=d3.formatPrefix(a,j);a=p.scale(a),m=p.symbol}else a*=l;a=k(a,j),!g&&i&&(a=We(a));var q=f.length+a.length+(o?0:b.length),r=h>q?Array(q=h-q+1).join(c):"";return o&&(a=We(r+a)),Ee&&a.replace(".",Ee),b+=f,("<"===d?b+a+r:">"===d?r+b+a:"^"===d?r.substring(0,q>>=1)+b+a+r.substring(q):b+(o?a:r+a))+m}};var Ue=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,Ve=d3.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return d3.round(a,b=v(a,b)).toFixed(Math.max(0,Math.min(20,b)))}}),We=g;if(Ge){var Xe=Ge.length;We=function(a){for(var b=a.lastIndexOf("."),c=b>=0?"."+a.substring(b+1):(b=a.length,""),d=[],e=0,f=Ge[0];b>0&&f>0;)d.push(a.substring(b-=f,b+f)),f=Ge[e=(e+1)%Xe];return d.reverse().join(Fe||"")+c}}var Ye=["y","z","a","f","p","n","μ","m","","k","M","G","T","P","E","Z","Y"].map(x);d3.formatPrefix=function(a,b){var c=0;return a&&(0>a&&(a*=-1),b&&(a=d3.round(a,v(a,b))),c=1+Math.floor(1e-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((0>=c?c+1:c-1)/3)))),
Ye[8+c/3]};var Ze=function(){return g},$e=d3.map({linear:Ze,poly:E,quad:function(){return B},cubic:function(){return C},sin:function(){return F},exp:function(){return G},circle:function(){return H},elastic:I,back:J,bounce:function(){return K}}),_e=d3.map({in:g,out:z,"in-out":A,"out-in":function(a){return A(z(a))}});d3.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.substring(0,b):a,d=b>=0?a.substring(b+1):"in";return c=$e.get(c)||Ze,d=_e.get(d)||g,y(d(c.apply(null,Array.prototype.slice.call(arguments,1))))},d3.event=null,d3.transform=function(a){var b=document.createElementNS(d3.ns.prefix.svg,"g");return(d3.transform=function(a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate();return new O(c?c.matrix:af)})(a)},O.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var af={a:1,b:0,c:0,d:1,e:0,f:0};d3.interpolate=function(a,b){for(var c,d=d3.interpolators.length;--d>=0&&!(c=d3.interpolators[d](a,b)););return c},d3.interpolateNumber=function(a,b){return b-=a,function(c){return a+b*c}},d3.interpolateRound=function(a,b){return b-=a,function(c){return Math.round(a+b*c)}},d3.interpolateString=function(a,b){var c,d,e,f,g,h=0,i=[],j=[];for(bf.lastIndex=0,d=0;c=bf.exec(b);++d)c.index&&i.push(b.substring(h,c.index)),j.push({i:i.length,x:c[0]}),i.push(null),h=bf.lastIndex;for(b.length>h&&i.push(b.substring(h)),d=0,f=j.length;(c=bf.exec(a))&&f>d;++d)if(g=j[d],g.x==c[0]){if(g.i)if(null==i[g.i+1])for(i[g.i-1]+=g.x,i.splice(g.i,1),e=d+1;f>e;++e)j[e].i--;else for(i[g.i-1]+=g.x+i[g.i+1],i.splice(g.i,2),e=d+1;f>e;++e)j[e].i-=2;else if(null==i[g.i+1])i[g.i]=g.x;else for(i[g.i]=g.x+i[g.i+1],i.splice(g.i+1,1),e=d+1;f>e;++e)j[e].i--;j.splice(d,1),f--,d--}else g.x=d3.interpolateNumber(parseFloat(c[0]),parseFloat(g.x));for(;f>d;)g=j.pop(),null==i[g.i+1]?i[g.i]=g.x:(i[g.i]=g.x+i[g.i+1],i.splice(g.i+1,1)),f--;return 1===i.length?null==i[0]?j[0].x:function(){return b}:function(a){for(d=0;f>d;++d)i[(g=j[d]).i]=g.x(a);return i.join("")}},d3.interpolateTransform=function(a,b){var c,d=[],e=[],f=d3.transform(a),g=d3.transform(b),h=f.translate,i=g.translate,j=f.rotate,k=g.rotate,l=f.skew,m=g.skew,n=f.scale,o=g.scale;return h[0]!=i[0]||h[1]!=i[1]?(d.push("translate(",null,",",null,")"),e.push({i:1,x:d3.interpolateNumber(h[0],i[0])},{i:3,x:d3.interpolateNumber(h[1],i[1])})):i[0]||i[1]?d.push("translate("+i+")"):d.push(""),j!=k?(j-k>180?k+=360:k-j>180&&(j+=360),e.push({i:d.push(d.pop()+"rotate(",null,")")-2,x:d3.interpolateNumber(j,k)})):k&&d.push(d.pop()+"rotate("+k+")"),l!=m?e.push({i:d.push(d.pop()+"skewX(",null,")")-2,x:d3.interpolateNumber(l,m)}):m&&d.push(d.pop()+"skewX("+m+")"),n[0]!=o[0]||n[1]!=o[1]?(c=d.push(d.pop()+"scale(",null,",",null,")"),e.push({i:c-4,x:d3.interpolateNumber(n[0],o[0])},{i:c-2,x:d3.interpolateNumber(n[1],o[1])})):(1!=o[0]||1!=o[1])&&d.push(d.pop()+"scale("+o+")"),c=e.length,function(a){for(var b,f=-1;c>++f;)d[(b=e[f]).i]=b.x(a);return d.join("")}},d3.interpolateRgb=function(a,b){a=d3.rgb(a),b=d3.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"#"+Y(Math.round(c+f*a))+Y(Math.round(d+g*a))+Y(Math.round(e+h*a))}},d3.interpolateHsl=function(a,b){a=d3.hsl(a),b=d3.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return f>180?f-=360:-180>f&&(f+=360),function(a){return ea(c+f*a,d+g*a,e+h*a)+""}},d3.interpolateLab=function(a,b){a=d3.lab(a),b=d3.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,h=b.b-e;return function(a){return ka(c+f*a,d+g*a,e+h*a)+""}},d3.interpolateHcl=function(a,b){a=d3.hcl(a),b=d3.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,h=b.l-e;return f>180?f-=360:-180>f&&(f+=360),function(a){return ha(c+f*a,d+g*a,e+h*a)+""}},d3.interpolateArray=function(a,b){var c,d=[],e=[],f=a.length,g=b.length,h=Math.min(a.length,b.length);for(c=0;h>c;++c)d.push(d3.interpolate(a[c],b[c]));for(;f>c;++c)e[c]=a[c];for(;g>c;++c)e[c]=b[c];return function(a){for(c=0;h>c;++c)e[c]=d[c](a);return e}},d3.interpolateObject=function(a,b){var c,d={},e={};for(c in a)c in b?d[c]=S(c)(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}};var bf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;d3.interpolators=[d3.interpolateObject,function(a,b){return b instanceof Array&&d3.interpolateArray(a,b)},function(a,b){return("string"==typeof a||"string"==typeof b)&&d3.interpolateString(a+"",b+"")},function(a,b){return("string"==typeof b?df.has(b)||/^(#|rgb\(|hsl\()/.test(b):b instanceof V)&&d3.interpolateRgb(a,b)},function(a,b){return!isNaN(a=+a)&&!isNaN(b=+b)&&d3.interpolateNumber(a,b)}],V.prototype.toString=function(){return this.rgb()+""},d3.rgb=function(a,b,c){return 1===arguments.length?a instanceof X?W(a.r,a.g,a.b):Z(""+a,W,ea):W(~~a,~~b,~~c)};var cf=X.prototype=new V;cf.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return b||c||d?(b&&e>b&&(b=e),c&&e>c&&(c=e),d&&e>d&&(d=e),W(Math.min(255,Math.floor(b/a)),Math.min(255,Math.floor(c/a)),Math.min(255,Math.floor(d/a)))):W(e,e,e)},cf.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),W(Math.floor(a*this.r),Math.floor(a*this.g),Math.floor(a*this.b))},cf.hsl=function(){return $(this.r,this.g,this.b)},cf.toString=function(){return"#"+Y(this.r)+Y(this.g)+Y(this.b)};var df=d3.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});df.forEach(function(a,b){df.set(a,Z(b,W,ea))}),d3.hsl=function(a,b,c){return 1===arguments.length?a instanceof da?ca(a.h,a.s,a.l):Z(""+a,$,ca):ca(+a,+b,+c)};var ef=da.prototype=new V;ef.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),ca(this.h,this.s,this.l/a)},ef.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),ca(this.h,this.s,a*this.l)},ef.rgb=function(){return ea(this.h,this.s,this.l)},d3.hcl=function(a,b,c){return 1===arguments.length?a instanceof ga?fa(a.h,a.c,a.l):a instanceof ja?la(a.l,a.a,a.b):la((a=_((a=d3.rgb(a)).r,a.g,a.b)).l,a.a,a.b):fa(+a,+b,+c)};var ff=ga.prototype=new V;ff.brighter=function(a){return fa(this.h,this.c,Math.min(100,this.l+gf*(arguments.length?a:1)))},ff.darker=function(a){return fa(this.h,this.c,Math.max(0,this.l-gf*(arguments.length?a:1)))},ff.rgb=function(){return ha(this.h,this.c,this.l).rgb()},d3.lab=function(a,b,c){return 1===arguments.length?a instanceof ja?ia(a.l,a.a,a.b):a instanceof ga?ha(a.l,a.c,a.h):_((a=d3.rgb(a)).r,a.g,a.b):ia(+a,+b,+c)};var gf=18,hf=.95047,jf=1,kf=1.08883,lf=ja.prototype=new V;lf.brighter=function(a){return ia(Math.min(100,this.l+gf*(arguments.length?a:1)),this.a,this.b)},lf.darker=function(a){return ia(Math.max(0,this.l-gf*(arguments.length?a:1)),this.a,this.b)},lf.rgb=function(){return ka(this.l,this.a,this.b)};var mf=function(a,b){return b.querySelector(a)},nf=function(a,b){return b.querySelectorAll(a)},of=document.documentElement,pf=of.matchesSelector||of.webkitMatchesSelector||of.mozMatchesSelector||of.msMatchesSelector||of.oMatchesSelector,qf=function(a,b){return pf.call(a,b)};"function"==typeof Sizzle&&(mf=function(a,b){return Sizzle(a,b)[0]||null},nf=function(a,b){return Sizzle.uniqueSort(Sizzle(a,b))},qf=Sizzle.matchesSelector);var rf=[];d3.selection=function(){return sf},d3.selection.prototype=rf,rf.select=function(a){var b,c,d,e,f=[];"function"!=typeof a&&(a=qa(a));for(var g=-1,h=this.length;h>++g;){f.push(b=[]),b.parentNode=(d=this[g]).parentNode;for(var i=-1,j=d.length;j>++i;)(e=d[i])?(b.push(c=a.call(e,e.__data__,i)),c&&"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return pa(f)},rf.selectAll=function(a){var b,c,d=[];"function"!=typeof a&&(a=ra(a));for(var e=-1,f=this.length;f>++e;)for(var g=this[e],h=-1,i=g.length;i>++h;)(c=g[h])&&(d.push(b=Ne(a.call(c,c.__data__,h))),b.parentNode=c);return pa(d)},rf.attr=function(a,b){if(2>arguments.length){if("string"==typeof a){var c=this.node();return a=d3.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(sa(b,a[b]));return this}return this.each(sa(a,b))},rf.classed=function(a,b){if(2>arguments.length){if("string"==typeof a){var c=this.node(),d=(a=a.trim().split(/^|\s+/g)).length,e=-1;if(b=c.classList){for(;d>++e;)if(!b.contains(a[e]))return!1}else for(b=c.className,null!=b.baseVal&&(b=b.baseVal);d>++e;)if(!ta(a[e]).test(b))return!1;return!0}for(b in a)this.each(ua(b,a[b]));return this}return this.each(ua(a,b))},rf.style=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b="");for(c in a)this.each(wa(c,a[c],b));return this}if(2>d)return getComputedStyle(this.node(),null).getPropertyValue(a);c=""}return this.each(wa(a,b,c))},rf.property=function(a,b){if(2>arguments.length){if("string"==typeof a)return this.node()[a];for(b in a)this.each(xa(b,a[b]));return this}return this.each(xa(a,b))},rf.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},rf.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},rf.append=function(a){function b(){return this.appendChild(document.createElementNS(this.namespaceURI,a))}function c(){return this.appendChild(document.createElementNS(a.space,a.local))}return a=d3.ns.qualify(a),this.select(a.local?c:b)},rf.insert=function(a,b){function c(){return this.insertBefore(document.createElementNS(this.namespaceURI,a),mf(b,this))}function d(){return this.insertBefore(document.createElementNS(a.space,a.local),mf(b,this))}return a=d3.ns.qualify(a),this.select(a.local?d:c)},rf.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})},rf.data=function(a,b){function c(a,c){var d,e,g,h=a.length,l=c.length,m=Math.min(h,l),n=Math.max(h,l),o=[],p=[],q=[];if(b){var r,s=new f,t=[],u=c.length;for(d=-1;h>++d;)r=b.call(e=a[d],e.__data__,d),s.has(r)?q[u++]=e:s.set(r,e),t.push(r);for(d=-1;l>++d;)r=b.call(c,g=c[d],d),s.has(r)?(o[d]=e=s.get(r),e.__data__=g,p[d]=q[d]=null):(p[d]=ya(g),o[d]=q[d]=null),s.remove(r);for(d=-1;h>++d;)s.has(t[d])&&(q[d]=a[d])}else{for(d=-1;m>++d;)e=a[d],g=c[d],e?(e.__data__=g,o[d]=e,p[d]=q[d]=null):(p[d]=ya(g),o[d]=q[d]=null);for(;l>d;++d)p[d]=ya(c[d]),o[d]=q[d]=null;for(;n>d;++d)q[d]=a[d],p[d]=o[d]=null}p.update=o,p.parentNode=o.parentNode=q.parentNode=a.parentNode,i.push(p),j.push(o),k.push(q)}var d,e,g=-1,h=this.length;if(!arguments.length){for(a=Array(h=(d=this[0]).length);h>++g;)(e=d[g])&&(a[g]=e.__data__);return a}var i=Da([]),j=pa([]),k=pa([]);if("function"==typeof a)for(;h>++g;)c(d=this[g],a.call(d,d.parentNode.__data__,g));else for(;h>++g;)c(d=this[g],a);return j.enter=function(){return i},j.exit=function(){return k},j},rf.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},rf.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=za(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]),b.parentNode=(c=this[f]).parentNode;for(var h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h)&&b.push(d)}return pa(e)},rf.order=function(){for(var a=-1,b=this.length;b>++a;)for(var c,d=this[a],e=d.length-1,f=d[e];--e>=0;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this},rf.sort=function(a){a=Aa.apply(this,arguments);for(var b=-1,c=this.length;c>++b;)this[b].sort(a);return this.order()},rf.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b=!1);for(c in a)this.each(Ba(c,a[c],b));return this}if(2>d)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(Ba(a,b,c))},rf.each=function(a){return Ca(this,function(b,c,d){a.call(b,b.__data__,c,d)})},rf.call=function(a){var b=Ne(arguments);return a.apply(b[0]=this,b),this},rf.empty=function(){return!this.node()},rf.node=function(){for(var a=0,b=this.length;b>a;a++)for(var c=this[a],d=0,e=c.length;e>d;d++){var f=c[d];if(f)return f}return null},rf.transition=function(){var a,b,c=uf||++wf,d=[],e=Object.create(xf);e.time=Date.now();for(var f=-1,g=this.length;g>++f;){d.push(a=[]);for(var h=this[f],i=-1,j=h.length;j>++i;)(b=h[i])&&Fa(b,i,c,e),a.push(b)}return Ea(d,c)};var sf=pa([[document]]);sf[0].parentNode=of,d3.select=function(a){return"string"==typeof a?sf.select(a):pa([[a]])},d3.selectAll=function(a){return"string"==typeof a?sf.selectAll(a):pa([Ne(a)])};var tf=[];d3.selection.enter=Da,d3.selection.enter.prototype=tf,tf.append=rf.append,tf.insert=rf.insert,tf.empty=rf.empty,tf.node=rf.node,tf.select=function(a){for(var b,c,d,e,f,g=[],h=-1,i=this.length;i>++h;){d=(e=this[h]).update,g.push(b=[]),b.parentNode=e.parentNode;for(var j=-1,k=e.length;k>++j;)(f=e[j])?(b.push(d[j]=c=a.call(e.parentNode,f.__data__,j)),c.__data__=f.__data__):b.push(null)}return pa(g)};var uf,vf=[],wf=0,xf={ease:D,delay:0,duration:250};vf.call=rf.call,vf.empty=rf.empty,vf.node=rf.node,d3.transition=function(a){return arguments.length?uf?a.transition():a:sf.transition()},d3.transition.prototype=vf,vf.select=function(a){var b,c,d,e=this.id,f=[];"function"!=typeof a&&(a=qa(a));for(var g=-1,h=this.length;h>++g;){f.push(b=[]);for(var i=this[g],j=-1,k=i.length;k>++j;)(d=i[j])&&(c=a.call(d,d.__data__,j))?("__data__"in d&&(c.__data__=d.__data__),Fa(c,j,e,d.__transition__[e]),b.push(c)):b.push(null)}return Ea(f,e)},vf.selectAll=function(a){var b,c,d,e,f,g=this.id,h=[];"function"!=typeof a&&(a=ra(a));for(var i=-1,j=this.length;j>++i;)for(var k=this[i],l=-1,m=k.length;m>++l;)if(d=k[l]){f=d.__transition__[g],c=a.call(d,d.__data__,l),h.push(b=[]);for(var n=-1,o=c.length;o>++n;)Fa(e=c[n],n,g,f),b.push(e)}return Ea(h,g)},vf.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=za(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]);for(var c=this[f],h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h)&&b.push(d)}return Ea(e,this.id,this.time).ease(this.ease())},vf.attr=function(a,b){function c(){this.removeAttribute(f)}function d(){this.removeAttributeNS(f.space,f.local)}if(2>arguments.length){for(b in a)this.attr(b,a[b]);return this}var e=S(a),f=d3.ns.qualify(a);return Ha(this,"attr."+a,b,function(a){function b(){var b,c=this.getAttribute(f);return c!==a&&(b=e(c,a),function(a){this.setAttribute(f,b(a))})}function g(){var b,c=this.getAttributeNS(f.space,f.local);return c!==a&&(b=e(c,a),function(a){this.setAttributeNS(f.space,f.local,b(a))})}return null==a?f.local?d:c:(a+="",f.local?g:b)})},vf.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=d3.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)},vf.style=function(a,b,c){function d(){this.style.removeProperty(a)}var e=arguments.length;if(3>e){if("string"!=typeof a){2>e&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}var f=S(a);return Ha(this,"style."+a,b,function(b){function e(){var d,e=getComputedStyle(this,null).getPropertyValue(a);return e!==b&&(d=f(e,b),function(b){this.style.setProperty(a,d(b),c)})}return null==b?d:(b+="",e)})},vf.styleTween=function(a,b,c){return 3>arguments.length&&(c=""),this.tween("style."+a,function(d,e){var f=b.call(this,d,e,getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,f(b),c)}})},vf.text=function(a){return Ha(this,"text",a,Ga)},vf.remove=function(){return this.each("end.transition",function(){var a;!this.__transition__&&(a=this.parentNode)&&a.removeChild(this)})},vf.ease=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].ease:("function"!=typeof a&&(a=d3.ease.apply(d3,arguments)),Ca(this,function(c){c.__transition__[b].ease=a}))},vf.delay=function(a){var b=this.id;return Ca(this,"function"==typeof a?function(c,d,e){c.__transition__[b].delay=0|a.call(c,c.__data__,d,e)}:(a|=0,function(c){c.__transition__[b].delay=a}))},vf.duration=function(a){var b=this.id;return Ca(this,"function"==typeof a?function(c,d,e){c.__transition__[b].duration=Math.max(1,0|a.call(c,c.__data__,d,e))}:(a=Math.max(1,0|a),function(c){c.__transition__[b].duration=a}))},vf.each=function(a,b){var c=this.id;if(2>arguments.length){var d=xf,e=uf;uf=c,Ca(this,function(b,d,e){xf=b.__transition__[c],a.call(b,b.__data__,d,e)}),xf=d,uf=e}else Ca(this,function(d){d.__transition__[c].event.on(a,b)});return this},vf.transition=function(){for(var a,b,c,d,e=this.id,f=++wf,g=[],h=0,i=this.length;i>h;h++){g.push(a=[]);for(var b=this[h],j=0,k=b.length;k>j;j++)(c=b[j])&&(d=Object.create(c.__transition__[e]),d.delay+=d.duration,Fa(c,j,f,d)),a.push(c)}return Ea(g,f)},vf.tween=function(a,b){var c=this.id;return 2>arguments.length?this.node().__transition__[c].tween.get(a):Ca(this,null==b?function(b){b.__transition__[c].tween.remove(a)}:function(d){d.__transition__[c].tween.set(a,b)})};var yf,zf,Af=0,Bf={},Cf=null;d3.timer=function(a,b,c){if(3>arguments.length){if(2>arguments.length)b=0;else if(!isFinite(b))return;c=Date.now()}var d=Bf[a.id];d&&d.callback===a?(d.then=c,d.delay=b):Bf[a.id=++Af]=Cf={callback:a,then:c,delay:b,next:Cf},yf||(zf=clearTimeout(zf),yf=1,Df(Ia))},d3.timer.flush=function(){for(var a,b=Date.now(),c=Cf;c;)a=b-c.then,c.delay||(c.flush=c.callback(a)),c=c.next;Ja()};var Df=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,17)};d3.mouse=function(a){return Ka(a,M())};var Ef=/WebKit/.test(navigator.userAgent)?-1:0;d3.touches=function(a,b){return 2>arguments.length&&(b=M().touches),b?Ne(b).map(function(b){var c=Ka(a,b);return c.identifier=b.identifier,c}):[]},d3.scale={},d3.scale.linear=function(){return Qa([0,1],[0,1],d3.interpolate,!1)},d3.scale.log=function(){return Ya(d3.scale.linear(),Za)};var Ff=d3.format(".0e");Za.pow=function(a){return Math.pow(10,a)},$a.pow=function(a){return-Math.pow(10,-a)},d3.scale.pow=function(){return _a(d3.scale.linear(),1)},d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)},d3.scale.ordinal=function(){return bb([],{t:"range",a:[[]]})},d3.scale.category10=function(){return d3.scale.ordinal().range(Gf)},d3.scale.category20=function(){return d3.scale.ordinal().range(Hf)},d3.scale.category20b=function(){return d3.scale.ordinal().range(If)},d3.scale.category20c=function(){return d3.scale.ordinal().range(Jf)};var Gf=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Hf=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],If=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],Jf=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];d3.scale.quantile=function(){return cb([],[])},d3.scale.quantize=function(){return db(0,1,[0,1])},d3.scale.threshold=function(){return eb([.5],[0,1])},d3.scale.identity=function(){return fb([0,1])},d3.svg={},d3.svg.arc=function(){function a(){var a=b.apply(this,arguments),f=c.apply(this,arguments),g=d.apply(this,arguments)+Kf,h=e.apply(this,arguments)+Kf,i=(g>h&&(i=g,g=h,h=i),h-g),j=Je>i?"0":"1",k=Math.cos(g),l=Math.sin(g),m=Math.cos(h),n=Math.sin(h);return i>=Lf?a?"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"Z":a?"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L"+a*m+","+a*n+"A"+a+","+a+" 0 "+j+",0 "+a*k+","+a*l+"Z":"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L0,0Z"}var b=gb,c=hb,d=ib,e=jb;return a.innerRadius=function(c){return arguments.length?(b=i(c),a):b},a.outerRadius=function(b){return arguments.length?(c=i(b),a):c},a.startAngle=function(b){return arguments.length?(d=i(b),a):d},a.endAngle=function(b){return arguments.length?(e=i(b),a):e},a.centroid=function(){var a=(b.apply(this,arguments)+c.apply(this,arguments))/2,f=(d.apply(this,arguments)+e.apply(this,arguments))/2+Kf;return[Math.cos(f)*a,Math.sin(f)*a]},a};var Kf=-Je/2,Lf=2*Je-1e-6;d3.svg.line=function(){return kb(g)};var Mf=d3.map({linear:nb,"linear-closed":ob,"step-before":pb,"step-after":qb,basis:wb,"basis-open":xb,"basis-closed":yb,bundle:zb,cardinal:tb,"cardinal-open":rb,"cardinal-closed":sb,monotone:Fb});Mf.forEach(function(a,b){b.key=a,b.closed=/-closed$/.test(a)});var Nf=[0,2/3,1/3,0],Of=[0,1/3,2/3,0],Pf=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var a=kb(Gb);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},pb.reverse=qb,qb.reverse=pb,d3.svg.area=function(){return Hb(g)},d3.svg.area.radial=function(){var a=Hb(Gb);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},d3.svg.chord=function(){function c(a,b){var c=d(this,h,a,b),i=d(this,j,a,b);return"M"+c.p0+f(c.r,c.p1,c.a1-c.a0)+(e(c,i)?g(c.r,c.p1,c.r,c.p0):g(c.r,c.p1,i.r,i.p0)+f(i.r,i.p1,i.a1-i.a0)+g(i.r,i.p1,c.r,c.p0))+"Z"}function d(a,b,c,d){var e=b.call(a,c,d),f=k.call(a,e,d),g=l.call(a,e,d)+Kf,h=m.call(a,e,d)+Kf;return{r:f,a0:g,a1:h,p0:[f*Math.cos(g),f*Math.sin(g)],p1:[f*Math.cos(h),f*Math.sin(h)]}}function e(a,b){return a.a0==b.a0&&a.a1==b.a1}function f(a,b,c){return"A"+a+","+a+" 0 "+ +(c>Je)+",1 "+b}function g(a,b,c,d){return"Q 0,0 "+d}var h=b,j=a,k=Ib,l=ib,m=jb;return c.radius=function(a){return arguments.length?(k=i(a),c):k},c.source=function(a){return arguments.length?(h=i(a),c):h},c.target=function(a){return arguments.length?(j=i(a),c):j},c.startAngle=function(a){return arguments.length?(l=i(a),c):l},c.endAngle=function(a){return arguments.length?(m=i(a),c):m},c},d3.svg.diagonal=function(){function c(a,b){var c=d.call(this,a,b),g=e.call(this,a,b),h=(c.y+g.y)/2,i=[c,{x:c.x,y:h},{x:g.x,y:h},g];return i=i.map(f),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var d=b,e=a,f=Jb;return c.source=function(a){return arguments.length?(d=i(a),c):d},c.target=function(a){return arguments.length?(e=i(a),c):e},c.projection=function(a){return arguments.length?(f=a,c):f},c},d3.svg.diagonal.radial=function(){var a=d3.svg.diagonal(),b=Jb,c=a.projection;return a.projection=function(a){return arguments.length?c(Kb(b=a)):b},a},d3.svg.symbol=function(){function a(a,d){return(Qf.get(b.call(this,a,d))||Nb)(c.call(this,a,d))}var b=Mb,c=Lb;return a.type=function(c){return arguments.length?(b=i(c),a):b},a.size=function(b){return arguments.length?(c=i(b),a):c},a};var Qf=d3.map({circle:Nb,cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*Sf)),c=b*Sf;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/Rf),c=b*Rf/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/Rf),c=b*Rf/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});d3.svg.symbolTypes=Qf.keys();var Rf=Math.sqrt(3),Sf=Math.tan(30*Le);d3.svg.axis=function(){function a(a){a.each(function(){var a,l=d3.select(this),m=null==j?c.ticks?c.ticks.apply(c,i):c.domain():j,n=null==b?c.tickFormat?c.tickFormat.apply(c,i):String:b,o=Qb(c,m,k),p=l.selectAll(".minor").data(o,String),q=p.enter().insert("line","g").attr("class","tick minor").style("opacity",1e-6),r=d3.transition(p.exit()).style("opacity",1e-6).remove(),s=d3.transition(p).style("opacity",1),t=l.selectAll("g").data(m,String),u=t.enter().insert("g","path").style("opacity",1e-6),v=d3.transition(t.exit()).style("opacity",1e-6).remove(),w=d3.transition(t).style("opacity",1),x=Na(c),y=l.selectAll(".domain").data([0]),z=d3.transition(y),A=c.copy(),B=this.__chart__||A;this.__chart__=A,y.enter().append("path").attr("class","domain"),u.append("line").attr("class","tick"),u.append("text");var C=u.select("line"),D=w.select("line"),E=t.select("text").text(n),F=u.select("text"),G=w.select("text");switch(d){case"bottom":a=Ob,q.attr("y2",f),s.attr("x2",0).attr("y2",f),C.attr("y2",e),F.attr("y",Math.max(e,0)+h),D.attr("x2",0).attr("y2",e),G.attr("x",0).attr("y",Math.max(e,0)+h),E.attr("dy",".71em").style("text-anchor","middle"),z.attr("d","M"+x[0]+","+g+"V0H"+x[1]+"V"+g);break;case"top":a=Ob,q.attr("y2",-f),s.attr("x2",0).attr("y2",-f),C.attr("y2",-e),F.attr("y",-(Math.max(e,0)+h)),D.attr("x2",0).attr("y2",-e),G.attr("x",0).attr("y",-(Math.max(e,0)+h)),E.attr("dy","0em").style("text-anchor","middle"),z.attr("d","M"+x[0]+","+-g+"V0H"+x[1]+"V"+-g);break;case"left":a=Pb,q.attr("x2",-f),s.attr("x2",-f).attr("y2",0),C.attr("x2",-e),F.attr("x",-(Math.max(e,0)+h)),D.attr("x2",-e).attr("y2",0),G.attr("x",-(Math.max(e,0)+h)).attr("y",0),E.attr("dy",".32em").style("text-anchor","end"),z.attr("d","M"+-g+","+x[0]+"H0V"+x[1]+"H"+-g);break;case"right":a=Pb,q.attr("x2",f),s.attr("x2",f).attr("y2",0),C.attr("x2",e),F.attr("x",Math.max(e,0)+h),D.attr("x2",e).attr("y2",0),G.attr("x",Math.max(e,0)+h).attr("y",0),E.attr("dy",".32em").style("text-anchor","start"),z.attr("d","M"+g+","+x[0]+"H0V"+x[1]+"H"+g)}if(c.ticks)u.call(a,B),w.call(a,A),v.call(a,A),q.call(a,B),s.call(a,A),r.call(a,A);else{var H=A.rangeBand()/2,I=function(a){return A(a)+H};u.call(a,I),w.call(a,I)}})}var b,c=d3.scale.linear(),d="bottom",e=6,f=6,g=6,h=3,i=[10],j=null,k=0;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b,a):d},a.ticks=function(){return arguments.length?(i=arguments,a):i},a.tickValues=function(b){return arguments.length?(j=b,a):j},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b,c){if(!arguments.length)return e;var d=arguments.length-1;return e=+b,f=d>1?+c:e,g=d>0?+arguments[d]:e,a},a.tickPadding=function(b){return arguments.length?(h=+b,a):h},a.tickSubdivide=function(b){return arguments.length?(k=+b,a):k},a},d3.svg.brush=function(){function a(f){f.each(function(){var f,g=d3.select(this),k=g.selectAll(".background").data([0]),l=g.selectAll(".extent").data([0]),m=g.selectAll(".resize").data(j,String);g.style("pointer-events","all").on("mousedown.brush",e).on("touchstart.brush",e),k.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),l.enter().append("rect").attr("class","extent").style("cursor","move"),m.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Tf[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),m.style("display",a.empty()?"none":null),m.exit().remove(),h&&(f=Na(h),k.attr("x",f[0]).attr("width",f[1]-f[0]),c(g)),i&&(f=Na(i),k.attr("y",f[0]).attr("height",f[1]-f[0]),d(g)),b(g)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+k[+/e$/.test(a)][0]+","+k[+/^s/.test(a)][1]+")"})}function c(a){a.select(".extent").attr("x",k[0][0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",k[1][0]-k[0][0])}function d(a){a.select(".extent").attr("y",k[0][1]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",k[1][1]-k[0][1])}function e(){function e(){var a=d3.event.changedTouches;return a?d3.touches(r,a)[0]:d3.mouse(r)}function j(){32==d3.event.keyCode&&(y||(p=null,z[0]-=k[1][0],z[1]-=k[1][1],y=2),L())}function l(){32==d3.event.keyCode&&2==y&&(z[0]+=k[1][0],z[1]+=k[1][1],y=0,L())}function m(){var a=e(),f=!1;q&&(a[0]+=q[0],a[1]+=q[1]),y||(d3.event.altKey?(p||(p=[(k[0][0]+k[1][0])/2,(k[0][1]+k[1][1])/2]),z[0]=k[+(a[0]<p[0])][0],z[1]=k[+(a[1]<p[1])][1]):p=null),w&&n(a,h,0)&&(c(u),f=!0),x&&n(a,i,1)&&(d(u),f=!0),f&&(b(u),t({type:"brush",mode:y?"move":"resize"}))}function n(a,b,c){var d,e,g=Na(b),h=g[0],i=g[1],j=z[c],l=k[1][c]-k[0][c];return y&&(h-=j,i-=l+j),d=Math.max(h,Math.min(i,a[c])),y?e=(d+=j)+l:(p&&(j=Math.max(h,Math.min(i,2*p[c]-d))),d>j?(e=d,d=j):e=j),k[0][c]!==d||k[1][c]!==e?(f=null,k[0][c]=d,k[1][c]=e,!0):void 0}function o(){m(),u.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null),d3.select("body").style("cursor",null),A.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),t({type:"brushend"}),L()}
var p,q,r=this,s=d3.select(d3.event.target),t=g.of(r,arguments),u=d3.select(r),v=s.datum(),w=!/^(n|s)$/.test(v)&&h,x=!/^(e|w)$/.test(v)&&i,y=s.classed("extent"),z=e(),A=d3.select(window).on("mousemove.brush",m).on("mouseup.brush",o).on("touchmove.brush",m).on("touchend.brush",o).on("keydown.brush",j).on("keyup.brush",l);if(y)z[0]=k[0][0]-z[0],z[1]=k[0][1]-z[1];else if(v){var B=+/w$/.test(v),C=+/^n/.test(v);q=[k[1-B][0]-z[0],k[1-C][1]-z[1]],z[0]=k[B][0],z[1]=k[C][1]}else d3.event.altKey&&(p=z.slice());u.style("pointer-events","none").selectAll(".resize").style("display",null),d3.select("body").style("cursor",s.style("cursor")),t({type:"brushstart"}),m(),L()}var f,g=N(a,"brushstart","brush","brushend"),h=null,i=null,j=Uf[0],k=[[0,0],[0,0]];return a.x=function(b){return arguments.length?(h=b,j=Uf[!h<<1|!i],a):h},a.y=function(b){return arguments.length?(i=b,j=Uf[!h<<1|!i],a):i},a.extent=function(b){var c,d,e,g,j;return arguments.length?(f=[[0,0],[0,0]],h&&(c=b[0],d=b[1],i&&(c=c[0],d=d[0]),f[0][0]=c,f[1][0]=d,h.invert&&(c=h(c),d=h(d)),c>d&&(j=c,c=d,d=j),k[0][0]=0|c,k[1][0]=0|d),i&&(e=b[0],g=b[1],h&&(e=e[1],g=g[1]),f[0][1]=e,f[1][1]=g,i.invert&&(e=i(e),g=i(g)),e>g&&(j=e,e=g,g=j),k[0][1]=0|e,k[1][1]=0|g),a):(b=f||k,h&&(c=b[0][0],d=b[1][0],f||(c=k[0][0],d=k[1][0],h.invert&&(c=h.invert(c),d=h.invert(d)),c>d&&(j=c,c=d,d=j))),i&&(e=b[0][1],g=b[1][1],f||(e=k[0][1],g=k[1][1],i.invert&&(e=i.invert(e),g=i.invert(g)),e>g&&(j=e,e=g,g=j))),h&&i?[[c,e],[d,g]]:h?[c,d]:i&&[e,g])},a.clear=function(){return f=null,k[0][0]=k[0][1]=k[1][0]=k[1][1]=0,a},a.empty=function(){return h&&k[0][0]===k[1][0]||i&&k[0][1]===k[1][1]},d3.rebind(a,g,"on")};var Tf={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Uf=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];d3.behavior={},d3.behavior.drag=function(){function a(){this.on("mousedown.drag",b).on("touchstart.drag",b)}function b(){function a(){var a=h.parentNode;return null!=k?d3.touches(a).filter(function(a){return a.identifier===k})[0]:d3.mouse(a)}function b(){if(!h.parentNode)return e();var b=a(),c=b[0]-l[0],d=b[1]-l[1];m|=c|d,l=b,L(),i({type:"drag",x:b[0]+g[0],y:b[1]+g[1],dx:c,dy:d})}function e(){i({type:"dragend"}),m&&(L(),d3.event.target===j&&n.on("click.drag",f,!0)),n.on(null!=k?"touchmove.drag-"+k:"mousemove.drag",null).on(null!=k?"touchend.drag-"+k:"mouseup.drag",null)}function f(){L(),n.on("click.drag",null)}var g,h=this,i=c.of(h,arguments),j=d3.event.target,k=d3.event.touches?d3.event.changedTouches[0].identifier:null,l=a(),m=0,n=d3.select(window).on(null!=k?"touchmove.drag-"+k:"mousemove.drag",b).on(null!=k?"touchend.drag-"+k:"mouseup.drag",e,!0);d?(g=d.apply(h,arguments),g=[g.x-l[0],g.y-l[1]]):g=[0,0],null==k&&L(),i({type:"dragstart"})}var c=N(a,"drag","dragstart","dragend"),d=null;return a.origin=function(b){return arguments.length?(d=b,a):d},d3.rebind(a,c,"on")},d3.behavior.zoom=function(){function a(){this.on("mousedown.zoom",h).on("mousewheel.zoom",i).on("mousemove.zoom",j).on("DOMMouseScroll.zoom",i).on("dblclick.zoom",k).on("touchstart.zoom",l).on("touchmove.zoom",m).on("touchend.zoom",l)}function b(a){return[(a[0]-u[0])/v,(a[1]-u[1])/v]}function c(a){return[a[0]*v+u[0],a[1]*v+u[1]]}function d(a){v=Math.max(w[0],Math.min(w[1],a))}function e(a,b){b=c(b),u[0]+=a[0]-b[0],u[1]+=a[1]-b[1]}function f(){q&&q.domain(p.range().map(function(a){return(a-u[0])/v}).map(p.invert)),s&&s.domain(r.range().map(function(a){return(a-u[1])/v}).map(r.invert))}function g(a){f(),d3.event.preventDefault(),a({type:"zoom",scale:v,translate:u})}function h(){function a(){j=1,e(d3.mouse(f),l),g(h)}function c(){j&&L(),k.on("mousemove.zoom",null).on("mouseup.zoom",null),j&&d3.event.target===i&&k.on("click.zoom",d,!0)}function d(){L(),k.on("click.zoom",null)}var f=this,h=x.of(f,arguments),i=d3.event.target,j=0,k=d3.select(window).on("mousemove.zoom",a).on("mouseup.zoom",c),l=b(d3.mouse(f));window.focus(),L()}function i(){n||(n=b(d3.mouse(this))),d(Math.pow(2,.002*Rb())*v),e(d3.mouse(this),n),g(x.of(this,arguments))}function j(){n=null}function k(){var a=d3.mouse(this),c=b(a),f=Math.log(v)/Math.LN2;d(Math.pow(2,d3.event.shiftKey?Math.ceil(f)-1:Math.floor(f)+1)),e(a,c),g(x.of(this,arguments))}function l(){var a=d3.touches(this),c=Date.now();if(o=v,n={},a.forEach(function(a){n[a.identifier]=b(a)}),L(),1===a.length){if(500>c-t){var f=a[0],h=b(a[0]);d(2*v),e(f,h),g(x.of(this,arguments))}t=c}}function m(){var a=d3.touches(this),b=a[0],c=n[b.identifier];if(f=a[1]){var f,h=n[f.identifier];b=[(b[0]+f[0])/2,(b[1]+f[1])/2],c=[(c[0]+h[0])/2,(c[1]+h[1])/2],d(d3.event.scale*o)}e(b,c),t=null,g(x.of(this,arguments))}var n,o,p,q,r,s,t,u=[0,0],v=1,w=Wf,x=N(a,"zoom");return a.translate=function(b){return arguments.length?(u=b.map(Number),f(),a):u},a.scale=function(b){return arguments.length?(v=+b,f(),a):v},a.scaleExtent=function(b){return arguments.length?(w=null==b?Wf:b.map(Number),a):w},a.x=function(b){return arguments.length?(q=b,p=b.copy(),u=[0,0],v=1,a):q},a.y=function(b){return arguments.length?(s=b,r=b.copy(),u=[0,0],v=1,a):s},d3.rebind(a,x,"on")};var Vf,Wf=[0,1/0];d3.layout={},d3.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;d>++c;)b.push(Sb(a[c]));return b}},d3.layout.chord=function(){function a(){var a,j,l,m,n,o={},p=[],q=d3.range(f),r=[];for(c=[],d=[],a=0,m=-1;f>++m;){for(j=0,n=-1;f>++n;)j+=e[m][n];p.push(j),r.push(d3.range(f)),a+=j}for(g&&q.sort(function(a,b){return g(p[a],p[b])}),h&&r.forEach(function(a,b){a.sort(function(a,c){return h(e[b][a],e[b][c])})}),a=(2*Je-k*f)/a,j=0,m=-1;f>++m;){for(l=j,n=-1;f>++n;){var s=q[m],t=r[s][n],u=e[s][t],v=j,w=j+=u*a;o[s+"-"+t]={index:s,subindex:t,startAngle:v,endAngle:w,value:u}}d[s]={index:s,startAngle:l,endAngle:j,value:(j-l)/a},j+=k}for(m=-1;f>++m;)for(n=m-1;f>++n;){var x=o[m+"-"+n],y=o[n+"-"+m];(x.value||y.value)&&c.push(x.value<y.value?{source:y,target:x}:{source:x,target:y})}i&&b()}function b(){c.sort(function(a,b){return i((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,g,h,i,j={},k=0;return j.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,j):e},j.padding=function(a){return arguments.length?(k=a,c=d=null,j):k},j.sortGroups=function(a){return arguments.length?(g=a,c=d=null,j):g},j.sortSubgroups=function(a){return arguments.length?(h=a,c=null,j):h},j.sortChords=function(a){return arguments.length?(i=a,c&&b(),j):i},j.chords=function(){return c||a(),c},j.groups=function(){return d||a(),d},j},d3.layout.force=function(){function a(a){return function(b,c,d,e){if(b.point!==a){var f=b.cx-a.x,g=b.cy-a.y,h=1/Math.sqrt(f*f+g*g);if(r>(e-c)*h){var i=b.charge*h*h;return a.px-=f*i,a.py-=g*i,!0}if(b.point&&isFinite(h)){var i=b.pointCharge*h*h;a.px-=f*i,a.py-=g*i}}return!b.charge}}function b(a){a.px=d3.event.x,a.py=d3.event.y,j.resume()}var c,d,e,f,h,j={},k=d3.dispatch("start","tick","end"),l=[1,1],m=.9,n=$b,o=_b,p=-30,q=.1,r=.8,s=[],t=[];return j.tick=function(){if(.005>(d*=.99))return k.end({type:"end",alpha:d=0}),!0;var b,c,g,i,j,n,o,r,u,v=s.length,w=t.length;for(c=0;w>c;++c)g=t[c],i=g.source,j=g.target,r=j.x-i.x,u=j.y-i.y,(n=r*r+u*u)&&(n=d*f[c]*((n=Math.sqrt(n))-e[c])/n,r*=n,u*=n,j.x-=r*(o=i.weight/(j.weight+i.weight)),j.y-=u*o,i.x+=r*(o=1-o),i.y+=u*o);if((o=d*q)&&(r=l[0]/2,u=l[1]/2,c=-1,o))for(;v>++c;)g=s[c],g.x+=(r-g.x)*o,g.y+=(u-g.y)*o;if(p)for(Zb(b=d3.geom.quadtree(s),d,h),c=-1;v>++c;)(g=s[c]).fixed||b.visit(a(g));for(c=-1;v>++c;)g=s[c],g.fixed?(g.x=g.px,g.y=g.py):(g.x-=(g.px-(g.px=g.x))*m,g.y-=(g.py-(g.py=g.y))*m);k.tick({type:"tick",alpha:d})},j.nodes=function(a){return arguments.length?(s=a,j):s},j.links=function(a){return arguments.length?(t=a,j):t},j.size=function(a){return arguments.length?(l=a,j):l},j.linkDistance=function(a){return arguments.length?(n=i(a),j):n},j.distance=j.linkDistance,j.linkStrength=function(a){return arguments.length?(o=i(a),j):o},j.friction=function(a){return arguments.length?(m=a,j):m},j.charge=function(a){return arguments.length?(p="function"==typeof a?a:+a,j):p},j.gravity=function(a){return arguments.length?(q=a,j):q},j.theta=function(a){return arguments.length?(r=a,j):r},j.alpha=function(a){return arguments.length?(d?d=a>0?a:0:a>0&&(k.start({type:"start",alpha:d=a}),d3.timer(j.tick)),j):d},j.start=function(){function a(a,d){for(var e,f=b(c),g=-1,h=f.length;h>++g;)if(!isNaN(e=f[g][a]))return e;return Math.random()*d}function b(){if(!g){for(g=[],d=0;k>d;++d)g[d]=[];for(d=0;m>d;++d){var a=t[d];g[a.source.index].push(a.target),g[a.target.index].push(a.source)}}return g[c]}var c,d,g,i,k=s.length,m=t.length,q=l[0],r=l[1];for(c=0;k>c;++c)(i=s[c]).index=c,i.weight=0;for(e=[],f=[],c=0;m>c;++c)i=t[c],"number"==typeof i.source&&(i.source=s[i.source]),"number"==typeof i.target&&(i.target=s[i.target]),e[c]=n.call(this,i,c),f[c]=o.call(this,i,c),++i.source.weight,++i.target.weight;for(c=0;k>c;++c)i=s[c],isNaN(i.x)&&(i.x=a("x",q)),isNaN(i.y)&&(i.y=a("y",r)),isNaN(i.px)&&(i.px=i.x),isNaN(i.py)&&(i.py=i.y);if(h=[],"function"==typeof p)for(c=0;k>c;++c)h[c]=+p.call(this,s[c],c);else for(c=0;k>c;++c)h[c]=p;return j.resume()},j.resume=function(){return j.alpha(.1)},j.stop=function(){return j.alpha(0)},j.drag=function(){c||(c=d3.behavior.drag().origin(g).on("dragstart",Vb).on("drag",b).on("dragend",Wb)),this.on("mouseover.force",Xb).on("mouseout.force",Yb).call(c)},d3.rebind(j,k,"on")},d3.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(g=f.length)){var g,h,i,j=-1;for(d=b.value?d/b.value:0;g>++j;)a(h=f[j],c,i=h.value*d,e),c+=i}}function b(a){var c=a.children,d=0;if(c&&(e=c.length))for(var e,f=-1;e>++f;)d=Math.max(d,b(c[f]));return 1+d}function c(c,f){var g=d.call(this,c,f);return a(g[0],0,e[0],e[1]/b(g[0])),g}var d=d3.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},lc(c,d)},d3.layout.pie=function(){function a(f){var g=f.map(function(c,d){return+b.call(a,c,d)}),h=+("function"==typeof d?d.apply(this,arguments):d),i=(("function"==typeof e?e.apply(this,arguments):e)-d)/d3.sum(g),j=d3.range(f.length);null!=c&&j.sort(c===Xf?function(a,b){return g[b]-g[a]}:function(a,b){return c(f[a],f[b])});var k=[];return j.forEach(function(a){var b;k[a]={data:f[a],value:b=g[a],startAngle:h,endAngle:h+=b*i}}),k}var b=Number,c=Xf,d=0,e=2*Je;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a};var Xf={};d3.layout.stack=function(){function a(g,i){var j=g.map(function(c,d){return b.call(a,c,d)}),k=j.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),h.call(a,b,c)]})}),l=c.call(a,k,i);j=d3.permute(j,l),k=d3.permute(k,l);var m,n,o,p=d.call(a,k,i),q=j.length,r=j[0].length;for(n=0;r>n;++n)for(e.call(a,j[0][n],o=p[n],k[0][n][1]),m=1;q>m;++m)e.call(a,j[m][n],o+=k[m-1][n][1],k[m][n][1]);return g}var b=g,c=dc,d=ec,e=cc,f=ac,h=bc;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:Yf.get(b)||dc,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:Zf.get(b)||ec,a):d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(h=b,a):h},a.out=function(b){return arguments.length?(e=b,a):e},a};var Yf=d3.map({"inside-out":function(a){var b,c,d=a.length,e=a.map(fc),f=a.map(gc),g=d3.range(d).sort(function(a,b){return e[a]-e[b]}),h=0,i=0,j=[],k=[];for(b=0;d>b;++b)c=g[b],i>h?(h+=f[c],j.push(c)):(i+=f[c],k.push(c));return k.reverse().concat(j)},reverse:function(a){return d3.range(a.length).reverse()},default:dc}),Zf=d3.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,g=[],h=0,i=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];d>h&&(h=d),g.push(d)}for(c=0;f>c;++c)i[c]=(h-g[c])/2;return i},wiggle:function(a){var b,c,d,e,f,g,h,i,j,k=a.length,l=a[0],m=l.length,n=[];for(n[0]=i=j=0,c=1;m>c;++c){for(b=0,e=0;k>b;++b)e+=a[b][c][1];for(b=0,f=0,h=l[c][0]-l[c-1][0];k>b;++b){for(d=0,g=(a[b][c][1]-a[b][c-1][1])/(2*h);b>d;++d)g+=(a[d][c][1]-a[d][c-1][1])/h;f+=g*a[b][c][1]}n[c]=i-=e?f/e*h:0,j>i&&(j=i)}for(c=0;m>c;++c)n[c]-=j;return n},expand:function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];if(d)for(b=0;e>b;b++)a[b][c][1]/=d;else for(b=0;e>b;b++)a[b][c][1]=g}for(c=0;f>c;++c)h[c]=0;return h},zero:ec});d3.layout.histogram=function(){function a(a,f){for(var g,h,i=[],j=a.map(c,this),k=d.call(this,j,f),l=e.call(this,k,j,f),f=-1,m=j.length,n=l.length-1,o=b?1:1/m;n>++f;)g=i[f]=[],g.dx=l[f+1]-(g.x=l[f]),g.y=0;if(n>0)for(f=-1;m>++f;)(h=j[f])>=k[0]&&k[1]>=h&&(g=i[d3.bisect(l,h,1,n)-1],g.y+=o,g.push(a[f]));return i}var b=!0,c=Number,d=kc,e=ic;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=i(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return jc(a,b)}:i(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a},d3.layout.hierarchy=function(){function a(b,g,h){var i=e.call(c,b,g);if(b.depth=g,h.push(b),i&&(j=i.length)){for(var j,k,l=-1,m=b.children=[],n=0,o=g+1;j>++l;)k=a(i[l],o,h),k.parent=b,m.push(k),n+=k.value;d&&m.sort(d),f&&(b.value=n)}else f&&(b.value=+f.call(c,b,g)||0);return b}function b(a,d){var e=a.children,g=0;if(e&&(h=e.length))for(var h,i=-1,j=d+1;h>++i;)g+=b(e[i],j);else f&&(g=+f.call(c,a,d)||0);return f&&(a.value=g),g}function c(b){var c=[];return a(b,0,c),c}var d=oc,e=mc,f=nc;return c.sort=function(a){return arguments.length?(d=a,c):d},c.children=function(a){return arguments.length?(e=a,c):e},c.value=function(a){return arguments.length?(f=a,c):f},c.revalue=function(a){return b(a,0),a},c},d3.layout.pack=function(){function a(a,e){var f=b.call(this,a,e),g=f[0];g.x=0,g.y=0,Kc(g,function(a){a.r=Math.sqrt(a.value)}),Kc(g,uc);var h=d[0],i=d[1],j=Math.max(2*g.r/h,2*g.r/i);if(c>0){var k=c*j/2;Kc(g,function(a){a.r+=k}),Kc(g,uc),Kc(g,function(a){a.r-=k}),j=Math.max(2*g.r/h,2*g.r/i)}return xc(g,h/2,i/2,1/j),f}var b=d3.layout.hierarchy().sort(qc),c=0,d=[1,1];return a.size=function(b){return arguments.length?(d=b,a):d},a.padding=function(b){return arguments.length?(c=+b,a):c},lc(a,b)},d3.layout.cluster=function(){function a(a,e){var f,g=b.call(this,a,e),h=g[0],i=0;Kc(h,function(a){var b=a.children;b&&b.length?(a.x=Ac(b),a.y=zc(b)):(a.x=f?i+=c(a,f):0,a.y=0,f=a)});var j=Bc(h),k=Cc(h),l=j.x-c(j,k)/2,m=k.x+c(k,j)/2;return Kc(h,function(a){a.x=(a.x-l)/(m-l)*d[0],a.y=(1-(h.y?a.y/h.y:1))*d[1]}),g}var b=d3.layout.hierarchy().sort(null).value(null),c=Dc,d=[1,1];return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(d=b,a):d},lc(a,b)},d3.layout.tree=function(){function a(a,e){function f(a,b){var d=a.children,e=a._tree;if(d&&(g=d.length)){for(var g,i,j,k=d[0],l=k,m=-1;g>++m;)j=d[m],f(j,i),l=h(j,i,l),i=j;Lc(a);var n=.5*(k._tree.prelim+j._tree.prelim);b?(e.prelim=b._tree.prelim+c(a,b),e.mod=e.prelim-n):e.prelim=n}else b&&(e.prelim=b._tree.prelim+c(a,b))}function g(a,b){a.x=a._tree.prelim+b;var c=a.children;if(c&&(d=c.length)){var d,e=-1;for(b+=a._tree.mod;d>++e;)g(c[e],b)}}function h(a,b,d){if(b){for(var e,f=a,g=a,h=b,i=a.parent.children[0],j=f._tree.mod,k=g._tree.mod,l=h._tree.mod,m=i._tree.mod;h=Fc(h),f=Ec(f),h&&f;)i=Ec(i),g=Fc(g),g._tree.ancestor=a,e=h._tree.prelim+l-f._tree.prelim-j+c(h,f),e>0&&(Mc(Nc(h,a,d),a,e),j+=e,k+=e),l+=h._tree.mod,j+=f._tree.mod,m+=i._tree.mod,k+=g._tree.mod;h&&!Fc(g)&&(g._tree.thread=h,g._tree.mod+=l-k),f&&!Ec(i)&&(i._tree.thread=f,i._tree.mod+=j-m,d=a)}return d}var i=b.call(this,a,e),j=i[0];Kc(j,function(a,b){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:b?b._tree.number+1:0}}),f(j),g(j,-j._tree.prelim);var k=Gc(j,Ic),l=Gc(j,Hc),m=Gc(j,Jc),n=k.x-c(k,l)/2,o=l.x+c(l,k)/2,p=m.depth||1;return Kc(j,function(a){a.x=(a.x-n)/(o-n)*d[0],a.y=a.depth/p*d[1],delete a._tree}),i}var b=d3.layout.hierarchy().sort(null).value(null),c=Dc,d=[1,1];return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(d=b,a):d},lc(a,b)},d3.layout.treemap=function(){function a(a,b){for(var c,d,e=-1,f=a.length;f>++e;)d=(c=a[e]).value*(0>b?0:b),c.area=isNaN(d)||0>=d?0:d}function b(c){var f=c.children;if(f&&f.length){var g,h,i,j=l(c),k=[],m=f.slice(),o=1/0,p="slice"===n?j.dx:"dice"===n||"slice-dice"===n&&1&c.depth?j.dy:Math.min(j.dx,j.dy);for(a(m,j.dx*j.dy/c.value),k.area=0;(i=m.length)>0;)k.push(g=m[i-1]),k.area+=g.area,"squarify"!==n||o>=(h=d(k,p))?(m.pop(),o=h):(k.area-=k.pop().area,e(k,p,j,!1),p=Math.min(j.dx,j.dy),k.length=k.area=0,o=1/0);k.length&&(e(k,p,j,!0),k.length=k.area=0),f.forEach(b)}}function c(b){var d=b.children;if(d&&d.length){var f,g=l(b),h=d.slice(),i=[];for(a(h,g.dx*g.dy/b.value),i.area=0;f=h.pop();)i.push(f),i.area+=f.area,null!=f.z&&(e(i,f.z?g.dx:g.dy,g,!h.length),i.length=i.area=0);d.forEach(c)}}function d(a,b){for(var c,d=a.area,e=0,f=1/0,g=-1,h=a.length;h>++g;)(c=a[g].area)&&(f>c&&(f=c),c>e&&(e=c));return d*=d,b*=b,d?Math.max(b*e*o/d,d/(b*f*o)):1/0}function e(a,b,c,d){var e,f=-1,g=a.length,h=c.x,j=c.y,k=b?i(a.area/b):0;if(b==c.dx){for((d||k>c.dy)&&(k=c.dy);g>++f;)e=a[f],e.x=h,e.y=j,e.dy=k,h+=e.dx=Math.min(c.x+c.dx-h,k?i(e.area/k):0);e.z=!0,e.dx+=c.x+c.dx-h,c.y+=k,c.dy-=k}else{for((d||k>c.dx)&&(k=c.dx);g>++f;)e=a[f],e.x=h,e.y=j,e.dx=k,j+=e.dy=Math.min(c.y+c.dy-j,k?i(e.area/k):0);e.z=!1,e.dy+=c.y+c.dy-j,c.x+=k,c.dx-=k}}function f(d){var e=g||h(d),f=e[0];return f.x=0,f.y=0,f.dx=j[0],f.dy=j[1],g&&h.revalue(f),a([f],f.dx*f.dy/f.value),(g?c:b)(f),m&&(g=e),e}var g,h=d3.layout.hierarchy(),i=Math.round,j=[1,1],k=null,l=Oc,m=!1,n="squarify",o=.5*(1+Math.sqrt(5));return f.size=function(a){return arguments.length?(j=a,f):j},f.padding=function(a){function b(b){var c=a.call(f,b,b.depth);return null==c?Oc(b):Pc(b,"number"==typeof c?[c,c,c,c]:c)}function c(b){return Pc(b,a)}if(!arguments.length)return k;var d;return l=null==(k=a)?Oc:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,f},f.round=function(a){return arguments.length?(i=a?Math.round:Number,f):i!=Number},f.sticky=function(a){return arguments.length?(m=a,g=null,f):m},f.ratio=function(a){return arguments.length?(o=a,f):o},f.mode=function(a){return arguments.length?(n=a+"",f):n},lc(f,h)},d3.csv=Qc(",","text/csv"),d3.tsv=Qc("\t","text/tab-separated-values"),d3.geo={},d3.geo.stream=function(a,b){$f.hasOwnProperty(a.type)?$f[a.type](a,b):Rc(a,b)};var $f={Feature:function(a,b){Rc(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;e>++d;)Rc(c[d].geometry,b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;e>++d;)Rc(c[d],b)}},_f={Sphere:function(a,b){b.sphere()},Point:function(a,b){var c=a.coordinates;b.point(c[0],c[1])},MultiPoint:function(a,b){for(var c,d=a.coordinates,e=-1,f=d.length;f>++e;)c=d[e],b.point(c[0],c[1])},LineString:function(a,b){Sc(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;e>++d;)Sc(c[d],b,0)},Polygon:function(a,b){Tc(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;e>++d;)Tc(c[d],b)}};d3.geo.albersUsa=function(){function a(a){return b(a)(a)}function b(a){var b=a[0],g=a[1];return g>50?d:-140>b?e:21>g?f:c}var c=d3.geo.albers(),d=d3.geo.albers().rotate([160,0]).center([0,60]).parallels([55,65]),e=d3.geo.albers().rotate([160,0]).center([0,20]).parallels([8,18]),f=d3.geo.albers().rotate([60,0]).center([0,10]).parallels([8,18]);return a.scale=function(b){return arguments.length?(c.scale(b),d.scale(.6*b),e.scale(b),f.scale(1.5*b),a.translate(c.translate())):c.scale()},a.translate=function(b){if(!arguments.length)return c.translate();var g=c.scale(),h=b[0],i=b[1];return c.translate(b),d.translate([h-.4*g,i+.17*g]),e.translate([h-.19*g,i+.2*g]),f.translate([h+.58*g,i+.43*g]),a},a.scale(c.scale())},(d3.geo.albers=function(){var a=29.5*Le,b=45.5*Le,c=Ld(bd),d=c(a,b);return d.parallels=function(d){return arguments.length?c(a=d[0]*Le,b=d[1]*Le):[a*Me,b*Me]},d.rotate([98,0]).center([0,38]).scale(1e3)}).raw=bd;var ag=Rd(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(d3.geo.azimuthalEqualArea=function(){return Kd(ag)}).raw=ag;var bg=Rd(function(a){var b=Math.acos(a);return b&&b/Math.sin(b)},g);(d3.geo.azimuthalEquidistant=function(){return Kd(bg)}).raw=bg,d3.geo.bounds=cd(),d3.geo.centroid=function(a){cg=dg=eg=fg=gg=0,d3.geo.stream(a,hg);var b;return dg&&Math.abs(b=Math.sqrt(eg*eg+fg*fg+gg*gg))>Ke?[Math.atan2(fg,eg)*Me,Math.asin(Math.max(-1,Math.min(1,gg/b)))*Me]:void 0};var cg,dg,eg,fg,gg,hg={sphere:La,point:dd,lineStart:fd,lineEnd:gd,polygonStart:function(){cg=2,hg.lineStart=ed},polygonEnd:function(){hg.lineStart=fd}};d3.geo.circle=function(){function a(){var a="function"==typeof d?d.apply(this,arguments):d,b=Nd(a[0]*Le,a[1]*Le,0),e=[];return c(null,null,1,{point:function(a,c){e.push(a=b(a,c)),a[0]*=Me,a[1]*=Me}}),{type:"Polygon",coordinates:[e]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=function(d){return arguments.length?(c=hd((b=+d)*Le,e*Le),a):b},a.precision=function(d){return arguments.length?(c=hd(b*Le,(e=+d)*Le),a):e},a.angle(90)};var ig=jd(h,qd,sd);(d3.geo.equirectangular=function(){return Kd(vd).scale(250/Je)}).raw=vd.invert=vd;var jg=Rd(function(a){return 1/a},Math.atan);(d3.geo.gnomonic=function(){return Kd(jg)}).raw=jg,d3.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return d3.range(Math.ceil(d/i)*i,c,i).map(g).concat(d3.range(Math.ceil(f/j)*j,e,j).map(h))}var c,d,e,f,g,h,i=22.5,j=i,k=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[g(d).concat(h(e).slice(1),g(c).reverse().slice(1),h(f).reverse().slice(1))]}},a.extent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],f=+b[0][1],e=+b[1][1],d>c&&(b=d,d=c,c=b),f>e&&(b=f,f=e,e=b),a.precision(k)):[[d,f],[c,e]]},a.step=function(b){return arguments.length?(i=+b[0],j=+b[1],a):[i,j]},a.precision=function(b){return arguments.length?(k=+b,g=wd(f,e,k),h=xd(d,c,k),a):k},a.extent([[-180+Ke,-90+Ke],[180-Ke,90-Ke]])},d3.geo.interpolate=function(a,b){return yd(a[0]*Le,a[1]*Le,b[0]*Le,b[1]*Le)},d3.geo.greatArc=function(){function c(){for(var a=d||g.apply(this,arguments),b=e||h.apply(this,arguments),c=f||d3.geo.interpolate(a,b),e=0,j=i/c.distance,k=[a];1>(e+=j);)k.push(c(e));return k.push(b),{type:"LineString",coordinates:k}}var d,e,f,g=b,h=a,i=6*Le;return c.distance=function(){return(f||d3.geo.interpolate(d||g.apply(this,arguments),e||h.apply(this,arguments))).distance},c.source=function(a){return arguments.length?(g=a,d="function"==typeof a?null:a,f=d&&e?d3.geo.interpolate(d,e):null,c):g},c.target=function(a){return arguments.length?(h=a,e="function"==typeof a?null:a,f=d&&e?d3.geo.interpolate(d,e):null,c):h},c.precision=function(a){return arguments.length?(i=a*Le,c):i/Le},c},zd.invert=function(a,b){return[2*Je*a,2*Math.atan(Math.exp(2*Je*b))-Je/2]},(d3.geo.mercator=function(){return Kd(zd).scale(500)}).raw=zd;var kg=Rd(function(){return 1},Math.asin);(d3.geo.orthographic=function(){return Kd(kg)}).raw=kg,d3.geo.path=function(){function a(a){return a&&d3.geo.stream(a,d(e.pointRadius("function"==typeof f?+f.apply(this,arguments):f))),e.result()}var b,c,d,e,f=4.5;return a.area=function(a){return lg=0,d3.geo.stream(a,d(ng)),lg},a.centroid=function(a){return cg=eg=fg=gg=0,d3.geo.stream(a,d(og)),gg?[eg/gg,fg/gg]:void 0},a.bounds=function(a){return cd(b)(a)},a.projection=function(c){return arguments.length?(d=(b=c)?c.stream||Bd(c):g,a):b},a.context=function(b){return arguments.length?(e=null==(c=b)?new Cd:new Dd(b),a):c},a.pointRadius=function(b){return arguments.length?(f="function"==typeof b?b:+b,a):f},a.projection(d3.geo.albersUsa()).context(null)};var lg,mg,ng={point:La,lineStart:La,lineEnd:La,polygonStart:function(){mg=0,ng.lineStart=Ed},polygonEnd:function(){ng.lineStart=ng.lineEnd=ng.point=La,lg+=Math.abs(mg/2)}},og={point:Fd,lineStart:Gd,lineEnd:Hd,polygonStart:function(){og.lineStart=Id},polygonEnd:function(){og.point=Fd,og.lineStart=Gd,og.lineEnd=Hd}};d3.geo.area=function(a){return pg=0,d3.geo.stream(a,rg),pg};var pg,qg,rg={sphere:function(){pg+=4*Je},point:La,lineStart:La,lineEnd:La,polygonStart:function(){qg=0,rg.lineStart=Jd},polygonEnd:function(){pg+=0>qg?4*Je+qg:qg,rg.lineStart=rg.lineEnd=rg.point=La}};d3.geo.projection=Kd,d3.geo.projectionMutator=Ld;var sg=Rd(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(d3.geo.stereographic=function(){return Kd(sg)}).raw=sg,d3.geom={},d3.geom.hull=function(a){if(3>a.length)return[];var b,c,d,e,f,g,h,i,j,k,l=a.length,m=l-1,n=[],o=[],p=0;for(b=1;l>b;++b)a[b][1]<a[p][1]?p=b:a[b][1]==a[p][1]&&(p=a[b][0]<a[p][0]?b:p);for(b=0;l>b;++b)b!==p&&(e=a[b][1]-a[p][1],d=a[b][0]-a[p][0],n.push({angle:Math.atan2(e,d),index:b}));for(n.sort(function(a,b){return a.angle-b.angle}),j=n[0].angle,i=n[0].index,h=0,b=1;m>b;++b)c=n[b].index,j==n[b].angle?(d=a[i][0]-a[p][0],e=a[i][1]-a[p][1],f=a[c][0]-a[p][0],g=a[c][1]-a[p][1],d*d+e*e>=f*f+g*g?n[b].index=-1:(n[h].index=-1,j=n[b].angle,h=b,i=c)):(j=n[b].angle,h=b,i=c);for(o.push(p),b=0,c=0;2>b;++c)-1!==n[c].index&&(o.push(n[c].index),b++);for(k=o.length;m>c;++c)if(-1!==n[c].index){for(;!Sd(o[k-2],o[k-1],n[c].index,a);)--k;o[k++]=n[c].index}var q=[];for(b=0;k>b;++b)q.push(a[o[b]]);return q},d3.geom.polygon=function(a){return a.area=function(){for(var b=0,c=a.length,d=a[c-1][1]*a[0][0]-a[c-1][0]*a[0][1];c>++b;)d+=a[b-1][1]*a[b][0]-a[b-1][0]*a[b][1];return.5*d},a.centroid=function(b){var c,d,e=-1,f=a.length,g=0,h=0,i=a[f-1];for(arguments.length||(b=-1/(6*a.area()));f>++e;)c=i,i=a[e],d=c[0]*i[1]-i[0]*c[1],g+=(c[0]+i[0])*d,h+=(c[1]+i[1])*d;return[g*b,h*b]},a.clip=function(b){for(var c,d,e,f,g,h,i=-1,j=a.length,k=a[j-1];j>++i;){for(c=b.slice(),b.length=0,f=a[i],g=c[(e=c.length)-1],d=-1;e>++d;)h=c[d],Td(h,k,f)?(Td(g,k,f)||b.push(Ud(g,h,k,f)),b.push(h)):Td(g,k,f)&&b.push(Ud(g,h,k,f)),g=h;k=f}return b},a},d3.geom.voronoi=function(a){var b=a.map(function(){return[]}),c=1e6;return Vd(a,function(a){var d,e,f,g,h,i;1===a.a&&a.b>=0?(d=a.ep.r,e=a.ep.l):(d=a.ep.l,e=a.ep.r),1===a.a?(h=d?d.y:-c,f=a.c-a.b*h,i=e?e.y:c,g=a.c-a.b*i):(f=d?d.x:-c,h=a.c-a.a*f,g=e?e.x:c,i=a.c-a.a*g);var j=[f,h],k=[g,i];b[a.region.l.index].push(j,k),b[a.region.r.index].push(j,k)}),b=b.map(function(b,c){var d=a[c][0],e=a[c][1],f=b.map(function(a){return Math.atan2(a[0]-d,a[1]-e)});return d3.range(b.length).sort(function(a,b){return f[a]-f[b]}).filter(function(a,b,c){return!b||f[a]-f[c[b-1]]>Ke}).map(function(a){return b[a]})}),b.forEach(function(b,d){var e=b.length;if(!e)return b.push([-c,-c],[-c,c],[c,c],[c,-c]);if(!(e>2)){var f=a[d],g=b[0],h=b[1],i=f[0],j=f[1],k=g[0],l=g[1],m=h[0],n=h[1],o=Math.abs(m-k),p=n-l;if(Ke>Math.abs(p)){var q=l>j?-c:c;b.push([-c,q],[c,q])}else if(Ke>o){var r=k>i?-c:c;b.push([r,-c],[r,c])}else{var q=(k-i)*(n-l)>(m-k)*(l-j)?c:-c,s=Math.abs(p)-o;Ke>Math.abs(s)?b.push([0>p?q:-q,q]):(s>0&&(q*=-1),b.push([-c,q],[c,q]))}}}),b};var tg={l:"r",r:"l"};d3.geom.delaunay=function(a){var b=a.map(function(){return[]}),c=[];return Vd(a,function(c){b[c.region.l.index].push(a[c.region.r.index])}),b.forEach(function(b,d){var e=a[d],f=e[0],g=e[1];b.forEach(function(a){a.angle=Math.atan2(a[0]-f,a[1]-g)}),b.sort(function(a,b){return a.angle-b.angle});for(var h=0,i=b.length-1;i>h;h++)c.push([e,b[h],b[h+1]])}),c},d3.geom.quadtree=function(a,b,c,d,e){function f(a,b,c,d,e,f){if(!isNaN(b.x)&&!isNaN(b.y))if(a.leaf){var h=a.point;h?.01>Math.abs(h.x-b.x)+Math.abs(h.y-b.y)?g(a,b,c,d,e,f):(a.point=null,g(a,h,c,d,e,f),g(a,b,c,d,e,f)):a.point=b}else g(a,b,c,d,e,f)}function g(a,b,c,d,e,g){var h=.5*(c+e),i=.5*(d+g),j=b.x>=h,k=b.y>=i,l=(k<<1)+j;a.leaf=!1,a=a.nodes[l]||(a.nodes[l]=Wd()),j?c=h:e=h,k?d=i:g=i,f(a,b,c,d,e,g)}var h,i=-1,j=a.length;if(5>arguments.length)if(3===arguments.length)e=c,d=b,c=b=0;else for(b=c=1/0,d=e=-1/0;j>++i;)h=a[i],b>h.x&&(b=h.x),c>h.y&&(c=h.y),h.x>d&&(d=h.x),h.y>e&&(e=h.y);var k=d-b,l=e-c;k>l?e=c+k:d=b+l;var m=Wd();return m.add=function(a){f(m,a,b,c,d,e)},m.visit=function(a){Xd(a,m,b,c,d,e)},a.forEach(m.add),m},d3.time={};var ug=Date,vg=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Yd.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){wg.setUTCDate.apply(this._,arguments)},setDay:function(){wg.setUTCDay.apply(this._,arguments)},setFullYear:function(){wg.setUTCFullYear.apply(this._,arguments)},setHours:function(){wg.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){wg.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){wg.setUTCMinutes.apply(this._,arguments)},setMonth:function(){wg.setUTCMonth.apply(this._,arguments)},setSeconds:function(){wg.setUTCSeconds.apply(this._,arguments)},setTime:function(){wg.setTime.apply(this._,arguments)}};var wg=Date.prototype,xg="%a %b %e %X %Y",yg="%m/%d/%Y",zg="%H:%M:%S",Ag=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Bg=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Cg=["January","February","March","April","May","June","July","August","September","October","November","December"],Dg=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];d3.time.format=function(a){function b(b){for(var d,e,f,g=[],h=-1,i=0;c>++h;)37===a.charCodeAt(h)&&(g.push(a.substring(i,h)),null!=(e=Kg[d=a.charAt(++h)])&&(d=a.charAt(++h)),(f=Lg[d])&&(d=f(b,null==e?"e"===d?" ":"0":e)),g.push(d),i=h+1);return g.push(a.substring(i,h)),g.join("")}var c=a.length;return b.parse=function(b){var c={y:1900,m:0,d:1,H:0,M:0,S:0,L:0};if(Zd(c,a,b,0)!=b.length)return null;"p"in c&&(c.H=c.H%12+12*c.p);var d=new ug;return d.setFullYear(c.y,c.m,c.d),d.setHours(c.H,c.M,c.S,c.L),d},b.toString=function(){return a},b};var Eg=$d(Ag),Fg=$d(Bg),Gg=$d(Cg),Hg=_d(Cg),Ig=$d(Dg),Jg=_d(Dg),Kg={"-":"",_:" ",0:"0"},Lg={a:function(a){return Bg[a.getDay()]},A:function(a){return Ag[a.getDay()]},b:function(a){return Dg[a.getMonth()]},B:function(a){return Cg[a.getMonth()]},c:d3.time.format(xg),d:function(a,b){return ae(a.getDate(),b,2)},e:function(a,b){return ae(a.getDate(),b,2)},H:function(a,b){return ae(a.getHours(),b,2)},I:function(a,b){return ae(a.getHours()%12||12,b,2)},j:function(a,b){return ae(1+d3.time.dayOfYear(a),b,3)},L:function(a,b){return ae(a.getMilliseconds(),b,3)},m:function(a,b){return ae(a.getMonth()+1,b,2)},M:function(a,b){return ae(a.getMinutes(),b,2)},p:function(a){return a.getHours()>=12?"PM":"AM"},S:function(a,b){return ae(a.getSeconds(),b,2)},U:function(a,b){return ae(d3.time.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return ae(d3.time.mondayOfYear(a),b,2)},x:d3.time.format(yg),X:d3.time.format(zg),y:function(a,b){return ae(a.getFullYear()%100,b,2)},Y:function(a,b){return ae(a.getFullYear()%1e4,b,4)},Z:se,"%":function(){return"%"}},Mg={a:be,A:ce,b:de,B:ee,c:fe,d:me,e:me,H:ne,I:ne,L:qe,m:le,M:oe,p:re,S:pe,x:ge,X:he,y:je,Y:ie},Ng=/^\s*\d+/,Og=d3.map({am:0,pm:1});d3.time.format.utc=function(a){function b(a){try{ug=Yd;var b=new ug;return b._=a,c(b)}finally{ug=Date}}var c=d3.time.format(a);return b.parse=function(a){try{ug=Yd;var b=c.parse(a);return b&&b._}finally{ug=Date}},b.toString=c.toString,b};var Pg=d3.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");d3.time.format.iso=Date.prototype.toISOString?te:Pg,te.parse=function(a){var b=new Date(a)
;return isNaN(b)?null:b},te.toString=Pg.toString,d3.time.second=ue(function(a){return new ug(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(a.getTime()+1e3*Math.floor(b))},function(a){return a.getSeconds()}),d3.time.seconds=d3.time.second.range,d3.time.seconds.utc=d3.time.second.utc.range,d3.time.minute=ue(function(a){return new ug(6e4*Math.floor(a/6e4))},function(a,b){a.setTime(a.getTime()+6e4*Math.floor(b))},function(a){return a.getMinutes()}),d3.time.minutes=d3.time.minute.range,d3.time.minutes.utc=d3.time.minute.utc.range,d3.time.hour=ue(function(a){var b=a.getTimezoneOffset()/60;return new ug(36e5*(Math.floor(a/36e5-b)+b))},function(a,b){a.setTime(a.getTime()+36e5*Math.floor(b))},function(a){return a.getHours()}),d3.time.hours=d3.time.hour.range,d3.time.hours.utc=d3.time.hour.utc.range,d3.time.day=ue(function(a){var b=new ug(1970,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1}),d3.time.days=d3.time.day.range,d3.time.days.utc=d3.time.day.utc.range,d3.time.dayOfYear=function(a){var b=d3.time.year(a);return Math.floor((a-b-6e4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864e5)},vg.forEach(function(a,b){a=a.toLowerCase(),b=7-b;var c=d3.time[a]=ue(function(a){return(a=d3.time.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=d3.time.year(a).getDay();return Math.floor((d3.time.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});d3.time[a+"s"]=c.range,d3.time[a+"s"].utc=c.utc.range,d3.time[a+"OfYear"]=function(a){var c=d3.time.year(a).getDay();return Math.floor((d3.time.dayOfYear(a)+(c+b)%7)/7)}}),d3.time.week=d3.time.sunday,d3.time.weeks=d3.time.sunday.range,d3.time.weeks.utc=d3.time.sunday.utc.range,d3.time.weekOfYear=d3.time.sundayOfYear,d3.time.month=ue(function(a){return a=d3.time.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()}),d3.time.months=d3.time.month.range,d3.time.months.utc=d3.time.month.utc.range,d3.time.year=ue(function(a){return a=d3.time.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()}),d3.time.years=d3.time.year.range,d3.time.years.utc=d3.time.year.utc.range;var Qg=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Rg=[[d3.time.second,1],[d3.time.second,5],[d3.time.second,15],[d3.time.second,30],[d3.time.minute,1],[d3.time.minute,5],[d3.time.minute,15],[d3.time.minute,30],[d3.time.hour,1],[d3.time.hour,3],[d3.time.hour,6],[d3.time.hour,12],[d3.time.day,1],[d3.time.day,2],[d3.time.week,1],[d3.time.month,1],[d3.time.month,3],[d3.time.year,1]],Sg=[[d3.time.format("%Y"),h],[d3.time.format("%B"),function(a){return a.getMonth()}],[d3.time.format("%b %d"),function(a){return 1!=a.getDate()}],[d3.time.format("%a %d"),function(a){return a.getDay()&&1!=a.getDate()}],[d3.time.format("%I %p"),function(a){return a.getHours()}],[d3.time.format("%I:%M"),function(a){return a.getMinutes()}],[d3.time.format(":%S"),function(a){return a.getSeconds()}],[d3.time.format(".%L"),function(a){return a.getMilliseconds()}]],Tg=d3.scale.linear(),Ug=ze(Sg);Rg.year=function(a,b){return Tg.domain(a.map(Be)).ticks(b).map(Ae)},d3.time.scale=function(){return we(d3.scale.linear(),Rg,Ug)};var Vg=Rg.map(function(a){return[a[0].utc,a[1]]}),Wg=[[d3.time.format.utc("%Y"),h],[d3.time.format.utc("%B"),function(a){return a.getUTCMonth()}],[d3.time.format.utc("%b %d"),function(a){return 1!=a.getUTCDate()}],[d3.time.format.utc("%a %d"),function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],[d3.time.format.utc("%I %p"),function(a){return a.getUTCHours()}],[d3.time.format.utc("%I:%M"),function(a){return a.getUTCMinutes()}],[d3.time.format.utc(":%S"),function(a){return a.getUTCSeconds()}],[d3.time.format.utc(".%L"),function(a){return a.getUTCMilliseconds()}]],Xg=ze(Wg);Vg.year=function(a,b){return Tg.domain(a.map(De)).ticks(b).map(Ce)},d3.time.scale.utc=function(){return we(d3.scale.linear(),Vg,Xg)}}(),function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=this,y=x&&x.ejs,z=Array.prototype,A=Object.prototype,B=z.slice,C=A.toString,D=A.hasOwnProperty,E=z.forEach,F=Array.isArray,G=z.indexOf,H={};w="undefined"!=typeof exports?exports:x.ejs={},a=function(a,b){return D.call(a,b)},b=function(b,c,d){if(null!=b)if(E&&b.forEach===E)b.forEach(c,d);else if(b.length===+b.length){for(var e=0,f=b.length;f>e;e++)if(c.call(d,b[e],e,b)===H)return}else for(var g in b)if(a(b,g)&&c.call(d,b[g],g,b)===H)return},c=function(a){return b(B.call(arguments,1),function(b){for(var c in b)a[c]=b[c]}),a},d=function(a,b){if(null==a)return-1;var c=0,d=a.length;if(G&&a.indexOf===G)return a.indexOf(b);for(;d>c;c++)if(a[c]===b)return c;return-1},e=function(b,c){var e,f,h={};for(e in b)a(b,e)&&-1===d(c,e)&&(f=b[e],g(f)&&(f=f.join()),h[e]=f);return h},f=function(b,c){var d,f=e(b,c),g=[];for(d in f)a(f,d)&&g.push(d+"="+encodeURIComponent(f[d]));return g.join("&")},g=F||function(a){return"[object Array]"===C.call(a)},h=function(a){return a===Object(a)},i=function(a){return"[object String]"===C.call(a)},j=function(a){return"[object Number]"===C.call(a)},"function"!=typeof/./?function(a){return"function"==typeof a}:function(a){return"[object Function]"===C.call(a)},k=function(b){return h(b)&&a(b,"_type")&&a(b,"_self")&&a(b,"toString")},l=function(a){return k(a)&&"query"===a._type()},m=function(a){return k(a)&&"rescore"===a._type()},n=function(a){return k(a)&&"filter"===a._type()},o=function(a){return k(a)&&"facet"===a._type()},p=function(a){return k(a)&&"script field"===a._type()},q=function(a){return k(a)&&"geo point"===a._type()},function(a){return k(a)&&"indexed shape"===a._type()},function(a){return k(a)&&"shape"===a._type()},r=function(a){return k(a)&&"sort"===a._type()},s=function(a){return k(a)&&"highlight"===a._type()},t=function(a){return k(a)&&"suggest"===a._type()},u=function(a){return k(a)&&"generator"===a._type()},function(a){return k(a)&&"cluster health"===a._type()},function(a){return k(a)&&"cluster state"===a._type()},function(a){return k(a)&&"node stats"===a._type()},function(a){return k(a)&&"node info"===a._type()},v=function(a){return k(a)&&"request"===a._type()},function(a){return k(a)&&"multi search request"===a._type()},w.DateHistogramFacet=function(a){var b={};return b[a]={date_histogram:{}},{field:function(c){return null==c?b[a].date_histogram.field:(b[a].date_histogram.field=c,this)},keyField:function(c){return null==c?b[a].date_histogram.key_field:(b[a].date_histogram.key_field=c,this)},valueField:function(c){return null==c?b[a].date_histogram.value_field:(b[a].date_histogram.value_field=c,this)},interval:function(c){return null==c?b[a].date_histogram.interval:(b[a].date_histogram.interval=c,this)},timeZone:function(c){return null==c?b[a].date_histogram.time_zone:(b[a].date_histogram.time_zone=c,this)},preZone:function(c){return null==c?b[a].date_histogram.pre_zone:(b[a].date_histogram.pre_zone=c,this)},preZoneAdjustLargeInterval:function(c){return null==c?b[a].date_histogram.pre_zone_adjust_large_interval:(b[a].date_histogram.pre_zone_adjust_large_interval=c,this)},postZone:function(c){return null==c?b[a].date_histogram.post_zone:(b[a].date_histogram.post_zone=c,this)},preOffset:function(c){return null==c?b[a].date_histogram.pre_offset:(b[a].date_histogram.pre_offset=c,this)},postOffset:function(c){return null==c?b[a].date_histogram.post_offset:(b[a].date_histogram.post_offset=c,this)},factor:function(c){return null==c?b[a].date_histogram.factor:(b[a].date_histogram.factor=c,this)},valueScript:function(c){return null==c?b[a].date_histogram.value_script:(b[a].date_histogram.value_script=c,this)},order:function(c){return null==c?b[a].date_histogram.order:(c=c.toLowerCase(),("time"===c||"count"===c||"total"===c)&&(b[a].date_histogram.order=c),this)},lang:function(c){return null==c?b[a].date_histogram.lang:(b[a].date_histogram.lang=c,this)},params:function(c){return null==c?b[a].date_histogram.params:(b[a].date_histogram.params=c,this)},facetFilter:function(c){if(null==c)return b[a].facet_filter;if(!n(c))throw new TypeError("Argument must be a Filter");return b[a].facet_filter=c._self(),this},global:function(c){return null==c?b[a].global:(b[a].global=c,this)},mode:function(c){return null==c?b[a].mode:(c=c.toLowerCase(),("collector"===c||"post"===c)&&(b[a].mode=c),this)},scope:function(){return this},cacheFilter:function(c){return null==c?b[a].cache_filter:(b[a].cache_filter=c,this)},nested:function(c){return null==c?b[a].nested:(b[a].nested=c,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"facet"},_self:function(){return b}}},w.FilterFacet=function(a){var b={};return b[a]={},{filter:function(c){if(null==c)return b[a].filter;if(!n(c))throw new TypeError("Argument must be a Filter");return b[a].filter=c._self(),this},facetFilter:function(c){if(null==c)return b[a].facet_filter;if(!n(c))throw new TypeError("Argument must be a Filter");return b[a].facet_filter=c._self(),this},global:function(c){return null==c?b[a].global:(b[a].global=c,this)},mode:function(c){return null==c?b[a].mode:(c=c.toLowerCase(),("collector"===c||"post"===c)&&(b[a].mode=c),this)},scope:function(){return this},cacheFilter:function(c){return null==c?b[a].cache_filter:(b[a].cache_filter=c,this)},nested:function(c){return null==c?b[a].nested:(b[a].nested=c,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"facet"},_self:function(){return b}}},w.GeoDistanceFacet=function(a){var b={},c=w.GeoPoint([0,0]),d="location";return b[a]={geo_distance:{location:c._self(),ranges:[]}},{field:function(c){var e=b[a].geo_distance[d];return null==c?d:(delete b[a].geo_distance[d],d=c,b[a].geo_distance[c]=e,this)},point:function(e){if(null==e)return c;if(!q(e))throw new TypeError("Argument must be a GeoPoint");return c=e,b[a].geo_distance[d]=e._self(),this},addRange:function(c,d){return 0===arguments.length?b[a].geo_distance.ranges:(b[a].geo_distance.ranges.push({from:c,to:d}),this)},addUnboundedFrom:function(c){return null==c?b[a].geo_distance.ranges:(b[a].geo_distance.ranges.push({from:c}),this)},addUnboundedTo:function(c){return null==c?b[a].geo_distance.ranges:(b[a].geo_distance.ranges.push({to:c}),this)},unit:function(c){return null==c?b[a].geo_distance.unit:(c=c.toLowerCase(),("mi"===c||"km"===c)&&(b[a].geo_distance.unit=c),this)},distanceType:function(c){return null==c?b[a].geo_distance.distance_type:(c=c.toLowerCase(),("arc"===c||"plane"===c)&&(b[a].geo_distance.distance_type=c),this)},normalize:function(c){return null==c?b[a].geo_distance.normalize:(b[a].geo_distance.normalize=c,this)},valueField:function(c){return null==c?b[a].geo_distance.value_field:(b[a].geo_distance.value_field=c,this)},valueScript:function(c){return null==c?b[a].geo_distance.value_script:(b[a].geo_distance.value_script=c,this)},lang:function(c){return null==c?b[a].geo_distance.lang:(b[a].geo_distance.lang=c,this)},params:function(c){return null==c?b[a].geo_distance.params:(b[a].geo_distance.params=c,this)},facetFilter:function(c){if(null==c)return b[a].facet_filter;if(!n(c))throw new TypeError("Argument must be a Filter");return b[a].facet_filter=c._self(),this},global:function(c){return null==c?b[a].global:(b[a].global=c,this)},mode:function(c){return null==c?b[a].mode:(c=c.toLowerCase(),("collector"===c||"post"===c)&&(b[a].mode=c),this)},scope:function(){return this},cacheFilter:function(c){return null==c?b[a].cache_filter:(b[a].cache_filter=c,this)},nested:function(c){return null==c?b[a].nested:(b[a].nested=c,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"facet"},_self:function(){return b}}},w.HistogramFacet=function(a){var b={};return b[a]={histogram:{}},{field:function(c){return null==c?b[a].histogram.field:(b[a].histogram.field=c,this)},interval:function(c){return null==c?b[a].histogram.interval:(b[a].histogram.interval=c,this)},timeInterval:function(c){return null==c?b[a].histogram.time_interval:(b[a].histogram.time_interval=c,this)},from:function(c){return null==c?b[a].histogram.from:(b[a].histogram.from=c,this)},to:function(c){return null==c?b[a].histogram.to:(b[a].histogram.to=c,this)},valueField:function(c){return null==c?b[a].histogram.value_field:(b[a].histogram.value_field=c,this)},keyField:function(c){return null==c?b[a].histogram.key_field:(b[a].histogram.key_field=c,this)},valueScript:function(c){return null==c?b[a].histogram.value_script:(b[a].histogram.value_script=c,this)},keyScript:function(c){return null==c?b[a].histogram.key_script:(b[a].histogram.key_script=c,this)},lang:function(c){return null==c?b[a].histogram.lang:(b[a].histogram.lang=c,this)},params:function(c){return null==c?b[a].histogram.params:(b[a].histogram.params=c,this)},order:function(c){return null==c?b[a].histogram.order:(c=c.toLowerCase(),("key"===c||"count"===c||"total"===c)&&(b[a].histogram.order=c),this)},facetFilter:function(c){if(null==c)return b[a].facet_filter;if(!n(c))throw new TypeError("Argument must be a Filter");return b[a].facet_filter=c._self(),this},global:function(c){return null==c?b[a].global:(b[a].global=c,this)},mode:function(c){return null==c?b[a].mode:(c=c.toLowerCase(),("collector"===c||"post"===c)&&(b[a].mode=c),this)},scope:function(){return this},cacheFilter:function(c){return null==c?b[a].cache_filter:(b[a].cache_filter=c,this)},nested:function(c){return null==c?b[a].nested:(b[a].nested=c,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"facet"},_self:function(){return b}}},w.QueryFacet=function(a){var b={};return b[a]={},{query:function(c){if(null==c)return b[a].query;if(!l(c))throw new TypeError("Argument must be a Query");return b[a].query=c._self(),this},facetFilter:function(c){if(null==c)return b[a].facet_filter;if(!n(c))throw new TypeError("Argumnet must be a Filter");return b[a].facet_filter=c._self(),this},global:function(c){return null==c?b[a].global:(b[a].global=c,this)},mode:function(c){return null==c?b[a].mode:(c=c.toLowerCase(),("collector"===c||"post"===c)&&(b[a].mode=c),this)},scope:function(){return this},cacheFilter:function(c){return null==c?b[a].cache_filter:(b[a].cache_filter=c,this)},nested:function(c){return null==c?b[a].nested:(b[a].nested=c,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"facet"},_self:function(){return b}}},w.RangeFacet=function(a){var b={};return b[a]={range:{ranges:[]}},{field:function(c){return null==c?b[a].range.field:(b[a].range.field=c,this)},keyField:function(c){return null==c?b[a].range.key_field:(b[a].range.key_field=c,this)},valueField:function(c){return null==c?b[a].range.value_field:(b[a].range.value_field=c,this)},valueScript:function(c){return null==c?b[a].range.value_script:(b[a].range.value_script=c,this)},keyScript:function(c){return null==c?b[a].range.key_script:(b[a].range.key_script=c,this)},lang:function(c){return null==c?b[a].range.lang:(b[a].range.lang=c,this)},params:function(c){return null==c?b[a].range.params:(b[a].range.params=c,this)},addRange:function(c,d){return 0===arguments.length?b[a].range.ranges:(b[a].range.ranges.push({from:c,to:d}),this)},addUnboundedFrom:function(c){return null==c?b[a].range.ranges:(b[a].range.ranges.push({from:c}),this)},addUnboundedTo:function(c){return null==c?b[a].range.ranges:(b[a].range.ranges.push({to:c}),this)},facetFilter:function(c){if(null==c)return b[a].facet_filter;if(!n(c))throw new TypeError("Argument must be a Filter");return b[a].facet_filter=c._self(),this},global:function(c){return null==c?b[a].global:(b[a].global=c,this)},mode:function(c){return null==c?b[a].mode:(c=c.toLowerCase(),("collector"===c||"post"===c)&&(b[a].mode=c),this)},scope:function(){return this},cacheFilter:function(c){return null==c?b[a].cache_filter:(b[a].cache_filter=c,this)},nested:function(c){return null==c?b[a].nested:(b[a].nested=c,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"facet"},_self:function(){return b}}},w.StatisticalFacet=function(a){var b={};return b[a]={statistical:{}},{field:function(c){return null==c?b[a].statistical.field:(b[a].statistical.field=c,this)},fields:function(c){if(null==c)return b[a].statistical.fields;if(!g(c))throw new TypeError("Argument must be an array");return b[a].statistical.fields=c,this},script:function(c){return null==c?b[a].statistical.script:(b[a].statistical.script=c,this)},lang:function(c){return null==c?b[a].statistical.lang:(b[a].statistical.lang=c,this)},params:function(c){return null==c?b[a].statistical.params:(b[a].statistical.params=c,this)},facetFilter:function(c){if(null==c)return b[a].facet_filter;if(!n(c))throw new TypeError("Argument must be a Filter");return b[a].facet_filter=c._self(),this},global:function(c){return null==c?b[a].global:(b[a].global=c,this)},mode:function(c){return null==c?b[a].mode:(c=c.toLowerCase(),("collector"===c||"post"===c)&&(b[a].mode=c),this)},scope:function(){return this},cacheFilter:function(c){return null==c?b[a].cache_filter:(b[a].cache_filter=c,this)},nested:function(c){return null==c?b[a].nested:(b[a].nested=c,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"facet"},_self:function(){return b}}},w.TermStatsFacet=function(a){var b={};return b[a]={terms_stats:{}},{valueField:function(c){return null==c?b[a].terms_stats.value_field:(b[a].terms_stats.value_field=c,this)},keyField:function(c){return null==c?b[a].terms_stats.key_field:(b[a].terms_stats.key_field=c,this)},scriptField:function(c){return null==c?b[a].terms_stats.script_field:(b[a].terms_stats.script_field=c,this)},valueScript:function(c){return null==c?b[a].terms_stats.value_script:(b[a].terms_stats.value_script=c,this)},allTerms:function(c){return null==c?b[a].terms_stats.all_terms:(b[a].terms_stats.all_terms=c,this)},lang:function(c){return null==c?b[a].terms_stats.lang:(b[a].terms_stats.lang=c,this)},params:function(c){return null==c?b[a].terms_stats.params:(b[a].terms_stats.params=c,this)},size:function(c){return null==c?b[a].terms_stats.size:(b[a].terms_stats.size=c,this)},order:function(c){return null==c?b[a].terms_stats.order:(c=c.toLowerCase(),("count"===c||"term"===c||"reverse_count"===c||"reverse_term"===c||"total"===c||"reverse_total"===c||"min"===c||"reverse_min"===c||"max"===c||"reverse_max"===c||"mean"===c||"reverse_mean"===c)&&(b[a].terms_stats.order=c),this)},facetFilter:function(c){if(null==c)return b[a].facet_filter;if(!n(c))throw new TypeError("Argument must be a Filter");return b[a].facet_filter=c._self(),this},global:function(c){return null==c?b[a].global:(b[a].global=c,this)},mode:function(c){return null==c?b[a].mode:(c=c.toLowerCase(),("collector"===c||"post"===c)&&(b[a].mode=c),this)},scope:function(){return this},cacheFilter:function(c){return null==c?b[a].cache_filter:(b[a].cache_filter=c,this)},nested:function(c){return null==c?b[a].nested:(b[a].nested=c,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"facet"},_self:function(){return b}}},w.TermsFacet=function(a){var b={};return b[a]={terms:{}},{field:function(c){return null==c?b[a].terms.field:(b[a].terms.field=c,this)},fields:function(c){if(null==c)return b[a].terms.fields;if(!g(c))throw new TypeError("Argument must be an array");return b[a].terms.fields=c,this},scriptField:function(c){return null==c?b[a].terms.script_field:(b[a].terms.script_field=c,this)},size:function(c){return null==c?b[a].terms.size:(b[a].terms.size=c,this)},order:function(c){return null==c?b[a].terms.order:(c=c.toLowerCase(),("count"===c||"term"===c||"reverse_count"===c||"reverse_term"===c)&&(b[a].terms.order=c),this)},allTerms:function(c){return null==c?b[a].terms.all_terms:(b[a].terms.all_terms=c,this)},exclude:function(c){if(null==b[a].terms.exclude&&(b[a].terms.exclude=[]),null==c)return b[a].terms.exclude;if(i(c))b[a].terms.exclude.push(c);else{if(!g(c))throw new TypeError("Argument must be string or array");b[a].terms.exclude=c}return this},regex:function(c){return null==c?b[a].terms.regex:(b[a].terms.regex=c,this)},regexFlags:function(c){return null==c?b[a].terms.regex_flags:(b[a].terms.regex_flags=c,this)},script:function(c){return null==c?b[a].terms.script:(b[a].terms.script=c,this)},lang:function(c){return null==c?b[a].terms.lang:(b[a].terms.lang=c,this)},params:function(c){return null==c?b[a].terms.params:(b[a].terms.params=c,this)},executionHint:function(c){return null==c?b[a].terms.execution_hint:(b[a].terms.execution_hint=c,this)},facetFilter:function(c){if(null==c)return b[a].facet_filter;if(!n(c))throw new TypeError("Argument must be a Filter");return b[a].facet_filter=c._self(),this},global:function(c){return null==c?b[a].global:(b[a].global=c,this)},mode:function(c){return null==c?b[a].mode:(c=c.toLowerCase(),("collector"===c||"post"===c)&&(b[a].mode=c),this)},scope:function(){return this},cacheFilter:function(c){return null==c?b[a].cache_filter:(b[a].cache_filter=c,this)},nested:function(c){return null==c?b[a].nested:(b[a].nested=c,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"facet"},_self:function(){return b}}},w.AndFilter=function(a){var b,c,d={and:{filters:[]}};if(n(a))d.and.filters.push(a._self());else{if(!g(a))throw new TypeError("Argument must be a Filter or Array of Filters");for(b=0,c=a.length;c>b;b++){if(!n(a[b]))throw new TypeError("Array must contain only Filter objects");d.and.filters.push(a[b]._self())}}return{filters:function(a){var b,c;if(null==a)return d.and.filters;if(n(a))d.and.filters.push(a._self());else{if(!g(a))throw new TypeError("Argument must be a Filter or an Array of Filters");for(d.and.filters=[],b=0,c=a.length;c>b;b++){if(!n(a[b]))throw new TypeError("Array must contain only Filter objects");d.and.filters.push(a[b]._self())}}return this},name:function(a){return null==a?d.and._name:(d.and._name=a,this)},cache:function(a){return null==a?d.and._cache:(d.and._cache=a,this)},cacheKey:function(a){return null==a?d.and._cache_key:(d.and._cache_key=a,this)},toString:function(){return JSON.stringify(d)},_type:function(){return"filter"},_self:function(){return d}}},w.BoolFilter=function(){var a={bool:{}};return{must:function(b){var c,d;if(null==a.bool.must&&(a.bool.must=[]),null==b)return a.bool.must;if(n(b))a.bool.must.push(b._self());else{if(!g(b))throw new TypeError("Argument must be a Filter or array of Filters");for(a.bool.must=[],c=0,d=b.length;d>c;c++){if(!n(b[c]))throw new TypeError("Argument must be an array of Filters");a.bool.must.push(b[c]._self())}}return this},mustNot:function(b){var c,d;if(null==a.bool.must_not&&(a.bool.must_not=[]),null==b)return a.bool.must_not;if(n(b))a.bool.must_not.push(b._self());else{if(!g(b))throw new TypeError("Argument must be a Filter or array of Filters");for(a.bool.must_not=[],c=0,d=b.length;d>c;c++){if(!n(b[c]))throw new TypeError("Argument must be an array of Filters");a.bool.must_not.push(b[c]._self())}}return this},should:function(b){var c,d;if(null==a.bool.should&&(a.bool.should=[]),null==b)return a.bool.should;if(n(b))a.bool.should.push(b._self());else{if(!g(b))throw new TypeError("Argument must be a Filter or array of Filters");for(a.bool.should=[],c=0,d=b.length;d>c;c++){if(!n(b[c]))throw new TypeError("Argument must be an array of Filters");a.bool.should.push(b[c]._self())}}return this},name:function(b){return null==b?a.bool._name:(a.bool._name=b,this)},cache:function(b){return null==b?a.bool._cache:(a.bool._cache=b,this)},cacheKey:function(b){return null==b?a.bool._cache_key:(a.bool._cache_key=b,this)},toString:function(){return JSON.stringify(a)},_type:function(){return"filter"},_self:function(){return a}}},w.ExistsFilter=function(a){var b={exists:{field:a}};return{field:function(a){return null==a?b.exists.field:(b.exists.field=a,this)},name:function(a){return null==a?b.exists._name:(b.exists._name=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},w.GeoBboxFilter=function(a){var b={geo_bounding_box:{}};return b.geo_bounding_box[a]={},{field:function(c){var d=b.geo_bounding_box[a];return null==c?a:(delete b.geo_bounding_box[a],a=c,b.geo_bounding_box[c]=d,this)},topLeft:function(c){if(null==c)return b.geo_bounding_box[a].top_left;if(!q(c))throw new TypeError("Argument must be a GeoPoint");return b.geo_bounding_box[a].top_left=c._self(),this},bottomRight:function(c){if(null==c)return b.geo_bounding_box[a].bottom_right;if(!q(c))throw new TypeError("Argument must be a GeoPoint");return b.geo_bounding_box[a].bottom_right=c._self(),this},type:function(a){return null==a?b.geo_bounding_box.type:(a=a.toLowerCase(),("memory"===a||"indexed"===a)&&(b.geo_bounding_box.type=a),this)},normalize:function(a){return null==a?b.geo_bounding_box.normalize:(b.geo_bounding_box.normalize=a,this)},name:function(a){return null==a?b.geo_bounding_box._name:(b.geo_bounding_box._name=a,this)},cache:function(a){return null==a?b.geo_bounding_box._cache:(b.geo_bounding_box._cache=a,this)},cacheKey:function(a){return null==a?b.geo_bounding_box._cache_key:(b.geo_bounding_box._cache_key=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},w.GeoDistanceFilter=function(a){var b={geo_distance:{}};return b.geo_distance[a]=[0,0],{field:function(c){var d=b.geo_distance[a];return null==c?a:(delete b.geo_distance[a],a=c,b.geo_distance[c]=d,this)},distance:function(a){if(null==a)return b.geo_distance.distance;if(!j(a))throw new TypeError("Argument must be a numeric value");return b.geo_distance.distance=a,this},unit:function(a){return null==a?b.geo_distance.unit:(a=a.toLowerCase(),("mi"===a||"km"===a)&&(b.geo_distance.unit=a),this)},point:function(c){if(null==c)return b.geo_distance[a];if(!q(c))throw new TypeError("Argument must be a GeoPoint");return b.geo_distance[a]=c._self(),this},distanceType:function(a){return null==a?b.geo_distance.distance_type:(a=a.toLowerCase(),("arc"===a||"plane"===a)&&(b.geo_distance.distance_type=a),this)},normalize:function(a){return null==a?b.geo_distance.normalize:(b.geo_distance.normalize=a,this)},optimizeBbox:function(a){return null==a?b.geo_distance.optimize_bbox:(a=a.toLowerCase(),("memory"===a||"indexed"===a||"none"===a)&&(b.geo_distance.optimize_bbox=a),this)},name:function(a){return null==a?b.geo_distance._name:(b.geo_distance._name=a,this)},cache:function(a){return null==a?b.geo_distance._cache:(b.geo_distance._cache=a,this)},cacheKey:function(a){return null==a?b.geo_distance._cache_key:(b.geo_distance._cache_key=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},w.GeoDistanceRangeFilter=function(a){var b={geo_distance_range:{}};return b.geo_distance_range[a]=[0,0],{field:function(c){var d=b.geo_distance_range[a];return null==c?a:(delete b.geo_distance_range[a],a=c,b.geo_distance_range[c]=d,this)},from:function(a){if(null==a)return b.geo_distance_range.from;if(!j(a))throw new TypeError("Argument must be a numeric value");return b.geo_distance_range.from=a,this},to:function(a){if(null==a)return b.geo_distance_range.to;if(!j(a))throw new TypeError("Argument must be a numeric value");return b.geo_distance_range.to=a,this},includeLower:function(a){return null==a?b.geo_distance_range.include_lower:(b.geo_distance_range.include_lower=a,this)},includeUpper:function(a){return null==a?b.geo_distance_range.include_upper:(b.geo_distance_range.include_upper=a,this)},gt:function(a){if(null==a)return b.geo_distance_range.gt;if(!j(a))throw new TypeError("Argument must be a numeric value");return b.geo_distance_range.gt=a,this},gte:function(a){if(null==a)return b.geo_distance_range.gte;if(!j(a))throw new TypeError("Argument must be a numeric value");return b.geo_distance_range.gte=a,this},lt:function(a){if(null==a)return b.geo_distance_range.lt;if(!j(a))throw new TypeError("Argument must be a numeric value");return b.geo_distance_range.lt=a,this},lte:function(a){if(null==a)return b.geo_distance_range.lte;if(!j(a))throw new TypeError("Argument must be a numeric value");return b.geo_distance_range.lte=a,this},unit:function(a){return null==a?b.geo_distance_range.unit:(a=a.toLowerCase(),("mi"===a||"km"===a)&&(b.geo_distance_range.unit=a),this)},point:function(c){if(null==c)return b.geo_distance_range[a];if(!q(c))throw new TypeError("Argument must be a GeoPoint");return b.geo_distance_range[a]=c._self(),this},distanceType:function(a){return null==a?b.geo_distance_range.distance_type:(a=a.toLowerCase(),("arc"===a||"plane"===a)&&(b.geo_distance_range.distance_type=a),this)},normalize:function(a){return null==a?b.geo_distance_range.normalize:(b.geo_distance_range.normalize=a,this)},optimizeBbox:function(a){return null==a?b.geo_distance_range.optimize_bbox:(a=a.toLowerCase(),("memory"===a||"indexed"===a||"none"===a)&&(b.geo_distance_range.optimize_bbox=a),this)},name:function(a){return null==a?b.geo_distance_range._name:(b.geo_distance_range._name=a,this)},cache:function(a){return null==a?b.geo_distance_range._cache:(b.geo_distance_range._cache=a,this)},cacheKey:function(a){return null==a?b.geo_distance_range._cache_key:(b.geo_distance_range._cache_key=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},w.GeoPolygonFilter=function(a){var b={geo_polygon:{}};return b.geo_polygon[a]={points:[]},{field:function(c){var d=b.geo_polygon[a];return null==c?a:(delete b.geo_polygon[a],a=c,b.geo_polygon[c]=d,this)},points:function(c){var d,e;if(null==c)return b.geo_polygon[a].points;if(q(c))b.geo_polygon[a].points.push(c._self());else{if(!g(c))throw new TypeError("Argument must be a GeoPoint or Array of GeoPoints");for(b.geo_polygon[a].points=[],d=0,e=c.length;e>d;d++){if(!q(c[d]))throw new TypeError("Argument must be Array of GeoPoints");b.geo_polygon[a].points.push(c[d]._self())}}return this},normalize:function(a){return null==a?b.geo_polygon.normalize:(b.geo_polygon.normalize=a,this)},name:function(a){return null==a?b.geo_polygon._name:(b.geo_polygon._name=a,this)},cache:function(a){return null==a?b.geo_polygon._cache:(b.geo_polygon._cache=a,this)},cacheKey:function(a){return null==a?b.geo_polygon._cache_key:(b.geo_polygon._cache_key=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},w.GeoShapeFilter=function(a){var b={geo_shape:{}};return b.geo_shape[a]={},{field:function(c){var d=b.geo_shape[a];return null==c?a:(delete b.geo_shape[a],a=c,b.geo_shape[c]=d,this)},shape:function(c){return null==c?b.geo_shape[a].shape:(null!=b.geo_shape[a].indexed_shape&&delete b.geo_shape[a].indexed_shape,b.geo_shape[a].shape=c._self(),this)},indexedShape:function(c){return null==c?b.geo_shape[a].indexed_shape:(null!=b.geo_shape[a].shape&&delete b.geo_shape[a].shape,b.geo_shape[a].indexed_shape=c._self(),this)},relation:function(c){return null==c?b.geo_shape[a].relation:(c=c.toLowerCase(),("intersects"===c||"disjoint"===c||"within"===c)&&(b.geo_shape[a].relation=c),this)},strategy:function(c){return null==c?b.geo_shape[a].strategy:(c=c.toLowerCase(),("recursive"===c||"term"===c)&&(b.geo_shape[a].strategy=c),this)},name:function(a){return null==a?b.geo_shape._name:(b.geo_shape._name=a,this)},cache:function(a){return null==a?b.geo_shape._cache:(b.geo_shape._cache=a,this)},cacheKey:function(a){return null==a?b.geo_shape._cache_key:(b.geo_shape._cache_key=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},w.HasChildFilter=function(a,b){if(!l(a))throw new TypeError("No Query object found");var c={has_child:{query:a._self(),type:b}};return{query:function(a){if(null==a)return c.has_child.query;if(!l(a))throw new TypeError("Argument must be a Query object");return c.has_child.query=a._self(),this},filter:function(a){if(null==a)return c.has_child.filter;if(!n(a))throw new TypeError("Argument must be a Filter object");return c.has_child.filter=a._self(),this},type:function(a){
return null==a?c.has_child.type:(c.has_child.type=a,this)},scope:function(){return this},name:function(a){return null==a?c.has_child._name:(c.has_child._name=a,this)},cache:function(a){return null==a?c.has_child._cache:(c.has_child._cache=a,this)},cacheKey:function(a){return null==a?c.has_child._cache_key:(c.has_child._cache_key=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"filter"},_self:function(){return c}}},w.HasParentFilter=function(a,b){if(!l(a))throw new TypeError("No Query object found");var c={has_parent:{query:a._self(),parent_type:b}};return{query:function(a){if(null==a)return c.has_parent.query;if(!l(a))throw new TypeError("Argument must be a Query object");return c.has_parent.query=a._self(),this},filter:function(a){if(null==a)return c.has_parent.filter;if(!n(a))throw new TypeError("Argument must be a Filter object");return c.has_parent.filter=a._self(),this},parentType:function(a){return null==a?c.has_parent.parent_type:(c.has_parent.parent_type=a,this)},scope:function(){return this},name:function(a){return null==a?c.has_parent._name:(c.has_parent._name=a,this)},cache:function(a){return null==a?c.has_parent._cache:(c.has_parent._cache=a,this)},cacheKey:function(a){return null==a?c.has_parent._cache_key:(c.has_parent._cache_key=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"filter"},_self:function(){return c}}},w.IdsFilter=function(a){var b={ids:{}};if(i(a))b.ids.values=[a];else{if(!g(a))throw new TypeError("Argument must be a string or an array");b.ids.values=a}return{values:function(a){if(null==a)return b.ids.values;if(i(a))b.ids.values.push(a);else{if(!g(a))throw new TypeError("Argument must be a string or an array");b.ids.values=a}return this},type:function(a){if(null==b.ids.type&&(b.ids.type=[]),null==a)return b.ids.type;if(i(a))b.ids.type.push(a);else{if(!g(a))throw new TypeError("Argument must be a string or an array");b.ids.type=a}return this},name:function(a){return null==a?b.ids._name:(b.ids._name=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},w.IndicesFilter=function(a,b){if(!n(a))throw new TypeError("Argument must be a Filter");var c={indices:{filter:a._self()}};if(i(b))c.indices.indices=[b];else{if(!g(b))throw new TypeError("Argument must be a string or array");c.indices.indices=b}return{indices:function(a){if(null==a)return c.indices.indices;if(i(a))c.indices.indices.push(a);else{if(!g(a))throw new TypeError("Argument must be a string or array");c.indices.indices=a}return this},filter:function(a){if(null==a)return c.indices.filter;if(!n(a))throw new TypeError("Argument must be a Filter");return c.indices.filter=a._self(),this},noMatchFilter:function(a){if(null==a)return c.indices.no_match_filter;if(i(a))("none"===(a=a.toLowerCase())||"all"===a)&&(c.indices.no_match_filter=a);else{if(!n(a))throw new TypeError("Argument must be string or Filter");c.indices.no_match_filter=a._self()}return this},toString:function(){return JSON.stringify(c)},_type:function(){return"filter"},_self:function(){return c}}},w.LimitFilter=function(a){var b={limit:{value:a}};return{value:function(a){if(null==a)return b.limit.value;if(!j(a))throw new TypeError("Argument must be a numeric value");return b.limit.value=a,this},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},w.MatchAllFilter=function(){var a={match_all:{}};return{toString:function(){return JSON.stringify(a)},_type:function(){return"filter"},_self:function(){return a}}},w.MissingFilter=function(a){var b={missing:{field:a}};return{field:function(a){return null==a?b.missing.field:(b.missing.field=a,this)},existence:function(a){return null==a?b.missing.existence:(b.missing.existence=a,this)},nullValue:function(a){return null==a?b.missing.null_value:(b.missing.null_value=a,this)},name:function(a){return null==a?b.missing._name:(b.missing._name=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},w.NestedFilter=function(a){var b={nested:{path:a}};return{path:function(a){return null==a?b.nested.path:(b.nested.path=a,this)},query:function(a){if(null==a)return b.nested.query;if(!l(a))throw new TypeError("Argument must be a Query object");return b.nested.query=a._self(),this},filter:function(a){if(null==a)return b.nested.filter;if(!n(a))throw new TypeError("Argument must be a Filter object");return b.nested.filter=a._self(),this},boost:function(a){return null==a?b.nested.boost:(b.nested.boost=a,this)},join:function(a){return null==a?b.nested.join:(b.nested.join=a,this)},scope:function(){return this},name:function(a){return null==a?b.nested._name:(b.nested._name=a,this)},cache:function(a){return null==a?b.nested._cache:(b.nested._cache=a,this)},cacheKey:function(a){return null==a?b.nested._cache_key:(b.nested._cache_key=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},w.NotFilter=function(a){if(!n(a))throw new TypeError("Argument must be a Filter");var b={not:a._self()};return{filter:function(a){if(null==a)return b.not;if(!n(a))throw new TypeError("Argument must be a Filter");return b.not=a._self(),this},name:function(a){return null==a?b.not._name:(b.not._name=a,this)},cache:function(a){return null==a?b.not._cache:(b.not._cache=a,this)},cacheKey:function(a){return null==a?b.not._cache_key:(b.not._cache_key=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},w.NumericRangeFilter=function(a){var b={numeric_range:{}};return b.numeric_range[a]={},{field:function(c){var d=b.numeric_range[a];return null==c?a:(delete b.numeric_range[a],a=c,b.numeric_range[a]=d,this)},from:function(c){if(null==c)return b.numeric_range[a].from;if(!j(c))throw new TypeError("Argument must be a numeric value");return b.numeric_range[a].from=c,this},to:function(c){if(null==c)return b.numeric_range[a].to;if(!j(c))throw new TypeError("Argument must be a numeric value");return b.numeric_range[a].to=c,this},includeLower:function(c){return null==c?b.numeric_range[a].include_lower:(b.numeric_range[a].include_lower=c,this)},includeUpper:function(c){return null==c?b.numeric_range[a].include_upper:(b.numeric_range[a].include_upper=c,this)},gt:function(c){if(null==c)return b.numeric_range[a].gt;if(!j(c))throw new TypeError("Argument must be a numeric value");return b.numeric_range[a].gt=c,this},gte:function(c){if(null==c)return b.numeric_range[a].gte;if(!j(c))throw new TypeError("Argument must be a numeric value");return b.numeric_range[a].gte=c,this},lt:function(c){if(null==c)return b.numeric_range[a].lt;if(!j(c))throw new TypeError("Argument must be a numeric value");return b.numeric_range[a].lt=c,this},lte:function(c){if(null==c)return b.numeric_range[a].lte;if(!j(c))throw new TypeError("Argument must be a numeric value");return b.numeric_range[a].lte=c,this},name:function(a){return null==a?b.numeric_range._name:(b.numeric_range._name=a,this)},cache:function(a){return null==a?b.numeric_range._cache:(b.numeric_range._cache=a,this)},cacheKey:function(a){return null==a?b.numeric_range._cache_key:(b.numeric_range._cache_key=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},w.OrFilter=function(a){var b,c,d;if(b={or:{filters:[]}},n(a))b.or.filters.push(a._self());else{if(!g(a))throw new TypeError("Argument must be a Filter or array of Filters");for(c=0,d=a.length;d>c;c++){if(!n(a[c]))throw new TypeError("Argument must be array of Filters");b.or.filters.push(a[c]._self())}}return{filters:function(a){var c,d;if(null==a)return b.or.filters;if(n(a))b.or.filters.push(a._self());else{if(!g(a))throw new TypeError("Argument must be a Filter or array of Filters");for(b.or.filters=[],c=0,d=a.length;d>c;c++){if(!n(a[c]))throw new TypeError("Argument must be an array of Filters");b.or.filters.push(a[c]._self())}}return this},name:function(a){return null==a?b.or._name:(b.or._name=a,this)},cache:function(a){return null==a?b.or._cache:(b.or._cache=a,this)},cacheKey:function(a){return null==a?b.or._cache_key:(b.or._cache_key=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},w.PrefixFilter=function(a,b){var c={prefix:{}};return c.prefix[a]=b,{field:function(b){var d=c.prefix[a];return null==b?a:(delete c.prefix[a],a=b,c.prefix[a]=d,this)},prefix:function(b){return null==b?c.prefix[a]:(c.prefix[a]=b,this)},name:function(a){return null==a?c.prefix._name:(c.prefix._name=a,this)},cache:function(a){return null==a?c.prefix._cache:(c.prefix._cache=a,this)},cacheKey:function(a){return null==a?c.prefix._cache_key:(c.prefix._cache_key=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"filter"},_self:function(){return c}}},w.QueryFilter=function(a){if(!l(a))throw new TypeError("Argument must be a Query");var b={fquery:{query:a._self()}};return{query:function(a){if(null==a)return b.fquery.query;if(!l(a))throw new TypeError("Argument must be a Query");return b.fquery.query=a._self(),this},name:function(a){return null==a?b.fquery._name:(b.fquery._name=a,this)},cache:function(a){return null==a?b.fquery._cache:(b.fquery._cache=a,this)},cacheKey:function(a){return null==a?b.fquery._cache_key:(b.fquery._cache_key=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},w.RangeFilter=function(a){var b={range:{}};return b.range[a]={},{field:function(c){var d=b.range[a];return null==c?a:(delete b.range[a],a=c,b.range[c]=d,this)},from:function(c){return null==c?b.range[a].from:(b.range[a].from=c,this)},to:function(c){return null==c?b.range[a].to:(b.range[a].to=c,this)},includeLower:function(c){return null==c?b.range[a].include_lower:(b.range[a].include_lower=c,this)},includeUpper:function(c){return null==c?b.range[a].include_upper:(b.range[a].include_upper=c,this)},gt:function(c){return null==c?b.range[a].gt:(b.range[a].gt=c,this)},gte:function(c){return null==c?b.range[a].gte:(b.range[a].gte=c,this)},lt:function(c){return null==c?b.range[a].lt:(b.range[a].lt=c,this)},lte:function(c){return null==c?b.range[a].lte:(b.range[a].lte=c,this)},name:function(a){return null==a?b.range._name:(b.range._name=a,this)},cache:function(a){return null==a?b.range._cache:(b.range._cache=a,this)},cacheKey:function(a){return null==a?b.range._cache_key:(b.range._cache_key=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},w.RegexpFilter=function(a,b){var c={regexp:{}};return c.regexp[a]={value:b},{field:function(b){var d=c.regexp[a];return null==b?a:(delete c.regexp[a],a=b,c.regexp[b]=d,this)},value:function(b){return null==b?c.regexp[a].value:(c.regexp[a].value=b,this)},flags:function(b){return null==b?c.regexp[a].flags:(c.regexp[a].flags=b,this)},flagsValue:function(b){return null==b?c.regexp[a].flags_value:(c.regexp[a].flags_value=b,this)},name:function(a){return null==a?c.regexp._name:(c.regexp._name=a,this)},cache:function(a){return null==a?c.regexp._cache:(c.regexp._cache=a,this)},cacheKey:function(a){return null==a?c.regexp._cache_key:(c.regexp._cache_key=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"filter"},_self:function(){return c}}},w.ScriptFilter=function(a){var b={script:{script:a}};return{script:function(a){return null==a?b.script.script:(b.script.script=a,this)},params:function(a){return null==a?b.script.params:(b.script.params=a,this)},lang:function(a){return null==a?b.script.lang:(b.script.lang=a,this)},name:function(a){return null==a?b.script._name:(b.script._name=a,this)},cache:function(a){return null==a?b.script._cache:(b.script._cache=a,this)},cacheKey:function(a){return null==a?b.script._cache_key:(b.script._cache_key=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},w.TermFilter=function(a,b){var c={term:{}};return c.term[a]=b,{field:function(b){var d=c.term[a];return null==b?a:(delete c.term[a],a=b,c.term[a]=d,this)},term:function(b){return null==b?c.term[a]:(c.term[a]=b,this)},name:function(a){return null==a?c.term._name:(c.term._name=a,this)},cache:function(a){return null==a?c.term._cache:(c.term._cache=a,this)},cacheKey:function(a){return null==a?c.term._cache_key:(c.term._cache_key=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"filter"},_self:function(){return c}}},w.TermsFilter=function(a,b){var c={terms:{}},d=function(){g(c.terms[a])||(c.terms[a]=[])},e=function(){g(c.terms[a])&&(c.terms[a]={})};return c.terms[a]=g(b)?b:[b],{field:function(b){var d=c.terms[a];return null==b?a:(delete c.terms[a],a=b,c.terms[b]=d,this)},terms:function(b){return d(),null==b?c.terms[a]:(g(b)?c.terms[a]=b:c.terms[a].push(b),this)},index:function(b){return e(),null==b?c.terms[a].index:(c.terms[a].index=b,this)},type:function(b){return e(),null==b?c.terms[a].type:(c.terms[a].type=b,this)},id:function(b){return e(),null==b?c.terms[a].id:(c.terms[a].id=b,this)},path:function(b){return e(),null==b?c.terms[a].path:(c.terms[a].path=b,this)},execution:function(a){return null==a?c.terms.execution:(a=a.toLowerCase(),("plain"===a||"bool"===a||"bool_nocache"===a||"and"===a||"and_nocache"===a||"or"===a||"or_nocache"===a)&&(c.terms.execution=a),this)},name:function(a){return null==a?c.terms._name:(c.terms._name=a,this)},cache:function(a){return null==a?c.terms._cache:(c.terms._cache=a,this)},cacheKey:function(a){return null==a?c.terms._cache_key:(c.terms._cache_key=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"filter"},_self:function(){return c}}},w.TypeFilter=function(a){var b={type:{value:a}};return{type:function(a){return null==a?b.type.value:(b.type.value=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"filter"},_self:function(){return b}}},w.Document=function(a,b,c){var d={},j=["upsert","source","script","lang","params"];return{index:function(b){return null==b?a:(a=b,this)},type:function(a){return null==a?b:(b=a,this)},id:function(a){return null==a?c:(c=a,this)},routing:function(a){return null==a?d.routing:(d.routing=a,this)},parent:function(a){return null==a?d.parent:(d.parent=a,this)},timestamp:function(a){return null==a?d.timestamp:(d.timestamp=a,this)},ttl:function(a){return null==a?d.ttl:(d.ttl=a,this)},timeout:function(a){return null==a?d.timeout:(d.timeout=a,this)},refresh:function(a){return null==a?d.refresh:(d.refresh=a,this)},version:function(a){return null==a?d.version:(d.version=a,this)},versionType:function(a){return null==a?d.version_type:(a=a.toLowerCase(),("internal"===a||"external"===a)&&(d.version_type=a),this)},percolate:function(a){return null==a?d.percolate:(d.percolate=a,this)},opType:function(a){return null==a?d.op_type:(a=a.toLowerCase(),("index"===a||"create"===a)&&(d.op_type=a),this)},replication:function(a){return null==a?d.replication:(a=a.toLowerCase(),("async"===a||"sync"===a||"default"===a)&&(d.replication=a),this)},consistency:function(a){return null==a?d.consistency:(a=a.toLowerCase(),("default"===a||"one"===a||"quorum"===a||"all"===a)&&(d.consistency=a),this)},preference:function(a){return null==a?d.preference:(d.preference=a,this)},realtime:function(a){return null==a?d.realtime:(d.realtime=a,this)},fields:function(a){if(null==d.fields&&(d.fields=[]),null==a)return d.fields;if(i(a))d.fields.push(a);else{if(!g(a))throw new TypeError("Argument must be string or array");d.fields=a}return this},script:function(a){return null==a?d.script:(d.script=a,this)},lang:function(a){return null==a?d.lang:(d.lang=a,this)},params:function(a){if(null==a)return d.params;if(!h(a))throw new TypeError("Argument must be an object");return d.params=a,this},retryOnConflict:function(a){return null==a?d.retry_on_conflict:(d.retry_on_conflict=a,this)},upsert:function(a){if(null==a)return d.upsert;if(!h(a))throw new TypeError("Argument must be an object");return d.upsert=a,this},source:function(a){if(null==a)return d.source;if(!h(a))throw new TypeError("Argument must be an object");return d.source=a,this},toString:function(){return JSON.stringify(d)},_type:function(){return"document"},_self:function(){return d},doGet:function(f,g){if(null==w.client)throw new Error("No Client Set");if(null==a||null==b||null==c)throw new Error("Index, Type, and ID must be set");var h="/"+a+"/"+b+"/"+c;return w.client.get(h,e(d,j),f,g)},doIndex:function(e,g){if(null==w.client)throw new Error("No Client Set");if(null==a||null==b)throw new Error("Index and Type must be set");if(null==d.source)throw new Error("No source document found");var h="/"+a+"/"+b,i=JSON.stringify(d.source),k=f(d,j);return null!=c&&(h=h+"/"+c),""!==k&&(h=h+"?"+k),null==c?w.client.post(h,i,e,g):w.client.put(h,i,e,g)},doUpdate:function(e,g){if(null==w.client)throw new Error("No Client Set");if(null==a||null==b||null==c)throw new Error("Index, Type, and ID must be set");if(null==d.script&&null==d.source)throw new Error("Update script or document required");var h="/"+a+"/"+b+"/"+c+"/_update",i={},k=f(d,j);return""!==k&&(h=h+"?"+k),null!=d.script&&(i.script=d.script),null!=d.lang&&(i.lang=d.lang),null!=d.params&&(i.params=d.params),null!=d.upsert&&(i.upsert=d.upsert),null!=d.source&&(i.doc=d.source),w.client.post(h,JSON.stringify(i),e,g)},doDelete:function(e,g){if(null==w.client)throw new Error("No Client Set");if(null==a||null==b||null==c)throw new Error("Index, Type, and ID must be set");var h="/"+a+"/"+b+"/"+c,i=f(d,j);return""!==i&&(h=h+"?"+i),w.client.del(h,"",e,g)}}},w.BoolQuery=function(){var a={bool:{}};return{must:function(b){var c,d;if(null==a.bool.must&&(a.bool.must=[]),null==b)return a.bool.must;if(l(b))a.bool.must.push(b._self());else{if(!g(b))throw new TypeError("Argument must be a Query or array of Queries");for(a.bool.must=[],c=0,d=b.length;d>c;c++){if(!l(b[c]))throw new TypeError("Argument must be an array of Queries");a.bool.must.push(b[c]._self())}}return this},mustNot:function(b){var c,d;if(null==a.bool.must_not&&(a.bool.must_not=[]),null==b)return a.bool.must_not;if(l(b))a.bool.must_not.push(b._self());else{if(!g(b))throw new TypeError("Argument must be a Query or array of Queries");for(a.bool.must_not=[],c=0,d=b.length;d>c;c++){if(!l(b[c]))throw new TypeError("Argument must be an array of Queries");a.bool.must_not.push(b[c]._self())}}return this},should:function(b){var c,d;if(null==a.bool.should&&(a.bool.should=[]),null==b)return a.bool.should;if(l(b))a.bool.should.push(b._self());else{if(!g(b))throw new TypeError("Argument must be a Query or array of Queries");for(a.bool.should=[],c=0,d=b.length;d>c;c++){if(!l(b[c]))throw new TypeError("Argument must be an array of Queries");a.bool.should.push(b[c]._self())}}return this},boost:function(b){return null==b?a.bool.boost:(a.bool.boost=b,this)},disableCoord:function(b){return null==b?a.bool.disable_coord:(a.bool.disable_coord=b,this)},minimumNumberShouldMatch:function(b){return null==b?a.bool.minimum_number_should_match:(a.bool.minimum_number_should_match=b,this)},toString:function(){return JSON.stringify(a)},_type:function(){return"query"},_self:function(){return a}}},w.BoostingQuery=function(a,b,c){if(!l(a)||!l(b))throw new TypeError("Arguments must be Queries");var d={boosting:{positive:a._self(),negative:b._self(),negative_boost:c}};return{positive:function(a){if(null==a)return d.boosting.positive;if(!l(a))throw new TypeError("Argument must be a Query");return d.boosting.positive=a._self(),this},negative:function(a){if(null==a)return d.boosting.negative;if(!l(a))throw new TypeError("Argument must be a Query");return d.boosting.negative=a._self(),this},negativeBoost:function(a){return null==a?d.boosting.negative_boost:(d.boosting.negative_boost=a,this)},boost:function(a){return null==a?d.boosting.boost:(d.boosting.boost=a,this)},toString:function(){return JSON.stringify(d)},_type:function(){return"query"},_self:function(){return d}}},w.CommonTermsQuery=function(a,b){var c={common:{}};return null==a&&(a="no_field_set"),c.common[a]={},null!=b&&(c.common[a].query=b),{field:function(b){var d=c.common[a];return null==b?a:(delete c.common[a],a=b,c.common[b]=d,this)},query:function(b){return null==b?c.common[a].query:(c.common[a].query=b,this)},analyzer:function(b){return null==b?c.common[a].analyzer:(c.common[a].analyzer=b,this)},disableCoords:function(b){return null==b?c.common[a].disable_coords:(c.common[a].disable_coords=b,this)},cutoffFrequency:function(b){return null==b?c.common[a].cutoff_frequency:(c.common[a].cutoff_frequency=b,this)},highFreqOperator:function(b){return null==b?c.common[a].high_freq_operator:(b=b.toLowerCase(),("and"===b||"or"===b)&&(c.common[a].high_freq_operator=b),this)},lowFreqOperator:function(b){return null==b?c.common[a].low_freq_operator:(b=b.toLowerCase(),("and"===b||"or"===b)&&(c.common[a].low_freq_operator=b),this)},minimumShouldMatch:function(b){return null==b?c.common[a].minimum_should_match:(c.common[a].minimum_should_match=b,this)},boost:function(b){return null==b?c.common[a].boost:(c.common[a].boost=b,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},w.ConstantScoreQuery=function(){var a={constant_score:{}};return{query:function(b){if(null==b)return a.constant_score.query;if(!l(b))throw new TypeError("Argument must be a Query");return a.constant_score.query=b._self(),this},filter:function(b){if(null==b)return a.constant_score.filter;if(!n(b))throw new TypeError("Argument must be a Filter");return a.constant_score.filter=b._self(),this},cache:function(b){return null==b?a.constant_score._cache:(a.constant_score._cache=b,this)},cacheKey:function(b){return null==b?a.constant_score._cache_key:(a.constant_score._cache_key=b,this)},boost:function(b){return null==b?a.constant_score.boost:(a.constant_score.boost=b,this)},toString:function(){return JSON.stringify(a)},_type:function(){return"query"},_self:function(){return a}}},w.CustomBoostFactorQuery=function(a){if(!l(a))throw new TypeError("Argument must be a Query");var b={custom_boost_factor:{query:a._self()}};return{query:function(a){if(null==a)return b.custom_boost_factor.query;if(!l(a))throw new TypeError("Argument must be a Query");return b.custom_boost_factor.query=a._self(),this},boostFactor:function(a){return null==a?b.custom_boost_factor.boost_factor:(b.custom_boost_factor.boost_factor=a,this)},boost:function(a){return null==a?b.custom_boost_factor.boost:(b.custom_boost_factor.boost=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"query"},_self:function(){return b}}},w.CustomFiltersScoreQuery=function(a,c){if(!l(a))throw new TypeError("Argument must be a Query");var d={custom_filters_score:{query:a._self(),filters:[]}},e=function(a){var b=null;return a.filter&&n(a.filter)&&(b={filter:a.filter._self()},a.boost?b.boost=a.boost:a.script?b.script=a.script:b=null),b};return b(g(c)?c:[c],function(a){var b=e(a);null!==b&&d.custom_filters_score.filters.push(b)}),{query:function(a){if(null==a)return d.custom_filters_score.query;if(!l(a))throw new TypeError("Argument must be a Query");return d.custom_filters_score.query=a._self(),this},filters:function(a){return null==a?d.custom_filters_score.filters:(g(a)&&(d.custom_filters_score.filters=[]),b(g(a)?a:[a],function(a){var b=e(a);null!==b&&d.custom_filters_score.filters.push(b)}),this)},scoreMode:function(a){return null==a?d.custom_filters_score.score_mode:(a=a.toLowerCase(),("first"===a||"min"===a||"max"===a||"total"===a||"avg"===a||"multiply"===a)&&(d.custom_filters_score.score_mode=a),this)},params:function(a){return null==a?d.custom_filters_score.params:(d.custom_filters_score.params=a,this)},lang:function(a){return null==a?d.custom_filters_score.lang:(d.custom_filters_score.lang=a,this)},maxBoost:function(a){return null==a?d.custom_filters_score.max_boost:(d.custom_filters_score.max_boost=a,this)},boost:function(a){return null==a?d.custom_filters_score.boost:(d.custom_filters_score.boost=a,this)},toString:function(){return JSON.stringify(d)},_type:function(){return"query"},_self:function(){return d}}},w.CustomScoreQuery=function(a,b){if(!l(a))throw new TypeError("Argument must be a Query");var c={custom_score:{query:a._self(),script:b}};return{query:function(a){if(null==a)return c.custom_score.query;if(!l(a))throw new TypeError("Argument must be a Query");return c.custom_score.query=a._self(),this},script:function(a){return null==a?c.custom_score.script:(c.custom_score.script=a,this)},params:function(a){return null==a?c.custom_score.params:(c.custom_score.params=a,this)},lang:function(a){return null==a?c.custom_score.lang:(c.custom_score.lang=a,this)},boost:function(a){return null==a?c.custom_score.boost:(c.custom_score.boost=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},w.DisMaxQuery=function(){var a={dis_max:{}};return{queries:function(b){var c,d;if(null==b)return a.dis_max.queries;if(null==a.dis_max.queries&&(a.dis_max.queries=[]),l(b))a.dis_max.queries.push(b._self());else{if(!g(b))throw new TypeError("Argument must be a Query or array of Queries");for(a.dis_max.queries=[],c=0,d=b.length;d>c;c++){if(!l(b[c]))throw new TypeError("Argument must be array of Queries");a.dis_max.queries.push(b[c]._self())}}return this},boost:function(b){return null==b?a.dis_max.boost:(a.dis_max.boost=b,this)},tieBreaker:function(b){return null==b?a.dis_max.tie_breaker:(a.dis_max.tie_breaker=b,this)},toString:function(){return JSON.stringify(a)},_type:function(){return"query"},_self:function(){return a}}},w.FieldMaskingSpanQuery=function(a,b){if(!l(a))throw new TypeError("Argument must be a SpanQuery");var c={field_masking_span:{query:a._self(),field:b}};return{query:function(a){if(null==a)return c.field_masking_span.query;if(!l(a))throw new TypeError("Argument must be a SpanQuery");return c.field_masking_span.query=a._self(),this},field:function(a){return null==a?c.field_masking_span.field:(c.field_masking_span.field=a,this)},boost:function(a){return null==a?c.field_masking_span.boost:(c.field_masking_span.boost=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},w.FieldQuery=function(a,b){var c={field:{}};return c.field[a]={query:b},{field:function(b){var d=c.field[a];return null==b?a:(delete c.field[a],a=b,c.field[b]=d,this)},query:function(b){return null==b?c.field[a].query:(c.field[a].query=b,this)},defaultOperator:function(b){return null==b?c.field[a].default_operator:(b=b.toUpperCase(),("AND"===b||"OR"===b)&&(c.field[a].default_operator=b),this)},analyzer:function(b){return null==b?c.field[a].analyzer:(c.field[a].analyzer=b,this)},quoteAnalyzer:function(b){return null==b?c.field[a].quote_analyzer:(c.field[a].quote_analyzer=b,this)},autoGeneratePhraseQueries:function(b){return null==b?c.field[a].auto_generate_phrase_queries:(c.field[a].auto_generate_phrase_queries=b,this)},allowLeadingWildcard:function(b){return null==b?c.field[a].allow_leading_wildcard:(c.field[a].allow_leading_wildcard=b,this)},lowercaseExpandedTerms:function(b){return null==b?c.field[a].lowercase_expanded_terms:(c.field[a].lowercase_expanded_terms=b,this)},enablePositionIncrements:function(b){return null==b?c.field[a].enable_position_increments:(c.field[a].enable_position_increments=b,this)},fuzzyMinSim:function(b){return null==b?c.field[a].fuzzy_min_sim:(c.field[a].fuzzy_min_sim=b,this)},boost:function(b){return null==b?c.field[a].boost:(c.field[a].boost=b,this)},fuzzyPrefixLength:function(b){return null==b?c.field[a].fuzzy_prefix_length:(c.field[a].fuzzy_prefix_length=b,this)},fuzzyMaxExpansions:function(b){return null==b?c.field[a].fuzzy_max_expansions:(c.field[a].fuzzy_max_expansions=b,this)},fuzzyRewrite:function(b){return null==b?c.field[a].fuzzy_rewrite:(b=b.toLowerCase(),("constant_score_auto"===b||"scoring_boolean"===b||"constant_score_boolean"===b||"constant_score_filter"===b||0===b.indexOf("top_terms_boost_")||0===b.indexOf("top_terms_"))&&(c.field[a].fuzzy_rewrite=b),this)},rewrite:function(b){return null==b?c.field[a].rewrite:(b=b.toLowerCase(),("constant_score_auto"===b||"scoring_boolean"===b||"constant_score_boolean"===b||"constant_score_filter"===b||0===b.indexOf("top_terms_boost_")||0===b.indexOf("top_terms_"))&&(c.field[a].rewrite=b),this)},quoteFieldSuffix:function(b){return null==b?c.field[a].quote_field_suffix:(c.field[a].quote_field_suffix=b,this)},phraseSlop:function(b){return null==b?c.field[a].phrase_slop:(c.field[a].phrase_slop=b,this)},analyzeWildcard:function(b){return null==b?c.field[a].analyze_wildcard:(c.field[a].analyze_wildcard=b,this)},escape:function(b){return null==b?c.field[a].escape:(c.field[a].escape=b,this)},minimumShouldMatch:function(b){return null==b?c.field[a].minimum_should_match:(c.field[a].minimum_should_match=b,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},w.FilteredQuery=function(a,b){if(!l(a))throw new TypeError("Argument must be a Query");if(null!=b&&!n(b))throw new TypeError("Argument must be a Filter");var c={filtered:{query:a._self()}};return null!=b&&(c.filtered.filter=b._self()),{query:function(a){if(null==a)return c.filtered.query;if(!l(a))throw new TypeError("Argument must be a Query");return c.filtered.query=a._self(),this},filter:function(a){if(null==a)return c.filtered.filter;if(!n(a))throw new TypeError("Argument must be a Filter");return c.filtered.filter=a._self(),this},strategy:function(a){return null==a?c.filtered.strategy:(a=a.toLowerCase(),("query_first"===a||"random_access_always"===a||"leap_frog"===a||"leap_frog_filter_first"===a||0===a.indexOf("random_access_"))&&(c.filtered.strategy=a),this)},cache:function(a){return null==a?c.filtered._cache:(c.filtered._cache=a,this)},cacheKey:function(a){return null==a?c.filtered._cache_key:(c.filtered._cache_key=a,this)},boost:function(a){return null==a?c.filtered.boost:(c.filtered.boost=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},w.FuzzyLikeThisFieldQuery=function(a,b){var c={flt_field:{}};return c.flt_field[a]={like_text:b},{field:function(b){var d=c.flt_field[a];return null==b?a:(delete c.flt_field[a],a=b,c.flt_field[b]=d,this)},likeText:function(b){return null==b?c.flt_field[a].like_text:(c.flt_field[a].like_text=b,this)},ignoreTf:function(b){return null==b?c.flt_field[a].ignore_tf:(c.flt_field[a].ignore_tf=b,this)},maxQueryTerms:function(b){return null==b?c.flt_field[a].max_query_terms:(c.flt_field[a].max_query_terms=b,this)},minSimilarity:function(b){return null==b?c.flt_field[a].min_similarity:(c.flt_field[a].min_similarity=b,this)},prefixLength:function(b){return null==b?c.flt_field[a].prefix_length:(c.flt_field[a].prefix_length=b,this)},analyzer:function(b){return null==b?c.flt_field[a].analyzer:(c.flt_field[a].analyzer=b,this)},boost:function(b){return null==b?c.flt_field[a].boost:(c.flt_field[a].boost=b,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},w.FuzzyLikeThisQuery=function(a){var b={flt:{like_text:a}};return{fields:function(a){if(null==b.flt.fields&&(b.flt.fields=[]),null==a)return b.flt.fields;if(i(a))b.flt.fields.push(a);else{if(!g(a))throw new TypeError("Argument must be a string or array");b.flt.fields=a}return this},likeText:function(a){return null==a?b.flt.like_text:(b.flt.like_text=a,this)},ignoreTf:function(a){return null==a?b.flt.ignore_tf:(b.flt.ignore_tf=a,this)},maxQueryTerms:function(a){return null==a?b.flt.max_query_terms:(b.flt.max_query_terms=a,this)},minSimilarity:function(a){return null==a?b.flt.min_similarity:(b.flt.min_similarity=a,this)},prefixLength:function(a){return null==a?b.flt.prefix_length:(b.flt.prefix_length=a,this)},analyzer:function(a){
return null==a?b.flt.analyzer:(b.flt.analyzer=a,this)},boost:function(a){return null==a?b.flt.boost:(b.flt.boost=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"query"},_self:function(){return b}}},w.FuzzyQuery=function(a,b){var c={fuzzy:{}};return c.fuzzy[a]={value:b},{field:function(b){var d=c.fuzzy[a];return null==b?a:(delete c.fuzzy[a],a=b,c.fuzzy[b]=d,this)},value:function(b){return null==b?c.fuzzy[a].value:(c.fuzzy[a].value=b,this)},transpositions:function(b){return null==b?c.fuzzy[a].transpositions:(c.fuzzy[a].transpositions=b,this)},maxExpansions:function(b){return null==b?c.fuzzy[a].max_expansions:(c.fuzzy[a].max_expansions=b,this)},minSimilarity:function(b){return null==b?c.fuzzy[a].min_similarity:(c.fuzzy[a].min_similarity=b,this)},prefixLength:function(b){return null==b?c.fuzzy[a].prefix_length:(c.fuzzy[a].prefix_length=b,this)},rewrite:function(b){return null==b?c.fuzzy[a].rewrite:(b=b.toLowerCase(),("constant_score_auto"===b||"scoring_boolean"===b||"constant_score_boolean"===b||"constant_score_filter"===b||0===b.indexOf("top_terms_boost_")||0===b.indexOf("top_terms_"))&&(c.fuzzy[a].rewrite=b),this)},boost:function(b){return null==b?c.fuzzy[a].boost:(c.fuzzy[a].boost=b,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},w.GeoShapeQuery=function(a){var b={geo_shape:{}};return b.geo_shape[a]={},{field:function(c){var d=b.geo_shape[a];return null==c?a:(delete b.geo_shape[a],a=c,b.geo_shape[c]=d,this)},shape:function(c){return null==c?b.geo_shape[a].shape:(null!=b.geo_shape[a].indexed_shape&&delete b.geo_shape[a].indexed_shape,b.geo_shape[a].shape=c._self(),this)},indexedShape:function(c){return null==c?b.geo_shape[a].indexed_shape:(null!=b.geo_shape[a].shape&&delete b.geo_shape[a].shape,b.geo_shape[a].indexed_shape=c._self(),this)},relation:function(c){return null==c?b.geo_shape[a].relation:(c=c.toLowerCase(),("intersects"===c||"disjoint"===c||"within"===c)&&(b.geo_shape[a].relation=c),this)},strategy:function(c){return null==c?b.geo_shape[a].strategy:(c=c.toLowerCase(),("recursive"===c||"term"===c)&&(b.geo_shape[a].strategy=c),this)},boost:function(c){return null==c?b.geo_shape[a].boost:(b.geo_shape[a].boost=c,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"query"},_self:function(){return b}}},w.HasChildQuery=function(a,b){if(!l(a))throw new TypeError("Argument must be a valid Query");var c={has_child:{query:a._self(),type:b}};return{query:function(a){if(null==a)return c.has_child.query;if(!l(a))throw new TypeError("Argument must be a valid Query");return c.has_child.query=a._self(),this},type:function(a){return null==a?c.has_child.type:(c.has_child.type=a,this)},scope:function(){return this},scoreType:function(a){return null==a?c.has_child.score_type:(a=a.toLowerCase(),("none"===a||"max"===a||"sum"===a||"avg"===a)&&(c.has_child.score_type=a),this)},scoreMode:function(a){return null==a?c.has_child.score_mode:(a=a.toLowerCase(),("none"===a||"max"===a||"sum"===a||"avg"===a)&&(c.has_child.score_mode=a),this)},boost:function(a){return null==a?c.has_child.boost:(c.has_child.boost=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},w.HasParentQuery=function(a,b){if(!l(a))throw new TypeError("Argument must be a Query");var c={has_parent:{query:a._self(),parent_type:b}};return{query:function(a){if(null==a)return c.has_parent.query;if(!l(a))throw new TypeError("Argument must be a Query");return c.has_parent.query=a._self(),this},parentType:function(a){return null==a?c.has_parent.parent_type:(c.has_parent.parent_type=a,this)},scope:function(){return this},scoreType:function(a){return null==a?c.has_parent.score_type:(a=a.toLowerCase(),("none"===a||"score"===a)&&(c.has_parent.score_type=a),this)},scoreMode:function(a){return null==a?c.has_parent.score_mode:(a=a.toLowerCase(),("none"===a||"score"===a)&&(c.has_parent.score_mode=a),this)},boost:function(a){return null==a?c.has_parent.boost:(c.has_parent.boost=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},w.IdsQuery=function(a){var b={ids:{}};if(i(a))b.ids.values=[a];else{if(!g(a))throw new TypeError("Argument must be string or array");b.ids.values=a}return{values:function(a){if(null==a)return b.ids.values;if(i(a))b.ids.values.push(a);else{if(!g(a))throw new TypeError("Argument must be string or array");b.ids.values=a}return this},type:function(a){if(null==b.ids.type&&(b.ids.type=[]),null==a)return b.ids.type;if(i(a))b.ids.type.push(a);else{if(!g(a))throw new TypeError("Argument must be string or array");b.ids.type=a}return this},boost:function(a){return null==a?b.ids.boost:(b.ids.boost=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"query"},_self:function(){return b}}},w.IndicesQuery=function(a,b){if(!l(a))throw new TypeError("Argument must be a Query");var c={indices:{query:a._self()}};if(i(b))c.indices.indices=[b];else{if(!g(b))throw new TypeError("Argument must be a string or array");c.indices.indices=b}return{indices:function(a){if(null==a)return c.indices.indices;if(i(a))c.indices.indices.push(a);else{if(!g(a))throw new TypeError("Argument must be a string or array");c.indices.indices=a}return this},query:function(a){if(null==a)return c.indices.query;if(!l(a))throw new TypeError("Argument must be a Query");return c.indices.query=a._self(),this},noMatchQuery:function(a){if(null==a)return c.indices.no_match_query;if(i(a))("none"===(a=a.toLowerCase())||"all"===a)&&(c.indices.no_match_query=a);else{if(!l(a))throw new TypeError("Argument must be string or Query");c.indices.no_match_query=a._self()}return this},boost:function(a){return null==a?c.indices.boost:(c.indices.boost=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},w.MatchAllQuery=function(){var a={match_all:{}};return{boost:function(b){return null==b?a.match_all.boost:(a.match_all.boost=b,this)},toString:function(){return JSON.stringify(a)},_type:function(){return"query"},_self:function(){return a}}},w.MatchQuery=function(a,b){var c={match:{}};return c.match[a]={query:b},{boost:function(b){return null==b?c.match[a].boost:(c.match[a].boost=b,this)},query:function(b){return null==b?c.match[a].query:(c.match[a].query=b,this)},type:function(b){return null==b?c.match[a].type:(b=b.toLowerCase(),("boolean"===b||"phrase"===b||"phrase_prefix"===b)&&(c.match[a].type=b),this)},fuzziness:function(b){return null==b?c.match[a].fuzziness:(c.match[a].fuzziness=b,this)},cutoffFrequency:function(b){return null==b?c.match[a].cutoff_frequency:(c.match[a].cutoff_frequency=b,this)},prefixLength:function(b){return null==b?c.match[a].prefix_length:(c.match[a].prefix_length=b,this)},maxExpansions:function(b){return null==b?c.match[a].max_expansions:(c.match[a].max_expansions=b,this)},operator:function(b){return null==b?c.match[a].operator:(b=b.toLowerCase(),("and"===b||"or"===b)&&(c.match[a].operator=b),this)},slop:function(b){return null==b?c.match[a].slop:(c.match[a].slop=b,this)},analyzer:function(b){return null==b?c.match[a].analyzer:(c.match[a].analyzer=b,this)},minimumShouldMatch:function(b){return null==b?c.match[a].minimum_should_match:(c.match[a].minimum_should_match=b,this)},rewrite:function(b){return null==b?c.match[a].rewrite:(b=b.toLowerCase(),("constant_score_auto"===b||"scoring_boolean"===b||"constant_score_boolean"===b||"constant_score_filter"===b||0===b.indexOf("top_terms_boost_")||0===b.indexOf("top_terms_"))&&(c.match[a].rewrite=b),this)},fuzzyRewrite:function(b){return null==b?c.match[a].fuzzy_rewrite:(b=b.toLowerCase(),("constant_score_auto"===b||"scoring_boolean"===b||"constant_score_boolean"===b||"constant_score_filter"===b||0===b.indexOf("top_terms_boost_")||0===b.indexOf("top_terms_"))&&(c.match[a].fuzzy_rewrite=b),this)},fuzzyTranspositions:function(b){return null==b?c.match[a].fuzzy_transpositions:(c.match[a].fuzzy_transpositions=b,this)},lenient:function(b){return null==b?c.match[a].lenient:(c.match[a].lenient=b,this)},zeroTermsQuery:function(b){return null==b?c.match[a].zero_terms_query:(b=b.toLowerCase(),("all"===b||"none"===b)&&(c.match[a].zero_terms_query=b),this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},w.MoreLikeThisFieldQuery=function(a,b){var c={mlt_field:{}};return c.mlt_field[a]={like_text:b},{field:function(b){var d=c.mlt_field[a];return null==b?a:(delete c.mlt_field[a],a=b,c.mlt_field[b]=d,this)},likeText:function(b){return null==b?c.mlt_field[a].like_text:(c.mlt_field[a].like_text=b,this)},percentTermsToMatch:function(b){return null==b?c.mlt_field[a].percent_terms_to_match:(c.mlt_field[a].percent_terms_to_match=b,this)},minTermFreq:function(b){return null==b?c.mlt_field[a].min_term_freq:(c.mlt_field[a].min_term_freq=b,this)},maxQueryTerms:function(b){return null==b?c.mlt_field[a].max_query_terms:(c.mlt_field[a].max_query_terms=b,this)},stopWords:function(b){return null==b?c.mlt_field[a].stop_words:(c.mlt_field[a].stop_words=b,this)},minDocFreq:function(b){return null==b?c.mlt_field[a].min_doc_freq:(c.mlt_field[a].min_doc_freq=b,this)},maxDocFreq:function(b){return null==b?c.mlt_field[a].max_doc_freq:(c.mlt_field[a].max_doc_freq=b,this)},minWordLen:function(b){return null==b?c.mlt_field[a].min_word_len:(c.mlt_field[a].min_word_len=b,this)},maxWordLen:function(b){return null==b?c.mlt_field[a].max_word_len:(c.mlt_field[a].max_word_len=b,this)},analyzer:function(b){return null==b?c.mlt_field[a].analyzer:(c.mlt_field[a].analyzer=b,this)},boostTerms:function(b){return null==b?c.mlt_field[a].boost_terms:(c.mlt_field[a].boost_terms=b,this)},boost:function(b){return null==b?c.mlt_field[a].boost:(c.mlt_field[a].boost=b,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},w.MoreLikeThisQuery=function(a,b){var c={mlt:{like_text:b,fields:[]}};if(i(a))c.mlt.fields.push(a);else{if(!g(a))throw new TypeError("Argument must be string or array");c.mlt.fields=a}return{fields:function(a){if(null==a)return c.mlt.fields;if(i(a))c.mlt.fields.push(a);else{if(!g(a))throw new TypeError("Argument must be a string or array");c.mlt.fields=a}return this},likeText:function(a){return null==a?c.mlt.like_text:(c.mlt.like_text=a,this)},percentTermsToMatch:function(a){return null==a?c.mlt.percent_terms_to_match:(c.mlt.percent_terms_to_match=a,this)},minTermFreq:function(a){return null==a?c.mlt.min_term_freq:(c.mlt.min_term_freq=a,this)},maxQueryTerms:function(a){return null==a?c.mlt.max_query_terms:(c.mlt.max_query_terms=a,this)},stopWords:function(a){return null==a?c.mlt.stop_words:(c.mlt.stop_words=a,this)},minDocFreq:function(a){return null==a?c.mlt.min_doc_freq:(c.mlt.min_doc_freq=a,this)},maxDocFreq:function(a){return null==a?c.mlt.max_doc_freq:(c.mlt.max_doc_freq=a,this)},minWordLen:function(a){return null==a?c.mlt.min_word_len:(c.mlt.min_word_len=a,this)},maxWordLen:function(a){return null==a?c.mlt.max_word_len:(c.mlt.max_word_len=a,this)},analyzer:function(a){return null==a?c.mlt.analyzer:(c.mlt.analyzer=a,this)},boostTerms:function(a){return null==a?c.mlt.boost_terms:(c.mlt.boost_terms=a,this)},boost:function(a){return null==a?c.mlt.boost:(c.mlt.boost=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},w.MultiMatchQuery=function(a,b){var c={multi_match:{query:b,fields:[]}};if(i(a))c.multi_match.fields.push(a);else{if(!g(a))throw new TypeError("Argument must be string or array");c.multi_match.fields=a}return{fields:function(a){if(null==a)return c.multi_match.fields;if(i(a))c.multi_match.fields.push(a);else{if(!g(a))throw new TypeError("Argument must be string or array");c.multi_match.fields=a}return this},useDisMax:function(a){return null==a?c.multi_match.use_dis_max:(c.multi_match.use_dis_max=a,this)},tieBreaker:function(a){return null==a?c.multi_match.tie_breaker:(c.multi_match.tie_breaker=a,this)},cutoffFrequency:function(a){return null==a?c.multi_match.cutoff_frequency:(c.multi_match.cutoff_frequency=a,this)},minimumShouldMatch:function(a){return null==a?c.multi_match.minimum_should_match:(c.multi_match.minimum_should_match=a,this)},rewrite:function(a){return null==a?c.multi_match.rewrite:(a=a.toLowerCase(),("constant_score_auto"===a||"scoring_boolean"===a||"constant_score_boolean"===a||"constant_score_filter"===a||0===a.indexOf("top_terms_boost_")||0===a.indexOf("top_terms_"))&&(c.multi_match.rewrite=a),this)},fuzzyRewrite:function(a){return null==a?c.multi_match.fuzzy_rewrite:(a=a.toLowerCase(),("constant_score_auto"===a||"scoring_boolean"===a||"constant_score_boolean"===a||"constant_score_filter"===a||0===a.indexOf("top_terms_boost_")||0===a.indexOf("top_terms_"))&&(c.multi_match.fuzzy_rewrite=a),this)},lenient:function(a){return null==a?c.multi_match.lenient:(c.multi_match.lenient=a,this)},boost:function(a){return null==a?c.multi_match.boost:(c.multi_match.boost=a,this)},query:function(a){return null==a?c.multi_match.query:(c.multi_match.query=a,this)},type:function(a){return null==a?c.multi_match.type:(a=a.toLowerCase(),("boolean"===a||"phrase"===a||"phrase_prefix"===a)&&(c.multi_match.type=a),this)},fuzziness:function(a){return null==a?c.multi_match.fuzziness:(c.multi_match.fuzziness=a,this)},prefixLength:function(a){return null==a?c.multi_match.prefix_length:(c.multi_match.prefix_length=a,this)},maxExpansions:function(a){return null==a?c.multi_match.max_expansions:(c.multi_match.max_expansions=a,this)},operator:function(a){return null==a?c.multi_match.operator:(a=a.toLowerCase(),("and"===a||"or"===a)&&(c.multi_match.operator=a),this)},slop:function(a){return null==a?c.multi_match.slop:(c.multi_match.slop=a,this)},analyzer:function(a){return null==a?c.multi_match.analyzer:(c.multi_match.analyzer=a,this)},zeroTermsQuery:function(a){return null==a?c.multi_match.zero_terms_query:(a=a.toLowerCase(),("all"===a||"none"===a)&&(c.multi_match.zero_terms_query=a),this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},w.NestedQuery=function(a){var b={nested:{path:a}};return{path:function(a){return null==a?b.nested.path:(b.nested.path=a,this)},query:function(a){if(null==a)return b.nested.query;if(!l(a))throw new TypeError("Argument must be a Query");return b.nested.query=a._self(),this},filter:function(a){if(null==a)return b.nested.filter;if(!n(a))throw new TypeError("Argument must be a Filter");return b.nested.filter=a._self(),this},scoreMode:function(a){return null==a?b.nested.score_mode:(a=a.toLowerCase(),("avg"===a||"total"===a||"max"===a||"none"===a||"sum"===a)&&(b.nested.score_mode=a),this)},scope:function(){return this},boost:function(a){return null==a?b.nested.boost:(b.nested.boost=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"query"},_self:function(){return b}}},w.PrefixQuery=function(a,b){var c={prefix:{}};return c.prefix[a]={value:b},{field:function(b){var d=c.prefix[a];return null==b?a:(delete c.prefix[a],a=b,c.prefix[b]=d,this)},value:function(b){return null==b?c.prefix[a].value:(c.prefix[a].value=b,this)},rewrite:function(b){return null==b?c.prefix[a].rewrite:(b=b.toLowerCase(),("constant_score_auto"===b||"scoring_boolean"===b||"constant_score_boolean"===b||"constant_score_filter"===b||0===b.indexOf("top_terms_boost_")||0===b.indexOf("top_terms_"))&&(c.prefix[a].rewrite=b),this)},boost:function(b){return null==b?c.prefix[a].boost:(c.prefix[a].boost=b,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},w.QueryStringQuery=function(a){var b={query_string:{}};return b.query_string.query=a,{query:function(a){return null==a?b.query_string.query:(b.query_string.query=a,this)},defaultField:function(a){return null==a?b.query_string.default_field:(b.query_string.default_field=a,this)},fields:function(a){if(null==b.query_string.fields&&(b.query_string.fields=[]),null==a)return b.query_string.fields;if(i(a))b.query_string.fields.push(a);else{if(!g(a))throw new TypeError("Argument must be a string or array");b.query_string.fields=a}return this},useDisMax:function(a){return null==a?b.query_string.use_dis_max:(b.query_string.use_dis_max=a,this)},defaultOperator:function(a){return null==a?b.query_string.default_operator:(a=a.toUpperCase(),("AND"===a||"OR"===a)&&(b.query_string.default_operator=a),this)},analyzer:function(a){return null==a?b.query_string.analyzer:(b.query_string.analyzer=a,this)},quoteAnalyzer:function(a){return null==a?b.query_string.quote_analyzer:(b.query_string.quote_analyzer=a,this)},allowLeadingWildcard:function(a){return null==a?b.query_string.allow_leading_wildcard:(b.query_string.allow_leading_wildcard=a,this)},lowercaseExpandedTerms:function(a){return null==a?b.query_string.lowercase_expanded_terms:(b.query_string.lowercase_expanded_terms=a,this)},enablePositionIncrements:function(a){return null==a?b.query_string.enable_position_increments:(b.query_string.enable_position_increments=a,this)},fuzzyPrefixLength:function(a){return null==a?b.query_string.fuzzy_prefix_length:(b.query_string.fuzzy_prefix_length=a,this)},fuzzyMinSim:function(a){return null==a?b.query_string.fuzzy_min_sim:(b.query_string.fuzzy_min_sim=a,this)},phraseSlop:function(a){return null==a?b.query_string.phrase_slop:(b.query_string.phrase_slop=a,this)},boost:function(a){return null==a?b.query_string.boost:(b.query_string.boost=a,this)},analyzeWildcard:function(a){return null==a?b.query_string.analyze_wildcard:(b.query_string.analyze_wildcard=a,this)},autoGeneratePhraseQueries:function(a){return null==a?b.query_string.auto_generate_phrase_queries:(b.query_string.auto_generate_phrase_queries=a,this)},minimumShouldMatch:function(a){return null==a?b.query_string.minimum_should_match:(b.query_string.minimum_should_match=a,this)},tieBreaker:function(a){return null==a?b.query_string.tie_breaker:(b.query_string.tie_breaker=a,this)},escape:function(a){return null==a?b.query_string.escape:(b.query_string.escape=a,this)},fuzzyMaxExpansions:function(a){return null==a?b.query_string.fuzzy_max_expansions:(b.query_string.fuzzy_max_expansions=a,this)},fuzzyRewrite:function(a){return null==a?b.query_string.fuzzy_rewrite:(a=a.toLowerCase(),("constant_score_auto"===a||"scoring_boolean"===a||"constant_score_boolean"===a||"constant_score_filter"===a||0===a.indexOf("top_terms_boost_")||0===a.indexOf("top_terms_"))&&(b.query_string.fuzzy_rewrite=a),this)},rewrite:function(a){return null==a?b.query_string.rewrite:(a=a.toLowerCase(),("constant_score_auto"===a||"scoring_boolean"===a||"constant_score_boolean"===a||"constant_score_filter"===a||0===a.indexOf("top_terms_boost_")||0===a.indexOf("top_terms_"))&&(b.query_string.rewrite=a),this)},quoteFieldSuffix:function(a){return null==a?b.query_string.quote_field_suffix:(b.query_string.quote_field_suffix=a,this)},lenient:function(a){return null==a?b.query_string.lenient:(b.query_string.lenient=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"query"},_self:function(){return b}}},w.RangeQuery=function(a){var b={range:{}};return b.range[a]={},{field:function(c){var d=b.range[a];return null==c?a:(delete b.range[a],a=c,b.range[c]=d,this)},from:function(c){return null==c?b.range[a].from:(b.range[a].from=c,this)},to:function(c){return null==c?b.range[a].to:(b.range[a].to=c,this)},includeLower:function(c){return null==c?b.range[a].include_lower:(b.range[a].include_lower=c,this)},includeUpper:function(c){return null==c?b.range[a].include_upper:(b.range[a].include_upper=c,this)},gt:function(c){return null==c?b.range[a].gt:(b.range[a].gt=c,this)},gte:function(c){return null==c?b.range[a].gte:(b.range[a].gte=c,this)},lt:function(c){return null==c?b.range[a].lt:(b.range[a].lt=c,this)},lte:function(c){return null==c?b.range[a].lte:(b.range[a].lte=c,this)},boost:function(c){return null==c?b.range[a].boost:(b.range[a].boost=c,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"query"},_self:function(){return b}}},w.RegexpQuery=function(a,b){var c={regexp:{}};return c.regexp[a]={value:b},{field:function(b){var d=c.regexp[a];return null==b?a:(delete c.regexp[a],a=b,c.regexp[b]=d,this)},value:function(b){return null==b?c.regexp[a].value:(c.regexp[a].value=b,this)},flags:function(b){return null==b?c.regexp[a].flags:(c.regexp[a].flags=b,this)},flagsValue:function(b){return null==b?c.regexp[a].flags_value:(c.regexp[a].flags_value=b,this)},rewrite:function(b){return null==b?c.regexp[a].rewrite:(b=b.toLowerCase(),("constant_score_auto"===b||"scoring_boolean"===b||"constant_score_boolean"===b||"constant_score_filter"===b||0===b.indexOf("top_terms_boost_")||0===b.indexOf("top_terms_"))&&(c.regexp[a].rewrite=b),this)},boost:function(b){return null==b?c.regexp[a].boost:(c.regexp[a].boost=b,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},w.SpanFirstQuery=function(a,b){if(!l(a))throw new TypeError("Argument must be a SpanQuery");var c={span_first:{match:a._self(),end:b}};return{match:function(a){if(null==a)return c.span_first.match;if(!l(a))throw new TypeError("Argument must be a SpanQuery");return c.span_first.match=a._self(),this},end:function(a){return null==a?c.span_first.end:(c.span_first.end=a,this)},boost:function(a){return null==a?c.span_first.boost:(c.span_first.boost=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},w.SpanMultiTermQuery=function(a){if(null!=a&&!l(a))throw new TypeError("Argument must be a MultiTermQuery");var b={span_multi:{match:{}}};return null!=a&&(b.span_multi.match=a._self()),{match:function(a){if(null==a)return b.span_multi.match;if(!l(a))throw new TypeError("Argument must be a MultiTermQuery");return b.span_multi.match=a._self(),this},toString:function(){return JSON.stringify(b)},_type:function(){return"query"},_self:function(){return b}}},w.SpanNearQuery=function(a,b){var c,d,e={span_near:{clauses:[],slop:b}};if(l(a))e.span_near.clauses.push(a._self());else{if(!g(a))throw new TypeError("Argument must be SpanQuery or array of SpanQueries");for(c=0,d=a.length;d>c;c++){if(!l(a[c]))throw new TypeError("Argument must be array of SpanQueries");e.span_near.clauses.push(a[c]._self())}}return{clauses:function(a){var b,c;if(null==a)return e.span_near.clauses;if(l(a))e.span_near.clauses.push(a._self());else{if(!g(a))throw new TypeError("Argument must be SpanQuery or array of SpanQueries");for(e.span_near.clauses=[],b=0,c=a.length;c>b;b++){if(!l(a[b]))throw new TypeError("Argument must be array of SpanQueries");e.span_near.clauses.push(a[b]._self())}}return this},slop:function(a){return null==a?e.span_near.slop:(e.span_near.slop=a,this)},inOrder:function(a){return null==a?e.span_near.in_order:(e.span_near.in_order=a,this)},collectPayloads:function(a){return null==a?e.span_near.collect_payloads:(e.span_near.collect_payloads=a,this)},boost:function(a){return null==a?e.span_near.boost:(e.span_near.boost=a,this)},toString:function(){return JSON.stringify(e)},_type:function(){return"query"},_self:function(){return e}}},w.SpanNotQuery=function(a,b){if(!l(a)||!l(b))throw new TypeError("Argument must be a SpanQuery");var c={span_not:{include:a._self(),exclude:b._self()}};return{include:function(a){if(null==a)return c.span_not.include;if(!l(a))throw new TypeError("Argument must be a SpanQuery");return c.span_not.include=a._self(),this},exclude:function(a){if(null==a)return c.span_not.exclude;if(!l(a))throw new TypeError("Argument must be a SpanQuery");return c.span_not.exclude=a._self(),this},boost:function(a){return null==a?c.span_not.boost:(c.span_not.boost=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},w.SpanOrQuery=function(a){var b,c,d={span_or:{clauses:[]}};if(l(a))d.span_or.clauses.push(a._self());else{if(!g(a))throw new TypeError("Argument must be SpanQuery or array of SpanQueries");for(b=0,c=a.length;c>b;b++){if(!l(a[b]))throw new TypeError("Argument must be array of SpanQueries");d.span_or.clauses.push(a[b]._self())}}return{clauses:function(a){var b,c;if(null==a)return d.span_or.clauses;if(l(a))d.span_or.clauses.push(a._self());else{if(!g(a))throw new TypeError("Argument must be SpanQuery or array of SpanQueries");for(d.span_or.clauses=[],b=0,c=a.length;c>b;b++){if(!l(a[b]))throw new TypeError("Argument must be array of SpanQueries");d.span_or.clauses.push(a[b]._self())}}return this},boost:function(a){return null==a?d.span_or.boost:(d.span_or.boost=a,this)},toString:function(){return JSON.stringify(d)},_type:function(){return"query"},_self:function(){return d}}},w.SpanTermQuery=function(a,b){var c={span_term:{}};return c.span_term[a]={term:b},{field:function(b){var d=c.span_term[a];return null==b?a:(delete c.span_term[a],a=b,c.span_term[b]=d,this)},term:function(b){return null==b?c.span_term[a].term:(c.span_term[a].term=b,this)},boost:function(b){return null==b?c.span_term[a].boost:(c.span_term[a].boost=b,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},w.TermQuery=function(a,b){var c={term:{}};return c.term[a]={term:b},{field:function(b){var d=c.term[a];return null==b?a:(delete c.term[a],a=b,c.term[b]=d,this)},term:function(b){return null==b?c.term[a].term:(c.term[a].term=b,this)},boost:function(b){return null==b?c.term[a].boost:(c.term[a].boost=b,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},w.TermsQuery=function(a,b){var c={terms:{}};if(i(b))c.terms[a]=[b];else{if(!g(b))throw new TypeError("Argument must be string or array");c.terms[a]=b}return{field:function(b){var d=c.terms[a];return null==b?a:(delete c.terms[a],a=b,c.terms[b]=d,this)},terms:function(b){if(null==b)return c.terms[a];if(i(b))c.terms[a].push(b);else{if(!g(b))throw new TypeError("Argument must be string or array");c.terms[a]=b}return this},minimumShouldMatch:function(a){return null==a?c.terms.minimum_should_match:(c.terms.minimum_should_match=a,this)},disableCoord:function(a){return null==a?c.terms.disable_coord:(c.terms.disable_coord=a,this)},boost:function(a){return null==a?c.terms.boost:(c.terms.boost=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},w.TopChildrenQuery=function(a,b){if(!l(a))throw new TypeError("Argument must be a Query");var c={top_children:{query:a._self(),type:b}};return{query:function(a){if(null==a)return c.top_children.query;if(!l(a))throw new TypeError("Argument must be a Query");return c.top_children.query=a._self(),this},type:function(a){return null==a?c.top_children.type:(c.top_children.type=a,this)},scope:function(){return this},score:function(a){return null==a?c.top_children.score:(a=a.toLowerCase(),("max"===a||"sum"===a||"avg"===a||"total"===a)&&(c.top_children.score=a),this)},scoreMode:function(a){return null==a?c.top_children.score_mode:(a=a.toLowerCase(),("max"===a||"sum"===a||"avg"===a||"total"===a)&&(c.top_children.score_mode=a),this)},factor:function(a){return null==a?c.top_children.factor:(c.top_children.factor=a,this)},incrementalFactor:function(a){return null==a?c.top_children.incremental_factor:(c.top_children.incremental_factor=a,this)},boost:function(a){return null==a?c.top_children.boost:(c.top_children.boost=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},w.WildcardQuery=function(a,b){var c={wildcard:{}};return c.wildcard[a]={value:b},{field:function(b){var d=c.wildcard[a];return null==b?a:(delete c.wildcard[a],a=b,c.wildcard[b]=d,this)},value:function(b){return null==b?c.wildcard[a].value:(c.wildcard[a].value=b,this)},rewrite:function(b){return null==b?c.wildcard[a].rewrite:(b=b.toLowerCase(),("constant_score_auto"===b||"scoring_boolean"===b||"constant_score_boolean"===b||"constant_score_filter"===b||0===b.indexOf("top_terms_boost_")||0===b.indexOf("top_terms_"))&&(c.wildcard[a].rewrite=b),this)},boost:function(b){return null==b?c.wildcard[a].boost:(c.wildcard[a].boost=b,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"query"},_self:function(){return c}}},w.ClusterHealth=function(){var a={},b=["indices"];return{indices:function(b){if(null==a.indices&&(a.indices=[]),null==b)return a.indices;if(i(b))a.indices.push(b);else{if(!g(b))throw new TypeError("Argument must be string or array");a.indices=b}return this},local:function(b){return null==b?a.local:(a.local=b,this)},masterTimeout:function(b){return null==b?a.master_timeout:(a.master_timeout=b,this)},timeout:function(b){return null==b?a.timeout:(a.timeout=b,this)},waitForStatus:function(b){return null==b?a.wait_for_status:(b=b.toLowerCase(),("green"===b||"yellow"===b||"red"===b)&&(a.wait_for_status=b),this)},waitForRelocatingShards:function(b){return null==b?a.wait_for_relocating_shards:(a.wait_for_relocating_shards=b,this)},waitForActiveShards:function(b){return null==b?a.wait_for_active_shards:(a.wait_for_active_shards=b,this)},waitForNodes:function(b){return null==b?a.wait_for_nodes:(a.wait_for_nodes=b,this)},level:function(b){return null==b?a.level:(b=b.toLowerCase(),("cluster"===b||"indices"===b||"shards"===b)&&(a.level=b),this)},toString:function(){return JSON.stringify(a)},_type:function(){return"cluster health"},_self:function(){return a},doHealth:function(c,d){if(null==w.client)throw new Error("No Client Set");var f="/_cluster/health";return a.indices&&a.indices.length>0&&(f=f+"/"+a.indices.join()),w.client.get(f,e(a,b),c,d)}}},w.ClusterState=function(){var a={},b=[];return{local:function(b){return null==b?a.local:(a.local=b,this)},masterTimeout:function(b){return null==b?a.master_timeout:(a.master_timeout=b,this)},filterNodes:function(b){return null==b?a.filter_nodes:(a.filter_nodes=b,this)},filterRoutingTable:function(b){return null==b?a.filter_routing_table:(a.filter_routing_table=b,this)},filterMetadata:function(b){return null==b?a.filter_metadata:(a.filter_metadata=b,this)},filterBlocks:function(b){return null==b?a.filter_blocks:(a.filter_blocks=b,this)},filterIndices:function(b){if(null==a.filter_indices&&(a.filter_indices=[]),null==b)return a.filter_indices;if(i(b))a.filter_indices.push(b);else{if(!g(b))throw new TypeError("Argument must be string or array");a.filter_indices=b}return this},filterIndexTemplates:function(b){if(null==a.filter_index_templates&&(a.filter_index_templates=[]),null==b)return a.filter_index_templates;if(i(b))a.filter_index_templates.push(b);else{if(!g(b))throw new TypeError("Argument must be string or array");a.filter_index_templates=b}return this},toString:function(){return JSON.stringify(a)},_type:function(){return"cluster state"},_self:function(){return a},doState:function(c,d){if(null==w.client)throw new Error("No Client Set");return w.client.get("/_cluster/state",e(a,b),c,d)}}},w.NodeInfo=function(){var a={},b=["nodes"];return{nodes:function(b){if(null==a.nodes&&(a.nodes=[]),null==b)return a.nodes;if(i(b))a.nodes.push(b);else{if(!g(b))throw new TypeError("Argument must be string or array");a.nodes=b}return this},clear:function(b){return null==b?a.clear:(a.clear=b,this)},all:function(b){return null==b?a.all:(a.all=b,this)},settings:function(b){return null==b?a.settings:(a.settings=b,this)},os:function(b){return null==b?a.os:(a.os=b,this)},process:function(b){return null==b?a.process:(a.process=b,this)},jvm:function(b){return null==b?a.jvm:(a.jvm=b,this)},threadPool:function(b){return null==b?a.thread_pool:(a.thread_pool=b,this)},network:function(b){return null==b?a.network:(a.network=b,this)},transport:function(b){return null==b?a.transport:(a.transport=b,this)},http:function(b){return null==b?a.http:(a.http=b,this)},plugin:function(b){return null==b?a.plugin:(a.plugin=b,this)},toString:function(){return JSON.stringify(a)},_type:function(){
return"node info"},_self:function(){return a},doInfo:function(c,d){if(null==w.client)throw new Error("No Client Set");var f="/_nodes";return a.nodes&&a.nodes.length>0&&(f=f+"/"+a.nodes.join()),w.client.get(f,e(a,b),c,d)}}},w.NodeStats=function(){var a={},b=["nodes"];return{nodes:function(b){if(null==a.nodes&&(a.nodes=[]),null==b)return a.nodes;if(i(b))a.nodes.push(b);else{if(!g(b))throw new TypeError("Argument must be string or array");a.nodes=b}return this},clear:function(b){return null==b?a.clear:(a.clear=b,this)},all:function(b){return null==b?a.all:(a.all=b,this)},indices:function(b){return null==b?a.indices:(a.indices=b,this)},os:function(b){return null==b?a.os:(a.os=b,this)},process:function(b){return null==b?a.process:(a.process=b,this)},jvm:function(b){return null==b?a.jvm:(a.jvm=b,this)},threadPool:function(b){return null==b?a.thread_pool:(a.thread_pool=b,this)},network:function(b){return null==b?a.network:(a.network=b,this)},fs:function(b){return null==b?a.fs:(a.fs=b,this)},transport:function(b){return null==b?a.transport:(a.transport=b,this)},http:function(b){return null==b?a.http:(a.http=b,this)},toString:function(){return JSON.stringify(a)},_type:function(){return"node stats"},_self:function(){return a},doStats:function(c,d){if(null==w.client)throw new Error("No Client Set");var f="/_nodes";return a.nodes&&a.nodes.length>0&&(f=f+"/"+a.nodes.join()),f+="/stats",w.client.get(f,e(a,b),c,d)}}},w.GeoPoint=function(b){var c=[0,0];return null!=b&&g(b)&&2===b.length&&(c=[b[1],b[0]]),{properties:function(b){return null==b?c:(h(b)&&a(b,"lat")&&a(b,"lon")&&(c={lat:b.lat,lon:b.lon}),this)},string:function(a){return null==a?c:(i(a)&&-1!==a.indexOf(",")&&(c=a),this)},geohash:function(a,b){return b=null!=b&&j(b)?b:12,null==a?c:(i(a)&&a.length===b&&(c=a),this)},array:function(a){return null==a?c:(g(a)&&2===a.length&&(c=[a[1],a[0]]),this)},toString:function(){return JSON.stringify(c)},_type:function(){return"geo point"},_self:function(){return c}}},w.Highlight=function(c){var d={fields:{}},e=function(b,c,e){null==b?d[c]=e:(a(d.fields,b)||(d.fields[b]={}),d.fields[b][c]=e)};return null!=c&&(i(c)?d.fields[c]={}:g(c)&&b(c,function(a){d.fields[a]={}})),{fields:function(c){return null==c?d.fields:void(i(c)?a(d.fields,c)||(d.fields[c]={}):g(c)&&b(c,function(b){a(d.fields,b)||(d.fields[b]={})}))},preTags:function(a,b){return null===a&&null!=b?d.fields[b].pre_tags:null==a?d.pre_tags:(i(a)?e(b,"pre_tags",[a]):g(a)&&e(b,"pre_tags",a),this)},postTags:function(a,b){return null===a&&null!=b?d.fields[b].post_tags:null==a?d.post_tags:(i(a)?e(b,"post_tags",[a]):g(a)&&e(b,"post_tags",a),this)},order:function(a,b){return null===a&&null!=b?d.fields[b].order:null==a?d.order:(a=a.toLowerCase(),"score"===a&&e(b,"order",a),this)},tagsSchema:function(a){return null==a?d.tags_schema:(a=a.toLowerCase(),"styled"===a&&(d.tags_schema=a),this)},highlightFilter:function(a,b){return null===a&&null!=b?d.fields[b].highlight_filter:null==a?d.highlight_filter:(e(b,"highlight_filter",a),this)},fragmentSize:function(a,b){return null===a&&null!=b?d.fields[b].fragment_size:null==a?d.fragment_size:(e(b,"fragment_size",a),this)},numberOfFragments:function(a,b){return null===a&&null!=b?d.fields[b].number_of_fragments:null==a?d.number_of_fragments:(e(b,"number_of_fragments",a),this)},encoder:function(a){return null==a?d.encoder:(a=a.toLowerCase(),("default"===a||"html"===a)&&(d.encoder=a),this)},requireFieldMatch:function(a,b){return null===a&&null!=b?d.fields[b].require_field_match:null==a?d.require_field_match:(e(b,"require_field_match",a),this)},boundaryMaxScan:function(a,b){return null===a&&null!=b?d.fields[b].boundary_max_scan:null==a?d.boundary_max_scan:(e(b,"boundary_max_scan",a),this)},boundaryChars:function(a,b){return null===a&&null!=b?d.fields[b].boundary_chars:null==a?d.boundary_chars:(e(b,"boundary_chars",a),this)},type:function(a,b){return null===a&&null!=b?d.fields[b].type:null==a?d.type:(a=a.toLowerCase(),("fast-vector-highlighter"===a||"highlighter"===a)&&e(b,"type",a),this)},fragmenter:function(a,b){return null===a&&null!=b?d.fields[b].fragmenter:null==a?d.fragmenter:(a=a.toLowerCase(),("simple"===a||"span"===a)&&e(b,"fragmenter",a),this)},options:function(a,b){if(null===a&&null!=b)return d.fields[b].options;if(null==a)return d.options;if(!h(a)||g(a)||k(a))throw new TypeError("Parameter must be an object");return e(b,"options",a),this},toString:function(){return JSON.stringify(d)},_type:function(){return"highlight"},_self:function(){return d}}},w.IndexedShape=function(a,b){var c={type:a,id:b};return{type:function(a){return null==a?c.type:(c.type=a,this)},id:function(a){return null==a?c.id:(c.id=a,this)},index:function(a){return null==a?c.index:(c.index=a,this)},shapeFieldName:function(a){return null==a?c.shape_field_name:(c.shape_field_name=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"indexed shape"},_self:function(){return c}}},w.MultiSearchRequest=function(b){var c,d,e,f={},h=function(){var b="",c=[];d.length>0&&(b=b+"/"+d.join()),e.length>0&&(b=b+"/"+e.join()),b+="/_msearch";for(var g in f)a(f,g)&&""!==f[g]&&c.push(g+"="+encodeURIComponent(f[g]));return c.length>0&&(b=b+"?"+c.join("&")),b};return c=[],b=b||{},d=null==b.indices?[]:i(b.indices)?[b.indices]:b.indices,e=null==b.types?[]:i(b.types)?[b.types]:b.types,0===d.length&&e.length>0&&(d=["_all"]),{requests:function(a){if(null==a)return c;if(v(a))c.push(a);else{if(!g(a))throw new TypeError("Argument must be request or array");c=a}return this},searchType:function(a){return null==a?f.search_type:(a=a.toLowerCase(),("dfs_query_then_fetch"===a||"dfs_query_and_fetch"===a||"query_then_fetch"===a||"query_and_fetch"===a||"scan"===a||"count"===a)&&(f.search_type=a),this)},indices:function(a){if(null==a)return d;if(i(a))d=[a];else{if(!g(a))throw new TypeError("Argument must be a string or array");d=a}return 0===d.length&&e.length>0&&(d=["_all"]),this},types:function(a){if(null==a)return e;if(i(a))e=[a];else{if(!g(a))throw new TypeError("Argument must be a string or array");e=a}return 0===d.length&&e.length>0&&(d=["_all"]),this},ignoreIndices:function(a){return null==a?f.ignore_indices:(a=a.toLowerCase(),("none"===a||"missing"===a)&&(f.ignore_indices=a),this)},toString:function(){var a,b,d=[];for(a=0,b=c.length;b>a;a++)d.push(c[a]._self());return JSON.stringify(d)},_type:function(){return"multi search request"},_self:function(){var a,b,d=[];for(a=0,b=c.length;b>a;a++)d.push(c[a]._self());return d},doSearch:function(a,b){var d,e,f,g,i,j="";if(null==w.client)throw new Error("No Client Set");for(d=0,e=c.length;e>d;d++)f=c[d],i={},f.indices().length>0&&(i.indices=f.indices()),f.types().length>0&&(i.types=f.types()),null!=f.searchType()&&(i.search_type=f.searchType()),null!=f.preference()&&(i.preference=f.preference()),null!=f.routing()&&(i.routing=f.routing()),null!=f.ignoreIndices()&&(i.ignore_indices=f.ignoreIndices()),j=j+JSON.stringify(i)+"\n",g=f._self(),null!=f.timeout()&&(g.timeout=f.timeout()),j=j+JSON.stringify(g)+"\n";return w.client.post(h(),j,a,b)}}},w.Request=function(b){var d,e,f,h={},j=function(b){var c="",d=[];e.length>0&&(c=c+"/"+e.join()),f.length>0&&(c=c+"/"+f.join()),b.length>0&&"/"!==b[0]&&(c+="/"),c+=b;for(var g in h)a(h,g)&&""!==h[g]&&d.push(g+"="+encodeURIComponent(h[g]));return d.length>0&&(c=c+"?"+d.join("&")),c};return d={},b=b||{},e=null==b.indices?[]:i(b.indices)?[b.indices]:b.indices,f=null==b.types?[]:i(b.types)?[b.types]:b.types,0===e.length&&f.length>0&&(e=["_all"]),null!=b.routing&&(h.routing=b.routing),{sort:function(){var b,c;if(a(d,"sort")||(d.sort=[]),0===arguments.length)return d.sort;if(1===arguments.length){var e=arguments[0];if(i(e))d.sort.push(e);else if(r(e))d.sort.push(e._self());else{if(!g(e))throw new TypeError("Argument must be string, Sort, or array");for(d.sort=[],b=0,c=e.length;c>b;b++)if(i(e[b]))d.sort.push(e[b]);else{if(!r(e[b]))throw new TypeError("Invalid object in array");d.sort.push(e[b]._self())}}}else if(2===arguments.length){var f=arguments[0],h=arguments[1];if(i(f)&&i(h)&&("asc"===(h=h.toLowerCase())||"desc"===h)){var j={};j[f]={order:h},d.sort.push(j)}}return this},trackScores:function(a){return null==a?d.track_scores:(d.track_scores=a,this)},size:function(a){return null==a?d.size:(d.size=a,this)},timeout:function(a){return null==a?h.timeout:(h.timeout=a,this)},routing:function(a){return null==a?h.routing:(h.routing=a,this)},replication:function(a){return null==a?h.replication:(a=a.toLowerCase(),("async"===a||"sync"===a||"default"===a)&&(h.replication=a),this)},consistency:function(a){return null==a?h.consistency:(a=a.toLowerCase(),("default"===a||"one"===a||"quorum"===a||"all"===a)&&(h.consistency=a),this)},searchType:function(a){return null==a?h.search_type:(a=a.toLowerCase(),("dfs_query_then_fetch"===a||"dfs_query_and_fetch"===a||"query_then_fetch"===a||"query_and_fetch"===a||"scan"===a||"count"===a)&&(h.search_type=a),this)},fields:function(a){if(null==a)return d.fields;if(null==d.fields&&(d.fields=[]),i(a))d.fields.push(a);else{if(!g(a))throw new TypeError("Argument must be string or array");d.fields=a}return this},rescore:function(a){if(null==a)return d.rescore;if(!m(a))throw new TypeError("Argument must be a Rescore");return d.rescore=a._self(),this},from:function(a){return null==a?d.from:(d.from=a,this)},query:function(a){if(null==a)return d.query;if(!l(a))throw new TypeError("Argument must be a Query");return d.query=a._self(),this},indices:function(a){if(null==a)return e;if(i(a))e=[a];else{if(!g(a))throw new TypeError("Argument must be a string or array");e=a}return 0===e.length&&f.length>0&&(e=["_all"]),this},types:function(a){if(null==a)return f;if(i(a))f=[a];else{if(!g(a))throw new TypeError("Argument must be a string or array");f=a}return 0===e.length&&f.length>0&&(e=["_all"]),this},facet:function(a){if(null==a)return d.facets;if(null==d.facets&&(d.facets={}),!o(a))throw new TypeError("Argument must be a Facet");return c(d.facets,a._self()),this},filter:function(a){if(null==a)return d.filter;if(!n(a))throw new TypeError("Argument must be a Filter");return d.filter=a._self(),this},highlight:function(a){if(null==a)return d.highlight;if(!s(a))throw new TypeError("Argument must be a Highlight object");return d.highlight=a._self(),this},suggest:function(a){if(null==a)return d.suggest;if(null==d.suggest&&(d.suggest={}),i(a))d.suggest.text=a;else{if(!t(a))throw new TypeError("Argument must be a string or Suggest object");c(d.suggest,a._self())}return this},scriptField:function(a){if(null==a)return d.script_fields;if(null==d.script_fields&&(d.script_fields={}),!p(a))throw new TypeError("Argument must be a ScriptField");return c(d.script_fields,a._self()),this},preference:function(a){return null==a?h.preference:(h.preference=a,this)},local:function(a){return null==a?h.local:(h.local=a,this)},ignoreIndices:function(a){return null==a?h.ignore_indices:(a=a.toLowerCase(),("none"===a||"missing"===a)&&(h.ignore_indices=a),this)},indexBoost:function(a,b){return null==d.indices_boost&&(d.indices_boost={}),0===arguments.length?d.indices_boost:(d.indices_boost[a]=b,this)},explain:function(a){return null==a?d.explain:(d.explain=a,this)},version:function(a){return null==a?d.version:(d.version=a,this)},minScore:function(a){return null==a?d.min_score:(d.min_score=a,this)},toString:function(){return JSON.stringify(d)},_type:function(){return"request"},_self:function(){return d},doDeleteByQuery:function(a,b){var c=JSON.stringify(d.query);if(null==w.client)throw new Error("No Client Set");return w.client.del(j("_query"),c,a,b)},doCount:function(a,b){var c=JSON.stringify(d.query);if(null==w.client)throw new Error("No Client Set");return w.client.post(j("_count"),c,a,b)},doSearch:function(a,b){var c=JSON.stringify(d);if(null==w.client)throw new Error("No Client Set");return w.client.post(j("_search"),c,a,b)},doSearchShards:function(a,b){if(null==w.client)throw new Error("No Client Set");return w.client.post(j("_search_shards"),"",a,b)}}},w.Rescore=function(a,b){if(null!=a&&!j(a))throw new TypeError("Argument must be a Number");if(null!=b&&!l(b))throw new TypeError("Argument must be a Query");var c={query:{}};return null!=a&&(c.window_size=a),null!=b&&(c.query.rescore_query=b._self()),{rescoreQuery:function(a){if(null==a)return c.query.rescore_query;if(!l(a))throw new TypeError("Argument must be a Query");return c.query.rescore_query=a._self(),this},queryWeight:function(a){if(null==a)return c.query.query_weight;if(!j(a))throw new TypeError("Argument must be a Number");return c.query.query_weight=a,this},rescoreQueryWeight:function(a){if(null==a)return c.query.rescore_query_weight;if(!j(a))throw new TypeError("Argument must be a Number");return c.query.rescore_query_weight=a,this},windowSize:function(a){if(null==a)return c.window_size;if(!j(a))throw new TypeError("Argument must be a Number");return c.window_size=a,this},toString:function(){return JSON.stringify(c)},_type:function(){return"rescore"},_self:function(){return c}}},w.ScriptField=function(a){var b={};return b[a]={},{lang:function(c){return null==c?b[a].lang:(b[a].lang=c,this)},script:function(c){return null==c?b[a].script:(b[a].script=c,this)},params:function(c){return null==c?b[a].params:(b[a].params=c,this)},ignoreFailure:function(c){return null==c?b[a].ignore_failure:(b[a].ignore_failure=c,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"script field"},_self:function(){return b}}},w.Shape=function(a,b){var c={},d=function(a){var b=!1;return("point"===a||"linestring"===a||"polygon"===a||"multipoint"===a||"envelope"===a||"multipolygon"===a)&&(b=!0),b};return a=a.toLowerCase(),d(a)&&(c.type=a,c.coordinates=b),{type:function(a){return null==a?c.type:(a=a.toLowerCase(),d(a)&&(c.type=a),this)},coordinates:function(a){return null==a?c.coordinates:(c.coordinates=a,this)},toString:function(){return JSON.stringify(c)},_type:function(){return"shape"},_self:function(){return c}}},w.Sort=function(a){null==a&&(a="_score");var b={},c=a;return b[c]={},{field:function(d){var e=b[c];return null==d?a:(delete b[c],a=d,c=d,b[c]=e,this)},geoDistance:function(d){var e=b[c];if(null==d)return b[c][a];if(!q(d))throw new TypeError("Argument must be a GeoPoint");return delete b[c],c="_geo_distance",b[c]=e,b[c][a]=d._self(),this},script:function(a){var d=b[c];return null==a?b[c].script:(delete b[c],c="_script",b[c]=d,b[c].script=a,this)},order:function(a){return null==a?b[c].order:(a=a.toLowerCase(),("asc"===a||"desc"===a)&&(b[c].order=a),this)},asc:function(){return b[c].order="asc",this},desc:function(){return b[c].order="desc",this},reverse:function(a){return null==a?b[c].reverse:(b[c].reverse=a,this)},missing:function(a){return null==a?b[c].missing:(b[c].missing=a,this)},ignoreUnmapped:function(a){return null==a?b[c].ignore_unmapped:(b[c].ignore_unmapped=a,this)},unit:function(a){return null==a?b[c].unit:(a=a.toLowerCase(),("mi"===a||"km"===a)&&(b[c].unit=a),this)},normalize:function(a){return null==a?b[c].normalize:(b[c].normalize=a,this)},distanceType:function(a){return null==a?b[c].distance_type:(a=a.toLowerCase(),("arc"===a||"plane"===a)&&(b[c].distance_type=a),this)},params:function(a){return null==a?b[c].params:(b[c].params=a,this)},lang:function(a){return null==a?b[c].lang:(b[c].lang=a,this)},type:function(a){return null==a?b[c].type:(a=a.toLowerCase(),("string"===a||"number"===a)&&(b[c].type=a),this)},mode:function(a){return null==a?b[c].mode:(a=a.toLowerCase(),("min"===a||"max"===a||"sum"===a||"avg"===a)&&(b[c].mode=a),this)},nestedPath:function(a){return null==a?b[c].nested_path:(b[c].nested_path=a,this)},nestedFilter:function(a){if(null==a)return b[c].nested_filter;if(!n(a))throw new TypeError("Argument must be a Filter");return b[c].nested_filter=a._self(),this},toString:function(){return JSON.stringify(b)},_type:function(){return"sort"},_self:function(){return b}}},w.DirectGenerator=function(){var a=w.DirectSettingsMixin(),b=a._self();return c(a,{preFilter:function(a){return null==a?b.pre_filter:(b.pre_filter=a,this)},postFilter:function(a){return null==a?b.post_filter:(b.post_filter=a,this)},field:function(a){return null==a?b.field:(b.field=a,this)},size:function(a){return null==a?b.size:(b.size=a,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"generator"},_self:function(){return b}})},w.DirectSettingsMixin=function(){var a={};return{accuracy:function(b){return null==b?a.accuracy:(a.accuracy=b,this)},suggestMode:function(b){return null==b?a.suggest_mode:(b=b.toLowerCase(),("missing"===b||"popular"===b||"always"===b)&&(a.suggest_mode=b),this)},sort:function(b){return null==b?a.sort:(b=b.toLowerCase(),("score"===b||"frequency"===b)&&(a.sort=b),this)},stringDistance:function(b){return null==b?a.string_distance:(b=b.toLowerCase(),("internal"===b||"damerau_levenshtein"===b||"levenstein"===b||"jarowinkler"===b||"ngram"===b)&&(a.string_distance=b),this)},maxEdits:function(b){return null==b?a.max_edits:(a.max_edits=b,this)},maxInspections:function(b){return null==b?a.max_inspections:(a.max_inspections=b,this)},maxTermFreq:function(b){return null==b?a.max_term_freq:(a.max_term_freq=b,this)},prefixLen:function(b){return null==b?a.prefix_len:(a.prefix_len=b,this)},minWordLen:function(b){return null==b?a.min_word_len:(a.min_word_len=b,this)},minDocFreq:function(b){return null==b?a.min_doc_freq:(a.min_doc_freq=b,this)},_self:function(){return a}}},w.PhraseSuggester=function(a){var b={};return b[a]={phrase:{}},{text:function(c){return null==c?b[a].text:(b[a].text=c,this)},analyzer:function(c){return null==c?b[a].phrase.analyzer:(b[a].phrase.analyzer=c,this)},field:function(c){return null==c?b[a].phrase.field:(b[a].phrase.field=c,this)},size:function(c){return null==c?b[a].phrase.size:(b[a].phrase.size=c,this)},shardSize:function(c){return null==c?b[a].phrase.shard_size:(b[a].phrase.shard_size=c,this)},realWorldErrorLikelihood:function(c){return null==c?b[a].phrase.real_world_error_likelihood:(b[a].phrase.real_world_error_likelihood=c,this)},confidence:function(c){return null==c?b[a].phrase.confidence:(b[a].phrase.confidence=c,this)},separator:function(c){return null==c?b[a].phrase.separator:(b[a].phrase.separator=c,this)},maxErrors:function(c){return null==c?b[a].phrase.max_errors:(b[a].phrase.max_errors=c,this)},gramSize:function(c){return null==c?b[a].phrase.gram_size:(b[a].phrase.gram_size=c,this)},forceUnigrams:function(c){return null==c?b[a].phrase.force_unigrams:(b[a].phrase.force_unigrams=c,this)},linearSmoothing:function(c,d,e){return 0===arguments.length?b[a].phrase.smoothing:(b[a].phrase.smoothing={linear:{trigram_lambda:c,bigram_lambda:d,unigram_lambda:e}},this)},laplaceSmoothing:function(c){return null==c?b[a].phrase.smoothing:(b[a].phrase.smoothing={laplace:{alpha:c}},this)},stupidBackoffSmoothing:function(c){return null==c?b[a].phrase.smoothing:(b[a].phrase.smoothing={stupid_backoff:{discount:c}},this)},directGenerator:function(c){var d,e;if(null==b[a].phrase.direct_generator&&(b[a].phrase.direct_generator=[]),null==c)return b[a].phrase.direct_generator;if(u(c))b[a].phrase.direct_generator.push(c._self());else{if(!g(c))throw new TypeError("Argument must be a Generator or array of Generators");for(b[a].phrase.direct_generator=[],d=0,e=c.length;e>d;d++){if(!u(c[d]))throw new TypeError("Argument must be an array of Generators");b[a].phrase.direct_generator.push(c[d]._self())}}return this},toString:function(){return JSON.stringify(b)},_type:function(){return"suggest"},_self:function(){return b}}},w.TermSuggester=function(a){var b={},d=w.DirectSettingsMixin();return b[a]={term:d._self()},c(d,{text:function(c){return null==c?b[a].text:(b[a].text=c,this)},analyzer:function(c){return null==c?b[a].term.analyzer:(b[a].term.analyzer=c,this)},field:function(c){return null==c?b[a].term.field:(b[a].term.field=c,this)},size:function(c){return null==c?b[a].term.size:(b[a].term.size=c,this)},shardSize:function(c){return null==c?b[a].term.shard_size:(b[a].term.shard_size=c,this)},toString:function(){return JSON.stringify(b)},_type:function(){return"suggest"},_self:function(){return b}})},w.noConflict=function(){return x.ejs=y,this}}.call(this),function(){var a=this,b=a._,c=Array.prototype,d=Object.prototype,e=Function.prototype,f=c.push,g=c.slice,h=c.concat,i=d.toString,j=d.hasOwnProperty,k=Array.isArray,l=Object.keys,m=e.bind,n=function(a){return a instanceof n?a:this instanceof n?void(this._wrapped=a):new n(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=n),exports._=n):a._=n,n.VERSION="1.7.0";var o=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}};n.iteratee=function(a,b,c){return null==a?n.identity:n.isFunction(a)?o(a,b,c):n.isObject(a)?n.matches(a):n.property(a)},n.each=n.forEach=function(a,b,c){if(null==a)return a;b=o(b,c);var d,e=a.length;if(e===+e)for(d=0;d<e;d++)b(a[d],d,a);else{var f=n.keys(a);for(d=0,e=f.length;d<e;d++)b(a[f[d]],f[d],a)}return a},n.map=n.collect=function(a,b,c){if(null==a)return[];b=n.iteratee(b,c);for(var d,e=a.length!==+a.length&&n.keys(a),f=(e||a).length,g=Array(f),h=0;h<f;h++)d=e?e[h]:h,g[h]=b(a[d],d,a);return g};var p="Reduce of empty array with no initial value";n.reduce=n.foldl=n.inject=function(a,b,c,d){null==a&&(a=[]),b=o(b,d,4);var e,f=a.length!==+a.length&&n.keys(a),g=(f||a).length,h=0;if(arguments.length<3){if(!g)throw new TypeError(p);c=a[f?f[h++]:h++]}for(;h<g;h++)e=f?f[h]:h,c=b(c,a[e],e,a);return c},n.reduceRight=n.foldr=function(a,b,c,d){null==a&&(a=[]),b=o(b,d,4);var e,f=a.length!==+a.length&&n.keys(a),g=(f||a).length;if(arguments.length<3){if(!g)throw new TypeError(p);c=a[f?f[--g]:--g]}for(;g--;)e=f?f[g]:g,c=b(c,a[e],e,a);return c},n.find=n.detect=function(a,b,c){var d;return b=n.iteratee(b,c),n.some(a,function(a,c,e){if(b(a,c,e))return d=a,!0}),d},n.filter=n.select=function(a,b,c){var d=[];return null==a?d:(b=n.iteratee(b,c),n.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d)},n.reject=function(a,b,c){return n.filter(a,n.negate(n.iteratee(b)),c)},n.every=n.all=function(a,b,c){if(null==a)return!0;b=n.iteratee(b,c);var d,e,f=a.length!==+a.length&&n.keys(a),g=(f||a).length;for(d=0;d<g;d++)if(e=f?f[d]:d,!b(a[e],e,a))return!1;return!0},n.some=n.any=function(a,b,c){if(null==a)return!1;b=n.iteratee(b,c);var d,e,f=a.length!==+a.length&&n.keys(a),g=(f||a).length;for(d=0;d<g;d++)if(e=f?f[d]:d,b(a[e],e,a))return!0;return!1},n.contains=n.include=function(a,b){return null!=a&&(a.length!==+a.length&&(a=n.values(a)),n.indexOf(a,b)>=0)},n.invoke=function(a,b){var c=g.call(arguments,2),d=n.isFunction(b);return n.map(a,function(a){return(d?b:a[b]).apply(a,c)})},n.pluck=function(a,b){return n.map(a,n.property(b))},n.where=function(a,b){return n.filter(a,n.matches(b))},n.findWhere=function(a,b){return n.find(a,n.matches(b))},n.max=function(a,b,c){var d,e,f=-1/0,g=-1/0;if(null==b&&null!=a){a=a.length===+a.length?a:n.values(a);for(var h=0,i=a.length;h<i;h++)(d=a[h])>f&&(f=d)}else b=n.iteratee(b,c),n.each(a,function(a,c,d){((e=b(a,c,d))>g||e===-1/0&&f===-1/0)&&(f=a,g=e)});return f},n.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=a.length===+a.length?a:n.values(a);for(var h=0,i=a.length;h<i;h++)(d=a[h])<f&&(f=d)}else b=n.iteratee(b,c),n.each(a,function(a,c,d){((e=b(a,c,d))<g||e===1/0&&f===1/0)&&(f=a,g=e)});return f},n.shuffle=function(a){for(var b,c=a&&a.length===+a.length?a:n.values(a),d=c.length,e=Array(d),f=0;f<d;f++)b=n.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},n.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=n.values(a)),a[n.random(a.length-1)]):n.shuffle(a).slice(0,Math.max(0,b))},n.sortBy=function(a,b,c){return b=n.iteratee(b,c),n.pluck(n.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index-b.index}),"value")};var q=function(a){return function(b,c,d){var e={};return c=n.iteratee(c,d),n.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};n.groupBy=q(function(a,b,c){n.has(a,c)?a[c].push(b):a[c]=[b]}),n.indexBy=q(function(a,b,c){a[c]=b}),n.countBy=q(function(a,b,c){n.has(a,c)?a[c]++:a[c]=1}),n.sortedIndex=function(a,b,c,d){c=n.iteratee(c,d,1);for(var e=c(b),f=0,g=a.length;f<g;){var h=f+g>>>1;c(a[h])<e?f=h+1:g=h}return f},n.toArray=function(a){return a?n.isArray(a)?g.call(a):a.length===+a.length?n.map(a,n.identity):n.values(a):[]},n.size=function(a){return null==a?0:a.length===+a.length?a.length:n.keys(a).length},n.partition=function(a,b,c){b=n.iteratee(b,c);var d=[],e=[];return n.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},n.first=n.head=n.take=function(a,b,c){if(null!=a)return null==b||c?a[0]:b<0?[]:g.call(a,0,b)},n.initial=function(a,b,c){return g.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},n.last=function(a,b,c){if(null!=a)return null==b||c?a[a.length-1]:g.call(a,Math.max(a.length-b,0))},n.rest=n.tail=n.drop=function(a,b,c){return g.call(a,null==b||c?1:b)},n.compact=function(a){return n.filter(a,n.identity)};var r=function(a,b,c,d){if(b&&n.every(a,n.isArray))return h.apply(d,a);for(var e=0,g=a.length;e<g;e++){var i=a[e];n.isArray(i)||n.isArguments(i)?b?f.apply(d,i):r(i,b,c,d):c||d.push(i)}return d};n.flatten=function(a,b){return r(a,b,!1,[])},n.without=function(a){return n.difference(a,g.call(arguments,1))},n.uniq=n.unique=function(a,b,c,d){if(null==a)return[];n.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=n.iteratee(c,d));for(var e=[],f=[],g=0,h=a.length;g<h;g++){var i=a[g];if(b)g&&f===i||e.push(i),f=i;else if(c){var j=c(i,g,a);n.indexOf(f,j)<0&&(f.push(j),e.push(i))}else n.indexOf(e,i)<0&&e.push(i)}return e},n.union=function(){return n.uniq(r(arguments,!0,!0,[]))},n.intersection=function(a){if(null==a)return[];for(var b=[],c=arguments.length,d=0,e=a.length;d<e;d++){var f=a[d];if(!n.contains(b,f)){for(var g=1;g<c&&n.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},n.difference=function(a){var b=r(g.call(arguments,1),!0,!0,[]);return n.filter(a,function(a){return!n.contains(b,a)})},n.zip=function(a){if(null==a)return[];for(var b=n.max(arguments,"length").length,c=Array(b),d=0;d<b;d++)c[d]=n.pluck(arguments,d);return c},n.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},n.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=n.sortedIndex(a,b),a[d]===b?d:-1;d=c<0?Math.max(0,e+c):c}for(;d<e;d++)if(a[d]===b)return d;return-1},n.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=a.length;for("number"==typeof c&&(d=c<0?d+c+1:Math.min(d,c+1));--d>=0;)if(a[d]===b)return d;return-1},n.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;f<d;f++,a+=c)e[f]=a;return e};var s=function(){};n.bind=function(a,b){var c,d;if(m&&a.bind===m)return m.apply(a,g.call(arguments,1));if(!n.isFunction(a))throw new TypeError("Bind must be called on a function");return c=g.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(g.call(arguments)));s.prototype=a.prototype;var e=new s;s.prototype=null;var f=a.apply(e,c.concat(g.call(arguments)));return n.isObject(f)?f:e}},n.partial=function(a){var b=g.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;e<f;e++)d[e]===n&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}},n.bindAll=function(a){var b,c,d=arguments.length;if(d<=1)throw new Error("bindAll must be passed function names");for(b=1;b<d;b++)c=arguments[b],a[c]=n.bind(a[c],a);return a},n.memoize=function(a,b){var c=function(d){var e=c.cache,f=b?b.apply(this,arguments):d;return n.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},n.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},n.defer=function(a){return n.delay.apply(n,[a,1].concat(g.call(arguments,1)))},n.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=!1===c.leading?0:n.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=n.now();h||!1!==c.leading||(h=j);var k=b-(j-h);return d=this,e=arguments,k<=0||k>b?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),g||(d=e=null)):g||!1===c.trailing||(g=setTimeout(i,k)),f}},n.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=n.now()-g;j<b&&j>0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=n.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},n.wrap=function(a,b){return n.partial(b,a)},n.negate=function(a){return function(){return!a.apply(this,arguments)}},n.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},n.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}},n.before=function(a,b){var c;return function(){return--a>0?c=b.apply(this,arguments):b=null,c}},n.once=n.partial(n.before,2),n.keys=function(a){if(!n.isObject(a))return[];if(l)return l(a);var b=[];for(var c in a)n.has(a,c)&&b.push(c);return b},n.values=function(a){for(var b=n.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=a[b[e]];return d},n.pairs=function(a){for(var b=n.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=[b[e],a[b[e]]];return d},n.invert=function(a){for(var b={},c=n.keys(a),d=0,e=c.length;d<e;d++)b[a[c[d]]]=c[d];return b},n.functions=n.methods=function(a){var b=[];for(var c in a)n.isFunction(a[c])&&b.push(c);return b.sort()},n.extend=function(a){if(!n.isObject(a))return a;for(var b,c,d=1,e=arguments.length;d<e;d++){b=arguments[d];for(c in b)j.call(b,c)&&(a[c]=b[c])}return a},n.pick=function(a,b,c){var d,e={};if(null==a)return e;if(n.isFunction(b)){b=o(b,c);for(d in a){var f=a[d];b(f,d,a)&&(e[d]=f)}}else{var i=h.apply([],g.call(arguments,1));a=new Object(a);for(var j=0,k=i.length;j<k;j++)(d=i[j])in a&&(e[d]=a[d])}return e},n.omit=function(a,b,c){if(n.isFunction(b))b=n.negate(b);else{var d=n.map(h.apply([],g.call(arguments,1)),String);b=function(a,b){return!n.contains(d,b)}}return n.pick(a,b,c)},n.defaults=function(a){if(!n.isObject(a))return a;for(var b=1,c=arguments.length;b<c;b++){var d=arguments[b];for(var e in d)void 0===a[e]&&(a[e]=d[e])}return a},n.clone=function(a){return n.isObject(a)?n.isArray(a)?a.slice():n.extend({},a):a},n.tap=function(a,b){return b(a),a};var t=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof n&&(a=a._wrapped),b instanceof n&&(b=b._wrapped);var e=i.call(a);if(e!==i.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!=+a?+b!=+b:0==+a?1/+a==1/b:+a==+b;case"[object Date]":case"[object Boolean]":return+a==+b}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]===a)return d[f]===b;var g=a.constructor,h=b.constructor;if(g!==h&&"constructor"in a&&"constructor"in b&&!(n.isFunction(g)&&g instanceof g&&n.isFunction(h)&&h instanceof h))return!1;c.push(a),d.push(b);var j,k;if("[object Array]"===e){if(j=a.length,k=j===b.length)for(;j--&&(k=t(a[j],b[j],c,d)););}else{var l,m=n.keys(a);if(j=m.length,k=n.keys(b).length===j)for(;j--&&(l=m[j],k=n.has(b,l)&&t(a[l],b[l],c,d)););}return c.pop(),d.pop(),k};n.isEqual=function(a,b){return t(a,b,[],[])},n.isEmpty=function(a){if(null==a)return!0;if(n.isArray(a)||n.isString(a)||n.isArguments(a))return 0===a.length;for(var b in a)if(n.has(a,b))return!1;return!0},n.isElement=function(a){return!(!a||1!==a.nodeType)},n.isArray=k||function(a){return"[object Array]"===i.call(a)},n.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},n.each(["Arguments","Function","String","Number","Date","RegExp"],function(a){
n["is"+a]=function(b){return i.call(b)==="[object "+a+"]"}}),n.isArguments(arguments)||(n.isArguments=function(a){return n.has(a,"callee")}),"function"!=typeof/./&&(n.isFunction=function(a){return"function"==typeof a||!1}),n.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},n.isNaN=function(a){return n.isNumber(a)&&a!==+a},n.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"===i.call(a)},n.isNull=function(a){return null===a},n.isUndefined=function(a){return void 0===a},n.has=function(a,b){return null!=a&&j.call(a,b)},n.noConflict=function(){return a._=b,this},n.identity=function(a){return a},n.constant=function(a){return function(){return a}},n.noop=function(){},n.property=function(a){return function(b){return b[a]}},n.matches=function(a){var b=n.pairs(a),c=b.length;return function(a){if(null==a)return!c;a=new Object(a);for(var d=0;d<c;d++){var e=b[d],f=e[0];if(e[1]!==a[f]||!(f in a))return!1}return!0}},n.times=function(a,b,c){var d=Array(Math.max(0,a));b=o(b,c,1);for(var e=0;e<a;e++)d[e]=b(e);return d},n.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},n.now=Date.now||function(){return(new Date).getTime()};var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},v=n.invert(u),w=function(a){var b=function(b){return a[b]},c="(?:"+n.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};n.escape=w(u),n.unescape=w(v),n.result=function(a,b){if(null!=a){var c=a[b];return n.isFunction(c)?a[b]():c}};var x=0;n.uniqueId=function(a){var b=++x+"";return a?a+b:b},n.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var y=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},A=/\\|'|\r|\n|\u2028|\u2029/g,B=function(a){return"\\"+z[a]};n.template=function(a,b,c){!b&&c&&(b=c),b=n.defaults({},b,n.templateSettings);var d=RegExp([(b.escape||y).source,(b.interpolate||y).source,(b.evaluate||y).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(A,B),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(a){throw a.source=f,a}var h=function(a){return g.call(this,a,n)},i=b.variable||"obj";return h.source="function("+i+"){\n"+f+"}",h},n.chain=function(a){var b=n(a);return b._chain=!0,b};var C=function(a){return this._chain?n(a).chain():a};n.mixin=function(a){n.each(n.functions(a),function(b){var c=n[b]=a[b];n.prototype[b]=function(){var a=[this._wrapped];return f.apply(a,arguments),C.call(this,c.apply(n,a))}})},n.mixin(n),n.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=c[a];n.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],C.call(this,c)}}),n.each(["concat","join","slice"],function(a){var b=c[a];n.prototype[a]=function(){return C.call(this,b.apply(this._wrapped,arguments))}}),n.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return n})}.call(this),function(a,b,c){"use strict";function d(){var b=a.angular;return a.angular=dc,b}function e(a){return!(!a||"number"!=typeof a.length)&&("function"!=typeof a.hasOwnProperty&&"function"!=typeof a.constructor||(a instanceof ga||Yb&&a instanceof Yb||"[object Object]"!==cc.call(a)||"function"==typeof a.callee))}function f(a,b,c){var d;if(a)if(y(a))for(d in a)"prototype"!=d&&"length"!=d&&"name"!=d&&a.hasOwnProperty(d)&&b.call(c,a[d],d);else if(a.forEach&&a.forEach!==f)a.forEach(b,c);else if(e(a))for(d=0;d<a.length;d++)b.call(c,a[d],d);else for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d);return a}function g(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b.sort()}function h(a,b,c){for(var d=g(a),e=0;e<d.length;e++)b.call(c,a[d[e]],d[e]);return d}function i(a){return function(b,c){a(c,b)}}function j(){for(var a,b=fc.length;b;){if(b--,57==(a=fc[b].charCodeAt(0)))return fc[b]="A",fc.join("");if(90!=a)return fc[b]=String.fromCharCode(a+1),fc.join("");fc[b]="0"}return fc.unshift("0"),fc.join("")}function k(a,b){b?a.$$hashKey=b:delete a.$$hashKey}function l(a){var b=a.$$hashKey;return f(arguments,function(b){b!==a&&f(b,function(b,c){a[c]=b})}),k(a,b),a}function m(a){return parseInt(a,10)}function n(a,b){return l(new(l(function(){},{prototype:a})),b)}function o(){}function p(a){return a}function q(a){return function(){return a}}function r(a){return void 0===a}function s(a){return void 0!==a}function t(a){return null!=a&&"object"==typeof a}function u(a){return"string"==typeof a}function v(a){return"number"==typeof a}function w(a){return"[object Date]"==cc.apply(a)}function x(a){return"[object Array]"==cc.apply(a)}function y(a){return"function"==typeof a}function z(a){return a&&a.document&&a.location&&a.alert&&a.setInterval}function A(a){return a&&a.$evalAsync&&a.$watch}function B(a){return"[object File]"===cc.apply(a)}function C(a){return u(a)?a.replace(/^\s*/,"").replace(/\s*$/,""):a}function D(a){return a&&(a.nodeName||a.bind&&a.find)}function E(a,b,c){var d=[];return f(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d}function F(a,b){return-1!=G(a,b)}function G(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(b===a[c])return c;return-1}function H(a,b){var c=G(a,b);return c>=0&&a.splice(c,1),b}function I(a,b){if(z(a)||A(a))throw Error("Can't copy Window or Scope");if(b){if(a===b)throw Error("Can't copy equivalent objects or arrays");if(x(a)){b.length=0;for(var c=0;c<a.length;c++)b.push(I(a[c]))}else{var d=b.$$hashKey;f(b,function(a,c){delete b[c]});for(var e in a)b[e]=I(a[e]);k(b,d)}}else b=a,a&&(x(a)?b=I(a,[]):w(a)?b=new Date(a.getTime()):t(a)&&(b=I(a,{})));return b}function J(a,b){b=b||{};for(var c in a)a.hasOwnProperty(c)&&"$$"!==c.substr(0,2)&&(b[c]=a[c]);return b}function K(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d,e,f,g=typeof a,h=typeof b;if(g==h&&"object"==g){if(!x(a)){if(w(a))return w(b)&&a.getTime()==b.getTime();if(A(a)||A(b)||z(a)||z(b))return!1;f={};for(e in a)if("$"!==e.charAt(0)&&!y(a[e])){if(!K(a[e],b[e]))return!1;f[e]=!0}for(e in b)if(!f[e]&&"$"!==e.charAt(0)&&b[e]!==c&&!y(b[e]))return!1;return!0}if((d=a.length)==b.length){for(e=0;e<d;e++)if(!K(a[e],b[e]))return!1;return!0}}return!1}function L(a,b,c){return a.concat(ac.call(b,c))}function M(a,b){return ac.call(a,b||0)}function N(a,b){var c=arguments.length>2?M(arguments,2):[];return!y(b)||b instanceof RegExp?b:c.length?function(){return arguments.length?b.apply(a,c.concat(ac.call(arguments,0))):b.apply(a,c)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function O(a,d){var e=d;return/^\$+/.test(a)?e=c:z(d)?e="$WINDOW":d&&b===d?e="$DOCUMENT":A(d)&&(e="$SCOPE"),e}function P(a,b){return JSON.stringify(a,O,b?"  ":null)}function Q(a){return u(a)?JSON.parse(a):a}function R(a){if(a&&0!==a.length){var b=Tb(""+a);a=!("f"==b||"0"==b||"false"==b||"no"==b||"n"==b||"[]"==b)}else a=!1;return a}function S(a){a=Xb(a).clone();try{a.html("")}catch(a){}var b=Xb("<div>").append(a).html();try{return 3===a[0].nodeType?Tb(b):b.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+Tb(b)})}catch(a){return Tb(b)}}function T(a){var b,c,d={};return f((a||"").split("&"),function(a){a&&(b=a.split("="),c=decodeURIComponent(b[0]),d[c]=!s(b[1])||decodeURIComponent(b[1]))}),d}function U(a){var b=[];return f(a,function(a,c){b.push(W(c,!0)+(!0===a?"":"="+W(a,!0)))}),b.length?b.join("&"):""}function V(a){return W(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function W(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}function X(a,c){function d(a){a&&h.push(a)}var e,g,h=[a],i=["ng:app","ng-app","x-ng-app","data-ng-app"],j=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;f(i,function(c){i[c]=!0,d(b.getElementById(c)),c=c.replace(":","\\:"),a.querySelectorAll&&(f(a.querySelectorAll("."+c),d),f(a.querySelectorAll("."+c+"\\:"),d),f(a.querySelectorAll("["+c+"]"),d))}),f(h,function(a){if(!e){var b=" "+a.className+" ",c=j.exec(b);c?(e=a,g=(c[2]||"").replace(/\s+/g,",")):f(a.attributes,function(b){!e&&i[b.name]&&(e=a,g=b.value)})}}),e&&c(e,g?[g]:[])}function Y(b,c){var d=function(){b=Xb(b),c=c||[],c.unshift(["$provide",function(a){a.value("$rootElement",b)}]),c.unshift("ng");var a=ya(c);return a.invoke(["$rootScope","$rootElement","$compile","$injector","$animator",function(a,b,c,d,e){a.$apply(function(){b.data("$injector",d),c(b)(a)}),e.enabled(!0)}]),a},e=/^NG_DEFER_BOOTSTRAP!/;if(a&&!e.test(a.name))return d();a.name=a.name.replace(e,""),ec.resumeBootstrap=function(a){f(a,function(a){c.push(a)}),d()}}function Z(a,b){return b=b||"_",a.replace(gc,function(a,c){return(c?b:"")+a.toLowerCase()})}function $(){Yb=a.jQuery,Yb?(Xb=Yb,l(Yb.fn,{scope:pc.scope,controller:pc.controller,injector:pc.injector,inheritedData:pc.inheritedData}),fa("remove",!0),fa("empty"),fa("html")):Xb=ga,ec.element=Xb}function _(a,b,c){if(!a)throw new Error("Argument '"+(b||"?")+"' is "+(c||"required"));return a}function aa(a,b,c){return c&&x(a)&&(a=a[a.length-1]),_(y(a),b,"not a function, got "+(a&&"object"==typeof a?a.constructor.name||"Object":typeof a)),a}function ba(a){function b(a,b,c){return a[b]||(a[b]=c())}return b(b(a,"angular",Object),"module",function(){var a={};return function(c,d,e){return d&&a.hasOwnProperty(c)&&(a[c]=null),b(a,c,function(){function a(a,c,d){return function(){return b[d||"push"]([a,c,arguments]),h}}if(!d)throw Error("No module: "+c);var b=[],f=[],g=a("$injector","invoke"),h={_invokeQueue:b,_runBlocks:f,requires:d,name:c,provider:a("$provide","provider"),factory:a("$provide","factory"),service:a("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),animation:a("$animationProvider","register"),filter:a("$filterProvider","register"),controller:a("$controllerProvider","register"),directive:a("$compileProvider","directive"),config:g,run:function(a){return f.push(a),this}};return e&&g(e),h})}})}function ca(b){l(b,{bootstrap:Y,copy:I,extend:l,equals:K,element:Xb,forEach:f,injector:ya,noop:o,bind:N,toJson:P,fromJson:Q,identity:p,isUndefined:r,isDefined:s,isString:u,isFunction:y,isObject:t,isNumber:v,isElement:D,isArray:x,version:hc,isDate:w,lowercase:Tb,uppercase:Ub,callbacks:{counter:0},noConflict:d}),Zb=ba(a);try{Zb("ngLocale")}catch(a){Zb("ngLocale",[]).provider("$locale",tb)}Zb("ng",["ngLocale"],["$provide",function(a){a.provider("$compile",Fa).directive({a:Nc,input:Xc,textarea:Xc,form:Rc,script:Gd,select:Id,style:Kd,option:Jd,ngBind:hd,ngBindHtmlUnsafe:jd,ngBindTemplate:id,ngClass:kd,ngClassEven:md,ngClassOdd:ld,ngCsp:pd,ngCloak:nd,ngController:od,ngForm:Sc,ngHide:zd,ngIf:sd,ngInclude:td,ngInit:ud,ngNonBindable:vd,ngPluralize:wd,ngRepeat:xd,ngShow:yd,ngSubmit:rd,ngStyle:Ad,ngSwitch:Bd,ngSwitchWhen:Cd,ngSwitchDefault:Dd,ngOptions:Hd,ngView:Fd,ngTransclude:Ed,ngModel:bd,ngList:ed,ngChange:cd,required:dd,ngRequired:dd,ngValue:gd}).directive(Oc).directive(qd),a.provider({$anchorScroll:za,$animation:Aa,$animator:wc,$browser:Ca,$cacheFactory:Da,$controller:Ha,$document:Ia,$exceptionHandler:Ja,$filter:vb,$interpolate:Ka,$http:qb,$httpBackend:rb,$location:Xa,$log:Ya,$parse:db,$route:gb,$routeParams:hb,$rootScope:ib,$q:eb,$sniffer:jb,$templateCache:Ea,$timeout:ub,$window:kb})}])}function da(){return++kc}function ea(a){return a.replace(nc,function(a,b,c,d){return d?c.toUpperCase():c}).replace(oc,"Moz$1")}function fa(a,b){function c(){for(var a,c,e,f,g,h,i,j=[this],k=b;j.length;)for(a=j.shift(),c=0,e=a.length;c<e;c++)for(f=Xb(a[c]),k?f.triggerHandler("$destroy"):k=!k,g=0,h=(i=f.children()).length;g<h;g++)j.push(Yb(i[g]));return d.apply(this,arguments)}var d=Yb.fn[a];d=d.$original||d,c.$original=d,Yb.fn[a]=c}function ga(a){if(a instanceof ga)return a;if(!(this instanceof ga)){if(u(a)&&"<"!=a.charAt(0))throw Error("selectors not implemented");return new ga(a)}if(u(a)){var c=b.createElement("div");c.innerHTML="<div>&#160;</div>"+a,c.removeChild(c.firstChild),qa(this,c.childNodes),this.remove()}else qa(this,a)}function ha(a){return a.cloneNode(!0)}function ia(a){ka(a);for(var b=0,c=a.childNodes||[];b<c.length;b++)ia(c[b])}function ja(a,b,c){var d=la(a,"events");la(a,"handle")&&(r(b)?f(d,function(b,c){mc(a,c,b),delete d[c]}):r(c)?(mc(a,b,d[b]),delete d[b]):H(d[b],c))}function ka(a){var b=a[jc],d=ic[b];d&&(d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),ja(a)),delete ic[b],a[jc]=c)}function la(a,b,c){var d=a[jc],e=ic[d||-1];if(!s(c))return e&&e[b];e||(a[jc]=d=da(),e=ic[d]={}),e[b]=c}function ma(a,b,c){var d=la(a,"data"),e=s(c),f=!e&&s(b),g=f&&!t(b);if(d||g||la(a,"data",d={}),e)d[b]=c;else{if(!f)return d;if(g)return d&&d[b];l(d,b)}}function na(a,b){return(" "+a.className+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" ")>-1}function oa(a,b){b&&f(b.split(" "),function(b){a.className=C((" "+a.className+" ").replace(/[\n\t]/g," ").replace(" "+C(b)+" "," "))})}function pa(a,b){b&&f(b.split(" "),function(b){na(a,b)||(a.className=C(a.className+" "+C(b)))})}function qa(a,b){if(b){b=b.nodeName||!s(b.length)||z(b)?[b]:b;for(var c=0;c<b.length;c++)a.push(b[c])}}function ra(a,b){return sa(a,"$"+(b||"ngController")+"Controller")}function sa(a,b,c){for(a=Xb(a),9==a[0].nodeType&&(a=a.find("html"));a.length;){if(c=a.data(b))return c;a=a.parent()}}function ta(a,b){var c=qc[b.toLowerCase()];return c&&rc[a.nodeName]&&c}function ua(a,c){var d=function(d,e){if(d.preventDefault||(d.preventDefault=function(){d.returnValue=!1}),d.stopPropagation||(d.stopPropagation=function(){d.cancelBubble=!0}),d.target||(d.target=d.srcElement||b),r(d.defaultPrevented)){var g=d.preventDefault;d.preventDefault=function(){d.defaultPrevented=!0,g.call(d)},d.defaultPrevented=!1}d.isDefaultPrevented=function(){return d.defaultPrevented||0==d.returnValue},f(c[e||d.type],function(b){b.call(a,d)}),_b<=8?(d.preventDefault=null,d.stopPropagation=null,d.isDefaultPrevented=null):(delete d.preventDefault,delete d.stopPropagation,delete d.isDefaultPrevented)};return d.elem=a,d}function va(a){var b,d=typeof a;return"object"==d&&null!==a?"function"==typeof(b=a.$$hashKey)?b=a.$$hashKey():b===c&&(b=a.$$hashKey=j()):b=a,d+":"+b}function wa(a){f(a,this.put,this)}function xa(a){var b,c,d,e;return"function"==typeof a?(b=a.$inject)||(b=[],c=a.toString().replace(vc,""),d=c.match(sc),f(d[1].split(tc),function(a){a.replace(uc,function(a,c,d){b.push(d)})}),a.$inject=b):x(a)?(e=a.length-1,aa(a[e],"fn"),b=a.slice(0,e)):aa(a,"fn",!0),b}function ya(a){function b(a){return function(b,c){if(!t(b))return a(b,c);f(b,i(a))}}function c(a,b){if((y(b)||x(b))&&(b=v.instantiate(b)),!b.$get)throw Error("Provider "+a+" must define $get factory method.");return s[a+n]=b}function d(a,b){return c(a,{$get:b})}function e(a,b){return d(a,["$injector",function(a){return a.instantiate(b)}])}function g(a,b){return d(a,q(b))}function h(a,b){s[a]=b,w[a]=b}function j(a,b){var c=v.get(a+n),d=c.$get;c.$get=function(){var a=z.invoke(d,c);return z.invoke(b,null,{$delegate:a})}}function k(a){var b=[];return f(a,function(a){if(!r.get(a))if(r.put(a,!0),u(a)){var c=Zb(a);b=b.concat(k(c.requires)).concat(c._runBlocks);try{for(var d=c._invokeQueue,e=0,f=d.length;e<f;e++){var g=d[e],h=v.get(g[0]);h[g[1]].apply(h,g[2])}}catch(b){throw b.message&&(b.message+=" from "+a),b}}else if(y(a))try{b.push(v.invoke(a))}catch(b){throw b.message&&(b.message+=" from "+a),b}else if(x(a))try{b.push(v.invoke(a))}catch(b){throw b.message&&(b.message+=" from "+String(a[a.length-1])),b}else aa(a,"module")}),b}function l(a,b){function c(c){if("string"!=typeof c)throw Error("Service name expected");if(a.hasOwnProperty(c)){if(a[c]===m)throw Error("Circular dependency: "+p.join(" <- "));return a[c]}try{return p.unshift(c),a[c]=m,a[c]=b(c)}finally{p.shift()}}function d(a,b,d){var e,f,g,h=[],i=xa(a);for(f=0,e=i.length;f<e;f++)g=i[f],h.push(d&&d.hasOwnProperty(g)?d[g]:c(g));switch(a.$inject||(a=a[e]),b?-1:h.length){case 0:return a();case 1:return a(h[0]);case 2:return a(h[0],h[1]);case 3:return a(h[0],h[1],h[2]);case 4:return a(h[0],h[1],h[2],h[3]);case 5:return a(h[0],h[1],h[2],h[3],h[4]);case 6:return a(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return a(h[0],h[1],h[2],h[3],h[4],h[5],h[6]);case 8:return a(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7]);case 9:return a(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8]);case 10:return a(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9]);default:return a.apply(b,h)}}function e(a,b){var c,e,f=function(){};return f.prototype=(x(a)?a[a.length-1]:a).prototype,c=new f,e=d(a,c,b),t(e)?e:c}return{invoke:d,instantiate:e,get:c,annotate:xa,has:function(b){return s.hasOwnProperty(b+n)||a.hasOwnProperty(b)}}}var m={},n="Provider",p=[],r=new wa,s={$provide:{provider:b(c),factory:b(d),service:b(e),value:b(g),constant:b(h),decorator:j}},v=s.$injector=l(s,function(){throw Error("Unknown provider: "+p.join(" <- "))}),w={},z=w.$injector=l(w,function(a){var b=v.get(a+n);return z.invoke(b.$get,b)});return f(k(a),function(a){z.invoke(a||o)}),z}function za(){var a=!0;this.disableAutoScrolling=function(){a=!1},this.$get=["$window","$location","$rootScope",function(b,c,d){function e(a){var b=null;return f(a,function(a){b||"a"!==Tb(a.nodeName)||(b=a)}),b}function g(){var a,d=c.hash();d?(a=h.getElementById(d))?a.scrollIntoView():(a=e(h.getElementsByName(d)))?a.scrollIntoView():"top"===d&&b.scrollTo(0,0):b.scrollTo(0,0)}var h=b.document;return a&&d.$watch(function(){return c.hash()},function(){d.$evalAsync(g)}),g}]}function Aa(a){var b="Animation";this.register=function(c,d){a.factory(ea(c)+b,d)},this.$get=["$injector",function(a){return function(c){if(c){var d=ea(c)+b;if(a.has(d))return a.get(d)}}}]}function Ba(a,b,d,e){function g(a){try{a.apply(null,M(arguments,1))}finally{if(0===--s)for(;t.length;)try{t.pop()()}catch(a){d.error(a)}}}function h(a,b){!function c(){f(w,function(a){a()}),v=b(c,a)}()}function i(){x!=j.url()&&(x=j.url(),f(z,function(a){a(j.url())}))}var j=this,k=b[0],l=a.location,m=a.history,n=a.setTimeout,p=a.clearTimeout,q={};j.isMock=!1;var s=0,t=[];j.$$completeOutstandingRequest=g,j.$$incOutstandingRequestCount=function(){s++},j.notifyWhenNoOutstandingRequests=function(a){f(w,function(a){a()}),0===s?a():t.push(a)};var v,w=[];j.addPollFn=function(a){return r(v)&&h(100,n),w.push(a),a};var x=l.href,y=b.find("base");j.url=function(a,b){if(a){if(x==a)return;return x=a,e.history?b?m.replaceState(null,"",a):(m.pushState(null,"",a),y.attr("href",y.attr("href"))):b?l.replace(a):l.href=a,j}return l.href.replace(/%27/g,"'")};var z=[],A=!1;j.onUrlChange=function(b){return A||(e.history&&Xb(a).bind("popstate",i),e.hashchange?Xb(a).bind("hashchange",i):j.addPollFn(i),A=!0),z.push(b),b},j.baseHref=function(){var a=y.attr("href");return a?a.replace(/^https?\:\/\/[^\/]*/,""):""};var B={},C="",D=j.baseHref();j.cookies=function(a,b){var e,f,g,h,i;if(!a){if(k.cookie!==C)for(C=k.cookie,f=C.split("; "),B={},h=0;h<f.length;h++)if(g=f[h],(i=g.indexOf("="))>0){var a=unescape(g.substring(0,i));B[a]===c&&(B[a]=unescape(g.substring(i+1)))}return B}b===c?k.cookie=escape(a)+"=;path="+D+";expires=Thu, 01 Jan 1970 00:00:00 GMT":u(b)&&(e=(k.cookie=escape(a)+"="+escape(b)+";path="+D).length+1)>4096&&d.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+e+" > 4096 bytes)!")},j.defer=function(a,b){var c;return s++,c=n(function(){delete q[c],g(a)},b||0),q[c]=!0,c},j.defer.cancel=function(a){return!!q[a]&&(delete q[a],p(a),g(o),!0)}}function Ca(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,d){return new Ba(a,d,b,c)}]}function Da(){this.$get=function(){function a(a,c){function d(a){a!=k&&(m?m==a&&(m=a.n):m=a,e(a.n,a.p),e(a,k),k=a,k.n=null)}function e(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw Error("cacheId "+a+" taken");var f=0,g=l({},c,{id:a}),h={},i=c&&c.capacity||Number.MAX_VALUE,j={},k=null,m=null;return b[a]={put:function(a,b){if(d(j[a]||(j[a]={key:a})),!r(b))return a in h||f++,h[a]=b,f>i&&this.remove(m.key),b},get:function(a){var b=j[a];if(b)return d(b),h[a]},remove:function(a){var b=j[a];b&&(b==k&&(k=b.p),b==m&&(m=b.n),e(b.n,b.p),delete j[a],delete h[a],f--)},removeAll:function(){h={},f=0,j={},k=m=null},destroy:function(){h=null,g=null,j=null,delete b[a]},info:function(){return l({},g,{size:f})}}}var b={};return a.info=function(){var a={};return f(b,function(b,c){a[c]=b.info()}),a},a.get=function(a){return b[a]},a}}function Ea(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function Fa(a){var d={},e="Directive",g=/^\s*directive\:\s*([\d\w\-_]+)\s+(.*)$/,h=/(([\d\w\-_]+)(?:\:([^;]+))?;?)/,j="Template must have exactly one root element. was: ",k=/^\s*(https?|ftp|mailto|file):/;this.directive=function b(c,g){return u(c)?(_(g,"directive"),d.hasOwnProperty(c)||(d[c]=[],a.factory(c+e,["$injector","$exceptionHandler",function(a,b){var e=[];return f(d[c],function(d){try{var f=a.invoke(d);y(f)?f={compile:q(f)}:!f.compile&&f.link&&(f.compile=q(f.link)),f.priority=f.priority||0,f.name=f.name||c,f.require=f.require||f.controller&&f.name,f.restrict=f.restrict||"A",e.push(f)}catch(a){b(a)}}),e}])),d[c].push(g)):f(c,i(b)),this},this.urlSanitizationWhitelist=function(a){return s(a)?(k=a,this):k},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document",function(a,i,m,n,o,r,s,v,w){function z(a,b,c){a instanceof Xb||(a=Xb(a)),f(a,function(b,c){3==b.nodeType&&b.nodeValue.match(/\S+/)&&(a[c]=Xb(b).wrap("<span></span>").parent()[0])});var d=B(a,b,a,c);return function(b,c){_(b,"scope");for(var e=c?pc.clone.call(a):a,f=0,g=e.length;f<g;f++){var h=e[f];1!=h.nodeType&&9!=h.nodeType||e.eq(f).data("$scope",b)}return A(e,"ng-scope"),c&&c(e,b),d&&d(b,e,e),e}}function A(a,b){try{a.addClass(b)}catch(a){}}function B(a,b,d,e){function f(a,d,e,f){var g,h,i,j,k,m,n,o,p=[];for(m=0,n=d.length;m<n;m++)p.push(d[m]);for(m=0,o=0,n=l.length;m<n;o++)i=p[o],g=l[m++],h=l[m++],g?(g.scope?(j=a.$new(t(g.scope)),Xb(i).data("$scope",j)):j=a,k=g.transclude,k||!f&&b?g(h,j,i,e,function(b){return function(c){var d=a.$new();return d.$$transcluded=!0,b(d,c).bind("$destroy",N(d,d.$destroy))}}(k||b)):g(h,j,i,c,f)):h&&h(a,i.childNodes,c,f)}for(var g,h,i,j,k,l=[],m=0;m<a.length;m++)j=new P,i=D(a[m],[],j,e),g=i.length?E(i,a[m],j,b,d):null,h=g&&g.terminal||!a[m].childNodes||!a[m].childNodes.length?null:B(a[m].childNodes,g?g.transclude:b),l.push(g),l.push(h),k=k||g||h;return k?f:null}function D(a,b,c,d){var e,f,i=a.nodeType,j=c.$attr;switch(i){case 1:F(b,Ga($b(a).toLowerCase()),"E",d);for(var k,l,m,n,o,p=a.attributes,q=0,r=p&&p.length;q<r;q++)k=p[q],k.specified&&(l=k.name,n=Ga(l),V.test(n)&&(l=n.substr(6).toLowerCase()),m=Ga(l.toLowerCase()),j[m]=l,c[m]=o=C(_b&&"href"==l?decodeURIComponent(a.getAttribute(l,2)):k.value),ta(a,m)&&(c[m]=!0),M(a,b,o,m),F(b,m,"A",d));if(f=a.className,u(f)&&""!==f)for(;e=h.exec(f);)m=Ga(e[2]),F(b,m,"C",d)&&(c[m]=C(e[3])),f=f.substr(e.index+e[0].length);break;case 3:L(b,a.nodeValue);break;case 8:try{e=g.exec(a.nodeValue),e&&(m=Ga(e[1]),F(b,m,"M",d)&&(c[m]=C(e[2])))}catch(a){}}return b.sort(I),b}function E(a,d,e,g,h){function k(a,b){a&&(a.require=o.require,I.push(a)),b&&(b.require=o.require,L.push(b))}function l(a,b){var c,d="data",e=!1;if(u(a)){for(;"^"==(c=a.charAt(0))||"?"==c;)a=a.substr(1),"^"==c&&(d="inheritedData"),e=e||"?"==c;if(!(c=b[d]("$"+a+"Controller"))&&!e)throw Error("No controller: "+a);return c}return x(a)&&(c=[],f(a,function(a){c.push(l(a,b))})),c}function n(a,b,g,h,j){var k,n,o,p,q,t;if(k=d===g?e:J(e,new P(Xb(g),e.$attr)),n=k.$$element,N){var u=/^\s*([@=&])(\??)\s*(\w*)\s*$/,v=b.$parent||b;f(N.scope,function(a,c){var d,e,f,g=a.match(u)||[],h=g[3]||c,j="?"==g[2],l=g[1];switch(b.$$isolateBindings[c]=l+h,l){case"@":k.$observe(h,function(a){b[c]=a}),k.$$observers[h].$$scope=v,k[h]&&(b[c]=i(k[h])(v));break;case"=":if(j&&!k[h])return;e=r(k[h]),f=e.assign||function(){throw d=b[c]=e(v),Error(xc+k[h]+" (directive: "+N.name+")")},d=b[c]=e(v),b.$watch(function(){var a=e(v);return a!==b[c]&&(a!==d?d=b[c]=a:f(v,a=d=b[c])),a});break;case"&":e=r(k[h]),b[c]=function(a){return e(v,a)};break;default:throw Error("Invalid isolate scope definition for directive "+N.name+": "+a)}})}for(w&&f(w,function(a){var c={$scope:b,$element:n,$attrs:k,$transclude:j};b&&b.$$scopeInjections&&f(b.$$scopeInjections,function(a,b){c.hasOwnProperty(b)||(c[b]=a)}),t=a.controller,"@"==t&&(t=k[a.name]),n.data("$"+a.name+"Controller",s(t,c))}),o=0,p=I.length;o<p;o++)try{q=I[o],q(b,n,k,q.require&&l(q.require,n))}catch(a){m(a,S(n))}for(a&&a(b,g.childNodes,c,j),o=0,p=L.length;o<p;o++)try{q=L[o],q(b,n,k,q.require&&l(q.require,n))}catch(a){m(a,S(n))}}for(var o,p,q,v,w,B,E,F=-Number.MAX_VALUE,I=[],L=[],M=null,N=null,Q=null,R=e.$$element=Xb(d),T=g,V=0,W=a.length;V<W&&(o=a[V],q=c,!(F>o.priority));V++){if((E=o.scope)&&(K("isolated scope",N,o,R),t(E)&&(A(R,"ng-isolate-scope"),N=o),A(R,"ng-scope"),M=M||o),p=o.name,(E=o.controller)&&(w=w||{},K("'"+p+"' controller",w[p],o,R),w[p]=o),(E=o.transclude)&&(K("transclusion",v,o,R),v=o,F=o.priority,"element"==E?(q=Xb(d),R=e.$$element=Xb(b.createComment(" "+p+": "+e[p]+" ")),d=R[0],O(h,Xb(q[0]),d),T=z(q,g,F)):(q=Xb(ha(d)).contents(),R.html(""),T=z(q,g))),o.template)if(K("template",Q,o,R),Q=o,E=y(o.template)?o.template(R,e):o.template,E=U(E),o.replace){if(q=Xb("<div>"+C(E)+"</div>").contents(),d=q[0],1!=q.length||1!==d.nodeType)throw new Error(j+E);O(h,R,d);var X={$attr:{}};a=a.concat(D(d,a.splice(V+1,a.length-(V+1)),X)),G(e,X),W=a.length}else R.html(E);if(o.templateUrl)K("template",Q,o,R),Q=o,n=H(a.splice(V,a.length-V),n,R,e,h,o.replace,T),W=a.length;else if(o.compile)try{B=o.compile(R,e,T),y(B)?k(null,B):B&&k(B.pre,B.post)}catch(a){m(a,S(R))}o.terminal&&(n.terminal=!0,F=Math.max(F,o.priority))}return n.scope=M&&M.scope,n.transclude=v&&T,n}function F(b,f,g,h){var i=!1;if(d.hasOwnProperty(f))for(var j,k=a.get(f+e),l=0,n=k.length;l<n;l++)try{j=k[l],(h===c||h>j.priority)&&-1!=j.restrict.indexOf(g)&&(b.push(j),i=!0)}catch(a){m(a)}return i}function G(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;f(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))}),f(b,function(b,f){"class"==f?(A(e,b),a.class=(a.class?a.class+" ":"")+b):"style"==f?e.attr("style",e.attr("style")+";"+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function H(a,b,c,d,e,f,g){var h,i,k=[],m=c[0],p=a.shift(),q=l({},p,{controller:null,templateUrl:null,transclude:null,scope:null}),r=y(p.templateUrl)?p.templateUrl(c,d):p.templateUrl;return c.html(""),n.get(r,{cache:o}).success(function(l){var n,o,p;if(l=U(l),f){if(p=Xb("<div>"+C(l)+"</div>").contents(),n=p[0],1!=p.length||1!==n.nodeType)throw new Error(j+l);o={$attr:{}},O(e,c,n),D(n,a,o),G(d,o)}else n=m,c.html(l);for(a.unshift(q),h=E(a,n,d,g),i=B(c[0].childNodes,g);k.length;){var r=k.shift(),s=k.shift(),t=k.shift(),u=k.shift(),v=n;s!==m&&(v=ha(n),O(t,Xb(s),v)),h(function(){b(i,r,v,e,u)},r,v,e,u)}k=null}).error(function(a,b,c,d){throw Error("Failed to load template: "+d.url)}),function(a,c,d,e,f){k?(k.push(c),k.push(d),k.push(e),k.push(f)):h(function(){b(i,c,d,e,f)},c,d,e,f)}}function I(a,b){return b.priority-a.priority}function K(a,b,c,d){if(b)throw Error("Multiple directives ["+b.name+", "+c.name+"] asking for "+a+" on: "+S(d))}function L(a,b){var c=i(b,!0);c&&a.push({priority:0,compile:q(function(a,b){var d=b.parent(),e=d.data("$binding")||[];e.push(c),A(d.data("$binding",e),"ng-binding"),a.$watch(c,function(a){b[0].nodeValue=a})})})}function M(a,b,c,d){var e=i(c,!0);e&&b.push({priority:100,compile:q(function(a,b,c){var f=c.$$observers||(c.$$observers={});(e=i(c[d],!0))&&(c[d]=e(a),(f[d]||(f[d]=[])).$$inter=!0,(c.$$observers&&c.$$observers[d].$$scope||a).$watch(e,function(a){c.$set(d,a)}))})})}function O(a,b,c){var d,e,f=b[0],g=f.parentNode;if(a)for(d=0,e=a.length;d<e;d++)if(a[d]==f){a[d]=c;break}g&&g.replaceChild(c,f),c[Xb.expando]=f[Xb.expando],b[0]=c}var P=function(a,b){this.$$element=a,this.$attr=b||{}};P.prototype={$normalize:Ga,$set:function(a,b,d,e){var g,h=ta(this.$$element[0],a),i=this.$$observers;h&&(this.$$element.prop(a,b),e=h),this[a]=b,e?this.$attr[a]=e:(e=this.$attr[a])||(this.$attr[a]=e=Z(a,"-")),"A"===$b(this.$$element[0])&&"href"===a&&(Q.setAttribute("href",b),g=Q.href,g.match(k)||(this[a]=b="unsafe:"+g)),!1!==d&&(null===b||b===c?this.$$element.removeAttr(e):this.$$element.attr(e,b)),i&&f(i[a],function(a){try{a(b)}catch(a){m(a)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers={}),e=d[a]||(d[a]=[]);return e.push(b),v.$evalAsync(function(){e.$$inter||b(c[a])}),b}};var Q=w[0].createElement("a"),R=i.startSymbol(),T=i.endSymbol(),U="{{"==R||"}}"==T?p:function(a){return a.replace(/\{\{/g,R).replace(/}}/g,T)},V=/^ngAttr[A-Z]/;return z}]}function Ga(a){return ea(a.replace(yc,""))}function Ha(){var a={},b=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(b,c){t(b)?l(a,b):a[b]=c},this.$get=["$injector","$window",function(c,d){return function(e,f){var g,h,i,j;if(u(e)&&(h=e.match(b),i=h[1],j=h[3],e=a.hasOwnProperty(i)?a[i]:ab(f.$scope,i,!0)||ab(d,i,!0),aa(e,i,!0)),g=c.instantiate(e,f),j){if("object"!=typeof f.$scope)throw new Error('Can not export controller as "'+j+'". No scope object provided!');f.$scope[j]=g}return g}}]}function Ia(){this.$get=["$window",function(a){return Xb(a.document)}]}function Ja(){this.$get=["$log",function(a){return function(b,c){a.error.apply(a,arguments)}}]}function Ka(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a},this.endSymbol=function(a){return a?(b=a,this):b},this.$get=["$parse","$exceptionHandler",function(d,e){function f(f,i){for(var j,k,l,m,n=0,o=[],p=f.length,q=!1,r=[];n<p;)-1!=(j=f.indexOf(a,n))&&-1!=(k=f.indexOf(b,j+g))?(n!=j&&o.push(f.substring(n,j)),o.push(l=d(m=f.substring(j+g,k))),l.exp=m,n=k+h,q=!0):(n!=p&&o.push(f.substring(n)),n=p);if((p=o.length)||(o.push(""),p=1),!i||q)return r.length=p,l=function(a){try{for(var b,d=0,g=p;d<g;d++)"function"==typeof(b=o[d])&&(b=b(a),null==b||b==c?b="":"string"!=typeof b&&(b=P(b))),r[d]=b;return r.join("")}catch(a){var h=new Error("Error while interpolating: "+f+"\n"+a.toString());e(h)}},l.exp=f,l.parts=o,l}var g=a.length,h=b.length;return f.startSymbol=function(){return a},f.endSymbol=function(){return b},f}]}function La(a){for(var b=a.split("/"),c=b.length;c--;)b[c]=V(b[c]);return b.join("/")}function Ma(a,b){var c=zc.exec(a);b.$$protocol=c[1],b.$$host=c[3],b.$$port=m(c[5])||Bc[c[1]]||null}function Na(a,b){var c=Ac.exec(a);b.$$path=decodeURIComponent(c[1]),b.$$search=T(c[3]),b.$$hash=decodeURIComponent(c[5]||""),b.$$path&&"/"!=b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function Oa(a,b,c){return 0==b.indexOf(a)?b.substr(a.length):c}function Pa(a){var b=a.indexOf("#");return-1==b?a:a.substr(0,b)}function Qa(a){return a.substr(0,Pa(a).lastIndexOf("/")+1)}function Ra(a){return a.substring(0,a.indexOf("/",a.indexOf("//")+2))}function Sa(a,b){b=b||"";var d=Qa(a);this.$$parse=function(a){var b={};Ma(a,b);var c=Oa(d,a);if(!u(c))throw Error('Invalid url "'+a+'", missing path prefix "'+d+'".');Na(c,b),l(this,b),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var a=U(this.$$search),b=this.$$hash?"#"+V(this.$$hash):"";this.$$url=La(this.$$path)+(a?"?"+a:"")+b,this.$$absUrl=d+this.$$url.substr(1)},this.$$rewrite=function(e){var f,g;return(f=Oa(a,e))!==c?(g=f,(f=Oa(b,f))!==c?d+(Oa("/",f)||f):a+g):(f=Oa(d,e))!==c?d+f:d==e+"/"?d:void 0}}function Ta(a,b){var c=Qa(a);this.$$parse=function(d){Ma(d,this);var e=Oa(a,d)||Oa(c,d);if(!u(e))throw new Error('Invalid url "'+d+'", does not start with "'+a+'".');var f="#"==e.charAt(0)?Oa(b,e):e
;if(!u(f))throw new Error('Invalid url "'+d+'", missing hash prefix "'+b+'".');Na(f,this),this.$$compose()},this.$$compose=function(){var c=U(this.$$search),d=this.$$hash?"#"+V(this.$$hash):"";this.$$url=La(this.$$path)+(c?"?"+c:"")+d,this.$$absUrl=a+(this.$$url?b+this.$$url:"")},this.$$rewrite=function(b){if(Pa(a)==Pa(b))return b}}function Ua(a,b){Ta.apply(this,arguments);var c=Qa(a);this.$$rewrite=function(d){var e;return a==Pa(d)?d:(e=Oa(c,d))?a+b+e:c===d+"/"?c:void 0}}function Va(a){return function(){return this[a]}}function Wa(a,b){return function(c){return r(c)?this[a]:(this[a]=b(c),this.$$compose(),this)}}function Xa(){var b="",c=!1;this.hashPrefix=function(a){return s(a)?(b=a,this):b},this.html5Mode=function(a){return s(a)?(c=a,this):c},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(d,e,f,g){function h(a){d.$broadcast("$locationChangeSuccess",i.absUrl(),a)}var i,j,k,l=e.baseHref(),m=e.url();c?(k=l?Ra(m)+l:m,j=f.history?Sa:Ua):(k=Pa(m),j=Ta),i=new j(k,"#"+b),i.$$parse(i.$$rewrite(m)),g.bind("click",function(b){if(!b.ctrlKey&&!b.metaKey&&2!=b.which){for(var c=Xb(b.target);"a"!==Tb(c[0].nodeName);)if(c[0]===g[0]||!(c=c.parent())[0])return;var f=c.prop("href");if(f&&ec.isString(f)){var h=i.$$rewrite(f);c.attr("target")||!h||b.isDefaultPrevented()||(b.preventDefault(),h!=e.url()&&(i.$$parse(h),d.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}}),i.absUrl()!=m&&e.url(i.absUrl(),!0),e.onUrlChange(function(a){if(i.absUrl()!=a){if(d.$broadcast("$locationChangeStart",a,i.absUrl()).defaultPrevented)return void e.url(i.absUrl());d.$evalAsync(function(){var b=i.absUrl();i.$$parse(a),h(b)}),d.$$phase||d.$digest()}});var n=0;return d.$watch(function(){var a=e.url(),b=i.$$replace;return n&&a==i.absUrl()||(n++,d.$evalAsync(function(){d.$broadcast("$locationChangeStart",i.absUrl(),a).defaultPrevented?i.$$parse(a):(e.url(i.absUrl(),b),h(a))})),i.$$replace=!1,n}),i}]}function Ya(){var a=!0,b=this;this.debugEnabled=function(b){return s(b)?(a=b,this):a},this.$get=["$window",function(c){function d(a){return a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line)),a}function e(a){var b=c.console||{},e=b[a]||b.log||o;return e.apply?function(){var a=[];return f(arguments,function(b){a.push(d(b))}),e.apply(b,a)}:function(a,b){e(a,b)}}return{log:e("log"),warn:e("warn"),info:e("info"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function Za(a,b){function c(a){return-1!=a.indexOf(p)}function d(a){return-1!=a.indexOf(u)}function e(b){var c=b||1;return r+c<a.length&&a.charAt(r+c)}function f(a){return"0"<=a&&a<="9"}function g(a){return" "==a||"\r"==a||"\t"==a||"\n"==a||"\v"==a||" "==a}function h(a){return"a"<=a&&a<="z"||"A"<=a&&a<="Z"||"_"==a||"$"==a}function i(a){return"-"==a||"+"==a||f(a)}function j(b,c,d){throw d=d||r,Error("Lexer Error: "+b+" at column"+(s(c)?"s "+c+"-"+r+" ["+a.substring(c,d)+"]":" "+d)+" in expression ["+a+"].")}function k(){for(var b="",c=r;r<a.length;){var d=Tb(a.charAt(r));if("."==d||f(d))b+=d;else{var g=e();if("e"==d&&i(g))b+=d;else if(i(d)&&g&&f(g)&&"e"==b.charAt(b.length-1))b+=d;else{if(!i(d)||g&&f(g)||"e"!=b.charAt(b.length-1))break;j("Invalid exponent")}}r++}b*=1,q.push({index:c,text:b,json:!0,fn:function(){return b}})}function m(){for(var c,d,e,i,j="",k=r;r<a.length&&("."==(i=a.charAt(r))||h(i)||f(i));)"."==i&&(c=r),j+=i,r++;if(c)for(d=r;d<a.length;){if("("==(i=a.charAt(d))){e=j.substr(c-k+1),j=j.substr(0,c-k),r=d;break}if(!g(i))break;d++}var m={index:k,text:j};if(Cc.hasOwnProperty(j))m.fn=m.json=Cc[j];else{var n=cb(j,b);m.fn=l(function(a,b){return n(a,b)},{assign:function(a,b){return _a(a,j,b)}})}q.push(m),e&&(q.push({index:c,text:".",json:!1}),q.push({index:c+1,text:e,json:!1}))}function n(b){var c=r;r++;for(var d="",e=b,f=!1;r<a.length;){var g=a.charAt(r);if(e+=g,f){if("u"==g){var h=a.substring(r+1,r+5);h.match(/[\da-f]{4}/i)||j("Invalid unicode escape [\\u"+h+"]"),r+=4,d+=String.fromCharCode(parseInt(h,16))}else{var i=Dc[g];d+=i||g}f=!1}else if("\\"==g)f=!0;else{if(g==b)return r++,void q.push({index:c,text:e,string:d,json:!0,fn:function(){return d}});d+=g}r++}j("Unterminated quote",c)}for(var o,p,q=[],r=0,t=[],u=":";r<a.length;){if(p=a.charAt(r),c("\"'"))n(p);else if(f(p)||c(".")&&f(e()))k();else if(h(p))m(),d("{,")&&"{"==t[0]&&(o=q[q.length-1])&&(o.json=-1==o.text.indexOf("."));else if(c("(){}[].,;:?"))q.push({index:r,text:p,json:d(":[,")&&c("{[")||c("}]:,")}),c("{[")&&t.unshift(p),c("}]")&&t.shift(),r++;else{if(g(p)){r++;continue}var v=p+e(),w=v+e(2),x=Cc[p],y=Cc[v],z=Cc[w];z?(q.push({index:r,text:w,fn:z}),r+=3):y?(q.push({index:r,text:v,fn:y}),r+=2):x?(q.push({index:r,text:p,fn:x,json:d("[,:")&&c("+-")}),r+=1):j("Unexpected next character ",r,r+1)}u=p}return q}function $a(a,b,d,e){function f(b,c){throw Error("Syntax Error: Token '"+c.text+"' "+b+" at column "+(c.index+1)+" of the expression ["+a+"] starting at ["+a.substring(c.index)+"].")}function g(){if(0===L.length)throw Error("Unexpected end of expression: "+a);return L[0]}function h(a,b,c,d){if(L.length>0){var e=L[0],f=e.text;if(f==a||f==b||f==c||f==d||!a&&!b&&!c&&!d)return e}return!1}function i(a,c,d,e){var g=h(a,c,d,e);return!!g&&(b&&!g.json&&f("is not valid json",g),L.shift(),g)}function j(a){i(a)||f("is unexpected, expecting ["+a+"]",h())}function k(a,b){return l(function(c,d){return a(c,d,b)},{constant:b.constant})}function m(a,b,c){return l(function(d,e){return a(d,e)?b(d,e):c(d,e)},{constant:a.constant&&b.constant&&c.constant})}function n(a,b,c){return l(function(d,e){return b(d,e,a,c)},{constant:a.constant&&c.constant})}function p(){for(var a=[];;)if(L.length>0&&!h("}",")",";","]")&&a.push(Q()),!i(";"))return 1==a.length?a[0]:function(b,c){for(var d,e=0;e<a.length;e++){var f=a[e];f&&(d=f(b,c))}return d}}function r(){for(var a,b=t();;){if(!(a=i("|")))return b;b=n(b,a.fn,s())}}function s(){for(var a=i(),b=d(a.text),c=[];;){if(!(a=i(":"))){var e=function(a,d,e){for(var f=[e],g=0;g<c.length;g++)f.push(c[g](a,d));return b.apply(a,f)};return function(){return e}}c.push(t())}}function t(){return M()}function u(){var b,c,d=v();return(c=i("="))?(d.assign||f("implies assignment but ["+a.substring(0,c.index)+"] can not be assigned to",c),b=v(),function(a,c){return d.assign(a,b(a,c),c)}):d}function v(){var a,b,c=w();return(b=i("?"))?(a=v(),(b=i(":"))?m(c,a,v()):void f("expected :",b)):c}function w(){for(var a,b=x();;){if(!(a=i("||")))return b;b=n(b,a.fn,x())}}function x(){var a,b=y();return(a=i("&&"))&&(b=n(b,a.fn,x())),b}function y(){var a,b=z();return(a=i("==","!=","===","!=="))&&(b=n(b,a.fn,y())),b}function z(){var a,b=A();return(a=i("<",">","<=",">="))&&(b=n(b,a.fn,z())),b}function A(){for(var a,b=B();a=i("+","-");)b=n(b,a.fn,B());return b}function B(){for(var a,b=C();a=i("*","/","%");)b=n(b,a.fn,C());return b}function C(){var a;return i("+")?D():(a=i("-"))?n(K,a.fn,C()):(a=i("!"))?k(a.fn,C()):D()}function D(){var a;if(i("("))a=Q(),j(")");else if(i("["))a=H();else if(i("{"))a=I();else{var b=i();a=b.fn,a||f("not a primary expression",b),b.json&&(a.constant=a.literal=!0)}for(var c,d;c=i("(","[",".");)"("===c.text?(a=N(a,d),d=null):"["===c.text?(d=a,a=P(a)):"."===c.text?(d=a,a=O(a)):f("IMPOSSIBLE");return a}function E(a){var b=i().text,c=cb(b,e);return l(function(b,d,e){return c(e||a(b,d),d)},{assign:function(c,d,e){return _a(a(c,e),b,d)}})}function F(a){var b=t();return j("]"),l(function(d,e){var f,g,h=a(d,e),i=b(d,e);return h?(f=h[i],f&&f.then&&(g=f,"$$v"in f||(g.$$v=c,g.then(function(a){g.$$v=a})),f=f.$$v),f):c},{assign:function(c,d,e){return a(c,e)[b(c,e)]=d}})}function G(a,b){var c=[];if(")"!=g().text)do{c.push(t())}while(i(","));return j(")"),function(d,e){for(var f=[],g=b?b(d,e):d,h=0;h<c.length;h++)f.push(c[h](d,e));var i=a(d,e,g)||o;return i.apply?i.apply(g,f):i(f[0],f[1],f[2],f[3],f[4])}}function H(){var a=[],b=!0;if("]"!=g().text)do{var c=t();a.push(c),c.constant||(b=!1)}while(i(","));return j("]"),l(function(b,c){for(var d=[],e=0;e<a.length;e++)d.push(a[e](b,c));return d},{literal:!0,constant:b})}function I(){var a=[],b=!0;if("}"!=g().text)do{var c=i(),d=c.string||c.text;j(":");var e=t();a.push({key:d,value:e}),e.constant||(b=!1)}while(i(","));return j("}"),l(function(b,c){for(var d={},e=0;e<a.length;e++){var f=a[e];d[f.key]=f.value(b,c)}return d},{literal:!0,constant:b})}var J,K=q(0),L=Za(a,e),M=u,N=G,O=E,P=F,Q=r;return b?(M=w,N=O=P=Q=function(){f("is not valid json",{text:a,index:0})},J=D()):J=p(),0!==L.length&&f("is an unexpected token",L[0]),J.literal=!!J.literal,J.constant=!!J.constant,J}function _a(a,b,c){for(var d=b.split("."),e=0;d.length>1;e++){var f=d.shift(),g=a[f];g||(g={},a[f]=g),a=g}return a[d.shift()]=c,c}function ab(a,b,c){if(!b)return a;for(var d,e=b.split("."),f=a,g=e.length,h=0;h<g;h++)d=e[h],a&&(a=(f=a)[d]);return!c&&y(a)?N(f,a):a}function bb(a,b,d,e,f){return function(g,h){var i,j=h&&h.hasOwnProperty(a)?h:g;return null===j||j===c?j:(j=j[a],j&&j.then&&("$$v"in j||(i=j,i.$$v=c,i.then(function(a){i.$$v=a})),j=j.$$v),b&&null!==j&&j!==c?(j=j[b],j&&j.then&&("$$v"in j||(i=j,i.$$v=c,i.then(function(a){i.$$v=a})),j=j.$$v),d&&null!==j&&j!==c?(j=j[d],j&&j.then&&("$$v"in j||(i=j,i.$$v=c,i.then(function(a){i.$$v=a})),j=j.$$v),e&&null!==j&&j!==c?(j=j[e],j&&j.then&&("$$v"in j||(i=j,i.$$v=c,i.then(function(a){i.$$v=a})),j=j.$$v),f&&null!==j&&j!==c?(j=j[f],j&&j.then&&("$$v"in j||(i=j,i.$$v=c,i.then(function(a){i.$$v=a})),j=j.$$v),j):j):j):j):j)}}function cb(a,b){if(Ec.hasOwnProperty(a))return Ec[a];var d,e=a.split("."),g=e.length;if(b)d=g<6?bb(e[0],e[1],e[2],e[3],e[4]):function(a,b){var d,f=0;do{d=bb(e[f++],e[f++],e[f++],e[f++],e[f++])(a,b),b=c,a=d}while(f<g);return d};else{var h="var l, fn, p;\n";f(e,function(a,b){h+="if(s === null || s === undefined) return s;\nl=s;\ns="+(b?"s":'((k&&k.hasOwnProperty("'+a+'"))?k:s)')+'["'+a+'"];\nif (s && s.then) {\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=v;});\n}\n s=s.$$v\n}\n'}),h+="return s;",d=Function("s","k",h),d.toString=function(){return h}}return Ec[a]=d}function db(){var a={};this.$get=["$filter","$sniffer",function(b,c){return function(d){switch(typeof d){case"string":return a.hasOwnProperty(d)?a[d]:a[d]=$a(d,!1,b,c.csp);case"function":return d;default:return o}}}]}function eb(){this.$get=["$rootScope","$exceptionHandler",function(a,b){return fb(function(b){a.$evalAsync(b)},b)}]}function fb(a,b){function d(a){return a}function e(a){return j(a)}function g(a){var b=h(),c=0,d=x(a)?[]:{};return f(a,function(a,e){c++,i(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})}),0===c&&b.resolve(d),b.promise}var h=function(){var f,g,k=[];return g={resolve:function(b){if(k){var d=k;k=c,f=i(b),d.length&&a(function(){for(var a,b=0,c=d.length;b<c;b++)a=d[b],f.then(a[0],a[1])})}},reject:function(a){g.resolve(j(a))},promise:{then:function(a,c){var g=h(),i=function(c){try{g.resolve((a||d)(c))}catch(a){b(a),g.reject(a)}},j=function(a){try{g.resolve((c||e)(a))}catch(a){b(a),g.reject(a)}};return k?k.push([i,j]):f.then(i,j),g.promise},always:function(a){function b(a,b){var c=h();return b?c.resolve(a):c.reject(a),c.promise}function c(c,e){var f=null;try{f=(a||d)()}catch(a){return b(a,!1)}return f&&f.then?f.then(function(){return b(c,e)},function(a){return b(a,!1)}):b(c,e)}return this.then(function(a){return c(a,!0)},function(a){return c(a,!1)})}}}},i=function(b){return b&&b.then?b:{then:function(c){var d=h();return a(function(){d.resolve(c(b))}),d.promise}}},j=function(b){return{then:function(c,d){var f=h();return a(function(){f.resolve((d||e)(b))}),f.promise}}};return{defer:h,reject:j,when:function(c,f,g){var k,l=h(),m=function(a){try{return(f||d)(a)}catch(a){return b(a),j(a)}},n=function(a){try{return(g||e)(a)}catch(a){return b(a),j(a)}};return a(function(){i(c).then(function(a){k||(k=!0,l.resolve(i(a).then(m,n)))},function(a){k||(k=!0,l.resolve(n(a)))})}),l.promise},all:g}}function gb(){var a={};this.when=function(b,c){if(a[b]=l({reloadOnSearch:!0,caseInsensitiveMatch:!1},c),b){var d="/"==b[b.length-1]?b.substr(0,b.length-1):b+"/";a[d]={redirectTo:b}}return this},this.otherwise=function(a){return this.when(null,a),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache",function(b,c,d,e,g,h,i){function j(a,b,c){b="^"+b.replace(/[-\/\\^$:*+?.()|[\]{}]/g,"\\$&")+"$";for(var d,e="",g=[],h={},i=/\\([:*])(\w+)/g,j=0;null!==(d=i.exec(b));){switch(e+=b.slice(j,d.index),d[1]){case":":e+="([^\\/]*)";break;case"*":e+="(.*)"}g.push(d[2]),j=i.lastIndex}e+=b.substr(j);var k=a.match(new RegExp(e,c.caseInsensitiveMatch?"i":""));return k&&f(g,function(a,b){h[a]=k[b+1]}),k?h:null}function k(){var a=m(),j=q.current;a&&j&&a.$$route===j.$$route&&K(a.pathParams,j.pathParams)&&!a.reloadOnSearch&&!p?(j.params=a.params,I(j.params,d),b.$broadcast("$routeUpdate",j)):(a||j)&&(p=!1,b.$broadcast("$routeChangeStart",a,j),q.current=a,a&&a.redirectTo&&(u(a.redirectTo)?c.path(o(a.redirectTo,a.params)).search(a.params).replace():c.url(a.redirectTo(a.pathParams,c.path(),c.search())).replace()),e.when(a).then(function(){if(a){var b,c=l({},a.resolve);return f(c,function(a,b){c[b]=u(a)?g.get(a):g.invoke(a)}),s(b=a.template)?y(b)&&(b=b(a.params)):s(b=a.templateUrl)&&(y(b)&&(b=b(a.params)),s(b)&&(a.loadedTemplateUrl=b,b=h.get(b,{cache:i}).then(function(a){return a.data}))),s(b)&&(c.$template=b),e.all(c)}}).then(function(c){a==q.current&&(a&&(a.locals=c,I(a.params,d)),b.$broadcast("$routeChangeSuccess",a,j))},function(c){a==q.current&&b.$broadcast("$routeChangeError",a,j,c)}))}function m(){var b,d;return f(a,function(a,e){!d&&(b=j(c.path(),e,a))&&(d=n(a,{params:l({},c.search(),b),pathParams:b}),d.$$route=a)}),d||a[null]&&n(a[null],{params:{},pathParams:{}})}function o(a,b){var c=[];return f((a||"").split(":"),function(a,d){if(0==d)c.push(a);else{var e=a.match(/(\w+)(.*)/),f=e[1];c.push(b[f]),c.push(e[2]||""),delete b[f]}}),c.join("")}var p=!1,q={routes:a,reload:function(){p=!0,b.$evalAsync(k)}};return b.$on("$locationChangeSuccess",k),q}]}function hb(){this.$get=q({})}function ib(){var a=10;this.digestTtl=function(b){return arguments.length&&(a=b),a},this.$get=["$injector","$exceptionHandler","$parse",function(b,c,d){function f(){this.$id=j(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.this=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$listeners={},this.$$isolateBindings={}}function g(a){if(l.$$phase)throw Error(l.$$phase+" already in progress");l.$$phase=a}function h(){l.$$phase=null}function i(a,b){var c=d(a);return aa(c,b),c}function k(){}f.prototype={$new:function(a){var b,c;if(y(a))throw Error("API-CHANGE: Use $controller to instantiate controllers.");return a?(c=new f,c.$root=this.$root):(b=function(){},b.prototype=this,c=new b,c.$id=j()),c.this=c,c.$$listeners={},c.$parent=this,c.$$watchers=c.$$nextSibling=c.$$childHead=c.$$childTail=null,c.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=c,this.$$childTail=c):this.$$childHead=this.$$childTail=c,c},$watch:function(a,b,c){var d=this,e=i(a,"watch"),f=d.$$watchers,g={fn:b,last:k,get:e,exp:a,eq:!!c};if(!y(b)){var h=i(b||o,"listener");g.fn=function(a,b,c){h(c)}}if("string"==typeof a&&e.constant){var j=g.fn;g.fn=function(a,b,c){j.call(this,a,b,c),H(f,g)}}return f||(f=d.$$watchers=[]),f.unshift(g),function(){H(f,g)}},$watchCollection:function(a,b){function c(){h=k(i);var a,b;if(t(h))if(e(h)){g!==l&&(g=l,n=g.length=0,j++),a=h.length,n!==a&&(j++,g.length=n=a);for(var c=0;c<a;c++)g[c]!==h[c]&&(j++,g[c]=h[c])}else{g!==m&&(g=m={},n=0,j++),a=0;for(b in h)h.hasOwnProperty(b)&&(a++,g.hasOwnProperty(b)?g[b]!==h[b]&&(j++,g[b]=h[b]):(n++,g[b]=h[b],j++));if(n>a){j++;for(b in g)g.hasOwnProperty(b)&&!h.hasOwnProperty(b)&&(n--,delete g[b])}}else g!==h&&(g=h,j++);return j}function f(){b(h,g,i)}var g,h,i=this,j=0,k=d(a),l=[],m={},n=0;return this.$watch(c,f)},$digest:function(){var b,d,e,f,i,j,l,m,n,o,p=this.$$asyncQueue,q=a,r=this,s=[];g("$digest");do{for(j=!1,m=r;p.length;)try{m.$eval(p.shift())}catch(a){c(a)}do{if(f=m.$$watchers)for(i=f.length;i--;)try{b=f[i],(d=b.get(m))===(e=b.last)||(b.eq?K(d,e):"number"==typeof d&&"number"==typeof e&&isNaN(d)&&isNaN(e))||(j=!0,b.last=b.eq?I(d):d,b.fn(d,e===k?d:e,m),q<5&&(n=4-q,s[n]||(s[n]=[]),o=y(b.exp)?"fn: "+(b.exp.name||b.exp.toString()):b.exp,o+="; newVal: "+P(d)+"; oldVal: "+P(e),s[n].push(o)))}catch(a){c(a)}if(!(l=m.$$childHead||m!==r&&m.$$nextSibling))for(;m!==r&&!(l=m.$$nextSibling);)m=m.$parent}while(m=l);if(j&&!q--)throw h(),Error(a+" $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: "+P(s))}while(j||p.length);h()},$destroy:function(){if(l!=this&&!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null}},$eval:function(a,b){return d(a)(this,b)},$evalAsync:function(a){this.$$asyncQueue.push(a)},$apply:function(a){try{return g("$apply"),this.$eval(a)}catch(a){c(a)}finally{h();try{l.$digest()}catch(a){throw c(a),a}}},$on:function(a,b){var c=this.$$listeners[a];return c||(this.$$listeners[a]=c=[]),c.push(b),function(){c[G(c,b)]=null}},$emit:function(a,b){var d,e,f,g=[],h=this,i=!1,j={name:a,targetScope:h,stopPropagation:function(){i=!0},preventDefault:function(){j.defaultPrevented=!0},defaultPrevented:!1},k=L([j],arguments,1);do{for(d=h.$$listeners[a]||g,j.currentScope=h,e=0,f=d.length;e<f;e++)if(d[e])try{if(d[e].apply(null,k),i)return j}catch(a){c(a)}else d.splice(e,1),e--,f--;h=h.$parent}while(h);return j},$broadcast:function(a,b){var d,e,f,g=this,h=g,i=g,j={name:a,targetScope:g,preventDefault:function(){j.defaultPrevented=!0},defaultPrevented:!1},k=L([j],arguments,1);do{for(h=i,j.currentScope=h,d=h.$$listeners[a]||[],e=0,f=d.length;e<f;e++)if(d[e])try{d[e].apply(null,k)}catch(a){c(a)}else d.splice(e,1),e--,f--;if(!(i=h.$$childHead||h!==g&&h.$$nextSibling))for(;h!==g&&!(i=h.$$nextSibling);)h=h.$parent}while(h=i);return j}};var l=new f;return l}]}function jb(){this.$get=["$window","$document",function(a,b){var c,d,e={},f=m((/android (\d+)/.exec(Tb((a.navigator||{}).userAgent))||[])[1]),g=b[0]||{},h=/^(Moz|webkit|O|ms)(?=[A-Z])/,i=g.body&&g.body.style,j=!1,k=!1;if(i){for(var l in i)if(d=h.exec(l)){c=d[0],c=c.substr(0,1).toUpperCase()+c.substr(1);break}j=!!("transition"in i||c+"Transition"in i),k=!!("animation"in i||c+"Animation"in i)}return{history:!(!a.history||!a.history.pushState||f<4),hashchange:"onhashchange"in a&&(!g.documentMode||g.documentMode>7),hasEvent:function(a){if("input"==a&&9==_b)return!1;if(r(e[a])){var b=g.createElement("div");e[a]="on"+a in b}return e[a]},csp:!!g.securityPolicy&&g.securityPolicy.isActive,vendorPrefix:c,transitions:j,animations:k}}]}function kb(){this.$get=q(a)}function lb(a){var b,c,d,e={};return a?(f(a.split("\n"),function(a){d=a.indexOf(":"),b=Tb(C(a.substr(0,d))),c=C(a.substr(d+1)),b&&(e[b]?e[b]+=", "+c:e[b]=c)}),e):e}function mb(a,b){var d=Fc.exec(a);if(null==d)return!0;var e={protocol:d[2],host:d[4],port:m(d[6])||Bc[d[2]]||null,relativeProtocol:d[2]===c||""===d[2]};d=zc.exec(b);var f={protocol:d[1],host:d[3],port:m(d[5])||Bc[d[1]]||null};return(e.protocol==f.protocol||e.relativeProtocol)&&e.host==f.host&&(e.port==f.port||e.relativeProtocol&&f.port==Bc[f.protocol])}function nb(a){var b=t(a)?a:c;return function(c){return b||(b=lb(a)),c?b[Tb(c)]||null:b}}function ob(a,b,c){return y(c)?c(a,b):(f(c,function(c){a=c(a,b)}),a)}function pb(a){return 200<=a&&a<300}function qb(){var a=/^\s*(\[|\{[^\{])/,b=/[\}\]]\s*$/,d=/^\)\]\}',?\n/,e={"Content-Type":"application/json;charset=utf-8"},g=this.defaults={transformResponse:[function(c){return u(c)&&(c=c.replace(d,""),a.test(c)&&b.test(c)&&(c=Q(c,!0))),c}],transformRequest:[function(a){return t(a)&&!B(a)?P(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:e,put:e,patch:e},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},i=this.interceptors=[],j=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(a,b,d,e,k,m){function n(a){function d(a){var b=l({},a,{data:ob(a.data,a.headers,e.transformResponse)});return pb(a.status)?b:k.reject(b)}var e={transformRequest:g.transformRequest,transformResponse:g.transformResponse},h={};l(e,a),e.headers=h,e.method=Ub(e.method),l(h,g.headers.common,g.headers[Tb(e.method)],a.headers);var i=mb(e.url,b.url())?b.cookies()[e.xsrfCookieName||g.xsrfCookieName]:c;i&&(h[e.xsrfHeaderName||g.xsrfHeaderName]=i);var j=function(a){var b=ob(a.data,nb(h),a.transformRequest);return r(a.data)&&delete h["Content-Type"],r(a.withCredentials)&&!r(g.withCredentials)&&(a.withCredentials=g.withCredentials),q(a,b,h).then(d,d)},m=[j,c],n=k.when(e);for(f(w,function(a){(a.request||a.requestError)&&m.unshift(a.request,a.requestError),(a.response||a.responseError)&&m.push(a.response,a.responseError)});m.length;){var o=m.shift(),p=m.shift();n=n.then(o,p)}return n.success=function(a){return n.then(function(b){a(b.data,b.status,b.headers,e)}),n},n.error=function(a){return n.then(null,function(b){a(b.data,b.status,b.headers,e)}),n},n}function o(a){f(arguments,function(a){n[a]=function(b,c){return n(l(c||{},{method:a,url:b}))}})}function p(a){f(arguments,function(a){n[a]=function(b,c,d){return n(l(d||{},{method:a,url:b,data:c}))}})}function q(b,c,d){function f(a,b,c){j&&(pb(a)?j.put(p,[a,b,lb(c)]):j.remove(p)),h(b,a,c),e.$$phase||e.$apply()}function h(a,c,d){c=Math.max(c,0),(pb(c)?m.resolve:m.reject)({data:a,status:c,headers:nb(d),config:b})}function i(){var a=G(n.pendingRequests,b);-1!==a&&n.pendingRequests.splice(a,1)}var j,l,m=k.defer(),o=m.promise,p=s(b.url,b.params);if(n.pendingRequests.push(b),o.then(i,i),(b.cache||g.cache)&&!1!==b.cache&&"GET"==b.method&&(j=t(b.cache)?b.cache:t(g.cache)?g.cache:v),j)if(l=j.get(p)){if(l.then)return l.then(i,i),l;x(l)?h(l[1],l[0],I(l[2])):h(l,200,{})}else j.put(p,o);return l||a(b.method,p,c,f,d,b.timeout,b.withCredentials,b.responseType),o}function s(a,b){if(!b)return a;var d=[];return h(b,function(a,b){null!=a&&a!=c&&(x(a)||(a=[a]),f(a,function(a){t(a)&&(a=P(a)),d.push(W(b)+"="+W(a))}))}),a+(-1==a.indexOf("?")?"?":"&")+d.join("&")}var v=d("$http"),w=[];return f(i,function(a){w.unshift(u(a)?m.get(a):m.invoke(a))}),f(j,function(a,b){var c=u(a)?m.get(a):m.invoke(a);w.splice(b,0,{response:function(a){return c(k.when(a))},responseError:function(a){return c(k.reject(a))}})}),n.pendingRequests=[],o("get","delete","head","jsonp"),p("post","put"),n.defaults=g,n}]}function rb(){this.$get=["$browser","$window","$document",function(a,b,c){return sb(a,Gc,a.defer,b.angular.callbacks,c[0],b.location.protocol.replace(":",""))}]}function sb(a,b,c,d,e,g){function h(a,b){var c=e.createElement("script"),d=function(){e.body.removeChild(c),b&&b()};return c.type="text/javascript",c.src=a,_b?c.onreadystatechange=function(){/loaded|complete/.test(c.readyState)&&d()}:c.onload=c.onerror=d,e.body.appendChild(c),d}return function(e,i,j,k,l,m,n,p){function q(){s=-1,u&&u(),v&&v.abort()}function r(b,d,e,f){var h=(i.match(zc)||["",g])[1];w&&c.cancel(w),u=v=null,d="file"==h?e?200:404:d,d=1223==d?204:d,b(d,e,f),a.$$completeOutstandingRequest(o)}var s;if(a.$$incOutstandingRequestCount(),i=i||a.url(),"jsonp"==Tb(e)){var t="_"+(d.counter++).toString(36);d[t]=function(a){d[t].data=a};var u=h(i.replace("JSON_CALLBACK","angular.callbacks."+t),function(){d[t].data?r(k,200,d[t].data):r(k,s||-2),delete d[t]})}else{var v=new b;v.open(e,i,!0),f(l,function(a,b){a&&v.setRequestHeader(b,a)}),v.onreadystatechange=function(){if(4==v.readyState){var a=v.getAllResponseHeaders(),b=["Cache-Control","Content-Language","Content-Type","Expires","Last-Modified","Pragma"];a||(a="",f(b,function(b){var c=v.getResponseHeader(b);c&&(a+=b+": "+c+"\n")})),r(k,s||v.status,v.responseType?v.response:v.responseText,a)}},n&&(v.withCredentials=!0),p&&(v.responseType=p),v.send(j||"")}if(m>0)var w=c(q,m);else m&&m.then&&m.then(q)}}function tb(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a",short:"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(a){return 1===a?"one":"other"}}}}function ub(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(a,b,c,d){function e(e,g,h){var i,j,k=c.defer(),l=k.promise,m=s(h)&&!h;return i=b.defer(function(){try{k.resolve(e())}catch(a){k.reject(a),d(a)}m||a.$apply()},g),j=function(){delete f[l.$$timeoutId]},l.$$timeoutId=i,f[i]=k,l.then(j,j),l}var f={};return e.cancel=function(a){return!!(a&&a.$$timeoutId in f)&&(f[a.$$timeoutId].reject("canceled"),b.defer.cancel(a.$$timeoutId))},e}]}function vb(a){function b(b,d){return a.factory(b+c,d)}var c="Filter";this.register=b,this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}],b("currency",xb),b("date",Fb),b("filter",wb),b("json",Gb),b("limitTo",Hb),b("lowercase",Lc),b("number",yb),b("orderBy",Ib),b("uppercase",Mc)}function wb(){return function(a,b,c){if(!x(a))return a;var d=[];switch(d.check=function(a){for(var b=0;b<d.length;b++)if(!d[b](a))return!1;return!0},typeof c){case"function":break;case"boolean":if(1==c){c=function(a,b){return ec.equals(a,b)};break}default:c=function(a,b){return b=(""+b).toLowerCase(),(""+a).toLowerCase().indexOf(b)>-1}}var e=function(a,b){if("string"==typeof b&&"!"===b.charAt(0))return!e(a,b.substr(1));switch(typeof a){case"boolean":case"number":case"string":return c(a,b);case"object":switch(typeof b){case"object":return c(a,b);default:for(var d in a)if("$"!==d.charAt(0)&&e(a[d],b))return!0}return!1;case"array":for(var f=0;f<a.length;f++)if(e(a[f],b))return!0;return!1;default:return!1}};switch(typeof b){case"boolean":case"number":case"string":b={$:b};case"object":for(var f in b)"$"==f?function(){if(b[f]){var a=f;d.push(function(c){return e(c,b[a])})}}():function(){if(b[f]){var a=f;d.push(function(c){return e(ab(c,a),b[a])})}}();break;case"function":d.push(b);break;default:return a}for(var g=[],h=0;h<a.length;h++){var i=a[h];d.check(i)&&g.push(i)}return g}}function xb(a){var b=a.NUMBER_FORMATS;return function(a,c){return r(c)&&(c=b.CURRENCY_SYM),zb(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,2).replace(/\u00A4/g,c)}}function yb(a){var b=a.NUMBER_FORMATS;return function(a,c){return zb(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function zb(a,b,c,d,e){if(isNaN(a)||!isFinite(a))return"";var f=a<0;a=Math.abs(a);var g=a+"",h="",i=[],j=!1;if(-1!==g.indexOf("e")){var k=g.match(/([\d\.]+)e(-?)(\d+)/);k&&"-"==k[2]&&k[3]>e+1?g="0":(h=g,j=!0)}if(!j){var l=(g.split(Hc)[1]||"").length;r(e)&&(e=Math.min(Math.max(b.minFrac,l),b.maxFrac));var m=Math.pow(10,e);a=Math.round(a*m)/m;var n=(""+a).split(Hc),o=n[0];n=n[1]||"";var p=0,q=b.lgSize,s=b.gSize;if(o.length>=q+s){p=o.length-q;for(var t=0;t<p;t++)(p-t)%s==0&&0!==t&&(h+=c),h+=o.charAt(t)}for(t=p;t<o.length;t++)(o.length-t)%q==0&&0!==t&&(h+=c),h+=o.charAt(t);for(;n.length<e;)n+="0";e&&"0"!==e&&(h+=d+n.substr(0,e))}return i.push(f?b.negPre:b.posPre),i.push(h),i.push(f?b.negSuf:b.posSuf),i.join("")}function Ab(a,b,c){var d="";for(a<0&&(d="-",a=-a),a=""+a;a.length<b;)a="0"+a;return c&&(a=a.substr(a.length-b)),d+a}function Bb(a,b,c,d){return c=c||0,function(e){var f=e["get"+a]();return(c>0||f>-c)&&(f+=c),0===f&&-12==c&&(f=12),Ab(f,b,d)}}function Cb(a,b){return function(c,d){var e=c["get"+a]();return d[Ub(b?"SHORT"+a:a)][e]}}function Db(a){var b=-1*a.getTimezoneOffset(),c=b>=0?"+":"";return c+=Ab(Math[b>0?"floor":"ceil"](b/60),2)+Ab(Math.abs(b%60),2)}function Eb(a,b){return a.getHours()<12?b.AMPMS[0]:b.AMPMS[1]}function Fb(a){function b(a){var b;if(b=a.match(c)){var d=new Date(0),e=0,f=0,g=b[8]?d.setUTCFullYear:d.setFullYear,h=b[8]?d.setUTCHours:d.setHours;b[9]&&(e=m(b[9]+b[10]),f=m(b[9]+b[11])),g.call(d,m(b[1]),m(b[2])-1,m(b[3]));var i=m(b[4]||0)-e,j=m(b[5]||0)-f,k=m(b[6]||0),l=Math.round(1e3*parseFloat("0."+(b[7]||0)));return h.call(d,i,j,k,l),d}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,d){var e,g,h="",i=[];if(d=d||"mediumDate",d=a.DATETIME_FORMATS[d]||d,u(c)&&(c=Kc.test(c)?m(c):b(c)),v(c)&&(c=new Date(c)),!w(c))return c;for(;d;)g=Jc.exec(d),g?(i=L(i,g,1),d=i.pop()):(i.push(d),d=null);return f(i,function(b){e=Ic[b],h+=e?e(c,a.DATETIME_FORMATS):b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),h}}function Gb(){return function(a){return P(a,!0)}}function Hb(){return function(a,b){if(!x(a)&&!u(a))return a;if(b=m(b),u(a))return b?b>=0?a.slice(0,b):a.slice(b,a.length):"";var c,d,e=[];for(b>a.length?b=a.length:b<-a.length&&(b=-a.length),b>0?(c=0,d=b):(c=a.length+b,d=a.length);c<d;c++)e.push(a[c]);return e}}function Ib(a){return function(b,c,d){function e(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0}function f(a,b){return R(b)?function(b,c){return a(c,b)}:a}function g(a,b){var c=typeof a,d=typeof b;return c==d?("string"==c&&(a=a.toLowerCase()),"string"==c&&(b=b.toLowerCase()),a===b?0:a<b?-1:1):c<d?-1:1}if(!x(b))return b;if(!c)return b;c=x(c)?c:[c],c=E(c,function(b){var c=!1,d=b||p;return u(b)&&("+"!=b.charAt(0)&&"-"!=b.charAt(0)||(c="-"==b.charAt(0),b=b.substring(1)),d=a(b)),f(function(a,b){return g(d(a),d(b))},c)});for(var h=[],i=0;i<b.length;i++)h.push(b[i]);return h.sort(f(e,d))}}function Jb(a){return y(a)&&(a={link:a}),a.restrict=a.restrict||"AC",q(a)}function Kb(a,b){function c(b,c){c=c?"-"+Z(c,"-"):"",a.removeClass((b?Zc:Yc)+c).addClass((b?Yc:Zc)+c)}var d=this,e=a.parent().controller("form")||Pc,g=0,h=d.$error={},i=[];d.$name=b.name,d.$dirty=!1,d.$pristine=!0,d.$valid=!0,d.$invalid=!1,e.$addControl(d),a.addClass($c),c(!0),d.$addControl=function(a){i.push(a),a.$name&&!d.hasOwnProperty(a.$name)&&(d[a.$name]=a)},d.$removeControl=function(a){a.$name&&d[a.$name]===a&&delete d[a.$name],f(h,function(b,c){d.$setValidity(c,!0,a)}),H(i,a)},d.$setValidity=function(a,b,f){var i=h[a];if(b)i&&(H(i,f),i.length||(g--,g||(c(b),d.$valid=!0,d.$invalid=!1),h[a]=!1,c(!0,a),e.$setValidity(a,!0,d)));else{if(g||c(b),i){if(F(i,f))return}else h[a]=i=[],g++,c(!1,a),e.$setValidity(a,!1,d);i.push(f),d.$valid=!1,d.$invalid=!0}},d.$setDirty=function(){a.removeClass($c).addClass(_c),d.$dirty=!0,d.$pristine=!1,e.$setDirty()},d.$setPristine=function(){a.removeClass(_c).addClass($c),d.$dirty=!1,d.$pristine=!0,f(i,function(a){a.$setPristine()})}}function Lb(a){return r(a)||""===a||null===a||a!==a}function Mb(a,b,d,e,f,g){var h=function(){var c=b.val();R(d.ngTrim||"T")&&(c=C(c)),e.$viewValue!==c&&a.$apply(function(){e.$setViewValue(c)})};if(f.hasEvent("input"))b.bind("input",h);else{var i,j=function(){i||(i=g.defer(function(){h(),i=null}))};b.bind("keydown",function(a){var b=a.keyCode;91===b||15<b&&b<19||37<=b&&b<=40||j()}),b.bind("change",h),f.hasEvent("paste")&&b.bind("paste cut",j)}e.$render=function(){b.val(Lb(e.$viewValue)?"":e.$viewValue)};var k,l,n=d.ngPattern,o=function(a,b){return Lb(b)||a.test(b)?(e.$setValidity("pattern",!0),
b):(e.$setValidity("pattern",!1),c)};if(n&&(l=n.match(/^\/(.*)\/([gim]*)$/),l?(n=new RegExp(l[1],l[2]),k=function(a){return o(n,a)}):k=function(b){var c=a.$eval(n);if(!c||!c.test)throw new Error("Expected "+n+" to be a RegExp but was "+c);return o(c,b)},e.$formatters.push(k),e.$parsers.push(k)),d.ngMinlength){var p=m(d.ngMinlength),q=function(a){return!Lb(a)&&a.length<p?(e.$setValidity("minlength",!1),c):(e.$setValidity("minlength",!0),a)};e.$parsers.push(q),e.$formatters.push(q)}if(d.ngMaxlength){var r=m(d.ngMaxlength),s=function(a){return!Lb(a)&&a.length>r?(e.$setValidity("maxlength",!1),c):(e.$setValidity("maxlength",!0),a)};e.$parsers.push(s),e.$formatters.push(s)}}function Nb(a,b,d,e,f,g){if(Mb(a,b,d,e,f,g),e.$parsers.push(function(a){var b=Lb(a);return b||Vc.test(a)?(e.$setValidity("number",!0),""===a?null:b?a:parseFloat(a)):(e.$setValidity("number",!1),c)}),e.$formatters.push(function(a){return Lb(a)?"":""+a}),d.min){var h=parseFloat(d.min),i=function(a){return!Lb(a)&&a<h?(e.$setValidity("min",!1),c):(e.$setValidity("min",!0),a)};e.$parsers.push(i),e.$formatters.push(i)}if(d.max){var j=parseFloat(d.max),k=function(a){return!Lb(a)&&a>j?(e.$setValidity("max",!1),c):(e.$setValidity("max",!0),a)};e.$parsers.push(k),e.$formatters.push(k)}e.$formatters.push(function(a){return Lb(a)||v(a)?(e.$setValidity("number",!0),a):(e.$setValidity("number",!1),c)})}function Ob(a,b,d,e,f,g){Mb(a,b,d,e,f,g);var h=function(a){return Lb(a)||Tc.test(a)?(e.$setValidity("url",!0),a):(e.$setValidity("url",!1),c)};e.$formatters.push(h),e.$parsers.push(h)}function Pb(a,b,d,e,f,g){Mb(a,b,d,e,f,g);var h=function(a){return Lb(a)||Uc.test(a)?(e.$setValidity("email",!0),a):(e.$setValidity("email",!1),c)};e.$formatters.push(h),e.$parsers.push(h)}function Qb(a,b,c,d){r(c.name)&&b.attr("name",j()),b.bind("click",function(){b[0].checked&&a.$apply(function(){d.$setViewValue(c.value)})}),d.$render=function(){var a=c.value;b[0].checked=a==d.$viewValue},c.$observe("value",d.$render)}function Rb(a,b,c,d){var e=c.ngTrueValue,f=c.ngFalseValue;u(e)||(e=!0),u(f)||(f=!1),b.bind("click",function(){a.$apply(function(){d.$setViewValue(b[0].checked)})}),d.$render=function(){b[0].checked=d.$viewValue},d.$formatters.push(function(a){return a===e}),d.$parsers.push(function(a){return a?e:f})}function Sb(a,b){return a="ngClass"+a,Jb(function(d,e,f){function g(a){!0!==b&&d.$index%2!==b||(j&&!K(a,j)&&h(j),i(a)),j=I(a)}function h(a){t(a)&&!x(a)&&(a=E(a,function(a,b){if(a)return b})),e.removeClass(x(a)?a.join(" "):a)}function i(a){t(a)&&!x(a)&&(a=E(a,function(a,b){if(a)return b})),a&&e.addClass(x(a)?a.join(" "):a)}var j=c;d.$watch(f[a],g,!0),f.$observe("class",function(b){var c=d.$eval(f[a]);g(c,c)}),"ngClass"!==a&&d.$watch("$index",function(c,e){var g=1&c;g!==e&1&&(g===b?i(d.$eval(f[a])):h(d.$eval(f[a])))})})}var Tb=function(a){return u(a)?a.toLowerCase():a},Ub=function(a){return u(a)?a.toUpperCase():a},Vb=function(a){return u(a)?a.replace(/[A-Z]/g,function(a){return String.fromCharCode(32|a.charCodeAt(0))}):a},Wb=function(a){return u(a)?a.replace(/[a-z]/g,function(a){return String.fromCharCode(-33&a.charCodeAt(0))}):a};"i"!=="I".toLowerCase()&&(Tb=Vb,Ub=Wb);var Xb,Yb,Zb,$b,_b=m((/msie (\d+)/.exec(Tb(navigator.userAgent))||[])[1]),ac=[].slice,bc=[].push,cc=Object.prototype.toString,dc=a.angular,ec=a.angular||(a.angular={}),fc=["0","0","0"];o.$inject=[],p.$inject=[],$b=_b<9?function(a){return a=a.nodeName?a:a[0],a.scopeName&&"HTML"!=a.scopeName?Ub(a.scopeName+":"+a.nodeName):a.nodeName}:function(a){return a.nodeName?a.nodeName:a[0].nodeName};var gc=/[A-Z]/g,hc={full:"1.1.5",major:1,minor:1,dot:5,codeName:"triangle-squarification"},ic=ga.cache={},jc=ga.expando="ng-"+(new Date).getTime(),kc=1,lc=a.document.addEventListener?function(a,b,c){a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent("on"+b,c)},mc=a.document.removeEventListener?function(a,b,c){a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent("on"+b,c)},nc=/([\:\-\_]+(.))/g,oc=/^moz([A-Z])/,pc=ga.prototype={ready:function(c){function d(){e||(e=!0,c())}var e=!1;"complete"===b.readyState?setTimeout(d):(this.bind("DOMContentLoaded",d),ga(a).bind("load",d))},toString:function(){var a=[];return f(this,function(b){a.push(""+b)}),"["+a.join(", ")+"]"},eq:function(a){return Xb(a>=0?this[a]:this[this.length+a])},length:0,push:bc,sort:[].sort,splice:[].splice},qc={};f("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(a){qc[Tb(a)]=a});var rc={};f("input,select,option,textarea,button,form,details".split(","),function(a){rc[Ub(a)]=!0}),f({data:ma,inheritedData:sa,scope:function(a){return sa(a,"$scope")},controller:ra,injector:function(a){return sa(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:na,css:function(a,b,d){if(b=ea(b),!s(d)){var e;return _b<=8&&""===(e=a.currentStyle&&a.currentStyle[b])&&(e="auto"),e=e||a.style[b],_b<=8&&(e=""===e?c:e),e}a.style[b]=d},attr:function(a,b,d){var e=Tb(b);if(qc[e]){if(!s(d))return a[b]||(a.attributes.getNamedItem(b)||o).specified?e:c;d?(a[b]=!0,a.setAttribute(b,e)):(a[b]=!1,a.removeAttribute(e))}else if(s(d))a.setAttribute(b,d);else if(a.getAttribute){var f=a.getAttribute(b,2);return null===f?c:f}},prop:function(a,b,c){if(!s(c))return a[b];a[b]=c},text:l(_b<9?function(a,b){if(1==a.nodeType){if(r(b))return a.innerText;a.innerText=b}else{if(r(b))return a.nodeValue;a.nodeValue=b}}:function(a,b){if(r(b))return a.textContent;a.textContent=b},{$dv:""}),val:function(a,b){if(r(b))return a.value;a.value=b},html:function(a,b){if(r(b))return a.innerHTML;for(var c=0,d=a.childNodes;c<d.length;c++)ia(d[c]);a.innerHTML=b}},function(a,b){ga.prototype[b]=function(b,d){var e,f;if((2==a.length&&a!==na&&a!==ra?b:d)!==c){for(e=0;e<this.length;e++)a(this[e],b,d);return this}if(t(b)){for(e=0;e<this.length;e++)if(a===ma)a(this[e],b);else for(f in b)a(this[e],f,b[f]);return this}return this.length?a(this[0],b,d):a.$dv}}),f({removeData:ka,dealoc:ia,bind:function a(c,d,e){var g=la(c,"events"),h=la(c,"handle");g||la(c,"events",g={}),h||la(c,"handle",h=ua(c,g)),f(d.split(" "),function(d){var f=g[d];if(!f){if("mouseenter"==d||"mouseleave"==d){var i=b.body.contains||b.body.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};g[d]=[];a(c,{mouseleave:"mouseout",mouseenter:"mouseover"}[d],function(a){var b=this,c=a.relatedTarget;c&&(c===b||i(b,c))||h(a,d)})}else lc(c,d,h),g[d]=[];f=g[d]}f.push(e)})},unbind:ja,replaceWith:function(a,b){var c,d=a.parentNode;ia(a),f(new ga(b),function(b){c?d.insertBefore(b,c.nextSibling):d.replaceChild(b,a),c=b})},children:function(a){var b=[];return f(a.childNodes,function(a){1===a.nodeType&&b.push(a)}),b},contents:function(a){return a.childNodes||[]},append:function(a,b){f(new ga(b),function(b){1!==a.nodeType&&11!==a.nodeType||a.appendChild(b)})},prepend:function(a,b){if(1===a.nodeType){var c=a.firstChild;f(new ga(b),function(b){c?a.insertBefore(b,c):(a.appendChild(b),c=b)})}},wrap:function(a,b){b=Xb(b)[0];var c=a.parentNode;c&&c.replaceChild(b,a),b.appendChild(a)},remove:function(a){ia(a);var b=a.parentNode;b&&b.removeChild(a)},after:function(a,b){var c=a,d=a.parentNode;f(new ga(b),function(a){d.insertBefore(a,c.nextSibling),c=a})},addClass:pa,removeClass:oa,toggleClass:function(a,b,c){r(c)&&(c=!na(a,b)),(c?pa:oa)(a,b)},parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},next:function(a){if(a.nextElementSibling)return a.nextElementSibling;for(var b=a.nextSibling;null!=b&&1!==b.nodeType;)b=b.nextSibling;return b},find:function(a,b){return a.getElementsByTagName(b)},clone:ha,triggerHandler:function(a,b){var c=(la(a,"events")||{})[b];f(c,function(b){b.call(a,{preventDefault:o})})}},function(a,b){ga.prototype[b]=function(b,d){for(var e,f=0;f<this.length;f++)e==c?(e=a(this[f],b,d))!==c&&(e=Xb(e)):qa(e,a(this[f],b,d));return e==c?this:e}}),wa.prototype={put:function(a,b){this[va(a)]=b},get:function(a){return this[va(a)]},remove:function(a){var b=this[a=va(a)];return delete this[a],b}};var sc=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,tc=/,/,uc=/^\s*(_?)(\S+?)\1\s*$/,vc=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;Aa.$inject=["$provide"];var wc=function(){var a="$ngAnimateController",b={running:!0};this.$get=["$animation","$window","$sniffer","$rootElement","$rootScope",function(c,d,e,g,h){g.data(a,b);var i=function(b,g){function h(h,i,j){return function(k,l,m){function n(a){var b=0;return f(u(a)?a.split(/\s*,\s*/):[],function(a){b=Math.max(parseFloat(a)||0,b)}),b}function p(){if(k.addClass(A),x)x(k,q,C);else if(y(d.getComputedStyle)){var a="animation",b="transition",c=e.vendorPrefix+"Animation",g=e.vendorPrefix+"Transition",h="Duration",i="Delay",j="IterationCount",l=0,m=1;f(k,function(e){if(e.nodeType==m){var f=b,k=g,o=1,p=d.getComputedStyle(e)||{};(parseFloat(p[a+h])>0||parseFloat(p[c+h])>0)&&(f=a,k=c,o=Math.max(parseInt(p[f+j])||0,parseInt(p[k+j])||0,o));var q=Math.max(n(p[f+i]),n(p[k+i])),r=Math.max(n(p[f+h]),n(p[k+h]));l=Math.max(q+o*r,l)}}),d.setTimeout(q,1e3*l)}else q()}function q(){q.run||(q.run=!0,j(k,l,m),k.removeClass(s),k.removeClass(A),k.removeData(a))}var r=b.$eval(g.ngAnimate),s=r?t(r)?r[h]:r+"-"+h:"",v=c(s),w=v&&v.setup,x=v&&v.start,z=v&&v.cancel;if(s){var A=s+"-active";if(l||(l=m?m.parent():k.parent()),!e.transitions&&!w&&!x||(l.inheritedData(a)||o).running)return i(k,l,m),void j(k,l,m);var B=k.data(a)||{};if(B.running&&((z||o)(k),B.done()),k.data(a,{running:!0,done:q}),k.addClass(s),i(k,l,m),0==k.length)return q();var C=(w||o)(k);d.setTimeout(p,1)}else i(k,l,m),j(k,l,m)}}function i(a){a.css("display","")}function j(a){a.css("display","none")}function k(a,b,c){c?c.after(a):b.append(a)}function l(a){a.remove()}function m(a,b,c){k(a,b,c)}var n={};return n.enter=h("enter",k,o),n.leave=h("leave",o,l),n.move=h("move",m,o),n.show=h("show",i,o),n.hide=h("hide",o,j),n.animate=function(a,b){h(a,o,o)(b)},n};return i.enabled=function(a){return arguments.length&&(b.running=!a),!b.running},i}]},xc="Non-assignable model expression: ";Fa.$inject=["$provide"];var yc=/^(x[\:\-_]|data[\:\-_])/i,zc=/^([^:]+):\/\/(\w+:{0,1}\w*@)?(\{?[\w\.-]*\}?)(:([0-9]+))?(\/[^\?#]*)?(\?([^#]*))?(#(.*))?$/,Ac=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Bc={http:80,https:443,ftp:21};Ua.prototype=Ta.prototype=Sa.prototype={$$replace:!1,absUrl:Va("$$absUrl"),url:function(a,b){if(r(a))return this.$$url;var c=Ac.exec(a);return c[1]&&this.path(decodeURIComponent(c[1])),(c[2]||c[1])&&this.search(c[3]||""),this.hash(c[5]||"",b),this},protocol:Va("$$protocol"),host:Va("$$host"),port:Va("$$port"),path:Wa("$$path",function(a){return"/"==a.charAt(0)?a:"/"+a}),search:function(a,b){return r(a)?this.$$search:(s(b)?null===b?delete this.$$search[a]:this.$$search[a]=b:this.$$search=u(a)?T(a):a,this.$$compose(),this)},hash:Wa("$$hash",p),replace:function(){return this.$$replace=!0,this}};var Cc={null:function(){return null},true:function(){return!0},false:function(){return!1},undefined:o,"+":function(a,b,d,e){return d=d(a,b),e=e(a,b),s(d)?s(e)?d+e:d:s(e)?e:c},"-":function(a,b,c,d){return c=c(a,b),d=d(a,b),(s(c)?c:0)-(s(d)?d:0)},"*":function(a,b,c,d){return c(a,b)*d(a,b)},"/":function(a,b,c,d){return c(a,b)/d(a,b)},"%":function(a,b,c,d){return c(a,b)%d(a,b)},"^":function(a,b,c,d){return c(a,b)^d(a,b)},"=":o,"===":function(a,b,c,d){return c(a,b)===d(a,b)},"!==":function(a,b,c,d){return c(a,b)!==d(a,b)},"==":function(a,b,c,d){return c(a,b)==d(a,b)},"!=":function(a,b,c,d){return c(a,b)!=d(a,b)},"<":function(a,b,c,d){return c(a,b)<d(a,b)},">":function(a,b,c,d){return c(a,b)>d(a,b)},"<=":function(a,b,c,d){return c(a,b)<=d(a,b)},">=":function(a,b,c,d){return c(a,b)>=d(a,b)},"&&":function(a,b,c,d){return c(a,b)&&d(a,b)},"||":function(a,b,c,d){return c(a,b)||d(a,b)},"&":function(a,b,c,d){return c(a,b)&d(a,b)},"|":function(a,b,c,d){return d(a,b)(a,b,c(a,b))},"!":function(a,b,c){return!c(a,b)}},Dc={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Ec={},Fc=/^(([^:]+):)?\/\/(\w+:{0,1}\w*@)?([\w\.-]*)?(:([0-9]+))?(.*)$/,Gc=a.XMLHttpRequest||function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){}throw new Error("This browser does not support XMLHttpRequest.")};vb.$inject=["$provide"],xb.$inject=["$locale"],yb.$inject=["$locale"];var Hc=".",Ic={yyyy:Bb("FullYear",4),yy:Bb("FullYear",2,0,!0),y:Bb("FullYear",1),MMMM:Cb("Month"),MMM:Cb("Month",!0),MM:Bb("Month",2,1),M:Bb("Month",1,1),dd:Bb("Date",2),d:Bb("Date",1),HH:Bb("Hours",2),H:Bb("Hours",1),hh:Bb("Hours",2,-12),h:Bb("Hours",1,-12),mm:Bb("Minutes",2),m:Bb("Minutes",1),ss:Bb("Seconds",2),s:Bb("Seconds",1),sss:Bb("Milliseconds",3),EEEE:Cb("Day"),EEE:Cb("Day",!0),a:Eb,Z:Db},Jc=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,Kc=/^\d+$/;Fb.$inject=["$locale"];var Lc=q(Tb),Mc=q(Ub);Ib.$inject=["$parse"];var Nc=q({restrict:"E",compile:function(a,c){return _b<=8&&(c.href||c.name||c.$set("href",""),a.append(b.createComment("IE fix"))),function(a,b){b.bind("click",function(a){b.attr("href")||a.preventDefault()})}}}),Oc={};f(qc,function(a,b){var c=Ga("ng-"+b);Oc[c]=function(){return{priority:100,compile:function(){return function(a,d,e){a.$watch(e[c],function(a){e.$set(b,!!a)})}}}}}),f(["src","srcset","href"],function(a){var b=Ga("ng-"+a);Oc[b]=function(){return{priority:99,link:function(c,d,e){e.$observe(b,function(b){b&&(e.$set(a,b),_b&&d.prop(a,e[a]))})}}}});var Pc={$addControl:o,$removeControl:o,$setValidity:o,$setDirty:o,$setPristine:o};Kb.$inject=["$element","$attrs","$scope"];var Qc=function(a){return["$timeout",function(b){var d={name:"form",restrict:"E",controller:Kb,compile:function(){return{pre:function(a,d,e,f){if(!e.action){var g=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};lc(d[0],"submit",g),d.bind("$destroy",function(){b(function(){mc(d[0],"submit",g)},0,!1)})}var h=d.parent().controller("form"),i=e.name||e.ngForm;i&&(a[i]=f),h&&d.bind("$destroy",function(){h.$removeControl(f),i&&(a[i]=c),l(f,Pc)})}}}};return a?l(I(d),{restrict:"EAC"}):d}]},Rc=Qc(),Sc=Qc(!0),Tc=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Uc=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/,Vc=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Wc={text:Mb,number:Nb,url:Ob,email:Pb,radio:Qb,checkbox:Rb,hidden:o,button:o,submit:o,reset:o},Xc=["$browser","$sniffer",function(a,b){return{restrict:"E",require:"?ngModel",link:function(c,d,e,f){f&&(Wc[Tb(e.type)]||Wc.text)(c,d,e,f,b,a)}}}],Yc="ng-valid",Zc="ng-invalid",$c="ng-pristine",_c="ng-dirty",ad=["$scope","$exceptionHandler","$attrs","$element","$parse",function(a,b,c,d,e){function g(a,b){b=b?"-"+Z(b,"-"):"",d.removeClass((a?Zc:Yc)+b).addClass((a?Yc:Zc)+b)}this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=c.name;var h=e(c.ngModel),i=h.assign;if(!i)throw Error(xc+c.ngModel+" ("+S(d)+")");this.$render=o;var j=d.inheritedData("$formController")||Pc,k=0,l=this.$error={};d.addClass($c),g(!0),this.$setValidity=function(a,b){l[a]!==!b&&(b?(l[a]&&k--,k||(g(!0),this.$valid=!0,this.$invalid=!1)):(g(!1),this.$invalid=!0,this.$valid=!1,k++),l[a]=!b,g(b,a),j.$setValidity(a,b,this))},this.$setPristine=function(){this.$dirty=!1,this.$pristine=!0,d.removeClass(_c).addClass($c)},this.$setViewValue=function(c){this.$viewValue=c,this.$pristine&&(this.$dirty=!0,this.$pristine=!1,d.removeClass($c).addClass(_c),j.$setDirty()),f(this.$parsers,function(a){c=a(c)}),this.$modelValue!==c&&(this.$modelValue=c,i(a,c),f(this.$viewChangeListeners,function(a){try{a()}catch(a){b(a)}}))};var m=this;a.$watch(function(){var b=h(a);if(m.$modelValue!==b){var c=m.$formatters,d=c.length;for(m.$modelValue=b;d--;)b=c[d](b);m.$viewValue!==b&&(m.$viewValue=b,m.$render())}})}],bd=function(){return{require:["ngModel","^?form"],controller:ad,link:function(a,b,c,d){var e=d[0],f=d[1]||Pc;f.$addControl(e),b.bind("$destroy",function(){f.$removeControl(e)})}}},cd=q({require:"ngModel",link:function(a,b,c,d){d.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}}),dd=function(){return{require:"?ngModel",link:function(a,b,c,d){if(d){c.required=!0;var e=function(a){return c.required&&(Lb(a)||!1===a)?void d.$setValidity("required",!1):(d.$setValidity("required",!0),a)};d.$formatters.push(e),d.$parsers.unshift(e),c.$observe("required",function(){e(d.$viewValue)})}}}},ed=function(){return{require:"ngModel",link:function(a,b,d,e){var g=/\/(.*)\//.exec(d.ngList),h=g&&new RegExp(g[1])||d.ngList||",",i=function(a){var b=[];return a&&f(a.split(h),function(a){a&&b.push(C(a))}),b};e.$parsers.push(i),e.$formatters.push(function(a){return x(a)?a.join(", "):c})}}},fd=/^(true|false|\d+)$/,gd=function(){return{priority:100,compile:function(a,b){return fd.test(b.ngValue)?function(a,b,c){c.$set("value",a.$eval(c.ngValue))}:function(a,b,c){a.$watch(c.ngValue,function(a){c.$set("value",a,!1)})}}}},hd=Jb(function(a,b,d){b.addClass("ng-binding").data("$binding",d.ngBind),a.$watch(d.ngBind,function(a){b.text(a==c?"":a)})}),id=["$interpolate",function(a){return function(b,c,d){var e=a(c.attr(d.$attr.ngBindTemplate));c.addClass("ng-binding").data("$binding",e),d.$observe("ngBindTemplate",function(a){c.text(a)})}}],jd=[function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.ngBindHtmlUnsafe),a.$watch(c.ngBindHtmlUnsafe,function(a){b.html(a||"")})}}],kd=Sb("",!0),ld=Sb("Odd",0),md=Sb("Even",1),nd=Jb({compile:function(a,b){b.$set("ngCloak",c),a.removeClass("ng-cloak")}}),od=[function(){return{scope:!0,controller:"@"}}],pd=["$sniffer",function(a){return{priority:1e3,compile:function(){a.csp=!0}}}],qd={};f("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress".split(" "),function(a){var b=Ga("ng-"+a);qd[b]=["$parse",function(c){return function(d,e,f){var g=c(f[b]);e.bind(Tb(a),function(a){d.$apply(function(){g(d,{$event:a})})})}}]});var rd=Jb(function(a,b,c){b.bind("submit",function(){a.$apply(c.ngSubmit)})}),sd=["$animator",function(a){return{transclude:"element",priority:1e3,terminal:!0,restrict:"A",compile:function(b,d,e){return function(b,d,f){var g,h,i=a(b,f);b.$watch(f.ngIf,function(a){g&&(i.leave(g),g=c),h&&(h.$destroy(),h=c),R(a)&&(h=b.$new(),e(h,function(a){g=a,i.enter(a,d.parent(),d)}))})}}}}],td=["$http","$templateCache","$anchorScroll","$compile","$animator",function(a,b,c,d,e){return{restrict:"ECA",terminal:!0,compile:function(f,g){var h=g.ngInclude||g.src,i=g.onload||"",j=g.autoscroll;return function(f,g,k){var l,m=e(f,k),n=0,o=function(){l&&(l.$destroy(),l=null),m.leave(g.contents(),g)};f.$watch(h,function(e){var h=++n;e?(a.get(e,{cache:b}).success(function(a){if(h===n){l&&l.$destroy(),l=f.$new(),m.leave(g.contents(),g);var b=Xb("<div/>").html(a).contents();m.enter(b,g),d(b)(l),!s(j)||j&&!f.$eval(j)||c(),l.$emit("$includeContentLoaded"),f.$eval(i)}}).error(function(){h===n&&o()}),f.$emit("$includeContentRequested")):o()})}}}}],ud=Jb({compile:function(){return{pre:function(a,b,c){a.$eval(c.ngInit)}}}}),vd=Jb({terminal:!0,priority:1e3}),wd=["$locale","$interpolate",function(a,b){var c=/{}/g;return{restrict:"EA",link:function(d,e,g){var h=g.count,i=e.attr(g.$attr.when),j=g.offset||0,k=d.$eval(i),l={},m=b.startSymbol(),n=b.endSymbol();f(k,function(a,d){l[d]=b(a.replace(c,m+h+"-"+j+n))}),d.$watch(function(){var b=parseFloat(d.$eval(h));return isNaN(b)?"":(b in k||(b=a.pluralCat(b-j)),l[b](d,e,!0))},function(a){e.text(a)})}}}],xd=["$parse","$animator",function(a,b){var c="$$NG_REMOVED";return{transclude:"element",priority:1e3,terminal:!0,compile:function(d,g,h){return function(d,g,i){var j,k,l,m,n,o,p,q=b(d,i),r=i.ngRepeat,s=r.match(/^\s*(.+)\s+in\s+(.*?)\s*(\s+track\s+by\s+(.+)\s*)?$/),t={$id:va};if(!s)throw Error("Expected ngRepeat in form of '_item_ in _collection_[ track by _id_]' but got '"+r+"'.");if(m=s[1],n=s[2],j=s[4],j?(k=a(j),l=function(a,b,c){return p&&(t[p]=a),t[o]=b,t.$index=c,k(d,t)}):l=function(a,b){return va(b)},!(s=m.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/)))throw Error("'item' in 'item in collection' should be identifier or (key, value) but got '"+m+"'.");o=s[3]||s[1],p=s[2];var u={};d.$watchCollection(n,function(a){var b,i,j,k,m,n,s,t,v,w,x=g,y={},z=[];if(e(a))v=a;else{v=[];for(n in a)a.hasOwnProperty(n)&&"$"!=n.charAt(0)&&v.push(n);v.sort()}for(k=v.length,i=z.length=v.length,b=0;b<i;b++)if(n=a===v?b:v[b],s=a[n],t=l(n,s,b),u.hasOwnProperty(t))w=u[t],delete u[t],y[t]=w,z[b]=w;else{if(y.hasOwnProperty(t))throw f(z,function(a){a&&a.element&&(u[a.id]=a)}),new Error("Duplicates in a repeater are not allowed. Repeater: "+r+" key: "+t);z[b]={id:t},y[t]=!1}for(n in u)u.hasOwnProperty(n)&&(w=u[n],q.leave(w.element),w.element[0][c]=!0,w.scope.$destroy());for(b=0,i=v.length;b<i;b++){if(n=a===v?b:v[b],s=a[n],w=z[b],w.element){m=w.scope,j=x[0];do{j=j.nextSibling}while(j&&j[c]);w.element[0]==j?x=w.element:(q.move(w.element,null,x),x=w.element)}else m=d.$new();m[o]=s,p&&(m[p]=n),m.$index=b,m.$first=0===b,m.$last=b===k-1,m.$middle=!(m.$first||m.$last),w.element||h(m,function(a){q.enter(a,null,x),x=a,w.scope=m,w.element=a,y[w.id]=w})}u=y})}}}}],yd=["$animator",function(a){return function(b,c,d){var e=a(b,d);b.$watch(d.ngShow,function(a){e[R(a)?"show":"hide"](c)})}}],zd=["$animator",function(a){return function(b,c,d){var e=a(b,d);b.$watch(d.ngHide,function(a){e[R(a)?"hide":"show"](c)})}}],Ad=Jb(function(a,b,c){a.$watch(c.ngStyle,function(a,c){c&&a!==c&&f(c,function(a,c){b.css(c,"")}),a&&b.css(a)},!0)}),Bd=["$animator",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(b,c,d,e){var g,h,i=a(b,d),j=d.ngSwitch||d.on,k=[];b.$watch(j,function(a){for(var c=0,j=k.length;c<j;c++)k[c].$destroy(),i.leave(h[c]);h=[],k=[],(g=e.cases["!"+a]||e.cases["?"])&&(b.$eval(d.change),f(g,function(a){var c=b.$new();k.push(c),a.transclude(c,function(b){var c=a.element;h.push(b),i.enter(b,c.parent(),c)})}))})}}}],Cd=Jb({transclude:"element",priority:500,require:"^ngSwitch",compile:function(a,b,c){return function(a,d,e,f){f.cases["!"+b.ngSwitchWhen]=f.cases["!"+b.ngSwitchWhen]||[],f.cases["!"+b.ngSwitchWhen].push({transclude:c,element:d})}}}),Dd=Jb({transclude:"element",priority:500,require:"^ngSwitch",compile:function(a,b,c){return function(a,b,d,e){e.cases["?"]=e.cases["?"]||[],e.cases["?"].push({transclude:c,element:b})}}}),Ed=Jb({controller:["$transclude","$element",function(a,b){a(function(a){b.append(a)})}]}),Fd=["$http","$templateCache","$route","$anchorScroll","$compile","$controller","$animator",function(a,b,c,d,e,f,g){return{restrict:"ECA",terminal:!0,link:function(a,b,h){function i(){l&&(l.$destroy(),l=null)}function j(){n.leave(b.contents(),b),i()}function k(){var g=c.current&&c.current.locals,h=g&&g.$template;if(h){j();var i=Xb("<div></div>").html(h).contents();n.enter(i,b);var k,o=e(i),p=c.current;l=p.scope=a.$new(),p.controller&&(g.$scope=l,k=f(p.controller,g),p.controllerAs&&(l[p.controllerAs]=k),b.children().data("$ngControllerController",k)),o(l),l.$emit("$viewContentLoaded"),l.$eval(m),d()}else j()}var l,m=h.onload||"",n=g(a,h);a.$on("$routeChangeSuccess",k),k()}}}],Gd=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,c){if("text/ng-template"==c.type){var d=c.id,e=b[0].text;a.put(d,e)}}}}],Hd=q({terminal:!0}),Id=["$compile","$parse",function(a,d){var e=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w\d]*)|(?:\(\s*([\$\w][\$\w\d]*)\s*,\s*([\$\w][\$\w\d]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/,h={$setViewValue:o};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,b,c){var d,e,f=this,g={},i=h;f.databound=c.ngModel,f.init=function(a,b,c){i=a,d=b,e=c},f.addOption=function(b){g[b]=!0,i.$viewValue==b&&(a.val(b),e.parent()&&e.remove())},f.removeOption=function(a){this.hasOption(a)&&(delete g[a],i.$viewValue==a&&this.renderUnknownOption(a))},f.renderUnknownOption=function(b){var c="? "+va(b)+" ?";e.val(c),a.prepend(e),a.val(c),e.prop("selected",!0)},f.hasOption=function(a){return g.hasOwnProperty(a)},b.$on("$destroy",function(){f.renderUnknownOption=o})}],link:function(h,i,j,k){function l(a,b,c,d){c.$render=function(){var a=c.$viewValue;d.hasOption(a)?(z.parent()&&z.remove(),b.val(a),""===a&&o.prop("selected",!0)):r(a)&&o?b.val(""):d.renderUnknownOption(a)},b.bind("change",function(){a.$apply(function(){z.parent()&&z.remove(),c.$setViewValue(b.val())})})}function m(a,b,c){var d;c.$render=function(){var a=new wa(c.$viewValue);f(b.find("option"),function(b){b.selected=s(a.get(b.value))})},a.$watch(function(){K(d,c.$viewValue)||(d=I(c.$viewValue),c.$render())}),b.bind("change",function(){a.$apply(function(){var a=[];f(b.find("option"),function(b){b.selected&&a.push(b.value)}),c.$setViewValue(a)})})}function n(b,f,h){function i(){var a,d,e,i,j,q,u,z,A,B,C,D,E,F,G={"":[]},H=[""],I=h.$modelValue,J=p(b)||[],K=m?g(J):J,L={},M=!1;if(t)if(r&&x(I)){M=new wa([]);for(var N=0;N<I.length;N++)L[l]=I[N],M.put(r(b,L),I[N])}else M=new wa(I);for(B=0;z=K.length,B<z;B++){if(L[l]=J[m?L[m]=K[B]:B],a=n(b,L)||"",(d=G[a])||(d=G[a]=[],H.push(a)),t)C=M.remove(r?r(b,L):o(b,L))!=c;else{if(r){var O={};O[l]=I,C=r(b,O)===r(b,L)}else C=I===o(b,L);M=M||C}F=k(b,L),F=F===c?"":F,d.push({id:r?r(b,L):m?K[B]:B,label:F,selected:C})}for(t||(v||null===I?G[""].unshift({id:"",label:"",selected:!M}):M||G[""].unshift({id:"?",label:"",selected:!0})),A=0,u=H.length;A<u;A++){for(a=H[A],d=G[a],s.length<=A?(i={element:y.clone().attr("label",a),label:d.label},j=[i],s.push(j),f.append(i.element)):(j=s[A],i=j[0],i.label!=a&&i.element.attr("label",i.label=a)),D=null,B=0,z=d.length;B<z;B++)e=d[B],(q=j[B+1])?(D=q.element,q.label!==e.label&&D.text(q.label=e.label),q.id!==e.id&&D.val(q.id=e.id),D[0].selected!==e.selected&&D.prop("selected",q.selected=e.selected)):(""===e.id&&v?E=v:(E=w.clone()).val(e.id).attr("selected",e.selected).text(e.label),j.push(q={element:E,label:e.label,id:e.id,selected:e.selected}),D?D.after(E):i.element.append(E),D=E);for(B++;j.length>B;)j.pop().element.remove()}for(;s.length>A;)s.pop()[0].element.remove()}var j;if(!(j=u.match(e)))throw Error("Expected ngOptions in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_ (track by _expr_)?' but got '"+u+"'.");var k=d(j[2]||j[1]),l=j[4]||j[6],m=j[5],n=d(j[3]||""),o=d(j[2]?j[1]:l),p=d(j[7]),q=j[8],r=q?d(j[8]):null,s=[[{element:f,label:""}]];v&&(a(v)(b),v.removeClass("ng-scope"),v.remove()),f.html(""),f.bind("change",function(){b.$apply(function(){var a,d,e,g,i,j,k,n,q=p(b)||[],u={};if(t){for(e=[],j=0,n=s.length;j<n;j++)for(a=s[j],i=1,k=a.length;i<k;i++)if((g=a[i].element)[0].selected){if(d=g.val(),m&&(u[m]=d),r)for(var v=0;v<q.length&&(u[l]=q[v],r(b,u)!=d);v++);else u[l]=q[d];e.push(o(b,u))}}else if("?"==(d=f.val()))e=c;else if(""==d)e=null;else if(r){for(var v=0;v<q.length;v++)if(u[l]=q[v],r(b,u)==d){e=o(b,u);break}}else u[l]=q[d],m&&(u[m]=d),e=o(b,u);h.$setViewValue(e)})}),h.$render=i,b.$watch(i)}if(k[1]){for(var o,p=k[0],q=k[1],t=j.multiple,u=j.ngOptions,v=!1,w=Xb(b.createElement("option")),y=Xb(b.createElement("optgroup")),z=w.clone(),A=0,B=i.children(),C=B.length;A<C;A++)if(""==B[A].value){o=v=B.eq(A);break}if(p.init(q,v,z),t&&(j.required||j.ngRequired)){var D=function(a){return q.$setValidity("required",!j.required||a&&a.length),a};q.$parsers.push(D),q.$formatters.unshift(D),j.$observe("required",function(){D(q.$viewValue)})}u?n(h,i,q):t?m(h,i,q):l(h,i,q,p)}}}}],Jd=["$interpolate",function(a){var b={addOption:o,removeOption:o};return{restrict:"E",priority:100,compile:function(c,d){if(r(d.value)){var e=a(c.text(),!0);e||d.$set("value",c.text())}return function(a,c,d){var f="$selectController",g=c.parent(),h=g.data(f)||g.parent().data(f);h&&h.databound?c.prop("selected",!1):h=b,e?a.$watch(e,function(a,b){d.$set("value",a),a!==b&&h.removeOption(b),h.addOption(a)}):h.addOption(d.value),c.bind("$destroy",function(){h.removeOption(d.value)})}}}}],Kd=q({restrict:"E",terminal:!0});$(),ca(ec),Xb(b).ready(function(){X(b,Y)})}(window,document),angular.element(document).find("head").append('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak{display:none;}ng\\:form{display:block;}</style>'),function(a,b){"use strict";b.module("bootstrap",[]).directive({dropdownToggle:["$document","$location","$window",function(a,b){var c,d=null;return{restrict:"C",link:function(e,f){e.$watch(function(){return b.path()},function(){c&&c()}),f.parent().bind("click",function(){c&&c()}),f.bind("click",function(b){b.preventDefault(),b.stopPropagation(),b=!1,d&&(b=d===f,c()),b||(f.parent().addClass("open"),d=f,c=function(b){b&&b.preventDefault(),b&&b.stopPropagation(),a.unbind("click",c),f.parent().removeClass("open"),d=c=null},a.bind("click",c))})}}}],tabbable:function(){return{restrict:"C",compile:function(a){var c=b.element('<ul class="nav nav-tabs"></ul>'),d=b.element('<div class="tab-content"></div>');d.append(a.contents()),a.append(c).append(d)},controller:["$scope","$element",function(a,c){var d,e=c.contents().eq(0),f=c.controller("ngModel")||{},g=[];f.$render=function(){var a=this.$viewValue;if((d?d.value!=a:a)&&(d&&(d.paneElement.removeClass("active"),d.tabElement.removeClass("active"),d=null),a)){for(var b=0,c=g.length;b<c;b++)if(a==g[b].value){d=g[b];break}d&&(d.paneElement.addClass("active"),d.tabElement.addClass("active"))}},this.addPane=function(c,h){function i(){l.title=h.title,l.value=h.value||h.title,f.$setViewValue||f.$viewValue&&l!=d||(f.$viewValue=l.value),f.$render()}var j=b.element("<li><a href></a></li>"),k=j.find("a"),l={paneElement:c,paneAttrs:h,tabElement:j};return g.push(l),h.$observe("value",i)(),h.$observe("title",function(){i(),k.text(l.title)})(),e.append(j),j.bind("click",function(b){b.preventDefault(),b.stopPropagation(),f.$setViewValue?a.$apply(function(){f.$setViewValue(l.value),f.$render()}):(f.$viewValue=l.value,f.$render())}),function(){l.tabElement.remove();for(var a=0,b=g.length;a<b;a++)l==g[a]&&g.splice(a,1)}}}]}},tabPane:function(){return{require:"^tabbable",restrict:"C",link:function(a,b,c,d){b.bind("$remove",d.addPane(b,c))}}}})}(window,window.angular),function(a,b,c){"use strict";b.module("ngResource",["ng"]).factory("$resource",["$http","$parse",function(a,d){function e(a,b){this.template=a,this.defaults=b||{},this.urlParams={}}function f(m,n,o){function p(a,b){var c={},b=j({},n,b);return i(b,function(b,e){l(b)&&(b=b());var f;b&&b.charAt&&"@"==b.charAt(0)?(f=b.substr(1),f=d(f)(a)):f=b,c[e]=f}),c}function q(a){k(a||{},this)}var r=new e(m),o=j({},g,o);return i(o,function(d,e){d.method=b.uppercase(d.method);var f="POST"==d.method||"PUT"==d.method||"PATCH"==d.method;q[e]=function(b,c,e,g){function m(){u.$resolved=!0}var n,o={},s=h,t=null;switch(arguments.length){case 4:t=g,s=e;case 3:case 2:if(!l(c)){o=b,n=c,s=e;break}if(l(b)){s=b,t=c;break}s=c,t=e;case 1:l(b)?s=b:f?n=b:o=b;break;case 0:break;default:throw"Expected between 0-4 arguments [params, data, success, error], got "+arguments.length+" arguments."}var u=this instanceof q?this:d.isArray?[]:new q(n),v={};return i(d,function(a,b){"params"!=b&&"isArray"!=b&&(v[b]=k(a))}),v.data=n,r.setUrlParams(v,j({},p(n,d.params||{}),o),d.url),o=a(v),u.$resolved=!1,o.then(m,m),u.$then=o.then(function(a){var b=a.data,c=u.$then,e=u.$resolved;return b&&(d.isArray?(u.length=0,i(b,function(a){u.push(new q(a))})):(k(b,u),u.$then=c,u.$resolved=e)),(s||h)(u,a.headers),a.resource=u,a},t).then,u},q.prototype["$"+e]=function(a,b,d){var g,i=p(this),j=h;switch(arguments.length){case 3:i=a,j=b,g=d;break;case 2:case 1:l(a)?(j=a,g=b):(i=a,j=b||h);case 0:break;default:throw"Expected between 1-3 arguments [params, success, error], got "+arguments.length+" arguments."}
q[e].call(this,i,f?this:c,j,g)}}),q.bind=function(a){return f(m,j({},n,a),o)},q}var g={get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},delete:{method:"DELETE"}},h=b.noop,i=b.forEach,j=b.extend,k=b.copy,l=b.isFunction;return e.prototype={setUrlParams:function(a,c,d){var e,f,g=this,h=d||g.template,j=g.urlParams={};i(h.split(/\W/),function(a){a&&RegExp("(^|[^\\\\]):"+a+"(\\W|$)").test(h)&&(j[a]=!0)}),h=h.replace(/\\:/g,":"),c=c||{},i(g.urlParams,function(a,d){e=c.hasOwnProperty(d)?c[d]:g.defaults[d],b.isDefined(e)&&null!==e?(f=encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"%20").replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+"),h=h.replace(RegExp(":"+d+"(\\W|$)","g"),f+"$1")):h=h.replace(RegExp("(/?):"+d+"(\\W|$)","g"),function(a,b,c){return"/"==c.charAt(0)?c:b+c})}),h=h.replace(/\/+$/,""),h=h.replace(/\/\.(?=\w+($|\?))/,"."),a.url=h.replace(/\/\\\./,"/."),i(c,function(b,c){g.urlParams[c]||(a.params=a.params||{},a.params[c]=b)})}},f}])}(window,window.angular),function(a,b){"use strict";function c(a){var b,c={},a=a.split(",");for(b=0;b<a.length;b++)c[a[b]]=!0;return c}function d(a,c){function d(a,d,g,h){if(d=b.lowercase(d),u[d])for(;p.last()&&v[p.last()];)f("",p.last());t[d]&&p.last()==d&&f("",d),(h=q[d]||!!h)||p.push(d);var i={};g.replace(j,function(a,b,c,d,f){i[b]=e(c||d||f||"")}),c.start&&c.start(d,i,h)}function f(a,d){var e,f=0;if(d=b.lowercase(d))for(f=p.length-1;f>=0&&p[f]!=d;f--);if(f>=0){for(e=p.length-1;e>=f;e--)c.end&&c.end(p[e]);p.length=f}}var g,o,p=[],r=a;for(p.last=function(){return p[p.length-1]};a;){if(o=!0,p.last()&&w[p.last()]?(a=a.replace(RegExp("(.*)<\\s*\\/\\s*"+p.last()+"[^>]*>","i"),function(a,b){return b=b.replace(m,"$1").replace(n,"$1"),c.chars&&c.chars(e(b)),""}),f("",p.last())):(0===a.indexOf("\x3c!--")?(g=a.indexOf("--\x3e"))>=0&&(c.comment&&c.comment(a.substring(4,g)),a=a.substring(g+3),o=!1):l.test(a)?(g=a.match(i))&&(a=a.substring(g[0].length),g[0].replace(i,f),o=!1):k.test(a)&&(g=a.match(h))&&(a=a.substring(g[0].length),g[0].replace(h,d),o=!1),o&&(g=a.indexOf("<"),o=g<0?a:a.substring(0,g),a=g<0?"":a.substring(g),c.chars&&c.chars(e(o)))),a==r)throw"Parse Error: "+a;r=a}f()}function e(a){return A.innerHTML=a.replace(/</g,"&lt;"),A.innerText||A.textContent||""}function f(a){return a.replace(/&/g,"&amp;").replace(p,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function g(a){var c=!1,d=b.bind(a,a.push);return{start:function(a,e,g){a=b.lowercase(a),!c&&w[a]&&(c=a),!c&&1==x[a]&&(d("<"),d(a),b.forEach(e,function(a,c){var e=b.lowercase(c);1!=z[e]||!0===y[e]&&!a.match(o)||(d(" "),d(c),d('="'),d(f(a)),d('"'))}),d(g?"/>":">"))},end:function(a){a=b.lowercase(a),!c&&1==x[a]&&(d("</"),d(a),d(">")),a==c&&(c=!1)},chars:function(a){c||d(f(a))}}}var h=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,i=/^<\s*\/\s*([\w:-]+)[^>]*>/,j=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,k=/^</,l=/^<\s*\//,m=/<\!--(.*?)--\>/g,n=/<!\[CDATA\[(.*?)]]\>/g,o=/^((ftp|https?):\/\/|mailto:|tel:|#)/,p=/([^\#-~| |!])/g,q=c("area,br,col,hr,img,wbr"),r=c("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),s=c("rp,rt"),t=b.extend({},s,r),u=b.extend({},r,c("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),v=b.extend({},s,c("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),w=c("script,style"),x=b.extend({},q,u,v,t),y=c("background,cite,href,longdesc,src,usemap"),z=b.extend({},y,c("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,span,start,summary,target,title,type,valign,value,vspace,width")),A=document.createElement("pre");b.module("ngSanitize",[]).value("$sanitize",function(a){var b=[];return d(a,g(b)),b.join("")}),b.module("ngSanitize").directive("ngBindHtml",["$sanitize",function(a){return function(b,c,d){c.addClass("ng-binding").data("$binding",d.ngBindHtml),b.$watch(d.ngBindHtml,function(b){b=a(b),c.html(b||"")})}}]),b.module("ngSanitize").filter("linky",function(){var a=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s\.\;\,\(\)\{\}\<\>]/,c=/^mailto:/;return function(d,e){if(!d)return d;var f,h,i,j=d,k=[],l=g(k),m={};for(b.isDefined(e)&&(m.target=e);f=j.match(a);)h=f[0],f[2]==f[3]&&(h="mailto:"+h),i=f.index,l.chars(j.substr(0,i)),m.href=h,l.start("a",m),l.chars(f[0].replace(c,"")),l.end("a"),j=j.substring(i+f[0].length);return l.chars(j),k.join("")}})}(window,window.angular),Logger.setLevel(Logger.INFO),window.LogBuffer=100,"localStorage"in window){if("logLevel"in window.localStorage){var logLevel=JSON.parse(window.localStorage.logLevel);Logger.setLevel(logLevel)}if("showLog"in window.localStorage){var showLog=window.localStorage.showLog;if("true"===showLog){var container=document.getElementById("log-panel");container&&container.setAttribute("style","bottom: 50%;")}}if("logBuffer"in window.localStorage){var logBuffer=window.localStorage.logBuffer;window.LogBuffer=parseInt(logBuffer)}else window.localStorage.logBuffer=window.LogBuffer}var consoleLogger=null;"console"in window&&(window.JSConsole=window.console,consoleLogger=function(a,b){var c=window.JSConsole,d=c.log;if(b.name&&(a[0]="["+b.name+"] "+a[0]),b.level===Logger.WARN&&"warn"in c?d=c.warn:b.level===Logger.ERROR&&"error"in c?d=c.error:b.level===Logger.INFO&&"info"in c&&(d=c.info),d&&d.apply)try{d.apply(c,a)}catch(b){c.log(a)}}),Logger.getType=function(a){return Object.prototype.toString.call(a).slice(8,-1)},Logger.isError=function(a){return a&&"Error"===Logger.getType(a)},Logger.isArray=function(a){return a&&"Array"===Logger.getType(a)},Logger.isObject=function(a){return a&&"Object"===Logger.getType(a)},Logger.isString=function(a){return a&&"String"===Logger.getType(a)},window.logInterceptors=[],Logger.formatStackTraceString=function(a){var b=a.split("\n");if(b.length>100){var c=20,d=b.length-2*c;b.splice(c,d,">>> snipped "+d+" frames <<<")}for(var e='<div class="log-stack-trace">\n',f=0;f<b.length;f++){var g=b[f];0!==g.trim().length&&(e=e+"<p>"+g+"</p>\n")}return e+="</div>\n"},Logger.setHandler(function(a,b){function c(){e&&(e.appendChild(f),e.childNodes.length>parseInt(window.LogBuffer)&&e.removeChild(e.firstChild),q&&(e.scrollTop=e.scrollHeight)),consoleLogger&&consoleLogger(a,b);for(var c=window.logInterceptors,d=0;d<c.length;d++)c[d](b.level.name,g)}var d=document.getElementById("log-panel"),e=document.getElementById("log-panel-statements"),f=document.createElement("li"),g="",h=[];if("ERROR"===b.level.name&&1===a.length&&Logger.isString(a[0])){var i=a[0],j=i.split(/\n/);if(j.length>1){var k="Error: Jolokia-Error: ";if(0==j[0].search(k)){var l=j[0].slice(k.length);window.JSConsole.info("msg: ",l);try{var m=JSON.parse(l),n=new Error;n.message=m.error,n.stack=m.stacktrace.replace("\\t","&nbsp;&nbsp").replace("\\n","\n"),a=[n]}catch(a){}}else{var n=new Error;n.message=j[0],n.stack=i,a=[n]}}}for(var o=0;o<a.length;o++){var i=a[o];if(Logger.isArray(i)||Logger.isObject(i)){var p="";try{p='<pre data-language="javascript">'+JSON.stringify(i,null,2)+"</pre>"}catch(n){p=i+" (failed to convert) "}g+=p}else Logger.isError(i)?("message"in i&&(g+=i.message),"stack"in i&&h.push(function(){var a=Logger.formatStackTraceString(i.stack),c=Logger;b.name&&(c=Logger.get(b.name)),c.info("Stack trace: ",a)})):g+=i}b.name&&(g='[<span class="green">'+b.name+"</span>] "+g),f.innerHTML=g,f.className=b.level.name;var q=!1;d&&((d.scrollHeight=0)&&(q=!0),e.scrollTop>e.scrollHeight-d.scrollHeight-200&&(q=!0)),c(),h.forEach(function(a){a()})}),window.onerror=function(a,b,c,d,e){if(e&&Logger.isObject(e))Logger.get("Window").error(e);else{var f=' (<a href="'+b+":"+c+'">'+b+":"+c;d&&(f=f+":"+d),f+="</a>)",Logger.get("Window").error(a,f)}return!0},window.console={log:Logger.debug,warn:Logger.warn,error:Logger.error,info:Logger.info},angular.module("elasticjs.service",[]).factory("ejsResource",["$http",function(a){return function(b){var c=window.ejs||{},d=function(a,b,c){return a.then(function(a){return(b||angular.noop)(a.data),a.data},function(a){return(c||angular.noop)(a.data),a.data})};return angular.isFunction(b)?b={server:b()}:b!==Object(b)&&(b={server:b}),null==b.server&&(b.server=""),c.client={server:function(a){return null==a?b.server:(b.server=a,this)},post:function(c,e,f,g){c=b.server+c;var h={url:c,data:e,method:"POST"};return d(a(angular.extend(h,b)),f,g)},get:function(c,e,f,g){c=b.server+c;var h={url:c,params:e,method:"GET"};return d(a(angular.extend(h,b)),f,g)},put:function(c,e,f,g){c=b.server+c;var h={url:c,data:e,method:"PUT"};return d(a(angular.extend(h,b)),f,g)},del:function(c,e,f,g){c=b.server+c;var h={url:c,data:e,method:"DELETE"};return d(a(angular.extend(h,b)),f,g)},head:function(c,d,e,f){c=b.server+c;var g={url:c,params:d,method:"HEAD"};return a(angular.extend(g,b)).then(function(a){return(e||angular.noop)(a.headers()),a.headers()},function(a){(f||angular.noop)(void 0)})}},c}}]);var hawtioPluginLoader=function(a,b,c){var d=Logger.get("PluginLoader");return a.log=d,a.urls=[],a.modules=[],a.tasks=[],a.registerPreBootstrapTask=function(b){a.tasks.push(b)},a.addModule=function(b){d.debug("Adding module: "+b),a.modules.push(b)},a.addUrl=function(b){d.debug("Adding URL: "+b),a.urls.push(b)},a.getModules=function(){return a.modules.clone()},a.parseQueryString=function(a){var c=null,d=b.location.href.split("?");d&&(c=d.last(d.length-1).join(""));var e=a||c||"?",f=-1;angular.isArray(e)&&(e=e[0]),f=e.indexOf("?"),f>=0&&(e=e.substr(f+1)),(f=e.indexOf("#/"))>0&&(e=e.substr(0,f));var g={};return e.replace(/([^&=]+)=?([^&]*)(?:&+|$)/g,function(a,b,c){(g[b]=g[b]||[]).push(c)}),g},a.loaderCallback=null,a.setLoaderCallback=function(b){a.loaderCallback=b,d.debug("Setting callback to : ",a.loaderCallback)},a.loadPlugins=function(b){var c=a.loaderCallback,e={},f=a.urls.length,g=f,h=function(){a.tasks.push(b);var c=a.tasks.length,d=function(){var b=a.tasks.shift();b?(a.log.debug("Executing task ",c-a.tasks.length),b(d)):a.log.debug("All tasks executed")};d()},i=function(){var a=0;$.each(e,function(b,c){a+=c.Scripts.length});var b=a,f=function(){$.ajaxSetup({async:!0}),a-=1,c&&c.scriptLoaderCallback(c,b,a+1),0==a&&h()};a>0?$.each(e,function(a,b){b.Scripts.forEach(function(a){var c=b.Context+"/"+a;d.debug("Fetching script: ",c),$.ajaxSetup({async:!1}),$.getScript(c).done(function(a){d.debug("Loaded script: ",c)}).fail(function(a,b,e){d.info('Failed loading script: "',e.message,'" (<a href="',c,":",e.lineNumber,'">',c,":",e.lineNumber,"</a>)")}).always(f)})}):($.ajaxSetup({async:!0}),h())};if(0==f)i();else{var j=function(){f-=1,c&&c.urlLoaderCallback(c,g,f+1),0==f&&i()},k=new RegExp(/^jolokia:/);$.each(a.urls,function(a,b){if(k.test(b)){var c=b.split(":");c=c.reverse(),c.pop(),b=c.pop();var f=c.reverse().join(":"),g=new Jolokia(b);try{var h=g.getAttribute(f,null);$.extend(e,h)}catch(a){}j()}else d.debug("Trying url: ",b),$.get(b,function(a){if(angular.isString(a))try{a=angular.fromJson(a)}catch(a){return}$.extend(e,a)}).always(function(){j()})})}},a.debug=function(){d.debug("urls and modules"),d.debug(a.urls),d.debug(a.modules)},a.setLoaderCallback({scriptLoaderCallback:function(a,b,c){d.debug("Total scripts: ",b," Remaining: ",c)},urlLoaderCallback:function(a,b,c){d.debug("Total URLs: ",b," Remaining: ",c)}}),a}(hawtioPluginLoader||{},window);!function(){var a=function(a){function b(d){if(!(this instanceof arguments.callee))return new b(d);this.CLIENT_VERSION="1.1.4";var e=[],f={},g=!1;"string"==typeof d&&(d={url:d}),a.extend(f,q,d),this.request=function(c,d){var e=a.extend({},f,d);p(e.url,"No URL given");var g={};if(a.each(["username","password","timeout"],function(a,b){e[b]&&(g[b]=e[b])}),g.username&&g.password&&(window.btoa&&(g.beforeSend=function(a){var b=g.username+":"+g.password;a.setRequestHeader("Authorization","Basic "+window.btoa(b))}),g.xhrFields={withCredentials:!0}),"post"===i(c,e)?(a.extend(g,s),g.data=JSON.stringify(c),g.url=l(e.url)):(a.extend(g,r),g.dataType=e.jsonp?"jsonp":"json",g.url=e.url+"/"+k(c)),g.url=j(g.url,e),e.ajaxError&&(g.error=e.ajaxError),e.success){var m=h(e.success),n=h(e.error);return g.success=function(c){for(var d=a.isArray(c)?c:[c],e=0;e<d.length;e++){var f=d[e];b.isError(f)?n(f,e):m(f,e)}},a.ajax(g),null}if(e.jsonp)throw Error("JSONP is not supported for synchronous requests");g.async=!1;var q=a.ajax(g);return o(q)?a.parseJSON(q.responseText):null},this.register=function(){if(arguments.length<2)throw"At a least one request must be provided";var b,c=arguments[0],d=Array.prototype.slice.call(arguments,1);if("object"==typeof c){if(c.success&&c.error)b={success:c.success,error:c.error};else{if(!c.callback)throw"Either 'callback' or ('success' and 'error') callback must be provided when registering a Jolokia job";b={callback:c.callback}}b=a.extend(b,{config:c.config,onlyIfModified:c.onlyIfModified})}else{if("function"!=typeof c)throw"First argument must be either a callback func or an object with 'success' and 'error' attributes";b={success:null,error:null,callback:c}}if(!d)throw"No requests given";b.requests=d;var f=e.length;return e[f]=b,f},this.unregister=function(a){a<e.length&&(e[a]=void 0)},this.jobs=function(){for(var a=[],b=e.length,c=0;c<b;c++)e[c]&&a.push(c);return a},this.start=function(a){if(a=a||f.fetchInterval||3e4,g){if(a===f.fetchInterval)return;this.stop()}f.fetchInterval=a,this.timerId=setInterval(c(this,e),a),g=!0},this.stop=function(){(g||void 0==this.timerId)&&(clearInterval(this.timerId),this.timerId=null,g=!1)},this.isRunning=function(){return g}}function c(a,b){return function(){var c,h,i=[],j=[],k=b.length,l=[];for(c=0;c<k;c++){var m=b[c];if(m){var n=m.requests.length;if(m.success){var o=g(m,c),p=f(m,c);for(h=0;h<n;h++)l.push(d(m,h)),j.push(o),i.push(p)}else{var q=e(m,a);for(h=0;h<n-1;h++)l.push(d(m,h)),j.push(q.cb),i.push(q.cb);l.push(d(m,n-1)),j.push(q.lcb),i.push(q.lcb)}}}var r={success:function(b,c){return j[c].apply(a,[b,c])},error:function(b,c){return i[c].apply(a,[b,c])}};return a.request(l,r)}}function d(b,c){var d=b.requests[c],e=b.config||{},f=b.onlyIfModified&&b.lastModified?{ifModifiedSince:b.lastModified}:{};return d.config=a.extend({},e,d.config,f),d}function e(a,b){function c(a,b){304!=a.status&&((0==f||a.timestamp<f)&&(f=a.timestamp),d.push(a))}var d=[],e=a.callback,f=0;return{cb:c,lcb:function(g,h){c(g),d.length>0&&(a.lastModified=f,e.apply(b,d))}}}function f(a,b){var c=a.error;return function(a,d){304!=a.status&&c&&c(a,b,d)}}function g(a,b){var c=a.success;return function(d,e){c&&(a.onlyIfModified&&(a.lastModified=d.timestamp),c(d,b,e))}}function h(b){if(null==b)return function(a){console.warn("Ignoring response "+JSON.stringify(a))};if("ignore"===b)return function(){};var c=a.isArray(b)?b:[b];return function(a,b){c[b%c.length](a,b)}}function i(b,c){var d,e=c&&c.method?c.method.toLowerCase():null;if(e){if("get"===e){if(a.isArray(b))throw new Error("Cannot use GET with bulk requests");if("read"===b.type.toLowerCase()&&a.isArray(b.attribute))throw new Error("Cannot use GET for read with multiple attributes");if(b.target)throw new Error("Cannot use GET request with proxy mode");if(b.config)throw new Error("Cannot use GET with request specific config")}d=e}else d=a.isArray(b)||b.config||"read"===b.type.toLowerCase()&&a.isArray(b.attribute)||b.target?"post":"get";if(c.jsonp&&"post"===d)throw new Error("Can not use JSONP with POST requests");return d}function j(b,c){var d=b.indexOf("?")>0?"&":"?";return a.each(t,function(a,e){null!=c[e]&&(b+=d+e+"="+c[e],d="&")}),b}function k(c){var d=c.type;p(d,"No request type given for building a GET request"),d=d.toLowerCase();var e=u[d];p(e,"Unknown request type "+d);var f=e(c),g=f.parts||{},h=d;return a.each(g,function(a,c){h+="/"+b.escape(c)}),f.path&&(h+=("/"==f.path[0]?"":"/")+f.path),h}function l(a){return a.replace(/\/*$/,"/")}function m(b){if(null==b)return"[null]";if(a.isArray(b)){for(var c="",d=0;d<b.length;d++)c+=null==b?"[null]":n(b[d]),d<b.length-1&&(c+=",");return c}return n(b)}function n(a){return"string"==typeof a&&0==a.length?'""':a.toString()}function o(a){try{return!a.status&&"file:"===location.protocol||a.status>=200&&a.status<300||304===a.status||1223===a.status}catch(a){}return!1}function p(a,b){if(null==a)throw new Error(b)}var q={type:"POST",jsonp:!1},r={type:"GET"},s={type:"POST",processData:!1,dataType:"json",contentType:"text/json"},t=["maxDepth","maxCollectionSize","maxObjects","ignoreErrors","canonicalNaming","serializeException","includeStackTrace","ifModifiedSince"],u={read:function(a){return null==a.attribute?{parts:[a.mbean]}:{parts:[a.mbean,a.attribute],path:a.path}},write:function(a){return{parts:[a.mbean,a.attribute,m(a.value)],path:a.path}},exec:function(b){var c=[b.mbean,b.operation];return b.arguments&&b.arguments.length>0&&a.each(b.arguments,function(a,b){c.push(m(b))}),{parts:c}},version:function(){return{}},search:function(a){return{parts:[a.mbean]}},list:function(a){return{path:a.path}}};return b.prototype.escape=b.escape=function(a){return encodeURIComponent(a.replace(/!/g,"!!").replace(/\//g,"!/"))},b.prototype.isError=b.isError=function(a){return null==a.status||200!=a.status},b};!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):a.Jolokia=b(a.jQuery)}(this,function(b){return a(b)})}(),function(a){function b(a){return a}function c(){}function d(a){return Math.floor(a/1e3)}function e(a){var b=a.indexOf("|"),c=a.substring(0,b),d=c.lastIndexOf(","),e=c.lastIndexOf(",",d-1),f=c.lastIndexOf(",",e-1);c.substring(f+1,e),c.substring(d+1);return a.substring(b+1).split(",").slice(1).map(function(a){return+a})}function f(a){if(!(a instanceof c))throw new Error("invalid context");this.context=a}function g(a,b){return function(c,d,e,f){a(new Date(+c+b),new Date(+d+b),e,f)}}function h(a,b){f.call(this,a),b=+b;var c=b+"";this.valueOf=function(){return b},this.toString=function(){return c}}function i(a,b){function c(b,c){if(c instanceof f){if(b.context!==c.context)throw new Error("mismatch context")}else c=new h(b.context,c);f.call(this,b.context),this.left=b,this.right=c,this.toString=function(){return b+" "+a+" "+c}}var d=c.prototype=Object.create(f.prototype);return d.valueAt=function(a){return b(this.left.valueAt(a),this.right.valueAt(a))},d.shift=function(a){return new c(this.left.shift(a),this.right.shift(a))},d.on=function(a,b){return arguments.length<2?this.left.on(a):(this.left.on(a,b),this.right.on(a,b),this)},function(a){return new c(this,a)}}function j(a){return 16777214&a}function k(a){return(a+1&16777214)-1}function l(a){a.style("position","absolute").style("top",0).style("bottom",0).style("width","1px").style("pointer-events","none")}function m(a){return a+"px"}var n=a.cubism={version:"1.2.0"},o=0;n.option=function(a,b){var c=n.options(a);return c.length?c[0]:b},n.options=function(a,b){for(var c,d=location.search.substring(1).split("&"),e=[],f=-1,g=d.length;++f<g;)(c=d[f].split("="))[0]==a&&e.push(decodeURIComponent(c[1]));return e.length||arguments.length<2?e:b},n.context=function(){function a(){var a=Date.now();return d=new Date(Math.floor((a-l-m)/j)*j),b=new Date(d-k*j),f=new Date(Math.floor((a-l)/j)*j),e=new Date(f-k*j),p.domain([b,d]),i}var b,d,e,f,g,h,i=new c,j=1e4,k=1440,l=5e3,m=5e3,n=d3.dispatch("prepare","beforechange","change","focus","start","stop"),p=i.scale=d3.time.scale().range([0,k]);return i.start=function(){g&&clearTimeout(g);var a=+f+l-Date.now();return a<m&&(a+=j),g=setTimeout(function a(){f=new Date(Math.floor((Date.now()-l)/j)*j),e=new Date(f-k*j),n.prepare.call(i,e,f),setTimeout(function(){p.domain([b=e,d=f]),n.beforechange.call(i,e,f),n.change.call(i,e,f),n.focus.call(i,h)},m),g=setTimeout(a,j)},a),n.start.call(i),i},i.stop=function(){return g=clearTimeout(g),n.stop.call(i),i},g=setTimeout(i.start,10),i.step=function(b){return arguments.length?(j=+b,a()):j},i.size=function(b){return arguments.length?(p.range([0,k=+b]),a()):k},i.serverDelay=function(b){return arguments.length?(l=+b,a()):l},i.clientDelay=function(b){return arguments.length?(m=+b,a()):m},i.focus=function(a){return n.focus.call(i,h=a),i},i.on=function(a,c){return arguments.length<2?n.on(a):(n.on(a,c),null!=c&&(/^prepare(\.|$)/.test(a)&&c.call(i,e,f),/^beforechange(\.|$)/.test(a)&&c.call(i,b,d),/^change(\.|$)/.test(a)&&c.call(i,b,d),/^focus(\.|$)/.test(a)&&c.call(i,h)),i)},d3.select(window).on("keydown.context-"+ ++o,function(){switch(!d3.event.metaKey&&d3.event.keyCode){case 37:null==h&&(h=k-1),h>0&&i.focus(--h);break;case 39:null==h&&(h=k-2),h<k-1&&i.focus(++h);break;default:return}d3.event.preventDefault()}),a()};var p=n.context.prototype=c.prototype;n.registerPlugin=function(a,b){p[a]=b},p.constant=function(a){return new h(this,+a)},p.cube=function(a){arguments.length||(a="");var b={},c=this;return b.metric=function(b){return c.metric(function(c,d,e,f){d3.json(a+"/1.0/metric?expression="+encodeURIComponent(b)+"&start="+q(c)+"&stop="+q(d)+"&step="+e,function(a){if(!a)return f(new Error("unable to load data"));f(null,a.map(function(a){return a.value}))})},b+="")},b.toString=function(){return a},b};var q=d3.time.format.iso;p.graphite=function(a){arguments.length||(a="");var b={},c=this;return b.metric=function(b){var f="sum",g=c.metric(function(c,g,h,i){var j=b;1e4!==h&&(j="summarize("+j+",'"+(h%36e5?h%6e4?h+"sec":h/6e4+"min":h/36e5+"hour")+"','"+f+"')"),d3.text(a+"/render?format=raw&target="+encodeURIComponent("alias("+j+",'')")+"&from="+d(c-2*h)+"&until="+d(g-1e3),function(a){if(!a)return i(new Error("unable to load data"));i(null,e(a))})},b+="");return g.summarize=function(a){return f=a,g},g},b.find=function(b,c){d3.json(a+"/metrics/find?format=completer&query="+encodeURIComponent(b),function(a){if(!a)return c(new Error("unable to find metrics"));c(null,a.metrics.map(function(a){return a.path}))})},b.toString=function(){return a},b};var r=f.prototype;n.metric=f,r.valueAt=function(){return NaN},r.alias=function(a){return this.toString=function(){return a},this},r.extent=function(){for(var a,b=0,c=this.context.size(),d=1/0,e=-1/0;++b<c;)a=this.valueAt(b),a<d&&(d=a),a>e&&(e=a);return[d,e]},r.on=function(a,b){return arguments.length<2?null:this},r.shift=function(){return this},r.on=function(){return arguments.length<2?null:this},p.metric=function(a,b){function c(b,c){var d=Math.min(n,Math.round((b-l)/m));if(d&&!h){h=!0,d=Math.min(n,d+s);var e=new Date(c-d*m);a(e,c,m,function(a,b){if(h=!1,a)return console.warn(a);for(var d=isFinite(l)?Math.round((e-l)/m):0,f=0,g=b.length;f<g;++f)p[f+d]=b[f];q.change.call(j,l,c)})}}function d(a,b){isFinite(l)||(l=a),p.splice(0,Math.max(0,Math.min(n,Math.round((a-l)/m)))),l=a,e=b}var e,h,i=this,j=new f(i),k=".metric-"+ ++o,l=-1/0,m=i.step(),n=i.size(),p=[],q=d3.dispatch("change"),r=0;return j.valueAt=function(a){return p[a]},j.shift=function(b){return i.metric(g(a,+b))},j.on=function(a,b){return arguments.length?(null==b?null!=q.on(a)&&0==--r&&i.on("prepare"+k,null).on("beforechange"+k,null):null==q.on(a)&&1==++r&&i.on("prepare"+k,c).on("beforechange"+k,d),q.on(a,b),null!=b&&/^change(\.|$)/.test(a)&&b.call(i,l,e),j):q.on(a)},arguments.length>1&&(j.toString=function(){return b}),j};var s=6,t=h.prototype=Object.create(f.prototype);t.valueAt=function(){return+this},t.extent=function(){return[+this,+this]},r.add=i("+",function(a,b){return a+b}),r.subtract=i("-",function(a,b){return a-b}),r.multiply=i("*",function(a,b){return a*b}),r.divide=i("/",function(a,b){return a/b}),p.horizon=function(){function a(a){a.on("mousemove.horizon",function(){c.focus(Math.round(d3.mouse(this)[0]))}).on("mouseout.horizon",function(){c.focus(null)}),a.append("canvas").attr("width",f).attr("height",g),a.append("span").attr("class","title").text(k),a.append("span").attr("class","value"),a.each(function(a,k){function n(a,b){A.save();var i=v.extent();r=i.every(isFinite),null!=x&&(i=x);var j=0,k=Math.max(-i[0],i[1]);if(this===c){if(k==q){j=f-s;var l=(a-y)/z;if(l<f){var m=e.getContext("2d");m.clearRect(0,0,f,g),m.drawImage(A.canvas,l,0,f-l,g,0,0,f-l,g),A.clearRect(0,0,f,g),A.drawImage(m.canvas,0,0)}}y=a}h.domain([0,q=k]),A.clearRect(j,0,f-j,g);for(var n,o=0;o<C;++o){A.fillStyle=w[C+o];var p=(o-C+1)*g;h.range([C*g+p,p]),p=h(0);for(var t,u=j,B=f;u<B;++u)t=v.valueAt(u),t<=0?n=!0:A.fillRect(u,t=h(t),1,p-t)}if(n){"offset"===d&&(A.translate(0,g),A.scale(1,-1));for(var o=0;o<C;++o){A.fillStyle=w[C-1-o];var p=(o-C+1)*g;h.range([C*g+p,p]),p=h(0);for(var t,u=j,B=f;u<B;++u)(t=v.valueAt(u))>=0||A.fillRect(u,h(-t),1,p-h(-t))}}A.restore()}function p(a){null==a&&(a=f-1);var b=v.valueAt(a);B.datum(b).text(isNaN(b)?null:l)}var q,r,t=this,u=++o,v="function"==typeof i?i.call(t,a,k):i,w="function"==typeof m?m.call(t,a,k):m,x="function"==typeof j?j.call(t,a,k):j,y=-1/0,z=c.step(),A=d3.select(t).select("canvas"),B=d3.select(t).select(".value"),C=w.length>>1;A.datum({id:u,metric:v}),A=A.node().getContext("2d"),c.on("change.horizon-"+u,n),c.on("focus.horizon-"+u,p),v.on("change.horizon-"+u,function(a,c){n(a,c),p(),r&&v.on("change.horizon-"+u,b)})})}var c=this,d="offset",e=document.createElement("canvas"),f=e.width=c.size(),g=e.height=30,h=d3.scale.linear().interpolate(d3.interpolateRound),i=b,j=null,k=b,l=d3.format(".2s"),m=["#08519c","#3182bd","#6baed6","#bdd7e7","#bae4b3","#74c476","#31a354","#006d2c"];return a.remove=function(a){function b(a){a.metric.on("change.horizon-"+a.id,null),c.on("change.horizon-"+a.id,null),c.on("focus.horizon-"+a.id,null)}a.on("mousemove.horizon",null).on("mouseout.horizon",null),a.selectAll("canvas").each(b).remove(),a.selectAll(".title,.value").remove()},a.mode=function(b){return arguments.length?(d=b+"",a):d},a.height=function(b){return arguments.length?(e.height=g=+b,a):g},a.metric=function(b){return arguments.length?(i=b,a):i},a.scale=function(b){return arguments.length?(h=b,a):h},a.extent=function(b){return arguments.length?(j=b,a):j},a.title=function(b){return arguments.length?(k=b,a):k},a.format=function(b){return arguments.length?(l=b,a):l},a.colors=function(b){return arguments.length?(m=b,a):m},a},p.comparison=function(){function a(a){a.on("mousemove.comparison",function(){c.focus(Math.round(d3.mouse(this)[0]))}).on("mouseout.comparison",function(){c.focus(null)}),a.append("canvas").attr("width",d).attr("height",e),a.append("span").attr("class","title").text(l),a.append("span").attr("class","value primary"),a.append("span").attr("class","value change"),a.each(function(a,l){function r(a,b){B.save(),B.clearRect(0,0,d,e);var g=x.extent(),h=y.extent(),i=null==z?g:z;f.domain(i).range([e,0]),u=g.concat(h).every(isFinite);var l=a/c.step()&1?k:j;B.fillStyle=p[2];for(var m=0,n=d;m<n;++m){var o=f(x.valueAt(m)),r=f(y.valueAt(m));o<r&&B.fillRect(l(m),o,1,r-o)}for(B.fillStyle=p[0],m=0;m<n;++m){var o=f(x.valueAt(m)),r=f(y.valueAt(m));o>r&&B.fillRect(l(m),r,1,o-r)}for(B.fillStyle=p[3],m=0;m<n;++m){var o=f(x.valueAt(m)),r=f(y.valueAt(m));o<=r&&B.fillRect(l(m),o,1,q)}for(B.fillStyle=p[1],m=0;m<n;++m){var o=f(x.valueAt(m)),r=f(y.valueAt(m));o>r&&B.fillRect(l(m),o-q,1,q)}B.restore()}function s(a){null==a&&(a=d-1);var b=x.valueAt(a),c=y.valueAt(a),e=(b-c)/c;C.datum(b).text(isNaN(b)?null:m),D.datum(e).text(isNaN(e)?null:n).attr("class","value change "+(e>0?"positive":e<0?"negative":""))}function t(a,c){r(a,c),s(),u&&(x.on("change.comparison-"+w,b),y.on("change.comparison-"+w,b))}var u,v=this,w=++o,x="function"==typeof g?g.call(v,a,l):g,y="function"==typeof h?h.call(v,a,l):h,z="function"==typeof i?i.call(v,a,l):i,A=d3.select(v),B=A.select("canvas"),C=A.select(".value.primary"),D=A.select(".value.change");B.datum({id:w,primary:x,secondary:y}),B=B.node().getContext("2d"),x.on("change.comparison-"+w,t),y.on("change.comparison-"+w,t),c.on("change.comparison-"+w,r),c.on("focus.comparison-"+w,s)})}var c=this,d=c.size(),e=120,f=d3.scale.linear().interpolate(d3.interpolateRound),g=function(a){return a[0]},h=function(a){return a[1]},i=null,l=b,m=u,n=v,p=["#9ecae1","#225b84","#a1d99b","#22723a"],q=1.5;return a.remove=function(a){function b(a){a.primary.on("change.comparison-"+a.id,null),a.secondary.on("change.comparison-"+a.id,null),c.on("change.comparison-"+a.id,null),c.on("focus.comparison-"+a.id,null)}a.on("mousemove.comparison",null).on("mouseout.comparison",null),a.selectAll("canvas").each(b).remove(),a.selectAll(".title,.value").remove()},a.height=function(b){return arguments.length?(e=+b,a):e},a.primary=function(b){return arguments.length?(g=b,a):g},a.secondary=function(b){return arguments.length?(h=b,a):h},a.scale=function(b){return arguments.length?(f=b,a):f},a.extent=function(b){return arguments.length?(i=b,a):i},a.title=function(b){return arguments.length?(l=b,a):l},a.formatPrimary=function(b){return arguments.length?(m=b,a):m},a.formatChange=function(b){return arguments.length?(n=b,a):n},a.colors=function(b){return arguments.length?(p=b,a):p},a.strokeWidth=function(b){return arguments.length?(q=b,a):q},a};var u=d3.format(".2s"),v=d3.format("+.0%");p.axis=function(){function a(f){var g,h=++o,i=f.append("svg").datum({id:h}).attr("width",b.size()).attr("height",Math.max(28,-a.tickSize())).append("g").attr("transform","translate(0,"+("top"===d.orient()?27:4)+")").call(d);b.on("change.axis-"+h,function(){i.call(d),g||(g=d3.select(i.node().appendChild(i.selectAll("text").node().cloneNode(!0))).style("display","none").text(null))}),b.on("focus.axis-"+h,function(a){if(g)if(null==a)g.style("display","none"),i.selectAll("text").style("fill-opacity",null);else{g.style("display",null).attr("x",a).text(e(c.invert(a)));var b=g.node().getComputedTextLength()+6;i.selectAll("text").style("fill-opacity",function(d){return Math.abs(c(d)-a)<b?0:1})}})}var b=this,c=b.scale,d=d3.svg.axis().scale(c),e=b.step()<6e4?w:b.step()<864e5?x:y;return a.remove=function(a){function c(a){b.on("change.axis-"+a.id,null),b.on("focus.axis-"+a.id,null)}a.selectAll("svg").each(c).remove()},d3.rebind(a,d,"orient","ticks","tickSubdivide","tickSize","tickPadding","tickFormat")};var w=d3.time.format("%I:%M:%S %p"),x=d3.time.format("%I:%M %p"),y=d3.time.format("%B %d");p.rule=function(){function a(a){var b=++o,e=a.append("div").datum({id:b}).attr("class","line").call(l);a.each(function(b,e){function f(b,d){for(var e=[],f=0,g=c.size();f<g;++f)i.valueAt(f)&&e.push(f);var h=a.selectAll(".metric").data(e);h.exit().remove(),h.enter().append("div").attr("class","metric line").call(l),h.style("left",m)}var g=this,h=++o,i="function"==typeof d?d.call(g,b,e):d;i&&(c.on("change.rule-"+h,f),i.on("change.rule-"+h,f))}),c.on("focus.rule-"+b,function(a){e.datum(a).style("display",null==a?"none":null).style("left",m)})}var c=this,d=b;return a.remove=function(a){function b(a){c.on("focus.rule-"+a.id,null)}a.selectAll(".line").each(b).remove()},a.metric=function(b){return arguments.length?(d=b,a):d},a}}(this),function(){var a=function(a,b){var c=function(a,c){function d(a,c){if(a instanceof b)return a;var d;if("string"==typeof a){if(d={url:a},c)for(var e in c)c.hasOwnProperty(e)&&(d[e]=c[e])}else d=a;return new b(d)}function e(a,b,c){return function(d,e,f,g){d=+d,e=+e;var h=[],i=e,j=a.length,k=0,l=j>0?a[j-1].time:void 0;if(!j||e<l){for(var m=d;m<=e;m+=f)h.push(NaN);return g(null,h)}for(;i>a[0].time+f;)h.unshift(NaN),i-=f;for(;i>=d&&i>=l;){for(;a[k].time>i;)k++;h.unshift(a[k].value),i-=f}for(;i>=d;)h.unshift(NaN),i-=f;if(j>c)if(b){for(var n=a[c].time-b,o=c;o<j&&a[o].time>n;)o++;a.length=o}else a.length=c;g(null,h)}}var f={},g=this,h=d(a,c),i=5e3;try{g.on("start",function(){h.start()}),g.on("stop",function(){h.stop()})}catch(a){}return f.metric=function(){var a,b=[],c=arguments.length,d={},f=arguments.length-1,i=arguments[f];"string"==typeof i&&(a=i,c=f),"object"!=typeof i||i.type||(d=i,a=d.name,c=f),
a||"function"==typeof arguments[0]||(a=arguments[0].mbean);var j=g.metric(e(b,d.keepDelay,g.width),a);if(d.delta){var k=j.shift(-d.delta);j=j.subtract(k),a&&(j.toString=function(){return a})}if("function"==typeof arguments[0]){for(var l=arguments[0],m=function(a){for(var c=!1,d=0;d<arguments.length;d++)if(h.isError(arguments[d])){c=!0;break}b.unshift({time:Date.now(),value:c?NaN:l.apply(j,arguments)})},n=[m],o=1;o<c;o++)n.push(arguments[o]);h.register.apply(h,n)}else{var p=arguments[0];h.register(function(a){b.unshift({time:Date.now(),value:h.isError(a)?NaN:Number(a.value)})},p)}return j},f.start=function(a){a=a||i,h.start(a)},f.stop=function(){h.stop()},f.isRunning=function(){return h.isRunning()},f};return c.VERSION="1.1.4",a.context.prototype.jolokia=c,c};!function(b){"function"==typeof define&&define.amd?define(["cubism","jolokia"],function(b,c){return a(b,c)}):b.Jolokia&&b.cubism?a(b.cubism,b.Jolokia):console.error("No "+(b.cubism?"Cubism":"Jolokia")+" definition found. Please include jolokia.js and cubism.js before jolokia-cubism.js")}(this)}(),function(){var a=function(a,b){function c(b,c,d,e){3===arguments.length&&a.isPlainObject(d)?(e=d,d=null):2==arguments.length&&a.isPlainObject(c)&&(e=c,c=null,d=null);var f={type:"read",mbean:b,attribute:c};return i(f,d),j(this.request(f,k(e)),e)}function d(b,c,d,e,f){4===arguments.length&&a.isPlainObject(e)&&(f=e,e=null);var g={type:"write",mbean:b,attribute:c,value:d};return i(g,e),j(this.request(g,k(f)),f)}function e(b,c){var d,e={type:"exec",mbean:b,operation:c},f=arguments.length;if(arguments.length>2&&a.isPlainObject(arguments[arguments.length-1])&&(d=arguments[arguments.length-1],f=arguments.length-1),f>2){for(var g=[],h=2;h<f;h++)g[h-2]=arguments[h];e.arguments=g}return j(this.request(e,k(d)),d)}function f(a,b){var c={type:"search",mbean:a};return j(this.request(c,k(b)),b)}function g(a){return j(this.request({type:"version"},k(a)),a)}function h(b,c){1==arguments.length&&!a.isArray(b)&&a.isPlainObject(b)&&(c=b,b=null);var d={type:"list"};return i(d,b),j(this.request(d,k(c)),c)}function i(c,d){null!=d&&(a.isArray(d)?c.path=a.map(d,b.escape).join("/"):c.path=d)}function j(a,b){if(null==a)return null;if(200==a.status)return a.value;if(b&&b.error)return b.error(a);throw new Error("Jolokia-Error: "+JSON.stringify(a))}function k(b){if(b&&b.success){var c=a.extend({},b);return c.success=function(a){b.success(a.value)},c}return b}return a.extend(b.prototype,{getAttribute:c,setAttribute:d,execute:e,search:f,version:g,list:h}),b};!function(b,c){"function"==typeof define&&define.amd?define(["jquery","jolokia"],c):b.Jolokia?a(jQuery,b.Jolokia):console.error("No Jolokia definition found. Please include jolokia.js before jolokia-simple.js")}(this,function(b,c){return a(b,c)})}(),function(a,b){"use strict";var c=6,d=4,e="asc",f="desc",g="_ng_field_",h="_ng_depth_",i="_ng_hidden_",j="_ng_column_",k=/CUSTOM_FILTERS/g,l=/COL_FIELD/g,m=/DISPLAY_CELL_TEMPLATE/g,n=/EDITABLE_CELL_TEMPLATE/g,o=/CELL_EDITABLE_CONDITION/g,p=/<.+>/,q=/(\([^)]*\))?$/,r=/\./g,s=/'/g,t=/^(.*)((?:\s*\[\s*\d+\s*\]\s*)|(?:\s*\[\s*"(?:[^"\\]|\\.)*"\s*\]\s*)|(?:\s*\[\s*'(?:[^'\\]|\\.)*'\s*\]\s*))(.*)$/;a.ngGrid={},a.ngGrid.i18n={},angular.module("ngGrid.services",[]);var u=angular.module("ngGrid.directives",[]),v=angular.module("ngGrid.filters",[]);angular.module("ngGrid",["ngGrid.services","ngGrid.directives","ngGrid.filters"]);var w=function(a,b,d,e){if(void 0===a.selectionProvider.selectedItems||e.config.noKeyboardNavigation)return!0;if("INPUT"===document.activeElement.tagName)return!0;var f,g=d.which||d.keyCode,h=!1,i=!1,j=void 0===a.selectionProvider.lastClickedRow?1:a.selectionProvider.lastClickedRow.rowIndex,k=a.columns.filter(function(a){return a.visible&&a.width>0}),l=a.columns.filter(function(a){return a.pinned});if(a.col&&(f=k.indexOf(a.col)),37!==g&&38!==g&&39!==g&&40!==g&&(e.config.noTabInterference||9!==g)&&13!==g)return!0;if(a.enableCellSelection){9===g&&d.preventDefault();var m=a.showSelectionCheckbox?1===f:0===f,n=1===f||0===f,o=f===k.length-1||f===k.length-2,p=k.indexOf(a.col)===k.length-1,q=l.indexOf(a.col)===l.length-1;if(37===g||9===g&&d.shiftKey){var r=0;m||(f-=1),n?m&&9===g&&d.shiftKey?(r=e.$canvas.width(),f=k.length-1,i=!0):r=e.$viewport.scrollLeft()-a.col.width:l.length>0&&(r=e.$viewport.scrollLeft()-k[f].width),e.$viewport.scrollLeft(r)}else(39===g||9===g&&!d.shiftKey)&&(o?p&&9===g&&!d.shiftKey?(e.$viewport.scrollLeft(0),f=a.showSelectionCheckbox?1:0,h=!0):e.$viewport.scrollLeft(e.$viewport.scrollLeft()+a.col.width):q&&e.$viewport.scrollLeft(0),p||(f+=1))}var s;s=a.configGroups.length>0?e.rowFactory.parsedData.filter(function(a){return!a.isAggRow}):e.filteredRows;var t=0;if(0!==j&&(38===g||13===g&&d.shiftKey||9===g&&d.shiftKey&&i)?t=-1:j!==s.length-1&&(40===g||13===g&&!d.shiftKey||9===g&&h)&&(t=1),t){var u=s[j+t];u.beforeSelectionChange(u,d)&&(u.continueSelection(d),a.$emit("ngGridEventDigestGridParent"),a.selectionProvider.lastClickedRow.renderedRowIndex>=a.renderedRows.length-c-2?e.$viewport.scrollTop(e.$viewport.scrollTop()+a.rowHeight):c+2>=a.selectionProvider.lastClickedRow.renderedRowIndex&&e.$viewport.scrollTop(e.$viewport.scrollTop()-a.rowHeight))}return a.enableCellSelection&&setTimeout(function(){a.domAccessProvider.focusCellElement(a,a.renderedColumns.indexOf(k[f]))},3),!1};String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for(0>(c=0>c?Math.ceil(c):Math.floor(c))&&(c+=b);b>c;c++)if(c in this&&this[c]===a)return c;return-1}),Array.prototype.filter||(Array.prototype.filter=function(a){var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=[],e=arguments[1],f=0;c>f;f++)if(f in b){var g=b[f];a.call(e,g,f,b)&&d.push(g)}return d}),v.filter("checkmark",function(){return function(a){return a?"✔":"✘"}}),v.filter("ngColumns",function(){return function(a){return a.filter(function(a){return!a.isAggCol})}}),angular.module("ngGrid.services").factory("$domUtilityService",["$utilityService","$window",function(a,c){var d={},e={},f=function(){var a=b("<div></div>");a.appendTo("body"),a.height(100).width(100).css("position","absolute").css("overflow","scroll"),a.append('<div style="height: 400px; width: 400px;"></div>'),d.ScrollH=a.height()-a[0].clientHeight,d.ScrollW=a.width()-a[0].clientWidth,a.empty(),a.attr("style",""),a.append('<span style="font-family: Verdana, Helvetica, Sans-Serif; font-size: 14px;"><strong>M</strong></span>'),d.LetterW=a.children().first().width(),a.remove()};return d.eventStorage={},d.AssignGridContainers=function(a,c,e){e.$root=b(c),e.$topPanel=e.$root.find(".ngTopPanel"),e.$groupPanel=e.$root.find(".ngGroupPanel"),e.$headerContainer=e.$topPanel.find(".ngHeaderContainer"),a.$headerContainer=e.$headerContainer,e.$headerScroller=e.$topPanel.find(".ngHeaderScroller"),e.$headers=e.$headerScroller.children(),e.$viewport=e.$root.find(".ngViewport"),e.$canvas=e.$viewport.find(".ngCanvas"),e.$footerPanel=e.$root.find(".ngFooterPanel");var f=a.$watch(function(){return e.$viewport.scrollLeft()},function(a){return e.$headerContainer.scrollLeft(a)});a.$on("$destroy",function(){e.$root&&(b(e.$root.parent()).off("resize.nggrid"),e.$root=null,e.$topPanel=null,e.$headerContainer=null,e.$headers=null,e.$canvas=null,e.$footerPanel=null),f()}),d.UpdateGridLayout(a,e)},d.getRealWidth=function(a){var c=0,d={visibility:"hidden",display:"block"},e=a.parents().andSelf().not(":visible");return b.swap(e[0],d,function(){c=a.outerWidth()}),c},d.UpdateGridLayout=function(a,b){if(b.$root){var c=b.$viewport.scrollTop();b.elementDims.rootMaxW=b.$root.width(),b.$root.is(":hidden")&&(b.elementDims.rootMaxW=d.getRealWidth(b.$root)),b.elementDims.rootMaxH=b.$root.height(),b.refreshDomSizes(),a.adjustScrollTop(c,!0)}},d.numberOfGrids=0,d.setStyleText=function(a,b){var d=a.styleSheet,e=a.gridId,f=c.document;d||(d=f.getElementById(e)),d||(d=f.createElement("style"),d.type="text/css",d.id=e,(f.head||f.getElementsByTagName("head")[0]).appendChild(d)),d.styleSheet&&!d.sheet?d.styleSheet.cssText=b:d.innerHTML=b,a.styleSheet=d,a.styleText=b},d.BuildStyles=function(a,b,c){var e,f=b.config.rowHeight,g=b.gridId,h=a.columns,i=0,j=a.totalRowWidth();e="."+g+" .ngCanvas { width: "+j+"px; }."+g+" .ngRow { width: "+j+"px; }."+g+" .ngCanvas { width: "+j+"px; }."+g+" .ngHeaderScroller { width: "+(j+d.ScrollH)+"px}";for(var k=0;h.length>k;k++){var l=h[k];if(!1!==l.visible){var m=0;k===h.length-1&&i+l.width<b.elementDims.rootMaxW&&(m=b.elementDims.rootMaxW-i-l.width),e+="."+g+" .col"+k+" { width: "+(l.width+m)+"px; left: "+i+"px; height: "+f+"px }."+g+" .colt"+k+" { width: "+(l.width+m)+"px; }",i+=l.width}}d.setStyleText(b,e),a.adjustScrollLeft(b.$viewport.scrollLeft()),c&&d.digest(a)},d.setColLeft=function(a,b,c){if(c.styleText){var f=e[a.index];f||(f=e[a.index]=RegExp(".col"+a.index+" { width: [0-9]+px; left: [0-9]+px"));var g=c.styleText.replace(f,".col"+a.index+" { width: "+a.width+"px; left: "+b+"px");d.setStyleText(c,g)}},d.setColLeft.immediate=1,d.RebuildGrid=function(a,b){d.UpdateGridLayout(a,b),(null==b.config.maintainColumnRatios||b.config.maintainColumnRatios)&&b.configureColumnWidths(),a.adjustScrollLeft(b.$viewport.scrollLeft()),d.BuildStyles(a,b,!0)},d.digest=function(a){a.$root.$$phase||a.$digest()},d.ScrollH=17,d.ScrollW=17,d.LetterW=10,f(),d}]),angular.module("ngGrid.services").factory("$sortService",["$parse","$utilityService",function(a,b){var c={};return c.colSortFnCache={},c.isCustomSort=!1,c.guessSortFn=function(a){switch(typeof a){case"number":return c.sortNumber;case"boolean":return c.sortBool;case"string":return a.match(/^[-+]?[£$¤]?[\d,.]+%?$/)?c.sortNumberStr:c.sortAlpha;default:return"[object Date]"===Object.prototype.toString.call(a)?c.sortDate:c.basicSort}},c.basicSort=function(a,b){return a===b?0:b>a?-1:1},c.sortNumber=function(a,b){return a-b},c.sortNumberStr=function(a,b){var c,d,e=!1,f=!1;return c=parseFloat(a.replace(/[^0-9.-]/g,"")),isNaN(c)&&(e=!0),d=parseFloat(b.replace(/[^0-9.-]/g,"")),isNaN(d)&&(f=!0),e&&f?0:e?1:f?-1:c-d},c.sortAlpha=function(a,b){var c=a.toLowerCase(),d=b.toLowerCase();return c===d?0:d>c?-1:1},c.sortDate=function(a,b){var c=a.getTime(),d=b.getTime();return c===d?0:d>c?-1:1},c.sortBool=function(a,b){return a&&b?0:a||b?a?1:-1:0},c.sortData=function(a,d){if(d&&a){var f,g,h=a.fields.length,i=a.fields,j=d.slice(0);d.sort(function(d,k){for(var l,m,n=0,o=0;0===n&&h>o;){f=a.columns[o],g=a.directions[o],m=c.getSortFn(f,j);var p=b.evalProperty(d,i[o]),q=b.evalProperty(k,i[o]);c.isCustomSort?(l=m(p,q),n=g===e?l:0-l):null==p||null==q?null==q&&null==p?n=0:null==p?n=1:null==q&&(n=-1):(l=m(p,q),n=g===e?l:0-l),o++}return n})}},c.Sort=function(a,b){c.isSorting||(c.isSorting=!0,c.sortData(a,b),c.isSorting=!1)},c.getSortFn=function(b,d){var e,f;if(c.colSortFnCache[b.field])e=c.colSortFnCache[b.field];else if(void 0!==b.sortingAlgorithm)e=b.sortingAlgorithm,c.colSortFnCache[b.field]=b.sortingAlgorithm,c.isCustomSort=!0;else{if(!(f=d[0]))return e;e=c.guessSortFn(a("entity['"+b.field.replace(r,"']['")+"']")({entity:f})),e?c.colSortFnCache[b.field]=e:e=c.sortAlpha}return e},c}]),angular.module("ngGrid.services").factory("$utilityService",["$parse",function(c){var d=/function (.{1,})\(/;return{visualLength:function(a){var c=document.getElementById("testDataLength");c||(c=document.createElement("SPAN"),c.id="testDataLength",c.style.visibility="hidden",document.body.appendChild(c));var d=b(a);b(c).css({font:d.css("font"),"font-size":d.css("font-size"),"font-family":d.css("font-family")}),c.innerHTML=d.text();var e=c.offsetWidth;return document.body.removeChild(c),e},forIn:function(a,b){for(var c in a)a.hasOwnProperty(c)&&b(a[c],c)},endsWith:function(a,b){return!(!a||!b||"string"!=typeof a)&&-1!==a.indexOf(b,a.length-b.length)},isNullOrUndefined:function(a){return void 0===a||null===a},getElementsByClassName:function(a){if(document.getElementsByClassName)return document.getElementsByClassName(a);for(var b=[],c=RegExp("\\b"+a+"\\b"),d=document.getElementsByTagName("*"),e=0;d.length>e;e++){var f=d[e].className;c.test(f)&&b.push(d[e])}return b},newId:function(){var a=(new Date).getTime();return function(){return a+=1}}(),seti18n:function(b,c){var d=a.ngGrid.i18n[c];for(var e in d)b.i18n[e]=d[e]},getInstanceType:function(a){var b=d.exec(""+a.constructor);if(b&&b.length>1){return b[1].replace(/^\s+|\s+$/g,"")}return""},init:function(){function a(b){var c=t.exec(b);if(c)return(c[1]?a(c[1]):c[1])+c[2]+(c[3]?a(c[3]):c[3]);b=b.replace(s,"\\'");var d=b.split(r),e=[d.shift()];return angular.forEach(d,function(a){e.push(a.replace(q,"']$1"))}),e.join("['")}return this.preEval=a,this.evalProperty=function(b,d){return c(a("entity."+d))({entity:b})},delete this.init,this}}.init()}]);var x=function(a,b,c,d){this.rowIndex=0,this.offsetTop=this.rowIndex*c,this.entity=a,this.label=a.gLabel,this.field=a.gField,this.depth=a.gDepth,this.parent=a.parent,this.children=a.children,this.aggChildren=a.aggChildren,this.aggIndex=a.aggIndex,this.collapsed=d,this.groupInitState=d,this.rowFactory=b,this.rowHeight=c,this.isAggRow=!0,this.offsetLeft=25*a.gDepth,this.aggLabelFilter=a.aggLabelFilter};x.prototype.toggleExpand=function(){this.collapsed=!this.collapsed,this.orig&&(this.orig.collapsed=this.collapsed),this.notifyChildren()},x.prototype.setExpand=function(a){this.collapsed=a,this.orig&&(this.orig.collapsed=a),this.notifyChildren()},x.prototype.notifyChildren=function(){for(var a=Math.max(this.rowFactory.aggCache.length,this.children.length),b=0;a>b;b++)if(this.aggChildren[b]&&(this.aggChildren[b].entity[i]=this.collapsed,this.collapsed&&this.aggChildren[b].setExpand(this.collapsed)),this.children[b]&&(this.children[b][i]=this.collapsed),b>this.aggIndex&&this.rowFactory.aggCache[b]){var c=this.rowFactory.aggCache[b],d=30*this.children.length;c.offsetTop=this.collapsed?c.offsetTop-d:c.offsetTop+d}this.rowFactory.renderedChange()},x.prototype.aggClass=function(){return this.collapsed?"ngAggArrowCollapsed":"ngAggArrowExpanded"},x.prototype.totalChildren=function(){if(this.aggChildren.length>0){var a=0,b=function(c){c.aggChildren.length>0?angular.forEach(c.aggChildren,function(a){b(a)}):a+=c.children.length};return b(this),a}return this.children.length},x.prototype.copy=function(){var a=new x(this.entity,this.rowFactory,this.rowHeight,this.groupInitState);return a.orig=this,a};var y=function(a,c,d,g,h,i){var j=this,l=a.colDef,m=0,n=null;j.colDef=a.colDef,j.width=l.width,j.groupIndex=0,j.isGroupedBy=!1,j.minWidth=l.minWidth?l.minWidth:50,j.maxWidth=l.maxWidth?l.maxWidth:9e3,j.enableCellEdit=void 0!==l.enableCellEdit?l.enableCellEdit:a.enableCellEdit||a.enableCellEditOnFocus,j.cellEditableCondition=l.cellEditableCondition||a.cellEditableCondition||"true",j.headerRowHeight=a.headerRowHeight,j.displayName=void 0===l.displayName?l.field:l.displayName,j.index=a.index,j.isAggCol=a.isAggCol,j.cellClass=l.cellClass,j.sortPriority=void 0,j.cellFilter=l.cellFilter?l.cellFilter:"",j.field=l.field,j.aggLabelFilter=l.aggLabelFilter||l.cellFilter,j.visible=i.isNullOrUndefined(l.visible)||l.visible,j.sortable=!1,j.resizable=!1,j.pinnable=!1,j.pinned=a.enablePinning&&l.pinned,j.originalIndex=null==a.originalIndex?j.index:a.originalIndex,j.groupable=i.isNullOrUndefined(l.groupable)||l.groupable,a.enableSort&&(j.sortable=i.isNullOrUndefined(l.sortable)||l.sortable),a.enableResize&&(j.resizable=i.isNullOrUndefined(l.resizable)||l.resizable),a.enablePinning&&(j.pinnable=i.isNullOrUndefined(l.pinnable)||l.pinnable),j.sortDirection=void 0,j.sortingAlgorithm=l.sortFn,j.headerClass=l.headerClass,j.cursor=j.sortable?"pointer":"default",j.headerCellTemplate=l.headerCellTemplate||h.get("headerCellTemplate.html"),j.cellTemplate=l.cellTemplate||h.get("cellTemplate.html").replace(k,j.cellFilter?"|"+j.cellFilter:""),j.enableCellEdit&&(j.cellEditTemplate=l.cellEditTemplate||h.get("cellEditTemplate.html"),j.editableCellTemplate=l.editableCellTemplate||h.get("editableCellTemplate.html")),l.cellTemplate&&!p.test(l.cellTemplate)&&(j.cellTemplate=h.get(l.cellTemplate)||b.ajax({type:"GET",url:l.cellTemplate,async:!1}).responseText),j.enableCellEdit&&l.editableCellTemplate&&!p.test(l.editableCellTemplate)&&(j.editableCellTemplate=h.get(l.editableCellTemplate)||b.ajax({type:"GET",url:l.editableCellTemplate,async:!1}).responseText),l.headerCellTemplate&&!p.test(l.headerCellTemplate)&&(j.headerCellTemplate=h.get(l.headerCellTemplate)||b.ajax({type:"GET",url:l.headerCellTemplate,async:!1}).responseText),j.colIndex=function(){var a=j.pinned?"pinned ":"";return a+="col"+j.index+" colt"+j.index,j.cellClass&&(a+=" "+j.cellClass),a},j.groupedByClass=function(){return j.isGroupedBy?"ngGroupedByIcon":"ngGroupIcon"},j.toggleVisible=function(){j.visible=!j.visible},j.showSortButtonUp=function(){return j.sortable?j.sortDirection===f:j.sortable},j.showSortButtonDown=function(){return j.sortable?j.sortDirection===e:j.sortable},j.noSortVisible=function(){return!j.sortDirection},j.sort=function(b){if(!j.sortable)return!0;var c=j.sortDirection===e?f:e;return j.sortDirection=c,a.sortCallback(j,b),!1},j.gripClick=function(){m++,1===m?n=setTimeout(function(){m=0},500):(clearTimeout(n),a.resizeOnDataCallback(j),m=0)},j.gripOnMouseDown=function(a){return c.isColumnResizing=!0,a.ctrlKey&&!j.pinned?(j.toggleVisible(),g.BuildStyles(c,d),!0):(a.target.parentElement.style.cursor="col-resize",j.startMousePosition=a.clientX,j.origWidth=j.width,b(document).mousemove(j.onMouseMove),b(document).mouseup(j.gripOnMouseUp),!1)},j.onMouseMove=function(a){var b=a.clientX-j.startMousePosition,e=b+j.origWidth;return j.width=j.minWidth>e?j.minWidth:e>j.maxWidth?j.maxWidth:e,c.hasUserChangedGridColumnWidths=!0,g.BuildStyles(c,d),!1},j.gripOnMouseUp=function(a){return b(document).off("mousemove",j.onMouseMove),b(document).off("mouseup",j.gripOnMouseUp),a.target.parentElement.style.cursor="default",g.digest(c),c.isColumnResizing=!1,!1},j.copy=function(){var b=new y(a,c,d,g,h,i);return b.isClone=!0,b.orig=j,b},j.setVars=function(a){j.orig=a,j.width=a.width,j.groupIndex=a.groupIndex,j.isGroupedBy=a.isGroupedBy,j.displayName=a.displayName,j.index=a.index,j.isAggCol=a.isAggCol,j.cellClass=a.cellClass,j.cellFilter=a.cellFilter,j.field=a.field,j.aggLabelFilter=a.aggLabelFilter,j.visible=a.visible,j.sortable=a.sortable,j.resizable=a.resizable,j.pinnable=a.pinnable,j.pinned=a.pinned,j.originalIndex=a.originalIndex,j.sortDirection=a.sortDirection,j.sortingAlgorithm=a.sortingAlgorithm,j.headerClass=a.headerClass,j.headerCellTemplate=a.headerCellTemplate,j.cellTemplate=a.cellTemplate,j.cellEditTemplate=a.cellEditTemplate}},z=function(a){this.outerHeight=null,this.outerWidth=null,b.extend(this,a)},A=function(a){this.previousColumn=null,this.grid=a};A.prototype.changeUserSelect=function(a,b){a.css({"-webkit-touch-callout":b,"-webkit-user-select":b,"-khtml-user-select":b,"-moz-user-select":"none"===b?"-moz-none":b,"-ms-user-select":b,"user-select":b})},A.prototype.focusCellElement=function(a,b){if(a.selectionProvider.lastClickedRow){var c=void 0!==b?b:this.previousColumn,d=a.selectionProvider.lastClickedRow.clone?a.selectionProvider.lastClickedRow.clone.elm:a.selectionProvider.lastClickedRow.elm;if(void 0!==c&&d){var e=angular.element(d[0].children).filter(function(){return 8!==this.nodeType}),f=Math.max(Math.min(a.renderedColumns.length-1,c),0);this.grid.config.showSelectionCheckbox&&angular.element(e[f]).scope()&&0===angular.element(e[f]).scope().col.index&&(f=1),e[f]&&e[f].children[1].children[0].focus(),this.previousColumn=c}}},A.prototype.selectionHandlers=function(a,b){function c(c){if(16===c.keyCode)return f.changeUserSelect(b,"none",c),!0;if(!e){e=!0;var d=w(a,b,c,f.grid);return e=!1,d}return!0}function d(a){return 16===a.keyCode&&f.changeUserSelect(b,"text",a),!0}var e=!1,f=this;b.bind("keydown",c),b.bind("keyup",d),b.on("$destroy",function(){b.off("keydown",c),b.off("keyup",d)})};var B=function(c,d,e,f){var g=this;g.colToMove=void 0,g.groupToMove=void 0,g.assignEvents=function(){c.config.jqueryUIDraggable&&!c.config.enablePinning?(c.$groupPanel.droppable({addClasses:!1,drop:function(a){g.onGroupDrop(a)}}),c.$groupPanel.on("$destroy",function(){c.$groupPanel=null})):(c.$groupPanel.on("mousedown",g.onGroupMouseDown).on("dragover",g.dragOver).on("drop",g.onGroupDrop),c.$topPanel.on("mousedown",".ngHeaderScroller",g.onHeaderMouseDown).on("dragover",".ngHeaderScroller",g.dragOver),c.$groupPanel.on("$destroy",function(){c.$groupPanel&&c.$groupPanel.off("mousedown"),c.$groupPanel=null}),c.config.enableColumnReordering&&c.$topPanel.on("drop",".ngHeaderScroller",g.onHeaderDrop),c.$topPanel.on("$destroy",function(){c.$topPanel&&c.$topPanel.off("mousedown"),c.config.enableColumnReordering&&c.$topPanel&&c.$topPanel.off("drop"),c.$topPanel=null})),d.$on("$destroy",d.$watch("renderedColumns",function(){f(g.setDraggables)}))},g.dragStart=function(a){a.dataTransfer.setData("text","")},g.dragOver=function(a){a.preventDefault()},g.setDraggables=function(){if(c.config.jqueryUIDraggable)c.$root&&c.$root.find(".ngHeaderSortColumn").draggable({helper:"clone",appendTo:"body",stack:"div",addClasses:!1,start:function(a){g.onHeaderMouseDown(a)}}).droppable({drop:function(a){g.onHeaderDrop(a)}});else if(c.$root){var a=c.$root.find(".ngHeaderSortColumn");if(angular.forEach(a,function(a){a.className&&-1!==a.className.indexOf("ngHeaderSortColumn")&&(a.setAttribute("draggable","true"),a.addEventListener&&(a.addEventListener("dragstart",g.dragStart),angular.element(a).on("$destroy",function(){angular.element(a).off("dragstart",g.dragStart),a.removeEventListener("dragstart",g.dragStart)})))}),-1!==navigator.userAgent.indexOf("MSIE")){var b=c.$root.find(".ngHeaderSortColumn");b.bind("selectstart",function(){return this.dragDrop(),!1}),angular.element(b).on("$destroy",function(){b.off("selectstart")})}}},g.onGroupMouseDown=function(a){var d=b(a.target);if("ngRemoveGroup"!==d[0].className){var e=angular.element(d).scope();e&&(c.config.jqueryUIDraggable||(d.attr("draggable","true"),this.addEventListener&&(this.addEventListener("dragstart",g.dragStart),angular.element(this).on("$destroy",function(){this.removeEventListener("dragstart",g.dragStart)})),-1!==navigator.userAgent.indexOf("MSIE")&&(d.bind("selectstart",function(){return this.dragDrop(),!1}),d.on("$destroy",function(){d.off("selectstart")}))),g.groupToMove={header:d,groupName:e.group,index:e.$index})}else g.groupToMove=void 0},g.onGroupDrop=function(a){a.stopPropagation();var e,f;g.groupToMove?(e=b(a.target).closest(".ngGroupElement"),"ngGroupPanel"===e.context.className?(d.configGroups.splice(g.groupToMove.index,1),d.configGroups.push(g.groupToMove.groupName)):(f=angular.element(e).scope())&&g.groupToMove.index!==f.$index&&(d.configGroups.splice(g.groupToMove.index,1),d.configGroups.splice(f.$index,0,g.groupToMove.groupName)),g.groupToMove=void 0,c.fixGroupIndexes()):g.colToMove&&(-1===d.configGroups.indexOf(g.colToMove.col)&&(e=b(a.target).closest(".ngGroupElement"),"ngGroupPanel"===e.context.className||"ngGroupPanelDescription ng-binding"===e.context.className?d.groupBy(g.colToMove.col):(f=angular.element(e).scope())&&d.removeGroup(f.$index)),g.colToMove=void 0),d.$$phase||d.$apply()},g.onHeaderMouseDown=function(a){var c=b(a.target).closest(".ngHeaderSortColumn"),d=angular.element(c).scope();d&&(g.colToMove={header:c,col:d.col})},g.onHeaderDrop=function(a){if(g.colToMove&&!g.colToMove.col.pinned){var f=b(a.target).closest(".ngHeaderSortColumn"),h=angular.element(f).scope();if(h){if(g.colToMove.col===h.col||h.col.pinned)return;d.columns.splice(g.colToMove.col.index,1),d.columns.splice(h.col.index,0,g.colToMove.col),c.fixColumnIndexes(),g.colToMove=void 0,e.digest(d)}}},g.assignGridEventHandlers=function(){-1===c.config.tabIndex?(c.$viewport.attr("tabIndex",e.numberOfGrids),e.numberOfGrids++):c.$viewport.attr("tabIndex",c.config.tabIndex);var f,g=function(){clearTimeout(f),f=setTimeout(function(){e.RebuildGrid(d,c)},100)};b(a).on("resize.nggrid",g);var h,i=function(){clearTimeout(h),h=setTimeout(function(){e.RebuildGrid(d,c)},100)};b(c.$root.parent()).on("resize.nggrid",i),d.$on("$destroy",function(){b(a).off("resize.nggrid",g)})},g.assignGridEventHandlers(),g.assignEvents()},C=function(a,b){a.maxRows=function(){return Math.max(a.totalServerItems,b.data.length)},a.$on("$destroy",a.$watch("totalServerItems",function(){a.currentMaxPages=a.maxPages()})),a.multiSelect=b.config.enableRowSelection&&b.config.multiSelect,a.selectedItemCount=b.selectedItemCount,a.maxPages=function(){return 0===a.maxRows()?1:Math.ceil(a.maxRows()/a.pagingOptions.pageSize)},a.pageForward=function(){var b=a.pagingOptions.currentPage;a.totalServerItems>0?a.pagingOptions.currentPage=Math.min(b+1,a.maxPages()):a.pagingOptions.currentPage++},a.pageBackward=function(){var b=a.pagingOptions.currentPage;a.pagingOptions.currentPage=Math.max(b-1,1)},a.pageToFirst=function(){a.pagingOptions.currentPage=1},a.pageToLast=function(){var b=a.maxPages();a.pagingOptions.currentPage=b},a.cantPageForward=function(){var c=a.pagingOptions.currentPage,d=a.maxPages();return a.totalServerItems>0?c>=d:1>b.data.length},a.cantPageToLast=function(){return!(a.totalServerItems>0)||a.cantPageForward()},a.cantPageBackward=function(){return 1>=a.pagingOptions.currentPage}},D=function(e,f,g,h,j,k,l,m,n,o,q){var r={aggregateTemplate:void 0,afterSelectionChange:function(){},beforeSelectionChange:function(){return!0},checkboxCellTemplate:void 0,checkboxHeaderTemplate:void 0,columnDefs:void 0,data:[],dataUpdated:function(){},enableCellEdit:!1,enableCellEditOnFocus:!1,enableCellSelection:!1,enableColumnResize:!1,enableColumnReordering:!1,enableColumnHeavyVirt:!1,enablePaging:!1,enablePinning:!1,enableRowSelection:!0,enableSorting:!0,enableHighlighting:!1,excludeProperties:[],filterOptions:{filterText:"",useExternalFilter:!1},footerRowHeight:55,footerTemplate:void 0,forceSyncScrolling:!0,groups:[],groupsCollapsedByDefault:!0,headerRowHeight:30,headerRowTemplate:void 0,jqueryUIDraggable:!1,jqueryUITheme:!1,keepLastSelected:!0,maintainColumnRatios:void 0,menuTemplate:void 0,multiSelect:!0,pagingOptions:{pageSizes:[250,500,1e3],pageSize:250,currentPage:1},pinSelectionCheckbox:!1,plugins:[],primaryKey:void 0,rowHeight:30,rowTemplate:void 0,selectedItems:[],selectionCheckboxColumnWidth:25,selectWithCheckboxOnly:!1,showColumnMenu:!1,showFilter:!1,showFooter:!1,showGroupPanel:!1,showSelectionCheckbox:!1,sortInfo:{fields:[],columns:[],directions:[]},tabIndex:-1,totalServerItems:0,useExternalSorting:!1,i18n:"en",virtualizationThreshold:50,noTabInterference:!1},s=this;s.maxCanvasHt=0,s.config=b.extend(r,a.ngGrid.config,f),s.config.showSelectionCheckbox=s.config.showSelectionCheckbox&&!1===s.config.enableColumnHeavyVirt,s.config.enablePinning=s.config.enablePinning&&!1===s.config.enableColumnHeavyVirt,s.config.selectWithCheckboxOnly=s.config.selectWithCheckboxOnly&&!1!==s.config.showSelectionCheckbox,s.config.pinSelectionCheckbox=s.config.enablePinning,"string"==typeof f.columnDefs&&(s.config.columnDefs=e.$eval(f.columnDefs)),s.rowCache=[],s.rowMap=[],s.gridId="ng"+l.newId(),s.$root=null,s.$groupPanel=null,s.$topPanel=null,s.$headerContainer=null,s.$headerScroller=null,s.$headers=null,s.$viewport=null,s.$canvas=null,s.rootDim=s.config.gridDim,s.data=[],s.lateBindColumns=!1,s.filteredRows=[],s.initTemplates=function(){var a=["rowTemplate","aggregateTemplate","headerRowTemplate","checkboxCellTemplate","checkboxHeaderTemplate","menuTemplate","footerTemplate"],b=[];return angular.forEach(a,function(a){b.push(s.getTemplate(a))}),q.all(b)},s.getTemplate=function(a){var b=s.config[a],c=s.gridId+a+".html",d=q.defer();if(b&&!p.test(b))o.get(b,{cache:k}).success(function(a){k.put(c,a),d.resolve()}).error(function(){d.reject("Could not load template: "+b)});else if(b)k.put(c,b),d.resolve();else{var e=a+".html";k.put(c,k.get(e)),d.resolve()}return d.promise},"object"==typeof s.config.data&&(s.data=s.config.data),s.calcMaxCanvasHeight=function(){return s.config.groups.length>0?s.rowFactory.parsedData.filter(function(a){return!a[i]}).length*s.config.rowHeight:s.filteredRows.length*s.config.rowHeight},s.elementDims={scrollW:0,scrollH:0,rowIndexCellW:s.config.selectionCheckboxColumnWidth,rowSelectedCellW:s.config.selectionCheckboxColumnWidth,rootMaxW:0,rootMaxH:0},s.setRenderedRows=function(a){e.renderedRows.length=a.length;for(var b=0;a.length>b;b++)!e.renderedRows[b]||a[b].isAggRow||e.renderedRows[b].isAggRow?(e.renderedRows[b]=a[b].copy(),e.renderedRows[b].collapsed=a[b].collapsed,a[b].isAggRow||e.renderedRows[b].setVars(a[b])):e.renderedRows[b].setVars(a[b]),e.renderedRows[b].rowIndex=a[b].rowIndex,e.renderedRows[b].offsetTop=a[b].offsetTop,e.renderedRows[b].selected=a[b].selected,a[b].renderedRowIndex=b;s.refreshDomSizes(),e.$emit("ngGridEventRows",a)},s.minRowsToRender=function(){var a=e.viewportDimHeight()||1;return Math.floor(a/s.config.rowHeight)},s.refreshDomSizes=function(){var a=new z;a.outerWidth=s.elementDims.rootMaxW,a.outerHeight=s.elementDims.rootMaxH,s.rootDim=a,s.maxCanvasHt=s.calcMaxCanvasHeight()},s.buildColumnDefsFromData=function(){s.config.columnDefs=[];var a=s.data[0];return a?void l.forIn(a,function(a,b){-1===s.config.excludeProperties.indexOf(b)&&s.config.columnDefs.push({field:b})}):void(s.lateBoundColumns=!0)},s.buildColumns=function(){var a=s.config.columnDefs,b=[];if(a||(s.buildColumnDefsFromData(),a=s.config.columnDefs),s.config.showSelectionCheckbox&&b.push(new y({colDef:{field:"✔",width:s.elementDims.rowSelectedCellW,sortable:!1,resizable:!1,groupable:!1,headerCellTemplate:k.get(e.gridId+"checkboxHeaderTemplate.html"),cellTemplate:k.get(e.gridId+"checkboxCellTemplate.html"),pinned:s.config.pinSelectionCheckbox},index:0,headerRowHeight:s.config.headerRowHeight,sortCallback:s.sortData,resizeOnDataCallback:s.resizeOnData,enableResize:s.config.enableColumnResize,enableSort:s.config.enableSorting,enablePinning:s.config.enablePinning},e,s,h,k,l)),a.length>0){var c=s.config.showSelectionCheckbox?1:0,d=e.configGroups.length;e.configGroups.length=0,angular.forEach(a,function(a,f){f+=c;var g=new y({colDef:a,index:f+d,originalIndex:f,headerRowHeight:s.config.headerRowHeight,sortCallback:s.sortData,resizeOnDataCallback:s.resizeOnData,enableResize:s.config.enableColumnResize,enableSort:s.config.enableSorting,enablePinning:s.config.enablePinning,enableCellEdit:s.config.enableCellEdit||s.config.enableCellEditOnFocus,cellEditableCondition:s.config.cellEditableCondition},e,s,h,k,l),i=s.config.groups.indexOf(a.field);-1!==i&&(g.isGroupedBy=!0,e.configGroups.splice(i,0,g),g.groupIndex=e.configGroups.length),b.push(g)}),e.columns=b,s.config.groups.length>0&&s.rowFactory.getGrouping(s.config.groups)}},s.configureColumnWidths=function(){var a=[],b=[],c=0,d=0,f={};if(angular.forEach(e.columns,function(a,b){if(l.isNullOrUndefined(a.originalIndex))a.isAggCol&&a.visible&&(d+=25);else{var c=a.originalIndex;s.config.showSelectionCheckbox&&(0===a.originalIndex&&a.visible&&(d+=s.config.selectionCheckboxColumnWidth),c--),f[c]=b}}),angular.forEach(s.config.columnDefs,function(g,h){var i=e.columns[f[h]];g.index=h;var j,k=!1;if(l.isNullOrUndefined(g.width)?g.width="*":(k=!!isNaN(g.width)&&l.endsWith(g.width,"%"),j=k?g.width:parseInt(g.width,10)),isNaN(j)){if("auto"===(j=g.width)){i.width=i.minWidth,d+=i.width;var m=i;return void e.$on("$destroy",e.$on("ngGridEventData",function(){s.resizeOnData(m)}))}if(-1!==j.indexOf("*"))return!1!==i.visible&&(c+=j.length),void a.push(g);if(k)return void b.push(g);throw'unable to parse column width, use percentage ("10%","20%", etc...) or "*" to use remaining width of grid'}!1!==i.visible&&(d+=i.width=parseInt(i.width,10))}),b.length>0){s.config.maintainColumnRatios=!1!==s.config.maintainColumnRatios;var g=0,i=0;angular.forEach(b,function(a){var b=e.columns[f[a.index]],c=parseFloat(a.width)/100;g+=c,b.visible||(i+=c)});var j=g-i;angular.forEach(b,function(a){var b=e.columns[f[a.index]],c=parseFloat(a.width)/100;c/=i>0?j:g
;var h=s.rootDim.outerWidth*g;b.width=h*c,d+=b.width})}if(a.length>0){s.config.maintainColumnRatios=!1!==s.config.maintainColumnRatios;var k=s.rootDim.outerWidth-d;s.maxCanvasHt>e.viewportDimHeight()&&(k-=h.ScrollW);var m=Math.floor(k/c);angular.forEach(a,function(b,c){var g=e.columns[f[b.index]];if(g.width=m*b.width.length,g.width<g.minWidth&&(g.width=g.minWidth),!1!==g.visible&&(d+=g.width),c===a.length-1&&s.rootDim.outerWidth>d){var i=s.rootDim.outerWidth-d;s.maxCanvasHt>e.viewportDimHeight()&&(i-=h.ScrollW),g.width+=i}})}},s.init=function(){return s.initTemplates().then(function(){e.selectionProvider=new I(s,e,n,l),e.domAccessProvider=new A(s),s.rowFactory=new G(s,e,h,k,l),s.searchProvider=new H(e,s,j,l),s.styleProvider=new J(e,s),e.$on("$destroy",e.$watch("configGroups",function(a){var b=[];angular.forEach(a,function(a){b.push(a.field||a)}),s.config.groups=b,s.rowFactory.filteredRowsChanged(),e.$emit("ngGridEventGroups",a)},!0)),e.$on("$destroy",e.$watch("columns",function(a){e.isColumnResizing||h.RebuildGrid(e,s),e.$emit("ngGridEventColumns",a)},!0)),e.$on("$destroy",e.$watch(function(){return f.i18n},function(a){l.seti18n(e,a)})),s.maxCanvasHt=s.calcMaxCanvasHeight(),s.config.sortInfo.fields&&s.config.sortInfo.fields.length>0&&e.$on("$destroy",e.$watch(function(){return s.config.sortInfo},function(){g.isSorting||(s.sortColumnsInit(),e.$emit("ngGridEventSorted",s.config.sortInfo))},!0))})},s.resizeOnData=function(a){var c=a.minWidth,d=l.getElementsByClassName("col"+a.index);angular.forEach(d,function(a,d){var e;if(0===d){var f=b(a).find(".ngHeaderText");e=l.visualLength(f)+10}else{var g=b(a).find(".ngCellText");e=l.visualLength(g)+10}e>c&&(c=e)}),a.width=a.longest=Math.min(a.maxWidth,c+7),h.BuildStyles(e,s,!0)},s.lastSortedColumns=[],s.sortData=function(a,c){if(c&&c.shiftKey&&s.config.sortInfo){var d=s.config.sortInfo.columns.indexOf(a);-1===d?(1===s.config.sortInfo.columns.length&&(s.config.sortInfo.columns[0].sortPriority=1),s.config.sortInfo.columns.push(a),a.sortPriority=s.config.sortInfo.columns.length,s.config.sortInfo.fields.push(a.field),s.config.sortInfo.directions.push(a.sortDirection),s.lastSortedColumns.push(a)):s.config.sortInfo.directions[d]=a.sortDirection,e.$emit("ngGridEventSorted",s.config.sortInfo)}else if(!s.config.useExternalSorting||s.config.useExternalSorting&&s.config.sortInfo){var f=b.isArray(a);s.config.sortInfo.columns.length=0,s.config.sortInfo.fields.length=0,s.config.sortInfo.directions.length=0;var g=function(a){s.config.sortInfo.columns.push(a),s.config.sortInfo.fields.push(a.field),s.config.sortInfo.directions.push(a.sortDirection),s.lastSortedColumns.push(a)};f?angular.forEach(a,function(a,b){a.sortPriority=b+1,g(a)}):(s.clearSortingData(a),a.sortPriority=void 0,g(a)),s.sortActual(),s.searchProvider.evalFilter(),e.$emit("ngGridEventSorted",s.config.sortInfo)}},s.sortColumnsInit=function(){s.config.sortInfo.columns?s.config.sortInfo.columns.length=0:s.config.sortInfo.columns=[];var a=[];angular.forEach(e.columns,function(b){var c=s.config.sortInfo.fields.indexOf(b.field);-1!==c&&(b.sortDirection=s.config.sortInfo.directions[c]||"asc",a[c]=b)}),1===a.length?s.sortData(a[0]):s.sortData(a)},s.sortActual=function(){if(!s.config.useExternalSorting){var a=s.data.slice(0);angular.forEach(a,function(a,b){var c=s.rowMap[b];if(void 0!==c){var d=s.rowCache[c];void 0!==d&&(a.preSortSelected=d.selected,a.preSortIndex=b)}}),g.Sort(s.config.sortInfo,a),angular.forEach(a,function(a,b){s.rowCache[b].entity=a,s.rowCache[b].selected=a.preSortSelected,s.rowMap[a.preSortIndex]=b,delete a.preSortSelected,delete a.preSortIndex})}},s.clearSortingData=function(a){a?(angular.forEach(s.lastSortedColumns,function(b){a.index!==b.index&&(b.sortDirection="",b.sortPriority=null)}),s.lastSortedColumns[0]=a,s.lastSortedColumns.length=1):(angular.forEach(s.lastSortedColumns,function(a){a.sortDirection="",a.sortPriority=null}),s.lastSortedColumns=[])},s.fixColumnIndexes=function(){for(var a=0;e.columns.length>a;a++)e.columns[a].index=a},s.fixGroupIndexes=function(){angular.forEach(e.configGroups,function(a,b){a.groupIndex=b+1})},e.elementsNeedMeasuring=!0,e.columns=[],e.renderedRows=[],e.renderedColumns=[],e.headerRow=null,e.rowHeight=s.config.rowHeight,e.jqueryUITheme=s.config.jqueryUITheme,e.showSelectionCheckbox=s.config.showSelectionCheckbox,e.enableCellSelection=s.config.enableCellSelection,e.enableCellEditOnFocus=s.config.enableCellEditOnFocus,e.footer=null,e.selectedItems=s.config.selectedItems,e.multiSelect=s.config.multiSelect,e.showFooter=s.config.showFooter,e.footerRowHeight=e.showFooter?s.config.footerRowHeight:0,e.showColumnMenu=s.config.showColumnMenu,e.forceSyncScrolling=s.config.forceSyncScrolling,e.showMenu=!1,e.configGroups=[],e.gridId=s.gridId,e.enablePaging=s.config.enablePaging,e.pagingOptions=s.config.pagingOptions,e.i18n={},l.seti18n(e,s.config.i18n),e.adjustScrollLeft=function(a){for(var b=0,c=0,d=e.columns.length,f=[],g=!s.config.enableColumnHeavyVirt,i=0,j=function(a){g?f.push(a):e.renderedColumns[i]?e.renderedColumns[i].setVars(a):e.renderedColumns[i]=a.copy(),i++},k=0;d>k;k++){var l=e.columns[k];if(!1!==l.visible){var m=l.width+b;if(l.pinned){j(l);var n=k>0?a+c:a;h.setColLeft(l,n,s),c+=l.width}else m>=a&&a+s.rootDim.outerWidth>=b&&j(l);b+=l.width}}g&&(e.renderedColumns=f)},s.prevScrollTop=0,s.prevScrollIndex=0,e.adjustScrollTop=function(a,b){if(s.prevScrollTop!==a||b){a>0&&s.$viewport[0].scrollHeight-a<=s.$viewport.outerHeight()&&e.$emit("ngGridEventScroll");var f,g=Math.floor(a/s.config.rowHeight);if(s.filteredRows.length>s.config.virtualizationThreshold){if(a>s.prevScrollTop&&s.prevScrollIndex+d>g)return;if(s.prevScrollTop>a&&g>s.prevScrollIndex-d)return;f=new E(Math.max(0,g-c),g+s.minRowsToRender()+c)}else{var h=e.configGroups.length>0?s.rowFactory.parsedData.length:s.filteredRows.length;f=new E(0,Math.max(h,s.minRowsToRender()+c))}s.prevScrollTop=a,s.rowFactory.UpdateViewableRange(f),s.prevScrollIndex=g}},e.toggleShowMenu=function(){e.showMenu=!e.showMenu},e.toggleSelectAll=function(a,b){e.selectionProvider.toggleSelectAll(a,!1,b)},e.totalFilteredItemsLength=function(){return s.filteredRows.length},e.showGroupPanel=function(){return s.config.showGroupPanel},e.topPanelHeight=function(){return!0===s.config.showGroupPanel?s.config.headerRowHeight+32:s.config.headerRowHeight},e.viewportDimHeight=function(){return Math.max(0,s.rootDim.outerHeight-e.topPanelHeight()-e.footerRowHeight-2)},e.groupBy=function(a){if(!(1>s.data.length)&&a.groupable&&a.field){a.sortDirection||a.sort({shiftKey:e.configGroups.length>0});var b=e.configGroups.indexOf(a);-1===b?(a.isGroupedBy=!0,e.configGroups.push(a),a.groupIndex=e.configGroups.length):e.removeGroup(b),s.$viewport.scrollTop(0),h.digest(e)}},e.removeGroup=function(a){var b=e.columns.filter(function(b){return b.groupIndex===a+1})[0];b.isGroupedBy=!1,b.groupIndex=0,e.columns[a].isAggCol&&(e.columns.splice(a,1),e.configGroups.splice(a,1),s.fixGroupIndexes()),0===e.configGroups.length&&(s.fixColumnIndexes(),h.digest(e)),e.adjustScrollLeft(0)},e.togglePin=function(a){for(var b=a.index,c=0,d=0;e.columns.length>d&&e.columns[d].pinned;d++)c++;a.pinned&&(c=Math.max(a.originalIndex,c-1)),a.pinned=!a.pinned,e.columns.splice(b,1),e.columns.splice(c,0,a),s.fixColumnIndexes(),h.BuildStyles(e,s,!0),s.$viewport.scrollLeft(s.$viewport.scrollLeft()-a.width)},e.totalRowWidth=function(){for(var a=0,b=e.columns,c=0;b.length>c;c++)!1!==b[c].visible&&(a+=b[c].width);return a},e.headerScrollerDim=function(){var a=e.viewportDimHeight(),b=s.maxCanvasHt,c=b>a,d=new z;return d.autoFitHeight=!0,d.outerWidth=e.totalRowWidth(),c?d.outerWidth+=s.elementDims.scrollW:s.elementDims.scrollH>=b-a&&(d.outerWidth+=s.elementDims.scrollW),d}},E=function(a,b){this.topRow=a,this.bottomRow=b},F=function(a,b,c,d,e){this.entity=a,this.config=b,this.selectionProvider=c,this.rowIndex=d,this.utils=e,this.selected=c.getSelection(a),this.cursor=this.config.enableRowSelection&&!this.config.selectWithCheckboxOnly?"pointer":"default",this.beforeSelectionChange=b.beforeSelectionChangeCallback,this.afterSelectionChange=b.afterSelectionChangeCallback,this.offsetTop=this.rowIndex*b.rowHeight,this.rowDisplayIndex=0};F.prototype.setSelection=function(a){this.selectionProvider.setSelection(this,a),this.selectionProvider.lastClickedRow=this},F.prototype.continueSelection=function(a){this.selectionProvider.ChangeSelection(this,a)},F.prototype.ensureEntity=function(a){this.entity!==a&&(this.entity=a,this.selected=this.selectionProvider.getSelection(this.entity))},F.prototype.toggleSelected=function(a){if(!this.config.enableRowSelection&&!this.config.enableCellSelection)return!0;var b=a.target||a;return"checkbox"===b.type&&"ngSelectionCell ng-scope"!==b.parentElement.className||(this.config.selectWithCheckboxOnly&&"checkbox"!==b.type?(this.selectionProvider.lastClickedRow=this,!0):(this.beforeSelectionChange(this,a)&&this.continueSelection(a),!1))},F.prototype.alternatingRowClass=function(){var a=0==this.rowIndex%2;return{ngRow:!0,selected:this.selected,even:a,odd:!a,"ui-state-default":this.config.jqueryUITheme&&a,"ui-state-active":this.config.jqueryUITheme&&!a}},F.prototype.getProperty=function(a){return this.utils.evalProperty(this.entity,a)},F.prototype.copy=function(){return this.clone=new F(this.entity,this.config,this.selectionProvider,this.rowIndex,this.utils),this.clone.isClone=!0,this.clone.elm=this.elm,this.clone.orig=this,this.clone},F.prototype.setVars=function(a){a.clone=this,this.entity=a.entity,this.selected=a.selected,this.orig=a};var G=function(a,b,d,e,f){var k=this;k.aggCache={},k.parentCache=[],k.dataChanged=!0,k.parsedData=[],k.rowConfig={},k.selectionProvider=b.selectionProvider,k.rowHeight=30,k.numberOfAggregates=0,k.groupedData=void 0,k.rowHeight=a.config.rowHeight,k.rowConfig={enableRowSelection:a.config.enableRowSelection,rowClasses:a.config.rowClasses,selectedItems:b.selectedItems,selectWithCheckboxOnly:a.config.selectWithCheckboxOnly,beforeSelectionChangeCallback:a.config.beforeSelectionChange,afterSelectionChangeCallback:a.config.afterSelectionChange,jqueryUITheme:a.config.jqueryUITheme,enableCellSelection:a.config.enableCellSelection,rowHeight:a.config.rowHeight},k.renderedRange=new E(0,a.minRowsToRender()+c),k.buildEntityRow=function(a,b){return new F(a,k.rowConfig,k.selectionProvider,b,f)},k.buildAggregateRow=function(b,c){var d=k.aggCache[b.aggIndex];return d||(d=new x(b,k,k.rowConfig.rowHeight,a.config.groupsCollapsedByDefault),k.aggCache[b.aggIndex]=d),d.rowIndex=c,d.offsetTop=c*k.rowConfig.rowHeight,d},k.UpdateViewableRange=function(a){k.renderedRange=a,k.renderedChange()},k.filteredRowsChanged=function(){a.lateBoundColumns&&a.filteredRows.length>0&&(a.config.columnDefs=void 0,a.buildColumns(),a.lateBoundColumns=!1,b.$evalAsync(function(){b.adjustScrollLeft(0)})),k.dataChanged=!0,a.config.groups.length>0&&k.getGrouping(a.config.groups),k.UpdateViewableRange(k.renderedRange)},k.renderedChange=function(){if(!k.groupedData||1>a.config.groups.length)return k.renderedChangeNoGroups(),void a.refreshDomSizes();k.wasGrouped=!0,k.parentCache=[];var b=0,c=k.parsedData.filter(function(a){return a.isAggRow?!a.parent||!a.parent.collapsed:(a[i]||(a.rowIndex=b++),!a[i])});k.totalRows=c.length;for(var d=[],e=k.renderedRange.topRow;k.renderedRange.bottomRow>e;e++)c[e]&&(c[e].offsetTop=e*a.config.rowHeight,d.push(c[e]));a.setRenderedRows(d)},k.renderedChangeNoGroups=function(){for(var b=[],c=k.renderedRange.topRow;k.renderedRange.bottomRow>c;c++)a.filteredRows[c]&&(a.filteredRows[c].rowIndex=c,a.filteredRows[c].offsetTop=c*a.config.rowHeight,b.push(a.filteredRows[c]));a.setRenderedRows(b)},k.fixRowCache=function(){var b=a.data.length;if(0>b-a.rowCache.length)a.rowCache.length=a.rowMap.length=b;else for(var c=a.rowCache.length;b>c;c++)a.rowCache[c]=a.rowFactory.buildEntityRow(a.data[c],c)},k.parseGroupData=function(a){if(a.values)for(var b=0;a.values.length>b;b++)k.parentCache[k.parentCache.length-1].children.push(a.values[b]),k.parsedData.push(a.values[b]);else for(var c in a)if(c!==g&&c!==h&&c!==j&&a.hasOwnProperty(c)){var d=k.buildAggregateRow({gField:a[g],gLabel:c,gDepth:a[h],isAggRow:!0,_ng_hidden_:!1,children:[],aggChildren:[],aggIndex:k.numberOfAggregates,aggLabelFilter:a[j].aggLabelFilter},0);k.numberOfAggregates++,d.parent=k.parentCache[d.depth-1],d.parent&&(d.parent.collapsed=!1,d.parent.aggChildren.push(d)),k.parsedData.push(d),k.parentCache[d.depth]=d,k.parseGroupData(a[c])}},k.getGrouping=function(c){function l(a,b){return a.filter(function(a){return a.field===b})}k.aggCache=[],k.numberOfAggregates=0,k.groupedData={};for(var m=a.filteredRows,n=c.length,o=b.columns,p=0;m.length>p;p++){var q=m[p].entity;if(!q)return;m[p][i]=a.config.groupsCollapsedByDefault;for(var r=k.groupedData,s=0;c.length>s;s++){var t=c[s],u=l(o,t)[0],v=f.evalProperty(q,t);v=""===v||null===v?"null":""+v,r[v]||(r[v]={}),r[g]||(r[g]=t),r[h]||(r[h]=s),r[j]||(r[j]=u),r=r[v]}r.values||(r.values=[]),r.values.push(m[p])}if(o.length>0)for(var w=0;c.length>w;w++)!o[w].isAggCol&&n>=w&&o.splice(0,0,new y({colDef:{field:"",width:25,sortable:!1,resizable:!1,headerCellTemplate:'<div class="ngAggHeader"></div>',pinned:a.config.pinSelectionCheckbox},enablePinning:a.config.enablePinning,isAggCol:!0,headerRowHeight:a.config.headerRowHeight},b,a,d,e,f));a.fixColumnIndexes(),b.adjustScrollLeft(0),k.parsedData.length=0,k.parseGroupData(k.groupedData),k.fixRowCache()},a.config.groups.length>0&&a.filteredRows.length>0&&k.getGrouping(a.config.groups)},H=function(a,c,d,e){var f=this,g=[];f.extFilter=c.config.filterOptions.useExternalFilter,a.showFilter=c.config.showFilter,a.filterText="",f.fieldMap={};var h=function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c.toLowerCase()]=a[c]);return b},i=function(a){if("object"==typeof a){var b=[];for(var c in a)b=b.concat(i(a[c]));return b}return[a]},j=function(a,b,c){var e;for(var f in b)if(b.hasOwnProperty(f)){var g=c[f.toLowerCase()],i=b[f];if("object"!=typeof i||i instanceof Date){var k=null,l=null;if(g&&g.cellFilter&&(l=g.cellFilter.split(":"),k=d(l[0])),null!==i&&void 0!==i){if("function"==typeof k){var m=""+k(i,l[1]?l[1].slice(1,-1):"");e=a.regex.test(m)}else e=a.regex.test(""+i);if(e)return!0}}else{var n=h(g);if(e=j(a,i,n))return!0}}return!1},k=function(a,b){var c,g=f.fieldMap[a.columnDisplay];if(!g)return!1;var h=g.cellFilter.split(":"),j=g.cellFilter?d(h[0]):null,k=b[a.column]||b[g.field.split(".")[0]]||e.evalProperty(b,g.field);if(null===k||void 0===k)return!1;if("function"==typeof j){var l=""+j("object"==typeof k?m(k,g.field):k,h[1]);c=a.regex.test(l)}else{var n=i(m(k,g.field));for(var o in n)c|=a.regex.test(n[o])}return!!c},l=function(a){for(var b=0,c=g.length;c>b;b++){var d=g[b];if(!(d.column?k(d,a):j(d,a,f.fieldMap)))return!1}return!0};f.evalFilter=function(){c.filteredRows=0===g.length?c.rowCache:c.rowCache.filter(function(a){return l(a.entity)});for(var a=0;c.filteredRows.length>a;a++)c.filteredRows[a].rowIndex=a;c.rowFactory.filteredRowsChanged()};var m=function(a,b){if("object"!=typeof a||"string"!=typeof b)return a;var c=b.split("."),d=a;if(c.length>1){for(var e=1,f=c.length;f>e;e++)if(!(d=d[c[e]]))return a;return d}return a},n=function(a,b){try{return RegExp(a,b)}catch(b){return RegExp(a.replace(/(\^|\$|\(|\)|<|>|\[|\]|\{|\}|\\|\||\.|\*|\+|\?)/g,"\\$1"))}},o=function(a){g=[];var c;if(c=b.trim(a))for(var d=c.split(";"),e=0;d.length>e;e++){var f=d[e].split(":");if(f.length>1){var h=b.trim(f[0]),i=b.trim(f[1]);h&&i&&g.push({column:h,columnDisplay:h.replace(/\s+/g,"").toLowerCase(),regex:n(i,"i")})}else{var j=b.trim(f[0]);j&&g.push({column:"",regex:n(j,"i")})}}};f.extFilter||a.$on("$destroy",a.$watch("columns",function(a){for(var b=0;a.length>b;b++){var c=a[b];if(c.field)if(c.field.match(/\./g)){for(var d=c.field.split("."),e=f.fieldMap,g=0;d.length-1>g;g++)e[d[g]]=e[d[g]]||{},e=e[d[g]];e[d[d.length-1]]=c}else f.fieldMap[c.field.toLowerCase()]=c;c.displayName&&(f.fieldMap[c.displayName.toLowerCase().replace(/\s+/g,"")]=c)}})),a.$on("$destroy",a.$watch(function(){return c.config.filterOptions.filterText},function(b){a.filterText=b})),a.$on("$destroy",a.$watch("filterText",function(b){f.extFilter||(a.$emit("ngGridEventFilter",b),o(b),f.evalFilter())}))},I=function(a,b,c,d){var e=this;e.multi=a.config.multiSelect,e.selectedItems=a.config.selectedItems,e.selectedIndex=a.config.selectedIndex,e.lastClickedRow=void 0,e.ignoreSelectedItemChanges=!1;var f=a.config.primaryKey;f&&(f=d.preEval("entity."+a.config.primaryKey)),e.pKeyParser=c(f),e.ChangeSelection=function(c,d){var f=d.which||d.keyCode,g=40===f||38===f;if(d&&d.shiftKey&&!d.keyCode&&e.multi&&a.config.enableRowSelection){if(e.lastClickedRow){var h;h=b.configGroups.length>0?a.rowFactory.parsedData.filter(function(a){return!a.isAggRow}):a.filteredRows;var i=c.rowIndex,j=e.lastClickedRowIndex;if(i===j)return!1;j>i?(i^=j,j^=i,i^=j,i--):j++;for(var k=[];i>=j;j++)k.push(h[j]);if(k[k.length-1].beforeSelectionChange(k,d)){for(var l=0;k.length>l;l++){var m=k[l],n=m.selected;m.selected=!n,m.clone&&(m.clone.selected=m.selected);var o=e.selectedItems.indexOf(m.entity);-1===o?e.selectedItems.push(m.entity):e.selectedItems.splice(o,1)}k[k.length-1].afterSelectionChange(k,d)}return e.lastClickedRow=c,e.lastClickedRowIndex=c.rowIndex,!0}}else e.multi?(!d.keyCode||g&&!a.config.selectWithCheckboxOnly)&&e.setSelection(c,!c.selected):e.lastClickedRow===c?e.setSelection(e.lastClickedRow,!!a.config.keepLastSelected||!c.selected):(e.lastClickedRow&&e.setSelection(e.lastClickedRow,!1),e.setSelection(c,!c.selected));return e.lastClickedRow=c,e.lastClickedRowIndex=c.rowIndex,!0},e.getSelection=function(a){return-1!==e.getSelectionIndex(a)},e.getSelectionIndex=function(b){var c=-1;if(a.config.primaryKey){var d=e.pKeyParser({entity:b});angular.forEach(e.selectedItems,function(a,b){d===e.pKeyParser({entity:a})&&(c=b)})}else c=e.selectedItems.indexOf(b);return c},e.setSelection=function(b,c){if(a.config.enableRowSelection){if(c)-1===e.getSelectionIndex(b.entity)&&(!e.multi&&e.selectedItems.length>0&&e.toggleSelectAll(!1,!0),e.selectedItems.push(b.entity));else{var d=e.getSelectionIndex(b.entity);-1!==d&&e.selectedItems.splice(d,1)}b.selected=c,b.orig&&(b.orig.selected=c),b.clone&&(b.clone.selected=c),b.afterSelectionChange(b)}},e.toggleSelectAll=function(b,c,d){var f,g,h=d?a.filteredRows:a.rowCache;if(c||a.config.beforeSelectionChange(h,b)){!d&&e.selectedItems.length>0&&(e.selectedItems.length=0);for(var i=0;h.length>i;i++)f=h[i].selected,h[i].selected=b,h[i].clone&&(h[i].clone.selected=b),!f&&b?e.selectedItems.push(h[i].entity):f&&!b&&(g=e.getSelectionIndex(h[i].entity))>-1&&e.selectedItems.splice(g,1);c||a.config.afterSelectionChange(h,b)}}},J=function(a,b){a.headerCellStyle=function(a){return{height:a.headerRowHeight+"px"}},a.rowStyle=function(b){var c={top:b.offsetTop+"px",height:a.rowHeight+"px"};return b.isAggRow&&(c.left=b.offsetLeft),c},a.canvasStyle=function(){return{height:b.maxCanvasHt+"px"}},a.headerScrollerStyle=function(){return{height:b.config.headerRowHeight+"px"}},a.topPanelStyle=function(){return{width:b.rootDim.outerWidth+"px",height:a.topPanelHeight()+"px"}},a.headerStyle=function(){return{width:b.rootDim.outerWidth+"px",height:b.config.headerRowHeight+"px"}},a.groupPanelStyle=function(){return{width:b.rootDim.outerWidth+"px",height:"32px"}},a.viewportStyle=function(){return{width:b.rootDim.outerWidth+"px",height:a.viewportDimHeight()+"px"}},a.footerStyle=function(){return{width:b.rootDim.outerWidth+"px",height:a.footerRowHeight+"px"}}};u.directive("ngCellHasFocus",["$domUtilityService",function(a){var b=function(b){b.isFocused=!0,a.digest(b),b.$broadcast("ngGridEventStartCellEdit"),b.$emit("ngGridEventStartCellEdit"),b.$on("$destroy",b.$on("ngGridEventEndCellEdit",function(){b.isFocused=!1,a.digest(b)}))};return function(a,c){function d(){return a.enableCellEditOnFocus?j=!0:c.focus(),!0}function e(d){a.enableCellEditOnFocus&&(d.preventDefault(),j=!1,b(a,c))}function f(){return i=!0,a.enableCellEditOnFocus&&!j&&b(a,c),!0}function g(){return i=!1,!0}function h(d){return a.enableCellEditOnFocus||(i&&37!==d.keyCode&&38!==d.keyCode&&39!==d.keyCode&&40!==d.keyCode&&9!==d.keyCode&&!d.shiftKey&&13!==d.keyCode&&b(a,c),i&&d.shiftKey&&d.keyCode>=65&&90>=d.keyCode&&b(a,c),27===d.keyCode&&c.focus()),!0}var i=!1,j=!1;a.editCell=function(){a.enableCellEditOnFocus||setTimeout(function(){b(a,c)},0)},c.bind("mousedown",d),c.bind("click",e),c.bind("focus",f),c.bind("blur",g),c.bind("keydown",h),c.on("$destroy",function(){c.off("mousedown",d),c.off("click",e),c.off("focus",f),c.off("blur",g),c.off("keydown",h)})}}]),u.directive("ngCellText",function(){return function(a,b){function c(a){a.preventDefault()}function d(a){a.preventDefault()}b.bind("mouseover",c),b.bind("mouseleave",d),b.on("$destroy",function(){b.off("mouseover",c),b.off("mouseleave",d)})}}),u.directive("ngCell",["$compile","$domUtilityService","$utilityService",function(a,c,d){return{scope:!1,compile:function(){return{pre:function(c,e){var f,g=c.col.cellTemplate.replace(l,d.preEval("row.entity."+c.col.field));c.col.enableCellEdit?(f=c.col.cellEditTemplate,f=f.replace(o,c.col.cellEditableCondition),f=f.replace(m,g),f=f.replace(n,c.col.editableCellTemplate.replace(l,d.preEval("row.entity."+c.col.field)))):f=g;var h=b(f);e.append(h),a(h)(c),c.enableCellSelection&&-1===h[0].className.indexOf("ngSelectionCell")&&(h[0].setAttribute("tabindex",0),h.addClass("ngCellElement"))},post:function(a,b){a.enableCellSelection&&a.domAccessProvider.selectionHandlers(a,b),a.$on("$destroy",a.$on("ngGridEventDigestCell",function(){c.digest(a)}))}}}}}]),u.directive("ngEditCellIf",[function(){return{transclude:"element",priority:1e3,terminal:!0,restrict:"A",compile:function(a,b,c){return function(a,b,d){var e,f;a.$on("$destroy",a.$watch(d.ngEditCellIf,function(d){e&&(e.remove(),e=void 0),f&&(f.$destroy(),f=void 0),d&&(f=a.$new(),c(f,function(a){e=a,b.after(a)}))}))}}}}]),u.directive("ngGridFooter",["$compile","$templateCache",function(a,b){return{scope:!1,compile:function(){return{pre:function(c,d){0===d.children().length&&d.append(a(b.get(c.gridId+"footerTemplate.html"))(c))}}}}}]),u.directive("ngGridMenu",["$compile","$templateCache",function(a,b){return{scope:!1,compile:function(){return{pre:function(c,d){0===d.children().length&&d.append(a(b.get(c.gridId+"menuTemplate.html"))(c))}}}}}]),u.directive("ngGrid",["$compile","$filter","$templateCache","$sortService","$domUtilityService","$utilityService","$timeout","$parse","$http","$q",function(a,c,d,e,f,g,h,i,j,k){return{scope:!0,compile:function(){return{pre:function(l,m,n){var o=b(m),p=l.$eval(n.ngGrid);p.gridDim=new z({outerHeight:b(o).height(),outerWidth:b(o).width()});var q=new D(l,p,e,f,c,d,g,h,i,j,k);return l.$on("$destroy",function(){p.gridDim=null,p.selectRow=null,p.selectItem=null,p.selectAll=null,p.selectVisible=null,p.groupBy=null,p.sortBy=null,p.gridId=null,p.ngGrid=null,p.$gridScope=null,p.$gridServices=null,l.domAccessProvider.grid=null,angular.element(q.styleSheet).remove(),q.styleSheet=null}),q.init().then(function(){if("string"==typeof p.columnDefs?l.$on("$destroy",l.$parent.$watch(p.columnDefs,function(a){return a?(q.lateBoundColumns=!1,l.columns=[],q.config.columnDefs=a,q.buildColumns(),q.eventProvider.assignEvents(),void f.RebuildGrid(l,q)):(q.refreshDomSizes(),void q.buildColumns())},!0)):q.buildColumns(),"string"==typeof p.totalServerItems?l.$on("$destroy",l.$parent.$watch(p.totalServerItems,function(a){l.totalServerItems=angular.isDefined(a)?a:0})):l.totalServerItems=0,"string"==typeof p.data){var c=function(a){q.data=b.extend([],a),q.rowFactory.fixRowCache(),angular.forEach(q.data,function(a,b){var c=q.rowMap[b]||b;q.rowCache[c]&&q.rowCache[c].ensureEntity(a),q.rowMap[c]=b}),q.searchProvider.evalFilter(),q.configureColumnWidths(),q.refreshDomSizes(),q.config.sortInfo.fields.length>0&&(q.sortColumnsInit(),l.$emit("ngGridEventSorted",q.config.sortInfo)),l.$emit("ngGridEventData",q.gridId)};l.$on("$destroy",l.$parent.$watch(p.data,c)),l.$on("$destroy",l.$parent.$watch(p.data+".length",function(){c(l.$eval(p.data)),l.adjustScrollTop(q.$viewport.scrollTop(),!0)}))}return q.footerController=new C(l,q),m.addClass("ngGrid").addClass(""+q.gridId),p.enableHighlighting||m.addClass("unselectable"),p.jqueryUITheme&&m.addClass("ui-widget"),m.append(a(d.get("gridTemplate.html"))(l)),f.AssignGridContainers(l,m,q),q.eventProvider=new B(q,l,f,h),p.selectRow=function(a,b){q.rowCache[a]&&(q.rowCache[a].clone&&q.rowCache[a].clone.setSelection(!!b),q.rowCache[a].setSelection(!!b))},p.selectItem=function(a,b){p.selectRow(q.rowMap[a],b)},p.selectAll=function(a){l.toggleSelectAll(a)},p.selectVisible=function(a){l.toggleSelectAll(a,!0)},p.groupBy=function(a){if(a)l.groupBy(l.columns.filter(function(b){return b.field===a})[0]);else{var c=b.extend(!0,[],l.configGroups);angular.forEach(c,l.groupBy)}},p.sortBy=function(a){var b=l.columns.filter(function(b){return b.field===a})[0];b&&b.sort()},p.gridId=q.gridId,p.ngGrid=q,p.$gridScope=l,p.$gridServices={SortService:e,DomUtilityService:f,UtilityService:g},l.$on("$destroy",l.$on("ngGridEventDigestGrid",function(){f.digest(l.$parent)})),l.$on("$destroy",l.$on("ngGridEventDigestGridParent",function(){f.digest(l.$parent)})),l.$evalAsync(function(){l.adjustScrollLeft(0)}),angular.forEach(p.plugins,function(a){"function"==typeof a&&(a=new a);var b=l.$new();a.init(b,q,p.$gridServices),p.plugins[g.getInstanceType(a)]=a,l.$on("$destroy",function(){b.$destroy()})}),"function"==typeof p.init&&p.init(q,l),null})}}}}}]),u.directive("ngHeaderCell",["$compile",function(a){return{scope:!1,compile:function(){return{pre:function(b,c){c.append(a(b.col.headerCellTemplate)(b))}}}}}]),u.directive("ngHeaderRow",["$compile","$templateCache",function(a,b){return{scope:!1,compile:function(){return{pre:function(c,d){0===d.children().length&&d.append(a(b.get(c.gridId+"headerRowTemplate.html"))(c))}}}}}]),u.directive("ngInput",[function(){return{require:"ngModel",link:function(a,b,c,d){function e(c){switch(c.keyCode){case 37:case 38:case 39:case 40:c.stopPropagation();break;case 27:a.$$phase||a.$apply(function(){d.$setViewValue(h),b.blur()});break;case 13:(a.enableCellEditOnFocus&&a.totalFilteredItemsLength()-1>a.row.rowIndex&&a.row.rowIndex>0||a.col.enableCellEdit)&&b.blur()}return!0}function f(a){a.stopPropagation()}function g(a){a.stopPropagation()}var h,i=a.$watch("ngModel",function(){h=d.$modelValue,i()});b.bind("keydown",e),b.bind("click",f),b.bind("mousedown",g),b.on("$destroy",function(){b.off("keydown",e),b.off("click",f),b.off("mousedown",g)}),a.$on("$destroy",a.$on("ngGridEventStartCellEdit",function(){b.focus(),b.select()})),angular.element(b).bind("blur",function(){a.$emit("ngGridEventEndCellEdit")})}}}]),u.directive("ngRow",["$compile","$domUtilityService","$templateCache",function(a,b,c){return{scope:!1,compile:function(){return{pre:function(d,e){if(d.row.elm=e,d.row.clone&&(d.row.clone.elm=e),d.row.isAggRow){var f=c.get(d.gridId+"aggregateTemplate.html");f=d.row.aggLabelFilter?f.replace(k,"| "+d.row.aggLabelFilter):f.replace(k,""),e.append(a(f)(d))}else e.append(a(c.get(d.gridId+"rowTemplate.html"))(d));d.$on("$destroy",d.$on("ngGridEventDigestRow",function(){b.digest(d)}))}}}}}]),u.directive("ngViewport",[function(){return function(a,b){function c(b){var c=b.target.scrollLeft,d=b.target.scrollTop;return a.$headerContainer&&a.$headerContainer.scrollLeft(c),a.adjustScrollLeft(c),a.adjustScrollTop(d),a.forceSyncScrolling?i():(clearTimeout(g),g=setTimeout(i,150)),f=c,h=d,e=!1,!0}function d(){return e=!0,b.focus&&b.focus(),!0}var e,f,g,h=0,i=function(){a.$root.$$phase||a.$digest()};b.bind("scroll",c),b.bind("mousewheel DOMMouseScroll",d),b.on("$destroy",function(){b.off("scroll",c),b.off("mousewheel DOMMouseScroll",d)}),a.enableCellSelection||a.domAccessProvider.selectionHandlers(a,b)}}]),a.ngGrid.i18n.da={ngAggregateLabel:"artikler",ngGroupPanelDescription:"Grupér rækker udfra en kolonne ved at trække dens overskift hertil.",ngSearchPlaceHolder:"Søg...",ngMenuText:"Vælg kolonner:",ngShowingItemsLabel:"Viste rækker:",ngTotalItemsLabel:"Rækker totalt:",ngSelectedItemsLabel:"Valgte rækker:",ngPageSizeLabel:"Side størrelse:",ngPagerFirstTitle:"Første side",ngPagerNextTitle:"Næste side",ngPagerPrevTitle:"Forrige side",ngPagerLastTitle:"Sidste side"},a.ngGrid.i18n.de={ngAggregateLabel:"eintrag",ngGroupPanelDescription:"Ziehen Sie eine Spaltenüberschrift hierhin um nach dieser Spalte zu gruppieren.",ngSearchPlaceHolder:"Suche...",ngMenuText:"Spalten auswählen:",ngShowingItemsLabel:"Zeige Einträge:",ngTotalItemsLabel:"Einträge gesamt:",ngSelectedItemsLabel:"Ausgewählte Einträge:",ngPageSizeLabel:"Einträge pro Seite:",ngPagerFirstTitle:"Erste Seite",ngPagerNextTitle:"Nächste Seite",ngPagerPrevTitle:"Vorherige Seite",ngPagerLastTitle:"Letzte Seite"},a.ngGrid.i18n.en={ngAggregateLabel:"items",ngGroupPanelDescription:"Drag a column header here and drop it to group by that column.",ngSearchPlaceHolder:"Search...",ngMenuText:"Choose Columns:",ngShowingItemsLabel:"Showing Items:",ngTotalItemsLabel:"Total Items:",ngSelectedItemsLabel:"Selected Items:",ngPageSizeLabel:"Page Size:",ngPagerFirstTitle:"First Page",ngPagerNextTitle:"Next Page",ngPagerPrevTitle:"Previous Page",ngPagerLastTitle:"Last Page"},a.ngGrid.i18n.es={ngAggregateLabel:"Artículos",ngGroupPanelDescription:"Arrastre un encabezado de columna aquí y soltarlo para agrupar por esa columna.",ngSearchPlaceHolder:"Buscar...",ngMenuText:"Elegir columnas:",ngShowingItemsLabel:"Artículos Mostrando:",ngTotalItemsLabel:"Artículos Totales:",ngSelectedItemsLabel:"Artículos Seleccionados:",ngPageSizeLabel:"Tamaño de Página:",ngPagerFirstTitle:"Primera Página",ngPagerNextTitle:"Página Siguiente",ngPagerPrevTitle:"Página Anterior",ngPagerLastTitle:"Última Página"},a.ngGrid.i18n.fa={ngAggregateLabel:"موردها",ngGroupPanelDescription:"یک عنوان ستون اینجا را بردار و به گروهی از آن ستون بیانداز.",ngSearchPlaceHolder:"جستجو...",ngMenuText:"انتخاب ستون‌ها:",ngShowingItemsLabel:"نمایش موردها:",ngTotalItemsLabel:"همهٔ موردها:",ngSelectedItemsLabel:"موردهای انتخاب‌شده:",ngPageSizeLabel:"اندازهٔ صفحه:",ngPagerFirstTitle:"صفحهٔ اول",ngPagerNextTitle:"صفحهٔ بعد",ngPagerPrevTitle:"صفحهٔ قبل",ngPagerLastTitle:"آخرین صفحه"},a.ngGrid.i18n.fr={ngAggregateLabel:"articles",ngGroupPanelDescription:"Faites glisser un en-tête de colonne ici et déposez-le vers un groupe par cette colonne.",ngSearchPlaceHolder:"Recherche...",ngMenuText:"Choisir des colonnes:",ngShowingItemsLabel:"Articles Affichage des:",ngTotalItemsLabel:"Nombre total d'articles:",ngSelectedItemsLabel:"Éléments Articles:",ngPageSizeLabel:"Taille de page:",ngPagerFirstTitle:"Première page",ngPagerNextTitle:"Page Suivante",ngPagerPrevTitle:"Page précédente",ngPagerLastTitle:"Dernière page"},a.ngGrid.i18n.nl={ngAggregateLabel:"items",ngGroupPanelDescription:"Sleep hier een kolomkop om op te groeperen.",ngSearchPlaceHolder:"Zoeken...",ngMenuText:"Kies kolommen:",ngShowingItemsLabel:"Toon items:",ngTotalItemsLabel:"Totaal items:",ngSelectedItemsLabel:"Geselecteerde items:",ngPageSizeLabel:"Pagina grootte:, ",ngPagerFirstTitle:"Eerste pagina",ngPagerNextTitle:"Volgende pagina",ngPagerPrevTitle:"Vorige pagina",ngPagerLastTitle:"Laatste pagina"},a.ngGrid.i18n["pt-br"]={ngAggregateLabel:"itens",ngGroupPanelDescription:"Arraste e solte uma coluna aqui para agrupar por essa coluna",ngSearchPlaceHolder:"Procurar...",ngMenuText:"Selecione as colunas:",ngShowingItemsLabel:"Mostrando os Itens:",ngTotalItemsLabel:"Total de Itens:",ngSelectedItemsLabel:"Items Selecionados:",ngPageSizeLabel:"Tamanho da Página:",ngPagerFirstTitle:"Primeira Página",ngPagerNextTitle:"Próxima Página",ngPagerPrevTitle:"Página Anterior",ngPagerLastTitle:"Última Página"},a.ngGrid.i18n.ru={ngAggregateLabel:"записи",ngGroupPanelDescription:"Перетащите сюда заголовок колонки для группировки по этой колонке.",ngSearchPlaceHolder:"Искать...",ngMenuText:"Выберите столбцы:",ngShowingItemsLabel:"Показаны записи:",ngTotalItemsLabel:"Всего записей:",
ngSelectedItemsLabel:"Выбранные записи:",ngPageSizeLabel:"Строк на странице:",ngPagerFirstTitle:"Первая страница",ngPagerNextTitle:"Следующая страница",ngPagerPrevTitle:"Предыдущая страница",ngPagerLastTitle:"Последняя страница"},a.ngGrid.i18n["zh-cn"]={ngAggregateLabel:"条目",ngGroupPanelDescription:"拖曳表头到此处以进行分组",ngSearchPlaceHolder:"搜索...",ngMenuText:"数据分组与选择列：",ngShowingItemsLabel:"当前显示条目：",ngTotalItemsLabel:"条目总数：",ngSelectedItemsLabel:"选中条目：",ngPageSizeLabel:"每页显示数：",ngPagerFirstTitle:"回到首页",ngPagerNextTitle:"下一页",ngPagerPrevTitle:"上一页",ngPagerLastTitle:"前往尾页"},a.ngGrid.i18n["zh-tw"]={ngAggregateLabel:"筆",ngGroupPanelDescription:"拖拉表頭到此處以進行分組",ngSearchPlaceHolder:"搜尋...",ngMenuText:"選擇欄位：",ngShowingItemsLabel:"目前顯示筆數：",ngTotalItemsLabel:"總筆數：",ngSelectedItemsLabel:"選取筆數：",ngPageSizeLabel:"每頁顯示：",ngPagerFirstTitle:"第一頁",ngPagerNextTitle:"下一頁",ngPagerPrevTitle:"上一頁",ngPagerLastTitle:"最後頁"},angular.module("ngGrid").run(["$templateCache",function(a){a.put("aggregateTemplate.html",'<div ng-click="row.toggleExpand()" ng-style="rowStyle(row)" class="ngAggregate">\r\n    <span class="ngAggregateText">{{row.label CUSTOM_FILTERS}} ({{row.totalChildren()}} {{AggItemsLabel}})</span>\r\n    <div class="{{row.aggClass()}}"></div>\r\n</div>\r\n'),a.put("cellEditTemplate.html",'<div ng-cell-has-focus ng-dblclick="CELL_EDITABLE_CONDITION && editCell()">\r\n\t<div ng-edit-cell-if="!(isFocused && CELL_EDITABLE_CONDITION)">\t\r\n\t\tDISPLAY_CELL_TEMPLATE\r\n\t</div>\r\n\t<div ng-edit-cell-if="isFocused && CELL_EDITABLE_CONDITION">\r\n\t\tEDITABLE_CELL_TEMPLATE\r\n\t</div>\r\n</div>\r\n'),a.put("cellTemplate.html",'<div class="ngCellText" ng-class="col.colIndex()"><span ng-cell-text>{{COL_FIELD CUSTOM_FILTERS}}</span></div>'),a.put("checkboxCellTemplate.html",'<div class="ngSelectionCell"><input tabindex="-1" class="ngSelectionCheckbox" type="checkbox" ng-checked="row.selected" /></div>'),a.put("checkboxHeaderTemplate.html",'<input class="ngSelectionHeader" type="checkbox" ng-show="multiSelect" ng-model="$parent.allSelected" ng-change="toggleSelectAll($parent.allSelected, true)"/>'),a.put("editableCellTemplate.html",'<input ng-class="\'colt\' + col.index" ng-input="COL_FIELD" ng-model="COL_FIELD" />'),a.put("footerTemplate.html",'<div ng-show="showFooter" class="ngFooterPanel" ng-class="{\'ui-widget-content\': jqueryUITheme, \'ui-corner-bottom\': jqueryUITheme}" ng-style="footerStyle()">\r\n    <div class="ngTotalSelectContainer" >\r\n        <div class="ngFooterTotalItems" ng-class="{\'ngNoMultiSelect\': !multiSelect}" >\r\n            <span class="ngLabel">{{i18n.ngTotalItemsLabel}} {{maxRows()}}</span><span ng-show="filterText.length > 0" class="ngLabel">({{i18n.ngShowingItemsLabel}} {{totalFilteredItemsLength()}})</span>\r\n        </div>\r\n        <div class="ngFooterSelectedItems" ng-show="multiSelect">\r\n            <span class="ngLabel">{{i18n.ngSelectedItemsLabel}} {{selectedItems.length}}</span>\r\n        </div>\r\n    </div>\r\n    <div class="ngPagerContainer" style="float: right; margin-top: 10px;" ng-show="enablePaging" ng-class="{\'ngNoMultiSelect\': !multiSelect}">\r\n        <div style="float:left; margin-right: 10px;" class="ngRowCountPicker">\r\n            <span style="float: left; margin-top: 3px;" class="ngLabel">{{i18n.ngPageSizeLabel}}</span>\r\n            <select style="float: left;height: 27px; width: 100px" ng-model="pagingOptions.pageSize" >\r\n                <option ng-repeat="size in pagingOptions.pageSizes">{{size}}</option>\r\n            </select>\r\n        </div>\r\n        <div style="float:left; margin-right: 10px; line-height:25px;" class="ngPagerControl" style="float: left; min-width: 135px;">\r\n            <button type="button" class="ngPagerButton" ng-click="pageToFirst()" ng-disabled="cantPageBackward()" title="{{i18n.ngPagerFirstTitle}}"><div class="ngPagerFirstTriangle"><div class="ngPagerFirstBar"></div></div></button>\r\n            <button type="button" class="ngPagerButton" ng-click="pageBackward()" ng-disabled="cantPageBackward()" title="{{i18n.ngPagerPrevTitle}}"><div class="ngPagerFirstTriangle ngPagerPrevTriangle"></div></button>\r\n            <input class="ngPagerCurrent" min="1" max="{{currentMaxPages}}" type="number" style="width:50px; height: 24px; margin-top: 1px; padding: 0 4px;" ng-model="pagingOptions.currentPage"/>\r\n            <span class="ngGridMaxPagesNumber" ng-show="maxPages() > 0">/ {{maxPages()}}</span>\r\n            <button type="button" class="ngPagerButton" ng-click="pageForward()" ng-disabled="cantPageForward()" title="{{i18n.ngPagerNextTitle}}"><div class="ngPagerLastTriangle ngPagerNextTriangle"></div></button>\r\n            <button type="button" class="ngPagerButton" ng-click="pageToLast()" ng-disabled="cantPageToLast()" title="{{i18n.ngPagerLastTitle}}"><div class="ngPagerLastTriangle"><div class="ngPagerLastBar"></div></div></button>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),a.put("gridTemplate.html",'<div class="ngTopPanel" ng-class="{\'ui-widget-header\':jqueryUITheme, \'ui-corner-top\': jqueryUITheme}" ng-style="topPanelStyle()">\r\n    <div class="ngGroupPanel" ng-show="showGroupPanel()" ng-style="groupPanelStyle()">\r\n        <div class="ngGroupPanelDescription" ng-show="configGroups.length == 0">{{i18n.ngGroupPanelDescription}}</div>\r\n        <ul ng-show="configGroups.length > 0" class="ngGroupList">\r\n            <li class="ngGroupItem" ng-repeat="group in configGroups">\r\n                <span class="ngGroupElement">\r\n                    <span class="ngGroupName">{{group.displayName}}\r\n                        <span ng-click="removeGroup($index)" class="ngRemoveGroup">x</span>\r\n                    </span>\r\n                    <span ng-hide="$last" class="ngGroupArrow"></span>\r\n                </span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    <div class="ngHeaderContainer" ng-style="headerStyle()">\r\n        <div ng-header-row class="ngHeaderScroller" ng-style="headerScrollerStyle()"></div>\r\n    </div>\r\n    <div ng-grid-menu></div>\r\n</div>\r\n<div class="ngViewport" unselectable="on" ng-viewport ng-class="{\'ui-widget-content\': jqueryUITheme}" ng-style="viewportStyle()">\r\n    <div class="ngCanvas" ng-style="canvasStyle()">\r\n        <div ng-style="rowStyle(row)" ng-repeat="row in renderedRows" ng-click="row.toggleSelected($event)" ng-class="row.alternatingRowClass()" ng-row></div>\r\n    </div>\r\n</div>\r\n<div ng-grid-footer></div>\r\n'),a.put("headerCellTemplate.html",'<div class="ngHeaderSortColumn {{col.headerClass}}" ng-style="{\'cursor\': col.cursor}" ng-class="{ \'ngSorted\': !col.noSortVisible() }">\r\n    <div ng-click="col.sort($event)" ng-class="\'colt\' + col.index" class="ngHeaderText">{{col.displayName}}</div>\r\n    <div class="ngSortButtonDown" ng-click="col.sort($event)" ng-show="col.showSortButtonDown()"></div>\r\n    <div class="ngSortButtonUp" ng-click="col.sort($event)" ng-show="col.showSortButtonUp()"></div>\r\n    <div class="ngSortPriority">{{col.sortPriority}}</div>\r\n    <div ng-class="{ ngPinnedIcon: col.pinned, ngUnPinnedIcon: !col.pinned }" ng-click="togglePin(col)" ng-show="col.pinnable"></div>\r\n</div>\r\n<div ng-show="col.resizable" class="ngHeaderGrip" ng-click="col.gripClick($event)" ng-mousedown="col.gripOnMouseDown($event)"></div>\r\n'),a.put("headerRowTemplate.html",'<div ng-style="{ height: col.headerRowHeight }" ng-repeat="col in renderedColumns" ng-class="col.colIndex()" class="ngHeaderCell">\r\n\t<div class="ngVerticalBar" ng-style="{height: col.headerRowHeight}" ng-class="{ ngVerticalBarVisible: !$last }">&nbsp;</div>\r\n\t<div ng-header-cell></div>\r\n</div>'),a.put("menuTemplate.html",'<div ng-show="showColumnMenu || showFilter"  class="ngHeaderButton" ng-click="toggleShowMenu()">\r\n    <div class="ngHeaderButtonArrow"></div>\r\n</div>\r\n<div ng-show="showMenu" class="ngColMenu">\r\n    <div ng-show="showFilter">\r\n        <input placeholder="{{i18n.ngSearchPlaceHolder}}" type="text" ng-model="filterText"/>\r\n    </div>\r\n    <div ng-show="showColumnMenu">\r\n        <span class="ngMenuText">{{i18n.ngMenuText}}</span>\r\n        <ul class="ngColList">\r\n            <li class="ngColListItem" ng-repeat="col in columns | ngColumns">\r\n                <label><input ng-disabled="col.pinned" type="checkbox" class="ngColListCheckbox" ng-model="col.visible"/>{{col.displayName}}</label>\r\n\t\t\t\t<a title="Group By" ng-class="col.groupedByClass()" ng-show="col.groupable && col.visible" ng-click="groupBy(col)"></a>\r\n\t\t\t\t<span class="ngGroupingNumber" ng-show="col.groupIndex > 0">{{col.groupIndex}}</span>          \r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>'),a.put("rowTemplate.html",'<div ng-style="{ \'cursor\': row.cursor }" ng-repeat="col in renderedColumns" ng-class="col.colIndex()" class="ngCell {{col.cellClass}}">\r\n\t<div class="ngVerticalBar" ng-style="{height: rowHeight}" ng-class="{ ngVerticalBarVisible: !$last }">&nbsp;</div>\r\n\t<div ng-cell></div>\r\n</div>')}])}(window,jQuery),function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f,g=b.parentNode,h=g.name;return!(!b.href||!h||"map"!==g.nodeName.toLowerCase())&&(!!(f=a("img[usemap=#"+h+"]")[0])&&d(f))}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return"hidden"===a.curCSS(this,"visibility")||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{},a.ui.version||(a.extend(a.ui,{version:"1.8.24",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return"number"==typeof b?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(("absolute"===(d=f.css("position"))||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),e&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=100===c.offsetHeight,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.curCSS||(a.curCSS=a.css),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(d&&a.element[0].parentNode)for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?16&a.compareDocumentPosition(b):a!==b&&a.contains(b)},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0||(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}}))}(jQuery),function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d,e=0;null!=(d=b[e]);e++)try{a(d).triggerHandler("remove")}catch(a){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(a){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e,f=b.split(".")[0];b=b.split(".")[1],e=f+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e]=function(c){return!!a.data(c,b)},a[f]=a[f]||{},a[f][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[f][b].prototype=a.extend(!0,g,{namespace:f,widgetName:b,widgetEventPrefix:a[f][b].prototype.widgetEventPrefix||b,widgetBaseClass:e},d),a.widget.bridge(b,a[f][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f="string"==typeof e,g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&"_"===e.charAt(0)?h:(f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b)return h=f,!1}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(0===arguments.length)return a.extend({},this.options);if("string"==typeof c){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent,f)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&!1===g.call(this.element[0],c,d)||c.isDefaultPrevented())}}}(jQuery),function(a,b){var c=!1;a(document).mouseup(function(a){c=!1}),a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!c){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=1==b.which,f=!("string"!=typeof this.options.cancel||!b.target.nodeName)&&a(b.target).closest(this.options.cancel).length;return!(e&&!f&&this._mouseCapture(b))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0,!0))}},_mouseMove:function(b){return!a.browser.msie||document.documentMode>=9||b.button?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b),this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}})}(jQuery),function(a,b){a.ui=a.ui||{};var c=/left|center|right/,d=/top|center|bottom/,e="center",f={},g=a.fn.position,h=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return g.apply(this,arguments);b=a.extend({},b);var h,i,j,k=a(b.of),l=k[0],m=(b.collision||"flip").split(" "),n=b.offset?b.offset.split(" "):[0,0];return 9===l.nodeType?(h=k.width(),i=k.height(),j={top:0,left:0}):l.setTimeout?(h=k.width(),i=k.height(),j={top:k.scrollTop(),left:k.scrollLeft()}):l.preventDefault?(b.at="left top",h=i=0,j={top:b.of.pageY,left:b.of.pageX}):(h=k.outerWidth(),i=k.outerHeight(),j=k.offset()),a.each(["my","at"],function(){var a=(b[this]||"").split(" ");1===a.length&&(a=c.test(a[0])?a.concat([e]):d.test(a[0])?[e].concat(a):[e,e]),a[0]=c.test(a[0])?a[0]:e,a[1]=d.test(a[1])?a[1]:e,b[this]=a}),1===m.length&&(m[1]=m[0]),n[0]=parseInt(n[0],10)||0,1===n.length&&(n[1]=n[0]),n[1]=parseInt(n[1],10)||0,"right"===b.at[0]?j.left+=h:b.at[0]===e&&(j.left+=h/2),"bottom"===b.at[1]?j.top+=i:b.at[1]===e&&(j.top+=i/2),j.left+=n[0],j.top+=n[1],this.each(function(){var c,d=a(this),g=d.outerWidth(),k=d.outerHeight(),l=parseInt(a.curCSS(this,"marginLeft",!0))||0,o=parseInt(a.curCSS(this,"marginTop",!0))||0,p=g+l+(parseInt(a.curCSS(this,"marginRight",!0))||0),q=k+o+(parseInt(a.curCSS(this,"marginBottom",!0))||0),r=a.extend({},j);"right"===b.my[0]?r.left-=g:b.my[0]===e&&(r.left-=g/2),"bottom"===b.my[1]?r.top-=k:b.my[1]===e&&(r.top-=k/2),f.fractions||(r.left=Math.round(r.left),r.top=Math.round(r.top)),c={left:r.left-l,top:r.top-o},a.each(["left","top"],function(d,e){a.ui.position[m[d]]&&a.ui.position[m[d]][e](r,{targetWidth:h,targetHeight:i,elemWidth:g,elemHeight:k,collisionPosition:c,collisionWidth:p,collisionHeight:q,offset:n,my:b.my,at:b.at})}),a.fn.bgiframe&&d.bgiframe(),d.offset(a.extend(r,{using:b.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]!==e){var d=a(window),f=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),g="left"===c.my[0]?-c.elemWidth:"right"===c.my[0]?c.elemWidth:0,h="left"===c.at[0]?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0}},top:function(b,c){if(c.at[1]!==e){var d=a(window),f=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),g="top"===c.my[1]?-c.elemHeight:"bottom"===c.my[1]?c.elemHeight:0,h="top"===c.at[1]?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)},a.fn.offset=function(b){var c=this[0];return c&&c.ownerDocument?b?a.isFunction(b)?this.each(function(c){a(this).offset(b.call(this,c,a(this).offset()))}):this.each(function(){a.offset.setOffset(this,b)}):h.call(this):null}),a.curCSS||(a.curCSS=a.css),function(){var b,c,d,e,g,h=document.getElementsByTagName("body")[0],i=document.createElement("div");b=document.createElement(h?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},h&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(var j in d)b.style[j]=d[j];b.appendChild(i),c=h||document.documentElement,c.insertBefore(b,c.firstChild),i.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",e=a(i).offset(function(a,b){return b}).offset(),b.innerHTML="",c.removeChild(b),g=e.top+e.left+(h?2e3:0),f.fractions=g>21&&g<22}()}(jQuery),function(a,b){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(b){var c=this.options;return!(this.helper||c.disabled||a(b.target).is(".ui-resizable-handle"))&&(this.handle=this._getHandle(b),!!this.handle&&(c.iframeFix&&a(!0===c.iframeFix?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0))},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),!1===this._trigger("start",b)?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(!1===this._trigger("drag",b,d))return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=!1);for(var d=this.element[0],e=!1;d&&(d=d.parentNode);)d==document&&(e=!0);if(!e&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!c||"valid"==this.options.revert&&c||!0===this.options.revert||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var f=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==f._trigger("stop",b)&&f._clear()})}else!1!==this._trigger("stop",b)&&this._clear();return!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var c=!this.options.handle||!a(this.options.handle,this.element).length;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"==c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"==c.appendTo?this.element[0].parentNode:c.appendTo),d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if("parent"==b.containment&&(b.containment=this.helper[0].parentNode),"document"!=b.containment&&"window"!=b.containment||(this.containment=["document"==b.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:a(window).scrollLeft())+a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:a(window).scrollTop())+(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(b.containment)||b.containment.constructor==Array)b.containment.constructor==Array&&(this.containment=b.containment);else{var c=a(b.containment),d=c[0];if(!d)return;var e=(c.offset(),"hidden"!=a(d).css("overflow"));this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(e?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"==b?1:-1,e=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName),f=b.pageX,g=b.pageY;if(this.originalPosition){var h;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();h=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]
}else h=this.containment;b.pageX-this.offset.click.left<h[0]&&(f=h[0]+this.offset.click.left),b.pageY-this.offset.click.top<h[1]&&(g=h[1]+this.offset.click.top),b.pageX-this.offset.click.left>h[2]&&(f=h[2]+this.offset.click.left),b.pageY-this.offset.click.top>h[3]&&(g=h[3]+this.offset.click.top)}if(c.grid){var j=c.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY;g=h&&(j-this.offset.click.top<h[1]||j-this.offset.click.top>h[3])?j-this.offset.click.top<h[1]?j+c.grid[1]:j-c.grid[1]:j;var k=c.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX;f=h&&(k-this.offset.click.left<h[0]||k-this.offset.click.left>h[2])?k-this.offset.click.left<h[0]?k+c.grid[0]:k-c.grid[0]:k}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"==b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(a){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.extend(a.ui.draggable,{version:"1.8.24"}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"==d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("draggable"),e=this;a.each(d.sortables,function(f){this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c){var d=a("body"),e=a(this).data("draggable").options;d.css("cursor")&&(e._cursor=d.css("cursor")),d.css("cursor",e.cursor)},stop:function(b,c){var d=a(this).data("draggable").options;d._cursor&&a("body").css("cursor",d._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(b,c){var d=a(this).data("draggable");d.scrollParent[0]!=document&&"HTML"!=d.scrollParent[0].tagName&&(d.overflowOffset=d.scrollParent.offset())},drag:function(b,c){var d=a(this).data("draggable"),e=d.options,f=!1;d.scrollParent[0]!=document&&"HTML"!=d.scrollParent[0].tagName?(e.axis&&"x"==e.axis||(d.overflowOffset.top+d.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity?d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop-e.scrollSpeed)),e.axis&&"y"==e.axis||(d.overflowOffset.left+d.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity?d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft-e.scrollSpeed))):(e.axis&&"x"==e.axis||(b.pageY-a(document).scrollTop()<e.scrollSensitivity?f=a(document).scrollTop(a(document).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<e.scrollSensitivity&&(f=a(document).scrollTop(a(document).scrollTop()+e.scrollSpeed))),e.axis&&"y"==e.axis||(b.pageX-a(document).scrollLeft()<e.scrollSensitivity?f=a(document).scrollLeft(a(document).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<e.scrollSensitivity&&(f=a(document).scrollLeft(a(document).scrollLeft()+e.scrollSpeed)))),!1!==f&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c){var d=a(this).data("draggable"),e=d.options;d.snapElements=[],a(e.snap.constructor!=String?e.snap.items||":data(draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c){for(var d=a(this).data("draggable"),e=d.options,f=e.snapTolerance,g=c.offset.left,h=g+d.helperProportions.width,i=c.offset.top,j=i+d.helperProportions.height,k=d.snapElements.length-1;k>=0;k--){var l=d.snapElements[k].left,m=l+d.snapElements[k].width,n=d.snapElements[k].top,o=n+d.snapElements[k].height;if(l-f<g&&g<m+f&&n-f<i&&i<o+f||l-f<g&&g<m+f&&n-f<j&&j<o+f||l-f<h&&h<m+f&&n-f<i&&i<o+f||l-f<h&&h<m+f&&n-f<j&&j<o+f){if("inner"!=e.snapMode){var p=Math.abs(n-j)<=f,q=Math.abs(o-i)<=f,r=Math.abs(l-h)<=f,s=Math.abs(m-g)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n-d.helperProportions.height,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m}).left-d.margins.left)}var t=p||q||r||s;if("outer"!=e.snapMode){var p=Math.abs(n-i)<=f,q=Math.abs(o-j)<=f,r=Math.abs(l-g)<=f,s=Math.abs(m-h)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o-d.helperProportions.height,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m-d.helperProportions.width}).left-d.margins.left)}!d.snapElements[k].snapping&&(p||q||r||s||t)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=p||q||r||s||t}else d.snapElements[k].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=!1}}}),a.ui.plugin.add("draggable","stack",{start:function(b,c){var d=a(this).data("draggable").options,e=a.makeArray(a(d.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(e.length){var f=parseInt(e[0].style.zIndex)||0;a(e).each(function(a){this.style.zIndex=f+a}),this[0].style.zIndex=f+e.length}}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(jQuery),function(a,b){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,c=b.accept;this.isover=0,this.isout=1,this.accept=a.isFunction(c)?c:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[],a.ui.ddmanager.droppables[b.scope].push(this),b.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var b=a.ui.ddmanager.droppables[this.options.scope],c=0;c<b.length;c++)b[c]==this&&b.splice(c,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(b,c){"accept"==b&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return!1;var e=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");if(b.options.greedy&&!b.options.disabled&&b.options.scope==d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance))return e=!0,!1}),!e&&(!!this.accept.call(this.element[0],d.currentItem||d.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element))},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.extend(a.ui.droppable,{version:"1.8.24"}),a.ui.intersect=function(b,c,d){if(!c.offset)return!1;var e=(b.positionAbs||b.position.absolute).left,f=e+b.helperProportions.width,g=(b.positionAbs||b.position.absolute).top,h=g+b.helperProportions.height,i=c.offset.left,j=i+c.proportions.width,k=c.offset.top,l=k+c.proportions.height;switch(d){case"fit":return i<=e&&f<=j&&k<=g&&h<=l;case"intersect":return i<e+b.helperProportions.width/2&&f-b.helperProportions.width/2<j&&k<g+b.helperProportions.height/2&&h-b.helperProportions.height/2<l;case"pointer":var m=(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,n=(b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top;return a.ui.isOver(n,m,k,i,c.proportions.height,c.proportions.width);case"touch":return(g>=k&&g<=l||h>=k&&h<=l||g<k&&h>l)&&(e>=i&&e<=j||f>=i&&f<=j||e<i&&f>j);default:return!1}},a.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(b,c){var d=a.ui.ddmanager.droppables[b.options.scope]||[],e=c?c.type:null,f=(b.currentItem||b.element).find(":data(droppable)").andSelf();a:for(var g=0;g<d.length;g++)if(!(d[g].options.disabled||b&&!d[g].accept.call(d[g].element[0],b.currentItem||b.element))){for(var h=0;h<f.length;h++)if(f[h]==d[g].element[0]){d[g].proportions.height=0;continue a}d[g].visible="none"!=d[g].element.css("display"),d[g].visible&&("mousedown"==e&&d[g]._activate.call(d[g],c),d[g].offset=d[g].element.offset(),d[g].proportions={width:d[g].element[0].offsetWidth,height:d[g].element[0].offsetHeight})}},drop:function(b,c){var d=!1;return a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parents(":not(body,html)").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d=a.ui.intersect(b,this,this.options.tolerance),e=d||1!=this.isover?d&&0==this.isover?"isover":null:"isout";if(e){var f;if(this.options.greedy){var g=this.options.scope,h=this.element.parents(":data(droppable)").filter(function(){return a.data(this,"droppable").options.scope===g});h.length&&(f=a.data(h[0],"droppable"),f.greedyChild="isover"==e?1:0)}f&&"isover"==e&&(f.isover=0,f.isout=1,f._out.call(f,c)),this[e]=1,this["isout"==e?"isover":"isout"]=0,this["isover"==e?"_over":"_out"].call(this,c),f&&"isout"==e&&(f.isout=0,f.isover=1,f._over.call(f,c))}}})},dragStop:function(b,c){b.element.parents(":not(body,html)").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}}(jQuery),function(a,b){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var b=this,c=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=c.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var d=this.handles.split(",");this.handles={};for(var e=0;e<d.length;e++){var f=a.trim(d[e]),g="ui-resizable-"+f,h=a('<div class="ui-resizable-handle '+g+'"></div>');h.css({zIndex:c.zIndex}),"se"==f&&h.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[f]=".ui-resizable-"+f,this.element.append(h)}}this._renderAxis=function(b){b=b||this.element;for(var c in this.handles){if(this.handles[c].constructor==String&&(this.handles[c]=a(this.handles[c],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=a(this.handles[c],this.element),e=0;e=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth();var f=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");b.css(f,e),this._proportionallyResize()}a(this.handles[c]).length}},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=a&&a[1]?a[1]:"se"}}),c.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").hover(function(){c.disabled||(a(this).removeClass("ui-resizable-autohide"),b._handles.show())},function(){c.disabled||b.resizing||(a(this).addClass("ui-resizable-autohide"),b._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var b=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){b(this.element);var c=this.element;c.after(this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),top:c.css("top"),left:c.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),b(this.originalElement),this},_mouseCapture:function(b){var c=!1;for(var d in this.handles)a(this.handles[d])[0]==b.target&&(c=!0);return!this.options.disabled&&c},_mouseStart:function(b){var d=this.options,e=this.element.position(),f=this.element;this.resizing=!0,this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()},(f.is(".ui-draggable")||/absolute/.test(f.css("position")))&&f.css({position:"absolute",top:e.top,left:e.left}),this._renderProxy();var g=c(this.helper.css("left")),h=c(this.helper.css("top"));d.containment&&(g+=a(d.containment).scrollLeft()||0,h+=a(d.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:g,top:h},this.size=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalSize=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalPosition={left:g,top:h},this.sizeDiff={width:f.outerWidth()-f.width(),height:f.outerHeight()-f.height()},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio="number"==typeof d.aspectRatio?d.aspectRatio:this.originalSize.width/this.originalSize.height||1;var i=a(".ui-resizable-"+this.axis).css("cursor");return a("body").css("cursor","auto"==i?this.axis+"-resize":i),f.addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c=this.helper,d=(this.options,this.originalMousePosition),e=this.axis,f=b.pageX-d.left||0,g=b.pageY-d.top||0,h=this._change[e];if(!h)return!1;var i=h.apply(this,[b,f,g]);a.browser.msie&&a.browser.version,this.sizeDiff;return this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(i=this._updateRatio(i,b)),i=this._respectSize(i,b),this._propagate("resize",b),c.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(i),this._trigger("resize",b,this.ui()),!1},_mouseStop:function(b){this.resizing=!1;var c=this.options,d=this;if(this._helper){var e=this._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:d.sizeDiff.height,h=f?0:d.sizeDiff.width,i={width:d.helper.width()-h,height:d.helper.height()-g},j=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,k=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;c.animate||this.element.css(a.extend(i,{top:k,left:j})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()}return a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b,c,e,f,g,h=this.options;g={minWidth:d(h.minWidth)?h.minWidth:0,maxWidth:d(h.maxWidth)?h.maxWidth:1/0,minHeight:d(h.minHeight)?h.minHeight:0,maxHeight:d(h.maxHeight)?h.maxHeight:1/0},(this._aspectRatio||a)&&(b=g.minHeight*this.aspectRatio,e=g.minWidth/this.aspectRatio,c=g.maxHeight*this.aspectRatio,f=g.maxWidth/this.aspectRatio,b>g.minWidth&&(g.minWidth=b),e>g.minHeight&&(g.minHeight=e),c<g.maxWidth&&(g.maxWidth=c),f<g.maxHeight&&(g.maxHeight=f)),this._vBoundaries=g},_updateCache:function(a){this.options;this.offset=this.helper.offset(),d(a.left)&&(this.position.left=a.left),d(a.top)&&(this.position.top=a.top),d(a.height)&&(this.size.height=a.height),d(a.width)&&(this.size.width=a.width)},_updateRatio:function(a,b){var c=(this.options,this.position),e=this.size,f=this.axis;return d(a.height)?a.width=a.height*this.aspectRatio:d(a.width)&&(a.height=a.width/this.aspectRatio),"sw"==f&&(a.left=c.left+(e.width-a.width),a.top=null),"nw"==f&&(a.top=c.top+(e.height-a.height),a.left=c.left+(e.width-a.width)),a},_respectSize:function(a,b){var c=(this.helper,this._vBoundaries),e=(this._aspectRatio||b.shiftKey,this.axis),f=d(a.width)&&c.maxWidth&&c.maxWidth<a.width,g=d(a.height)&&c.maxHeight&&c.maxHeight<a.height,h=d(a.width)&&c.minWidth&&c.minWidth>a.width,i=d(a.height)&&c.minHeight&&c.minHeight>a.height;h&&(a.width=c.minWidth),i&&(a.height=c.minHeight),f&&(a.width=c.maxWidth),g&&(a.height=c.maxHeight);var j=this.originalPosition.left+this.originalSize.width,k=this.position.top+this.size.height,l=/sw|nw|w/.test(e),m=/nw|ne|n/.test(e);h&&l&&(a.left=j-c.minWidth),f&&l&&(a.left=j-c.maxWidth),i&&m&&(a.top=k-c.minHeight),g&&m&&(a.top=k-c.maxHeight);var n=!a.width&&!a.height;return n&&!a.left&&a.top?a.top=null:n&&!a.top&&a.left&&(a.left=null),a},_proportionallyResize:function(){this.options;if(this._proportionallyResizeElements.length)for(var b=this.helper||this.element,c=0;c<this._proportionallyResizeElements.length;c++){var d=this._proportionallyResizeElements[c];if(!this.borderDif){var e=[d.css("borderTopWidth"),d.css("borderRightWidth"),d.css("borderBottomWidth"),d.css("borderLeftWidth")],f=[d.css("paddingTop"),d.css("paddingRight"),d.css("paddingBottom"),d.css("paddingLeft")];this.borderDif=a.map(e,function(a,b){return(parseInt(a,10)||0)+(parseInt(f[b],10)||0)})}a.browser.msie&&(a(b).is(":hidden")||a(b).parents(":hidden").length)||d.css({height:b.height()-this.borderDif[0]-this.borderDif[2]||0,width:b.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var b=this.element,c=this.options;if(this.elementOffset=b.offset(),this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var d=a.browser.msie&&a.browser.version<7,e=d?1:0,f=d?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+f,height:this.element.outerHeight()+f,position:"absolute",left:this.elementOffset.left-e+"px",top:this.elementOffset.top-e+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,b,c){return{width:this.originalSize.width+b}},w:function(a,b,c){var d=(this.options,this.originalSize);return{left:this.originalPosition.left+b,width:d.width-b}},n:function(a,b,c){var d=(this.options,this.originalSize);return{top:this.originalPosition.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!=b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.extend(a.ui.resizable,{version:"1.8.24"}),a.ui.plugin.add("resizable","alsoResize",{start:function(b,c){var d=a(this).data("resizable"),e=d.options,f=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof e.alsoResize||e.alsoResize.parentNode?f(e.alsoResize):e.alsoResize.length?(e.alsoResize=e.alsoResize[0],f(e.alsoResize)):a.each(e.alsoResize,function(a){f(a)})},resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(b,c){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","animate",{stop:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d._proportionallyResizeElements,g=f.length&&/textarea/i.test(f[0].nodeName),h=g&&a.ui.hasScroll(f[0],"left")?0:d.sizeDiff.height,i=g?0:d.sizeDiff.width,j={width:d.size.width-i,height:d.size.height-h},k=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,l=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;d.element.animate(a.extend(j,l&&k?{top:l,left:k}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var c={width:parseInt(d.element.css("width"),10),height:parseInt(d.element.css("height"),10),top:parseInt(d.element.css("top"),10),left:parseInt(d.element.css("left"),10)};f&&f.length&&a(f[0]).css({width:c.width,height:c.height}),d._updateCache(c),d._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(b,d){var e=a(this).data("resizable"),f=e.options,g=e.element,h=f.containment,i=h instanceof a?h.get(0):/parent/.test(h)?g.parent().get(0):h;if(i)if(e.containerElement=a(i),/document/.test(h)||h==document)e.containerOffset={left:0,top:0},e.containerPosition={left:0,top:0},e.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var j=a(i),k=[];a(["Top","Right","Left","Bottom"]).each(function(a,b){k[a]=c(j.css("padding"+b))}),e.containerOffset=j.offset(),e.containerPosition=j.position(),e.containerSize={height:j.innerHeight()-k[3],width:j.innerWidth()-k[1]};var l=e.containerOffset,m=e.containerSize.height,n=e.containerSize.width,o=a.ui.hasScroll(i,"left")?i.scrollWidth:n,p=a.ui.hasScroll(i)?i.scrollHeight:m;e.parentData={element:i,left:l.left,top:l.top,width:o,height:p}}},resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=(d.containerSize,d.containerOffset),g=(d.size,d.position),h=d._aspectRatio||b.shiftKey,i={top:0,left:0},j=d.containerElement;j[0]!=document&&/static/.test(j.css("position"))&&(i=f),g.left<(d._helper?f.left:0)&&(d.size.width=d.size.width+(d._helper?d.position.left-f.left:d.position.left-i.left),h&&(d.size.height=d.size.width/d.aspectRatio),d.position.left=e.helper?f.left:0),g.top<(d._helper?f.top:0)&&(d.size.height=d.size.height+(d._helper?d.position.top-f.top:d.position.top),h&&(d.size.width=d.size.height*d.aspectRatio),d.position.top=d._helper?f.top:0),d.offset.left=d.parentData.left+d.position.left,d.offset.top=d.parentData.top+d.position.top;var k=Math.abs((d._helper,d.offset.left-i.left+d.sizeDiff.width)),l=Math.abs((d._helper?d.offset.top-i.top:d.offset.top-f.top)+d.sizeDiff.height),m=d.containerElement.get(0)==d.element.parent().get(0),n=/relative|absolute/.test(d.containerElement.css("position"));m&&n&&(k-=d.parentData.left),k+d.size.width>=d.parentData.width&&(d.size.width=d.parentData.width-k,h&&(d.size.height=d.size.width/d.aspectRatio)),l+d.size.height>=d.parentData.height&&(d.size.height=d.parentData.height-l,h&&(d.size.width=d.size.height*d.aspectRatio))},stop:function(b,c){var d=a(this).data("resizable"),e=d.options,f=(d.position,d.containerOffset),g=d.containerPosition,h=d.containerElement,i=a(d.helper),j=i.offset(),k=i.outerWidth()-d.sizeDiff.width,l=i.outerHeight()-d.sizeDiff.height;d._helper&&!e.animate&&/relative/.test(h.css("position"))&&a(this).css({left:j.left-g.left-f.left,width:k,height:l}),d._helper&&!e.animate&&/static/.test(h.css("position"))&&a(this).css({left:j.left-g.left-f.left,width:k,height:l})}}),a.ui.plugin.add("resizable","ghost",{start:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.size;d.ghost=d.originalElement.clone(),d.ghost.css({opacity:.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof e.ghost?e.ghost:""),d.ghost.appendTo(d.helper)},resize:function(b,c){var d=a(this).data("resizable");d.options;d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})},stop:function(b,c){var d=a(this).data("resizable");d.options;d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.size,g=d.originalSize,h=d.originalPosition,i=d.axis;e._aspectRatio||b.shiftKey;e.grid="number"==typeof e.grid?[e.grid,e.grid]:e.grid;var j=Math.round((f.width-g.width)/(e.grid[0]||1))*(e.grid[0]||1),k=Math.round((f.height-g.height)/(e.grid[1]||1))*(e.grid[1]||1);/^(se|s|e)$/.test(i)?(d.size.width=g.width+j,d.size.height=g.height+k):/^(ne)$/.test(i)?(d.size.width=g.width+j,d.size.height=g.height+k,d.position.top=h.top-k):/^(sw)$/.test(i)?(d.size.width=g.width+j,d.size.height=g.height+k,d.position.left=h.left-j):(d.size.width=g.width+j,
d.size.height=g.height+k,d.position.top=h.top-k,d.position.left=h.left-j)}});var c=function(a){return parseInt(a,10)||0},d=function(a){return!isNaN(parseInt(a,10))}}(jQuery),function(a,b){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable"),this.dragged=!1;var c;this.refresh=function(){c=a(b.options.filter,b.element[0]),c.addClass("ui-selectee"),c.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=c.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(b){var c=this;if(this.opos=[b.pageX,b.pageY],!this.options.disabled){var d=this.options;this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,!b.metaKey&&!b.ctrlKey&&(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().andSelf().each(function(){var d=a.data(this,"selectable-item");if(d){var e=!b.metaKey&&!b.ctrlKey||!d.$element.hasClass("ui-selected");return d.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting"),d.unselecting=!e,d.selecting=e,d.selected=e,e?c._trigger("selecting",b,{selecting:d.element}):c._trigger("unselecting",b,{unselecting:d.element}),!1}})}},_mouseDrag:function(b){var c=this;if(this.dragged=!0,!this.options.disabled){var d=this.options,e=this.opos[0],f=this.opos[1],g=b.pageX,h=b.pageY;if(e>g){var i=g;g=e,e=i}if(f>h){var i=h;h=f,f=i}return this.helper.css({left:e,top:f,width:g-e,height:h-f}),this.selectees.each(function(){var i=a.data(this,"selectable-item");if(i&&i.element!=c.element[0]){var j=!1;"touch"==d.tolerance?j=!(i.left>g||i.right<e||i.top>h||i.bottom<f):"fit"==d.tolerance&&(j=i.left>e&&i.right<g&&i.top>f&&i.bottom<h),j?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,c._trigger("selecting",b,{selecting:i.element}))):(i.selecting&&((b.metaKey||b.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),c._trigger("unselecting",b,{unselecting:i.element}))),i.selected&&!b.metaKey&&!b.ctrlKey&&!i.startselected&&(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,c._trigger("unselecting",b,{unselecting:i.element})))}}),!1}},_mouseStop:function(b){var c=this;this.dragged=!1;this.options;return a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}}),a.extend(a.ui.selectable,{version:"1.8.24"})}(jQuery),function(a,b){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===a.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display"))),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){a.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var b=this.items.length-1;b>=0;b--)this.items[b].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){"disabled"===b?(this.options[b]=c,this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){var d=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(b);var e=null,f=this;a(b.target).parents().each(function(){if(a.data(this,d.widgetName+"-item")==f)return e=a(this),!1});if(a.data(b.target,d.widgetName+"-item")==f&&(e=a(b.target)),!e)return!1;if(this.options.handle&&!c){var g=!1;if(a(this.options.handle,e).find("*").andSelf().each(function(){this==b.target&&(g=!0)}),!g)return!1}return this.currentItem=e,this._removeCurrentsFromItems(),!0},_mouseStart:function(b,c,d){var e=this.options,f=this;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),e.containment&&this._setContainment(),e.cursor&&(a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",e.cursor)),e.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",e.opacity)),e.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",e.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(var g=this.containers.length-1;g>=0;g--)this.containers[g]._trigger("activate",b,f._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){if(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var c=this.options,d=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+c.scrollSpeed:b.pageY-this.overflowOffset.top<c.scrollSensitivity&&(this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-c.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-this.overflowOffset.left<c.scrollSensitivity&&(this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-c.scrollSpeed)):(b.pageY-a(document).scrollTop()<c.scrollSensitivity?d=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<c.scrollSensitivity&&(d=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed)),b.pageX-a(document).scrollLeft()<c.scrollSensitivity?d=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(d=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed))),!1!==d&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var e=this.items.length-1;e>=0;e--){var f=this.items[e],g=f.item[0],h=this._intersectsWithPointer(f);if(h&&(f.instance===this.currentContainer&&!(g==this.currentItem[0]||this.placeholder[1==h?"next":"prev"]()[0]==g||a.ui.contains(this.placeholder[0],g)||"semi-dynamic"==this.options.type&&a.ui.contains(this.element[0],g)))){if(this.direction=1==h?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(f))break;this._rearrange(b,f),this._trigger("change",b,this._uiHash());break}}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=d.placeholder.offset();d.reverting=!0,a(this.helper).animate({left:e.left-this.offset.parent.left-d.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-d.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){var b=this;if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--)this.containers[c]._trigger("deactivate",null,b._uiHash(this)),this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",null,b._uiHash(this)),this.containers[c].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l=d+j>h&&d+j<i&&b+k>f&&b+k<g;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?l:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(b){var c="x"===this.options.axis||a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height),d="y"===this.options.axis||a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width),e=c&&d,f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return!!e&&(this.floating?g&&"right"==g||"down"==f?2:1:f&&("down"==f?2:1))},_intersectsWithSides:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"==f&&d||"left"==f&&!d:e&&("down"==e&&c||"up"==e&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!=a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!=a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var c=[],d=[],e=this._connectWith();if(e&&b)for(var f=e.length-1;f>=0;f--)for(var g=a(e[f]),h=g.length-1;h>=0;h--){var i=a.data(g[h],this.widgetName);i&&i!=this&&!i.options.disabled&&d.push([a.isFunction(i.options.items)?i.options.items.call(i.element):a(i.options.items,i.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),i])}d.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var f=d.length-1;f>=0;f--)d[f][0].each(function(){c.push(this)});return a(c)},_removeCurrentsFromItems:function(){for(var a=this.currentItem.find(":data("+this.widgetName+"-item)"),b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(b){this.items=[],this.containers=[this];var c=this.items,d=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],e=this._connectWith();if(e&&this.ready)for(var f=e.length-1;f>=0;f--)for(var g=a(e[f]),h=g.length-1;h>=0;h--){var i=a.data(g[h],this.widgetName);i&&i!=this&&!i.options.disabled&&(d.push([a.isFunction(i.options.items)?i.options.items.call(i.element[0],b,{item:this.currentItem}):a(i.options.items,i.element),i]),this.containers.push(i))}for(var f=d.length-1;f>=0;f--)for(var j=d[f][1],k=d[f][0],h=0,l=k.length;h<l;h++){var m=a(k[h]);m.data(this.widgetName+"-item",j),c.push({item:m,instance:j,width:0,height:0,left:0,top:0})}},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var c=this.items.length-1;c>=0;c--){var d=this.items[c];if(d.instance==this.currentContainer||!this.currentContainer||d.item[0]==this.currentItem[0]){var e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item;b||(d.width=e.outerWidth(),d.height=e.outerHeight());var f=e.offset();d.left=f.left,d.top=f.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var c=this.containers.length-1;c>=0;c--){var f=this.containers[c].element.offset();this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight()}return this},_createPlaceholder:function(b){var c=b||this,d=c.options;if(!d.placeholder||d.placeholder.constructor==String){var e=d.placeholder;d.placeholder={element:function(){var b=a(document.createElement(c.currentItem[0].nodeName)).addClass(e||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return e||(b.style.visibility="hidden"),b},update:function(a,b){e&&!d.forcePlaceholderSize||(b.height()||b.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10)),b.width()||b.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10)))}}}c.placeholder=a(d.placeholder.element.call(c.element,c.currentItem)),c.currentItem.after(c.placeholder),d.placeholder.update(c,c.placeholder)},_contactContainers:function(b){for(var c=null,d=null,e=this.containers.length-1;e>=0;e--)if(!a.ui.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(c&&a.ui.contains(this.containers[e].element[0],c.element[0]))continue;c=this.containers[e],d=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",b,this._uiHash(this)),this.containers[e].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1;else if(this.currentContainer!=this.containers[d]){for(var f=1e4,g=null,h=this.positionAbs[this.containers[d].floating?"left":"top"],i=this.items.length-1;i>=0;i--)if(a.ui.contains(this.containers[d].element[0],this.items[i].item[0])){var j=this.containers[d].floating?this.items[i].item.offset().left:this.items[i].item.offset().top;Math.abs(j-h)<f&&(f=Math.abs(j-h),g=this.items[i],this.direction=j-h>0?"down":"up")}if(!g&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[d],g?this._rearrange(b,g,null,!0):this._rearrange(b,null,this.containers[d].element,!0),this._trigger("change",b,this._uiHash()),this.containers[d]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"==c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!=c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==d[0].style.width||c.forceHelperSize)&&d.width(this.currentItem.width()),(""==d[0].style.height||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if("parent"==b.containment&&(b.containment=this.helper[0].parentNode),"document"!=b.containment&&"window"!=b.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(b.containment)){var c=a(b.containment)[0],d=a(b.containment).offset(),e="hidden"!=a(c).css("overflow");this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"==b?1:-1,e=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName);"relative"==this.cssPosition&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var f=b.pageX,g=b.pageY;if(this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),c.grid)){var h=this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1];g=this.containment&&(h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3])?h-this.offset.click.top<this.containment[1]?h+c.grid[1]:h-c.grid[1]:h;var i=this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0];f=this.containment&&(i-this.offset.click.left<this.containment[0]||i-this.offset.click.left>this.containment[2])?i-this.offset.click.left<this.containment[0]?i+c.grid[0]:i-c.grid[0]:i}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this,f=this.counter;window.setTimeout(function(){f==e.counter&&e.refreshPositions(!d)},0)},_clear:function(b,c){this.reverting=!1;var d=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var e in this._storedCSS)"auto"!=this._storedCSS[e]&&"static"!=this._storedCSS[e]||(this._storedCSS[e]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!c&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!c&&d.push(function(a){this._trigger("update",a,this._uiHash())}),this!==this.currentContainer&&(c||(d.push(function(a){this._trigger("remove",a,this._uiHash())}),d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer))));for(var e=this.containers.length-1;e>=0;e--)c||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over=0);if(this._storedCursor&&a("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",b,this._uiHash());for(var e=0;e<d.length;e++)d[e].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!1}if(c||this._trigger("beforeStop",b,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!c){for(var e=0;e<d.length;e++)d[e].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){!1===a.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}}),a.extend(a.ui.sortable,{version:"1.8.24"})}(jQuery),function(a,b){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var b=this,c=b.options;if(b.running=0,b.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),b.headers=b.element.find(c.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){c.disabled||a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){c.disabled||a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){c.disabled||a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){c.disabled||a(this).removeClass("ui-state-focus")}),b.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"),c.navigation){var d=b.element.find("a").filter(c.navigationFilter).eq(0);if(d.length){var e=d.closest(".ui-accordion-header");e.length?b.active=e:b.active=d.closest(".ui-accordion-content").prev()}}b.active=b._findActive(b.active||c.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),b.active.next().addClass("ui-accordion-content-active"),b._createIcons(),b.resize(),b.element.attr("role","tablist"),b.headers.attr("role","tab").bind("keydown.accordion",function(a){return b._keydown(a)}).next().attr("role","tabpanel"),b.headers.not(b.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),b.active.length?b.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):b.headers.eq(0).attr("tabIndex",0),a.browser.safari||b.headers.find("a").attr("tabIndex",-1),c.event&&b.headers.bind(c.event.split(" ").join(".accordion ")+".accordion",function(a){b._clickHandler.call(b,a,this),a.preventDefault()})},_createIcons:function(){var b=this.options;b.icons&&(a("<span></span>").addClass("ui-icon "+b.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var b=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var c=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(b.autoHeight||b.fillHeight)&&c.css("height",""),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),"active"==b&&this.activate(c),"icons"==b&&(this._destroyIcons(),c&&this._createIcons()),"disabled"==b&&this.headers.add(this.headers.next())[c?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(b){if(!(this.options.disabled||b.altKey||b.ctrlKey)){var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._clickHandler({target:b.target},b.target),b.preventDefault()}return!f||(a(b.target).attr("tabIndex",-1),a(f).attr("tabIndex",0),f.focus(),!1)}},resize:function(){var b,c=this.options;if(c.fillSpace){if(a.browser.msie){var d=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}b=this.element.parent().height(),a.browser.msie&&this.element.parent().css("overflow",d),this.headers.each(function(){
b-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,b-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else c.autoHeight&&(b=0,this.headers.next().each(function(){b=Math.max(b,a(this).height("").height())}).height(b));return this},activate:function(a){this.options.active=a;var b=this._findActive(a)[0];return this._clickHandler({target:b},b),this},_findActive:function(b){return b?"number"==typeof b?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):!1===b?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(b,c){var d=this.options;if(!d.disabled){if(!b.target){if(!d.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),this.active.next().addClass("ui-accordion-content-active");var e=this.active.next(),f={options:d,newHeader:a([]),oldHeader:d.active,newContent:a([]),oldContent:e},g=this.active=a([]);return void this._toggle(g,e,f)}var h=a(b.currentTarget||c),i=h[0]===this.active[0];if(d.active=(!d.collapsible||!i)&&this.headers.index(h),!(this.running||!d.collapsible&&i)){var j=this.active,g=h.next(),e=this.active.next(),f={options:d,newHeader:i&&d.collapsible?a([]):h,oldHeader:this.active,newContent:i&&d.collapsible?a([]):g,oldContent:e},k=this.headers.index(this.active[0])>this.headers.index(h[0]);this.active=i?a([]):h,this._toggle(g,e,f,i,k),j.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),i||(h.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(d.icons.header).addClass(d.icons.headerSelected),h.next().addClass("ui-accordion-content-active"))}}},_toggle:function(b,c,d,e,f){var g=this,h=g.options;g.toShow=b,g.toHide=c,g.data=d;var i=function(){if(g)return g._completed.apply(g,arguments)};if(g._trigger("changestart",null,g.data),g.running=0===c.size()?b.size():c.size(),h.animated){var j={};j=h.collapsible&&e?{toShow:a([]),toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace}:{toShow:b,toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace},h.proxied||(h.proxied=h.animated),h.proxiedDuration||(h.proxiedDuration=h.duration),h.animated=a.isFunction(h.proxied)?h.proxied(j):h.proxied,h.duration=a.isFunction(h.proxiedDuration)?h.proxiedDuration(j):h.proxiedDuration;var k=a.ui.accordion.animations,l=h.duration,m=h.animated;m&&!k[m]&&!a.easing[m]&&(m="slide"),k[m]||(k[m]=function(a){this.slide(a,{easing:m,duration:l||700})}),k[m](j)}else h.collapsible&&e?b.toggle():(c.hide(),b.show()),i(!0);c.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),b.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(a){this.running=a?0:--this.running,this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))}}),a.extend(a.ui.accordion,{version:"1.8.24",animations:{slide:function(b,c){if(b=a.extend({easing:"swing",duration:300},b,c),!b.toHide.size())return void b.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},b);if(!b.toShow.size())return void b.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},b);var d,e=b.toShow.css("overflow"),f=0,g={},h={},i=["height","paddingTop","paddingBottom"],j=b.toShow;d=j[0].style.width,j.width(j.parent().width()-parseFloat(j.css("paddingLeft"))-parseFloat(j.css("paddingRight"))-(parseFloat(j.css("borderLeftWidth"))||0)-(parseFloat(j.css("borderRightWidth"))||0)),a.each(i,function(c,d){h[d]="hide";var e=(""+a.css(b.toShow[0],d)).match(/^([\d+-.]+)(.*)$/);g[d]={value:e[1],unit:e[2]||"px"}}),b.toShow.css({height:0,overflow:"hidden"}).show(),b.toHide.filter(":hidden").each(b.complete).end().filter(":visible").animate(h,{step:function(a,c){"height"==c.prop&&(f=c.end-c.start==0?0:(c.now-c.start)/(c.end-c.start)),b.toShow[0].style[c.prop]=f*g[c.prop].value+g[c.prop].unit},duration:b.duration,easing:b.easing,complete:function(){b.autoHeight||b.toShow.css("height",""),b.toShow.css({width:d,overflow:e}),b.complete()}})},bounceslide:function(a){this.slide(a,{easing:a.down?"easeOutBounce":"swing",duration:a.down?1e3:200})}}})}(jQuery),function(a,b){var c=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var b,c=this,d=this.element[0].ownerDocument;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(d){if(!c.options.disabled&&!c.element.propAttr("readOnly")){b=!1;var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:c._move("previousPage",d);break;case e.PAGE_DOWN:c._move("nextPage",d);break;case e.UP:c._keyEvent("previous",d);break;case e.DOWN:c._keyEvent("next",d);break;case e.ENTER:case e.NUMPAD_ENTER:c.menu.active&&(b=!0,d.preventDefault());case e.TAB:if(!c.menu.active)return;c.menu.select(d);break;case e.ESCAPE:c.element.val(c.term),c.close(d);break;default:clearTimeout(c.searching),c.searching=setTimeout(function(){c.term!=c.element.val()&&(c.selectedItem=null,c.search(null,d))},c.options.delay)}}}).bind("keypress.autocomplete",function(a){b&&(b=!1,a.preventDefault())}).bind("focus.autocomplete",function(){c.options.disabled||(c.selectedItem=null,c.previous=c.element.val())}).bind("blur.autocomplete",function(a){c.options.disabled||(clearTimeout(c.searching),c.closing=setTimeout(function(){c.close(a),c._change(a)},150))}),this._initSource(),this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",d)[0]).mousedown(function(b){var d=c.menu.element[0];a(b.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(b){b.target!==c.element[0]&&b.target!==d&&!a.ui.contains(d,b.target)&&c.close()})},1),setTimeout(function(){clearTimeout(c.closing)},13)}).menu({focus:function(a,b){var d=b.item.data("item.autocomplete");!1!==c._trigger("focus",a,{item:d})&&/^key/.test(a.originalEvent.type)&&c.element.val(d.value)},selected:function(a,b){var e=b.item.data("item.autocomplete"),f=c.previous;c.element[0]!==d.activeElement&&(c.element.focus(),c.previous=f,setTimeout(function(){c.previous=f,c.selectedItem=e},1)),!1!==c._trigger("select",a,{item:e})&&c.element.val(e.value),c.term=c.element.val(),c.close(a),c.selectedItem=e},blur:function(a,b){c.menu.element.is(":visible")&&c.element.val()!==c.term&&c.element.val(c.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),a.fn.bgiframe&&this.menu.element.bgiframe(),c.beforeunloadHandler=function(){c.element.removeAttr("autocomplete")},a(window).bind("beforeunload",c.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),a(window).unbind("beforeunload",this.beforeunloadHandler),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),"source"===b&&this._initSource(),"appendTo"===b&&this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0]),"disabled"===b&&c&&this.xhr&&this.xhr.abort()},_initSource:function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,d){d(a.ui.autocomplete.filter(b,c.term))}):"string"==typeof this.options.source?(c=this.options.source,this.source=function(b,e){d.xhr&&d.xhr.abort(),d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a,b){e(a)},error:function(){e([])}})}):this.source=this.options.source},search:function(a,b){return a=null!=a?a:this.element.val(),this.term=this.element.val(),a.length<this.options.minLength?this.close(b):(clearTimeout(this.closing),!1!==this._trigger("search",b)?this._search(a):void 0)},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:a},this._response())},_response:function(){var a=this,b=++c;return function(d){b===c&&a.__response(d),--a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){!this.options.disabled&&a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close()},close:function(a){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b),this.menu.deactivate(),this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItem(b,c)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(b)},_move:function(a,b){return this.menu.element.is(":visible")?this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)?(this.element.val(this.term),void this.menu.deactivate()):void this.menu[a](b):void this.search(null,b)},widget:function(){return this.menu.element},_keyEvent:function(a,b){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(a,b),b.preventDefault())}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}})}(jQuery),function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){a(c.target).closest(".ui-menu-item a").length&&(c.preventDefault(),b.select(c))}),this.refresh()},refresh:function(){var b=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(a,b){if(this.deactivate(),this.hasScroll()){var c=b.offset().top-this.element.offset().top,d=this.element.scrollTop(),e=this.element.height();c<0?this.element.scrollTop(d+c):c>=e&&this.element.scrollTop(d+c-e+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",a,{item:b})},deactivate:function(){this.active&&(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,c){if(!this.active)return void this.activate(c,this.element.children(b));var d=this.active[a+"All"](".ui-menu-item").eq(0);d.length?this.activate(c,d):this.activate(c,this.element.children(b))},nextPage:function(b){if(this.hasScroll()){if(!this.active||this.last())return void this.activate(b,this.element.children(".ui-menu-item:first"));var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c-d+a(this).height();return b<10&&b>-10});e.length||(e=this.element.children(".ui-menu-item:last")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(b){if(this.hasScroll()){if(!this.active||this.first())return void this.activate(b,this.element.children(".ui-menu-item:last"));var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c+d-a(this).height();return b<10&&b>-10});e.length||(e=this.element.children(".ui-menu-item:first")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})}(jQuery),function(a,b){var c,d,e,f,g="ui-button ui-widget ui-state-default ui-corner-all",h="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",i=function(){var b=a(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},j=function(b){var c=b.name,d=b.form,e=a([]);return c&&(e=d?a(d).find("[name='"+c+"']"):a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",i),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var b=this,h=this.options,k="checkbox"===this.type||"radio"===this.type,l="ui-state-hover"+(k?"":" ui-state-active"),m="ui-state-focus";null===h.label&&(h.label=this.buttonElement.html()),this.buttonElement.addClass(g).attr("role","button").bind("mouseenter.button",function(){h.disabled||(a(this).addClass("ui-state-hover"),this===c&&a(this).addClass("ui-state-active"))}).bind("mouseleave.button",function(){h.disabled||a(this).removeClass(l)}).bind("click.button",function(a){h.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this.element.bind("focus.button",function(){b.buttonElement.addClass(m)}).bind("blur.button",function(){b.buttonElement.removeClass(m)}),k&&(this.element.bind("change.button",function(){f||b.refresh()}),this.buttonElement.bind("mousedown.button",function(a){h.disabled||(f=!1,d=a.pageX,e=a.pageY)}).bind("mouseup.button",function(a){h.disabled||d===a.pageX&&e===a.pageY||(f=!0)})),"checkbox"===this.type?this.buttonElement.bind("click.button",function(){if(h.disabled||f)return!1;a(this).toggleClass("ui-state-active"),b.buttonElement.attr("aria-pressed",b.element[0].checked)}):"radio"===this.type?this.buttonElement.bind("click.button",function(){if(h.disabled||f)return!1;a(this).addClass("ui-state-active"),b.buttonElement.attr("aria-pressed","true");var c=b.element[0];j(c).not(c).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(h.disabled)return!1;a(this).addClass("ui-state-active"),c=this,a(document).one("mouseup",function(){c=null})}).bind("mouseup.button",function(){if(h.disabled)return!1;a(this).removeClass("ui-state-active")}).bind("keydown.button",function(b){if(h.disabled)return!1;(b.keyCode==a.ui.keyCode.SPACE||b.keyCode==a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active")}).bind("keyup.button",function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",h.disabled),this._resetButton()},_determineButtonType:function(){if(this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type){var a=this.element.parents().filter(":last"),b="label[for='"+this.element.attr("id")+"']";this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible");var c=this.element.is(":checked");c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",c)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(g+" ui-state-hover ui-state-active  "+h).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){if(a.Widget.prototype._setOption.apply(this,arguments),"disabled"===b)return void(c?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1));this._resetButton()},refresh:function(){var b=this.element.is(":disabled");b!==this.options.disabled&&this._setOption("disabled",b),"radio"===this.type?j(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var b=this.buttonElement.removeClass(h),c=a("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",c))):f.push("ui-button-text-only"),b.addClass(f.join(" "))}}),a.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(b,c){"disabled"===b&&this.buttons.button("option",b,c),a.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var b="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),a.Widget.prototype.destroy.call(this)}})}(jQuery),function(a,b){var c="ui-dialog ui-widget ui-widget-content ui-corner-all ",d={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},e={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};a.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(b){var c=a(this).css(b).offset().top;c<0&&a(this).css("top",b.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var b=this,d=b.options,e=d.title||"&#160;",f=a.ui.dialog.getTitleId(b.element),g=(b.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass(c+d.dialogClass).css({zIndex:d.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(c){d.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}).attr({role:"dialog","aria-labelledby":f}).mousedown(function(a){b.moveToTop(!1,a)}),h=(b.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g),(b.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(g)),i=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){i.addClass("ui-state-hover")},function(){i.removeClass("ui-state-hover")}).focus(function(){i.addClass("ui-state-focus")}).blur(function(){i.removeClass("ui-state-focus")}).click(function(a){return b.close(a),!1}).appendTo(h);(b.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(d.closeText).appendTo(i),a("<span></span>").addClass("ui-dialog-title").attr("id",f).html(e).prependTo(h);a.isFunction(d.beforeclose)&&!a.isFunction(d.beforeClose)&&(d.beforeClose=d.beforeclose),h.find("*").add(h).disableSelection(),d.draggable&&a.fn.draggable&&b._makeDraggable(),d.resizable&&a.fn.resizable&&b._makeResizable(),b._createButtons(d.buttons),b._isOpen=!1,a.fn.bgiframe&&g.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var a=this;return a.overlay&&a.overlay.destroy(),a.uiDialog.hide(),a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),a.uiDialog.remove(),a.originalTitle&&a.element.attr("title",a.originalTitle),a},widget:function(){return this.uiDialog},close:function(b){var c,d,e=this;if(!1!==e._trigger("beforeClose",b))return e.overlay&&e.overlay.destroy(),e.uiDialog.unbind("keypress.ui-dialog"),e._isOpen=!1,e.options.hide?e.uiDialog.hide(e.options.hide,function(){e._trigger("close",b)}):(e.uiDialog.hide(),e._trigger("close",b)),a.ui.dialog.overlay.resize(),e.options.modal&&(c=0,a(".ui-dialog").each(function(){this!==e.uiDialog[0]&&(d=a(this).css("z-index"),isNaN(d)||(c=Math.max(c,d)))}),a.ui.dialog.maxZ=c),e},isOpen:function(){return this._isOpen},moveToTop:function(b,c){var d,e=this,f=e.options;return f.modal&&!b||!f.stack&&!f.modal?e._trigger("focus",c):(f.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=f.zIndex),e.overlay&&(a.ui.dialog.maxZ+=1,e.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)),d={scrollTop:e.element.scrollTop(),scrollLeft:e.element.scrollLeft()},a.ui.dialog.maxZ+=1,e.uiDialog.css("z-index",a.ui.dialog.maxZ),e.element.attr(d),e._trigger("focus",c),e)},open:function(){if(!this._isOpen){var b=this,c=b.options,d=b.uiDialog;return b.overlay=c.modal?new a.ui.dialog.overlay(b):null,b._size(),b._position(c.position),d.show(c.show),b.moveToTop(!0),c.modal&&d.bind("keydown.ui-dialog",function(b){if(b.keyCode===a.ui.keyCode.TAB){var c=a(":tabbable",this),d=c.filter(":first"),e=c.filter(":last");return b.target!==e[0]||b.shiftKey?b.target===d[0]&&b.shiftKey?(e.focus(1),!1):void 0:(d.focus(1),!1)}}),a(b.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus(),b._isOpen=!0,b._trigger("open"),b}},_createButtons:function(b){var c=this,d=!1,e=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),f=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);c.uiDialog.find(".ui-dialog-buttonpane").remove(),"object"==typeof b&&null!==b&&a.each(b,function(){return!(d=!0)}),d&&(a.each(b,function(b,d){d=a.isFunction(d)?{click:d,text:b}:d;var e=a('<button type="button"></button>').click(function(){d.click.apply(c.element[0],arguments)}).appendTo(f);a.each(d,function(a,b){"click"!==a&&(a in e?e[a](b):e.attr(a,b))}),a.fn.button&&e.button()}),e.appendTo(c.uiDialog))},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var c,d=this,e=d.options,f=a(document);d.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(f,g){c="auto"===e.height?"auto":a(this).height(),a(this).height(a(this).height()).addClass("ui-dialog-dragging"),d._trigger("dragStart",f,b(g))},drag:function(a,c){d._trigger("drag",a,b(c))},stop:function(g,h){e.position=[h.position.left-f.scrollLeft(),h.position.top-f.scrollTop()],a(this).removeClass("ui-dialog-dragging").height(c),d._trigger("dragStop",g,b(h)),a.ui.dialog.overlay.resize()}})},_makeResizable:function(c){function d(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}c=c===b?this.options.resizable:c;var e=this,f=e.options,g=e.uiDialog.css("position"),h="string"==typeof c?c:"n,e,s,w,se,sw,ne,nw";e.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:e.element,maxWidth:f.maxWidth,maxHeight:f.maxHeight,minWidth:f.minWidth,minHeight:e._minHeight(),handles:h,start:function(b,c){a(this).addClass("ui-dialog-resizing"),e._trigger("resizeStart",b,d(c))},resize:function(a,b){e._trigger("resize",a,d(b))},stop:function(b,c){a(this).removeClass("ui-dialog-resizing"),f.height=a(this).height(),f.width=a(this).width(),e._trigger("resizeStop",b,d(c)),a.ui.dialog.overlay.resize()}}).css("position",g).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var c,d=[],e=[0,0];b?(("string"==typeof b||"object"==typeof b&&"0"in b)&&(d=b.split?b.split(" "):[b[0],b[1]],1===d.length&&(d[1]=d[0]),a.each(["left","top"],function(a,b){+d[a]===d[a]&&(e[a]=d[a],d[a]=b)}),b={my:d.join(" "),at:d.join(" "),offset:e.join(" ")}),b=a.extend({},a.ui.dialog.prototype.options.position,b)):b=a.ui.dialog.prototype.options.position,c=this.uiDialog.is(":visible"),c||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},b)),c||this.uiDialog.hide()},_setOptions:function(b){var c=this,f={},g=!1;a.each(b,function(a,b){c._setOption(a,b),a in d&&(g=!0),a in e&&(f[a]=b)}),g&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",f)},_setOption:function(b,d){var e=this,f=e.uiDialog;switch(b){case"beforeclose":b="beforeClose";break;case"buttons":e._createButtons(d);break;case"closeText":e.uiDialogTitlebarCloseText.text(""+d);break;case"dialogClass":f.removeClass(e.options.dialogClass).addClass(c+d);break;case"disabled":d?f.addClass("ui-dialog-disabled"):f.removeClass("ui-dialog-disabled");break;case"draggable":var g=f.is(":data(draggable)");g&&!d&&f.draggable("destroy"),!g&&d&&e._makeDraggable();break;case"position":e._position(d);break;case"resizable":var h=f.is(":data(resizable)");h&&!d&&f.resizable("destroy"),h&&"string"==typeof d&&f.resizable("option","handles",d),!h&&!1!==d&&e._makeResizable(d);break;case"title":a(".ui-dialog-title",e.uiDialogTitlebar).html(""+(d||"&#160;"))}a.Widget.prototype._setOption.apply(e,arguments)},_size:function(){var b,c,d=this.options,e=this.uiDialog.is(":visible");if(this.element.show().css({width:"auto",minHeight:0,height:0}),d.minWidth>d.width&&(d.width=d.minWidth),b=this.uiDialog.css({height:"auto",width:d.width}).height(),c=Math.max(0,d.minHeight-b),"auto"===d.height)if(a.support.minHeight)this.element.css({minHeight:c,height:"auto"});else{this.uiDialog.show();var f=this.element.css("height","auto").height();e||this.uiDialog.hide(),this.element.height(Math.max(f,c))}else this.element.height(Math.max(d.height-b,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),a.extend(a.ui.dialog,{version:"1.8.24",uuid:0,maxZ:0,getTitleId:function(a){var b=a.attr("id");return b||(this.uuid+=1,b=this.uuid),"ui-dialog-title-"+b},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}}),a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){0===this.instances.length&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){if(a(b.target).zIndex()<a.ui.dialog.overlay.maxZ)return!1})},1),a(document).bind("keydown.dialog-overlay",function(c){b.options.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var c=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return a.fn.bgiframe&&c.bgiframe(),this.instances.push(c),c},destroy:function(b){var c=a.inArray(b,this.instances);-1!=c&&this.oldInstances.push(this.instances.splice(c,1)[0]),0===this.instances.length&&a([document,window]).unbind(".dialog-overlay"),b.remove();var d=0;a.each(this.instances,function(){d=Math.max(d,this.css("z-index"))}),this.maxZ=d},height:function(){var b,c;return a.browser.msie&&a.browser.version<7?(b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),b<c?a(window).height()+"px":b+"px"):a(document).height()+"px"},width:function(){var b,c;return a.browser.msie?(b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),b<c?a(window).width()+"px":b+"px"):a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)}),b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}}),a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(a,b){var c=5;a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var b=this,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",g=d.values&&d.values.length||1,h=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(d.disabled?" ui-slider-disabled ui-disabled":"")),this.range=a([]),d.range&&(!0===d.range&&(d.values||(d.values=[this._valueMin(),this._valueMin()]),d.values.length&&2!==d.values.length&&(d.values=[d.values[0],d.values[0]])),
this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===d.range||"max"===d.range?" ui-slider-range-"+d.range:"")));for(var i=e.length;i<g;i+=1)h.push(f);this.handles=e.add(a(h.join("")).appendTo(b.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){d.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){d.disabled?a(this).blur():(a(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),a(this).addClass("ui-state-focus"))}).blur(function(){a(this).removeClass("ui-state-focus")}),this.handles.each(function(b){a(this).data("index.ui-slider-handle",b)}),this.handles.keydown(function(d){var e,f,g,h,i=a(this).data("index.ui-slider-handle");if(!b.options.disabled){switch(d.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(d.preventDefault(),!b._keySliding&&(b._keySliding=!0,a(this).addClass("ui-state-active"),e=b._start(d,i),!1===e))return}switch(h=b.options.step,f=g=b.options.values&&b.options.values.length?b.values(i):b.value(),d.keyCode){case a.ui.keyCode.HOME:g=b._valueMin();break;case a.ui.keyCode.END:g=b._valueMax();break;case a.ui.keyCode.PAGE_UP:g=b._trimAlignValue(f+(b._valueMax()-b._valueMin())/c);break;case a.ui.keyCode.PAGE_DOWN:g=b._trimAlignValue(f-(b._valueMax()-b._valueMin())/c);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(f===b._valueMax())return;g=b._trimAlignValue(f+h);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(f===b._valueMin())return;g=b._trimAlignValue(f-h)}b._slide(d,i,g)}}).keyup(function(c){var d=a(this).data("index.ui-slider-handle");b._keySliding&&(b._keySliding=!1,b._stop(c,d),b._change(c,d),a(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(b){var c,d,e,f,g,h,i,j,k=this.options;return!k.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:b.pageX,y:b.pageY},d=this._normValueFromMouse(c),e=this._valueMax()-this._valueMin()+1,g=this,this.handles.each(function(b){var c=Math.abs(d-g.values(b));e>c&&(e=c,f=a(this),h=b)}),!0===k.range&&this.values(1)===k.min&&(h+=1,f=a(this.handles[h])),!1!==this._start(b,h)&&(this._mouseSliding=!0,g._handleIndex=h,f.addClass("ui-state-active").focus(),i=f.offset(),j=!a(b.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=j?{left:0,top:0}:{left:b.pageX-i.left-f.width()/2,top:b.pageY-i.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,h,d),this._animateOff=!0,!0))},_mouseStart:function(a){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),d<0&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&!0===this.options.range&&(0===b&&c>d||1===b&&c<d)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),!1!==f&&this.values(b,c,!0))):c!==this.value()&&!1!==(f=this._trigger("slide",a,{handle:this.handles[b],value:c}))&&this.value(c)},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("change",a,c)}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),this._change(null,b),void 0;if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;switch(a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments),b){case"disabled":c?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=0;d<e;d+=1)this._change(null,d);this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);for(c=this.options.values.slice(),d=0;d<c.length;d+=1)c[d]=this._trimAlignValue(c[d]);return c},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c)>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=!this._animateOff&&h.animate,k={};this.options.values&&this.options.values.length?this.handles.each(function(d,e){b=(i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin())*100,k["horizontal"===i.orientation?"left":"bottom"]=b+"%",a(this).stop(1,1)[j?"animate":"css"](k,h.animate),!0===i.options.range&&("horizontal"===i.orientation?(0===d&&i.range.stop(1,1)[j?"animate":"css"]({left:b+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({width:b-c+"%"},{queue:!1,duration:h.animate})):(0===d&&i.range.stop(1,1)[j?"animate":"css"]({bottom:b+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({height:b-c+"%"},{queue:!1,duration:h.animate}))),c=b}):(d=this.value(),e=this._valueMin(),f=this._valueMax(),b=f!==e?(d-e)/(f-e)*100:0,k["horizontal"===i.orientation?"left":"bottom"]=b+"%",this.handle.stop(1,1)[j?"animate":"css"](k,h.animate),"min"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:b+"%"},h.animate),"max"===g&&"horizontal"===this.orientation&&this.range[j?"animate":"css"]({width:100-b+"%"},{queue:!1,duration:h.animate}),"min"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:b+"%"},h.animate),"max"===g&&"vertical"===this.orientation&&this.range[j?"animate":"css"]({height:100-b+"%"},{queue:!1,duration:h.animate}))}}),a.extend(a.ui.slider,{version:"1.8.24"})}(jQuery),function(a,b){function c(){return++e}function d(){return++f}var e=0,f=0;a.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(a,b){if("selected"==a){if(this.options.collapsible&&b==this.options.selected)return;this.select(b)}else this.options[a]=b,this._tabify()},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+c()},_sanitizeSelector:function(a){return a.replace(/:/g,"\\:")},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+d());return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_ui:function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var b=a(this);b.html(b.data("label.tabs")).removeData("label.tabs")})},_tabify:function(c){function d(b,c){b.css("display",""),!a.support.opacity&&c.opacity&&b[0].style.removeAttribute("filter")}var e=this,f=this.options,g=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=a(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return a("a",this)[0]}),this.panels=a([]),this.anchors.each(function(b,c){var d,h=a(c).attr("href"),i=h.split("#")[0];if(i&&(i===location.toString().split("#")[0]||(d=a("base")[0])&&i===d.href)&&(h=c.hash,c.href=h),g.test(h))e.panels=e.panels.add(e.element.find(e._sanitizeSelector(h)));else if(h&&"#"!==h){a.data(c,"href.tabs",h),a.data(c,"load.tabs",h.replace(/#.*$/,""));var j=e._tabId(c);c.href="#"+j;var k=e.element.find("#"+j);k.length||(k=a(f.panelTemplate).attr("id",j).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(e.panels[b-1]||e.list),k.data("destroy.tabs",!0)),e.panels=e.panels.add(k)}else f.disabled.push(b)}),c?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),f.selected===b?(location.hash&&this.anchors.each(function(a,b){if(b.hash==location.hash)return f.selected=a,!1}),"number"!=typeof f.selected&&f.cookie&&(f.selected=parseInt(e._cookie(),10)),"number"!=typeof f.selected&&this.lis.filter(".ui-tabs-selected").length&&(f.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),f.selected=f.selected||(this.lis.length?0:-1)):null===f.selected&&(f.selected=-1),f.selected=f.selected>=0&&this.anchors[f.selected]||f.selected<0?f.selected:0,f.disabled=a.unique(f.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(a,b){return e.lis.index(a)}))).sort(),-1!=a.inArray(f.selected,f.disabled)&&f.disabled.splice(a.inArray(f.selected,f.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),f.selected>=0&&this.anchors.length&&(e.element.find(e._sanitizeSelector(e.anchors[f.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(f.selected).addClass("ui-tabs-selected ui-state-active"),e.element.queue("tabs",function(){e._trigger("show",null,e._ui(e.anchors[f.selected],e.element.find(e._sanitizeSelector(e.anchors[f.selected].hash))[0]))}),this.load(f.selected)),a(window).bind("unload",function(){e.lis.add(e.anchors).unbind(".tabs"),e.lis=e.anchors=e.panels=null})):f.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[f.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),f.cookie&&this._cookie(f.selected,f.cookie);for(var h,i=0;h=this.lis[i];i++)a(h)[-1==a.inArray(i,f.disabled)||a(h).hasClass("ui-tabs-selected")?"removeClass":"addClass"]("ui-state-disabled");if(!1===f.cache&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),"mouseover"!==f.event){var j=function(a,b){b.is(":not(.ui-state-disabled)")&&b.addClass("ui-state-"+a)},k=function(a,b){b.removeClass("ui-state-"+a)};this.lis.bind("mouseover.tabs",function(){j("hover",a(this))}),this.lis.bind("mouseout.tabs",function(){k("hover",a(this))}),this.anchors.bind("focus.tabs",function(){j("focus",a(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){k("focus",a(this).closest("li"))})}var l,m;f.fx&&(a.isArray(f.fx)?(l=f.fx[0],m=f.fx[1]):l=m=f.fx);var n=m?function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.hide().removeClass("ui-tabs-hide").animate(m,m.duration||"normal",function(){d(c,m),e._trigger("show",null,e._ui(b,c[0]))})}:function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.removeClass("ui-tabs-hide"),e._trigger("show",null,e._ui(b,c[0]))},o=l?function(a,b){b.animate(l,l.duration||"normal",function(){e.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),d(b,l),e.element.dequeue("tabs")})}:function(a,b,c){e.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),e.element.dequeue("tabs")};this.anchors.bind(f.event+".tabs",function(){var b=this,c=a(b).closest("li"),d=e.panels.filter(":not(.ui-tabs-hide)"),g=e.element.find(e._sanitizeSelector(b.hash));if(c.hasClass("ui-tabs-selected")&&!f.collapsible||c.hasClass("ui-state-disabled")||c.hasClass("ui-state-processing")||e.panels.filter(":animated").length||!1===e._trigger("select",null,e._ui(this,g[0])))return this.blur(),!1;if(f.selected=e.anchors.index(this),e.abort(),f.collapsible){if(c.hasClass("ui-tabs-selected"))return f.selected=-1,f.cookie&&e._cookie(f.selected,f.cookie),e.element.queue("tabs",function(){o(b,d)}).dequeue("tabs"),this.blur(),!1;if(!d.length)return f.cookie&&e._cookie(f.selected,f.cookie),e.element.queue("tabs",function(){n(b,g)}),e.load(e.anchors.index(this)),this.blur(),!1}if(f.cookie&&e._cookie(f.selected,f.cookie),!g.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";d.length&&e.element.queue("tabs",function(){o(b,d)}),e.element.queue("tabs",function(){n(b,g)}),e.load(e.anchors.index(this)),a.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},destroy:function(){var b=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var b=a.data(this,"href.tabs");b&&(this.href=b);var c=a(this).unbind(".tabs");a.each(["href","load","cache"],function(a,b){c.removeData(b+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){a.data(this,"destroy.tabs")?a(this).remove():a(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),b.cookie&&this._cookie(null,b.cookie),this},add:function(c,d,e){e===b&&(e=this.anchors.length);var f=this,g=this.options,h=a(g.tabTemplate.replace(/#\{href\}/g,c).replace(/#\{label\}/g,d)),i=c.indexOf("#")?this._tabId(a("a",h)[0]):c.replace("#","");h.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var j=f.element.find("#"+i);return j.length||(j=a(g.panelTemplate).attr("id",i).data("destroy.tabs",!0)),j.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),e>=this.lis.length?(h.appendTo(this.list),j.appendTo(this.list[0].parentNode)):(h.insertBefore(this.lis[e]),j.insertBefore(this.panels[e])),g.disabled=a.map(g.disabled,function(a,b){return a>=e?++a:a}),this._tabify(),1==this.anchors.length&&(g.selected=0,h.addClass("ui-tabs-selected ui-state-active"),j.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){f._trigger("show",null,f._ui(f.anchors[0],f.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[e],this.panels[e])),this},remove:function(b){b=this._getIndex(b);var c=this.options,d=this.lis.eq(b).remove(),e=this.panels.eq(b).remove();return d.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(b+(b+1<this.anchors.length?1:-1)),c.disabled=a.map(a.grep(c.disabled,function(a,c){return a!=b}),function(a,c){return a>=b?--a:a}),this._tabify(),this._trigger("remove",null,this._ui(d.find("a")[0],e[0])),this},enable:function(b){b=this._getIndex(b);var c=this.options;if(-1!=a.inArray(b,c.disabled))return this.lis.eq(b).removeClass("ui-state-disabled"),c.disabled=a.grep(c.disabled,function(a,c){return a!=b}),this._trigger("enable",null,this._ui(this.anchors[b],this.panels[b])),this},disable:function(a){a=this._getIndex(a);var b=this.options;return a!=b.selected&&(this.lis.eq(a).addClass("ui-state-disabled"),b.disabled.push(a),b.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[a],this.panels[a]))),this},select:function(a){if(-1==(a=this._getIndex(a))){if(!this.options.collapsible||-1==this.options.selected)return this;a=this.options.selected}return this.anchors.eq(a).trigger(this.options.event+".tabs"),this},load:function(b){b=this._getIndex(b);var c=this,d=this.options,e=this.anchors.eq(b)[0],f=a.data(e,"load.tabs");if(this.abort(),!f||0!==this.element.queue("tabs").length&&a.data(e,"cache.tabs"))return void this.element.dequeue("tabs");if(this.lis.eq(b).addClass("ui-state-processing"),d.spinner){var g=a("span",e);g.data("label.tabs",g.html()).html(d.spinner)}return this.xhr=a.ajax(a.extend({},d.ajaxOptions,{url:f,success:function(f,g){c.element.find(c._sanitizeSelector(e.hash)).html(f),c._cleanup(),d.cache&&a.data(e,"cache.tabs",!0),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.success(f,g)}catch(a){}},error:function(a,f,g){c._cleanup(),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.error(a,f,b,e)}catch(g){}}})),c.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(a,b){return this.anchors.eq(a).removeData("cache.tabs").data("load.tabs",b),this},length:function(){return this.anchors.length}}),a.extend(a.ui.tabs,{version:"1.8.24"}),a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(a,b){var c=this,d=this.options,e=c._rotate||(c._rotate=function(b){clearTimeout(c.rotation),c.rotation=setTimeout(function(){var a=d.selected;c.select(++a<c.anchors.length?a:0)},a),b&&b.stopPropagation()}),f=c._unrotate||(c._unrotate=b?function(a){e()}:function(a){a.clientX&&c.rotate(null)});return a?(this.element.bind("tabsshow",e),this.anchors.bind(d.event+".tabs",f),e()):(clearTimeout(c.rotation),this.element.unbind("tabsshow",e),this.anchors.unbind(d.event+".tabs",f),delete this._rotate,delete this._unrotate),this}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(a){var b="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return a.bind("mouseout",function(a){var c=$(a.target).closest(b);c.length&&c.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(c){var d=$(c.target).closest(b);!$.datepicker._isDisabledDatepicker(instActive.inline?a.parent()[0]:instActive.input[0])&&d.length&&(d.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d.addClass("ui-state-hover"),d.hasClass("ui-datepicker-prev")&&d.addClass("ui-datepicker-prev-hover"),d.hasClass("ui-datepicker-next")&&d.addClass("ui-datepicker-next-hover"))})}function extendRemove(a,b){$.extend(a,b);for(var c in b)null!=b[c]&&b[c]!=undefined||(a[c]=b[c]);return a}function isArray(a){return a&&($.browser.safari&&"object"==typeof a&&a.length||a.constructor&&a.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.24"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(a){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(a,b){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(a,b){var c=$(a);b.append=$([]),b.trigger=$([]),c.hasClass(this.markerClassName)||(this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),$.data(a,PROP_NAME,b),b.settings.disabled&&this._disableDatepicker(a))},_attachments:function(a,b){var c=this._get(b,"appendText"),d=this._get(b,"isRTL");b.append&&b.append.remove(),c&&(b.append=$('<span class="'+this._appendClass+'">'+c+"</span>"),a[d?"before":"after"](b.append)),a.unbind("focus",this._showDatepicker),b.trigger&&b.trigger.remove();var e=this._get(b,"showOn");if(("focus"==e||"both"==e)&&a.focus(this._showDatepicker),"button"==e||"both"==e){var f=this._get(b,"buttonText"),g=this._get(b,"buttonImage");b.trigger=$(this._get(b,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:g,alt:f,title:f}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==g?f:$("<img/>").attr({src:g,alt:f,title:f}))),a[d?"before":"after"](b.trigger),b.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==a[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=a[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(a[0])):$.datepicker._showDatepicker(a[0]),!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){for(var b=0,c=0,d=0;d<a.length;d++)a[d].length>b&&(b=a[d].length,c=d);return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=$(a);c.hasClass(this.markerClassName)||(c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),$.data(a,PROP_NAME,b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),b.dpDiv.css("display","block"))},_dialogDatepicker:function(a,b,c,d,e){var f=this._dialogInst;if(!f){this.uuid+=1;var g="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+g+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},$.data(this._dialogInput[0],PROP_NAME,f)}if(extendRemove(f.settings,d||{}),b=b&&b.constructor==Date?this._formatDate(f,b):b,this._dialogInput.val(b),this._pos=e?e.length?e:[e.pageX,e.pageY]:null,!this._pos){var h=document.documentElement.clientWidth,i=document.documentElement.clientHeight,j=document.documentElement.scrollLeft||document.body.scrollLeft,k=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[h/2-100+j,i/2-150+k]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=c,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,f),this},_destroyDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();$.removeData(a,PROP_NAME),"input"==d?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==d||"span"==d)&&b.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if("input"==d)a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==d||"span"==d){var e=b.children("."+this._inlineClass);e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b})}},_disableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if("input"==d)a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==d||"span"==d){var e=b.children("."+this._inlineClass);e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b}),this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(a){try{return $.data(a,PROP_NAME)}catch(a){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var d=this._getInst(a);if(2==arguments.length&&"string"==typeof b)return"defaults"==b?$.extend({},$.datepicker._defaults):d?"all"==b?$.extend({},d.settings):this._get(d,b):null;var e=b||{};if("string"==typeof b&&(e={},e[b]=c),d){this._curInst==d&&this._hideDatepicker();var f=this._getDateDatepicker(a,!0),g=this._getMinMaxDate(d,"min"),h=this._getMinMaxDate(d,"max");extendRemove(d.settings,e),null!==g&&e.dateFormat!==undefined&&e.minDate===undefined&&(d.settings.minDate=this._formatDate(d,g)),null!==h&&e.dateFormat!==undefined&&e.maxDate===undefined&&(d.settings.maxDate=this._formatDate(d,h)),this._attachments($(a),d),this._autoSize(d),this._setDate(d,f),this._updateAlternate(d),this._updateDatepicker(d)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(a){var b=$.datepicker._getInst(a.target),c=!0,d=b.dpDiv.is(".ui-datepicker-rtl");if(b._keyEvent=!0,$.datepicker._datepickerShowing)switch(a.keyCode){case 9:$.datepicker._hideDatepicker(),c=!1;break;case 13:var e=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",b.dpDiv);e[0]&&$.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,e[0]);var f=$.datepicker._get(b,"onSelect");if(f){var g=$.datepicker._formatDate(b);f.apply(b.input?b.input[0]:null,[g,b])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&$.datepicker._clearDate(a.target),c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&$.datepicker._gotoToday(a.target),c=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?1:-1,"D"),c=a.ctrlKey||a.metaKey,
a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,-7,"D"),c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?-1:1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,7,"D"),c=a.ctrlKey||a.metaKey;break;default:c=!1}else 36==a.keyCode&&a.ctrlKey?$.datepicker._showDatepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=$.datepicker._getInst(a.target);if($.datepicker._get(b,"constrainInput")){var c=$.datepicker._possibleChars($.datepicker._get(b,"dateFormat")),d=String.fromCharCode(a.charCode==undefined?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||d<" "||!c||c.indexOf(d)>-1}},_doKeyUp:function(a){var b=$.datepicker._getInst(a.target);if(b.input.val()!=b.lastVal)try{$.datepicker.parseDate($.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,$.datepicker._getFormatConfig(b))&&($.datepicker._setDateFromField(b),$.datepicker._updateAlternate(b),$.datepicker._updateDatepicker(b))}catch(a){$.datepicker.log(a)}return!0},_showDatepicker:function(a){if(a=a.target||a,"input"!=a.nodeName.toLowerCase()&&(a=$("input",a.parentNode)[0]),!$.datepicker._isDisabledDatepicker(a)&&$.datepicker._lastInput!=a){var b=$.datepicker._getInst(a);$.datepicker._curInst&&$.datepicker._curInst!=b&&($.datepicker._curInst.dpDiv.stop(!0,!0),b&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var c=$.datepicker._get(b,"beforeShow"),d=c?c.apply(a,[a,b]):{};if(!1!==d){extendRemove(b.settings,d),b.lastVal=null,$.datepicker._lastInput=a,$.datepicker._setDateFromField(b),$.datepicker._inDialog&&(a.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(a),$.datepicker._pos[1]+=a.offsetHeight);var e=!1;$(a).parents().each(function(){return!(e|="fixed"==$(this).css("position"))}),e&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var f={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(b),f=$.datepicker._checkOffset(b,f,e),b.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":e?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"}),!b.inline){var g=$.datepicker._get(b,"showAnim"),h=$.datepicker._get(b,"duration"),i=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(a.length){var c=$.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex($(a).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[g]?b.dpDiv.show(g,$.datepicker._get(b,"showOptions"),h,i):b.dpDiv[g||"show"](g?h:null,i),(!g||!h)&&i(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),$.datepicker._curInst=b}}}},_updateDatepicker:function(a){this.maxRows=4;var b=$.datepicker._getBorders(a.dpDiv);instActive=a,a.dpDiv.empty().append(this._generateHTML(a)),this._attachHandlers(a);var c=a.dpDiv.find("iframe.ui-datepicker-cover");!c.length||c.css({left:-b[0],top:-b[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}),a.dpDiv.find("."+this._dayOverClass+" a").mouseover();var d=this._getNumberOfMonths(a),e=d[1];if(a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),e>1&&a.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",17*e+"em"),a.dpDiv[(1!=d[0]||1!=d[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a==$.datepicker._curInst&&$.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus(),a.yearshtml){var f=a.yearshtml;setTimeout(function(){f===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),f=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var d=a.dpDiv.outerWidth(),e=a.dpDiv.outerHeight(),f=a.input?a.input.outerWidth():0,g=a.input?a.input.outerHeight():0,h=document.documentElement.clientWidth+(c?0:$(document).scrollLeft()),i=document.documentElement.clientHeight+(c?0:$(document).scrollTop());return b.left-=this._get(a,"isRTL")?d-f:0,b.left-=c&&b.left==a.input.offset().left?$(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+g?$(document).scrollTop():0,b.left-=Math.min(b.left,b.left+d>h&&h>d?Math.abs(b.left+d-h):0),b.top-=Math.min(b.top,b.top+e>i&&i>e?Math.abs(e+g):0),b},_findPos:function(a){for(var b=this._getInst(a),c=this._get(b,"isRTL");a&&("hidden"==a.type||1!=a.nodeType||$.expr.filters.hidden(a));)a=a[c?"previousSibling":"nextSibling"];var d=$(a).offset();return[d.left,d.top]},_hideDatepicker:function(a){var b=this._curInst;if(b&&(!a||b==$.data(a,PROP_NAME))&&this._datepickerShowing){var c=this._get(b,"showAnim"),d=this._get(b,"duration"),e=function(){$.datepicker._tidyDialog(b)};$.effects&&$.effects[c]?b.dpDiv.hide(c,$.datepicker._get(b,"showOptions"),d,e):b.dpDiv["slideDown"==c?"slideUp":"fadeIn"==c?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1;var f=this._get(b,"onClose");f&&f.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if($.datepicker._curInst){var b=$(a.target),c=$.datepicker._getInst(b[0]);(b[0].id!=$.datepicker._mainDivId&&0==b.parents("#"+$.datepicker._mainDivId).length&&!b.hasClass($.datepicker.markerClassName)&&!b.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||b.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=c)&&$.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){var d=$(a),e=this._getInst(d[0]);this._isDisabledDatepicker(d[0])||(this._adjustInstDate(e,b+("M"==c?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e))},_gotoToday:function(a){var b=$(a),c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay)c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear;else{var d=new Date;c.selectedDay=d.getDate(),c.drawMonth=c.selectedMonth=d.getMonth(),c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c),this._adjustDate(b)},_selectMonthYear:function(a,b,c){var d=$(a),e=this._getInst(d[0]);e["selected"+("M"==c?"Month":"Year")]=e["draw"+("M"==c?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(d)},_selectDay:function(a,b,c,d){var e=$(a);if(!$(d).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(e[0])){var f=this._getInst(e[0]);f.selectedDay=f.currentDay=$("a",d).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))}},_clearDate:function(a){var b=$(a);this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(a,b){var c=$(a),d=this._getInst(c[0]);b=null!=b?b:this._formatDate(d),d.input&&d.input.val(b),this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[b,d]):d.input&&d.input.trigger("change"),d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],"object"!=typeof d.input[0]&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),d=this._getDate(a),e=this.formatDate(c,d,this._getFormatConfig(a));$(b).each(function(){$(this).val(e)})}},noWeekends:function(a){var b=a.getDay();return[b>0&&b<6,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1},parseDate:function(a,b,c){if(null==a||null==b)throw"Invalid arguments";if(""==(b="object"==typeof b?b.toString():b+""))return null;var d=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;d="string"!=typeof d?d:(new Date).getFullYear()%100+parseInt(d,10);for(var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=-1,j=-1,k=-1,l=-1,m=!1,n=function(b){var c=s+1<a.length&&a.charAt(s+1)==b;return c&&s++,c},o=function(a){var c=n(a),d="@"==a?14:"!"==a?20:"y"==a&&c?4:"o"==a?3:2,e=new RegExp("^\\d{1,"+d+"}"),f=b.substring(r).match(e);if(!f)throw"Missing number at position "+r;return r+=f[0].length,parseInt(f[0],10)},p=function(a,c,d){var e=$.map(n(a)?d:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)}),f=-1;if($.each(e,function(a,c){var d=c[1];if(b.substr(r,d.length).toLowerCase()==d.toLowerCase())return f=c[0],r+=d.length,!1}),-1!=f)return f+1;throw"Unknown name at position "+r},q=function(){if(b.charAt(r)!=a.charAt(s))throw"Unexpected literal at position "+r;r++},r=0,s=0;s<a.length;s++)if(m)"'"!=a.charAt(s)||n("'")?q():m=!1;else switch(a.charAt(s)){case"d":k=o("d");break;case"D":p("D",e,f);break;case"o":l=o("o");break;case"m":j=o("m");break;case"M":j=p("M",g,h);break;case"y":i=o("y");break;case"@":var t=new Date(o("@"));i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"!":var t=new Date((o("!")-this._ticksTo1970)/1e4);i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"'":n("'")?q():m=!0;break;default:q()}if(r<b.length)throw"Extra/unparsed characters found in date: "+b.substring(r);if(-1==i?i=(new Date).getFullYear():i<100&&(i+=(new Date).getFullYear()-(new Date).getFullYear()%100+(i<=d?0:-100)),l>-1)for(j=1,k=l;;){var u=this._getDaysInMonth(i,j-1);if(k<=u)break;j++,k-=u}var t=this._daylightSavingAdjust(new Date(i,j-1,k));if(t.getFullYear()!=i||t.getMonth()+1!=j||t.getDate()!=k)throw"Invalid date";return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(a,b,c){if(!b)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,h=function(b){var c=m+1<a.length&&a.charAt(m+1)==b;return c&&m++,c},i=function(a,b,c){var d=""+b;if(h(a))for(;d.length<c;)d="0"+d;return d},j=function(a,b,c,d){return h(a)?d[b]:c[b]},k="",l=!1;if(b)for(var m=0;m<a.length;m++)if(l)"'"!=a.charAt(m)||h("'")?k+=a.charAt(m):l=!1;else switch(a.charAt(m)){case"d":k+=i("d",b.getDate(),2);break;case"D":k+=j("D",b.getDay(),d,e);break;case"o":k+=i("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);break;case"m":k+=i("m",b.getMonth()+1,2);break;case"M":k+=j("M",b.getMonth(),f,g);break;case"y":k+=h("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":k+=b.getTime();break;case"!":k+=1e4*b.getTime()+this._ticksTo1970;break;case"'":h("'")?k+="'":l=!0;break;default:k+=a.charAt(m)}return k},_possibleChars:function(a){for(var b="",c=!1,d=function(b){var c=e+1<a.length&&a.charAt(e+1)==b;return c&&e++,c},e=0;e<a.length;e++)if(c)"'"!=a.charAt(e)||d("'")?b+=a.charAt(e):c=!1;else switch(a.charAt(e)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}return b},_get:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c,d,e=this._get(a,"dateFormat"),f=a.lastVal=a.input?a.input.val():null;c=d=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{c=this.parseDate(e,f,g)||d}catch(a){this.log(a),f=b?"":f}a.selectedDay=c.getDate(),a.drawMonth=a.selectedMonth=c.getMonth(),a.drawYear=a.selectedYear=c.getFullYear(),a.currentDay=f?c.getDate():0,a.currentMonth=f?c.getMonth():0,a.currentYear=f?c.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var d=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},e=function(b){try{return $.datepicker.parseDate($.datepicker._get(a,"dateFormat"),b,$.datepicker._getFormatConfig(a))}catch(a){}for(var c=(b.toLowerCase().match(/^c/)?$.datepicker._getDate(a):null)||new Date,d=c.getFullYear(),e=c.getMonth(),f=c.getDate(),g=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,h=g.exec(b);h;){switch(h[2]||"d"){case"d":case"D":f+=parseInt(h[1],10);break;case"w":case"W":f+=7*parseInt(h[1],10);break;case"m":case"M":e+=parseInt(h[1],10),f=Math.min(f,$.datepicker._getDaysInMonth(d,e));break;case"y":case"Y":d+=parseInt(h[1],10),f=Math.min(f,$.datepicker._getDaysInMonth(d,e))}h=g.exec(b)}return new Date(d,e,f)},f=null==b||""===b?c:"string"==typeof b?e(b):"number"==typeof b?isNaN(b)?c:d(b):new Date(b.getTime());return f=f&&"Invalid Date"==f.toString()?c:f,f&&(f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0)),this._daylightSavingAdjust(f)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),(e!=a.selectedMonth||f!=a.selectedYear)&&!c&&this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""==a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_attachHandlers:function(a){var b=this._get(a,"stepMonths"),c="#"+a.id.replace(/\\\\/g,"\\");a.dpDiv.find("[data-handler]").map(function(){var a={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(c,-b,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(c,+b,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(c)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(c,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(c,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(c,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),a[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),d=this._get(a,"showButtonPanel"),e=this._get(a,"hideIfNoPrevNext"),f=this._get(a,"navigationAsDateFormat"),g=this._getNumberOfMonths(a),h=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),j=1!=g[0]||1!=g[1],k=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),l=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),n=a.drawMonth-h,o=a.drawYear;if(n<0&&(n+=12,o--),m){var p=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-g[0]*g[1]+1,m.getDate()));for(p=l&&p<l?l:p;this._daylightSavingAdjust(new Date(o,n,1))>p;)--n<0&&(n=11,o--)}a.drawMonth=n,a.drawYear=o;var q=this._get(a,"prevText");q=f?this.formatDate(q,this._daylightSavingAdjust(new Date(o,n-i,1)),this._getFormatConfig(a)):q;var r=this._canAdjustMonth(a,-1,o,n)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>":e?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>",s=this._get(a,"nextText");s=f?this.formatDate(s,this._daylightSavingAdjust(new Date(o,n+i,1)),this._getFormatConfig(a)):s;var t=this._canAdjustMonth(a,1,o,n)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":e?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>",u=this._get(a,"currentText"),v=this._get(a,"gotoCurrent")&&a.currentDay?k:b;u=f?this.formatDate(u,v,this._getFormatConfig(a)):u;var w=a.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(a,"closeText")+"</button>",x=d?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?w:"")+(this._isInRange(a,v)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+u+"</button>":"")+(c?"":w)+"</div>":"",y=parseInt(this._get(a,"firstDay"),10);y=isNaN(y)?0:y;for(var z=this._get(a,"showWeek"),A=this._get(a,"dayNames"),B=(this._get(a,"dayNamesShort"),this._get(a,"dayNamesMin")),C=this._get(a,"monthNames"),D=this._get(a,"monthNamesShort"),E=this._get(a,"beforeShowDay"),F=this._get(a,"showOtherMonths"),G=this._get(a,"selectOtherMonths"),H=(this._get(a,"calculateWeek")||this.iso8601Week,this._getDefaultDate(a)),I="",J=0;J<g[0];J++){var K="";this.maxRows=4;for(var L=0;L<g[1];L++){var M=this._daylightSavingAdjust(new Date(o,n,a.selectedDay)),N=" ui-corner-all",O="";if(j){if(O+='<div class="ui-datepicker-group',g[1]>1)switch(L){case 0:O+=" ui-datepicker-group-first",N=" ui-corner-"+(c?"right":"left");break;case g[1]-1:O+=" ui-datepicker-group-last",N=" ui-corner-"+(c?"left":"right");break;default:O+=" ui-datepicker-group-middle",N=""}O+='">'}O+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+N+'">'+(/all|left/.test(N)&&0==J?c?t:r:"")+(/all|right/.test(N)&&0==J?c?r:t:"")+this._generateMonthYearHeader(a,n,o,l,m,J>0||L>0,C,D)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var P=z?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"",Q=0;Q<7;Q++){var R=(Q+y)%7;P+="<th"+((Q+y+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+A[R]+'">'+B[R]+"</span></th>"}O+=P+"</tr></thead><tbody>";var S=this._getDaysInMonth(o,n);o==a.selectedYear&&n==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,S));var T=(this._getFirstDayOfMonth(o,n)-y+7)%7,U=Math.ceil((T+S)/7),V=j&&this.maxRows>U?this.maxRows:U;this.maxRows=V;for(var W=this._daylightSavingAdjust(new Date(o,n,1-T)),X=0;X<V;X++){O+="<tr>";for(var Y=z?'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(W)+"</td>":"",Q=0;Q<7;Q++){var Z=E?E.apply(a.input?a.input[0]:null,[W]):[!0,""],_=W.getMonth()!=n,aa=_&&!G||!Z[0]||l&&W<l||m&&W>m;Y+='<td class="'+((Q+y+6)%7>=5?" ui-datepicker-week-end":"")+(_?" ui-datepicker-other-month":"")+(W.getTime()==M.getTime()&&n==a.selectedMonth&&a._keyEvent||H.getTime()==W.getTime()&&H.getTime()==M.getTime()?" "+this._dayOverClass:"")+(aa?" "+this._unselectableClass+" ui-state-disabled":"")+(_&&!F?"":" "+Z[1]+(W.getTime()==k.getTime()?" "+this._currentClass:"")+(W.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+(_&&!F||!Z[2]?"":' title="'+Z[2]+'"')+(aa?"":' data-handler="selectDay" data-event="click" data-month="'+W.getMonth()+'" data-year="'+W.getFullYear()+'"')+">"+(_&&!F?"&#xa0;":aa?'<span class="ui-state-default">'+W.getDate()+"</span>":'<a class="ui-state-default'+(W.getTime()==b.getTime()?" ui-state-highlight":"")+(W.getTime()==k.getTime()?" ui-state-active":"")+(_?" ui-priority-secondary":"")+'" href="#">'+W.getDate()+"</a>")+"</td>",W.setDate(W.getDate()+1),W=this._daylightSavingAdjust(W)}O+=Y+"</tr>"}n++,n>11&&(n=0,o++),O+="</tbody></table>"+(j?"</div>"+(g[0]>0&&L==g[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),K+=O}I+=K}return I+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),a._keyEvent=!1,I},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i=this._get(a,"changeMonth"),j=this._get(a,"changeYear"),k=this._get(a,"showMonthAfterYear"),l='<div class="ui-datepicker-title">',m="";if(f||!i)m+='<span class="ui-datepicker-month">'+g[b]+"</span>";else{var n=d&&d.getFullYear()==c,o=e&&e.getFullYear()==c;m+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var p=0;p<12;p++)(!n||p>=d.getMonth())&&(!o||p<=e.getMonth())&&(m+='<option value="'+p+'"'+(p==b?' selected="selected"':"")+">"+h[p]+"</option>");m+="</select>"}if(k||(l+=m+(!f&&i&&j?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!j)l+='<span class="ui-datepicker-year">'+c+"</span>";else{var q=this._get(a,"yearRange").split(":"),r=(new Date).getFullYear(),s=function(a){var b=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?r+parseInt(a,10):parseInt(a,10);return isNaN(b)?r:b},t=s(q[0]),u=Math.max(t,s(q[1]||""));for(t=d?Math.max(t,d.getFullYear()):t,u=e?Math.min(u,e.getFullYear()):u,a.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';t<=u;t++)a.yearshtml+='<option value="'+t+'"'+(t==c?' selected="selected"':"")+">"+t+"</option>";a.yearshtml+="</select>",l+=a.yearshtml,a.yearshtml=null}return l+=this._get(a,"yearSuffix"),k&&(l+=(!f&&i&&j?"":"&#xa0;")+m),l+="</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"==c?b:0),e=a.drawMonth+("M"==c?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"==c?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),("M"==c||"Y"==c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&b<c?c:b;return e=d&&e>d?d:e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(b<0?b:e[0]*e[1]),1));return b<0&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),$.fn.datepicker=function(a){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return"string"!=typeof a||"isDisabled"!=a&&"getDate"!=a&&"widget"!=a?"option"==a&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b)):this.each(function(){"string"==typeof a?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this].concat(b)):$.datepicker._attachDatepicker(this,a)}):$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.24",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(a,b){a.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),a.Widget.prototype.destroy.apply(this,arguments)},value:function(a){return a===b?this._value():(this._setOption("value",a),this)},_setOption:function(b,c){"value"===b&&(this.options.value=c,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),a.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;return"number"!=typeof a&&(a=0),Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change")),this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%"),this.element.attr("aria-valuenow",a)}}),a.extend(a.ui.progressbar,{version:"1.8.24"})}(jQuery),jQuery.effects||function(a,b){function c(b){var c;return b&&b.constructor==Array&&3==b.length?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3])]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:(c=/rgba\(0, 0, 0, 0\)/.exec(b))?j.transparent:j[a.trim(b).toLowerCase()]}function d(b,d){var e;do{if(""!=(e=(a.curCSS||a.css)(b,d))&&"transparent"!=e||a.nodeName(b,"body"))break;d="backgroundColor"}while(b=b.parentNode);return c(e)}function e(){var a,b,c=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,d={};if(c&&c.length&&c[0]&&c[c[0]])for(var e=c.length;e--;)a=c[e],"string"==typeof c[a]&&(b=a.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),d[b]=c[a]);else for(a in c)"string"==typeof c[a]&&(d[a]=c[a]);return d}function f(b){var c,d;for(c in b)(null==(d=b[c])||a.isFunction(d)||c in l||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d)))&&delete b[c];return b}function g(a,b){var c,d={_:0};for(c in b)a[c]!=b[c]&&(d[c]=b[c]);return d}function h(b,c,d,e){return"object"==typeof b&&(e=c,d=null,c=b,b=c.effect),a.isFunction(c)&&(e=c,d=null,c={}),("number"==typeof c||a.fx.speeds[c])&&(e=d,d=c,c={}),a.isFunction(d)&&(e=d,d=null),c=c||{},d=d||c.duration,d=a.fx.off?0:"number"==typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,e=e||c.complete,[b,c,d,e]}function i(b){return!(b&&"number"!=typeof b&&!a.fx.speeds[b])||"string"==typeof b&&!a.effects[b]}a.effects={},a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(b,e){a.fx.step[e]=function(a){a.colorInit||(a.start=d(a.elem,e),a.end=c(a.end),a.colorInit=!0),a.elem.style[e]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var j={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},k=["add","remove","toggle"],l={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,c,d,h){return a.isFunction(d)&&(h=d,d=null),this.queue(function(){var i,j=a(this),l=j.attr("style")||" ",m=f(e.call(this)),n=j.attr("class")||"";a.each(k,function(a,c){b[c]&&j[c+"Class"](b[c])}),i=f(e.call(this)),j.attr("class",n),j.animate(g(m,i),{queue:!1,duration:c,easing:d,complete:function(){a.each(k,function(a,c){b[c]&&j[c+"Class"](b[c])}),"object"==typeof j.attr("style")?(j.attr("style").cssText="",j.attr("style").cssText=l):j.attr("style",l),h&&h.apply(this,arguments),a.dequeue(this)}})})},a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,g){return"boolean"==typeof d||d===b?e?a.effects.animateClass.apply(this,[d?{add:c}:{remove:c},e,f,g]):this._toggleClass(c,d):a.effects.animateClass.apply(this,[{toggle:c},d,e,f])},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,e,f])}}),a.extend(a.effects,{version:"1.8.24",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){return"toggle"==b&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d
;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),float:b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;try{e.id}catch(a){e=document.body}return b.wrap(d),(b[0]===e||a.contains(b[0],e))&&a(e).focus(),d=b.parent(),"static"==b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),d.css(c).show()},removeWrapper:function(b){var c,d=document.activeElement;return b.parent().is(".ui-effects-wrapper")?(c=b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).focus(),c):b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(b,c,d,e){var f=h.apply(this,arguments),g={options:f[1],duration:f[2],callback:f[3]},i=g.options.mode,j=a.effects[b];return a.fx.off||!j?i?this[i](g.duration,g.callback):this.each(function(){g.callback&&g.callback.call(this)}):j.call(this,g)},_show:a.fn.show,show:function(a){if(i(a))return this._show.apply(this,arguments);var b=h.apply(this,arguments);return b[1].mode="show",this.effect.apply(this,b)},_hide:a.fn.hide,hide:function(a){if(i(a))return this._hide.apply(this,arguments);var b=h.apply(this,arguments);return b[1].mode="hide",this.effect.apply(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(i(b)||"boolean"==typeof b||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=h.apply(this,arguments);return c[1].mode="toggle",this.effect.apply(this,c)},cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}});var m={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,b){m[b]=function(b){return Math.pow(b,a+2)}}),a.extend(m,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}}),a.each(m,function(b,c){a.easing["easeIn"+b]=c,a.easing["easeOut"+b]=function(a){return 1-c(1-a)},a.easing["easeInOut"+b]=function(a){return a<.5?c(2*a)/2:c(-2*a+2)/-2+1}})}(jQuery),function(a,b){a.effects.blind=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d),c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"}),h="vertical"==f?"height":"width",i="vertical"==f?g.height():g.width();"show"==e&&g.css(h,0);var j={};j[h]="show"==e?i:0,g.animate(j,b.duration,b.options.easing,function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),function(a,b){a.effects.bounce=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"effect"),f=b.options.direction||"up",g=b.options.distance||20,h=b.options.times||5,i=b.duration||250;/show|hide/.test(e)&&d.push("opacity"),a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var j="up"==f||"down"==f?"top":"left",k="up"==f||"left"==f?"pos":"neg",g=b.options.distance||("top"==j?c.outerHeight(!0)/3:c.outerWidth(!0)/3);if("show"==e&&c.css("opacity",0).css(j,"pos"==k?-g:g),"hide"==e&&(g/=2*h),"hide"!=e&&h--,"show"==e){var l={opacity:1};l[j]=("pos"==k?"+=":"-=")+g,c.animate(l,i/2,b.options.easing),g/=2,h--}for(var m=0;m<h;m++){var n={},o={};n[j]=("pos"==k?"-=":"+=")+g,o[j]=("pos"==k?"+=":"-=")+g,c.animate(n,i/2,b.options.easing).animate(o,i/2,b.options.easing),g="hide"==e?2*g:g/2}if("hide"==e){var l={opacity:0};l[j]=("pos"==k?"-=":"+=")+g,c.animate(l,i/2,b.options.easing,function(){c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})}else{var n={},o={};n[j]=("pos"==k?"-=":"+=")+g,o[j]=("pos"==k?"+=":"-=")+g,c.animate(n,i/2,b.options.easing).animate(o,i/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})}c.queue("fx",function(){c.dequeue()}),c.dequeue()})}}(jQuery),function(a,b){a.effects.clip=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","height","width"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d),c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"}),h="IMG"==c[0].tagName?g:c,i={size:"vertical"==f?"height":"width",position:"vertical"==f?"top":"left"},j="vertical"==f?h.height():h.width();"show"==e&&(h.css(i.size,0),h.css(i.position,j/2));var k={};k[i.size]="show"==e?j:0,k[i.position]="show"==e?0:j/2,h.animate(k,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()}})})}}(jQuery),function(a,b){a.effects.drop=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","opacity"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"left";a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var g="up"==f||"down"==f?"top":"left",h="up"==f||"left"==f?"pos":"neg",i=b.options.distance||("top"==g?c.outerHeight(!0)/2:c.outerWidth(!0)/2);"show"==e&&c.css("opacity",0).css(g,"pos"==h?-i:i);var j={opacity:"show"==e?1:0};j[g]=("show"==e?"pos"==h?"+=":"-=":"pos"==h?"-=":"+=")+i,c.animate(j,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a,b){a.effects.explode=function(b){return this.queue(function(){var c=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3,d=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;b.options.mode="toggle"==b.options.mode?a(this).is(":visible")?"hide":"show":b.options.mode;var e=a(this).show().css("visibility","hidden"),f=e.offset();f.top-=parseInt(e.css("marginTop"),10)||0,f.left-=parseInt(e.css("marginLeft"),10)||0;for(var g=e.outerWidth(!0),h=e.outerHeight(!0),i=0;i<c;i++)for(var j=0;j<d;j++)e.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:g/d*-j,top:h/c*-i}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g/d,height:h/c,left:f.left+j*(g/d)+("show"==b.options.mode?(j-Math.floor(d/2))*(g/d):0),top:f.top+i*(h/c)+("show"==b.options.mode?(i-Math.floor(c/2))*(h/c):0),opacity:"show"==b.options.mode?0:1}).animate({left:f.left+j*(g/d)+("show"==b.options.mode?0:(j-Math.floor(d/2))*(g/d)),top:f.top+i*(h/c)+("show"==b.options.mode?0:(i-Math.floor(c/2))*(h/c)),opacity:"show"==b.options.mode?1:0},b.duration||500);setTimeout(function(){"show"==b.options.mode?e.css({visibility:"visible"}):e.css({visibility:"visible"}).hide(),b.callback&&b.callback.apply(e[0]),e.dequeue(),a("div.ui-effects-explode").remove()},b.duration||500)})}}(jQuery),function(a,b){a.effects.fade=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"hide");c.animate({opacity:d},{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a,b){a.effects.fold=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.size||15,g=!!b.options.horizFirst,h=b.duration?b.duration/2:a.fx.speeds._default/2;a.effects.save(c,d),c.show();var i=a.effects.createWrapper(c).css({overflow:"hidden"}),j="show"==e!=g,k=j?["width","height"]:["height","width"],l=j?[i.width(),i.height()]:[i.height(),i.width()],m=/([0-9]+)%/.exec(f);m&&(f=parseInt(m[1],10)/100*l["hide"==e?0:1]),"show"==e&&i.css(g?{height:0,width:f}:{height:f,width:0});var n={},o={};n[k[0]]="show"==e?l[0]:f,o[k[1]]="show"==e?l[1]:0,i.animate(n,h,b.options.easing).animate(o,h,b.options.easing,function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),function(a,b){a.effects.highlight=function(b){return this.queue(function(){var c=a(this),d=["backgroundImage","backgroundColor","opacity"],e=a.effects.setMode(c,b.options.mode||"show"),f={backgroundColor:c.css("backgroundColor")};"hide"==e&&(f.opacity=0),a.effects.save(c,d),c.show().css({backgroundImage:"none",backgroundColor:b.options.color||"#ffff99"}).animate(f,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),"show"==e&&!a.support.opacity&&this.style.removeAttribute("filter"),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a,b){a.effects.pulsate=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"show"),e=2*(b.options.times||5)-1,f=b.duration?b.duration/2:a.fx.speeds._default/2,g=c.is(":visible"),h=0;g||(c.css("opacity",0).show(),h=1),("hide"==d&&g||"show"==d&&!g)&&e--;for(var i=0;i<e;i++)c.animate({opacity:h},f,b.options.easing),h=(h+1)%2;c.animate({opacity:h},f,b.options.easing,function(){0==h&&c.hide(),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}).dequeue()})}}(jQuery),function(a,b){a.effects.puff=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"hide"),e=parseInt(b.options.percent,10)||150,f=e/100,g={height:c.height(),width:c.width()};a.extend(b.options,{fade:!0,mode:d,percent:"hide"==d?e:100,from:"hide"==d?g:{height:g.height*f,width:g.width*f}}),c.effect("scale",b.options,b.duration,b.callback),c.dequeue()})},a.effects.scale=function(b){return this.queue(function(){var c=a(this),d=a.extend(!0,{},b.options),e=a.effects.setMode(c,b.options.mode||"effect"),f=parseInt(b.options.percent,10)||(0==parseInt(b.options.percent,10)?0:"hide"==e?0:100),g=b.options.direction||"both",h=b.options.origin;"effect"!=e&&(d.origin=h||["middle","center"],d.restore=!0);var i={height:c.height(),width:c.width()};c.from=b.options.from||("show"==e?{height:0,width:0}:i);var j={y:"horizontal"!=g?f/100:1,x:"vertical"!=g?f/100:1};c.to={height:i.height*j.y,width:i.width*j.x},b.options.fade&&("show"==e&&(c.from.opacity=0,c.to.opacity=1),"hide"==e&&(c.from.opacity=1,c.to.opacity=0)),d.from=c.from,d.to=c.to,d.mode=e,c.effect("size",d,b.duration,b.callback),c.dequeue()})},a.effects.size=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","width","height","overflow","opacity"],e=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],g=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],i=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],j=a.effects.setMode(c,b.options.mode||"effect"),k=b.options.restore||!1,l=b.options.scale||"both",m=b.options.origin,n={height:c.height(),width:c.width()};if(c.from=b.options.from||n,c.to=b.options.to||n,m){var o=a.effects.getBaseline(m,n);c.from.top=(n.height-c.from.height)*o.y,c.from.left=(n.width-c.from.width)*o.x,c.to.top=(n.height-c.to.height)*o.y,c.to.left=(n.width-c.to.width)*o.x}var p={from:{y:c.from.height/n.height,x:c.from.width/n.width},to:{y:c.to.height/n.height,x:c.to.width/n.width}};"box"!=l&&"both"!=l||(p.from.y!=p.to.y&&(d=d.concat(h),c.from=a.effects.setTransition(c,h,p.from.y,c.from),c.to=a.effects.setTransition(c,h,p.to.y,c.to)),p.from.x!=p.to.x&&(d=d.concat(i),c.from=a.effects.setTransition(c,i,p.from.x,c.from),c.to=a.effects.setTransition(c,i,p.to.x,c.to))),("content"==l||"both"==l)&&p.from.y!=p.to.y&&(d=d.concat(g),c.from=a.effects.setTransition(c,g,p.from.y,c.from),c.to=a.effects.setTransition(c,g,p.to.y,c.to)),a.effects.save(c,k?d:e),c.show(),a.effects.createWrapper(c),c.css("overflow","hidden").css(c.from),"content"!=l&&"both"!=l||(h=h.concat(["marginTop","marginBottom"]).concat(g),i=i.concat(["marginLeft","marginRight"]),f=d.concat(h).concat(i),c.find("*[width]").each(function(){var c=a(this);k&&a.effects.save(c,f);var d={height:c.height(),width:c.width()};c.from={height:d.height*p.from.y,width:d.width*p.from.x},c.to={height:d.height*p.to.y,width:d.width*p.to.x},p.from.y!=p.to.y&&(c.from=a.effects.setTransition(c,h,p.from.y,c.from),c.to=a.effects.setTransition(c,h,p.to.y,c.to)),p.from.x!=p.to.x&&(c.from=a.effects.setTransition(c,i,p.from.x,c.from),c.to=a.effects.setTransition(c,i,p.to.x,c.to)),c.css(c.from),c.animate(c.to,b.duration,b.options.easing,function(){k&&a.effects.restore(c,f)})})),c.animate(c.to,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){0===c.to.opacity&&c.css("opacity",c.from.opacity),"hide"==j&&c.hide(),a.effects.restore(c,k?d:e),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a,b){a.effects.shake=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=(a.effects.setMode(c,b.options.mode||"effect"),b.options.direction||"left"),f=b.options.distance||20,g=b.options.times||3,h=b.duration||b.options.duration||140;a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var i="up"==e||"down"==e?"top":"left",j="up"==e||"left"==e?"pos":"neg",k={},l={},m={};k[i]=("pos"==j?"-=":"+=")+f,l[i]=("pos"==j?"+=":"-=")+2*f,m[i]=("pos"==j?"-=":"+=")+2*f,c.animate(k,h,b.options.easing);for(var n=1;n<g;n++)c.animate(l,h,b.options.easing).animate(m,h,b.options.easing);c.animate(l,h,b.options.easing).animate(k,h/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}),c.dequeue()})}}(jQuery),function(a,b){a.effects.slide=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"show"),f=b.options.direction||"left";a.effects.save(c,d),c.show(),a.effects.createWrapper(c).css({overflow:"hidden"});var g="up"==f||"down"==f?"top":"left",h="up"==f||"left"==f?"pos":"neg",i=b.options.distance||("top"==g?c.outerHeight(!0):c.outerWidth(!0));"show"==e&&c.css(g,"pos"==h?isNaN(i)?"-"+i:-i:i);var j={};j[g]=("show"==e?"pos"==h?"+=":"-=":"pos"==h?"-=":"+=")+i,c.animate(j,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a,b){a.effects.transfer=function(b){return this.queue(function(){var c=a(this),d=a(b.options.to),e=d.offset(),f={top:e.top,left:e.left,height:d.innerHeight(),width:d.innerWidth()},g=c.offset(),h=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.options.className).css({top:g.top,left:g.left,height:c.innerHeight(),width:c.innerWidth(),position:"absolute"}).animate(f,b.duration,b.options.easing,function(){h.remove(),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),jQuery.cookie=function(a,b,c){if(void 0===b){var d=null;if(document.cookie&&""!=document.cookie)for(var e=document.cookie.split(";"),f=0;f<e.length;f++){var g=jQuery.trim(e[f]);if(g.substring(0,a.length+1)==a+"="){d=decodeURIComponent(g.substring(a.length+1));break}}return d}c=c||{},null===b&&(b="",c=$.extend({},c),c.expires=-1);var h="";if(c.expires&&("number"==typeof c.expires||c.expires.toUTCString)){var i;"number"==typeof c.expires?(i=new Date,i.setTime(i.getTime()+24*c.expires*60*60*1e3)):i=c.expires,h="; expires="+i.toUTCString()}var j=c.path?"; path="+c.path:"",k=c.domain?"; domain="+c.domain:"",l=c.secure?"; secure":"";document.cookie=[a,"=",encodeURIComponent(b),h,j,k,l].join("")};var _canLog=!0,getDynaTreePersistData=null,DTNodeStatus_Error=-1,DTNodeStatus_Loading=1,DTNodeStatus_Ok=0;!function($){function getDtNodeFromElement(a){return alert("getDtNodeFromElement is deprecated"),$.ui.dynatree.getNode(a)}function noop(){}function _initDragAndDrop(a){var b=a.options.dnd||null;b&&(b.onDragStart||b.onDrop)&&_registerDnd(),b&&b.onDragStart&&a.$tree.draggable({addClasses:!1,appendTo:"body",containment:!1,delay:0,distance:4,revert:!1,scroll:!0,scrollSpeed:7,scrollSensitivity:10,connectToDynatree:!0,helper:function(a){var b=$.ui.dynatree.getNode(a.target);return b?b.tree._onDragEvent("helper",b,null,a,null,null):"<div></div>"},start:function(a,b){return!!b.helper.data("dtSourceNode")},_last:null}),b&&b.onDrop&&a.$tree.droppable({addClasses:!1,tolerance:"intersect",greedy:!1,_last:null})}var Class={create:function(){return function(){this.initialize.apply(this,arguments)}}},DynaTreeNode=Class.create();DynaTreeNode.prototype={initialize:function(a,b,c){this.parent=a,this.tree=b,"string"==typeof c&&(c={title:c}),void 0===c.key&&(c.key="_"+b._nodeCount++),this.data=$.extend({},$.ui.dynatree.nodedatadefaults,c),this.li=null,this.span=null,this.ul=null,this.childList=null,this._isLoading=!1,this.hasSubSel=!1,this.bExpanded=!1,this.bSelected=!1},toString:function(){return"DynaTreeNode<"+this.data.key+">: '"+this.data.title+"'"},toDict:function(a,b){var c=$.extend({},this.data);if(c.activate=this.tree.activeNode===this,c.focus=this.tree.focusNode===this,c.expand=this.bExpanded,c.select=this.bSelected,b&&b(c),a&&this.childList){c.children=[];for(var d=0,e=this.childList.length;d<e;d++)c.children.push(this.childList[d].toDict(!0,b))}else delete c.children;return c},fromDict:function(a){var b=a.children;if(void 0===b)return this.data=$.extend(this.data,a),void this.render();a=$.extend({},a),a.children=void 0,this.data=$.extend(this.data,a),this.removeChildren(),this.addChild(b)},_getInnerHtml:function(){var a,b=this.tree,c=b.options,d=b.cache,e=this.getLevel(),f=this.data,g="";e<c.minExpandLevel?e>1&&(g+=d.tagConnector):!1!==this.hasChildren()?g+=d.tagExpander:g+=d.tagConnector,c.checkbox&&!0!==f.hideCheckbox&&!f.isStatusNode&&(g+=d.tagCheckbox),f.icon?(a="/"===f.icon.charAt(0)?f.icon:c.imagePath+f.icon,g+="<img src='"+a+"' alt='' />"):!1!==f.icon&&(g+=d.tagNodeIcon);var h="";if(c.onCustomRender&&(h=c.onCustomRender.call(b,this)||""),!h){var i=f.tooltip?' title="'+f.tooltip.replace(/\"/g,"&quot;")+'"':"",j=f.href||"#";h=c.noLink||f.noLink?'<span style="display:inline-block;" class="'+c.classNames.title+'"'+i+">"+f.title+"</span>":'<a href="'+j+'" class="'+c.classNames.title+'"'+i+">"+f.title+"</a>"}return g+=h},_fixOrder:function(){var a=this.childList;if(a&&this.ul)for(var b=this.ul.firstChild,c=0,d=a.length-1;c<d;c++){var e=a[c],f=b.dtnode;e!==f?(this.tree.logDebug("_fixOrder: mismatch at index "+c+": "+e+" != "+f),this.ul.insertBefore(e.li,f.li)):b=b.nextSibling}},render:function(a,b){var c=this.tree,d=this.parent,e=this.data,f=c.options,g=f.classNames,h=this.isLastSibling(),i=!1;if(d||this.ul){if(d){this.li||(i=!0,this.li=document.createElement("li"),this.li.dtnode=this,e.key&&f.generateIds&&(this.li.id=f.idPrefix+e.key),this.span=document.createElement("span"),this.span.className=g.title,this.li.appendChild(this.span),d.ul||(d.ul=document.createElement("ul"),d.ul.style.display="none",d.li.appendChild(d.ul)),d.ul.appendChild(this.li)),this.span.innerHTML=this._getInnerHtml();var j=[];j.push(g.node),e.isFolder&&j.push(g.folder),this.bExpanded&&j.push(g.expanded),!1!==this.hasChildren()&&j.push(g.hasChildren),e.isLazy&&null===this.childList&&j.push(g.lazy),h&&j.push(g.lastsib),this.bSelected&&j.push(g.selected),this.hasSubSel&&j.push(g.partsel),c.activeNode===this&&j.push(g.active),e.addClass&&j.push(e.addClass),j.push(g.combinedExpanderPrefix+(this.bExpanded?"e":"c")+(e.isLazy&&null===this.childList?"d":"")+(h?"l":"")),j.push(g.combinedIconPrefix+(this.bExpanded?"e":"c")+(e.isFolder?"f":"")),this.span.className=j.join(" "),this.li.className=h?g.lastsib:"",i&&f.onCreate&&f.onCreate.call(c,this,this.span),f.onRender&&f.onRender.call(c,this,this.span)}}else this.li=this.span=null,this.ul=document.createElement("ul"),f.minExpandLevel>1?this.ul.className=g.container+" "+g.noConnector:this.ul.className=g.container;if((this.bExpanded||!0===b)&&this.childList){for(var k=0,l=this.childList.length;k<l;k++)this.childList[k].render(!1,b);this._fixOrder()}if(this.ul){var m="none"===this.ul.style.display,n=!!this.bExpanded;if(a&&f.fx&&m===n){var o=f.fx.duration||200;$(this.ul).animate(f.fx,o)}else this.ul.style.display=this.bExpanded||!d?"":"none"}},getKeyPath:function(a){var b=[];return this.visitParents(function(a){a.parent&&b.unshift(a.data.key)},!a),"/"+b.join(this.tree.options.keyPathSeparator)},getParent:function(){return this.parent},getChildren:function(){return void 0===this.hasChildren()?void 0:this.childList},hasChildren:function(){return this.data.isLazy?null===this.childList||void 0===this.childList?void 0:0!==this.childList.length&&(1!==this.childList.length||!this.childList[0].isStatusNode()||void 0):!!this.childList},isFirstSibling:function(){var a=this.parent;return!a||a.childList[0]===this},isLastSibling:function(){var a=this.parent;return!a||a.childList[a.childList.length-1]===this},isLoading:function(){return!!this._isLoading},getPrevSibling:function(){if(!this.parent)return null;for(var a=this.parent.childList,b=1,c=a.length;b<c;b++)if(a[b]===this)return a[b-1];return null},getNextSibling:function(){if(!this.parent)return null;for(var a=this.parent.childList,b=0,c=a.length-1;b<c;b++)if(a[b]===this)return a[b+1];return null},isStatusNode:function(){return!0===this.data.isStatusNode},isChildOf:function(a){return this.parent&&this.parent===a},isDescendantOf:function(a){if(!a)return!1;for(var b=this.parent;b;){if(b===a)return!0;b=b.parent}return!1},countChildren:function(){var a=this.childList;if(!a)return 0;for(var b=a.length,c=0,d=b;c<d;c++){b+=a[c].countChildren()}return b},sortChildren:function(a,b){var c=this.childList;if(c){if(a=a||function(a,b){var c=a.data.title.toLowerCase(),d=b.data.title.toLowerCase();return c===d?0:c>d?1:-1},c.sort(a),b)for(var d=0,e=c.length;d<e;d++)c[d].childList&&c[d].sortChildren(a,"$norender$");"$norender$"!==b&&this.render()}},_setStatusNode:function(a){var b=this.childList?this.childList[0]:null;if(a)b?(a.isStatusNode=!0,a.key="_statusNode",b.data=a,b.render()):(a.isStatusNode=!0,a.key="_statusNode",b=this.addChild(a));else if(b&&b.isStatusNode()){try{this.ul&&(this.ul.removeChild(b.li),b.li=null)}catch(a){}1===this.childList.length?this.childList=[]:this.childList.shift()}},setLazyNodeStatus:function(a,b){var c=b&&b.tooltip?b.tooltip:null,d=b&&b.info?" ("+b.info+")":"";switch(a){case DTNodeStatus_Ok:this._setStatusNode(null),$(this.span).removeClass(this.tree.options.classNames.nodeLoading),this._isLoading=!1,this.tree.options.autoFocus&&(this===this.tree.tnRoot&&this.childList&&this.childList.length>0?this.childList[0].focus():this.focus());break;case DTNodeStatus_Loading:this._isLoading=!0,$(this.span).addClass(this.tree.options.classNames.nodeLoading),this.parent||this._setStatusNode({title:this.tree.options.strings.loading+d,tooltip:c,addClass:this.tree.options.classNames.nodeWait});break;case DTNodeStatus_Error:this._isLoading=!1,this._setStatusNode({title:this.tree.options.strings.loadError+d,tooltip:c,addClass:this.tree.options.classNames.nodeError});break;default:throw"Bad LazyNodeStatus: '"+a+"'."}},_parentList:function(a,b){for(var c=[],d=b?this:this.parent;d;)(a||d.parent)&&c.unshift(d),d=d.parent;return c},getLevel:function(){for(var a=0,b=this.parent;b;)a++,b=b.parent;return a},_getTypeForOuterNodeEvent:function(a){var b=this.tree.options.classNames,c=a.target;if(c.className.indexOf(b.node)<0)return null;for(var d=a.pageX-c.offsetLeft,e=a.pageY-c.offsetTop,f=0,g=c.childNodes.length;f<g;f++){var h=c.childNodes[f],i=h.offsetLeft-c.offsetLeft,j=h.offsetTop-c.offsetTop,k=h.clientWidth,l=h.clientHeight;if(d>=i&&d<=i+k&&e>=j&&e<=j+l){if(h.className==b.title)return"title";if(h.className==b.expander)return"expander";if(h.className==b.checkbox)return"checkbox";if(h.className==b.nodeIcon)return"icon"}}return"prefix"},getEventTargetType:function(a){var b=a&&a.target?a.target.className:"",c=this.tree.options.classNames;return b===c.title?"title":b===c.expander?"expander":b===c.checkbox?"checkbox":b===c.nodeIcon?"icon":b===c.empty||b===c.vline||b===c.connector?"prefix":b.indexOf(c.node)>=0?this._getTypeForOuterNodeEvent(a):null},isVisible:function(){for(var a=this._parentList(!0,!1),b=0,c=a.length;b<c;b++)if(!a[b].bExpanded)return!1;return!0},makeVisible:function(){for(var a=this._parentList(!0,!1),b=0,c=a.length;b<c;b++)a[b]._expand(!0)},focus:function(){this.makeVisible();try{$(this.span).find(">a").focus()}catch(a){}},isFocused:function(){return this.tree.tnFocused===this},_activate:function(a,b){this.tree.logDebug("dtnode._activate(%o, fireEvents=%o) - %o",a,b,this);var c=this.tree.options;if(!(this.data.isStatusNode||b&&c.onQueryActivate&&!1===c.onQueryActivate.call(this.tree,a,this)))if(a){if(this.tree.activeNode){if(this.tree.activeNode===this)return;this.tree.activeNode.deactivate()}c.activeVisible&&this.makeVisible(),this.tree.activeNode=this,c.persist&&$.cookie(c.cookieId+"-active",this.data.key,c.cookie),this.tree.persistence.activeKey=this.data.key,$(this.span).addClass(c.classNames.active),b&&c.onActivate&&c.onActivate.call(this.tree,this)}else if(this.tree.activeNode===this){if(c.onQueryActivate&&!1===c.onQueryActivate.call(this.tree,!1,this))return;$(this.span).removeClass(c.classNames.active),c.persist&&$.cookie(c.cookieId+"-active","",c.cookie),this.tree.persistence.activeKey=null,this.tree.activeNode=null,b&&c.onDeactivate&&c.onDeactivate.call(this.tree,this)}},activate:function(){this._activate(!0,!0)},activateSilently:function(){this._activate(!0,!1)},deactivate:function(){this._activate(!1,!0)},isActive:function(){return this.tree.activeNode===this},_userActivate:function(){var a=!0,b=!1;if(this.data.isFolder)switch(this.tree.options.clickFolderMode){case 2:a=!1,b=!0;break;case 3:a=b=!0}null===this.parent&&(b=!1),b&&(this.toggleExpand(),this.focus()),a&&this.activate()},_setSubSel:function(a){a?(this.hasSubSel=!0,$(this.span).addClass(this.tree.options.classNames.partsel)):(this.hasSubSel=!1,$(this.span).removeClass(this.tree.options.classNames.partsel))},_updatePartSelectionState:function(){var a;if(!this.hasChildren())return a=this.bSelected&&!this.data.unselectable&&!this.data.isStatusNode,this._setSubSel(!1),a;var b,c,d=this.childList,e=!0,f=!0;for(b=0,c=d.length;b<c;b++){var g=d[b],h=g._updatePartSelectionState();!1!==h&&(f=!1),!0!==h&&(e=!1)}return a=!!e||!f&&void 0,this._setSubSel(void 0===a),this.bSelected=!0===a,a},_fixSelectionState:function(){var a,b,c;if(this.bSelected)for(this.visit(function(a){a.parent._setSubSel(!0),a.data.unselectable||a._select(!0,!1,!1)}),a=this.parent;a;){a._setSubSel(!0);var d=!0;for(b=0,c=a.childList.length;b<c;b++){var e=a.childList[b];if(!e.bSelected&&!e.data.isStatusNode&&!e.data.unselectable){d=!1;break}}d&&a._select(!0,!1,!1),a=a.parent}else for(this._setSubSel(!1),this.visit(function(a){a._setSubSel(!1),a._select(!1,!1,!1)}),a=this.parent;a;){a._select(!1,!1,!1);var f=!1;for(b=0,c=a.childList.length;b<c;b++)if(a.childList[b].bSelected||a.childList[b].hasSubSel){f=!0;break}a._setSubSel(f),a=a.parent}},_select:function(a,b,c){var d=this.tree.options;this.data.isStatusNode||this.bSelected!==a&&(b&&d.onQuerySelect&&!1===d.onQuerySelect.call(this.tree,a,this)||(1==d.selectMode&&a&&this.tree.visit(function(a){if(a.bSelected)return a._select(!1,!1,!1),!1}),this.bSelected=a,a?(d.persist&&this.tree.persistence.addSelect(this.data.key),$(this.span).addClass(d.classNames.selected),c&&3===d.selectMode&&this._fixSelectionState(),b&&d.onSelect&&d.onSelect.call(this.tree,!0,this)):(d.persist&&this.tree.persistence.clearSelect(this.data.key),$(this.span).removeClass(d.classNames.selected),c&&3===d.selectMode&&this._fixSelectionState(),b&&d.onSelect&&d.onSelect.call(this.tree,!1,this))))},select:function(a){return this.data.unselectable?this.bSelected:this._select(!1!==a,!0,!0)},toggleSelect:function(){return this.select(!this.bSelected)},isSelected:function(){return this.bSelected},isLazy:function(){return!!this.data.isLazy},_loadContent:function(){try{var a=this.tree.options;this.tree.logDebug("_loadContent: start - %o",this),this.setLazyNodeStatus(DTNodeStatus_Loading),!0===a.onLazyRead.call(this.tree,this)&&(this.setLazyNodeStatus(DTNodeStatus_Ok),this.tree.logDebug("_loadContent: succeeded - %o",this))}catch(a){this.tree.logWarning("_loadContent: failed - %o",a),this.setLazyNodeStatus(DTNodeStatus_Error,{tooltip:""+a})}},_expand:function(a,b){if(this.bExpanded===a)return void this.tree.logDebug("dtnode._expand(%o) IGNORED - %o",a,this);this.tree.logDebug("dtnode._expand(%o) - %o",a,this);var c=this.tree.options;if(!a&&this.getLevel()<c.minExpandLevel)return void this.tree.logDebug("dtnode._expand(%o) prevented collapse - %o",a,this);if(!c.onQueryExpand||!1!==c.onQueryExpand.call(this.tree,a,this)){this.bExpanded=a,c.persist&&(a?this.tree.persistence.addExpand(this.data.key):this.tree.persistence.clearExpand(this.data.key));var d=!(this.data.isLazy&&null===this.childList||this._isLoading||b);if(this.render(d),this.bExpanded&&this.parent&&c.autoCollapse)for(var e=this._parentList(!1,!0),f=0,g=e.length;f<g;f++)e[f].collapseSiblings();if(c.activeVisible&&this.tree.activeNode&&!this.tree.activeNode.isVisible()&&this.tree.activeNode.deactivate(),a&&this.data.isLazy&&null===this.childList&&!this._isLoading)return void this._loadContent();c.onExpand&&c.onExpand.call(this.tree,a,this)}},isExpanded:function(){return this.bExpanded},expand:function(a){a=!1!==a,(this.childList||this.data.isLazy||!a)&&(null!==this.parent||a)&&this._expand(a)},scheduleAction:function(a,b){this.tree.timer&&(clearTimeout(this.tree.timer),this.tree.logDebug("clearTimeout(%o)",this.tree.timer));var c=this;switch(a){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){c.tree.logDebug("setTimeout: trigger expand"),c.expand(!0)},b);break;case"activate":this.tree.timer=setTimeout(function(){c.tree.logDebug("setTimeout: trigger activate"),c.activate()},b);break;default:throw"Invalid mode "+a}this.tree.logDebug("setTimeout(%s, %s): %s",a,b,this.tree.timer)},toggleExpand:function(){this.expand(!this.bExpanded)},collapseSiblings:function(){if(null!==this.parent)for(var a=this.parent.childList,b=0,c=a.length;b<c;b++)a[b]!==this&&a[b].bExpanded&&a[b]._expand(!1)},_onClick:function(a){var b=this.getEventTargetType(a);if("expander"===b)this.toggleExpand(),this.focus();else if("checkbox"===b)this.toggleSelect(),this.focus();else{this._userActivate();var c=this.span.getElementsByTagName("a");if(!c[0])return!0;$.browser.msie&&parseInt($.browser.version,10)<9||c[0].focus()}a.preventDefault()},_onDblClick:function(a){},_onKeydown:function(a){var b,c=!0;switch(a.which){case 107:case 187:this.bExpanded||this.toggleExpand();break;case 109:case 189:this.bExpanded&&this.toggleExpand();break;case 32:this._userActivate();break;case 8:this.parent&&this.parent.focus();break;case 37:this.bExpanded?(this.toggleExpand(),this.focus()):this.parent&&this.parent.parent&&this.parent.focus();break;case 39:
this.bExpanded||!this.childList&&!this.data.isLazy?this.childList&&this.childList[0].focus():(this.toggleExpand(),this.focus());break;case 38:for(b=this.getPrevSibling();b&&b.bExpanded&&b.childList;)b=b.childList[b.childList.length-1];!b&&this.parent&&this.parent.parent&&(b=this.parent),b&&b.focus();break;case 40:if(this.bExpanded&&this.childList)b=this.childList[0];else for(var d=this._parentList(!1,!0),e=d.length-1;e>=0&&!(b=d[e].getNextSibling());e--);b&&b.focus();break;default:c=!1}c&&a.preventDefault()},_onKeypress:function(a){},_onFocus:function(a){var b=this.tree.options;"blur"==a.type||"focusout"==a.type?(b.onBlur&&b.onBlur.call(this.tree,this),this.tree.tnFocused&&$(this.tree.tnFocused.span).removeClass(b.classNames.focused),this.tree.tnFocused=null,b.persist&&$.cookie(b.cookieId+"-focus","",b.cookie)):"focus"!=a.type&&"focusin"!=a.type||(this.tree.tnFocused&&this.tree.tnFocused!==this&&(this.tree.logDebug("dtnode.onFocus: out of sync: curFocus: %o",this.tree.tnFocused),$(this.tree.tnFocused.span).removeClass(b.classNames.focused)),this.tree.tnFocused=this,b.onFocus&&b.onFocus.call(this.tree,this),$(this.tree.tnFocused.span).addClass(b.classNames.focused),b.persist&&$.cookie(b.cookieId+"-focus",this.data.key,b.cookie))},visit:function(a,b){var c=!0;if(!0===b&&(!1===(c=a(this))||"skip"==c))return c;if(this.childList)for(var d=0,e=this.childList.length;d<e&&!1!==(c=this.childList[d].visit(a,!0));d++);return c},visitParents:function(a,b){if(b&&!1===a(this))return!1;for(var c=this.parent;c;){if(!1===a(c))return!1;c=c.parent}return!0},remove:function(){if(this===this.tree.root)throw"Cannot remove system root";return this.parent.removeChild(this)},removeChild:function(a){var b=this.childList;if(1==b.length){if(a!==b[0])throw"removeChild: invalid child";return this.removeChildren()}a===this.tree.activeNode&&a.deactivate(),this.tree.options.persist&&(a.bSelected&&this.tree.persistence.clearSelect(a.data.key),a.bExpanded&&this.tree.persistence.clearExpand(a.data.key)),a.removeChildren(!0),this.ul.removeChild(a.li);for(var c=0,d=b.length;c<d;c++)if(b[c]===a){this.childList.splice(c,1);break}},removeChildren:function(a,b){this.tree.logDebug("%s.removeChildren(%o)",this,a);var c=this.tree,d=this.childList;if(d){for(var e=0,f=d.length;e<f;e++){var g=d[e];g===c.activeNode&&!b&&g.deactivate(),this.tree.options.persist&&!b&&(g.bSelected&&this.tree.persistence.clearSelect(g.data.key),g.bExpanded&&this.tree.persistence.clearExpand(g.data.key)),g.removeChildren(!0,b),this.ul&&$("li",$(this.ul)).remove()}this.childList=null}a||(this._isLoading=!1,this.render())},setTitle:function(a){this.fromDict({title:a})},reload:function(a){throw"Use reloadChildren() instead"},reloadChildren:function(a){if(null===this.parent)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.reloadChildren() requires lazy nodes.";if(a){var b=this,c="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;this.tree.$tree.bind(c,function(d,e,f){if(b.tree.$tree.unbind(c),b.tree.logDebug("loaded %o, %o, %o",d,e,f),e!==b)throw"got invalid load event";a.call(b.tree,e,f)})}this.removeChildren(),this._loadContent()},_loadKeyPath:function(a,b){var c=this.tree;if(c.logDebug("%s._loadKeyPath(%s)",this,a),""===a)throw"Key path must not be empty";var d=a.split(c.options.keyPathSeparator);if(""===d[0])throw"Key path must be relative (don't start with '/')";var e=d.shift();if(this.childList)for(var f=0,g=this.childList.length;f<g;f++){var h=this.childList[f];if(h.data.key===e){if(0===d.length)b.call(c,h,"ok");else if(!h.data.isLazy||null!==h.childList&&void 0!==h.childList)b.call(c,h,"loaded"),h._loadKeyPath(d.join(c.options.keyPathSeparator),b);else{c.logDebug("%s._loadKeyPath(%s) -> reloading %s...",this,a,h);var i=this;h.reloadChildren(function(e,f){f?(c.logDebug("%s._loadKeyPath(%s) -> reloaded %s.",e,a,e),b.call(c,h,"loaded"),e._loadKeyPath(d.join(c.options.keyPathSeparator),b)):(c.logWarning("%s._loadKeyPath(%s) -> reloadChildren() failed.",i,a),b.call(c,h,"error"))})}return}}b.call(c,void 0,"notfound",e,0===d.length),c.logWarning("Node not found: "+e)},resetLazy:function(){if(null===this.parent)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.resetLazy() requires lazy nodes.";this.expand(!1),this.removeChildren()},_addChildNode:function(a,b){var c=this.tree,d=c.options,e=c.persistence;if(a.parent=this,null===this.childList?this.childList=[]:b||this.childList.length>0&&$(this.childList[this.childList.length-1].span).removeClass(d.classNames.lastsib),b){var f=$.inArray(b,this.childList);if(f<0)throw"<beforeNode> must be a child of <this>";this.childList.splice(f,0,a)}else this.childList.push(a);var g=c.isInitializing();if(d.persist&&e.cookiesFound&&g?(e.activeKey===a.data.key&&(c.activeNode=a),e.focusedKey===a.data.key&&(c.focusNode=a),a.bExpanded=$.inArray(a.data.key,e.expandedKeyList)>=0,a.bSelected=$.inArray(a.data.key,e.selectedKeyList)>=0):(a.data.activate&&(c.activeNode=a,d.persist&&(e.activeKey=a.data.key)),a.data.focus&&(c.focusNode=a,d.persist&&(e.focusedKey=a.data.key)),a.bExpanded=!0===a.data.expand,a.bExpanded&&d.persist&&e.addExpand(a.data.key),a.bSelected=!0===a.data.select,a.bSelected&&d.persist&&e.addSelect(a.data.key)),d.minExpandLevel>=a.getLevel()&&(this.bExpanded=!0),a.bSelected&&3==d.selectMode)for(var h=this;h;)h.hasSubSel||h._setSubSel(!0),h=h.parent;return c.bEnableUpdate&&this.render(),a},addChild:function(a,b){if("string"==typeof a)throw"Invalid data type for "+a;if(a&&0!==a.length){if(a instanceof DynaTreeNode)return this._addChildNode(a,b);a.length||(a=[a]);for(var c=this.tree.enableUpdate(!1),d=null,e=0,f=a.length;e<f;e++){var g=a[e],h=this._addChildNode(new DynaTreeNode(this,this.tree,g),b);d||(d=h),g.children&&h.addChild(g.children,null)}return this.tree.enableUpdate(c),d}},append:function(a){return this.tree.logWarning("node.append() is deprecated (use node.addChild() instead)."),this.addChild(a,null)},appendAjax:function(a){var b=this;if(this.removeChildren(!1,!0),this.setLazyNodeStatus(DTNodeStatus_Loading),a.debugLazyDelay){var c=a.debugLazyDelay;return a.debugLazyDelay=0,this.tree.logInfo("appendAjax: waiting for debugLazyDelay "+c),setTimeout(function(){b.appendAjax(a)},c),void 0}var d=a.success,e=a.error,f="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key,g=$.extend({},this.tree.options.ajaxDefaults,a,{success:function(a,c,e){var h=b.tree.phase;b.tree.phase="init",g.postProcess?a=g.postProcess.call(this,a,this.dataType):a&&a.hasOwnProperty("d")&&(a="string"==typeof a.d?$.parseJSON(a.d):a.d),(!$.isArray(a)||0!==a.length)&&b.addChild(a,null),b.tree.phase="postInit",d&&d.call(g,b,a,c),b.tree.logDebug("trigger "+f),b.tree.$tree.trigger(f,[b,!0]),b.tree.phase=h,b.setLazyNodeStatus(DTNodeStatus_Ok),$.isArray(a)&&0===a.length&&(b.childList=[],b.render())},error:function(a,c,d){b.tree.logWarning("appendAjax failed:",c,":\n",a,"\n",d),e&&e.call(g,b,a,c,d),b.tree.$tree.trigger(f,[b,!1]),b.setLazyNodeStatus(DTNodeStatus_Error,{info:c,tooltip:""+d})}});$.ajax(g)},move:function(a,b){var c;if(this!==a){if(!this.parent)throw"Cannot move system root";void 0!==b&&"over"!=b||(b="child");var d=this.parent,e="child"===b?a:a.parent;if(e.isDescendantOf(this))throw"Cannot move a node to it's own descendant";if(1==this.parent.childList.length)this.parent.childList=this.parent.data.isLazy?[]:null,this.parent.bExpanded=!1;else{if((c=$.inArray(this,this.parent.childList))<0)throw"Internal error";this.parent.childList.splice(c,1)}if(this.parent.ul&&this.parent.ul.removeChild(this.li),this.parent=e,e.hasChildren())switch(b){case"child":e.childList.push(this);break;case"before":if((c=$.inArray(a,e.childList))<0)throw"Internal error";e.childList.splice(c,0,this);break;case"after":if((c=$.inArray(a,e.childList))<0)throw"Internal error";e.childList.splice(c+1,0,this);break;default:throw"Invalid mode "+b}else e.childList=[this];if(e.ul||(e.ul=document.createElement("ul"),e.ul.style.display="none",e.li.appendChild(e.ul)),this.li&&e.ul.appendChild(this.li),this.tree!==a.tree)throw this.visit(function(b){b.tree=a.tree},null,!0),"Not yet implemented.";d.isDescendantOf(e)||d.render(),e.isDescendantOf(d)||e.render()}},lastentry:void 0};var DynaTreeStatus=Class.create();DynaTreeStatus._getTreePersistData=function(a,b){var c=new DynaTreeStatus(a,b);return c.read(),c.toDict()},getDynaTreePersistData=DynaTreeStatus._getTreePersistData,DynaTreeStatus.prototype={initialize:function(a,b){void 0===a&&(a=$.ui.dynatree.prototype.options.cookieId),b=$.extend({},$.ui.dynatree.prototype.options.cookie,b),this.cookieId=a,this.cookieOpts=b,this.cookiesFound=void 0,this.activeKey=null,this.focusedKey=null,this.expandedKeyList=null,this.selectedKeyList=null},_log:function(a){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)},read:function(){this.cookiesFound=!1;var a=$.cookie(this.cookieId+"-active");this.activeKey=null===a?"":a,null!==a&&(this.cookiesFound=!0),a=$.cookie(this.cookieId+"-focus"),this.focusedKey=null===a?"":a,null!==a&&(this.cookiesFound=!0),a=$.cookie(this.cookieId+"-expand"),this.expandedKeyList=null===a?[]:a.split(","),null!==a&&(this.cookiesFound=!0),a=$.cookie(this.cookieId+"-select"),this.selectedKeyList=null===a?[]:a.split(","),null!==a&&(this.cookiesFound=!0)},write:function(){$.cookie(this.cookieId+"-active",null===this.activeKey?"":this.activeKey,this.cookieOpts),$.cookie(this.cookieId+"-focus",null===this.focusedKey?"":this.focusedKey,this.cookieOpts),$.cookie(this.cookieId+"-expand",null===this.expandedKeyList?"":this.expandedKeyList.join(","),this.cookieOpts),$.cookie(this.cookieId+"-select",null===this.selectedKeyList?"":this.selectedKeyList.join(","),this.cookieOpts)},addExpand:function(a){$.inArray(a,this.expandedKeyList)<0&&(this.expandedKeyList.push(a),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},clearExpand:function(a){var b=$.inArray(a,this.expandedKeyList);b>=0&&(this.expandedKeyList.splice(b,1),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},addSelect:function(a){$.inArray(a,this.selectedKeyList)<0&&(this.selectedKeyList.push(a),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},clearSelect:function(a){var b=$.inArray(a,this.selectedKeyList);b>=0&&(this.selectedKeyList.splice(b,1),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},isReloading:function(){return!0===this.cookiesFound},toDict:function(){return{cookiesFound:this.cookiesFound,activeKey:this.activeKey,focusedKey:this.activeKey,expandedKeyList:this.expandedKeyList,selectedKeyList:this.selectedKeyList}},lastentry:void 0};var DynaTree=Class.create();DynaTree.version="$Version:$",DynaTree.prototype={initialize:function(a){this.phase="init",this.$widget=a,this.options=a.options,this.$tree=a.element,this.timer=null,this.divTree=this.$tree.get(0),_initDragAndDrop(this)},_load:function(a){var b=(this.$widget,this.options),c=this;this.bEnableUpdate=!0,this._nodeCount=1,this.activeNode=null,this.focusNode=null,void 0!==b.rootVisible&&this.logWarning("Option 'rootVisible' is no longer supported."),b.minExpandLevel<1&&(this.logWarning("Option 'minExpandLevel' must be >= 1."),b.minExpandLevel=1),b.classNames!==$.ui.dynatree.prototype.options.classNames&&(b.classNames=$.extend({},$.ui.dynatree.prototype.options.classNames,b.classNames)),b.ajaxDefaults!==$.ui.dynatree.prototype.options.ajaxDefaults&&(b.ajaxDefaults=$.extend({},$.ui.dynatree.prototype.options.ajaxDefaults,b.ajaxDefaults)),b.dnd!==$.ui.dynatree.prototype.options.dnd&&(b.dnd=$.extend({},$.ui.dynatree.prototype.options.dnd,b.dnd)),b.imagePath||$("script").each(function(){var a=/.*dynatree[^\/]*\.js$/i;if(this.src.search(a)>=0)return this.src.indexOf("/")>=0?b.imagePath=this.src.slice(0,this.src.lastIndexOf("/"))+"/skin/":b.imagePath="skin/",c.logDebug("Guessing imagePath from '%s': '%s'",this.src,b.imagePath),!1}),this.persistence=new DynaTreeStatus(b.cookieId,b.cookie),b.persist&&($.cookie||_log("warn","Please include jquery.cookie.js to use persistence."),this.persistence.read()),this.logDebug("DynaTree.persistence: %o",this.persistence.toDict()),this.cache={tagEmpty:"<span class='"+b.classNames.empty+"'></span>",tagVline:"<span class='"+b.classNames.vline+"'></span>",tagExpander:"<span class='"+b.classNames.expander+"'></span>",tagConnector:"<span class='"+b.classNames.connector+"'></span>",tagNodeIcon:"<span class='"+b.classNames.nodeIcon+"'></span>",tagCheckbox:"<span class='"+b.classNames.checkbox+"'></span>",lastentry:void 0},(b.children||b.initAjax&&b.initAjax.url||b.initId)&&$(this.divTree).empty();var d=this.$tree.find(">ul:first").hide();this.tnRoot=new DynaTreeNode(null,this,{}),this.tnRoot.bExpanded=!0,this.tnRoot.render(),this.divTree.appendChild(this.tnRoot.ul);var e=this.tnRoot,f=b.persist&&this.persistence.isReloading(),g=!1,h=this.enableUpdate(!1);this.logDebug("Dynatree._load(): read tree structure..."),b.children?e.addChild(b.children):b.initAjax&&b.initAjax.url?(g=!0,e.data.isLazy=!0,this._reloadAjax(a)):b.initId?this._createFromTag(e,$("#"+b.initId)):(this._createFromTag(e,d),d.remove()),this._checkConsistency(),!g&&3==b.selectMode&&e._updatePartSelectionState(),this.logDebug("Dynatree._load(): render nodes..."),this.enableUpdate(h),this.logDebug("Dynatree._load(): bind events..."),this.$widget.bind(),this.logDebug("Dynatree._load(): postInit..."),this.phase="postInit",b.persist&&this.persistence.write(),this.focusNode&&this.focusNode.isVisible()&&(this.logDebug("Focus on init: %o",this.focusNode),this.focusNode.focus()),g||(b.onPostInit&&b.onPostInit.call(this,f,!1),a&&a.call(this,"ok")),this.phase="idle"},_reloadAjax:function(a){var b=this.options;if(!b.initAjax||!b.initAjax.url)throw"tree.reload() requires 'initAjax' mode.";var c=this.persistence,d=$.extend({},b.initAjax);d.addActiveKey&&(d.data.activeKey=c.activeKey),d.addFocusedKey&&(d.data.focusedKey=c.focusedKey),d.addExpandedKeyList&&(d.data.expandedKeyList=c.expandedKeyList.join(",")),d.addSelectedKeyList&&(d.data.selectedKeyList=c.selectedKeyList.join(",")),d.success&&this.logWarning("initAjax: success callback is ignored; use onPostInit instead."),d.error&&this.logWarning("initAjax: error callback is ignored; use onPostInit instead.");var e=c.isReloading();d.success=function(c,d,f){3==b.selectMode&&c.tree.tnRoot._updatePartSelectionState(),b.onPostInit&&b.onPostInit.call(c.tree,e,!1),a&&a.call(c.tree,"ok")},d.error=function(c,d,f,g){b.onPostInit&&b.onPostInit.call(c.tree,e,!0,d,f,g),a&&a.call(c.tree,"error",d,f,g)},this.logDebug("Dynatree._init(): send Ajax request..."),this.tnRoot.appendAjax(d)},toString:function(){return"Dynatree '"+this.$tree.attr("id")+"'"},toDict:function(){return this.tnRoot.toDict(!0)},serializeArray:function(a){for(var b=this.getSelectedNodes(a),c=this.$tree.attr("name")||this.$tree.attr("id"),d=[],e=0,f=b.length;e<f;e++)d.push({name:c,value:b[e].data.key});return d},getPersistData:function(){return this.persistence.toDict()},logDebug:function(a){this.options.debugLevel>=2&&(Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments))},logInfo:function(a){this.options.debugLevel>=1&&(Array.prototype.unshift.apply(arguments,["info"]),_log.apply(this,arguments))},logWarning:function(a){Array.prototype.unshift.apply(arguments,["warn"]),_log.apply(this,arguments)},isInitializing:function(){return"init"==this.phase||"postInit"==this.phase},isReloading:function(){return("init"==this.phase||"postInit"==this.phase)&&this.options.persist&&this.persistence.cookiesFound},isUserEvent:function(){return"userEvent"==this.phase},redraw:function(){this.tnRoot.render(!1,!1)},renderInvisibleNodes:function(){this.tnRoot.render(!1,!0)},reload:function(a){this._load(a)},getRoot:function(){return this.tnRoot},enable:function(){this.$widget.enable()},disable:function(){this.$widget.disable()},getNodeByKey:function(a){var b=document.getElementById(this.options.idPrefix+a);if(b)return b.dtnode?b.dtnode:null;var c=null;return this.visit(function(b){if(b.data.key==a)return c=b,!1},!0),c},getActiveNode:function(){return this.activeNode},reactivate:function(a){var b=this.activeNode;b&&(this.activeNode=null,b.activate(),a&&b.focus())},getSelectedNodes:function(a){var b=[];return this.tnRoot.visit(function(c){if(c.bSelected&&(b.push(c),!0===a))return"skip"}),b},activateKey:function(a){var b=null===a?null:this.getNodeByKey(a);return b?(b.focus(),b.activate(),b):(this.activeNode&&this.activeNode.deactivate(),this.activeNode=null,null)},loadKeyPath:function(a,b){var c=a.split(this.options.keyPathSeparator);return""===c[0]&&c.shift(),c[0]==this.tnRoot.data.key&&(this.logDebug("Removed leading root key."),c.shift()),a=c.join(this.options.keyPathSeparator),this.tnRoot._loadKeyPath(a,b)},selectKey:function(a,b){var c=this.getNodeByKey(a);return c?(c.select(b),c):null},enableUpdate:function(a){return this.bEnableUpdate==a?a:(this.bEnableUpdate=a,a&&this.redraw(),!a)},count:function(){return this.tnRoot.countChildren()},visit:function(a,b){return this.tnRoot.visit(a,b)},_createFromTag:function(parentTreeNode,$ulParent){var self=this;$ulParent.find(">li").each(function(){var $li=$(this),$liSpan=$li.find(">span:first"),$liA=$li.find(">a:first"),title,href=null,target=null,tooltip;if($liSpan.length)title=$liSpan.html();else if($liA.length)title=$liA.html(),href=$liA.attr("href"),target=$liA.attr("target"),tooltip=$liA.attr("title");else{title=$li.html();var iPos=title.search(/<ul/i);title=iPos>=0?$.trim(title.substring(0,iPos)):$.trim(title)}var data={title:title,tooltip:tooltip,isFolder:$li.hasClass("folder"),isLazy:$li.hasClass("lazy"),expand:$li.hasClass("expanded"),select:$li.hasClass("selected"),activate:$li.hasClass("active"),focus:$li.hasClass("focused"),noLink:$li.hasClass("noLink")};if(href&&(data.href=href,data.target=target),$li.attr("title")&&(data.tooltip=$li.attr("title")),$li.attr("id")&&(data.key=$li.attr("id")),$li.attr("data")){var dataAttr=$.trim($li.attr("data"));if(dataAttr){"{"!=dataAttr.charAt(0)&&(dataAttr="{"+dataAttr+"}");try{$.extend(data,eval("("+dataAttr+")"))}catch(a){throw"Error parsing node data: "+a+"\ndata:\n'"+dataAttr+"'"}}}var childNode=parentTreeNode.addChild(data),$ul=$li.find(">ul:first");$ul.length&&self._createFromTag(childNode,$ul)})},_checkConsistency:function(){},_setDndStatus:function(a,b,c,d,e){var f=a?$(a.span):null,g=$(b.span);if(this.$dndMarker||(this.$dndMarker=$("<div id='dynatree-drop-marker'></div>").hide().css({"z-index":1e3}).prependTo($(this.divTree).parent())),"after"===d||"before"===d||"over"===d){var h="0 0";switch(d){case"before":this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-before"),h="0 -8";break;case"after":this.$dndMarker.removeClass("dynatree-drop-before dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-after"),h="0 8";break;default:this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-before"),this.$dndMarker.addClass("dynatree-drop-over"),g.addClass("dynatree-drop-target"),h="8 0"}this.$dndMarker.show().position({my:"left top",at:"left top",of:g,offset:h})}else g.removeClass("dynatree-drop-target"),this.$dndMarker.hide();"after"===d?g.addClass("dynatree-drop-after"):g.removeClass("dynatree-drop-after"),"before"===d?g.addClass("dynatree-drop-before"):g.removeClass("dynatree-drop-before"),!0===e?(f&&f.addClass("dynatree-drop-accept"),g.addClass("dynatree-drop-accept"),c.addClass("dynatree-drop-accept")):(f&&f.removeClass("dynatree-drop-accept"),g.removeClass("dynatree-drop-accept"),c.removeClass("dynatree-drop-accept")),!1===e?(f&&f.addClass("dynatree-drop-reject"),g.addClass("dynatree-drop-reject"),c.addClass("dynatree-drop-reject")):(f&&f.removeClass("dynatree-drop-reject"),g.removeClass("dynatree-drop-reject"),c.removeClass("dynatree-drop-reject"))},_onDragEvent:function(a,b,c,d,e,f){var g,h,i=(this.options,this.options.dnd),j=null,k=$(b.span);switch(a){case"helper":var l=$("<div class='dynatree-drag-helper'><span class='dynatree-drag-helper-img' /></div>").append($(d.target).closest("a").clone());$("ul.dynatree-container",b.tree.divTree).append(l),l.data("dtSourceNode",b),j=l;break;case"start":b.isStatusNode()?j=!1:i.onDragStart&&(j=i.onDragStart(b)),!1===j?(this.logDebug("tree.onDragStart() cancelled"),e.helper.trigger("mouseup"),e.helper.hide()):k.addClass("dynatree-drag-source");break;case"enter":j=i.onDragEnter?i.onDragEnter(b,c):null,j=!!j&&{over:!0===j||"over"===j||$.inArray("over",j)>=0,before:!0===j||"before"===j||$.inArray("before",j)>=0,after:!0===j||"after"===j||$.inArray("after",j)>=0},e.helper.data("enterResponse",j);break;case"over":if(h=e.helper.data("enterResponse"),g=null,!1!==h)if("string"==typeof h)g=h;else{var m=k.offset(),n={x:d.pageX-m.left,y:d.pageY-m.top},o={x:n.x/k.width(),y:n.y/k.height()};h.after&&o.y>.75?g="after":!h.over&&h.after&&o.y>.5?g="after":h.before&&o.y<=.25?g="before":!h.over&&h.before&&o.y<=.5?g="before":h.over&&(g="over"),i.preventVoidMoves&&(b===c?g=null:"before"===g&&c&&b===c.getNextSibling()?g=null:"after"===g&&c&&b===c.getPrevSibling()?g=null:"over"===g&&c&&c.parent===b&&c.isLastSibling()&&(g=null)),e.helper.data("hitMode",g)}"over"===g&&i.autoExpandMS&&!1!==b.hasChildren()&&!b.bExpanded&&b.scheduleAction("expand",i.autoExpandMS),g&&i.onDragOver&&("over"!==(j=i.onDragOver(b,c,g))&&"before"!==j&&"after"!==j||(g=j)),this._setDndStatus(c,b,e.helper,g,!1!==j&&null!==g);break;case"drop":var p=e.helper.hasClass("dynatree-drop-reject");(g=e.helper.data("hitMode"))&&i.onDrop&&!p&&i.onDrop(b,c,g,e,f);break;case"leave":b.scheduleAction("cancel"),e.helper.data("enterResponse",null),e.helper.data("hitMode",null),this._setDndStatus(c,b,e.helper,"out",void 0),i.onDragLeave&&i.onDragLeave(b,c);break;case"stop":k.removeClass("dynatree-drag-source"),i.onDragStop&&i.onDragStop(b);break;default:throw"Unsupported drag event: "+a}return j},cancelDrag:function(){var a=$.ui.ddmanager.current;a&&a.cancel()},lastentry:void 0},$.widget("ui.dynatree",{_init:function(){if(parseFloat($.ui.version)<1.8)return this.options.debugLevel>=0&&_log("warn","ui.dynatree._init() was called; you should upgrade to jquery.ui.core.js v1.8 or higher."),this._create();this.options.debugLevel>=2&&_log("debug","ui.dynatree._init() was called; no current default functionality.")},_create:function(){this.options.debugLevel>=1&&logMsg("Dynatree._create(): version='%s', debugLevel=%o.",$.ui.dynatree.version,this.options.debugLevel),this.options.event+=".dynatree";this.element.get(0);this.tree=new DynaTree(this),this.tree._load(),this.tree.logDebug("Dynatree._init(): done.")},bind:function(){function a(a){a=$.event.fix(a||window.event);var b=$.ui.dynatree.getNode(a.target);return!!b&&b._onFocus(a)}this.unbind();var b="click.dynatree dblclick.dynatree";this.options.keyboard&&(b+=" keypress.dynatree keydown.dynatree"),this.element.bind(b,function(a){var b=$.ui.dynatree.getNode(a.target);if(!b)return!0;var c=b.tree,d=c.options;c.logDebug("event(%s): dtnode: %s",a.type,b);var e=c.phase;c.phase="userEvent";try{switch(a.type){case"click":return(!d.onClick||!1!==d.onClick.call(c,b,a))&&b._onClick(a);case"dblclick":return(!d.onDblClick||!1!==d.onDblClick.call(c,b,a))&&b._onDblClick(a);case"keydown":return(!d.onKeydown||!1!==d.onKeydown.call(c,b,a))&&b._onKeydown(a);case"keypress":return(!d.onKeypress||!1!==d.onKeypress.call(c,b,a))&&b._onKeypress(a)}}catch(d){c.logWarning("bind(%o): dtnode: %o, error: %o",a,b,d)}finally{c.phase=e}});var c=this.tree.divTree;c.addEventListener?(c.addEventListener("focus",a,!0),c.addEventListener("blur",a,!0)):c.onfocusin=c.onfocusout=a},unbind:function(){this.element.unbind(".dynatree")},enable:function(){this.bind(),$.Widget.prototype.enable.apply(this,arguments)},disable:function(){this.unbind(),$.Widget.prototype.disable.apply(this,arguments)},getTree:function(){return this.tree},getRoot:function(){return this.tree.getRoot()},getActiveNode:function(){return this.tree.getActiveNode()},getSelectedNodes:function(){return this.tree.getSelectedNodes()},lastentry:void 0}),parseFloat($.ui.version)<1.8&&($.ui.dynatree.getter="getTree getRoot getActiveNode getSelectedNodes"),$.ui.dynatree.version="$Version:$",$.ui.dynatree.getNode=function(a){if(a instanceof DynaTreeNode)return a;for(void 0!==a.selector&&(a=a[0]);a;){if(a.dtnode)return a.dtnode;a=a.parentNode}return null},$.ui.dynatree.getPersistData=DynaTreeStatus._getTreePersistData,$.ui.dynatree.prototype.options={title:"Dynatree",minExpandLevel:1,imagePath:null,children:null,initId:null,initAjax:null,autoFocus:!0,keyboard:!0,persist:!1,autoCollapse:!1,clickFolderMode:3,activeVisible:!0,checkbox:!1,selectMode:2,fx:null,noLink:!1,onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onLazyRead:null,onCustomRender:null,onCreate:null,onRender:null,postProcess:null,dnd:{onDragStart:null,onDragStop:null,autoExpandMS:1e3,preventVoidMoves:!0,onDragEnter:null,onDragOver:null,onDrop:null,onDragLeave:null},ajaxDefaults:{cache:!1,timeout:0,dataType:"json"},strings:{loading:"Loading&#8230;",loadError:"Load error!"},generateIds:!1,idPrefix:"dynatree-id-",keyPathSeparator:"/",cookieId:"dynatree",cookie:{expires:null},classNames:{container:"dynatree-container",node:"dynatree-node",folder:"dynatree-folder",empty:"dynatree-empty",vline:"dynatree-vline",expander:"dynatree-expander",connector:"dynatree-connector",checkbox:"dynatree-checkbox",nodeIcon:"dynatree-icon",title:"dynatree-title",noConnector:"dynatree-no-connector",nodeError:"dynatree-statusnode-error",nodeWait:"dynatree-statusnode-wait",hidden:"dynatree-hidden",combinedExpanderPrefix:"dynatree-exp-",combinedIconPrefix:"dynatree-ico-",nodeLoading:"dynatree-loading",hasChildren:"dynatree-has-children",active:"dynatree-active",selected:"dynatree-selected",expanded:"dynatree-expanded",lazy:"dynatree-lazy",focused:"dynatree-focused",partsel:"dynatree-partsel",lastsib:"dynatree-lastsib"},debugLevel:2,lastentry:void 0},parseFloat($.ui.version)<1.8&&($.ui.dynatree.defaults=$.ui.dynatree.prototype.options),$.ui.dynatree.nodedatadefaults={title:null,key:null,isFolder:!1,isLazy:!1,tooltip:null,href:null,icon:null,addClass:null,noLink:!1,activate:!1,focus:!1,expand:!1,select:!1,hideCheckbox:!1,unselectable:!1,children:null,lastentry:void 0};var didRegisterDnd=!1,_registerDnd=function(){didRegisterDnd||($.ui.plugin.add("draggable","connectToDynatree",{start:function(a,b){var c=$(this).data("draggable"),d=b.helper.data("dtSourceNode")||null;if(d)return c.offset.click.top=-2,c.offset.click.left=16,d.tree._onDragEvent("start",d,null,a,b,c)},drag:function(a,b){var c=$(this).data("draggable"),d=b.helper.data("dtSourceNode")||null,e=b.helper.data("dtTargetNode")||null,f=$.ui.dynatree.getNode(a.target);if(a.target&&!f){if($(a.target).closest("div.dynatree-drag-helper,#dynatree-drop-marker").length>0)return}b.helper.data("dtTargetNode",f),e&&e!==f&&e.tree._onDragEvent("leave",e,d,a,b,c),f&&(!f.tree.options.dnd.onDrop||(f===e?f.tree._onDragEvent("over",f,d,a,b,c):f.tree._onDragEvent("enter",f,d,a,b,c)))},stop:function(a,b){var c=$(this).data("draggable"),d=b.helper.data("dtSourceNode")||null,e=b.helper.data("dtTargetNode")||null,f=(c._mouseDownEvent,a.type),g="mouseup"==f&&1==a.which;g||logMsg("Drag was cancelled"),e&&(g&&e.tree._onDragEvent("drop",e,d,a,b,c),e.tree._onDragEvent("leave",e,d,a,b,c)),d&&d.tree._onDragEvent("stop",d,null,a,b,c)}}),didRegisterDnd=!0)}}(jQuery),function(a,b,c,d){function e(b){return b[0]&&a.isPlainObject(b[0])?this.data=b[0]:this.el=b,this.isCoords=!0,this.coords={},this.init(),this}var f=e.prototype;f.init=function(){this.set(),this.original_coords=this.get()},f.set=function(a,b){var c=this.el;if(c&&!a&&(this.data=c.offset(),this.data.width=c.width(),this.data.height=c.height()),c&&a&&!b){var d=c.offset();this.data.top=d.top,this.data.left=d.left}var e=this.data;return this.coords.x1=e.left,this.coords.y1=e.top,this.coords.x2=e.left+e.width,this.coords.y2=e.top+e.height,this.coords.cx=e.left+e.width/2,this.coords.cy=e.top+e.height/2,this.coords.width=e.width,this.coords.height=e.height,this.coords.el=c||!1,this},f.update=function(b){if(!b&&!this.el)return this;if(b){var c=a.extend({},this.data,b);return this.data=c,this.set(!0,!0)}return this.set(!0),this},f.get=function(){return this.coords},a.fn.coords=function(){if(this.data("coords"))return this.data("coords");var a=new e(this,arguments[0]);return this.data("coords",a),a}}(jQuery,window,document),function(a,b,c,d){function e(b,c,d){this.options=a.extend(f,d),this.$element=b,this.last_colliders=[],this.last_colliders_coords=[],"string"==typeof c||c instanceof jQuery?this.$colliders=a(c,this.options.colliders_context).not(this.$element):this.colliders=a(c),this.init()}var f={colliders_context:c.body},g=e.prototype;g.init=function(){this.find_collisions()},g.overlaps=function(a,b){var c=!1,d=!1;return(b.x1>=a.x1&&b.x1<=a.x2||b.x2>=a.x1&&b.x2<=a.x2||a.x1>=b.x1&&a.x2<=b.x2)&&(c=!0),(b.y1>=a.y1&&b.y1<=a.y2||b.y2>=a.y1&&b.y2<=a.y2||a.y1>=b.y1&&a.y2<=b.y2)&&(d=!0),c&&d},g.detect_overlapping_region=function(a,b){var c="",d="";return a.y1>b.cy&&a.y1<b.y2&&(c="N"),a.y2>b.y1&&a.y2<b.cy&&(c="S"),a.x1>b.cx&&a.x1<b.x2&&(d="W"),a.x2>b.x1&&a.x2<b.cx&&(d="E"),c+d||"C"},g.calculate_overlapped_area_coords=function(b,c){var d=Math.max(b.x1,c.x1),e=Math.max(b.y1,c.y1),f=Math.min(b.x2,c.x2),g=Math.min(b.y2,c.y2);return a({left:d,top:e,width:f-d,height:g-e}).coords().get()},g.calculate_overlapped_area=function(a){return a.width*a.height},g.manage_colliders_start_stop=function(b,c,d){for(var e=this.last_colliders_coords,f=0,g=e.length;f<g;f++)-1===a.inArray(e[f],b)&&c.call(this,e[f]);for(var h=0,i=b.length;h<i;h++)-1===a.inArray(b[h],e)&&d.call(this,b[h])},g.find_collisions=function(b){for(var c=this,d=[],e=[],f=this.colliders||this.$colliders,g=f.length,h=c.$element.coords().update(b||!1).get();g--;){var i=c.$colliders?a(f[g]):f[g],j=i.isCoords?i:i.coords(),k=j.get();if(c.overlaps(h,k)){var l=c.detect_overlapping_region(h,k);if("C"===l){var m=c.calculate_overlapped_area_coords(h,k),n=c.calculate_overlapped_area(m),o={area:n,area_coords:m,region:l,coords:k,player_coords:h,el:i};c.options.on_overlap&&c.options.on_overlap.call(this,o),d.push(j),e.push(o)}}}return(c.options.on_overlap_stop||c.options.on_overlap_start)&&this.manage_colliders_start_stop(d,c.options.on_overlap_stop,c.options.on_overlap_start),this.last_colliders_coords=d,e},g.get_closest_colliders=function(a){var b=this.find_collisions(a);return b.sort(function(a,b){return"C"===a.region&&"C"===b.region?a.coords.y1<b.coords.y1||a.coords.x1<b.coords.x1?-1:1:(a.area,b.area,1)}),b},a.fn.collision=function(a,b){return new e(this,a,b)}}(jQuery,window,document),function(a,b){a.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)};c&&!d&&a.apply(e,f),clearTimeout(d),d=setTimeout(g,b)}},a.throttle=function(a,b){var c,d,e,f,g,h,i=debounce(function(){g=f=!1},b);return function(){c=this,d=arguments;var j=function(){e=null,g&&a.apply(c,d),i()};return e||(e=setTimeout(j,b)),f?g=!0:h=a.apply(c,d),i(),f=!0,h}}}(window),function(a,b,c,d){function e(b,d){this.options=a.extend({},f,d),this.$body=a(c.body),this.$container=a(b),this.$dragitems=a(this.options.items,this.$container),this.is_dragging=!1,this.player_min_left=0+this.options.offset_left,this.init()}var f={items:".gs_w",distance:1,limit:!0,offset_left:0,autoscroll:!0,ignore_dragging:["INPUT","TEXTAREA","SELECT","BUTTON"],handle:null},g=a(b),h="ontouchstart"in b,i={start:h?"touchstart":"mousedown.draggable",move:h?"touchmove":"mousemove.draggable",end:h?"touchend":"mouseup.draggable"},j=e.prototype;j.init=function(){this.calculate_positions(),this.$container.css("position","relative"),this.disabled=!1,this.events(),a(b).bind("resize",throttle(a.proxy(this.calculate_positions,this),200))},
j.events=function(){this.$container.on("selectstart",a.proxy(this.on_select_start,this)),this.$container.on(i.start,this.options.items,a.proxy(this.drag_handler,this)),this.$body.on(i.end,a.proxy(function(a){this.is_dragging=!1,this.disabled||(this.$body.off(i.move),this.drag_start&&this.on_dragstop(a))},this))},j.get_actual_pos=function(a){return a.position()},j.get_mouse_pos=function(a){if(h){var b=a.originalEvent;a=b.touches.length?b.touches[0]:b.changedTouches[0]}return{left:a.clientX,top:a.clientY}},j.get_offset=function(a){a.preventDefault();var b=this.get_mouse_pos(a),c=Math.round(b.left-this.mouse_init_pos.left),d=Math.round(b.top-this.mouse_init_pos.top),e=Math.round(this.el_init_offset.left+c-this.baseX),f=Math.round(this.el_init_offset.top+d-this.baseY+this.scrollOffset);return this.options.limit&&(e>this.player_max_left?e=this.player_max_left:e<this.player_min_left&&(e=this.player_min_left)),{left:e,top:f,mouse_left:b.left,mouse_top:b.top}},j.manage_scroll=function(a){var b,c=g.scrollTop(),d=c,e=d+this.window_height,f=e-50,h=d+50,i=(a.mouse_left,d+a.mouse_top),j=this.doc_height-this.window_height+this.player_height;i>=f&&(b=c+30)<j&&(g.scrollTop(b),this.scrollOffset=this.scrollOffset+30),i<=h&&(b=c-30)>0&&(g.scrollTop(b),this.scrollOffset=this.scrollOffset-30)},j.calculate_positions=function(a){this.window_height=g.height()},j.drag_handler=function(b){b.target.nodeName;if(!this.disabled&&(1===b.which||h)&&!this.ignore_drag(b)){var c=this,d=!0;return this.$player=a(b.currentTarget),this.el_init_pos=this.get_actual_pos(this.$player),this.mouse_init_pos=this.get_mouse_pos(b),this.offsetY=this.mouse_init_pos.top-this.el_init_pos.top,this.$body.on(i.move,function(a){var b=c.get_mouse_pos(a),e=Math.abs(b.left-c.mouse_init_pos.left),f=Math.abs(b.top-c.mouse_init_pos.top);return(e>c.options.distance||f>c.options.distance)&&(d?(d=!1,c.on_dragstart.call(c,a),!1):(!0===c.is_dragging&&c.on_dragmove.call(c,a),!1))}),!1}},j.on_dragstart=function(b){b.preventDefault(),this.drag_start=!0,this.is_dragging=!0;var d=this.$container.offset();return this.baseX=Math.round(d.left),this.baseY=Math.round(d.top),this.doc_height=a(c).height(),"clone"===this.options.helper?(this.$helper=this.$player.clone().appendTo(this.$container).addClass("helper"),this.helper=!0):this.helper=!1,this.scrollOffset=0,this.el_init_offset=this.$player.offset(),this.player_width=this.$player.width(),this.player_height=this.$player.height(),this.player_max_left=this.$container.width()-this.player_width+this.options.offset_left,this.options.start&&this.options.start.call(this.$player,b,{helper:this.helper?this.$helper:this.$player}),!1},j.on_dragmove=function(a){var b=this.get_offset(a);this.options.autoscroll&&this.manage_scroll(b),(this.helper?this.$helper:this.$player).css({position:"absolute",left:b.left,top:b.top});var c={position:{left:b.left,top:b.top}};return this.options.drag&&this.options.drag.call(this.$player,a,c),!1},j.on_dragstop=function(a){var b=this.get_offset(a);this.drag_start=!1;var c={position:{left:b.left,top:b.top}};return this.options.stop&&this.options.stop.call(this.$player,a,c),this.helper&&this.$helper.remove(),!1},j.on_select_start=function(a){if(!this.disabled&&!this.ignore_drag(a))return!1},j.enable=function(){this.disabled=!1},j.disable=function(){this.disabled=!0},j.destroy=function(){this.disable(),a.removeData(this.$container,"drag")},j.ignore_drag=function(b){return this.options.handle?!a(b.target).is(this.options.handle):a.inArray(b.target.nodeName,this.options.ignore_dragging)>=0},a.fn.drag=function(b){return this.each(function(){a.data(this,"drag")||a.data(this,"drag",new e(this,b))})}}(jQuery,window,document),function(a,b,c,d){function e(b,c){this.options=a.extend(!0,f,c),this.$el=a(b),this.$wrapper=this.$el.parent(),this.$widgets=this.$el.children(this.options.widget_selector).addClass("gs_w"),this.widgets=[],this.$changed=a([]),this.wrapper_width=this.$wrapper.width(),this.min_widget_width=2*this.options.widget_margins[0]+this.options.widget_base_dimensions[0],this.min_widget_height=2*this.options.widget_margins[1]+this.options.widget_base_dimensions[1],this.init()}var f={namespace:"",widget_selector:"li",widget_margins:[10,10],widget_base_dimensions:[400,225],extra_rows:0,extra_cols:0,min_cols:1,min_rows:15,max_size_x:6,autogenerate_stylesheet:!0,avoid_overlapped_widgets:!0,serialize_params:function(a,b){return{col:b.col,row:b.row,size_x:b.size_x,size_y:b.size_y}},collision:{},draggable:{distance:4}};e.generated_stylesheets=[];var g=e.prototype;g.init=function(){this.generate_grid_and_stylesheet(),this.get_widgets_from_DOM(),this.set_dom_grid_height(),this.$wrapper.addClass("ready"),this.draggable(),a(b).bind("resize",throttle(a.proxy(this.recalculate_faux_grid,this),200))},g.disable=function(){return this.$wrapper.find(".player-revert").removeClass("player-revert"),this.drag_api.disable(),this},g.enable=function(){return this.drag_api.enable(),this},g.add_widget=function(b,c,d,e,f){var g;c||(c=1),d||(d=1),!e&!f?g=this.next_position(c,d):(g={col:e,row:f},this.empty_cells(e,f,c,d));var h=a(b).attr({"data-col":g.col,"data-row":g.row,"data-sizex":c,"data-sizey":d}).addClass("gs_w").appendTo(this.$el).hide();return this.$widgets=this.$widgets.add(h),this.register_widget(h),this.add_faux_rows(g.size_y),this.set_dom_grid_height(),h.fadeIn()},g.resize_widget=function(b,c,d){var e=b.coords().grid;c||(c=e.size_x),d||(d=e.size_y),c>this.cols&&(c=this.cols);var f=this.get_cells_occupied(e),g=e.size_x,h=e.size_y,i=e.col,j=i;if(i+c-1>this.cols){var k=i+(c-1)-this.cols,l=i-k;j=Math.max(1,l)}var m={col:j,row:e.row,size_x:c,size_y:d},n=this.get_cells_occupied(m),o=[];a.each(f.cols,function(b,c){-1===a.inArray(c,n.cols)&&o.push(c)});var p=[];a.each(n.cols,function(b,c){-1===a.inArray(c,f.cols)&&p.push(c)});var q=[];a.each(f.rows,function(b,c){-1===a.inArray(c,n.rows)&&q.push(c)});var r=[];if(a.each(n.rows,function(b,c){-1===a.inArray(c,f.rows)&&r.push(c)}),this.remove_from_gridmap(e),p.length){var s=[j,e.row,c,Math.min(h,d),b];this.empty_cells.apply(this,s)}if(r.length){var t=[j,e.row,c,d,b];this.empty_cells.apply(this,t)}if(e.col=j,e.size_x=c,e.size_y=d,this.add_to_gridmap(m,b),b.data("coords").update({width:c*this.options.widget_base_dimensions[0]+(c-1)*this.options.widget_margins[0]*2,height:d*this.options.widget_base_dimensions[1]+(d-1)*this.options.widget_margins[1]*2}),d>h&&this.add_faux_rows(d-h),c>g&&this.add_faux_cols(c-g),b.attr({"data-col":j,"data-sizex":c,"data-sizey":d}),o.length){var u=[o[0],e.row,o.length,Math.min(h,d),b];this.remove_empty_cells.apply(this,u)}if(q.length){var v=[j,e.row,c,d,b];this.remove_empty_cells.apply(this,v)}return b},g.empty_cells=function(b,c,d,e,f){return this.widgets_below({col:b,row:c-e,size_x:d,size_y:e}).not(f).each(a.proxy(function(b,d){var f=a(d).coords().grid;if(f.row<=c+e-1){var g=c+e-f.row;this.move_widget_down(a(d),g)}},this)),this.set_dom_grid_height(),this},g.remove_empty_cells=function(b,c,d,e,f){return this.widgets_below({col:b,row:c,size_x:d,size_y:e}).not(f).each(a.proxy(function(b,c){this.move_widget_up(a(c),e)},this)),this.set_dom_grid_height(),this},g.next_position=function(a,b){a||(a=1),b||(b=1);for(var c,d=this.gridmap,e=d.length,f=[],g=1;g<e;g++){c=d[g].length;for(var h=1;h<=c;h++){this.can_move_to({size_x:a,size_y:b},g,h)&&f.push({col:g,row:h,size_y:b,size_x:a})}}return!!f.length&&this.sort_by_row_and_col_asc(f)[0]},g.remove_widget=function(b,c,d){var e=b instanceof jQuery?b:a(b),f=e.coords().grid;a.isFunction(c)&&(d=c,c=!1),this.cells_occupied_by_placeholder={},this.$widgets=this.$widgets.not(e);var g=this.widgets_below(e);this.remove_from_gridmap(f),e.fadeOut(a.proxy(function(){e.remove(),c||g.each(a.proxy(function(b,c){this.move_widget_up(a(c),f.size_y)},this)),this.set_dom_grid_height(),d&&d.call(this,b)},this))},g.remove_all_widgets=function(b){return this.$widgets.each(a.proxy(function(a,c){this.remove_widget(c,!0,b)},this)),this},g.serialize=function(b){b||(b=this.$widgets);var c=[];return b.each(a.proxy(function(b,d){c.push(this.options.serialize_params(a(d),a(d).coords().grid))},this)),c},g.serialize_changed=function(){return this.serialize(this.$changed)},g.register_widget=function(a){var b={col:parseInt(a.attr("data-col"),10),row:parseInt(a.attr("data-row"),10),size_x:parseInt(a.attr("data-sizex"),10),size_y:parseInt(a.attr("data-sizey"),10),el:a};return this.options.avoid_overlapped_widgets&&!this.can_move_to({size_x:b.size_x,size_y:b.size_y},b.col,b.row)&&(b=this.next_position(b.size_x,b.size_y),b.el=a,a.attr({"data-col":b.col,"data-row":b.row,"data-sizex":b.size_x,"data-sizey":b.size_y})),a.data("coords",a.coords()),a.data("coords").grid=b,this.add_to_gridmap(b,a),this},g.update_widget_position=function(a,b){return this.for_each_cell_occupied(a,function(a,c){if(!this.gridmap[a])return this;this.gridmap[a][c]=b}),this},g.remove_from_gridmap=function(a){return this.update_widget_position(a,!1)},g.add_to_gridmap=function(b,c){if(this.update_widget_position(b,c||b.el),b.el){this.widgets_below(b.el).each(a.proxy(function(b,c){this.move_widget_up(a(c))},this))}},g.draggable=function(){var b=this,c=a.extend(!0,{},this.options.draggable,{offset_left:this.options.widget_margins[0],start:function(c,d){b.$widgets.filter(".player-revert").removeClass("player-revert"),b.$player=a(this),b.$helper="clone"===b.options.draggable.helper?a(d.helper):b.$player,b.helper=!b.$helper.is(b.$player),b.on_start_drag.call(b,c,d),b.$el.trigger("gridster:dragstart")},stop:function(a,c){b.on_stop_drag.call(b,a,c),b.$el.trigger("gridster:dragstop")},drag:throttle(function(a,c){b.on_drag.call(b,a,c),b.$el.trigger("gridster:drag")},60)});return this.drag_api=this.$el.drag(c).data("drag"),this},g.on_start_drag=function(b,c){this.$helper.add(this.$player).add(this.$wrapper).addClass("dragging"),this.$player.addClass("player"),this.player_grid_data=this.$player.coords().grid,this.placeholder_grid_data=a.extend({},this.player_grid_data),this.$el.css("height",this.$el.height()+this.player_grid_data.size_y*this.min_widget_height);var d=this.faux_grid,e=this.$player.data("coords").coords;this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data),this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data),this.last_cols=[],this.last_rows=[],this.collision_api=this.$helper.collision(d,this.options.collision),this.$preview_holder=a("<li />",{class:"preview-holder","data-row":this.$player.attr("data-row"),"data-col":this.$player.attr("data-col"),css:{width:e.width,height:e.height}}).appendTo(this.$el),this.options.draggable.start&&this.options.draggable.start.call(this,b,c)},g.on_drag=function(a,b){if(null===this.$player)return!1;var c={left:b.position.left+this.baseX,top:b.position.top+this.baseY};this.colliders_data=this.collision_api.get_closest_colliders(c),this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column),this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row),this.helper&&this.$player&&this.$player.css({left:b.position.left,top:b.position.top}),this.options.draggable.drag&&this.options.draggable.drag.call(this,a,b)},g.on_stop_drag=function(a,b){this.$helper.add(this.$player).add(this.$wrapper).removeClass("dragging"),b.position.left=b.position.left+this.baseX,b.position.top=b.position.top+this.baseY,this.colliders_data=this.collision_api.get_closest_colliders(b.position),this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column),this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row),this.$player.addClass("player-revert").removeClass("player").attr({"data-col":this.placeholder_grid_data.col,"data-row":this.placeholder_grid_data.row}).css({left:"",top:""}),this.$changed=this.$changed.add(this.$player),this.cells_occupied_by_player=this.get_cells_occupied(this.placeholder_grid_data),this.set_cells_player_occupies(this.placeholder_grid_data.col,this.placeholder_grid_data.row),this.$player.coords().grid.row=this.placeholder_grid_data.row,this.$player.coords().grid.col=this.placeholder_grid_data.col,this.options.draggable.stop&&this.options.draggable.stop.call(this,a,b),this.$preview_holder.remove(),this.$player=null,this.$helper=null,this.placeholder_grid_data={},this.player_grid_data={},this.cells_occupied_by_placeholder={},this.cells_occupied_by_player={},this.set_dom_grid_height()},g.on_overlapped_column_change=function(b,c){if(this.colliders_data.length){var d,e=this.get_targeted_columns(this.colliders_data[0].el.data.col),f=this.last_cols.length,g=e.length;for(d=0;d<g;d++)-1===a.inArray(e[d],this.last_cols)&&(b||a.noop).call(this,e[d]);for(d=0;d<f;d++)-1===a.inArray(this.last_cols[d],e)&&(c||a.noop).call(this,this.last_cols[d]);return this.last_cols=e,this}},g.on_overlapped_row_change=function(b,c){if(this.colliders_data.length){var d,e=this.get_targeted_rows(this.colliders_data[0].el.data.row),f=this.last_rows.length,g=e.length;for(d=0;d<g;d++)-1===a.inArray(e[d],this.last_rows)&&(b||a.noop).call(this,e[d]);for(d=0;d<f;d++)-1===a.inArray(this.last_rows[d],e)&&(c||a.noop).call(this,this.last_rows[d]);this.last_rows=e}},g.set_player=function(a,b,c){var d=this;c||this.empty_cells_player_occupies();var e=c?{col:a}:d.colliders_data[0].el.data,f=e.col,g=b||e.row;this.player_grid_data={col:f,row:g,size_y:this.player_grid_data.size_y,size_x:this.player_grid_data.size_x},this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data);var h=this.get_widgets_overlapped(this.player_grid_data),i=this.widgets_constraints(h);if(this.manage_movements(i.can_go_up,f,g),this.manage_movements(i.can_not_go_up,f,g),!h.length){var j=this.can_go_player_up(this.player_grid_data);!1!==j&&(g=j),this.set_placeholder(f,g)}return{col:f,row:g}},g.widgets_constraints=function(b){var c=a([]),d=[],e=[];return b.each(a.proxy(function(b,f){var g=a(f),h=g.coords().grid;this.can_go_widget_up(h)?(c=c.add(g),d.push(h)):e.push(h)},this)),b.not(c),{can_go_up:this.sort_by_row_asc(d),can_not_go_up:this.sort_by_row_desc(e)}},g.sort_by_row_asc=function(b){return b=b.sort(function(b,c){return b.row||(b=a(b).coords().grid,c=a(c).coords().grid),b.row>c.row?1:-1})},g.sort_by_row_and_col_asc=function(a){return a=a.sort(function(a,b){return a.row>b.row||a.row===b.row&&a.col>b.col?1:-1})},g.sort_by_col_asc=function(a){return a=a.sort(function(a,b){return a.col>b.col?1:-1})},g.sort_by_row_desc=function(a){return a=a.sort(function(a,b){return a.row+a.size_y<b.row+b.size_y?1:-1})},g.manage_movements=function(b,c,d){return a.each(b,a.proxy(function(a,b){var e=b,f=e.el,g=this.can_go_widget_up(e);if(g)this.move_widget_to(f,g),this.set_placeholder(c,g+e.size_y);else{if(!this.can_go_player_up(this.player_grid_data)){var h=d+this.player_grid_data.size_y-e.row;this.move_widget_down(f,h),this.set_placeholder(c,d)}}},this)),this},g.is_player=function(a,b){if(b&&!this.gridmap[a])return!1;var c=b?this.gridmap[a][b]:a;return c&&(c.is(this.$player)||c.is(this.$helper))},g.is_player_in=function(b,c){var d=this.cells_occupied_by_player||{};return a.inArray(b,d.cols)>=0&&a.inArray(c,d.rows)>=0},g.is_placeholder_in=function(b,c){var d=this.cells_occupied_by_placeholder||{};return this.is_placeholder_in_col(b)&&a.inArray(c,d.rows)>=0},g.is_placeholder_in_col=function(b){var c=this.cells_occupied_by_placeholder||[];return a.inArray(b,c.cols)>=0},g.is_empty=function(a,b){return void 0!==this.gridmap[a]&&void 0!==this.gridmap[a][b]&&!1===this.gridmap[a][b]},g.is_occupied=function(a,b){return!!this.gridmap[a]&&!!this.gridmap[a][b]},g.is_widget=function(a,b){var c=this.gridmap[a];return!!c&&((c=c[b])||!1)},g.is_widget_under_player=function(a,b){return!!this.is_widget(a,b)&&this.is_player_in(a,b)},g.get_widgets_under_player=function(b){b||(b=this.cells_occupied_by_player||{cols:[],rows:[]});var c=a([]);return a.each(b.cols,a.proxy(function(d,e){a.each(b.rows,a.proxy(function(a,b){this.is_widget(e,b)&&(c=c.add(this.gridmap[e][b]))},this))},this)),c},g.set_placeholder=function(b,c){var d=a.extend({},this.placeholder_grid_data),e=this.widgets_below({col:d.col,row:d.row,size_y:d.size_y,size_x:d.size_x}),f=b+d.size_x-1;f>this.cols&&(b-=f-b);var g=this.placeholder_grid_data.row<c,h=this.placeholder_grid_data.col!==b;this.placeholder_grid_data.col=b,this.placeholder_grid_data.row=c,this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data),this.$preview_holder.attr({"data-row":c,"data-col":b}),(g||h)&&e.each(a.proxy(function(c,e){this.move_widget_up(a(e),this.placeholder_grid_data.col-b+d.size_y)},this));var i=this.get_widgets_under_player(this.cells_occupied_by_placeholder);i.length&&i.each(a.proxy(function(b,e){var f=a(e);this.move_widget_down(f,c+d.size_y-f.data("coords").grid.row)},this))},g.can_go_player_up=function(a){var b=a.row+a.size_y-1,c=!0,d=[],e=1e4,f=this.get_widgets_under_player();return this.for_each_column_occupied(a,function(a){var g=this.gridmap[a],h=b+1;for(d[a]=[];--h>0&&(this.is_empty(a,h)||this.is_player(a,h)||this.is_widget(a,h)&&g[h].is(f));)d[a].push(h),e=h<e?h:e;if(0===d[a].length)return c=!1,!0;d[a].sort()}),!!c&&this.get_valid_rows(a,d,e)},g.can_go_widget_up=function(a){var b=a.row+a.size_y-1,c=!0,d=[],e=1e4;return this.for_each_column_occupied(a,function(f){var g=this.gridmap[f];d[f]=[];for(var h=b+1;--h>0&&(!this.is_widget(f,h)||this.is_player_in(f,h)||g[h].is(a.el));)!this.is_player(f,h)&&!this.is_placeholder_in(f,h)&&!this.is_player_in(f,h)&&d[f].push(h),h<e&&(e=h);if(0===d[f].length)return c=!1,!0;d[f].sort()}),!!c&&this.get_valid_rows(a,d,e)},g.get_valid_rows=function(b,c,d){for(var e=b.row,f=b.row+b.size_y-1,g=b.size_y,h=d-1,i=[];++h<=f;){var j=!0;if(a.each(c,function(b,c){a.isArray(c)&&-1===a.inArray(h,c)&&(j=!1)}),!0===j&&(i.push(h),i.length===g))break}var k=!1;return 1===g?i[0]!==e&&(k=i[0]||!1):i[0]!==e&&(k=this.get_consecutive_numbers_index(i,g)),k},g.get_consecutive_numbers_index=function(a,b){for(var c=a.length,d=[],e=!0,f=-1,g=0;g<c;g++){if(e||a[g]===f+1){if(d.push(g),d.length===b)break;e=!1}else d=[],e=!0;f=a[g]}return d.length>=b&&a[d[0]]},g.get_widgets_overlapped=function(){var b=a([]),c=[],d=this.cells_occupied_by_player.rows.slice(0);return d.reverse(),a.each(this.cells_occupied_by_player.cols,a.proxy(function(e,f){a.each(d,a.proxy(function(d,e){if(!this.gridmap[f])return!0;var g=this.gridmap[f][e];this.is_occupied(f,e)&&!this.is_player(g)&&-1===a.inArray(g,c)&&(b=b.add(g),c.push(g))},this))},this)),b},g.on_start_overlapping_column=function(a){this.set_player(a,!1)},g.on_start_overlapping_row=function(a){this.set_player(!1,a)},g.on_stop_overlapping_column=function(a){this.set_player(a,!1);var b=this;this.for_each_widget_below(a,this.cells_occupied_by_player.rows[0],function(a,c){b.move_widget_up(this,b.player_grid_data.size_y)})},g.on_stop_overlapping_row=function(a){this.set_player(!1,a);for(var b=this,c=this.cells_occupied_by_player.cols,d=0,e=c.length;d<e;d++)this.for_each_widget_below(c[d],a,function(a,c){b.move_widget_up(this,b.player_grid_data.size_y)})},g.move_widget_to=function(b,c){var d=this,e=b.coords().grid,f=(e.row,this.widgets_below(b));return!1!==this.can_move_to(e,e.col,c,b)&&(this.remove_from_gridmap(e),e.row=c,this.add_to_gridmap(e),b.attr("data-row",c),this.$changed=this.$changed.add(b),f.each(function(b,c){var e=a(c),f=e.coords().grid,g=d.can_go_widget_up(f);g&&g!==f.row&&d.move_widget_to(e,g)}),this)},g.move_widget_up=function(b,c){var d=b.coords().grid,e=d.row,f=[];if(c||(c=1),!this.can_go_up(b))return!1;this.for_each_column_occupied(d,function(d){if(-1===a.inArray(b,f)){var g=b.coords().grid,h=e-c;if(!(h=this.can_go_up_to_row(g,d,h)))return!0;var i=this.widgets_below(b);this.remove_from_gridmap(g),g.row=h,this.add_to_gridmap(g),b.attr("data-row",g.row),this.$changed=this.$changed.add(b),f.push(b),i.each(a.proxy(function(b,d){this.move_widget_up(a(d),c)},this))}})},g.move_widget_down=function(b,c){var d=b.coords().grid,e=d.row,f=[],g=c;if(!b)return!1;if(-1===a.inArray(b,f)){var h=b.coords().grid,i=e+c,j=this.widgets_below(b);this.remove_from_gridmap(h),j.each(a.proxy(function(b,c){var d=a(c),e=d.coords().grid,f=this.displacement_diff(e,h,g);f>0&&this.move_widget_down(d,f)},this)),h.row=i,this.update_widget_position(h,b),b.attr("data-row",h.row),this.$changed=this.$changed.add(b),f.push(b)}},g.can_go_up_to_row=function(b,c,d){var e,f=this.gridmap,g=!0,h=[],i=b.row;if(this.for_each_column_occupied(b,function(a){f[a];for(h[a]=[],e=i;e--&&this.is_empty(a,e)&&!this.is_placeholder_in(a,e);)h[a].push(e);if(!h[a].length)return g=!1,!0}),!g)return!1;for(e=d,e=1;e<i;e++){for(var j=!0,k=0,l=h.length;k<l;k++)h[k]&&-1===a.inArray(e,h[k])&&(j=!1);if(!0===j){g=e;break}}return g},g.displacement_diff=function(a,b,c){var d=a.row,e=[],f=b.row+b.size_y;return this.for_each_column_occupied(a,function(a){for(var b=0,c=f;c<d;c++)this.is_empty(a,c)&&(b+=1);e.push(b)}),c-=Math.max.apply(Math,e),c>0?c:0},g.widgets_below=function(b){var c=a.isPlainObject(b)?b:b.coords().grid,d=this,e=(this.gridmap,c.row+c.size_y-1),f=a([]);return this.for_each_column_occupied(c,function(b){d.for_each_widget_below(b,e,function(b,c){if(!d.is_player(this)&&-1===a.inArray(this,f))return f=f.add(this),!0})}),this.sort_by_row_asc(f)},g.set_cells_player_occupies=function(a,b){return this.remove_from_gridmap(this.placeholder_grid_data),this.placeholder_grid_data.col=a,this.placeholder_grid_data.row=b,this.add_to_gridmap(this.placeholder_grid_data,this.$player),this},g.empty_cells_player_occupies=function(){return this.remove_from_gridmap(this.placeholder_grid_data),this},g.can_go_up=function(a){var b=a.coords().grid,c=b.row,d=c-1,e=(this.gridmap,!0);return 1!==c&&(this.for_each_column_occupied(b,function(a){this.is_widget(a,d);if(this.is_occupied(a,d)||this.is_player(a,d)||this.is_placeholder_in(a,d)||this.is_player_in(a,d))return e=!1,!0}),e)},g.can_move_to=function(a,b,c,d){var e=(this.gridmap,a.el),f={size_y:a.size_y,size_x:a.size_x,col:b,row:c},g=!0;return!(b+a.size_x-1>this.cols)&&!(d&&d<c+a.size_y-1)&&(this.for_each_cell_occupied(f,function(b,c){var d=this.is_widget(b,c);d&&(!a.el||d.is(e))&&(g=!1)}),g)},g.get_targeted_columns=function(a){for(var b=(a||this.player_grid_data.col)+(this.player_grid_data.size_x-1),c=[],d=a;d<=b;d++)c.push(d);return c},g.get_targeted_rows=function(a){for(var b=(a||this.player_grid_data.row)+(this.player_grid_data.size_y-1),c=[],d=a;d<=b;d++)c.push(d);return c},g.get_cells_occupied=function(a){var b,c={cols:[],rows:[]};for(arguments[1]instanceof jQuery&&(a=arguments[1].coords().grid),b=0;b<a.size_x;b++){var d=a.col+b;c.cols.push(d)}for(b=0;b<a.size_y;b++){var e=a.row+b;c.rows.push(e)}return c},g.for_each_cell_occupied=function(a,b){return this.for_each_column_occupied(a,function(c){this.for_each_row_occupied(a,function(a){b.call(this,c,a)})}),this},g.for_each_column_occupied=function(a,b){for(var c=0;c<a.size_x;c++){var d=a.col+c;b.call(this,d,a)}},g.for_each_row_occupied=function(a,b){for(var c=0;c<a.size_y;c++){var d=a.row+c;b.call(this,d,a)}},g._traversing_widgets=function(b,c,d,e,f){var g=this.gridmap;if(g[d]){var h,i,j=b+"/"+c;if(arguments[2]instanceof jQuery){var k=arguments[2].coords().grid;d=k.col,e=k.row,f=arguments[3]}var l=[],m=e,n={"for_each/above":function(){for(;m--&&!(m>0&&this.is_widget(d,m)&&-1===a.inArray(g[d][m],l)&&(h=f.call(g[d][m],d,m),l.push(g[d][m]),h)););},"for_each/below":function(){for(m=e+1,i=g[d].length;m<i&&(!this.is_widget(d,m)||-1!==a.inArray(g[d][m],l)||(h=f.call(g[d][m],d,m),l.push(g[d][m]),!h));m++);}};n[j]&&n[j].call(this)}},g.for_each_widget_above=function(a,b,c){return this._traversing_widgets("for_each","above",a,b,c),this},g.for_each_widget_below=function(a,b,c){return this._traversing_widgets("for_each","below",a,b,c),this},g.get_highest_occupied_cell=function(){for(var a,b=this.gridmap,c=[],d=[],e=b.length-1;e>=1;e--)for(a=b[e].length-1;a>=1;a--)if(this.is_widget(e,a)){c.push(a),d[a]=e;break}var f=Math.max.apply(Math,c);return this.highest_occupied_cell={col:d[f],row:f},this.highest_occupied_cell},g.get_widgets_from=function(b,c){var d=(this.gridmap,a());return b&&(d=d.add(this.$widgets.filter(function(){var c=a(this).attr("data-col");return c===b||c>b}))),c&&(d=d.add(this.$widgets.filter(function(){var b=a(this).attr("data-row");return b===c||b>c}))),d},g.set_dom_grid_height=function(){var a=this.get_highest_occupied_cell().row;return this.$el.css("height",a*this.min_widget_height),this},g.generate_stylesheet=function(b){var c,d="",f=this.options.max_size_x;b||(b={}),b.cols||(b.cols=this.cols),b.rows||(b.rows=this.rows),b.namespace||(b.namespace=this.options.namespace),b.widget_base_dimensions||(b.widget_base_dimensions=this.options.widget_base_dimensions),b.widget_margins||(b.widget_margins=this.options.widget_margins),b.min_widget_width=2*b.widget_margins[0]+b.widget_base_dimensions[0],b.min_widget_height=2*b.widget_margins[1]+b.widget_base_dimensions[1];var g=a.param(b);if(a.inArray(g,e.generated_stylesheets)>=0)return!1;for(e.generated_stylesheets.push(g),c=b.cols;c>=0;c--)d+=b.namespace+' [data-col="'+(c+1)+'"] { left:'+(c*b.widget_base_dimensions[0]+c*b.widget_margins[0]+(c+1)*b.widget_margins[0])+"px;} ";for(c=b.rows;c>=0;c--)d+=b.namespace+' [data-row="'+(c+1)+'"] { top:'+(c*b.widget_base_dimensions[1]+c*b.widget_margins[1]+(c+1)*b.widget_margins[1])+"px;} ";for(var h=1;h<=b.rows;h++)d+=b.namespace+' [data-sizey="'+h+'"] { height:'+(h*b.widget_base_dimensions[1]+(h-1)*b.widget_margins[1]*2)+"px;}";for(var i=1;i<=f;i++)d+=b.namespace+' [data-sizex="'+i+'"] { width:'+(i*b.widget_base_dimensions[0]+(i-1)*b.widget_margins[0]*2)+"px;}";return this.add_style_tag(d)},g.add_style_tag=function(a){var b=c,d=b.createElement("style");return b.getElementsByTagName("head")[0].appendChild(d),d.setAttribute("type","text/css"),d.styleSheet?d.styleSheet.cssText=a:d.appendChild(c.createTextNode(a)),this},g.generate_faux_grid=function(a,b){this.faux_grid=[],this.gridmap=[];var c,d;for(c=b;c>0;c--)for(this.gridmap[c]=[],d=a;d>0;d--)this.add_faux_cell(d,c);return this},g.add_faux_cell=function(b,c){var d=a({left:this.baseX+(c-1)*this.min_widget_width,top:this.baseY+(b-1)*this.min_widget_height,width:this.min_widget_width,height:this.min_widget_height,col:c,row:b,original_col:c,original_row:b}).coords();return a.isArray(this.gridmap[c])||(this.gridmap[c]=[]),this.gridmap[c][b]=!1,this.faux_grid.push(d),this},g.add_faux_rows=function(a){for(var b=this.rows,c=b+(a||1),d=c;d>b;d--)for(var e=this.cols;e>=1;e--)this.add_faux_cell(d,e);return this.rows=c,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this},g.add_faux_cols=function(a){for(var b=this.cols,c=b+(a||1),d=b;d<c;d++)for(var e=this.rows;e>=1;e--)this.add_faux_cell(e,d);return this.cols=c,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this},g.recalculate_faux_grid=function(){var c=this.$wrapper.width();return this.baseX=(a(b).width()-c)/2,this.baseY=this.$wrapper.offset().top,a.each(this.faux_grid,a.proxy(function(a,b){this.faux_grid[a]=b.update({left:this.baseX+(b.data.col-1)*this.min_widget_width,top:this.baseY+(b.data.row-1)*this.min_widget_height})},this)),this},g.get_widgets_from_DOM=function(){return this.$widgets.each(a.proxy(function(b,c){this.register_widget(a(c))},this)),this},g.generate_grid_and_stylesheet=function(){var c=this.$wrapper.width(),d=(this.$wrapper.height(),Math.floor(c/this.min_widget_width)+this.options.extra_cols),e=this.$widgets.map(function(){return a(this).attr("data-col")});e=Array.prototype.slice.call(e,0),e.length||(e=[0]);var f=Math.max.apply(Math,e),g=this.options.extra_rows;return this.$widgets.each(function(b,c){g+=+a(c).attr("data-sizey")}),this.cols=Math.max(f,d,this.options.min_cols),this.rows=Math.max(g,this.options.min_rows),this.baseX=(a(b).width()-c)/2,this.baseY=this.$wrapper.offset().top,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this.generate_faux_grid(this.rows,this.cols)},a.fn.gridster=function(b){return this.each(function(){a(this).data("gridster")||a(this).data("gridster",new e(this,b))})},a.Gridster=g}(jQuery,window,document),function(X,l,n){var L=function(h){var j=function(e){function o(a,b){var c=j.defaults.columns,d=a.aoColumns.length,c=h.extend({},j.models.oColumn,c,{sSortingClass:a.oClasses.sSortable,sSortingClassJUI:a.oClasses.sSortJUI,nTh:b||l.createElement("th"),sTitle:c.sTitle?c.sTitle:b?b.innerHTML:"",aDataSort:c.aDataSort?c.aDataSort:[d],mData:c.mData?c.oDefaults:d});a.aoColumns.push(c),a.aoPreSearchCols[d]===n||null===a.aoPreSearchCols[d]?a.aoPreSearchCols[d]=h.extend({},j.models.oSearch):(c=a.aoPreSearchCols[d],c.bRegex===n&&(c.bRegex=!0),c.bSmart===n&&(c.bSmart=!0),c.bCaseInsensitive===n&&(c.bCaseInsensitive=!0)),m(a,d,null)}function m(a,b,c){var d=a.aoColumns[b];c!==n&&null!==c&&(c.mDataProp&&!c.mData&&(c.mData=c.mDataProp),c.sType!==n&&(d.sType=c.sType,d._bAutoType=!1),h.extend(d,c),p(d,c,"sWidth","sWidthOrig"),c.iDataSort!==n&&(d.aDataSort=[c.iDataSort]),p(d,c,"aDataSort"));var e=d.mRender?Q(d.mRender):null,f=Q(d.mData);d.fnGetData=function(a,b){var c=f(a,b);return d.mRender&&b&&""!==b?e(c,b,a):c},d.fnSetData=L(d.mData),a.oFeatures.bSort||(d.bSortable=!1),!d.bSortable||-1==h.inArray("asc",d.asSorting)&&-1==h.inArray("desc",d.asSorting)?(d.sSortingClass=a.oClasses.sSortableNone,d.sSortingClassJUI=""):-1==h.inArray("asc",d.asSorting)&&-1==h.inArray("desc",d.asSorting)?(d.sSortingClass=a.oClasses.sSortable,d.sSortingClassJUI=a.oClasses.sSortJUI):-1!=h.inArray("asc",d.asSorting)&&-1==h.inArray("desc",d.asSorting)?(d.sSortingClass=a.oClasses.sSortableAsc,d.sSortingClassJUI=a.oClasses.sSortJUIAscAllowed):-1==h.inArray("asc",d.asSorting)&&-1!=h.inArray("desc",d.asSorting)&&(d.sSortingClass=a.oClasses.sSortableDesc,d.sSortingClassJUI=a.oClasses.sSortJUIDescAllowed)}function k(a){if(!1===a.oFeatures.bAutoWidth)return!1;da(a);for(var b=0,c=a.aoColumns.length;b<c;b++)a.aoColumns[b].nTh.style.width=a.aoColumns[b].sWidth}function G(a,b){var c=r(a,"bVisible");return"number"==typeof c[b]?c[b]:null}function R(a,b){var c=r(a,"bVisible"),c=h.inArray(b,c);return-1!==c?c:null}function t(a){return r(a,"bVisible").length}function r(a,b){var c=[];return h.map(a.aoColumns,function(a,d){a[b]&&c.push(d)}),c}function B(a){for(var b=j.ext.aTypes,c=b.length,d=0;d<c;d++){var e=b[d](a);if(null!==e)return e}return"string"}function u(a,b){for(var c=b.split(","),d=[],e=0,f=a.aoColumns.length;e<f;e++)for(var g=0;g<f;g++)if(a.aoColumns[e].sName==c[g]){d.push(g);break}return d}function M(a){for(var b="",c=0,d=a.aoColumns.length;c<d;c++)b+=a.aoColumns[c].sName+",";return b.length==d?"":b.slice(0,-1)}function ta(a,b,c,d){var e,f,g,i,j;if(b)for(e=b.length-1;0<=e;e--){var k=b[e].aTargets;for(h.isArray(k)||D(a,1,"aTargets must be an array of targets, not a "+typeof k),f=0,g=k.length;f<g;f++)if("number"==typeof k[f]&&0<=k[f]){for(;a.aoColumns.length<=k[f];)o(a);d(k[f],b[e])}else if("number"==typeof k[f]&&0>k[f])d(a.aoColumns.length+k[f],b[e]);else if("string"==typeof k[f])for(i=0,j=a.aoColumns.length;i<j;i++)("_all"==k[f]||h(a.aoColumns[i].nTh).hasClass(k[f]))&&d(i,b[e])}if(c)for(e=0,a=c.length;e<a;e++)d(e,c[e])}function H(a,b){var c;c=h.isArray(b)?b.slice():h.extend(!0,{},b);var d=a.aoData.length,e=h.extend(!0,{},j.models.oRow);e._aData=c,a.aoData.push(e);for(var f,e=0,g=a.aoColumns.length;e<g;e++)c=a.aoColumns[e],"function"==typeof c.fnRender&&c.bUseRendered&&null!==c.mData?F(a,d,e,S(a,d,e)):F(a,d,e,v(a,d,e)),c._bAutoType&&"string"!=c.sType&&null!==(f=v(a,d,e,"type"))&&""!==f&&(f=B(f),null===c.sType?c.sType=f:c.sType!=f&&"html"!=c.sType&&(c.sType="string"));return a.aiDisplayMaster.push(d),a.oFeatures.bDeferRender||ea(a,d),d}function ua(a){var b,c,d,e,f,g,i;if(a.bDeferLoading||null===a.sAjaxSource)for(b=a.nTBody.firstChild;b;){if("TR"==b.nodeName.toUpperCase())for(c=a.aoData.length,b._DT_RowIndex=c,a.aoData.push(h.extend(!0,{},j.models.oRow,{nTr:b})),a.aiDisplayMaster.push(c),f=b.firstChild,d=0;f;)g=f.nodeName.toUpperCase(),"TD"!=g&&"TH"!=g||(F(a,c,d,h.trim(f.innerHTML)),d++),
f=f.nextSibling;b=b.nextSibling}for(e=T(a),d=[],b=0,c=e.length;b<c;b++)for(f=e[b].firstChild;f;)g=f.nodeName.toUpperCase(),("TD"==g||"TH"==g)&&d.push(f),f=f.nextSibling;for(c=0,e=a.aoColumns.length;c<e;c++){i=a.aoColumns[c],null===i.sTitle&&(i.sTitle=i.nTh.innerHTML);var k,l,m=i._bAutoType,n="function"==typeof i.fnRender,o=null!==i.sClass,p=i.bVisible;if(m||n||o||!p)for(g=0,b=a.aoData.length;g<b;g++)f=a.aoData[g],k=d[g*e+c],m&&"string"!=i.sType&&""!==(l=v(a,g,c,"type"))&&(l=B(l),null===i.sType?i.sType=l:i.sType!=l&&"html"!=i.sType&&(i.sType="string")),i.mRender?k.innerHTML=v(a,g,c,"display"):i.mData!==c&&(k.innerHTML=v(a,g,c,"display")),n&&(l=S(a,g,c),k.innerHTML=l,i.bUseRendered&&F(a,g,c,l)),o&&(k.className+=" "+i.sClass),p?f._anHidden[c]=null:(f._anHidden[c]=k,k.parentNode.removeChild(k)),i.fnCreatedCell&&i.fnCreatedCell.call(a.oInstance,k,v(a,g,c,"display"),f._aData,g,c)}if(0!==a.aoRowCreatedCallback.length)for(b=0,c=a.aoData.length;b<c;b++)f=a.aoData[b],A(a,"aoRowCreatedCallback",null,[f.nTr,f._aData,b])}function I(a,b){return b._DT_RowIndex!==n?b._DT_RowIndex:null}function fa(a,b,c){for(var b=J(a,b),d=0,a=a.aoColumns.length;d<a;d++)if(b[d]===c)return d;return-1}function Y(a,b,c,d){for(var e=[],f=0,g=d.length;f<g;f++)e.push(v(a,b,d[f],c));return e}function v(a,b,c,d){var e=a.aoColumns[c];if((c=e.fnGetData(a.aoData[b]._aData,d))===n)return a.iDrawError!=a.iDraw&&null===e.sDefaultContent&&(D(a,0,"Requested unknown parameter "+("function"==typeof e.mData?"{mData function}":"'"+e.mData+"'")+" from the data source for row "+b),a.iDrawError=a.iDraw),e.sDefaultContent;if(null===c&&null!==e.sDefaultContent)c=e.sDefaultContent;else if("function"==typeof c)return c();return"display"==d&&null===c?"":c}function F(a,b,c,d){a.aoColumns[c].fnSetData(a.aoData[b]._aData,d)}function Q(a){if(null===a)return function(){return null};if("function"==typeof a)return function(b,c,d){return a(b,c,d)};if("string"==typeof a&&(-1!==a.indexOf(".")||-1!==a.indexOf("["))){var b=function(a,c,d){var e,f=d.split(".");if(""!==d){var g=0;for(e=f.length;g<e;g++){if(d=f[g].match(U)){f[g]=f[g].replace(U,""),""!==f[g]&&(a=a[f[g]]),e=[],f.splice(0,g+1);for(var f=f.join("."),g=0,h=a.length;g<h;g++)e.push(b(a[g],c,f));a=d[0].substring(1,d[0].length-1),a=""===a?e:e.join(a);break}if(null===a||a[f[g]]===n)return n;a=a[f[g]]}}return a};return function(c,d){return b(c,d,a)}}return function(b){return b[a]}}function L(a){if(null===a)return function(){};if("function"==typeof a)return function(b,c){a(b,"set",c)};if("string"==typeof a&&(-1!==a.indexOf(".")||-1!==a.indexOf("["))){var b=function(a,c,d){var e,f,d=d.split("."),g=0;for(f=d.length-1;g<f;g++){if(e=d[g].match(U)){d[g]=d[g].replace(U,""),a[d[g]]=[],e=d.slice(),e.splice(0,g+1),f=e.join(".");for(var h=0,i=c.length;h<i;h++)e={},b(e,c[h],f),a[d[g]].push(e);return}null!==a[d[g]]&&a[d[g]]!==n||(a[d[g]]={}),a=a[d[g]]}a[d[d.length-1].replace(U,"")]=c};return function(c,d){return b(c,d,a)}}return function(b,c){b[a]=c}}function Z(a){for(var b=[],c=a.aoData.length,d=0;d<c;d++)b.push(a.aoData[d]._aData);return b}function ga(a){a.aoData.splice(0,a.aoData.length),a.aiDisplayMaster.splice(0,a.aiDisplayMaster.length),a.aiDisplay.splice(0,a.aiDisplay.length),y(a)}function ha(a,b){for(var c=-1,d=0,e=a.length;d<e;d++)a[d]==b?c=d:a[d]>b&&a[d]--;-1!=c&&a.splice(c,1)}function S(a,b,c){var d=a.aoColumns[c];return d.fnRender({iDataRow:b,iDataColumn:c,oSettings:a,aData:a.aoData[b]._aData,mDataProp:d.mData},v(a,b,c,"display"))}function ea(a,b){var c,d=a.aoData[b];if(null===d.nTr){d.nTr=l.createElement("tr"),d.nTr._DT_RowIndex=b,d._aData.DT_RowId&&(d.nTr.id=d._aData.DT_RowId),d._aData.DT_RowClass&&(d.nTr.className=d._aData.DT_RowClass);for(var e=0,f=a.aoColumns.length;e<f;e++){var g=a.aoColumns[e];c=l.createElement(g.sCellType),c.innerHTML="function"!=typeof g.fnRender||g.bUseRendered&&null!==g.mData?v(a,b,e,"display"):S(a,b,e),null!==g.sClass&&(c.className=g.sClass),g.bVisible?(d.nTr.appendChild(c),d._anHidden[e]=null):d._anHidden[e]=c,g.fnCreatedCell&&g.fnCreatedCell.call(a.oInstance,c,v(a,b,e,"display"),d._aData,b,e)}A(a,"aoRowCreatedCallback",null,[d.nTr,d._aData,b])}}function va(a){var b,c,d;if(0!==h("th, td",a.nTHead).length)for(b=0,d=a.aoColumns.length;b<d;b++)c=a.aoColumns[b].nTh,c.setAttribute("role","columnheader"),a.aoColumns[b].bSortable&&(c.setAttribute("tabindex",a.iTabIndex),c.setAttribute("aria-controls",a.sTableId)),null!==a.aoColumns[b].sClass&&h(c).addClass(a.aoColumns[b].sClass),a.aoColumns[b].sTitle!=c.innerHTML&&(c.innerHTML=a.aoColumns[b].sTitle);else{var e=l.createElement("tr");for(b=0,d=a.aoColumns.length;b<d;b++)c=a.aoColumns[b].nTh,c.innerHTML=a.aoColumns[b].sTitle,c.setAttribute("tabindex","0"),null!==a.aoColumns[b].sClass&&h(c).addClass(a.aoColumns[b].sClass),e.appendChild(c);h(a.nTHead).html("")[0].appendChild(e),V(a.aoHeader,a.nTHead)}if(h(a.nTHead).children("tr").attr("role","row"),a.bJUI)for(b=0,d=a.aoColumns.length;b<d;b++){c=a.aoColumns[b].nTh,e=l.createElement("div"),e.className=a.oClasses.sSortJUIWrapper,h(c).contents().appendTo(e);var f=l.createElement("span");f.className=a.oClasses.sSortIcon,e.appendChild(f),c.appendChild(e)}if(a.oFeatures.bSort)for(b=0;b<a.aoColumns.length;b++)!1!==a.aoColumns[b].bSortable?ia(a,a.aoColumns[b].nTh,b):h(a.aoColumns[b].nTh).addClass(a.oClasses.sSortableNone);if(""!==a.oClasses.sFooterTH&&h(a.nTFoot).children("tr").children("th").addClass(a.oClasses.sFooterTH),null!==a.nTFoot)for(c=N(a,null,a.aoFooter),b=0,d=a.aoColumns.length;b<d;b++)c[b]&&(a.aoColumns[b].nTf=c[b],a.aoColumns[b].sClass&&h(c[b]).addClass(a.aoColumns[b].sClass))}function W(a,b,c){var d,e,f,g,h=[],i=[],j=a.aoColumns.length;for(c===n&&(c=!1),d=0,e=b.length;d<e;d++){for(h[d]=b[d].slice(),h[d].nTr=b[d].nTr,f=j-1;0<=f;f--)!a.aoColumns[f].bVisible&&!c&&h[d].splice(f,1);i.push([])}for(d=0,e=h.length;d<e;d++){if(a=h[d].nTr)for(;f=a.firstChild;)a.removeChild(f);for(f=0,b=h[d].length;f<b;f++)if(g=j=1,i[d][f]===n){for(a.appendChild(h[d][f].cell),i[d][f]=1;h[d+j]!==n&&h[d][f].cell==h[d+j][f].cell;)i[d+j][f]=1,j++;for(;h[d][f+g]!==n&&h[d][f].cell==h[d][f+g].cell;){for(c=0;c<j;c++)i[d+c][f+g]=1;g++}h[d][f].cell.rowSpan=j,h[d][f].cell.colSpan=g}}}function x(a){var b=A(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==h.inArray(!1,b))E(a,!1);else{var c,d,b=[],e=0,f=a.asStripeClasses.length;if(c=a.aoOpenRows.length,a.bDrawing=!0,a.iInitDisplayStart!==n&&-1!=a.iInitDisplayStart&&(a._iDisplayStart=a.oFeatures.bServerSide?a.iInitDisplayStart:a.iInitDisplayStart>=a.fnRecordsDisplay()?0:a.iInitDisplayStart,a.iInitDisplayStart=-1,y(a)),a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++;else if(a.oFeatures.bServerSide){if(!a.bDestroying&&!wa(a))return}else a.iDraw++;if(0!==a.aiDisplay.length){var g=a._iDisplayStart;for(d=a._iDisplayEnd,a.oFeatures.bServerSide&&(g=0,d=a.aoData.length);g<d;g++){var i=a.aoData[a.aiDisplay[g]];null===i.nTr&&ea(a,a.aiDisplay[g]);var j=i.nTr;if(0!==f){var k=a.asStripeClasses[e%f];i._sRowStripe!=k&&(h(j).removeClass(i._sRowStripe).addClass(k),i._sRowStripe=k)}if(A(a,"aoRowCallback",null,[j,a.aoData[a.aiDisplay[g]]._aData,e,g]),b.push(j),e++,0!==c)for(i=0;i<c;i++)if(j==a.aoOpenRows[i].nParent){b.push(a.aoOpenRows[i].nTr);break}}}else b[0]=l.createElement("tr"),a.asStripeClasses[0]&&(b[0].className=a.asStripeClasses[0]),c=a.oLanguage,f=c.sZeroRecords,1!=a.iDraw||null===a.sAjaxSource||a.oFeatures.bServerSide?c.sEmptyTable&&0===a.fnRecordsTotal()&&(f=c.sEmptyTable):f=c.sLoadingRecords,c=l.createElement("td"),c.setAttribute("valign","top"),c.colSpan=t(a),c.className=a.oClasses.sRowEmpty,c.innerHTML=ja(a,f),b[e].appendChild(c);if(A(a,"aoHeaderCallback","header",[h(a.nTHead).children("tr")[0],Z(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay]),A(a,"aoFooterCallback","footer",[h(a.nTFoot).children("tr")[0],Z(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay]),e=l.createDocumentFragment(),c=l.createDocumentFragment(),a.nTBody){if(f=a.nTBody.parentNode,c.appendChild(a.nTBody),!a.oScroll.bInfinite||!a._bInitComplete||a.bSorted||a.bFiltered)for(;c=a.nTBody.firstChild;)a.nTBody.removeChild(c);for(c=0,d=b.length;c<d;c++)e.appendChild(b[c]);a.nTBody.appendChild(e),null!==f&&f.appendChild(a.nTBody)}A(a,"aoDrawCallback","draw",[a]),a.bSorted=!1,a.bFiltered=!1,a.bDrawing=!1,a.oFeatures.bServerSide&&(E(a,!1),a._bInitComplete||$(a))}}function aa(a){a.oFeatures.bSort?O(a,a.oPreviousSearch):a.oFeatures.bFilter?K(a,a.oPreviousSearch):(y(a),x(a))}function xa(a){var b=h("<div></div>")[0];a.nTable.parentNode.insertBefore(b,a.nTable),a.nTableWrapper=h('<div id="'+a.sTableId+'_wrapper" class="'+a.oClasses.sWrapper+'" role="grid"></div>')[0],a.nTableReinsertBefore=a.nTable.nextSibling;for(var c,d,e,f,g,i,k,l=a.nTableWrapper,m=a.sDom.split(""),n=0;n<m.length;n++){if(d=0,"<"==(e=m[n])){if(f=h("<div></div>")[0],"'"==(g=m[n+1])||'"'==g){for(i="",k=2;m[n+k]!=g;)i+=m[n+k],k++;"H"==i?i=a.oClasses.sJUIHeader:"F"==i&&(i=a.oClasses.sJUIFooter),-1!=i.indexOf(".")?(g=i.split("."),f.id=g[0].substr(1,g[0].length-1),f.className=g[1]):"#"==i.charAt(0)?f.id=i.substr(1,i.length-1):f.className=i,n+=k}l.appendChild(f),l=f}else if(">"==e)l=l.parentNode;else if("l"==e&&a.oFeatures.bPaginate&&a.oFeatures.bLengthChange)c=ya(a),d=1;else if("f"==e&&a.oFeatures.bFilter)c=za(a),d=1;else if("r"==e&&a.oFeatures.bProcessing)c=Aa(a),d=1;else if("t"==e)c=Ba(a),d=1;else if("i"==e&&a.oFeatures.bInfo)c=Ca(a),d=1;else if("p"==e&&a.oFeatures.bPaginate)c=Da(a),d=1;else if(0!==j.ext.aoFeatures.length)for(f=j.ext.aoFeatures,k=0,g=f.length;k<g;k++)if(e==f[k].cFeature){(c=f[k].fnInit(a))&&(d=1);break}1==d&&null!==c&&("object"!=typeof a.aanFeatures[e]&&(a.aanFeatures[e]=[]),a.aanFeatures[e].push(c),l.appendChild(c))}b.parentNode.replaceChild(a.nTableWrapper,b)}function V(a,b){var c,d,e,f,g,i,j,k,l,m,n=h(b).children("tr");for(a.splice(0,a.length),e=0,i=n.length;e<i;e++)a.push([]);for(e=0,i=n.length;e<i;e++)for(c=n[e],d=c.firstChild;d;){if("TD"==d.nodeName.toUpperCase()||"TH"==d.nodeName.toUpperCase()){for(k=1*d.getAttribute("colspan"),l=1*d.getAttribute("rowspan"),k=k&&0!==k&&1!==k?k:1,l=l&&0!==l&&1!==l?l:1,f=0,g=a[e];g[f];)f++;for(j=f,m=1===k,g=0;g<k;g++)for(f=0;f<l;f++)a[e+f][j+g]={cell:d,unique:m},a[e+f].nTr=c}d=d.nextSibling}}function N(a,b,c){var d=[];c||(c=a.aoHeader,b&&(c=[],V(c,b)));for(var b=0,e=c.length;b<e;b++)for(var f=0,g=c[b].length;f<g;f++)!c[b][f].unique||d[f]&&a.bSortCellsTop||(d[f]=c[b][f].cell);return d}function wa(a){if(a.bAjaxDataGet){a.iDraw++,E(a,!0);var b=Ea(a);return ka(a,b),a.fnServerData.call(a.oInstance,a.sAjaxSource,b,function(b){Fa(a,b)},a),!1}return!0}function Ea(a){var b,c,d,e,f=a.aoColumns.length,g=[];for(g.push({name:"sEcho",value:a.iDraw}),g.push({name:"iColumns",value:f}),g.push({name:"sColumns",value:M(a)}),g.push({name:"iDisplayStart",value:a._iDisplayStart}),g.push({name:"iDisplayLength",value:!1!==a.oFeatures.bPaginate?a._iDisplayLength:-1}),d=0;d<f;d++)b=a.aoColumns[d].mData,g.push({name:"mDataProp_"+d,value:"function"==typeof b?"function":b});if(!1!==a.oFeatures.bFilter)for(g.push({name:"sSearch",value:a.oPreviousSearch.sSearch}),g.push({name:"bRegex",value:a.oPreviousSearch.bRegex}),d=0;d<f;d++)g.push({name:"sSearch_"+d,value:a.aoPreSearchCols[d].sSearch}),g.push({name:"bRegex_"+d,value:a.aoPreSearchCols[d].bRegex}),g.push({name:"bSearchable_"+d,value:a.aoColumns[d].bSearchable});if(!1!==a.oFeatures.bSort){var h=0;for(b=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice(),d=0;d<b.length;d++)for(c=a.aoColumns[b[d][0]].aDataSort,e=0;e<c.length;e++)g.push({name:"iSortCol_"+h,value:c[e]}),g.push({name:"sSortDir_"+h,value:b[d][1]}),h++;for(g.push({name:"iSortingCols",value:h}),d=0;d<f;d++)g.push({name:"bSortable_"+d,value:a.aoColumns[d].bSortable})}return g}function ka(a,b){A(a,"aoServerParams","serverParams",[b])}function Fa(a,b){if(b.sEcho!==n){if(1*b.sEcho<a.iDraw)return;a.iDraw=1*b.sEcho}(!a.oScroll.bInfinite||a.oScroll.bInfinite&&(a.bSorted||a.bFiltered))&&ga(a),a._iRecordsTotal=parseInt(b.iTotalRecords,10),a._iRecordsDisplay=parseInt(b.iTotalDisplayRecords,10);var c,d=M(a),d=b.sColumns!==n&&""!==d&&b.sColumns!=d;d&&(c=u(a,b.sColumns));for(var e=Q(a.sAjaxDataProp)(b),f=0,g=e.length;f<g;f++)if(d){for(var h=[],i=0,j=a.aoColumns.length;i<j;i++)h.push(e[f][c[i]]);H(a,h)}else H(a,e[f]);a.aiDisplay=a.aiDisplayMaster.slice(),a.bAjaxDataGet=!1,x(a),a.bAjaxDataGet=!0,E(a,!1)}function za(a){var b=a.oPreviousSearch,c=a.oLanguage.sSearch,c=-1!==c.indexOf("_INPUT_")?c.replace("_INPUT_",'<input type="text" />'):""===c?'<input type="text" />':c+' <input type="text" />',d=l.createElement("div");return d.className=a.oClasses.sFilter,d.innerHTML="<label>"+c+"</label>",a.aanFeatures.f||(d.id=a.sTableId+"_filter"),c=h('input[type="text"]',d),d._DT_Input=c[0],c.val(b.sSearch.replace('"',"&quot;")),c.bind("keyup.DT",function(){for(var c=a.aanFeatures.f,d=""===this.value?"":this.value,e=0,f=c.length;e<f;e++)c[e]!=h(this).parents("div.dataTables_filter")[0]&&h(c[e]._DT_Input).val(d);d!=b.sSearch&&K(a,{sSearch:d,bRegex:b.bRegex,bSmart:b.bSmart,bCaseInsensitive:b.bCaseInsensitive})}),c.attr("aria-controls",a.sTableId).bind("keypress.DT",function(a){if(13==a.keyCode)return!1}),d}function K(a,b,c){var d=a.oPreviousSearch,e=a.aoPreSearchCols,f=function(a){d.sSearch=a.sSearch,d.bRegex=a.bRegex,d.bSmart=a.bSmart,d.bCaseInsensitive=a.bCaseInsensitive};if(a.oFeatures.bServerSide)f(b);else{for(Ga(a,b.sSearch,c,b.bRegex,b.bSmart,b.bCaseInsensitive),f(b),b=0;b<a.aoPreSearchCols.length;b++)Ha(a,e[b].sSearch,b,e[b].bRegex,e[b].bSmart,e[b].bCaseInsensitive);Ia(a)}a.bFiltered=!0,h(a.oInstance).trigger("filter",a),a._iDisplayStart=0,y(a),x(a),la(a,0)}function Ia(a){for(var b=j.ext.afnFiltering,c=r(a,"bSearchable"),d=0,e=b.length;d<e;d++)for(var f=0,g=0,h=a.aiDisplay.length;g<h;g++){var i=a.aiDisplay[g-f];b[d](a,Y(a,i,"filter",c),i)||(a.aiDisplay.splice(g-f,1),f++)}}function Ha(a,b,c,d,e,f){if(""!==b)for(var g=0,b=ma(b,d,e,f),d=a.aiDisplay.length-1;0<=d;d--)e=Ja(v(a,a.aiDisplay[d],c,"filter"),a.aoColumns[c].sType),b.test(e)||(a.aiDisplay.splice(d,1),g++)}function Ga(a,b,c,d,e,f){if(d=ma(b,d,e,f),e=a.oPreviousSearch,c||(c=0),0!==j.ext.afnFiltering.length&&(c=1),0>=b.length)a.aiDisplay.splice(0,a.aiDisplay.length),a.aiDisplay=a.aiDisplayMaster.slice();else if(a.aiDisplay.length==a.aiDisplayMaster.length||e.sSearch.length>b.length||1==c||0!==b.indexOf(e.sSearch))for(a.aiDisplay.splice(0,a.aiDisplay.length),la(a,1),b=0;b<a.aiDisplayMaster.length;b++)d.test(a.asDataSearch[b])&&a.aiDisplay.push(a.aiDisplayMaster[b]);else for(b=c=0;b<a.asDataSearch.length;b++)d.test(a.asDataSearch[b])||(a.aiDisplay.splice(b-c,1),c++)}function la(a,b){if(!a.oFeatures.bServerSide){a.asDataSearch=[];for(var c=r(a,"bSearchable"),d=1===b?a.aiDisplayMaster:a.aiDisplay,e=0,f=d.length;e<f;e++)a.asDataSearch[e]=na(a,Y(a,d[e],"filter",c))}}function na(a,b){var c=b.join("  ");return-1!==c.indexOf("&")&&(c=h("<div>").html(c).text()),c.replace(/[\n\r]/g," ")}function ma(a,b,c,d){return c?(a=b?a.split(" "):oa(a).split(" "),a="^(?=.*?"+a.join(")(?=.*?")+").*$",RegExp(a,d?"i":"")):(a=b?a:oa(a),RegExp(a,d?"i":""))}function Ja(a,b){return"function"==typeof j.ext.ofnSearch[b]?j.ext.ofnSearch[b](a):null===a?"":"html"==b?a.replace(/[\r\n]/g," ").replace(/<.*?>/g,""):"string"==typeof a?a.replace(/[\r\n]/g," "):a}function oa(a){return a.replace(RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),"\\$1")}function Ca(a){var b=l.createElement("div");return b.className=a.oClasses.sInfo,a.aanFeatures.i||(a.aoDrawCallback.push({fn:Ka,sName:"information"}),b.id=a.sTableId+"_info"),a.nTable.setAttribute("aria-describedby",a.sTableId+"_info"),b}function Ka(a){if(a.oFeatures.bInfo&&0!==a.aanFeatures.i.length){var b,c=a.oLanguage,d=a._iDisplayStart+1,e=a.fnDisplayEnd(),f=a.fnRecordsTotal(),g=a.fnRecordsDisplay();for(b=0===g?c.sInfoEmpty:c.sInfo,g!=f&&(b+=" "+c.sInfoFiltered),b+=c.sInfoPostFix,b=ja(a,b),null!==c.fnInfoCallback&&(b=c.fnInfoCallback.call(a.oInstance,a,d,e,f,g,b)),a=a.aanFeatures.i,c=0,d=a.length;c<d;c++)h(a[c]).html(b)}}function ja(a,b){var c=a.fnFormatNumber(a._iDisplayStart+1),d=a.fnDisplayEnd(),d=a.fnFormatNumber(d),e=a.fnRecordsDisplay(),e=a.fnFormatNumber(e),f=a.fnRecordsTotal(),f=a.fnFormatNumber(f);return a.oScroll.bInfinite&&(c=a.fnFormatNumber(1)),b.replace(/_START_/g,c).replace(/_END_/g,d).replace(/_TOTAL_/g,e).replace(/_MAX_/g,f)}function ba(a){var b,c,d=a.iInitDisplayStart;if(!1===a.bInitialised)setTimeout(function(){ba(a)},200);else{for(xa(a),va(a),W(a,a.aoHeader),a.nTFoot&&W(a,a.aoFooter),E(a,!0),a.oFeatures.bAutoWidth&&da(a),b=0,c=a.aoColumns.length;b<c;b++)null!==a.aoColumns[b].sWidth&&(a.aoColumns[b].nTh.style.width=q(a.aoColumns[b].sWidth));a.oFeatures.bSort?O(a):a.oFeatures.bFilter?K(a,a.oPreviousSearch):(a.aiDisplay=a.aiDisplayMaster.slice(),y(a),x(a)),null===a.sAjaxSource||a.oFeatures.bServerSide?a.oFeatures.bServerSide||(E(a,!1),$(a)):(c=[],ka(a,c),a.fnServerData.call(a.oInstance,a.sAjaxSource,c,function(c){var e=""!==a.sAjaxDataProp?Q(a.sAjaxDataProp)(c):c;for(b=0;b<e.length;b++)H(a,e[b]);a.iInitDisplayStart=d,a.oFeatures.bSort?O(a):(a.aiDisplay=a.aiDisplayMaster.slice(),y(a),x(a)),E(a,!1),$(a,c)},a))}}function $(a,b){a._bInitComplete=!0,A(a,"aoInitComplete","init",[a,b])}function pa(a){var b=j.defaults.oLanguage;!a.sEmptyTable&&a.sZeroRecords&&"No data available in table"===b.sEmptyTable&&p(a,a,"sZeroRecords","sEmptyTable"),!a.sLoadingRecords&&a.sZeroRecords&&"Loading..."===b.sLoadingRecords&&p(a,a,"sZeroRecords","sLoadingRecords")}function ya(a){if(a.oScroll.bInfinite)return null;var b,c,d='<select size="1" name="'+a.sTableId+'_length">',e=a.aLengthMenu;if(2==e.length&&"object"==typeof e[0]&&"object"==typeof e[1])for(b=0,c=e[0].length;b<c;b++)d+='<option value="'+e[0][b]+'">'+e[1][b]+"</option>";else for(b=0,c=e.length;b<c;b++)d+='<option value="'+e[b]+'">'+e[b]+"</option>";return d+="</select>",e=l.createElement("div"),a.aanFeatures.l||(e.id=a.sTableId+"_length"),e.className=a.oClasses.sLength,e.innerHTML="<label>"+a.oLanguage.sLengthMenu.replace("_MENU_",d)+"</label>",h('select option[value="'+a._iDisplayLength+'"]',e).attr("selected",!0),h("select",e).bind("change.DT",function(){var d=h(this).val(),e=a.aanFeatures.l;for(b=0,c=e.length;b<c;b++)e[b]!=this.parentNode&&h("select",e[b]).val(d);a._iDisplayLength=parseInt(d,10),y(a),a.fnDisplayEnd()==a.fnRecordsDisplay()&&(a._iDisplayStart=a.fnDisplayEnd()-a._iDisplayLength,a._iDisplayStart<0&&(a._iDisplayStart=0)),-1==a._iDisplayLength&&(a._iDisplayStart=0),x(a)}),h("select",e).attr("aria-controls",a.sTableId),e}function y(a){a._iDisplayEnd=!1===a.oFeatures.bPaginate?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength>a.aiDisplay.length||-1==a._iDisplayLength?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength}function Da(a){if(a.oScroll.bInfinite)return null;var b=l.createElement("div");return b.className=a.oClasses.sPaging+a.sPaginationType,j.ext.oPagination[a.sPaginationType].fnInit(a,b,function(a){y(a),x(a)}),a.aanFeatures.p||a.aoDrawCallback.push({fn:function(a){j.ext.oPagination[a.sPaginationType].fnUpdate(a,function(a){y(a),x(a)})},sName:"pagination"}),b}function qa(a,b){var c=a._iDisplayStart;if("number"==typeof b)a._iDisplayStart=b*a._iDisplayLength,a._iDisplayStart>a.fnRecordsDisplay()&&(a._iDisplayStart=0);else if("first"==b)a._iDisplayStart=0;else if("previous"==b)a._iDisplayStart=0<=a._iDisplayLength?a._iDisplayStart-a._iDisplayLength:0,0>a._iDisplayStart&&(a._iDisplayStart=0);else if("next"==b)0<=a._iDisplayLength?a._iDisplayStart+a._iDisplayLength<a.fnRecordsDisplay()&&(a._iDisplayStart+=a._iDisplayLength):a._iDisplayStart=0;else if("last"==b)if(0<=a._iDisplayLength){var d=parseInt((a.fnRecordsDisplay()-1)/a._iDisplayLength,10)+1;a._iDisplayStart=(d-1)*a._iDisplayLength}else a._iDisplayStart=0;else D(a,0,"Unknown paging action: "+b);return h(a.oInstance).trigger("page",a),c!=a._iDisplayStart}function Aa(a){var b=l.createElement("div");return a.aanFeatures.r||(b.id=a.sTableId+"_processing"),b.innerHTML=a.oLanguage.sProcessing,b.className=a.oClasses.sProcessing,a.nTable.parentNode.insertBefore(b,a.nTable),b}function E(a,b){if(a.oFeatures.bProcessing)for(var c=a.aanFeatures.r,d=0,e=c.length;d<e;d++)c[d].style.visibility=b?"visible":"hidden";h(a.oInstance).trigger("processing",[a,b])}function Ba(a){if(""===a.oScroll.sX&&""===a.oScroll.sY)return a.nTable;var b=l.createElement("div"),c=l.createElement("div"),d=l.createElement("div"),e=l.createElement("div"),f=l.createElement("div"),g=l.createElement("div"),i=a.nTable.cloneNode(!1),j=a.nTable.cloneNode(!1),k=a.nTable.getElementsByTagName("thead")[0],m=0===a.nTable.getElementsByTagName("tfoot").length?null:a.nTable.getElementsByTagName("tfoot")[0],n=a.oClasses;return c.appendChild(d),f.appendChild(g),e.appendChild(a.nTable),b.appendChild(c),b.appendChild(e),d.appendChild(i),i.appendChild(k),null!==m&&(b.appendChild(f),g.appendChild(j),j.appendChild(m)),b.className=n.sScrollWrapper,c.className=n.sScrollHead,d.className=n.sScrollHeadInner,e.className=n.sScrollBody,f.className=n.sScrollFoot,g.className=n.sScrollFootInner,a.oScroll.bAutoCss&&(c.style.overflow="hidden",c.style.position="relative",f.style.overflow="hidden",e.style.overflow="auto"),c.style.border="0",c.style.width="100%",f.style.border="0",d.style.width=""!==a.oScroll.sXInner?a.oScroll.sXInner:"100%",i.removeAttribute("id"),i.style.marginLeft="0",a.nTable.style.marginLeft="0",null!==m&&(j.removeAttribute("id"),j.style.marginLeft="0"),d=h(a.nTable).children("caption"),0<d.length&&(d=d[0],"top"===d._captionSide?i.appendChild(d):"bottom"===d._captionSide&&m&&j.appendChild(d)),""!==a.oScroll.sX&&(c.style.width=q(a.oScroll.sX),e.style.width=q(a.oScroll.sX),null!==m&&(f.style.width=q(a.oScroll.sX)),h(e).scroll(function(){c.scrollLeft=this.scrollLeft,null!==m&&(f.scrollLeft=this.scrollLeft)})),""!==a.oScroll.sY&&(e.style.height=q(a.oScroll.sY)),a.aoDrawCallback.push({fn:La,sName:"scrolling"}),a.oScroll.bInfinite&&h(e).scroll(function(){!a.bDrawing&&0!==h(this).scrollTop()&&h(this).scrollTop()+h(this).height()>h(a.nTable).height()-a.oScroll.iLoadGap&&a.fnDisplayEnd()<a.fnRecordsDisplay()&&(qa(a,"next"),y(a),x(a))}),a.nScrollHead=c,a.nScrollFoot=f,b}function La(a){var b,c,d,e,f,g,i,j,k=a.nScrollHead.getElementsByTagName("div")[0],l=k.getElementsByTagName("table")[0],m=a.nTable.parentNode,n=[],o=[],p=null!==a.nTFoot?a.nScrollFoot.getElementsByTagName("div")[0]:null,r=null!==a.nTFoot?p.getElementsByTagName("table")[0]:null,s=a.oBrowser.bScrollOversize,t=function(a){i=a.style,i.paddingTop="0",i.paddingBottom="0",i.borderTopWidth="0",i.borderBottomWidth="0",i.height=0};h(a.nTable).children("thead, tfoot").remove(),b=h(a.nTHead).clone()[0],a.nTable.insertBefore(b,a.nTable.childNodes[0]),d=a.nTHead.getElementsByTagName("tr"),e=b.getElementsByTagName("tr"),null!==a.nTFoot&&(f=h(a.nTFoot).clone()[0],a.nTable.insertBefore(f,a.nTable.childNodes[1]),g=a.nTFoot.getElementsByTagName("tr"),f=f.getElementsByTagName("tr")),""===a.oScroll.sX&&(m.style.width="100%",k.parentNode.style.width="100%");var u=N(a,b);for(b=0,c=u.length;b<c;b++)j=G(a,b),u[b].style.width=a.aoColumns[j].sWidth;null!==a.nTFoot&&C(function(a){a.style.width=""},f),a.oScroll.bCollapse&&""!==a.oScroll.sY&&(m.style.height=m.offsetHeight+a.nTHead.offsetHeight+"px"),b=h(a.nTable).outerWidth(),""===a.oScroll.sX?(a.nTable.style.width="100%",s&&(h("tbody",m).height()>m.offsetHeight||"scroll"==h(m).css("overflow-y"))&&(a.nTable.style.width=q(h(a.nTable).outerWidth()-a.oScroll.iBarWidth))):""!==a.oScroll.sXInner?a.nTable.style.width=q(a.oScroll.sXInner):b==h(m).width()&&h(m).height()<h(a.nTable).height()?(a.nTable.style.width=q(b-a.oScroll.iBarWidth),h(a.nTable).outerWidth()>b-a.oScroll.iBarWidth&&(a.nTable.style.width=q(b))):a.nTable.style.width=q(b),b=h(a.nTable).outerWidth(),C(t,e),C(function(a){n.push(q(h(a).width()))},e),C(function(a,b){a.style.width=n[b]},d),h(e).height(0),null!==a.nTFoot&&(C(t,f),C(function(a){o.push(q(h(a).width()))},f),C(function(a,b){a.style.width=o[b]},g),h(f).height(0)),C(function(a,b){a.innerHTML="",a.style.width=n[b]},e),null!==a.nTFoot&&C(function(a,b){a.innerHTML="",a.style.width=o[b]},f),h(a.nTable).outerWidth()<b?(d=m.scrollHeight>m.offsetHeight||"scroll"==h(m).css("overflow-y")?b+a.oScroll.iBarWidth:b,s&&(m.scrollHeight>m.offsetHeight||"scroll"==h(m).css("overflow-y"))&&(a.nTable.style.width=q(d-a.oScroll.iBarWidth)),m.style.width=q(d),a.nScrollHead.style.width=q(d),null!==a.nTFoot&&(a.nScrollFoot.style.width=q(d)),""===a.oScroll.sX?D(a,1,"The table cannot fit into the current element which will cause column misalignment. The table has been drawn at its minimum possible width."):""!==a.oScroll.sXInner&&D(a,1,"The table cannot fit into the current element which will cause column misalignment. Increase the sScrollXInner value or remove it to allow automatic calculation")):(m.style.width=q("100%"),a.nScrollHead.style.width=q("100%"),null!==a.nTFoot&&(a.nScrollFoot.style.width=q("100%"))),""===a.oScroll.sY&&s&&(m.style.height=q(a.nTable.offsetHeight+a.oScroll.iBarWidth)),""!==a.oScroll.sY&&a.oScroll.bCollapse&&(m.style.height=q(a.oScroll.sY),s=""!==a.oScroll.sX&&a.nTable.offsetWidth>m.offsetWidth?a.oScroll.iBarWidth:0,a.nTable.offsetHeight<m.offsetHeight&&(m.style.height=q(a.nTable.offsetHeight+s))),s=h(a.nTable).outerWidth(),l.style.width=q(s),k.style.width=q(s),l=h(a.nTable).height()>m.clientHeight||"scroll"==h(m).css("overflow-y"),k.style.paddingRight=l?a.oScroll.iBarWidth+"px":"0px",null!==a.nTFoot&&(r.style.width=q(s),p.style.width=q(s),p.style.paddingRight=l?a.oScroll.iBarWidth+"px":"0px"),h(m).scroll(),(a.bSorted||a.bFiltered)&&(m.scrollTop=0)}function C(a,b,c){for(var d,e,f=0,g=0,h=b.length;g<h;){for(d=b[g].firstChild,e=c?c[g].firstChild:null;d;)1===d.nodeType&&(c?a(d,e,f):a(d,f),f++),d=d.nextSibling,e=c?e.nextSibling:null;g++}}function Ma(a,b){if(!a||null===a||""===a)return 0;b||(b=l.body);var c,d=l.createElement("div");return d.style.width=q(a),b.appendChild(d),c=d.offsetWidth,b.removeChild(d),c}function da(a){var b,c,d,e=0,f=0,g=a.aoColumns.length,i=h("th",a.nTHead),j=a.nTable.getAttribute("width");for(d=a.nTable.parentNode,c=0;c<g;c++)a.aoColumns[c].bVisible&&(f++,null!==a.aoColumns[c].sWidth&&(b=Ma(a.aoColumns[c].sWidthOrig,d),null!==b&&(a.aoColumns[c].sWidth=q(b)),e++));if(g==i.length&&0===e&&f==g&&""===a.oScroll.sX&&""===a.oScroll.sY)for(c=0;c<a.aoColumns.length;c++)null!==(b=h(i[c]).width())&&(a.aoColumns[c].sWidth=q(b));else{for(e=a.nTable.cloneNode(!1),c=a.nTHead.cloneNode(!0),f=l.createElement("tbody"),b=l.createElement("tr"),e.removeAttribute("id"),e.appendChild(c),null!==a.nTFoot&&(e.appendChild(a.nTFoot.cloneNode(!0)),C(function(a){a.style.width=""},e.getElementsByTagName("tr"))),e.appendChild(f),f.appendChild(b),f=h("thead th",e),0===f.length&&(f=h("tbody tr:eq(0)>td",e)),i=N(a,c),c=f=0;c<g;c++){var k=a.aoColumns[c];k.bVisible&&null!==k.sWidthOrig&&""!==k.sWidthOrig?i[c-f].style.width=q(k.sWidthOrig):k.bVisible?i[c-f].style.width="":f++}for(c=0;c<g;c++)a.aoColumns[c].bVisible&&null!==(f=Na(a,c))&&(f=f.cloneNode(!0),""!==a.aoColumns[c].sContentPadding&&(f.innerHTML+=a.aoColumns[c].sContentPadding),b.appendChild(f));if(d.appendChild(e),""!==a.oScroll.sX&&""!==a.oScroll.sXInner?e.style.width=q(a.oScroll.sXInner):""!==a.oScroll.sX?(e.style.width="",h(e).width()<d.offsetWidth&&(e.style.width=q(d.offsetWidth))):""!==a.oScroll.sY?e.style.width=q(d.offsetWidth):j&&(e.style.width=q(j)),e.style.visibility="hidden",Oa(a,e),g=h("tbody tr:eq(0)",e).children(),0===g.length&&(g=N(a,h("thead",e)[0])),""!==a.oScroll.sX){for(c=f=d=0;c<a.aoColumns.length;c++)a.aoColumns[c].bVisible&&(d=null===a.aoColumns[c].sWidthOrig?d+h(g[f]).outerWidth():d+(parseInt(a.aoColumns[c].sWidth.replace("px",""),10)+(h(g[f]).outerWidth()-h(g[f]).width())),f++);e.style.width=q(d),a.nTable.style.width=q(d)}for(c=f=0;c<a.aoColumns.length;c++)a.aoColumns[c].bVisible&&(d=h(g[f]).width(),null!==d&&0<d&&(a.aoColumns[c].sWidth=q(d)),f++);g=h(e).css("width"),a.nTable.style.width=-1!==g.indexOf("%")?g:q(h(e).outerWidth()),e.parentNode.removeChild(e)}j&&(a.nTable.style.width=q(j))}function Oa(a,b){""===a.oScroll.sX&&""!==a.oScroll.sY?(h(b).width(),b.style.width=q(h(b).outerWidth()-a.oScroll.iBarWidth)):""!==a.oScroll.sX&&(b.style.width=q(h(b).outerWidth()))}function Na(a,b){var c=Pa(a,b);if(0>c)return null;if(null===a.aoData[c].nTr){var d=l.createElement("td");return d.innerHTML=v(a,c,b,""),d}return J(a,c)[b]}function Pa(a,b){for(var c=-1,d=-1,e=0;e<a.aoData.length;e++){var f=v(a,e,b,"display")+"",f=f.replace(/<.*?>/g,"");f.length>c&&(c=f.length,d=e)}return d}function q(a){if(null===a)return"0px";if("number"==typeof a)return 0>a?"0px":a+"px";var b=a.charCodeAt(a.length-1);return 48>b||57<b?a:a+"px"}function Qa(){var a=l.createElement("p"),b=a.style;b.width="100%",b.height="200px",b.padding="0px";var c=l.createElement("div"),b=c.style;return b.position="absolute",b.top="0px",b.left="0px",b.visibility="hidden",b.width="200px",b.height="150px",b.padding="0px",b.overflow="hidden",c.appendChild(a),l.body.appendChild(c),b=a.offsetWidth,c.style.overflow="scroll",a=a.offsetWidth,b==a&&(a=c.clientWidth),l.body.removeChild(c),b-a}function O(a,b){var c,d,e,f,g,i,k=[],l=[],m=j.ext.oSort,o=a.aoData,p=a.aoColumns,q=a.oLanguage.oAria;if(!a.oFeatures.bServerSide&&(0!==a.aaSorting.length||null!==a.aaSortingFixed)){for(k=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice(),c=0;c<k.length;c++)if(d=k[c][0],e=R(a,d),f=a.aoColumns[d].sSortDataType,j.ext.afnSortData[f])if(g=j.ext.afnSortData[f].call(a.oInstance,a,d,e),g.length===o.length)for(e=0,f=o.length;e<f;e++)F(a,e,d,g[e]);else D(a,0,"Returned data sort array (col "+d+") is the wrong length");for(c=0,d=a.aiDisplayMaster.length;c<d;c++)l[a.aiDisplayMaster[c]]=c;var r,s=k.length;for(c=0,d=o.length;c<d;c++)for(e=0;e<s;e++)for(r=p[k[e][0]].aDataSort,g=0,i=r.length;g<i;g++)f=p[r[g]].sType,f=m[(f||"string")+"-pre"],o[c]._aSortData[r[g]]=f?f(v(a,c,r[g],"sort")):v(a,c,r[g],"sort");a.aiDisplayMaster.sort(function(a,b){var c,d,e,f,g;for(c=0;c<s;c++)for(g=p[k[c][0]].aDataSort,d=0,e=g.length;d<e;d++)if(f=p[g[d]].sType,0!==(f=m[(f||"string")+"-"+k[c][1]](o[a]._aSortData[g[d]],o[b]._aSortData[g[d]])))return f;return m["numeric-asc"](l[a],l[b])})}for((b===n||b)&&!a.oFeatures.bDeferRender&&P(a),c=0,d=a.aoColumns.length;c<d;c++)f=p[c].sTitle.replace(/<.*?>/g,""),e=p[c].nTh,e.removeAttribute("aria-sort"),e.removeAttribute("aria-label"),p[c].bSortable?0<k.length&&k[0][0]==c?(e.setAttribute("aria-sort","asc"==k[0][1]?"ascending":"descending"),e.setAttribute("aria-label",f+("asc"==(p[c].asSorting[k[0][2]+1]?p[c].asSorting[k[0][2]+1]:p[c].asSorting[0])?q.sSortAscending:q.sSortDescending))):e.setAttribute("aria-label",f+("asc"==p[c].asSorting[0]?q.sSortAscending:q.sSortDescending)):e.setAttribute("aria-label",f);a.bSorted=!0,h(a.oInstance).trigger("sort",a),a.oFeatures.bFilter?K(a,a.oPreviousSearch,1):(a.aiDisplay=a.aiDisplayMaster.slice(),a._iDisplayStart=0,y(a),x(a))}function ia(a,b,c,d){Ra(b,{},function(b){if(!1!==a.aoColumns[c].bSortable){var e=function(){var d,e;if(b.shiftKey){for(var f=!1,g=0;g<a.aaSorting.length;g++)if(a.aaSorting[g][0]==c){f=!0,d=a.aaSorting[g][0],e=a.aaSorting[g][2]+1,a.aoColumns[d].asSorting[e]?(a.aaSorting[g][1]=a.aoColumns[d].asSorting[e],a.aaSorting[g][2]=e):a.aaSorting.splice(g,1);break}!1===f&&a.aaSorting.push([c,a.aoColumns[c].asSorting[0],0])}else 1==a.aaSorting.length&&a.aaSorting[0][0]==c?(d=a.aaSorting[0][0],e=a.aaSorting[0][2]+1,a.aoColumns[d].asSorting[e]||(e=0),a.aaSorting[0][1]=a.aoColumns[d].asSorting[e],a.aaSorting[0][2]=e):(a.aaSorting.splice(0,a.aaSorting.length),a.aaSorting.push([c,a.aoColumns[c].asSorting[0],0]));O(a)};a.oFeatures.bProcessing?(E(a,!0),setTimeout(function(){e(),a.oFeatures.bServerSide||E(a,!1)},0)):e(),"function"==typeof d&&d(a)}})}function P(a){var b,c,d,e,f,g=a.aoColumns.length,i=a.oClasses;for(b=0;b<g;b++)a.aoColumns[b].bSortable&&h(a.aoColumns[b].nTh).removeClass(i.sSortAsc+" "+i.sSortDesc+" "+a.aoColumns[b].sSortingClass)
;for(c=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice(),b=0;b<a.aoColumns.length;b++)if(a.aoColumns[b].bSortable){for(f=a.aoColumns[b].sSortingClass,e=-1,d=0;d<c.length;d++)if(c[d][0]==b){f="asc"==c[d][1]?i.sSortAsc:i.sSortDesc,e=d;break}h(a.aoColumns[b].nTh).addClass(f),a.bJUI&&(f=h("span."+i.sSortIcon,a.aoColumns[b].nTh),f.removeClass(i.sSortJUIAsc+" "+i.sSortJUIDesc+" "+i.sSortJUI+" "+i.sSortJUIAscAllowed+" "+i.sSortJUIDescAllowed),f.addClass(-1==e?a.aoColumns[b].sSortingClassJUI:"asc"==c[e][1]?i.sSortJUIAsc:i.sSortJUIDesc))}else h(a.aoColumns[b].nTh).addClass(a.aoColumns[b].sSortingClass);if(f=i.sSortColumn,a.oFeatures.bSort&&a.oFeatures.bSortClasses){for(a=J(a),e=[],b=0;b<g;b++)e.push("");for(b=0,d=1;b<c.length;b++)i=parseInt(c[b][0],10),e[i]=f+d,3>d&&d++;f=RegExp(f+"[123]");var j;for(b=0,c=a.length;b<c;b++)i=b%g,d=a[b].className,j=e[i],i=d.replace(f,j),i!=d?a[b].className=h.trim(i):0<j.length&&-1==d.indexOf(j)&&(a[b].className=d+" "+j)}}function ra(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b,c;b=a.oScroll.bInfinite;var d={iCreate:(new Date).getTime(),iStart:b?0:a._iDisplayStart,iEnd:b?a._iDisplayLength:a._iDisplayEnd,iLength:a._iDisplayLength,aaSorting:h.extend(!0,[],a.aaSorting),oSearch:h.extend(!0,{},a.oPreviousSearch),aoSearchCols:h.extend(!0,[],a.aoPreSearchCols),abVisCols:[]};for(b=0,c=a.aoColumns.length;b<c;b++)d.abVisCols.push(a.aoColumns[b].bVisible);A(a,"aoStateSaveParams","stateSaveParams",[a,d]),a.fnStateSave.call(a.oInstance,a,d)}}function Sa(a,b){if(a.oFeatures.bStateSave){var c=a.fnStateLoad.call(a.oInstance,a);if(c){var d=A(a,"aoStateLoadParams","stateLoadParams",[a,c]);if(-1===h.inArray(!1,d)){for(a.oLoadedState=h.extend(!0,{},c),a._iDisplayStart=c.iStart,a.iInitDisplayStart=c.iStart,a._iDisplayEnd=c.iEnd,a._iDisplayLength=c.iLength,a.aaSorting=c.aaSorting.slice(),a.saved_aaSorting=c.aaSorting.slice(),h.extend(a.oPreviousSearch,c.oSearch),h.extend(!0,a.aoPreSearchCols,c.aoSearchCols),b.saved_aoColumns=[],d=0;d<c.abVisCols.length;d++)b.saved_aoColumns[d]={},b.saved_aoColumns[d].bVisible=c.abVisCols[d];A(a,"aoStateLoaded","stateLoaded",[a,c])}}}}function s(a){for(var b=0;b<j.settings.length;b++)if(j.settings[b].nTable===a)return j.settings[b];return null}function T(a){for(var b=[],a=a.aoData,c=0,d=a.length;c<d;c++)null!==a[c].nTr&&b.push(a[c].nTr);return b}function J(a,b){var c,d,e,f,g,h,i=[];d=0;var j=a.aoData.length;for(b!==n&&(d=b,j=b+1),e=d;e<j;e++)if(h=a.aoData[e],null!==h.nTr){for(d=[],c=h.nTr.firstChild;c;)f=c.nodeName.toLowerCase(),("td"==f||"th"==f)&&d.push(c),c=c.nextSibling;for(f=c=0,g=a.aoColumns.length;f<g;f++)a.aoColumns[f].bVisible?i.push(d[f-c]):(i.push(h._anHidden[f]),c++)}return i}function D(a,b,c){if(a=null===a?"DataTables warning: "+c:"DataTables warning (table id = '"+a.sTableId+"'): "+c,0===b){if("alert"!=j.ext.sErrMode)throw Error(a);alert(a)}else X.console&&console.log&&console.log(a)}function p(a,b,c,d){d===n&&(d=c),b[c]!==n&&(a[d]=b[c])}function Ta(a,b){var c,d;for(d in b)b.hasOwnProperty(d)&&(c=b[d],"object"==typeof e[d]&&null!==c&&!1===h.isArray(c)?h.extend(!0,a[d],c):a[d]=c);return a}function Ra(a,b,c){h(a).bind("click.DT",b,function(b){a.blur(),c(b)}).bind("keypress.DT",b,function(a){13===a.which&&c(a)}).bind("selectstart.DT",function(){return!1})}function z(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function A(a,b,c,d){for(var b=a[b],e=[],f=b.length-1;0<=f;f--)e.push(b[f].fn.apply(a.oInstance,d));return null!==c&&h(a.oInstance).trigger(c,d),e}function Ua(a){var b=h('<div style="position:absolute; top:0; left:0; height:1px; width:1px; overflow:hidden"><div style="position:absolute; top:1px; left:1px; width:100px; overflow:scroll;"><div id="DT_BrowserTest" style="width:100%; height:10px;"></div></div></div>')[0];l.body.appendChild(b),a.oBrowser.bScrollOversize=100===h("#DT_BrowserTest",b)[0].offsetWidth,l.body.removeChild(b)}function Va(a){return function(){var b=[s(this[j.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return j.ext.oApi[a].apply(this,b)}}var U=/\[.*?\]$/,Wa=X.JSON?JSON.stringify:function(a){var b=typeof a;if("object"!==b||null===a)return"string"===b&&(a='"'+a+'"'),a+"";var c,d,e=[],f=h.isArray(a);for(c in a)d=a[c],b=typeof d,"string"===b?d='"'+d+'"':"object"===b&&null!==d&&(d=Wa(d)),e.push((f?"":'"'+c+'":')+d);return(f?"[":"{")+e+(f?"]":"}")};this.$=function(a,b){var c,d,e,f=[];d=s(this[j.ext.iApiIndex]);var g=d.aoData,i=d.aiDisplay,k=d.aiDisplayMaster;if(b||(b={}),b=h.extend({},{filter:"none",order:"current",page:"all"},b),"current"==b.page)for(c=d._iDisplayStart,d=d.fnDisplayEnd();c<d;c++)(e=g[i[c]].nTr)&&f.push(e);else if("current"==b.order&&"none"==b.filter)for(c=0,d=k.length;c<d;c++)(e=g[k[c]].nTr)&&f.push(e);else if("current"==b.order&&"applied"==b.filter)for(c=0,d=i.length;c<d;c++)(e=g[i[c]].nTr)&&f.push(e);else if("original"==b.order&&"none"==b.filter)for(c=0,d=g.length;c<d;c++)(e=g[c].nTr)&&f.push(e);else if("original"==b.order&&"applied"==b.filter)for(c=0,d=g.length;c<d;c++)e=g[c].nTr,-1!==h.inArray(c,i)&&e&&f.push(e);else D(d,1,"Unknown selection options");return f=h(f),c=f.filter(a),f=f.find(a),h([].concat(h.makeArray(c),h.makeArray(f)))},this._=function(a,b){var c,d,e=[],f=this.$(a,b);for(c=0,d=f.length;c<d;c++)e.push(this.fnGetData(f[c]));return e},this.fnAddData=function(a,b){if(0===a.length)return[];var c,d=[],e=s(this[j.ext.iApiIndex]);if("object"==typeof a[0]&&null!==a[0])for(var f=0;f<a.length;f++){if(-1==(c=H(e,a[f])))return d;d.push(c)}else{if(-1==(c=H(e,a)))return d;d.push(c)}return e.aiDisplay=e.aiDisplayMaster.slice(),(b===n||b)&&aa(e),d},this.fnAdjustColumnSizing=function(a){var b=s(this[j.ext.iApiIndex]);k(b),a===n||a?this.fnDraw(!1):(""!==b.oScroll.sX||""!==b.oScroll.sY)&&this.oApi._fnScrollDraw(b)},this.fnClearTable=function(a){var b=s(this[j.ext.iApiIndex]);ga(b),(a===n||a)&&x(b)},this.fnClose=function(a){for(var b=s(this[j.ext.iApiIndex]),c=0;c<b.aoOpenRows.length;c++)if(b.aoOpenRows[c].nParent==a)return(a=b.aoOpenRows[c].nTr.parentNode)&&a.removeChild(b.aoOpenRows[c].nTr),b.aoOpenRows.splice(c,1),0;return 1},this.fnDeleteRow=function(a,b,c){var d,e,f=s(this[j.ext.iApiIndex]),a="object"==typeof a?I(f,a):a,g=f.aoData.splice(a,1);for(d=0,e=f.aoData.length;d<e;d++)null!==f.aoData[d].nTr&&(f.aoData[d].nTr._DT_RowIndex=d);return d=h.inArray(a,f.aiDisplay),f.asDataSearch.splice(d,1),ha(f.aiDisplayMaster,a),ha(f.aiDisplay,a),"function"==typeof b&&b.call(this,f,g),f._iDisplayStart>=f.fnRecordsDisplay()&&(f._iDisplayStart-=f._iDisplayLength,0>f._iDisplayStart&&(f._iDisplayStart=0)),(c===n||c)&&(y(f),x(f)),g},this.fnDestroy=function(a){var b,c,d=s(this[j.ext.iApiIndex]),f=d.nTableWrapper.parentNode,g=d.nTBody,a=a!==n&&a;if(d.bDestroying=!0,A(d,"aoDestroyCallback","destroy",[d]),!a)for(b=0,c=d.aoColumns.length;b<c;b++)!1===d.aoColumns[b].bVisible&&this.fnSetColumnVis(b,!0);for(h(d.nTableWrapper).find("*").andSelf().unbind(".DT"),h("tbody>tr>td."+d.oClasses.sRowEmpty,d.nTable).parent().remove(),d.nTable!=d.nTHead.parentNode&&(h(d.nTable).children("thead").remove(),d.nTable.appendChild(d.nTHead)),d.nTFoot&&d.nTable!=d.nTFoot.parentNode&&(h(d.nTable).children("tfoot").remove(),d.nTable.appendChild(d.nTFoot)),d.nTable.parentNode.removeChild(d.nTable),h(d.nTableWrapper).remove(),d.aaSorting=[],d.aaSortingFixed=[],P(d),h(T(d)).removeClass(d.asStripeClasses.join(" ")),h("th, td",d.nTHead).removeClass([d.oClasses.sSortable,d.oClasses.sSortableAsc,d.oClasses.sSortableDesc,d.oClasses.sSortableNone].join(" ")),d.bJUI&&(h("th span."+d.oClasses.sSortIcon+", td span."+d.oClasses.sSortIcon,d.nTHead).remove(),h("th, td",d.nTHead).each(function(){var a=h("div."+d.oClasses.sSortJUIWrapper,this),b=a.contents();h(this).append(b),a.remove()})),!a&&d.nTableReinsertBefore?f.insertBefore(d.nTable,d.nTableReinsertBefore):a||f.appendChild(d.nTable),b=0,c=d.aoData.length;b<c;b++)null!==d.aoData[b].nTr&&g.appendChild(d.aoData[b].nTr);if(!0===d.oFeatures.bAutoWidth&&(d.nTable.style.width=q(d.sDestroyWidth)),c=d.asDestroyStripes.length)for(a=h(g).children("tr"),b=0;b<c;b++)a.filter(":nth-child("+c+"n + "+b+")").addClass(d.asDestroyStripes[b]);for(b=0,c=j.settings.length;b<c;b++)j.settings[b]==d&&j.settings.splice(b,1);e=d=null},this.fnDraw=function(a){var b=s(this[j.ext.iApiIndex]);!1===a?(y(b),x(b)):aa(b)},this.fnFilter=function(a,b,c,d,e,f){var g=s(this[j.ext.iApiIndex]);if(g.oFeatures.bFilter)if(c!==n&&null!==c||(c=!1),d!==n&&null!==d||(d=!0),e!==n&&null!==e||(e=!0),f!==n&&null!==f||(f=!0),b===n||null===b){if(K(g,{sSearch:a+"",bRegex:c,bSmart:d,bCaseInsensitive:f},1),e&&g.aanFeatures.f)for(b=g.aanFeatures.f,c=0,d=b.length;c<d;c++)try{b[c]._DT_Input!=l.activeElement&&h(b[c]._DT_Input).val(a)}catch(d){h(b[c]._DT_Input).val(a)}}else h.extend(g.aoPreSearchCols[b],{sSearch:a+"",bRegex:c,bSmart:d,bCaseInsensitive:f}),K(g,g.oPreviousSearch,1)},this.fnGetData=function(a,b){var c=s(this[j.ext.iApiIndex]);if(a!==n){var d=a;if("object"==typeof a){var e=a.nodeName.toLowerCase();"tr"===e?d=I(c,a):"td"===e&&(d=I(c,a.parentNode),b=fa(c,d,a))}return b!==n?v(c,d,b,""):c.aoData[d]!==n?c.aoData[d]._aData:null}return Z(c)},this.fnGetNodes=function(a){var b=s(this[j.ext.iApiIndex]);return a!==n?b.aoData[a]!==n?b.aoData[a].nTr:null:T(b)},this.fnGetPosition=function(a){var b=s(this[j.ext.iApiIndex]),c=a.nodeName.toUpperCase();return"TR"==c?I(b,a):"TD"==c||"TH"==c?(c=I(b,a.parentNode),a=fa(b,c,a),[c,R(b,a),a]):null},this.fnIsOpen=function(a){for(var b=s(this[j.ext.iApiIndex]),c=0;c<b.aoOpenRows.length;c++)if(b.aoOpenRows[c].nParent==a)return!0;return!1},this.fnOpen=function(a,b,c){var d=s(this[j.ext.iApiIndex]),e=T(d);if(-1!==h.inArray(a,e)){this.fnClose(a);var e=l.createElement("tr"),f=l.createElement("td");return e.appendChild(f),f.className=c,f.colSpan=t(d),"string"==typeof b?f.innerHTML=b:h(f).html(b),b=h("tr",d.nTBody),-1!=h.inArray(a,b)&&h(e).insertAfter(a),d.aoOpenRows.push({nTr:e,nParent:a}),e}},this.fnPageChange=function(a,b){var c=s(this[j.ext.iApiIndex]);qa(c,a),y(c),(b===n||b)&&x(c)},this.fnSetColumnVis=function(a,b,c){var d,e,f,g,h=s(this[j.ext.iApiIndex]),i=h.aoColumns,l=h.aoData;if(i[a].bVisible!=b){if(b){for(d=e=0;d<a;d++)i[d].bVisible&&e++;if(!(g=e>=t(h)))for(d=a;d<i.length;d++)if(i[d].bVisible){f=d;break}for(d=0,e=l.length;d<e;d++)null!==l[d].nTr&&(g?l[d].nTr.appendChild(l[d]._anHidden[a]):l[d].nTr.insertBefore(l[d]._anHidden[a],J(h,d)[f]))}else for(d=0,e=l.length;d<e;d++)null!==l[d].nTr&&(f=J(h,d)[a],l[d]._anHidden[a]=f,f.parentNode.removeChild(f));for(i[a].bVisible=b,W(h,h.aoHeader),h.nTFoot&&W(h,h.aoFooter),d=0,e=h.aoOpenRows.length;d<e;d++)h.aoOpenRows[d].nTr.colSpan=t(h);(c===n||c)&&(k(h),x(h)),ra(h)}},this.fnSettings=function(){return s(this[j.ext.iApiIndex])},this.fnSort=function(a){var b=s(this[j.ext.iApiIndex]);b.aaSorting=a,O(b)},this.fnSortListener=function(a,b,c){ia(s(this[j.ext.iApiIndex]),a,b,c)},this.fnUpdate=function(a,b,c,d,e){var f=s(this[j.ext.iApiIndex]),b="object"==typeof b?I(f,b):b;if(h.isArray(a)&&c===n)for(f.aoData[b]._aData=a.slice(),c=0;c<f.aoColumns.length;c++)this.fnUpdate(v(f,b,c),b,c,!1,!1);else if(h.isPlainObject(a)&&c===n)for(f.aoData[b]._aData=h.extend(!0,{},a),c=0;c<f.aoColumns.length;c++)this.fnUpdate(v(f,b,c),b,c,!1,!1);else{F(f,b,c,a);var a=v(f,b,c,"display"),g=f.aoColumns[c];null!==g.fnRender&&(a=S(f,b,c),g.bUseRendered&&F(f,b,c,a)),null!==f.aoData[b].nTr&&(J(f,b)[c].innerHTML=a)}return c=h.inArray(b,f.aiDisplay),f.asDataSearch[c]=na(f,Y(f,b,"filter",r(f,"bSearchable"))),(e===n||e)&&k(f),(d===n||d)&&aa(f),0},this.fnVersionCheck=j.ext.fnVersionCheck,this.oApi={_fnExternApiFunc:Va,_fnInitialise:ba,_fnInitComplete:$,_fnLanguageCompat:pa,_fnAddColumn:o,_fnColumnOptions:m,_fnAddData:H,_fnCreateTr:ea,_fnGatherData:ua,_fnBuildHead:va,_fnDrawHead:W,_fnDraw:x,_fnReDraw:aa,_fnAjaxUpdate:wa,_fnAjaxParameters:Ea,_fnAjaxUpdateDraw:Fa,_fnServerParams:ka,_fnAddOptionsHtml:xa,_fnFeatureHtmlTable:Ba,_fnScrollDraw:La,_fnAdjustColumnSizing:k,_fnFeatureHtmlFilter:za,_fnFilterComplete:K,_fnFilterCustom:Ia,_fnFilterColumn:Ha,_fnFilter:Ga,_fnBuildSearchArray:la,_fnBuildSearchRow:na,_fnFilterCreateSearch:ma,_fnDataToSearch:Ja,_fnSort:O,_fnSortAttachListener:ia,_fnSortingClasses:P,_fnFeatureHtmlPaginate:Da,_fnPageChange:qa,_fnFeatureHtmlInfo:Ca,_fnUpdateInfo:Ka,_fnFeatureHtmlLength:ya,_fnFeatureHtmlProcessing:Aa,_fnProcessingDisplay:E,_fnVisibleToColumnIndex:G,_fnColumnIndexToVisible:R,_fnNodeToDataIndex:I,_fnVisbleColumns:t,_fnCalculateEnd:y,_fnConvertToWidth:Ma,_fnCalculateColumnWidths:da,_fnScrollingWidthAdjust:Oa,_fnGetWidestNode:Na,_fnGetMaxLenString:Pa,_fnStringToCss:q,_fnDetectType:B,_fnSettingsFromNode:s,_fnGetDataMaster:Z,_fnGetTrNodes:T,_fnGetTdNodes:J,_fnEscapeRegex:oa,_fnDeleteIndex:ha,_fnReOrderIndex:u,_fnColumnOrdering:M,_fnLog:D,_fnClearTable:ga,_fnSaveState:ra,_fnLoadState:Sa,_fnCreateCookie:function(a,b,c,d,e){var f=new Date;f.setTime(f.getTime()+1e3*c);var c=X.location.pathname.split("/"),a=a+"_"+c.pop().replace(/[\/:]/g,"").toLowerCase(),g;if(null!==e?(g="function"==typeof h.parseJSON?h.parseJSON(b):eval("("+b+")"),b=e(a,g,f.toGMTString(),c.join("/")+"/")):b=a+"="+encodeURIComponent(b)+"; expires="+f.toGMTString()+"; path="+c.join("/")+"/",a=l.cookie.split(";"),e=b.split(";")[0].length,f=[],4096<e+l.cookie.length+10){for(var j=0,o=a.length;j<o;j++)if(-1!=a[j].indexOf(d)){var k=a[j].split("=");try{(g=eval("("+decodeURIComponent(k[1])+")"))&&g.iCreate&&f.push({name:k[0],time:g.iCreate})}catch(a){}}for(f.sort(function(a,b){return b.time-a.time});4096<e+l.cookie.length+10;){if(0===f.length)return;d=f.pop(),l.cookie=d.name+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+c.join("/")+"/"}}l.cookie=b},_fnReadCookie:function(a){for(var b=X.location.pathname.split("/"),a=a+"_"+b[b.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",b=l.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);)d=d.substring(1,d.length);if(0===d.indexOf(a))return decodeURIComponent(d.substring(a.length,d.length))}return null},_fnDetectHeader:V,_fnGetUniqueThs:N,_fnScrollBarWidth:Qa,_fnApplyToChildren:C,_fnMap:p,_fnGetRowData:Y,_fnGetCellData:v,_fnSetCellData:F,_fnGetObjectDataFn:Q,_fnSetObjectDataFn:L,_fnApplyColumnDefs:ta,_fnBindAction:Ra,_fnExtend:Ta,_fnCallbackReg:z,_fnCallbackFire:A,_fnJsonString:Wa,_fnRender:S,_fnNodeToColumnIndex:fa,_fnInfoMacros:ja,_fnBrowserDetect:Ua,_fnGetColumns:r},h.extend(j.ext.oApi,this.oApi);for(var sa in j.ext.oApi)sa&&(this[sa]=Va(sa));var ca=this;return this.each(function(){var a,b,c,d=0;b=this.getAttribute("id");var f=!1,g=!1;if("table"!=this.nodeName.toLowerCase())D(null,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);else{for(d=0,a=j.settings.length;d<a;d++){if(j.settings[d].nTable==this){if(e===n||e.bRetrieve)return j.settings[d].oInstance;if(e.bDestroy){j.settings[d].oInstance.fnDestroy();break}return void D(j.settings[d],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, pass no arguments or see the docs for bRetrieve and bDestroy")}if(j.settings[d].sTableId==this.id){j.settings.splice(d,1);break}}null!==b&&""!==b||(this.id=b="DataTables_Table_"+j.ext._oExternConfig.iNextUnique++);var i=h.extend(!0,{},j.models.oSettings,{nTable:this,oApi:ca.oApi,oInit:e,sDestroyWidth:h(this).width(),sInstance:b,sTableId:b});if(j.settings.push(i),i.oInstance=1===ca.length?ca:h(this).dataTable(),e||(e={}),e.oLanguage&&pa(e.oLanguage),e=Ta(h.extend(!0,{},j.defaults),e),p(i.oFeatures,e,"bPaginate"),p(i.oFeatures,e,"bLengthChange"),p(i.oFeatures,e,"bFilter"),p(i.oFeatures,e,"bSort"),p(i.oFeatures,e,"bInfo"),p(i.oFeatures,e,"bProcessing"),p(i.oFeatures,e,"bAutoWidth"),p(i.oFeatures,e,"bSortClasses"),p(i.oFeatures,e,"bServerSide"),p(i.oFeatures,e,"bDeferRender"),p(i.oScroll,e,"sScrollX","sX"),p(i.oScroll,e,"sScrollXInner","sXInner"),p(i.oScroll,e,"sScrollY","sY"),p(i.oScroll,e,"bScrollCollapse","bCollapse"),p(i.oScroll,e,"bScrollInfinite","bInfinite"),p(i.oScroll,e,"iScrollLoadGap","iLoadGap"),p(i.oScroll,e,"bScrollAutoCss","bAutoCss"),p(i,e,"asStripeClasses"),p(i,e,"asStripClasses","asStripeClasses"),p(i,e,"fnServerData"),p(i,e,"fnFormatNumber"),p(i,e,"sServerMethod"),p(i,e,"aaSorting"),p(i,e,"aaSortingFixed"),p(i,e,"aLengthMenu"),p(i,e,"sPaginationType"),p(i,e,"sAjaxSource"),p(i,e,"sAjaxDataProp"),p(i,e,"iCookieDuration"),p(i,e,"sCookiePrefix"),p(i,e,"sDom"),p(i,e,"bSortCellsTop"),p(i,e,"iTabIndex"),p(i,e,"oSearch","oPreviousSearch"),p(i,e,"aoSearchCols","aoPreSearchCols"),p(i,e,"iDisplayLength","_iDisplayLength"),p(i,e,"bJQueryUI","bJUI"),p(i,e,"fnCookieCallback"),p(i,e,"fnStateLoad"),p(i,e,"fnStateSave"),p(i.oLanguage,e,"fnInfoCallback"),z(i,"aoDrawCallback",e.fnDrawCallback,"user"),z(i,"aoServerParams",e.fnServerParams,"user"),z(i,"aoStateSaveParams",e.fnStateSaveParams,"user"),z(i,"aoStateLoadParams",e.fnStateLoadParams,"user"),z(i,"aoStateLoaded",e.fnStateLoaded,"user"),z(i,"aoRowCallback",e.fnRowCallback,"user"),z(i,"aoRowCreatedCallback",e.fnCreatedRow,"user"),z(i,"aoHeaderCallback",e.fnHeaderCallback,"user"),z(i,"aoFooterCallback",e.fnFooterCallback,"user"),z(i,"aoInitComplete",e.fnInitComplete,"user"),z(i,"aoPreDrawCallback",e.fnPreDrawCallback,"user"),i.oFeatures.bServerSide&&i.oFeatures.bSort&&i.oFeatures.bSortClasses?z(i,"aoDrawCallback",P,"server_side_sort_classes"):i.oFeatures.bDeferRender&&z(i,"aoDrawCallback",P,"defer_sort_classes"),e.bJQueryUI?(h.extend(i.oClasses,j.ext.oJUIClasses),e.sDom===j.defaults.sDom&&"lfrtip"===j.defaults.sDom&&(i.sDom='<"H"lfr>t<"F"ip>')):h.extend(i.oClasses,j.ext.oStdClasses),h(this).addClass(i.oClasses.sTable),""===i.oScroll.sX&&""===i.oScroll.sY||(i.oScroll.iBarWidth=Qa()),i.iInitDisplayStart===n&&(i.iInitDisplayStart=e.iDisplayStart,i._iDisplayStart=e.iDisplayStart),e.bStateSave&&(i.oFeatures.bStateSave=!0,Sa(i,e),z(i,"aoDrawCallback",ra,"state_save")),null!==e.iDeferLoading&&(i.bDeferLoading=!0,d=h.isArray(e.iDeferLoading),i._iRecordsDisplay=d?e.iDeferLoading[0]:e.iDeferLoading,i._iRecordsTotal=d?e.iDeferLoading[1]:e.iDeferLoading),null!==e.aaData&&(g=!0),""!==e.oLanguage.sUrl?(i.oLanguage.sUrl=e.oLanguage.sUrl,h.getJSON(i.oLanguage.sUrl,null,function(a){pa(a),h.extend(!0,i.oLanguage,e.oLanguage,a),ba(i)}),f=!0):h.extend(!0,i.oLanguage,e.oLanguage),null===e.asStripeClasses&&(i.asStripeClasses=[i.oClasses.sStripeOdd,i.oClasses.sStripeEven]),a=i.asStripeClasses.length,i.asDestroyStripes=[],a){for(b=!1,c=h(this).children("tbody").children("tr:lt("+a+")"),d=0;d<a;d++)c.hasClass(i.asStripeClasses[d])&&(b=!0,i.asDestroyStripes.push(i.asStripeClasses[d]));b&&c.removeClass(i.asStripeClasses.join(" "))}if(b=[],d=this.getElementsByTagName("thead"),0!==d.length&&(V(i.aoHeader,d[0]),b=N(i)),null===e.aoColumns)for(c=[],d=0,a=b.length;d<a;d++)c.push(null);else c=e.aoColumns;for(d=0,a=c.length;d<a;d++)e.saved_aoColumns!==n&&e.saved_aoColumns.length==a&&(null===c[d]&&(c[d]={}),c[d].bVisible=e.saved_aoColumns[d].bVisible),o(i,b?b[d]:null);for(ta(i,e.aoColumnDefs,c,function(a,b){m(i,a,b)}),d=0,a=i.aaSorting.length;d<a;d++){i.aaSorting[d][0]>=i.aoColumns.length&&(i.aaSorting[d][0]=0);var k=i.aoColumns[i.aaSorting[d][0]];for(i.aaSorting[d][2]===n&&(i.aaSorting[d][2]=0),e.aaSorting===n&&i.saved_aaSorting===n&&(i.aaSorting[d][1]=k.asSorting[0]),b=0,c=k.asSorting.length;b<c;b++)if(i.aaSorting[d][1]==k.asSorting[b]){i.aaSorting[d][2]=b;break}}if(P(i),Ua(i),d=h(this).children("caption").each(function(){this._captionSide=h(this).css("caption-side")}),a=h(this).children("thead"),0===a.length&&(a=[l.createElement("thead")],this.appendChild(a[0])),i.nTHead=a[0],a=h(this).children("tbody"),0===a.length&&(a=[l.createElement("tbody")],this.appendChild(a[0])),i.nTBody=a[0],i.nTBody.setAttribute("role","alert"),i.nTBody.setAttribute("aria-live","polite"),i.nTBody.setAttribute("aria-relevant","all"),a=h(this).children("tfoot"),0===a.length&&0<d.length&&(""!==i.oScroll.sX||""!==i.oScroll.sY)&&(a=[l.createElement("tfoot")],this.appendChild(a[0])),0<a.length&&(i.nTFoot=a[0],V(i.aoFooter,i.nTFoot)),g)for(d=0;d<e.aaData.length;d++)H(i,e.aaData[d]);else ua(i);i.aiDisplay=i.aiDisplayMaster.slice(),i.bInitialised=!0,!1===f&&ba(i)}}),ca=null,this};j.fnVersionCheck=function(a){for(var b=function(a,b){for(;a.length<b;)a+="0";return a},c=j.ext.sVersion.split("."),a=a.split("."),d="",e="",f=0,g=a.length;f<g;f++)d+=b(c[f],3),e+=b(a[f],3);return parseInt(d,10)>=parseInt(e,10)},j.fnIsDataTable=function(a){for(var b=j.settings,c=0;c<b.length;c++)if(b[c].nTable===a||b[c].nScrollHead===a||b[c].nScrollFoot===a)return!0;return!1},j.fnTables=function(a){var b=[];return jQuery.each(j.settings,function(c,d){(!a||!0===a&&h(d.nTable).is(":visible"))&&b.push(d.nTable)}),b},j.version="1.9.4",j.settings=[],j.models={},j.models.ext={afnFiltering:[],afnSortData:[],aoFeatures:[],aTypes:[],fnVersionCheck:j.fnVersionCheck,iApiIndex:0,ofnSearch:{},oApi:{},oStdClasses:{},oJUIClasses:{},oPagination:{},oSort:{},sVersion:j.version,sErrMode:"alert",_oExternConfig:{iNextUnique:0}},j.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},j.models.oRow={nTr:null,_aData:[],_aSortData:[],_anHidden:[],_sRowStripe:""},j.models.oColumn={aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bUseRendered:null,bVisible:null,_bAutoType:!0,fnCreatedCell:null,fnGetData:null,fnRender:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},j.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollAutoCss:!0,bScrollCollapse:!1,bScrollInfinite:!1,bServerSide:!1,bSort:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCookieCallback:null,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){if(1e3>a)return a;for(var b=a+"",a=b.split(""),c="",b=b.length,d=0;d<b;d++)0==d%3&&0!==d&&(c=this.oLanguage.sInfoThousands+c),c=a[b-d-1]+c;return c},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:function(a,b,c,d){d.jqXHR=h.ajax({url:a,data:b,success:function(a){a.sError&&d.oApi._fnLog(d,0,a.sError),h(d.oInstance).trigger("xhr",[d,a]),c(a)},dataType:"json",cache:!1,type:d.sServerMethod,error:function(a,b){"parsererror"==b&&d.oApi._fnLog(d,0,"DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}})},fnServerParams:null,fnStateLoad:function(e){var e=this.oApi._fnReadCookie(e.sCookiePrefix+e.sInstance),j;try{j="function"==typeof h.parseJSON?h.parseJSON(e):eval("("+e+")")}catch(a){j=null}return j},fnStateLoadParams:null,fnStateLoaded:null,fnStateSave:function(a,b){this.oApi._fnCreateCookie(a.sCookiePrefix+a.sInstance,this.oApi._fnJsonString(b),a.iCookieDuration,a.sCookiePrefix,a.fnCookieCallback)},fnStateSaveParams:null,iCookieDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iScrollLoadGap:100,iTabIndex:0,oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sInfoThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sUrl:"",sZeroRecords:"No matching records found"},oSearch:h.extend({},j.models.oSearch),sAjaxDataProp:"aaData",sAjaxSource:null,sCookiePrefix:"SpryMedia_DataTables_",sDom:"lfrtip",sPaginationType:"two_button",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET"},j.defaults.columns={aDataSort:null,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bUseRendered:!0,bVisible:!0,fnCreatedCell:null,fnRender:null,iDataSort:-1,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},j.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortClasses:null,bStateSave:null},oScroll:{bAutoCss:null,bCollapse:null,bInfinite:null,iBarWidth:0,iLoadGap:null,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1},aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],asDataSearch:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:null,asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,sPaginationType:"two_button",iCookieDuration:0,sCookiePrefix:"",fnCookieCallback:null,aoStateSave:[],aoStateLoad:[],oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iDisplayEnd:10,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsTotal,10):this.aiDisplayMaster.length},fnRecordsDisplay:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsDisplay,10):this.aiDisplay.length},fnDisplayEnd:function(){return this.oFeatures.bServerSide?!1===this.oFeatures.bPaginate||-1==this._iDisplayLength?this._iDisplayStart+this.aiDisplay.length:Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay):this._iDisplayEnd},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null},j.ext=h.extend(!0,{},j.models.ext),h.extend(j.ext.oStdClasses,{sTable:"dataTable",sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button paginate_button_disabled",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"",sJUIHeader:"",sJUIFooter:""}),h.extend(j.ext.oJUIClasses,j.ext.oStdClasses,{sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPageLast:"last ui-corner-tr ui-corner-br",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollFoot:"dataTables_scrollFoot ui-state-default",sFooterTH:"ui-state-default",sJUIHeader:"fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix",sJUIFooter:"fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"}),h.extend(j.ext.oPagination,{two_button:{fnInit:function(a,b,c){var d=a.oLanguage.oPaginate,e=function(b){a.oApi._fnPageChange(a,b.data.action)&&c(a)},d=a.bJUI?'<a class="'+a.oClasses.sPagePrevDisabled+'" tabindex="'+a.iTabIndex+'" role="button"><span class="'+a.oClasses.sPageJUIPrev+'"></span></a><a class="'+a.oClasses.sPageNextDisabled+'" tabindex="'+a.iTabIndex+'" role="button"><span class="'+a.oClasses.sPageJUINext+'"></span></a>':'<a class="'+a.oClasses.sPagePrevDisabled+'" tabindex="'+a.iTabIndex+'" role="button">'+d.sPrevious+'</a><a class="'+a.oClasses.sPageNextDisabled+'" tabindex="'+a.iTabIndex+'" role="button">'+d.sNext+"</a>";h(b).append(d);var f=h("a",b),d=f[0],f=f[1];a.oApi._fnBindAction(d,{action:"previous"},e),a.oApi._fnBindAction(f,{action:"next"},e),a.aanFeatures.p||(b.id=a.sTableId+"_paginate",d.id=a.sTableId+"_previous",f.id=a.sTableId+"_next",d.setAttribute("aria-controls",a.sTableId),f.setAttribute("aria-controls",a.sTableId))},fnUpdate:function(a){if(a.aanFeatures.p)for(var b,c=a.oClasses,d=a.aanFeatures.p,e=0,f=d.length;e<f;e++)(b=d[e].firstChild)&&(b.className=0===a._iDisplayStart?c.sPagePrevDisabled:c.sPagePrevEnabled,b=b.nextSibling,b.className=a.fnDisplayEnd()==a.fnRecordsDisplay()?c.sPageNextDisabled:c.sPageNextEnabled)}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(a,b,c){var d=a.oLanguage.oPaginate,e=a.oClasses,f=function(b){a.oApi._fnPageChange(a,b.data.action)&&c(a)};h(b).append('<a  tabindex="'+a.iTabIndex+'" class="'+e.sPageButton+" "+e.sPageFirst+'">'+d.sFirst+'</a><a  tabindex="'+a.iTabIndex+'" class="'+e.sPageButton+" "+e.sPagePrevious+'">'+d.sPrevious+'</a><span></span><a tabindex="'+a.iTabIndex+'" class="'+e.sPageButton+" "+e.sPageNext+'">'+d.sNext+'</a><a tabindex="'+a.iTabIndex+'" class="'+e.sPageButton+" "+e.sPageLast+'">'+d.sLast+"</a>");var g=h("a",b),d=g[0],e=g[1],i=g[2],g=g[3];a.oApi._fnBindAction(d,{action:"first"},f),a.oApi._fnBindAction(e,{action:"previous"},f),a.oApi._fnBindAction(i,{action:"next"},f),a.oApi._fnBindAction(g,{action:"last"},f),a.aanFeatures.p||(b.id=a.sTableId+"_paginate",d.id=a.sTableId+"_first",e.id=a.sTableId+"_previous",i.id=a.sTableId+"_next",g.id=a.sTableId+"_last")},fnUpdate:function(a,b){if(a.aanFeatures.p){var c,d,e=j.ext.oPagination.iFullNumbersShowPages,f=Math.floor(e/2),g=Math.ceil(a.fnRecordsDisplay()/a._iDisplayLength),i=Math.ceil(a._iDisplayStart/a._iDisplayLength)+1,k="",l=a.oClasses,m=a.aanFeatures.p,n=function(d){a.oApi._fnBindAction(this,{page:d+c-1},function(c){a.oApi._fnPageChange(a,c.data.page),b(a),c.preventDefault()})};for(-1===a._iDisplayLength?i=f=c=1:g<e?(c=1,f=g):i<=f?(c=1,f=e):i>=g-f?(c=g-e+1,f=g):(c=i-Math.ceil(e/2)+1,f=c+e-1),
e=c;e<=f;e++)k+=i!==e?'<a tabindex="'+a.iTabIndex+'" class="'+l.sPageButton+'">'+a.fnFormatNumber(e)+"</a>":'<a tabindex="'+a.iTabIndex+'" class="'+l.sPageButtonActive+'">'+a.fnFormatNumber(e)+"</a>";for(e=0,f=m.length;e<f;e++)d=m[e],d.hasChildNodes()&&(h("span:eq(0)",d).html(k).children("a").each(n),d=d.getElementsByTagName("a"),d=[d[0],d[1],d[d.length-2],d[d.length-1]],h(d).removeClass(l.sPageButton+" "+l.sPageButtonActive+" "+l.sPageButtonStaticDisabled),h([d[0],d[1]]).addClass(1==i?l.sPageButtonStaticDisabled:l.sPageButton),h([d[2],d[3]]).addClass(0===g||i===g||-1===a._iDisplayLength?l.sPageButtonStaticDisabled:l.sPageButton))}}}}),h.extend(j.ext.oSort,{"string-pre":function(a){return"string"!=typeof a&&(a=null!==a&&a.toString?a.toString():""),a.toLowerCase()},"string-asc":function(a,b){return a<b?-1:a>b?1:0},"string-desc":function(a,b){return a<b?1:a>b?-1:0},"html-pre":function(a){return a.replace(/<.*?>/g,"").toLowerCase()},"html-asc":function(a,b){return a<b?-1:a>b?1:0},"html-desc":function(a,b){return a<b?1:a>b?-1:0},"date-pre":function(a){return a=Date.parse(a),(isNaN(a)||""===a)&&(a=Date.parse("01/01/1970 00:00:00")),a},"date-asc":function(a,b){return a-b},"date-desc":function(a,b){return b-a},"numeric-pre":function(a){return"-"==a||""===a?0:1*a},"numeric-asc":function(a,b){return a-b},"numeric-desc":function(a,b){return b-a}}),h.extend(j.ext.aTypes,[function(a){if("number"==typeof a)return"numeric";if("string"!=typeof a)return null;var b,c=!1;if(b=a.charAt(0),-1=="0123456789-".indexOf(b))return null;for(var d=1;d<a.length;d++){if(b=a.charAt(d),-1=="0123456789.".indexOf(b))return null;if("."==b){if(c)return null;c=!0}}return"numeric"},function(a){var b=Date.parse(a);return null!==b&&!isNaN(b)||"string"==typeof a&&0===a.length?"date":null},function(a){return"string"==typeof a&&-1!=a.indexOf("<")&&-1!=a.indexOf(">")?"html":null}]),h.fn.DataTable=j,h.fn.dataTable=j,h.fn.dataTableSettings=j.settings,h.fn.dataTableExt=j.ext};"function"==typeof define&&define.amd?define(["jquery"],L):jQuery&&!jQuery.fn.dataTable&&L(jQuery)}(window,document),$.extend(!0,$.fn.dataTable.defaults,{sDom:"<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",sPaginationType:"bootstrap",oLanguage:{sLengthMenu:"_MENU_ records per page"}}),$.extend($.fn.dataTableExt.oStdClasses,{sWrapper:"dataTables_wrapper form-inline"}),$.fn.dataTableExt.oApi.fnPagingInfo=function(a){return{iStart:a._iDisplayStart,iEnd:a.fnDisplayEnd(),iLength:a._iDisplayLength,iTotal:a.fnRecordsTotal(),iFilteredTotal:a.fnRecordsDisplay(),iPage:Math.ceil(a._iDisplayStart/a._iDisplayLength),iTotalPages:Math.ceil(a.fnRecordsDisplay()/a._iDisplayLength)}},$.extend($.fn.dataTableExt.oPagination,{bootstrap:{fnInit:function(a,b,c){var d=a.oLanguage.oPaginate,e=function(b){b.preventDefault(),a.oApi._fnPageChange(a,b.data.action)&&c(a)};$(b).addClass("pagination").append('<ul><li class="prev disabled"><a href="#">&larr; '+d.sPrevious+'</a></li><li class="next disabled"><a href="#">'+d.sNext+" &rarr; </a></li></ul>");var f=$("a",b);$(f[0]).bind("click.DT",{action:"previous"},e),$(f[1]).bind("click.DT",{action:"next"},e)},fnUpdate:function(a,b){var c,d,e,f,g,h=5,i=a.oInstance.fnPagingInfo(),j=a.aanFeatures.p,k=Math.floor(h/2);for(i.iTotalPages<h?(f=1,g=i.iTotalPages):i.iPage<=k?(f=1,g=h):i.iPage>=i.iTotalPages-k?(f=i.iTotalPages-h+1,g=i.iTotalPages):(f=i.iPage-k+1,g=f+h-1),c=0,iLen=j.length;c<iLen;c++){for($("li:gt(0)",j[c]).filter(":not(:last)").remove(),d=f;d<=g;d++)e=d==i.iPage+1?'class="active"':"",$("<li "+e+'><a href="#">'+d+"</a></li>").insertBefore($("li:last",j[c])[0]).bind("click",function(c){c.preventDefault(),a._iDisplayStart=(parseInt($("a",this).text(),10)-1)*i.iLength,b(a)});0===i.iPage?$("li:first",j[c]).addClass("disabled"):$("li:first",j[c]).removeClass("disabled"),i.iPage===i.iTotalPages-1||0===i.iTotalPages?$("li:last",j[c]).addClass("disabled"):$("li:last",j[c]).removeClass("disabled")}}}}),$.fn.DataTable.TableTools&&($.extend(!0,$.fn.DataTable.TableTools.classes,{container:"DTTT btn-group",buttons:{normal:"btn",disabled:"disabled"},collection:{container:"DTTT_dropdown dropdown-menu",buttons:{normal:"",disabled:"disabled"}},print:{info:"DTTT_print_info modal"},select:{row:"active"}}),$.extend(!0,$.fn.DataTable.TableTools.DEFAULTS.oTags,{collection:{container:"ul",button:"li",liner:"a"}})),$(document).ready(function(){$("#example").dataTable({sDom:"<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",sPaginationType:"bootstrap",oLanguage:{sLengthMenu:"_MENU_ records per page"}})}),jQuery.extend(jQuery.fn.dataTableExt.oSort,{"num-html-pre":function(a){var b=String(a).replace(/<[\s\S]*?>/g,"");return parseFloat(b)},"num-html-asc":function(a,b){return a<b?-1:a>b?1:0},"num-html-desc":function(a,b){return a<b?1:a>b?-1:0}}),function(a,b,c){function d(a){for(var b=[],c=0,d=a.length;c<d;c++)b[a[c]]=c;return b}function e(a,b,c){b=a.splice(b,1)[0],a.splice(c,0,b)}function f(a,b,c){for(var d=[],e=0,f=a.childNodes.length;e<f;e++)1==a.childNodes[e].nodeType&&d.push(a.childNodes[e]);b=d[b],null!==c?a.insertBefore(b,d[c]):a.appendChild(b)}a.fn.dataTableExt.oApi.fnColReorder=function(b,c,g){var h,i,j,k,l,m=b.aoColumns.length;if(c!=g)if(0>c||c>=m)this.oApi._fnLog(b,1,"ColReorder 'from' index is out of bounds: "+c);else if(0>g||g>=m)this.oApi._fnLog(b,1,"ColReorder 'to' index is out of bounds: "+g);else{var n=[];for(h=0,i=m;h<i;h++)n[h]=h;for(e(n,c,g),n=d(n),h=0,i=b.aaSorting.length;h<i;h++)b.aaSorting[h][0]=n[b.aaSorting[h][0]];if(null!==b.aaSortingFixed)for(h=0,i=b.aaSortingFixed.length;h<i;h++)b.aaSortingFixed[h][0]=n[b.aaSortingFixed[h][0]];for(h=0,i=m;h<i;h++)for(l=b.aoColumns[h],j=0,k=l.aDataSort.length;j<k;j++)l.aDataSort[j]=n[l.aDataSort[j]];for(h=0,i=m;h<i;h++)l=b.aoColumns[h],"number"==typeof l.mData&&(l.mData=n[l.mData],l.fnGetData=b.oApi._fnGetObjectDataFn(l.mData),l.fnSetData=b.oApi._fnSetObjectDataFn(l.mData));if(b.aoColumns[c].bVisible){for(k=this.oApi._fnColumnIndexToVisible(b,c),l=null,h=g<c?g:g+1;null===l&&h<m;)l=this.oApi._fnColumnIndexToVisible(b,h),h++;for(j=b.nTHead.getElementsByTagName("tr"),h=0,i=j.length;h<i;h++)f(j[h],k,l);if(null!==b.nTFoot)for(j=b.nTFoot.getElementsByTagName("tr"),h=0,i=j.length;h<i;h++)f(j[h],k,l);for(h=0,i=b.aoData.length;h<i;h++)null!==b.aoData[h].nTr&&f(b.aoData[h].nTr,k,l)}for(e(b.aoColumns,c,g),e(b.aoPreSearchCols,c,g),h=0,i=b.aoData.length;h<i;h++)a.isArray(b.aoData[h]._aData)&&e(b.aoData[h]._aData,c,g),e(b.aoData[h]._anHidden,c,g);for(h=0,i=b.aoHeader.length;h<i;h++)e(b.aoHeader[h],c,g);if(null!==b.aoFooter)for(h=0,i=b.aoFooter.length;h<i;h++)e(b.aoFooter[h],c,g);for(h=0,i=m;h<i;h++)a(b.aoColumns[h].nTh).unbind("click"),this.oApi._fnSortAttachListener(b,b.aoColumns[h].nTh,h);a(b.oInstance).trigger("column-reorder",[b,{iFrom:c,iTo:g,aiInvertMapping:n}]),void 0!==b.oInstance._oPluginFixedHeader&&b.oInstance._oPluginFixedHeader.fnUpdate()}},ColReorder=function(a,b){return(!this.CLASS||"ColReorder"!=this.CLASS)&&alert("Warning: ColReorder must be initialised with the keyword 'new'"),void 0===b&&(b={}),this.s={dt:null,init:b,fixed:0,dropCallback:null,mouse:{startX:-1,startY:-1,offsetX:-1,offsetY:-1,target:-1,targetIndex:-1,fromIndex:-1},aoTargets:[]},this.dom={drag:null,pointer:null},this.s.dt=a.oInstance.fnSettings(),this._fnConstruct(),a.oApi._fnCallbackReg(a,"aoDestroyCallback",jQuery.proxy(this._fnDestroy,this),"ColReorder"),ColReorder.aoInstances.push(this),this},ColReorder.prototype={fnReset:function(){for(var a=[],b=0,c=this.s.dt.aoColumns.length;b<c;b++)a.push(this.s.dt.aoColumns[b]._ColReorder_iOrigCol);this._fnOrderColumns(a)},_fnConstruct:function(){var a,b,c=this;for(void 0!==this.s.init.iFixedColumns&&(this.s.fixed=this.s.init.iFixedColumns),void 0!==this.s.init.fnReorderCallback&&(this.s.dropCallback=this.s.init.fnReorderCallback),a=0,b=this.s.dt.aoColumns.length;a<b;a++)a>this.s.fixed-1&&this._fnMouseListener(a,this.s.dt.aoColumns[a].nTh),this.s.dt.aoColumns[a]._ColReorder_iOrigCol=a;this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",function(a,b){c._fnStateSave.call(c,b)},"ColReorder_State");var e=null;if(void 0!==this.s.init.aiOrder&&(e=this.s.init.aiOrder.slice()),this.s.dt.oLoadedState&&void 0!==this.s.dt.oLoadedState.ColReorder&&this.s.dt.oLoadedState.ColReorder.length==this.s.dt.aoColumns.length&&(e=this.s.dt.oLoadedState.ColReorder),e)if(c.s.dt._bInitComplete)a=d(e),c._fnOrderColumns.call(c,a);else{var f=!1;this.s.dt.aoDrawCallback.push({fn:function(){if(!c.s.dt._bInitComplete&&!f){f=!0;var a=d(e);c._fnOrderColumns.call(c,a)}},sName:"ColReorder_Pre"})}},_fnOrderColumns:function(b){if(b.length!=this.s.dt.aoColumns.length)this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"ColReorder - array reorder does not match known number of columns. Skipping.");else{for(var c=0,d=b.length;c<d;c++){var f=a.inArray(c,b);c!=f&&(e(b,f,c),this.s.dt.oInstance.fnColReorder(f,c))}(""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY)&&this.s.dt.oInstance.fnAdjustColumnSizing(),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt)}},_fnStateSave:function(b){var c,d,e,f=this.s.dt;for(c=0;c<b.aaSorting.length;c++)b.aaSorting[c][0]=f.aoColumns[b.aaSorting[c][0]]._ColReorder_iOrigCol;for(aSearchCopy=a.extend(!0,[],b.aoSearchCols),b.ColReorder=[],c=0,d=f.aoColumns.length;c<d;c++)e=f.aoColumns[c]._ColReorder_iOrigCol,b.aoSearchCols[e]=aSearchCopy[c],b.abVisCols[e]=f.aoColumns[c].bVisible,b.ColReorder.push(e)},_fnMouseListener:function(b,c){var d=this;a(c).bind("mousedown.ColReorder",function(a){a.preventDefault(),d._fnMouseDown.call(d,a,c)})},_fnMouseDown:function(b,d){var e=this,f=this.s.dt.aoColumns,g="TH"==b.target.nodeName?b.target:a(b.target).parents("TH")[0],g=a(g).offset();this.s.mouse.startX=b.pageX,this.s.mouse.startY=b.pageY,this.s.mouse.offsetX=b.pageX-g.left,this.s.mouse.offsetY=b.pageY-g.top,this.s.mouse.target=d,this.s.mouse.targetIndex=a("th",d.parentNode).index(d),this.s.mouse.fromIndex=this.s.dt.oInstance.oApi._fnVisibleToColumnIndex(this.s.dt,this.s.mouse.targetIndex),this.s.aoTargets.splice(0,this.s.aoTargets.length),this.s.aoTargets.push({x:a(this.s.dt.nTable).offset().left,to:0});for(var h=g=0,i=f.length;h<i;h++)h!=this.s.mouse.fromIndex&&g++,f[h].bVisible&&this.s.aoTargets.push({x:a(f[h].nTh).offset().left+a(f[h].nTh).outerWidth(),to:g});0!==this.s.fixed&&this.s.aoTargets.splice(0,this.s.fixed),a(c).bind("mousemove.ColReorder",function(a){e._fnMouseMove.call(e,a)}),a(c).bind("mouseup.ColReorder",function(a){e._fnMouseUp.call(e,a)})},_fnMouseMove:function(a){if(null===this.dom.drag){if(5>Math.pow(Math.pow(a.pageX-this.s.mouse.startX,2)+Math.pow(a.pageY-this.s.mouse.startY,2),.5))return;this._fnCreateDragNode()}this.dom.drag.style.left=a.pageX-this.s.mouse.offsetX+"px",this.dom.drag.style.top=a.pageY-this.s.mouse.offsetY+"px";for(var b=!1,c=1,d=this.s.aoTargets.length;c<d;c++)if(a.pageX<this.s.aoTargets[c-1].x+(this.s.aoTargets[c].x-this.s.aoTargets[c-1].x)/2){this.dom.pointer.style.left=this.s.aoTargets[c-1].x+"px",this.s.mouse.toIndex=this.s.aoTargets[c-1].to,b=!0;break}b||(this.dom.pointer.style.left=this.s.aoTargets[this.s.aoTargets.length-1].x+"px",this.s.mouse.toIndex=this.s.aoTargets[this.s.aoTargets.length-1].to)},_fnMouseUp:function(){a(c).unbind("mousemove.ColReorder"),a(c).unbind("mouseup.ColReorder"),null!==this.dom.drag&&(c.body.removeChild(this.dom.drag),c.body.removeChild(this.dom.pointer),this.dom.drag=null,this.dom.pointer=null,this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex),(""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY)&&this.s.dt.oInstance.fnAdjustColumnSizing(),null!==this.s.dropCallback&&this.s.dropCallback.call(this),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt))},_fnCreateDragNode:function(){var b=this;for(this.dom.drag=a(this.s.dt.nTHead.parentNode).clone(!0)[0],this.dom.drag.className+=" DTCR_clonedTable";0<this.dom.drag.getElementsByTagName("caption").length;)this.dom.drag.removeChild(this.dom.drag.getElementsByTagName("caption")[0]);for(;0<this.dom.drag.getElementsByTagName("tbody").length;)this.dom.drag.removeChild(this.dom.drag.getElementsByTagName("tbody")[0]);for(;0<this.dom.drag.getElementsByTagName("tfoot").length;)this.dom.drag.removeChild(this.dom.drag.getElementsByTagName("tfoot")[0]);a("thead tr:eq(0)",this.dom.drag).each(function(){a("th",this).eq(b.s.mouse.targetIndex).siblings().remove()}),a("tr",this.dom.drag).height(a("tr:eq(0)",b.s.dt.nTHead).height()),a("thead tr:gt(0)",this.dom.drag).remove(),a("thead th:eq(0)",this.dom.drag).each(function(){this.style.width=a("th:eq("+b.s.mouse.targetIndex+")",b.s.dt.nTHead).width()+"px"}),this.dom.drag.style.position="absolute",this.dom.drag.style.top="0px",this.dom.drag.style.left="0px",this.dom.drag.style.width=a("th:eq("+b.s.mouse.targetIndex+")",b.s.dt.nTHead).outerWidth()+"px",this.dom.pointer=c.createElement("div"),this.dom.pointer.className="DTCR_pointer",this.dom.pointer.style.position="absolute",""===this.s.dt.oScroll.sX&&""===this.s.dt.oScroll.sY?(this.dom.pointer.style.top=a(this.s.dt.nTable).offset().top+"px",this.dom.pointer.style.height=a(this.s.dt.nTable).height()+"px"):(this.dom.pointer.style.top=a("div.dataTables_scroll",this.s.dt.nTableWrapper).offset().top+"px",this.dom.pointer.style.height=a("div.dataTables_scroll",this.s.dt.nTableWrapper).height()+"px"),c.body.appendChild(this.dom.pointer),c.body.appendChild(this.dom.drag)},_fnDestroy:function(){for(var b=0,c=ColReorder.aoInstances.length;b<c;b++)if(ColReorder.aoInstances[b]===this){ColReorder.aoInstances.splice(b,1);break}a(this.s.dt.nTHead).find("*").unbind(".ColReorder"),this.s=this.s.dt.oInstance._oPluginColReorder=null}},ColReorder.aoInstances=[],ColReorder.fnReset=function(a){for(var b=0,c=ColReorder.aoInstances.length;b<c;b++)ColReorder.aoInstances[b].s.dt.oInstance==a&&ColReorder.aoInstances[b].fnReset()},ColReorder.prototype.CLASS="ColReorder",ColReorder.VERSION="1.0.8",ColReorder.prototype.VERSION=ColReorder.VERSION,"function"==typeof a.fn.dataTable&&"function"==typeof a.fn.dataTableExt.fnVersionCheck&&a.fn.dataTableExt.fnVersionCheck("1.9.3")?a.fn.dataTableExt.aoFeatures.push({fnInit:function(a){var b=a.oInstance;return void 0===b._oPluginColReorder?b._oPluginColReorder=new ColReorder(a,void 0!==a.oInit.oColReorder?a.oInit.oColReorder:{}):b.oApi._fnLog(a,1,"ColReorder attempted to initialise twice. Ignoring second"),null},cFeature:"R",sFeature:"ColReorder"}):alert("Warning: ColReorder requires DataTables 1.9.3 or greater - www.datatables.net/download")}(jQuery,window,document),window.jQuery&&function(a){a.extend({xml2json:function(b,c){function d(b,g){if(!b)return null;var h="",i=null,j=null;b.nodeType,e(b.localName||b.nodeName),b.text||b.nodeValue;b.childNodes&&b.childNodes.length>0&&a.each(b.childNodes,function(a,b){var c=b.nodeType,g=e(b.localName||b.nodeName),j=b.text||b.nodeValue||"";if(8!=c)if(3!=c&&4!=c&&g)i=i||{},i[g]?(i[g].length||(i[g]=f(i[g])),i[g]=f(i[g]),i[g][i[g].length]=d(b,!0),i[g].length=i[g].length):i[g]=d(b);else{if(j.match(/^\s+$/))return;h+=j.replace(/^\s+/,"").replace(/\s+$/,"")}}),b.attributes&&b.attributes.length>0&&(j={},i=i||{},a.each(b.attributes,function(a,b){var c=e(b.name),d=b.value;j[c]=d,i[c]?(i[cnn]=f(i[cnn]),i[c][i[c].length]=d,i[c].length=i[c].length):i[c]=d})),i&&(i=a.extend(""!=h?new String(h):{},i||{}),h=i.text?("object"==typeof i.text?i.text:[i.text||""]).concat([h]):h,h&&(i.text=h),h="");var k=i||h;return c&&(h&&(k={}),h=k.text||h||"",h&&(k.text=h),g||(k=f(k))),k}if(!b)return{};var e=function(a){return String(a||"").replace(/-/g,"_")},f=function(b){return a.isArray(b)||(b=[b]),b.length=b.length,b};if("string"==typeof b&&(b=a.text2xml(b)),b.nodeType){if(3==b.nodeType||4==b.nodeType)return b.nodeValue;var g=9==b.nodeType?b.documentElement:b,h=d(g,!0);return b=null,g=null,h}},text2xml:function(b){var c;try{var d=a.browser.msie?new ActiveXObject("Microsoft.XMLDOM"):new DOMParser;d.async=!1}catch(a){throw new Error("XML Parser could not be instantiated")}try{c=a.browser.msie?!!d.loadXML(b)&&d:d.parseFromString(b,"text/xml")}catch(a){throw new Error("Error parsing XML string")}return c}})}(jQuery),function(a){"use strict";function b(b){var c=b.data;b.isDefaultPrevented()||(b.preventDefault(),a(this).ajaxSubmit(c))}function c(b){var c=b.target,d=a(c);if(!d.is("[type=submit],[type=image]")){var e=d.closest("[type=submit]");if(0===e.length)return;c=e[0]}var f=this;if(f.clk=c,"image"==c.type)if(void 0!==b.offsetX)f.clk_x=b.offsetX,f.clk_y=b.offsetY;else if("function"==typeof a.fn.offset){var g=d.offset();f.clk_x=b.pageX-g.left,f.clk_y=b.pageY-g.top}else f.clk_x=b.pageX-c.offsetLeft,f.clk_y=b.pageY-c.offsetTop;setTimeout(function(){f.clk=f.clk_x=f.clk_y=null},100)}function d(){if(a.fn.ajaxSubmit.debug){var b="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(b):window.opera&&window.opera.postError&&window.opera.postError(b)}}var e={};e.fileapi=void 0!==a("<input type='file'/>").get(0).files,e.formdata=void 0!==window.FormData;var f=!!a.fn.prop;a.fn.attr2=function(){if(!f)return this.attr.apply(this,arguments);var a=this.prop.apply(this,arguments);return a&&a.jquery||"string"==typeof a?a:this.attr.apply(this,arguments)},a.fn.ajaxSubmit=function(b){function c(c){var d,e,f=a.param(c,b.traditional).split("&"),g=f.length,h=[];for(d=0;g>d;d++)f[d]=f[d].replace(/\+/g," "),e=f[d].split("="),h.push([decodeURIComponent(e[0]),decodeURIComponent(e[1])]);return h}function g(d){for(var e=new FormData,f=0;d.length>f;f++)e.append(d[f].name,d[f].value);if(b.extraData){var g=c(b.extraData);for(f=0;g.length>f;f++)g[f]&&e.append(g[f][0],g[f][1])}b.data=null;var h=a.extend(!0,{},a.ajaxSettings,b,{contentType:!1,processData:!1,cache:!1,type:i||"POST"});b.uploadProgress&&(h.xhr=function(){var c=a.ajaxSettings.xhr();return c.upload&&c.upload.addEventListener("progress",function(a){var c=0,d=a.loaded||a.position,e=a.total;a.lengthComputable&&(c=Math.ceil(d/e*100)),b.uploadProgress(a,d,e,c)},!1),c}),h.data=null;var j=h.beforeSend;return h.beforeSend=function(a,b){b.data=e,j&&j.call(this,a,b)},a.ajax(h)}function h(c){function e(a){var b=null;try{a.contentWindow&&(b=a.contentWindow.document)}catch(a){d("cannot get iframe.contentWindow document: "+a)}if(b)return b;try{b=a.contentDocument?a.contentDocument:a.document}catch(c){d("cannot get iframe.contentDocument: "+c),b=a.document}return b}function g(){function b(){try{var a=e(r).readyState;d("state = "+a),a&&"uninitialized"==a.toLowerCase()&&setTimeout(b,50)}catch(a){d("Server abort: ",a," (",a.name,")"),h(A),w&&clearTimeout(w),w=void 0}}var c=l.attr2("target"),f=l.attr2("action");x.setAttribute("target",o),i||x.setAttribute("method","POST"),f!=m.url&&x.setAttribute("action",m.url),m.skipEncodingOverride||i&&!/post/i.test(i)||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),m.timeout&&(w=setTimeout(function(){v=!0,h(z)},m.timeout));var g=[];try{if(m.extraData)for(var j in m.extraData)m.extraData.hasOwnProperty(j)&&(a.isPlainObject(m.extraData[j])&&m.extraData[j].hasOwnProperty("name")&&m.extraData[j].hasOwnProperty("value")?g.push(a('<input type="hidden" name="'+m.extraData[j].name+'">').val(m.extraData[j].value).appendTo(x)[0]):g.push(a('<input type="hidden" name="'+j+'">').val(m.extraData[j]).appendTo(x)[0]));m.iframeTarget||(q.appendTo("body"),r.attachEvent?r.attachEvent("onload",h):r.addEventListener("load",h,!1)),setTimeout(b,15);try{x.submit()}catch(a){var k=document.createElement("form").submit;k.apply(x)}}finally{x.setAttribute("action",f),c?x.setAttribute("target",c):l.removeAttr("target"),a(g).remove()}}function h(b){if(!s.aborted&&!F){if(E=e(r),E||(d("cannot access response document"),b=A),b===z&&s)return s.abort("timeout"),void y.reject(s,"timeout");if(b==A&&s)return s.abort("server abort"),void y.reject(s,"error","server abort");if(E&&E.location.href!=m.iframeSrc||v){r.detachEvent?r.detachEvent("onload",h):r.removeEventListener("load",h,!1);var c,f="success";try{if(v)throw"timeout";var g="xml"==m.dataType||E.XMLDocument||a.isXMLDoc(E);if(d("isXml="+g),!g&&window.opera&&(null===E.body||!E.body.innerHTML)&&--G)return d("requeing onLoad callback, DOM not available"),void setTimeout(h,250);var i=E.body?E.body:E.documentElement;s.responseText=i?i.innerHTML:null,s.responseXML=E.XMLDocument?E.XMLDocument:E,g&&(m.dataType="xml"),s.getResponseHeader=function(a){return{"content-type":m.dataType}[a]},i&&(s.status=Number(i.getAttribute("status"))||s.status,s.statusText=i.getAttribute("statusText")||s.statusText);var j=(m.dataType||"").toLowerCase(),k=/(json|script|text)/.test(j);if(k||m.textarea){var l=E.getElementsByTagName("textarea")[0];if(l)s.responseText=l.value,s.status=Number(l.getAttribute("status"))||s.status,s.statusText=l.getAttribute("statusText")||s.statusText;else if(k){var o=E.getElementsByTagName("pre")[0],p=E.getElementsByTagName("body")[0];o?s.responseText=o.textContent?o.textContent:o.innerText:p&&(s.responseText=p.textContent?p.textContent:p.innerText)}}else"xml"==j&&!s.responseXML&&s.responseText&&(s.responseXML=H(s.responseText));try{D=J(s,j,m)}catch(a){f="parsererror",s.error=c=a||f}}catch(a){d("error caught: ",a),f="error",s.error=c=a||f}s.aborted&&(d("upload aborted"),f=null),s.status&&(f=s.status>=200&&300>s.status||304===s.status?"success":"error"),"success"===f?(m.success&&m.success.call(m.context,D,"success",s),y.resolve(s.responseText,"success",s),n&&a.event.trigger("ajaxSuccess",[s,m])):f&&(void 0===c&&(c=s.statusText),m.error&&m.error.call(m.context,s,f,c),y.reject(s,"error",c),n&&a.event.trigger("ajaxError",[s,m,c])),n&&a.event.trigger("ajaxComplete",[s,m]),n&&!--a.active&&a.event.trigger("ajaxStop"),m.complete&&m.complete.call(m.context,s,f),F=!0,m.timeout&&clearTimeout(w),setTimeout(function(){m.iframeTarget||q.remove(),s.responseXML=null},100)}}}var j,k,m,n,o,q,r,s,t,u,v,w,x=l[0],y=a.Deferred();if(c)for(k=0;p.length>k;k++)j=a(p[k]),f?j.prop("disabled",!1):j.removeAttr("disabled");if(m=a.extend(!0,{},a.ajaxSettings,b),m.context=m.context||m,o="jqFormIO"+(new Date).getTime(),m.iframeTarget?(q=a(m.iframeTarget),u=q.attr2("name"),u?o=u:q.attr2("name",o)):(q=a('<iframe name="'+o+'" src="'+m.iframeSrc+'" />'),q.css({position:"absolute",top:"-1000px",left:"-1000px"})),r=q[0],s={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(b){var c="timeout"===b?"timeout":"aborted";d("aborting upload... "+c),this.aborted=1;try{r.contentWindow.document.execCommand&&r.contentWindow.document.execCommand("Stop")}catch(a){}q.attr("src",m.iframeSrc),s.error=c,m.error&&m.error.call(m.context,s,c,b),n&&a.event.trigger("ajaxError",[s,m,c]),m.complete&&m.complete.call(m.context,s,c)}},n=m.global,n&&0==a.active++&&a.event.trigger("ajaxStart"),n&&a.event.trigger("ajaxSend",[s,m]),m.beforeSend&&!1===m.beforeSend.call(m.context,s,m))return m.global&&a.active--,y.reject(),y;if(s.aborted)return y.reject(),y;(t=x.clk)&&(u=t.name)&&!t.disabled&&(m.extraData=m.extraData||{},m.extraData[u]=t.value,"image"==t.type&&(m.extraData[u+".x"]=x.clk_x,m.extraData[u+".y"]=x.clk_y));var z=1,A=2,B=a("meta[name=csrf-token]").attr("content"),C=a("meta[name=csrf-param]").attr("content");C&&B&&(m.extraData=m.extraData||{},m.extraData[C]=B),m.forceSync?g():setTimeout(g,10);var D,E,F,G=50,H=a.parseXML||function(a,b){return window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml"),b&&b.documentElement&&"parsererror"!=b.documentElement.nodeName?b:null},I=a.parseJSON||function(a){return window.eval("("+a+")")},J=function(b,c,d){var e=b.getResponseHeader("content-type")||"",f="xml"===c||!c&&e.indexOf("xml")>=0,g=f?b.responseXML:b.responseText;return f&&"parsererror"===g.documentElement.nodeName&&a.error&&a.error("parsererror"),d&&d.dataFilter&&(g=d.dataFilter(g,c)),"string"==typeof g&&("json"===c||!c&&e.indexOf("json")>=0?g=I(g):("script"===c||!c&&e.indexOf("javascript")>=0)&&a.globalEval(g)),g};return y}if(!this.length)return d("ajaxSubmit: skipping submit process - no element selected"),this;var i,j,k,l=this;"function"==typeof b&&(b={success:b}),i=b.type||this.attr2("method"),j=b.url||this.attr2("action"),k="string"==typeof j?a.trim(j):"",k=k||window.location.href||"",k&&(k=(k.match(/^([^#]+)/)||[])[1]),b=a.extend(!0,{url:k,success:a.ajaxSettings.success,type:i||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},b);var m={};if(this.trigger("form-pre-serialize",[this,b,m]),m.veto)return d("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(b.beforeSerialize&&!1===b.beforeSerialize(this,b))return d("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var n=b.traditional;void 0===n&&(n=a.ajaxSettings.traditional);var o,p=[],q=this.formToArray(b.semantic,p);if(b.data&&(b.extraData=b.data,o=a.param(b.data,n)),b.beforeSubmit&&!1===b.beforeSubmit(q,this,b))return d("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[q,this,b,m]),m.veto)return d("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var r=a.param(q,n);o&&(r=r?r+"&"+o:o),"GET"==b.type.toUpperCase()?(b.url+=(b.url.indexOf("?")>=0?"&":"?")+r,b.data=null):b.data=r;var s=[];if(b.resetForm&&s.push(function(){l.resetForm()}),b.clearForm&&s.push(function(){l.clearForm(b.includeHidden)}),!b.dataType&&b.target){var t=b.success||function(){};s.push(function(c){var d=b.replaceTarget?"replaceWith":"html";a(b.target)[d](c).each(t,arguments)})}else b.success&&s.push(b.success);if(b.success=function(a,c,d){for(var e=b.context||this,f=0,g=s.length;g>f;f++)s[f].apply(e,[a,c,d||l,l])},b.error){var u=b.error;b.error=function(a,c,d){var e=b.context||this;u.apply(e,[a,c,d,l])}}if(b.complete){var v=b.complete;b.complete=function(a,c){var d=b.context||this;v.apply(d,[a,c,l])}}var w=a('input[type=file]:enabled[value!=""]',this),x=w.length>0,y="multipart/form-data",z=l.attr("enctype")==y||l.attr("encoding")==y,A=e.fileapi&&e.formdata;d("fileAPI :"+A);var B,C=(x||z)&&!A;!1!==b.iframe&&(b.iframe||C)?b.closeKeepAlive?a.get(b.closeKeepAlive,function(){B=h(q)}):B=h(q):B=(x||z)&&A?g(q):a.ajax(b),l.removeData("jqxhr").data("jqxhr",B);for(var D=0;p.length>D;D++)p[D]=null;return this.trigger("form-submit-notify",[this,b]),this},a.fn.ajaxForm=function(e){if(e=e||{},e.delegation=e.delegation&&a.isFunction(a.fn.on),!e.delegation&&0===this.length){var f={s:this.selector,c:this.context};return!a.isReady&&f.s?(d("DOM not ready, queuing ajaxForm"),a(function(){a(f.s,f.c).ajaxForm(e)}),this):(d("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)")),this)}return e.delegation?(a(document).off("submit.form-plugin",this.selector,b).off("click.form-plugin",this.selector,c).on("submit.form-plugin",this.selector,e,b).on("click.form-plugin",this.selector,e,c),this):this.ajaxFormUnbind().bind("submit.form-plugin",e,b).bind("click.form-plugin",e,c)},a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},a.fn.formToArray=function(b,c){var d=[];if(0===this.length)return d;var f=this[0],g=b?f.getElementsByTagName("*"):f.elements;if(!g)return d;var h,i,j,k,l,m,n;for(h=0,m=g.length;m>h;h++)if(l=g[h],(j=l.name)&&!l.disabled)if(b&&f.clk&&"image"==l.type)f.clk==l&&(d.push({name:j,value:a(l).val(),type:l.type}),d.push({name:j+".x",value:f.clk_x},{name:j+".y",value:f.clk_y}));else if((k=a.fieldValue(l,!0))&&k.constructor==Array)for(c&&c.push(l),i=0,n=k.length;n>i;i++)d.push({name:j,value:k[i]});else if(e.fileapi&&"file"==l.type){c&&c.push(l);var o=l.files;if(o.length)for(i=0;o.length>i;i++)d.push({name:j,value:o[i],type:l.type});else d.push({name:j,value:"",type:l.type})}else null!==k&&void 0!==k&&(c&&c.push(l),d.push({name:j,value:k,type:l.type,required:l.required}));if(!b&&f.clk){var p=a(f.clk),q=p[0];(j=q.name)&&!q.disabled&&"image"==q.type&&(d.push({name:j,value:p.val()}),d.push({name:j+".x",value:f.clk_x},{name:j+".y",value:f.clk_y}))}return d},a.fn.formSerialize=function(b){return a.param(this.formToArray(b))},a.fn.fieldSerialize=function(b){var c=[];return this.each(function(){var d=this.name;if(d){var e=a.fieldValue(this,b);if(e&&e.constructor==Array)for(var f=0,g=e.length;g>f;f++)c.push({name:d,value:e[f]});else null!==e&&void 0!==e&&c.push({name:this.name,value:e})}}),a.param(c)},a.fn.fieldValue=function(b){for(var c=[],d=0,e=this.length;e>d;d++){var f=this[d],g=a.fieldValue(f,b);null===g||void 0===g||g.constructor==Array&&!g.length||(g.constructor==Array?a.merge(c,g):c.push(g))}return c},a.fieldValue=function(b,c){var d=b.name,e=b.type,f=b.tagName.toLowerCase();if(void 0===c&&(c=!0),c&&(!d||b.disabled||"reset"==e||"button"==e||("checkbox"==e||"radio"==e)&&!b.checked||("submit"==e||"image"==e)&&b.form&&b.form.clk!=b||"select"==f&&-1==b.selectedIndex))return null;if("select"==f){var g=b.selectedIndex;if(0>g)return null;for(var h=[],i=b.options,j="select-one"==e,k=j?g+1:i.length,l=j?g:0;k>l;l++){var m=i[l];if(m.selected){var n=m.value;if(n||(n=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value),j)return n;h.push(n)}}return h}return a(b).val()},a.fn.clearForm=function(b){return this.each(function(){a("input,select,textarea",this).clearFields(b)})},a.fn.clearFields=a.fn.clearInputs=function(b){var c=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var d=this.type,e=this.tagName.toLowerCase();c.test(d)||"textarea"==e?this.value="":"checkbox"==d||"radio"==d?this.checked=!1:"select"==e?this.selectedIndex=-1:"file"==d?/MSIE/.test(navigator.userAgent)?a(this).replaceWith(a(this).clone(!0)):a(this).val(""):b&&(!0===b&&/hidden/.test(d)||"string"==typeof b&&a(this).is(b))&&(this.value="")})},a.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},a.fn.enable=function(a){return void 0===a&&(a=!0),this.each(function(){this.disabled=!a})},a.fn.selected=function(b){return void 0===b&&(b=!0),this.each(function(){var c=this.type;if("checkbox"==c||"radio"==c)this.checked=b;else if("option"==this.tagName.toLowerCase()){var d=a(this).parent("select");b&&d[0]&&"select-one"==d[0].type&&d.find("option").selected(!1),this.selected=b}})},a.fn.ajaxSubmit.debug=!1}(jQuery),function(a,b,c){a.fn.backstretch=function(d,e){return(d===c||0===d.length)&&a.error("No images were supplied for Backstretch"),0===a(b).scrollTop()&&b.scrollTo(0,0),this.each(function(){var b=a(this),c=b.data("backstretch");if(c){if("string"==typeof d&&"function"==typeof c[d])return void c[d](e);e=a.extend(c.options,e),c.destroy(!0)}c=new f(this,d,e),b.data("backstretch",c)})},a.backstretch=function(b,c){return a("body").backstretch(b,c).data("backstretch")},a.expr[":"].backstretch=function(b){return a(b).data("backstretch")!==c},a.fn.backstretch.defaults={centeredX:!0,centeredY:!0,duration:5e3,fade:0};var d={left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},e={position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"auto",height:"auto",maxHeight:"none",maxWidth:"none",zIndex:-999999},f=function(c,e,f){this.options=a.extend({},a.fn.backstretch.defaults,f||{}),this.images=a.isArray(e)?e:[e],a.each(this.images,function(){a("<img />")[0].src=this}),this.isBody=c===document.body,this.$container=a(c),this.$root=this.isBody?a(g?b:document):this.$container,c=this.$container.children(".backstretch").first(),this.$wrap=c.length?c:a('<div class="backstretch"></div>').css(d).appendTo(this.$container),this.isBody||(c=this.$container.css("position"),e=this.$container.css("zIndex"),this.$container.css({position:"static"===c?"relative":c,zIndex:"auto"===e?0:e,background:"none"}),this.$wrap.css({zIndex:-999998})),this.$wrap.css({position:this.isBody&&g?"fixed":"absolute"}),this.index=0,this.show(this.index),
a(b).on("resize.backstretch",a.proxy(this.resize,this)).on("orientationchange.backstretch",a.proxy(function(){this.isBody&&0===b.pageYOffset&&(b.scrollTo(0,1),this.resize())},this))};f.prototype={resize:function(){try{var a,c={left:0,top:0},d=this.isBody?this.$root.width():this.$root.innerWidth(),e=d,f=this.isBody?b.innerHeight?b.innerHeight:this.$root.height():this.$root.innerHeight(),g=e/this.$img.data("ratio");g>=f?(a=(g-f)/2,this.options.centeredY&&(c.top="-"+a+"px")):(g=f,e=g*this.$img.data("ratio"),a=(e-d)/2,this.options.centeredX&&(c.left="-"+a+"px")),this.$wrap.css({width:d,height:f}).find("img:not(.deleteable)").css({width:e,height:g}).css(c)}catch(a){}return this},show:function(b){if(!(Math.abs(b)>this.images.length-1)){var c=this,d=c.$wrap.find("img").addClass("deleteable"),f={relatedTarget:c.$container[0]};return c.$container.trigger(a.Event("backstretch.before",f),[c,b]),this.index=b,clearInterval(c.interval),c.$img=a("<img />").css(e).bind("load",function(e){var g=this.width||a(e.target).width();e=this.height||a(e.target).height(),a(this).data("ratio",g/e),a(this).fadeIn(c.options.speed||c.options.fade,function(){d.remove(),c.paused||c.cycle(),a(["after","show"]).each(function(){c.$container.trigger(a.Event("backstretch."+this,f),[c,b])})}),c.resize()}).appendTo(c.$wrap),c.$img.attr("src",c.images[b]),c}},next:function(){return this.show(this.index<this.images.length-1?this.index+1:0)},prev:function(){return this.show(0===this.index?this.images.length-1:this.index-1)},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this.next(),this},cycle:function(){return 1<this.images.length&&(clearInterval(this.interval),this.interval=setInterval(a.proxy(function(){this.paused||this.next()},this),this.options.duration)),this},destroy:function(c){a(b).off("resize.backstretch orientationchange.backstretch"),clearInterval(this.interval),c||this.$wrap.remove(),this.$container.removeData("backstretch")}};var g,h=navigator.userAgent,i=navigator.platform,j=h.match(/AppleWebKit\/([0-9]+)/),j=!!j&&j[1],k=h.match(/Fennec\/([0-9]+)/),k=!!k&&k[1],l=h.match(/Opera Mobi\/([0-9]+)/),m=!!l&&l[1],n=h.match(/MSIE ([0-9]+)/),n=!!n&&n[1];g=!((-1<i.indexOf("iPhone")||-1<i.indexOf("iPad")||-1<i.indexOf("iPod"))&&j&&534>j||b.operamini&&"[object OperaMini]"==={}.toString.call(b.operamini)||l&&7458>m||-1<h.indexOf("Android")&&j&&533>j||k&&6>k||"palmGetResource"in b&&j&&534>j||-1<h.indexOf("MeeGo")&&-1<h.indexOf("NokiaBrowser/8.5.0")||n&&6>=n)}(jQuery,window),function(a){a(["jquery"],function(a){return function(){function b(a,b,c){return j({type:r.error,iconClass:l().iconClasses.error,message:a,optionsOverride:c,title:b})}function c(a,b,c){return j({type:r.info,iconClass:l().iconClasses.info,message:a,optionsOverride:c,title:b})}function d(a){o=a}function e(a,b,c){return j({type:r.success,iconClass:l().iconClasses.success,message:a,optionsOverride:c,title:b})}function f(a,b,c){return j({type:r.warning,iconClass:l().iconClasses.warning,message:a,optionsOverride:c,title:b})}function g(b){var c=l();if(n||k(c),b&&0===a(":focus",b).length)return void b[c.hideMethod]({duration:c.hideDuration,easing:c.hideEasing,complete:function(){m(b)}});n.children().length&&n[c.hideMethod]({duration:c.hideDuration,easing:c.hideEasing,complete:function(){n.remove()}})}function h(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",target:"body",closeHtml:"<button>&times;</button>",newestOnTop:!0}}function i(a){o&&o(a)}function j(b){function c(b){if(!a(":focus",j).length||b)return j[f.hideMethod]({duration:f.hideDuration,easing:f.hideEasing,complete:function(){m(j),f.onHidden&&f.onHidden(),s.state="hidden",s.endTime=new Date,i(s)}})}function d(){(f.timeOut>0||f.extendedTimeOut>0)&&(h=setTimeout(c,f.extendedTimeOut))}function e(){clearTimeout(h),j.stop(!0,!0)[f.showMethod]({duration:f.showDuration,easing:f.showEasing})}var f=l(),g=b.iconClass||f.iconClass;void 0!==b.optionsOverride&&(f=a.extend(f,b.optionsOverride),g=b.optionsOverride.iconClass||g),q++,n=k(f);var h=null,j=a("<div/>"),o=a("<div/>"),p=a("<div/>"),r=a(f.closeHtml),s={toastId:q,state:"visible",startTime:new Date,options:f,map:b};return b.iconClass&&j.addClass(f.toastClass).addClass(g),b.title&&(o.append(b.title).addClass(f.titleClass),j.append(o)),b.message&&(p.append(b.message).addClass(f.messageClass),j.append(p)),f.closeButton&&(r.addClass("toast-close-button"),j.prepend(r)),j.hide(),f.newestOnTop?n.prepend(j):n.append(j),j[f.showMethod]({duration:f.showDuration,easing:f.showEasing,complete:f.onShown}),f.timeOut>0&&(h=setTimeout(c,f.timeOut)),j.hover(e,d),!f.onclick&&f.tapToDismiss&&j.click(c),f.closeButton&&r&&r.click(function(a){a.stopPropagation(),c(!0)}),f.onclick&&j.click(function(){f.onclick(),c()}),i(s),f.debug&&console&&console.log(s),j}function k(b){return b||(b=l()),n=a("#"+b.containerId),n.length?n:(n=a("<div/>").attr("id",b.containerId).addClass(b.positionClass),n.appendTo(a(b.target)),n)}function l(){return a.extend({},h(),s.options)}function m(a){n||(n=k()),a.is(":visible")||(a.remove(),a=null,0===n.children().length&&n.remove())}var n,o,p="2.0.0",q=0,r={error:"error",info:"info",success:"success",warning:"warning"},s={clear:g,error:b,getContainer:k,info:c,options:{},subscribe:d,success:e,version:p,warning:f};return s}()})}("function"==typeof define&&define.amd?define:function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b(require(a[0])):window.toastr=b(window.jQuery)}),function(){function a(a){var b={};return a.forEach(function(a,c){b[a]=c}),b}function b(a,b){Object.keys(a).forEach(function(c){b[c]=a[c]})}function c(a){return Math.min.apply(null,a)}function d(a){return Math.max.apply(null,a)}function e(a){return Array.prototype.concat.apply([],a)}function f(a){return Object.keys(a).map(function(b){return a[b]})}function g(a){for(var b={},c=0;c<a.length;++c)for(var d=a[c],e=0;e<d.length;++e){var f=d[e];b[f]=f}var g=[];for(var h in b)g.push(b[h]);return g}function h(a,b,c,d){return function(e){return arguments.length?(b[c]=e,d&&d(e),a):b[c]}}function i(){function a(b){var d=l,e=2*b,f=e+1,g=b;e<d.length&&(g=d[e].pri<d[g].pri?e:g,f<d.length&&(g=d[f].pri<d[g].pri?f:g),g!==b&&(c(b,g),a(g)))}function b(a){for(var b,d=l,e=d[a].pri;a>0&&(b=a>>1,!(d[b].pri<e));)c(a,b),a=b}function c(a,b){var c=l,d=m,e=c[a];c[a]=c[b],c[b]=e,d[c[a].key]=a,d[c[b].key]=b}function d(){return l.length}function e(){return Object.keys(m)}function f(a){return a in m}function g(a){var b=m[a];if(void 0!==b)return l[b].pri}function h(a,c){if(a in m)return!1;var d={key:a,pri:c},e=l.length;return m[a]=e,l.push(d),b(e),!0}function i(){if(d()>0)return l[0].key}function j(){c(0,l.length-1);var b=l.pop();return delete m[b.key],a(0),b.key}function k(a,c){var d=m[a];if(c>l[d].pri)throw new Error("New priority is greater than current priority. Key: "+a+" Old: "+l[d].pri+" New: "+c);l[d].pri=c,b(d)}var l=[],m={};return{size:d,keys:e,has:f,priority:g,add:h,min:i,removeMin:j,decrease:k}}dagre={},dagre.version="0.0.5",dagre.graph={},dagre.graph=function(){function a(a,b,c){var d=a[b];d||(d=a[b]={count:0,edges:{}}),d.count++,d.edges[c]=!0}function b(a,b,c){var d=a[b];0==--d.count?delete a[b]:delete d.edges[c]}function c(a){var b=h[a];if(a in h)return b;throw new Error("Node '"+a+"' is not in buildGraph:\n"+m.toString())}function d(a){var b=k[a];if(!b)throw new Error("Edge '"+a+"' is not in buildGraph:\n"+m.toString());return b}var h={},i={},j={},k={},m={};return m.addNode=function(a,b){if(m.hasNode(a))throw new Error("Graph already has node '"+a+"':\n"+m.toString());h[a]={id:a,value:b},i[a]={},j[a]={}},m.delNode=function(a){c(a),m.edges(a).forEach(function(a){m.delEdge(a)}),delete i[a],delete j[a],delete h[a]},m.node=function(a){return c(a).value},m.hasNode=function(a){return a in h},m.addEdge=function(b,d,e,f){if(c(d),c(e),m.hasEdge(b))throw new Error("Graph already has edge '"+b+"':\n"+m.toString());k[b]={id:b,source:d,target:e,value:f},a(i[e],d,b),a(j[d],e,b)},m.delEdge=function(a){var c=d(a);b(i[c.target],c.source,a),b(j[c.source],c.target,a),delete k[a]},m.edge=function(a){return d(a).value},m.source=function(a){return d(a).source},m.target=function(a){return d(a).target},m.hasEdge=function(a){return a in k},m.successors=function(a){return c(a),l(j[a]).map(function(a){return h[a].id})},m.predecessors=function(a){return c(a),l(i[a]).map(function(a){return h[a].id})},m.neighbors=function(a){c(a);var b={};return l(j[a]).map(function(a){b[a]=!0}),l(i[a]).map(function(a){b[a]=!0}),l(b).map(function(a){return h[a].id})},m.nodes=function(){var a=[];return m.eachNode(function(b,c){a.push(b)}),a},m.eachNode=function(a){for(var b in h){var c=h[b];a(c.id,c.value)}},m.edges=function(a,b){var d,e;return arguments.length?1===arguments.length?g([m.inEdges(a),m.outEdges(a)]):2===arguments.length?(c(a),c(b),e=j[a],d=b in e?l(e[b].edges):[],d.map(function(a){return k[a].id})):void 0:(d=[],m.eachEdge(function(a){d.push(a)}),d)},m.eachEdge=function(a){for(var b in k){var c=k[b];a(c.id,c.source,c.target,c.value)}},m.inEdges=function(a){return c(a),e(f(i[a]).map(function(a){return l(a.edges)}))},m.outEdges=function(a){return c(a),e(f(j[a]).map(function(a){return l(a.edges)}))},m.subgraph=function(a){var b=dagre.graph();return a.forEach(function(a){b.addNode(a,m.node(a))}),f(k).forEach(function(a){b.hasNode(a.source)&&b.hasNode(a.target)&&b.addEdge(a.id,a.source,a.target,m.edge(a.id))}),b},m.toString=function(){var a="GRAPH:\n";return a+="    Nodes:\n",l(h).forEach(function(b){a+="        "+b+": "+JSON.stringify(h[b].value)+"\n"}),a+="    Edges:\n",l(k).forEach(function(b){var c=k[b];a+="        "+b+" ("+c.source+" -> "+c.target+"): "+JSON.stringify(k[b].value)+"\n"}),a},m},dagre.layout=function(){function a(){var a=dagre.graph(),b=0;return g.nodes.forEach(function(c){var d="id"in c?c.id:"_N"+b++;c.dagre={id:d,width:c.width,height:c.height},a.addNode(d,c.dagre)}),g.edges.forEach(function(c){var d=c.source.dagre.id;if(!a.hasNode(d))throw new Error("Source node for '"+c+"' not in node list");var e=c.target.dagre.id;if(!a.hasNode(e))throw new Error("Target node for '"+c+"' not in node list");if(c.dagre={points:[]},d!==e){var f="id"in c?c.id:"_E"+b++;c.dagre.id=f,c.dagre.minLen=c.minLen||1,c.dagre.width=c.width||0,c.dagre.height=c.height||0,a.addEdge(f,d,e,c.dagre)}}),a}function b(){var b=o.rankSep();try{if(!g.nodes.length)return;var f=a();f.eachEdge(function(a,b,c,d){d.minLen*=2}),o.rankSep(b/2),j.run(f),k.run(f),c(f),l.run(f),m.run(f),d(f),e(f),j.undo(f)}finally{o.rankSep(b)}return o}function c(a){var b=0;a.eachEdge(function(c,d,e,f){var g=a.node(d).rank,h=a.node(e).rank;if(g+1<h){for(var i=d,j=g+1,k=0;j<h;++j,++k){var l="_D"+ ++b,m={width:f.width,height:f.height,edge:{id:c,source:d,target:e,attrs:f},index:k,rank:j,dummy:!0};a.addNode(l,m),a.addEdge("_D"+ ++b,i,l,{}),i=l}a.addEdge("_D"+ ++b,i,e,{}),a.delEdge(c)}})}function d(a){a.eachNode(function(b,c){if(c.dummy){var d=c.edge;a.hasEdge(d.id)||a.addEdge(d.id,d.source,d.target,d.attrs);a.edge(d.id).points[c.index]={x:c.x,y:c.y},a.delNode(b)}})}function e(a){a.eachEdge(function(a,b,c,d){d.reversed&&d.points.reverse()})}function f(a){return function(){return arguments.length?(a.apply(null,arguments),o):a()}}var g={nodes:[],edges:[],debugLevel:0},i=n(),j=dagre.layout.acyclic(),k=dagre.layout.rank(),l=dagre.layout.order(),m=dagre.layout.position(),o={};return o.nodes=h(o,g,"nodes"),o.edges=h(o,g,"edges"),o.orderIters=f(l.iterations),o.nodeSep=f(m.nodeSep),o.edgeSep=f(m.edgeSep),o.rankSep=f(m.rankSep),o.rankDir=f(m.rankDir),o.debugAlignment=f(m.debugAlignment),o.debugLevel=h(o,g,"debugLevel",function(a){i.enabled(a),j.debugLevel(a),k.debugLevel(a),l.debugLevel(a),m.debugLevel(a)}),o.run=i.wrap("Total layout",b),o},dagre.layout.acyclic=function(){function a(a){function c(b){b in e||(e[b]=d[b]=!0,a.outEdges(b).forEach(function(e){var g,h=a.target(e);h in d?(g=a.edge(e),a.delEdge(e),g.reversed=!0,++f,a.addEdge(e,h,b,g)):c(h)}),delete d[b])}var d={},e={},f=0;a.eachNode(function(a){c(a)}),b.debugLevel>=2&&console.log("Acyclic Phase: reversed "+f+" edge(s)")}var b={debugLevel:0},c=n(),d={};return d.debugLevel=h(d,b,"debugLevel",function(a){c.enabled(a)}),d.run=c.wrap("Acyclic Phase",a),d.undo=function(a){a.eachEdge(function(b,c,d,e){e.reversed&&(delete e.reversed,a.delEdge(b),a.addEdge(b,d,c,e))})},d},dagre.layout.rank=function(){function a(a){b(a),m(a).forEach(function(b){var c=a.subgraph(b);d(c),e(c)})}function b(a){var b={},c=i();for(a.eachNode(function(d){c.add(d,a.inEdges(d).length),b[d]=0});c.size()>0;){var d=c.min();if(c.priority(d)>0)throw new Error("Input buildGraph is not acyclic: "+a.toString());c.removeMin();var e=b[d];a.node(d).rank=e,a.outEdges(d).forEach(function(d){var f=a.target(d);b[f]=Math.max(b[f],e+(a.edge(d).minLen||1)),c.decrease(f,c.priority(f)-1)})}}function d(a){function b(g,h){e[g]=!0,a.node(g).rank=h,d[g].forEach(function(d){if(!(d in e)){var i=c[f(g,d)];b(d,h+(a.edges(g,d).length?i:-i))}})}var c={};a.eachEdge(function(a,b,d,e){var g=f(b,d);c[g]=Math.max(c[g]||1,e.minLen||1)});var d=dagre.util.prim(a,function(b,d){return Math.abs(a.node(b).rank-a.node(d).rank)-c[f(b,d)]}),e={};return b(a.nodes()[0],0),d}function e(a){var b=c(a.nodes().map(function(b){return a.node(b).rank}));a.eachNode(function(a,c){c.rank-=b})}function f(a,b){return a<b?a.length+":"+a+"-"+b:b.length+":"+b+"-"+a}var g={debugLevel:0},j=n(),k={};return k.debugLevel=h(k,g,"debugLevel",function(a){j.enabled(a)}),k.run=j.wrap("Rank Phase",a),k},dagre.layout.order=function(){function b(a){var b=c(a),e=g(b),f=j(a,b);i.debugLevel>=2&&console.log("Order phase start cross count: "+f);var h,k,l;for(k=0,l=0;l<4&&k<i.iterations;++k,++l)h=d(a,k,b),h<f&&(e=g(b),f=h,l=0),i.debugLevel>=3&&console.log("Order phase iter "+k+" cross count: "+f);return e.forEach(function(b){b.forEach(function(b,c){a.node(b).order=c})}),i.debugLevel>=2&&(console.log("Order iterations: "+k),console.log("Order phase best cross count: "+f)),e}function c(a){var b=[];return a.eachNode(function(a,c){(b[c.rank]||(b[c.rank]=[])).push(a)}),b}function d(a,b,c){var d,f=0;if(b%2==0)for(d=1;d<c.length;++d)e(a,c[d-1],c[d],"inEdges"),f+=k(a,c[d-1],c[d]);else for(d=c.length-2;d>=0;--d)e(a,c[d+1],c[d],"outEdges"),f+=k(a,c[d],c[d+1]);return f}function e(b,c,d,e){for(var g=a(d),h=f(b,c,d,e),i=d.slice(0).sort(function(a,b){return h[a]-h[b]||g[a]-g[b]}),j=d.length-1;j>=0;--j)-1!==h[d[j]]&&(d[j]=i.pop())}function f(b,c,d,e){var f=a(c),g={};return d.forEach(function(a){var c=-1,d=b[e](a);d.length>0&&(c=0,d.forEach(function(d){var e=b.source(d),g=e===a?b.target(d):e;c+=f[g]}),c/=d.length),g[a]=c}),g}function g(a){return a.map(function(a){return a.slice(0)})}var i={iterations:24,debugLevel:0},l=n(),m={};return m.iterations=h(m,i,"iterations"),m.debugLevel=h(m,i,"debugLevel",function(a){l.enabled(a)}),m.run=l.wrap("Order Phase",b),m};var j=dagre.layout.order.crossCount=function(a,b){var c,d=0;return b.forEach(function(b){c&&(d+=k(a,c,b)),c=b}),d},k=dagre.layout.order.bilayerCrossCount=function(b,c,d){var e=a(d),f=[];c.forEach(function(a){var c=[];b.outEdges(a).forEach(function(a){c.push(e[b.target(a)])}),c.sort(function(a,b){return a-b}),f=f.concat(c)});for(var g=1;g<d.length;)g<<=1;var h=2*g-1;g-=1;for(var i=[],j=0;j<h;++j)i[j]=0;var k=0;return f.forEach(function(a){var b=a+g;++i[b];for(;b>0;)b%2&&(k+=i[b+1]),b=b-1>>1,++i[b]}),k};dagre.layout.position=function(){function a(a){var e=[];a.eachNode(function(a,b){(e[b.rank]||(e[b.rank]=[]))[b.order]=a});var h=b(a,e),i={};["up","down"].forEach(function(b){"down"===b&&e.reverse(),["left","right"].forEach(function(c){"right"===c&&q(e);var d=b+"-"+c;if(!v.debugAlignment||v.debugAlignment===d){var f=g(a,e,h,"up"===b?"predecessors":"successors");i[d]=j(a,e,f.pos,f.root,f.align),"right"===c&&p(e,i[d])}"right"===c&&q(e)}),"down"===b&&e.reverse()}),v.debugAlignment?a.eachNode(function(b,c){t(a,b,i[v.debugAlignment][b])}):(o(a,e,i),a.eachNode(function(b){var c=f(i).map(function(a){return a[b]}).sort(function(a,b){return a-b});t(a,b,(c[1]+c[2])/2)}));var k=c(a.nodes().map(function(b){return t(a,b)-r(a,b)/2}));a.eachNode(function(b){t(a,b,t(a,b)-k)});var l=0;e.forEach(function(b){var c=d(b.map(function(b){return s(a,b)}));l+=c/2,b.forEach(function(b){u(a,b,l)}),l+=c/2+v.rankSep})}function b(a,b){var c={},d={};b[0].forEach(function(a,b){d[a]=b});for(var e=1;e<b.length;++e)for(var f=b[e],g=0,h=0,i=0;i<f.length;++i){var j=f[i];d[j]=i;var k=null;if(a.node(j).dummy&&a.predecessors(j).some(function(b){return!!a.node(b).dummy&&(k=d[b],!0)}),null===k&&i===f.length-1&&(k=b[e-1].length-1),null!==k){for(;h<=i;++h){var l=f[h];a.inEdges(l).forEach(function(b){var e=d[a.source(b)];(e<g||e>k)&&(c[b]=!0)})}g=k}}return c}function g(a,b,c,d){var f={},g={},h={};return b.forEach(function(a){a.forEach(function(a,b){g[a]=a,h[a]=a,f[a]=b})}),b.forEach(function(b){var i=-1;b.forEach(function(b){var j=a[d](b);if(j.length>0){j.sort(function(a,b){return f[a]-f[b]});var k=(j.length-1)/2;j.slice(Math.floor(k),Math.ceil(k)+1).forEach(function(d){h[b]===b&&!c[e([a.edges(b,d),a.edges(d,b)])[0]]&&i<f[d]&&(h[d]=b,h[b]=g[b]=g[d],i=f[d])})}})}),{pos:f,root:g,align:h}}function i(a,b){var c=a.node(b).dummy?v.edgeSep:v.nodeSep;return r(a,b)/2+c/2}function j(a,b,c,d,e){function g(b){if(!(b in l)){l[b]=0;var f=b;do{if(c[f]>0){var m=d[k[f]];g(m),h[b]===b&&(h[b]=h[m]);var n=i(a,k[f])+i(a,f);h[b]!==h[m]?j[h[m]]=Math.min(j[h[m]]||Number.POSITIVE_INFINITY,l[b]-l[m]-n):l[b]=Math.max(l[b],l[m]+n)}f=e[f]}while(f!==b)}}var h={},j={},k={},l={};b.forEach(function(a){a.forEach(function(b,c){h[b]=b,k[b]=c>0?a[c-1]:null})}),f(d).forEach(function(a){g(a)});var m=0;return b.forEach(function(a){var b=j[a[0]];void 0===b&&(b=0),m=j[a[0]]=b+m}),b.forEach(function(a){a.forEach(function(a){if(l[a]=l[d[a]],d[a]===a){var b=j[h[a]];b<Number.POSITIVE_INFINITY&&(l[a]+=b)}})}),l}function k(a,b,d){return c(b.map(function(b){var c=b[0];return d[c]-r(a,c)/2}))}function l(a,b,c){return d(b.map(function(b){var d=b[b.length-1];return c[d]-r(a,d)/2}))}function m(a,b){Object.keys(b).forEach(function(c){b[c]+=a})}function o(a,b,c){var d,e,g=Number.POSITIVE_INFINITY;f(c).forEach(function(c){var f=k(a,b,c),h=l(a,b,c),i=h-f;i<g&&(d=f,e=h,g=i)}),["up","down"].forEach(function(e){var f=c[e+"-left"],g=d-k(a,b,f);g&&m(g,f)}),["up","down"].forEach(function(d){var f=c[d+"-right"],g=e-l(a,b,f);g&&m(g,f)})}function p(a,b){var c=d(f(b));Object.keys(b).forEach(function(a){b[a]=c-b[a]})}function q(a){a.forEach(function(a){a.reverse()})}function r(a,b){switch(v.rankDir){case"LR":return a.node(b).height;default:return a.node(b).width}}function s(a,b){switch(v.rankDir){case"LR":return a.node(b).width;default:return a.node(b).height}}function t(a,b,c){switch(v.rankDir){case"LR":if(arguments.length<3)return a.node(b).y;a.node(b).y=c;break;default:if(arguments.length<3)return a.node(b).x;a.node(b).x=c}}function u(a,b,c){switch(v.rankDir){case"LR":if(arguments.length<3)return a.node(b).x;a.node(b).x=c;break;default:if(arguments.length<3)return a.node(b).y;a.node(b).y=c}}var v={nodeSep:50,edgeSep:10,rankSep:30,rankDir:"TB",debugAlignment:null,debugLevel:0},w=n(),x={};return x.nodeSep=h(x,v,"nodeSep"),x.edgeSep=h(x,v,"edgeSep"),x.rankSep=h(x,v,"rankSep"),x.rankDir=h(x,v,"rankDir"),x.debugAlignment=h(x,v,"debugAlignment"),x.debugLevel=h(x,v,"debugLevel",function(a){w.enabled(a)}),x.run=w.wrap("Position Phase",a),x},dagre.util={};var l=dagre.util.keys=Object.keys,m=dagre.util.components=function(a){function b(c,e){c in d||(d[c]=!0,e.push(c),a.neighbors(c).forEach(function(a){b(a,e)}))}var c=[],d={};return a.eachNode(function(a){var d=[];b(a,d),d.length>0&&c.push(d)}),c},n=(dagre.util.prim=function(a,b){var c={},d={},e=i();if(0===a.nodes().length)return c;a.eachNode(function(a){e.add(a,Number.POSITIVE_INFINITY),c[a]=[]}),e.decrease(a.nodes()[0],0);for(var f,g=!1;e.size()>0;){if((f=e.removeMin())in d)c[f].push(d[f]),c[d[f]].push(f);else{if(g)throw new Error("Input buildGraph is not connected:\n"+a.toString());g=!0}a.neighbors(f).forEach(function(a){var c=e.priority(a);if(void 0!==c){var g=b(f,a);g<c&&(d[a]=f,e.decrease(a,g))}})}return c},dagre.util.intersectRect=function(a,b){var c,d,e=a.x,f=a.y,g=b.x-e,h=b.y-f,i=a.width/2,j=a.height/2;return Math.abs(h)*i>Math.abs(g)*j?(h<0&&(j=-j),c=0===h?0:j*g/h,d=j):(g<0&&(i=-i),c=i,d=0===g?0:i*h/g),{x:e+c,y:f+d}},dagre.util.pointStr=function(a){return a.x+","+a.y},function(){var a={},b=!1;return a.enabled=function(c){return arguments.length?(b=c,a):b},a.wrap=function(a,c){return function(){var d=b?(new Date).getTime():null;try{return c.apply(null,arguments)}finally{d&&console.log(a+" time: "+((new Date).getTime()-d)+"ms")}}},a});dagre.dot={},dagre.dot.toGraph=function(a){function c(a,c){g.hasNode(a)||g.addNode(a,{id:a,label:a}),c&&b(c,g.node(a))}function d(a,c,d){var e=a+"-"+c,f=i[e];f||(f=i[e]=0),i[e]++;var h=d.id||e+"-"+f,j={};b(d,j),b({id:h},j),g.addEdge(h,a,c,j)}function e(a){switch(a.type){case"node":c(a.id,a.attrs);break;case"edge":var b;a.elems.forEach(function(c){switch(e(c),c.type){case"node":var f=c.id;b&&(d(b,f,a.attrs),h&&d(f,b,a.attrs)),b=f;break;default:throw new Error("Unsupported type incident on edge: "+c.type)}});break;case"attr":break;default:throw new Error("Unsupported statement type: "+a.type)}}var f=dot_parser.parse(a),g=dagre.graph(),h="buildGraph"===f.type,i={};return f.stmts&&f.stmts.forEach(function(a){e(a)}),g},dagre.dot.toObjects=function(a){var b=dagre.dot.toGraph(a);return{nodes:b.nodes().map(function(a){return b.node(a)}),edges:b.edges().map(function(a){var c=b.edge(a);return c.source=b.node(b.source(a)),c.target=b.node(b.target(a)),c})}},dot_parser=function(){function a(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var b={parse:function(b,c){function d(a,b,c){for(var d=a,e=c-a.length,f=0;f<e;f++)d=b+d;return d}function e(a){M<O||(M>O&&(O=M,P=[]),P.push(a))}function f(){var a,c,d,f,h,i,j,k,l,m,n,o,p,q,r,s;for(q=M,r=M,a=[],c=G();null!==c;)a.push(c),c=G();if(null!==a)if(s=M,c=C(),null!==c?(d=G(),null!==d?c=[c,d]:(c=null,M=s)):(c=null,M=s),c=null!==c?c:"",null!==c)if(null!==(d=D())){for(f=[],h=G();null!==h;)f.push(h),h=G();if(null!==f)if(h=w(),null!==(h=null!==h?h:"")){for(i=[],j=G();null!==j;)i.push(j),j=G();if(null!==i)if(123===b.charCodeAt(M)?(j="{",M++):(j=null,0===N&&e('"{"')),null!==j){for(k=[],l=G();null!==l;)k.push(l),l=G();if(null!==k)if(l=g(),null!==(l=null!==l?l:"")){for(m=[],n=G();null!==n;)m.push(n),n=G();if(null!==m)if(125===b.charCodeAt(M)?(n="}",M++):(n=null,0===N&&e('"}"')),null!==n){for(o=[],p=G();null!==p;)o.push(p),p=G();null!==o?a=[a,c,d,f,h,i,j,k,l,m,n,o]:(a=null,M=r)}else a=null,M=r;else a=null,M=r}else a=null,M=r;else a=null,M=r}else a=null,M=r;else a=null,M=r}else a=null,M=r;else a=null,M=r}else a=null,M=r;else a=null,M=r;else a=null,M=r;return null!==a&&(a=function(a,b,c,d){return{type:b,id:c,stmts:d}}(0,a[2],a[4],a[8])),null===a&&(M=q),a}function g(){var a,c,d,f,g,i,j,k,l,m,n;if(l=M,m=M,a=h(),null!==a){for(c=[],d=G();null!==d;)c.push(d),d=G();if(null!==c)if(59===b.charCodeAt(M)?(d=";",M++):(d=null,0===N&&e('";"')),null!==(d=null!==d?d:"")){for(f=[],n=M,g=[],i=G();null!==i;)g.push(i),i=G();if(null!==g)if(null!==(i=h())){for(j=[],k=G();null!==k;)j.push(k),k=G();null!==j?(59===b.charCodeAt(M)?(k=";",M++):(k=null,0===N&&e('";"')),k=null!==k?k:"",null!==k?g=[g,i,j,k]:(g=null,M=n)):(g=null,M=n)}else g=null,M=n;else g=null,M=n;for(;null!==g;){for(f.push(g),n=M,g=[],i=G();null!==i;)g.push(i),i=G();if(null!==g)if(null!==(i=h())){for(j=[],k=G();null!==k;)j.push(k),k=G();null!==j?(59===b.charCodeAt(M)?(k=";",M++):(k=null,0===N&&e('";"')),k=null!==k?k:"",null!==k?g=[g,i,j,k]:(g=null,M=n)):(g=null,M=n)}else g=null,M=n;else g=null,M=n}null!==f?a=[a,c,d,f]:(a=null,M=m)}else a=null,M=m;else a=null,M=m}else a=null,M=m;return null!==a&&(a=function(a,b,c){for(var d=[b],e=0;e<c.length;++e)d.push(c[e][1]);return d}(0,a[0],a[3])),null===a&&(M=l),a}function h(){var a;return a=i(),null===a&&null===(a=m())&&null===(a=j())&&null===(a=l())&&(a=k()),a}function i(){var a,b,c,d,e;if(d=M,e=M,null===(a=z())&&null===(a=x())&&(a=y()),null!==a){for(b=[],c=G();null!==c;)b.push(c),c=G();null!==b?(c=n(),null!==c?a=[a,b,c]:(a=null,M=e)):(a=null,M=e)}else a=null,M=e;return null!==a&&(a=function(a,b,c){return{type:"attr",attrType:b,attrs:c||{}}}(0,a[0],a[2])),null===a&&(M=d),a}function j(){var a,c,d,f,g,h,i;if(h=M,i=M,a=w(),null!==a){for(c=[],d=G();null!==d;)c.push(d),d=G();if(null!==c)if(61===b.charCodeAt(M)?(d="=",M++):(d=null,0===N&&e('"="')),null!==d){for(f=[],g=G();null!==g;)f.push(g),g=G();null!==f?(g=w(),null!==g?a=[a,c,d,f,g]:(a=null,M=i)):(a=null,M=i)}else a=null,M=i;else a=null,M=i}else a=null,M=i;return null!==a&&(a=function(a,b,c){var d={};return d[b]=c,{type:"inlineAttr",attrs:d}}(0,a[0],a[4])),null===a&&(M=h),a}function k(){var a,b,c,d,e;if(d=M,e=M,a=t(),null!==a){for(b=[],c=G();null!==c;)b.push(c),c=G();null!==b?(c=n(),c=null!==c?c:"",null!==c?a=[a,b,c]:(a=null,M=e)):(a=null,M=e)}else a=null,M=e;return null!==a&&(a=function(a,b,c){return{type:"node",id:b,attrs:c||{}}}(0,a[0],a[2])),null===a&&(M=d),a}function l(){var a,b,c,d,e,f,g;if(f=M,g=M,a=s(),null!==a){for(b=[],c=G();null!==c;)b.push(c),c=G();if(null!==b)if(null!==(c=q())){for(d=[],e=G();null!==e;)d.push(e),e=G();null!==d?(e=n(),e=null!==e?e:"",null!==e?a=[a,b,c,d,e]:(a=null,M=g)):(a=null,M=g)}else a=null,M=g;else a=null,M=g}else a=null,M=g;return null!==a&&(a=function(a,b,c,d){for(var e=[b],f=0;f<c.length;++f)e.push(c[f]);return{type:"edge",elems:e,attrs:d||{}}}(0,a[0],a[2],a[4])),null===a&&(M=f),a}function m(){var a,c,d,f,h,i,j,k,l,m;if(j=M,k=M,l=M,a=B(),null!==a){for(c=[],d=G();null!==d;)c.push(d),d=G();if(null!==c){if(m=M,null!==(d=w())){for(f=[],h=G();null!==h;)f.push(h),h=G();null!==f?d=[d,f]:(d=null,M=m)}else d=null,M=m;d=null!==d?d:"",null!==d?a=[a,c,d]:(a=null,M=l)}else a=null,M=l}else a=null,M=l;if(null!==(a=null!==a?a:""))if(123===b.charCodeAt(M)?(c="{",M++):(c=null,0===N&&e('"{"')),null!==c){for(d=[],f=G();null!==f;)d.push(f),f=G();if(null!==d)if(null!==(f=g())){for(h=[],i=G();null!==i;)h.push(i),i=G();null!==h?(125===b.charCodeAt(M)?(i="}",M++):(i=null,0===N&&e('"}"')),null!==i?a=[a,c,d,f,h,i]:(a=null,M=k)):(a=null,M=k)}else a=null,M=k;else a=null,M=k}else a=null,M=k;else a=null,M=k;return null!==a&&(a=function(a,b,c){return b=b[2]||[],{type:"subgraph",id:b[0],stmts:c}}(0,a[0],a[3])),null===a&&(M=j),a}function n(){var a,b,c,d,e,f,g;if(e=M,f=M,a=o(),null!==a){for(b=[],g=M,c=[],d=G();null!==d;)c.push(d),d=G();for(null!==c?(d=o(),null!==d?c=[c,d]:(c=null,M=g)):(c=null,M=g);null!==c;){for(b.push(c),g=M,c=[],d=G();null!==d;)c.push(d),d=G();null!==c?(d=o(),null!==d?c=[c,d]:(c=null,M=g)):(c=null,M=g)}null!==b?a=[a,b]:(a=null,M=f)}else a=null,M=f;return null!==a&&(a=function(a,b,c){for(var d=b,e=0;e<c.length;++e)d=J(d,c[e][1]);return d}(0,a[0],a[1])),null===a&&(M=e),a}function o(){var a,c,d,f,g,h,i;if(h=M,i=M,91===b.charCodeAt(M)?(a="[",M++):(a=null,0===N&&e('"["')),null!==a){for(c=[],d=G();null!==d;)c.push(d),d=G();if(null!==c)if(d=p(),null!==(d=null!==d?d:"")){for(f=[],g=G();null!==g;)f.push(g),g=G();null!==f?(93===b.charCodeAt(M)?(g="]",M++):(g=null,0===N&&e('"]"')),null!==g?a=[a,c,d,f,g]:(a=null,M=i)):(a=null,M=i)}else a=null,M=i;else a=null,M=i}else a=null,M=i;return null!==a&&(a=function(a,b){return b}(0,a[2])),null===a&&(M=h),a}function p(){var a,c,d,f,g,h,i,j,k;if(i=M,j=M,a=r(),null!==a){for(c=[],k=M,d=[],f=G();null!==f;)d.push(f),f=G();if(null!==d)if(44===b.charCodeAt(M)?(f=",",M++):(f=null,0===N&&e('","')),null!==(f=null!==f?f:"")){for(g=[],h=G();null!==h;)g.push(h),h=G();null!==g?(h=r(),null!==h?d=[d,f,g,h]:(d=null,M=k)):(d=null,M=k)}else d=null,M=k;else d=null,M=k;for(;null!==d;){for(c.push(d),k=M,d=[],f=G();null!==f;)d.push(f),f=G();if(null!==d)if(44===b.charCodeAt(M)?(f=",",M++):(f=null,0===N&&e('","')),null!==(f=null!==f?f:"")){for(g=[],h=G();null!==h;)g.push(h),h=G();null!==g?(h=r(),null!==h?d=[d,f,g,h]:(d=null,M=k)):(d=null,M=k)}else d=null,M=k;else d=null,M=k}null!==c?a=[a,c]:(a=null,M=j)}else a=null,M=j;return null!==a&&(a=function(a,b,c){for(var d=b,e=0;e<c.length;++e)d=J(d,c[e][3]);return d}(0,a[0],a[1])),null===a&&(M=i),a}function q(){var a,c,d,f,g,h,i,j;if(h=M,i=M,j=M,"--"===b.substr(M,2)?(a="--",M+=2):(a=null,0===N&&e('"--"')),null!==a?(c=function(a){return L}()?null:"",null!==c?a=[a,c]:(a=null,M=j)):(a=null,M=j),null===a&&(j=M,"->"===b.substr(M,2)?(a="->",M+=2):(a=null,0===N&&e('"->"')),null!==a?(c=function(a){return L}()?"":null,null!==c?a=[a,c]:(a=null,M=j)):(a=null,M=j)),null!==a){for(c=[],d=G();null!==d;)c.push(d),d=G();if(null!==c)if(null!==(d=s())){for(f=[],g=G();null!==g;)f.push(g),g=G();null!==f?(g=q(),g=null!==g?g:"",null!==g?a=[a,c,d,f,g]:(a=null,M=i)):(a=null,M=i)}else a=null,M=i;else a=null,M=i}else a=null,M=i;return null!==a&&(a=function(a,b,c){for(var d=[b],e=0;e<c.length;++e)d.push(c[e]);return d}(0,a[2],a[4])),null===a&&(M=h),a}function r(){var a,c,d,f,g,h,i,j;if(h=M,i=M,a=w(),null!==a){for(j=M,c=[],d=G();null!==d;)c.push(d),d=G();if(null!==c)if(61===b.charCodeAt(M)?(d="=",M++):(d=null,0===N&&e('"="')),null!==d){for(f=[],g=G();null!==g;)f.push(g),g=G();null!==f?(g=w(),null!==g?c=[c,d,f,g]:(c=null,M=j)):(c=null,M=j)}else c=null,M=j;else c=null,M=j;c=null!==c?c:"",null!==c?a=[a,c]:(a=null,M=i)}else a=null,M=i;return null!==a&&(a=function(a,b,c){var d={};return d[b]=c[3],d}(0,a[0],a[1])),null===a&&(M=h),a}function s(){var a,b;return a=m(),null===a&&(b=M,a=t(),null!==a&&(a=function(a,b){return{type:"node",id:b,attrs:{}}}(0,a)),null===a&&(M=b)),a}function t(){var a,b,c,d,e;if(d=M,e=M,a=w(),null!==a){for(b=[],c=G();null!==c;)b.push(c),c=G();null!==b?(c=u(),c=null!==c?c:"",null!==c?a=[a,b,c]:(a=null,M=e)):(a=null,M=e)}else a=null,M=e;return null!==a&&(a=function(a,b){return b}(0,a[0])),null===a&&(M=d),a}function u(){var a,c,d,f,g,h,i,j,k;if(j=M,58===b.charCodeAt(M)?(a=":",M++):(a=null,0===N&&e('":"')),null!==a){for(c=[],d=G();null!==d;)c.push(d),d=G();if(null!==c)if(null!==(d=w())){for(f=[],g=G();null!==g;)f.push(g),g=G();if(null!==f){if(k=M,58===b.charCodeAt(M)?(g=":",M++):(g=null,0===N&&e('":"')),null!==g){for(h=[],i=G();null!==i;)h.push(i),i=G();null!==h?(i=v(),null!==i?g=[g,h,i]:(g=null,M=k)):(g=null,M=k)}else g=null,M=k;g=null!==g?g:"",null!==g?a=[a,c,d,f,g]:(a=null,M=j)}else a=null,M=j}else a=null,M=j;else a=null,M=j}else a=null,M=j;return a}function v(){var a;return 110===b.charCodeAt(M)?(a="n",M++):(a=null,0===N&&e('"n"')),null===a&&("ne"===b.substr(M,2)?(a="ne",M+=2):(a=null,0===N&&e('"ne"')),null===a&&(101===b.charCodeAt(M)?(a="e",M++):(a=null,0===N&&e('"e"')),null===a&&("se"===b.substr(M,2)?(a="se",M+=2):(a=null,0===N&&e('"se"')),null===a&&(115===b.charCodeAt(M)?(a="s",M++):(a=null,0===N&&e('"s"')),null===a&&("sw"===b.substr(M,2)?(a="sw",M+=2):(a=null,0===N&&e('"sw"')),null===a&&(119===b.charCodeAt(M)?(a="w",M++):(a=null,0===N&&e('"w"')),null===a&&("nw"===b.substr(M,2)?(a="nw",M+=2):(a=null,0===N&&e('"nw"')),null===a&&(99===b.charCodeAt(M)?(a="c",M++):(a=null,0===N&&e('"c"')),null===a&&(95===b.charCodeAt(M)?(a="_",M++):(a=null,0===N&&e('"_"'))))))))))),a}function w(){var a,c,d,f,g,h,i,j,k;if(N++,h=M,i=M,/^[a-zA-Z\u0200-\u0377_]/.test(b.charAt(M))?(a=b.charAt(M),M++):(a=null,0===N&&e("[a-zA-Z\\u0200-\\u0377_]")),null!==a){for(c=[],/^[a-zA-Z\u0200-\u0377_0-9]/.test(b.charAt(M))?(d=b.charAt(M),M++):(d=null,0===N&&e("[a-zA-Z\\u0200-\\u0377_0-9]"));null!==d;)c.push(d),/^[a-zA-Z\u0200-\u0377_0-9]/.test(b.charAt(M))?(d=b.charAt(M),M++):(d=null,0===N&&e("[a-zA-Z\\u0200-\\u0377_0-9]"));null!==c?a=[a,c]:(a=null,M=i)
}else a=null,M=i;if(null!==a&&(a=function(a,b,c){return b+c.join("")}(0,a[0],a[1])),null===a&&(M=h),null===a){if(h=M,i=M,45===b.charCodeAt(M)?(a="-",M++):(a=null,0===N&&e('"-"')),a=null!==a?a:"",null!==a)if(46===b.charCodeAt(M)?(c=".",M++):(c=null,0===N&&e('"."')),null!==c){if(/^[0-9]/.test(b.charAt(M))?(f=b.charAt(M),M++):(f=null,0===N&&e("[0-9]")),null!==f)for(d=[];null!==f;)d.push(f),/^[0-9]/.test(b.charAt(M))?(f=b.charAt(M),M++):(f=null,0===N&&e("[0-9]"));else d=null;null!==d?a=[a,c,d]:(a=null,M=i)}else a=null,M=i;else a=null,M=i;if(null!==a&&(a=function(a,b,c,d){return b+c+d.join("")}(0,a[0],a[1],a[2])),null===a&&(M=h),null===a){if(h=M,i=M,45===b.charCodeAt(M)?(a="-",M++):(a=null,0===N&&e('"-"')),a=null!==a?a:"",null!==a){if(/^[0-9]/.test(b.charAt(M))?(d=b.charAt(M),M++):(d=null,0===N&&e("[0-9]")),null!==d)for(c=[];null!==d;)c.push(d),/^[0-9]/.test(b.charAt(M))?(d=b.charAt(M),M++):(d=null,0===N&&e("[0-9]"));else c=null;if(null!==c){if(j=M,46===b.charCodeAt(M)?(d=".",M++):(d=null,0===N&&e('"."')),null!==d){for(f=[],/^[0-9]/.test(b.charAt(M))?(g=b.charAt(M),M++):(g=null,0===N&&e("[0-9]"));null!==g;)f.push(g),/^[0-9]/.test(b.charAt(M))?(g=b.charAt(M),M++):(g=null,0===N&&e("[0-9]"));null!==f?d=[d,f]:(d=null,M=j)}else d=null,M=j;d=null!==d?d:"",null!==d?a=[a,c,d]:(a=null,M=i)}else a=null,M=i}else a=null,M=i;if(null!==a&&(a=function(a,b,c,d){return b+c.join("")+(d[0]||"")+(d[1]||[]).join("")}(0,a[0],a[1],a[2])),null===a&&(M=h),null===a){if(h=M,i=M,34===b.charCodeAt(M)?(a='"',M++):(a=null,0===N&&e('"\\""')),null!==a){if(j=M,'\\"'===b.substr(M,2)?(d='\\"',M+=2):(d=null,0===N&&e('"\\\\\\""')),null!==d&&(d='"'),null===d&&(M=j),null===d&&(j=M,k=M,92===b.charCodeAt(M)?(d="\\",M++):(d=null,0===N&&e('"\\\\"')),null!==d?(/^[^"]/.test(b.charAt(M))?(f=b.charAt(M),M++):(f=null,0===N&&e('[^"]')),null!==f?d=[d,f]:(d=null,M=k)):(d=null,M=k),null!==d&&(d=function(a,b){return"\\"+b}(0,d[1])),null===d&&(M=j),null===d&&(/^[^"]/.test(b.charAt(M))?(d=b.charAt(M),M++):(d=null,0===N&&e('[^"]')))),null!==d)for(c=[];null!==d;)c.push(d),j=M,'\\"'===b.substr(M,2)?(d='\\"',M+=2):(d=null,0===N&&e('"\\\\\\""')),null!==d&&(d='"'),null===d&&(M=j),null===d&&(j=M,k=M,92===b.charCodeAt(M)?(d="\\",M++):(d=null,0===N&&e('"\\\\"')),null!==d?(/^[^"]/.test(b.charAt(M))?(f=b.charAt(M),M++):(f=null,0===N&&e('[^"]')),null!==f?d=[d,f]:(d=null,M=k)):(d=null,M=k),null!==d&&(d=function(a,b){return"\\"+b}(0,d[1])),null===d&&(M=j),null===d&&(/^[^"]/.test(b.charAt(M))?(d=b.charAt(M),M++):(d=null,0===N&&e('[^"]'))));else c=null;null!==c?(34===b.charCodeAt(M)?(d='"',M++):(d=null,0===N&&e('"\\""')),null!==d?a=[a,c,d]:(a=null,M=i)):(a=null,M=i)}else a=null,M=i;null!==a&&(a=function(a,b){return b.join("")}(0,a[1])),null===a&&(M=h)}}}return N--,0===N&&null===a&&e("identifier"),a}function x(){var a,c;return c=M,"node"===b.substr(M,4).toLowerCase()?(a=b.substr(M,4),M+=4):(a=null,0===N&&e('"node"')),null!==a&&(a=function(a,b){return b.toLowerCase()}(0,a)),null===a&&(M=c),a}function y(){var a,c;return c=M,"edge"===b.substr(M,4).toLowerCase()?(a=b.substr(M,4),M+=4):(a=null,0===N&&e('"edge"')),null!==a&&(a=function(a,b){return b.toLowerCase()}(0,a)),null===a&&(M=c),a}function z(){var a,c;return c=M,"buildGraph"===b.substr(M,5).toLowerCase()?(a=b.substr(M,5),M+=5):(a=null,0===N&&e('"buildGraph"')),null!==a&&(a=function(a,b){return b.toLowerCase()}(0,a)),null===a&&(M=c),a}function A(){var a,c;return c=M,"digraph"===b.substr(M,7).toLowerCase()?(a=b.substr(M,7),M+=7):(a=null,0===N&&e('"digraph"')),null!==a&&(a=function(a,b){return b.toLowerCase()}(0,a)),null===a&&(M=c),a}function B(){var a,c;return c=M,"subgraph"===b.substr(M,8).toLowerCase()?(a=b.substr(M,8),M+=8):(a=null,0===N&&e('"subgraph"')),null!==a&&(a=function(a,b){return b.toLowerCase()}(0,a)),null===a&&(M=c),a}function C(){var a,c;return c=M,"strict"===b.substr(M,6).toLowerCase()?(a=b.substr(M,6),M+=6):(a=null,0===N&&e('"strict"')),null!==a&&(a=function(a,b){return b.toLowerCase()}(0,a)),null===a&&(M=c),a}function D(){var a,b;return a=z(),null===a&&(b=M,a=A(),null!==a&&(a=function(a,b){return L="digraph"===b,b}(0,a)),null===a&&(M=b)),a}function E(){var a,c;if(N++,/^[ \t\r\n]/.test(b.charAt(M))?(c=b.charAt(M),M++):(c=null,0===N&&e("[ \\t\\r\\n]")),null!==c)for(a=[];null!==c;)a.push(c),/^[ \t\r\n]/.test(b.charAt(M))?(c=b.charAt(M),M++):(c=null,0===N&&e("[ \\t\\r\\n]"));else a=null;return N--,0===N&&null===a&&e("whitespace"),a}function F(){var a,c,d,f,g,h,i;if(N++,g=M,"//"===b.substr(M,2)?(a="//",M+=2):(a=null,0===N&&e('"//"')),null!==a){for(c=[],/^[^\n]/.test(b.charAt(M))?(d=b.charAt(M),M++):(d=null,0===N&&e("[^\\n]"));null!==d;)c.push(d),/^[^\n]/.test(b.charAt(M))?(d=b.charAt(M),M++):(d=null,0===N&&e("[^\\n]"));null!==c?a=[a,c]:(a=null,M=g)}else a=null,M=g;if(null===a)if(g=M,"/*"===b.substr(M,2)?(a="/*",M+=2):(a=null,0===N&&e('"/*"')),null!==a){for(c=[],h=M,i=M,N++,"*/"===b.substr(M,2)?(d="*/",M+=2):(d=null,0===N&&e('"*/"')),N--,null===d?d="":(d=null,M=i),null!==d?(b.length>M?(f=b.charAt(M),M++):(f=null,0===N&&e("any character")),null!==f?d=[d,f]:(d=null,M=h)):(d=null,M=h);null!==d;)c.push(d),h=M,i=M,N++,"*/"===b.substr(M,2)?(d="*/",M+=2):(d=null,0===N&&e('"*/"')),N--,null===d?d="":(d=null,M=i),null!==d?(b.length>M?(f=b.charAt(M),M++):(f=null,0===N&&e("any character")),null!==f?d=[d,f]:(d=null,M=h)):(d=null,M=h);null!==c?("*/"===b.substr(M,2)?(d="*/",M+=2):(d=null,0===N&&e('"*/"')),null!==d?a=[a,c,d]:(a=null,M=g)):(a=null,M=g)}else a=null,M=g;return N--,0===N&&null===a&&e("comment"),a}function G(){var a;return a=E(),null===a&&(a=F()),a}function H(a){a.sort();for(var b=null,c=[],d=0;d<a.length;d++)a[d]!==b&&(c.push(a[d]),b=a[d]);return c}function I(){for(var a=1,c=1,d=!1,e=0;e<Math.max(M,O);e++){var f=b.charAt(e);"\n"===f?(d||a++,c=1,d=!1):"\r"===f||"\u2028"===f||"\u2029"===f?(a++,c=1,d=!0):(c++,d=!1)}return{line:a,column:c}}function J(a,b){var c={};for(var d in a)c[d]=a[d];for(var d in b)c[d]=b[d];return c}var K={start:f,stmtList:g,stmt:h,attrStmt:i,inlineAttrStmt:j,nodeStmt:k,edgeStmt:l,subgraphStmt:m,attrList:n,attrListBlock:o,aList:p,edgeRHS:q,idDef:r,nodeIdOrSubgraph:s,nodeId:t,port:u,compassPt:v,id:w,node:x,edge:y,graph:z,digraph:A,subgraph:B,strict:C,graphType:D,whitespace:E,comment:F,_:G};if(void 0!==c){if(void 0===K[c])throw new Error("Invalid rule name: "+a(c)+".")}else c="start";var L,M=0,N=0,O=0,P=[],Q=K[c]();if(null===Q||M!==b.length){var R=Math.max(M,O),S=R<b.length?b.charAt(R):null,T=I();throw new this.SyntaxError(H(P),S,R,T.line,T.column)}return Q},toSource:function(){return this._source}};return b.SyntaxError=function(b,c,d,e,f){function g(b,c){var d,e;switch(b.length){case 0:d="end of input";break;case 1:d=b[0];break;default:d=b.slice(0,b.length-1).join(", ")+" or "+b[b.length-1]}return e=c?a(c):"end of input","Expected "+d+" but "+e+" found."}this.name="SyntaxError",this.expected=b,this.found=c,this.message=g(b,c),this.offset=d,this.line=e,this.column=f},b.SyntaxError.prototype=Error.prototype,b}()}(),function(){void 0===Math.sgn&&(Math.sgn=function(a){return 0==a?0:a>0?1:-1});var a={subtract:function(a,b){return{x:a.x-b.x,y:a.y-b.y}},dotProduct:function(a,b){return a.x*b.x+a.y*b.y},square:function(a){return Math.sqrt(a.x*a.x+a.y*a.y)},scale:function(a,b){return{x:a.x*b,y:a.y*b}}},b=64,c=Math.pow(2,-b-1),d=function(b,c){for(var d=[],e=f(b,c),h=c.length-1,i=2*h-1,j=g(e,i,d,0),k=a.subtract(b,c[0]),m=a.square(k),n=0,o=0;j>o;o++){k=a.subtract(b,l(c,h,d[o],null,null));var p=a.square(k);m>p&&(m=p,n=d[o])}return k=a.subtract(b,c[h]),p=a.square(k),m>p&&(m=p,n=1),{location:n,distance:m}},e=function(a,b){var c=d(a,b);return{point:l(b,b.length-1,c.location,null,null),location:c.location}},f=function(b,c){for(var d=c.length-1,e=2*d-1,f=[],g=[],h=[],i=[],k=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],l=0;d>=l;l++)f[l]=a.subtract(c[l],b);for(var l=0;d-1>=l;l++)g[l]=a.subtract(c[l+1],c[l]),g[l]=a.scale(g[l],3);for(var m=0;d-1>=m;m++)for(var n=0;d>=n;n++)h[m]||(h[m]=[]),h[m][n]=a.dotProduct(g[m],f[n]);for(l=0;e>=l;l++)i[l]||(i[l]=[]),i[l].y=0,i[l].x=parseFloat(l)/e;for(var o=d,p=d-1,q=0;o+p>=q;q++){var r=Math.max(0,q-p),s=Math.min(q,o);for(l=r;s>=l;l++)j=q-l,i[l+j].y+=h[j][l]*k[j][l]}return i},g=function(a,c,d,e){var f,j,m=[],n=[],o=[],p=[];switch(h(a,c)){case 0:return 0;case 1:if(e>=b)return d[0]=(a[0].x+a[c].x)/2,1;if(i(a,c))return d[0]=k(a,c),1}l(a,c,.5,m,n),f=g(m,c,o,e+1),j=g(n,c,p,e+1);for(var q=0;f>q;q++)d[q]=o[q];for(var q=0;j>q;q++)d[q+f]=p[q];return f+j},h=function(a,b){var c,d,e=0;c=d=Math.sgn(a[0].y);for(var f=1;b>=f;f++)c=Math.sgn(a[f].y),c!=d&&e++,d=c;return e},i=function(a,b){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;i=a[0].y-a[b].y,j=a[b].x-a[0].x,k=a[0].x*a[b].y-a[b].x*a[0].y;for(var t=max_distance_below=0,u=1;b>u;u++){var v=i*a[u].x+j*a[u].y+k;v>t?t=v:max_distance_below>v&&(max_distance_below=v)}return n=0,o=1,p=0,q=i,r=j,s=k-t,l=n*r-q*o,m=1/l,e=(o*s-r*p)*m,q=i,r=j,s=k-max_distance_below,l=n*r-q*o,m=1/l,f=(o*s-r*p)*m,g=Math.min(e,f),h=Math.max(e,f),d=h-g,c>d?1:0},k=function(a,b){var c=1,d=a[b].x-a[0].x,e=a[b].y-a[0].y,f=a[0].x-0;return 0+c*((d*(a[0].y-0)-e*f)*(1/(0*d-e*c)))},l=function(a,b,c,d,e){for(var f=[[]],g=0;b>=g;g++)f[0][g]=a[g];for(var h=1;b>=h;h++)for(var g=0;b-h>=g;g++)f[h]||(f[h]=[]),f[h][g]||(f[h][g]={}),f[h][g].x=(1-c)*f[h-1][g].x+c*f[h-1][g+1].x,f[h][g].y=(1-c)*f[h-1][g].y+c*f[h-1][g+1].y;if(null!=d)for(g=0;b>=g;g++)d[g]=f[g][0];if(null!=e)for(g=0;b>=g;g++)e[g]=f[b-g][g];return f[b][0]},m={},n=function(a){var b=m[a];if(!b){b=[];var c=function(){return function(b){return Math.pow(b,a)}},d=function(){return function(b){return Math.pow(1-b,a)}},e=function(a){return function(){return a}},f=function(){return function(a){return a}},g=function(){return function(a){return 1-a}},h=function(a){return function(b){for(var c=1,d=0;d<a.length;d++)c*=a[d](b);return c}};b.push(new c);for(var i=1;a>i;i++){for(var j=[new e(a)],k=0;a-i>k;k++)j.push(new f);for(var k=0;i>k;k++)j.push(new g);b.push(new h(j))}b.push(new d),m[a]=b}return b},o=function(a,b){for(var c=n(a.length-1),d=0,e=0,f=0;f<a.length;f++)d+=a[f].x*c[f](b),e+=a[f].y*c[f](b);return{x:d,y:e}},p=function(a,b){return Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2))},q=function(a){return a[0].x==a[1].x&&a[0].y==a[1].y},r=function(a,b,c){if(q(a))return{point:a[0],location:b};for(var d=o(a,b),e=0,f=b,g=c>0?1:-1,h=null;e<Math.abs(c);)f+=.005*g,h=o(a,f),e+=p(h,d),d=h;return{point:h,location:f}},s=function(a){if(q(a))return 0;for(var b=o(a,0),c=0,d=0,e=1,f=null;1>d;)d+=.005*e,f=o(a,d),c+=p(f,b),b=f;return c},t=function(a,b,c){return r(a,b,c).point},u=function(a,b,c){return r(a,b,c).location},v=function(a,b){var c=o(a,b),d=o(a.slice(0,a.length-1),b),e=d.y-c.y,f=d.x-c.x;return 0==e?1/0:Math.atan(e/f)},w=function(a,b,c){var d=r(a,b,c);return d.location>1&&(d.location=1),d.location<0&&(d.location=0),v(a,d.location)},x=function(a,b,c,d){d=null==d?0:d;var e=r(a,b,d),f=v(a,e.location),g=Math.atan(-1/f),h=c/2*Math.sin(g),i=c/2*Math.cos(g);return[{x:e.point.x+i,y:e.point.y+h},{x:e.point.x-i,y:e.point.y-h}]};window.jsBezier={distanceFromCurve:d,gradientAtPoint:v,gradientAtPointAlongCurveFrom:w,nearestPointOnCurve:e,pointOnCurve:o,pointAlongCurveFrom:t,perpendicularToCurveAt:x,locationAlongCurveFrom:u,getLength:s}}(),function(){"use strict";var a=this.Biltong={},b=function(a){return"[object Array]"===Object.prototype.toString.call(a)},c=function(a,c,d){return a=b(a)?a:[a.x,a.y],c=b(c)?c:[c.x,c.y],d(a,c)},d=a.gradient=function(a,b){return c(a,b,function(a,b){return b[0]==a[0]?b[1]>a[1]?1/0:-1/0:b[1]==a[1]?b[0]>a[0]?0:-0:(b[1]-a[1])/(b[0]-a[0])})},e=(a.normal=function(a,b){return-1/d(a,b)},a.lineLength=function(a,b){return c(a,b,function(a,b){return Math.sqrt(Math.pow(b[1]-a[1],2)+Math.pow(b[0]-a[0],2))})},a.quadrant=function(a,b){return c(a,b,function(a,b){return b[0]>a[0]?b[1]>a[1]?2:1:b[0]==a[0]?b[1]>a[1]?2:1:b[1]>a[1]?3:4})}),f=(a.theta=function(a,b){return c(a,b,function(a,b){var c=d(a,b),f=Math.atan(c),g=e(a,b);return(4==g||3==g)&&(f+=Math.PI),0>f&&(f+=2*Math.PI),f})},a.intersects=function(a,b){var c=a.x,d=a.x+a.w,e=a.y,f=a.y+a.h,g=b.x,h=b.x+b.w,i=b.y,j=b.y+b.h;return g>=c&&d>=g&&i>=e&&f>=i||h>=c&&d>=h&&i>=e&&f>=i||g>=c&&d>=g&&j>=e&&f>=j||h>=c&&d>=g&&j>=e&&f>=j||c>=g&&h>=c&&e>=i&&j>=e||d>=g&&h>=d&&e>=i&&j>=e||c>=g&&h>=c&&f>=i&&j>=f||d>=g&&h>=c&&f>=i&&j>=f},a.encloses=function(a,b,c){var d=a.x,e=a.x+a.w,f=a.y,g=a.y+a.h,h=b.x,i=b.x+b.w,j=b.y,k=b.y+b.h,l=function(a,b,d,e){return c?b>=a&&d>=e:b>a&&d>e};return l(d,h,e,i)&&l(f,j,g,k)},[null,[1,-1],[1,1],[-1,1],[-1,-1]]),g=[null,[-1,-1],[-1,1],[1,1],[1,-1]];a.pointOnLine=function(a,b,c){var h=d(a,b),i=e(a,b),j=c>0?f[i]:g[i],k=Math.atan(h),l=Math.abs(c*Math.sin(k))*j[1],m=Math.abs(c*Math.cos(k))*j[0];return{x:a.x+m,y:a.y+l}},a.perpendicularLineTo=function(a,b,c){var e=d(a,b),f=Math.atan(-1/e),g=c/2*Math.sin(f),h=c/2*Math.cos(f);return[{x:b.x+h,y:b.y+g},{x:b.x-h,y:b.y-g}]}}.call(this),function(){var a=function(a){return"[object Array]"===Object.prototype.toString.call(a)},b=function(a){return"[object Number]"===Object.prototype.toString.call(a)},c=function(a){return"string"==typeof a},d=function(a){return"boolean"==typeof a},e=function(a){return null==a},f=function(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)},g=function(a){return"[object Date]"===Object.prototype.toString.call(a)},h=function(a){return"[object Function]"===Object.prototype.toString.call(a)},i=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},j=this,k=j.jsPlumbUtil={isArray:a,isString:c,isBoolean:d,isNull:e,isObject:f,isDate:g,isFunction:h,isEmpty:i,isNumber:b,clone:function(b){if(c(b))return""+b;if(d(b))return!!b;if(g(b))return new Date(b.getTime());if(h(b))return b;if(a(b)){for(var e=[],i=0;i<b.length;i++)e.push(this.clone(b[i]));return e}if(f(b)){var j={};for(var k in b)j[k]=this.clone(b[k]);return j}return b},merge:function(b,e,g){var h,i,j={};for(g=g||[],i=0;i<g.length;i++)j[g[i]]=!0;var k=this.clone(b);for(i in e)if(null==k[i])k[i]=e[i];else if(c(e[i])||d(e[i]))j[i]?(h=[],h.push.apply(h,a(k[i])?k[i]:[k[i]]),h.push.apply(h,a(e[i])?e[i]:[e[i]]),k[i]=h):k[i]=e[i];else if(a(e[i]))h=[],a(k[i])&&h.push.apply(h,k[i]),h.push.apply(h,e[i]),k[i]=h;else if(f(e[i])){f(k[i])||(k[i]={});for(var l in e[i])k[i][l]=e[i][l]}return k},replace:function(a,b,c){var d=a,e=d;return b.replace(/([^\.])+/g,function(a,b,d,f){var g=a.match(/([^\[0-9]+){1}(\[)([0-9+])/),h=d+a.length>=f.length,i=function(){return e[g[1]]||function(){return e[g[1]]=[],e[g[1]]}()};if(h)g?i()[g[3]]=c:e[a]=c;else if(g){var j=i();e=j[g[3]]||function(){return j[g[3]]={},j[g[3]]}()}else e=e[a]||function(){return e[a]={},e[a]}()}),a},functionChain:function(a,b,c){for(var d=0;d<c.length;d++){var e=c[d][0][c[d][1]].apply(c[d][0],c[d][2]);if(e===b)return e}return a},populate:function(b,d){var e=function(a){var b=a.match(/(\${.*?})/g);if(null!=b)for(var c=0;c<b.length;c++){var e=d[b[c].substring(2,b[c].length-1)]||"";null!=e&&(a=a.replace(b[c],e))}return a},g=function(b){if(null!=b){if(c(b))return e(b);if(a(b)){for(var d=[],h=0;h<b.length;h++)d.push(g(b[h]));return d}if(f(b)){var i={};for(var j in b)i[j]=g(b[j]);return i}return b}};return g(b)},convertStyle:function(a,b){if("transparent"===a)return a;var c=a,d=function(a){return 1==a.length?"0"+a:a},e=function(a){return d(Number(a).toString(16))},f=/(rgb[a]?\()(.*)(\))/;if(a.match(f)){var g=a.match(f)[2].split(",");c="#"+e(g[0])+e(g[1])+e(g[2]),b||4!=g.length||(c+=e(g[3]))}return c},findWithFunction:function(a,b){if(a)for(var c=0;c<a.length;c++)if(b(a[c]))return c;return-1},indexOf:function(a,b){return a.indexOf?a.indexOf(b):k.findWithFunction(a,function(a){return a==b})},removeWithFunction:function(a,b){var c=k.findWithFunction(a,b);return c>-1&&a.splice(c,1),-1!=c},remove:function(a,b){var c=k.indexOf(a,b);return c>-1&&a.splice(c,1),-1!=c},addWithFunction:function(a,b,c){-1==k.findWithFunction(a,c)&&a.push(b)},addToList:function(a,b,c,d){var e=a[b];return null==e&&(e=[],a[b]=e),e[d?"unshift":"push"](c),e},extend:function(b,c){var d;for(c=a(c)?c:[c],d=0;d<c.length;d++)for(var e in c[d].prototype)c[d].prototype.hasOwnProperty(e)&&(b.prototype[e]=c[d].prototype[e]);var f=function(a,b){return function(){for(d=0;d<c.length;d++)c[d].prototype[a]&&c[d].prototype[a].apply(this,arguments);return b.apply(this,arguments)}},g=function(a){for(var c in a)b.prototype[c]=f(c,a[c])};if(arguments.length>2)for(d=2;d<arguments.length;d++)g(arguments[d]);return b},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=0|16*Math.random();return("x"==a?b:8|3&b).toString(16)})},logEnabled:!0,log:function(){if(k.logEnabled&&"undefined"!=typeof console)try{var a=arguments[arguments.length-1];console.log(a)}catch(a){}},wrap:function(a,b,c){return a=a||function(){},b=b||function(){},function(){var d=null;try{d=b.apply(this,arguments)}catch(a){k.log("jsPlumb function failed : "+a)}if(null==c||d!==c)try{d=a.apply(this,arguments)}catch(a){k.log("wrapped function failed : "+a)}return d}}};k.EventGenerator=function(){var a={},b=!1,c={ready:!0};this.bind=function(b,c,d){return k.addToList(a,b,c,d),this},this.fire=function(d,e,f){if(!b&&a[d]){var g=a[d].length,h=0,i=!1,j=null;if(!this.shouldFireEvent||this.shouldFireEvent(d,e,f))for(;!i&&g>h&&!1!==j;){if(c[d])a[d][h].apply(this,[e,f]);else try{j=a[d][h].apply(this,[e,f])}catch(a){k.log("jsPlumb: fire failed for event "+d+" : "+a)}h++,(null==a||null==a[d])&&(i=!0)}}return this},this.unbind=function(b){return b?delete a[b]:a={},this},this.getListener=function(b){return a[b]},this.setSuspendEvents=function(a){b=a},this.isSuspendEvents=function(){return b},this.cleanupListeners=function(){for(var b in a)a[b]=null}},k.EventGenerator.prototype={cleanup:function(){this.cleanupListeners()}},Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e})}.call(this),function(){"use strict";var a=this,b=a.jsPlumbUtil;b.ieVersion=/MSIE\s([\d.]+)/.test(navigator.userAgent)?new Number(RegExp.$1):-1,b.oldIE=b.ieVersion>-1&&b.ieVersion<9,b.matchesSelector=function(a,b,c){c=c||a.parentNode;for(var d=c.querySelectorAll(b),e=0;e<d.length;e++)if(d[e]===a)return!0;return!1},b.consume=function(a,b){a.stopPropagation?a.stopPropagation():a.returnValue=!1,!b&&a.preventDefault&&a.preventDefault()},b.sizeElement=function(a,b,c,d,e){a&&(a.style.height=e+"px",a.height=e,a.style.width=d+"px",a.width=d,a.style.left=b+"px",a.style.top=c+"px")}}.call(this),function(){var a=this,b=!!window.SVGAngle||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),c=function(){if(void 0===c.vml){var a=document.body.appendChild(document.createElement("div"));a.innerHTML='<v:shape id="vml_flag1" adj="1" />';var b=a.firstChild;null!=b&&null!=b.style?(b.style.behavior="url(#default#VML)",c.vml=!b||"object"==typeof b.adj):c.vml=!1,a.parentNode.removeChild(a)}return c.vml},d=function(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var b=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(b)&&(a=parseFloat(RegExp.$1))}return a}(),e=d>-1&&9>d,f=function(a,b){if(null==a)return[0,0];var c=k(a),d=j(c,0);return[d[b+"X"],d[b+"Y"]]},g=function(a){return null==a?[0,0]:e?[a.clientX+document.documentElement.scrollLeft,a.clientY+document.documentElement.scrollTop]:f(a,"page")},h=function(a){return f(a,"screen")},i=function(a){return f(a,"client")},j=function(a,b){return a.item?a.item(b):a[b]},k=function(a){return a.touches&&a.touches.length>0?a.touches:a.changedTouches&&a.changedTouches.length>0?a.changedTouches:a.targetTouches&&a.targetTouches.length>0?a.targetTouches:[a]},l=function(a){var b={},c=[],d={},e={},f={};this.register=function(g){var h=a.getId(g),i=jsPlumbAdapter.getOffset(g,a);b[h]||(b[h]=g,c.push(g),d[h]={});var j=function(b){if(b)for(var c=0;c<b.childNodes.length;c++)if(3!=b.childNodes[c].nodeType&&8!=b.childNodes[c].nodeType){var g=jsPlumb.getElementObject(b.childNodes[c]),k=a.getId(b.childNodes[c],null,!0);if(k&&e[k]&&e[k]>0){var l=jsPlumbAdapter.getOffset(g,a);d[h][k]={id:k,offset:{left:l.left-i.left,top:l.top-i.top}},f[k]=h}j(b.childNodes[c])}};j(g)},this.updateOffsets=function(b){if(null!=b){var c=jsPlumb.getDOMElement(b),e=a.getId(c),g=d[e],h=jsPlumbAdapter.getOffset(c,a);if(g)for(var i in g){var j=jsPlumb.getElementObject(i),k=jsPlumbAdapter.getOffset(j,a);d[e][i]={id:i,offset:{left:k.left-h.left,top:k.top-h.top}},f[i]=e}}},this.endpointAdded=function(c){var g=document.body,h=a.getId(c),i=jsPlumbAdapter.getOffset(c,a),j=c.parentNode;for(e[h]=e[h]?e[h]+1:1;null!=j&&j!=g;){var k=a.getId(j,null,!0);if(k&&b[k]){var l=jsPlumbAdapter.getOffset(j,a);null==d[k][h]&&(d[k][h]={id:h,offset:{left:i.left-l.left,top:i.top-l.top}},f[h]=k);break}j=j.parentNode}},this.endpointDeleted=function(a){if(e[a.elementId]&&--e[a.elementId]<=0)for(var b in d)d[b]&&(delete d[b][a.elementId],delete f[a.elementId])},this.changeId=function(a,b){d[b]=d[a],d[a]={},f[b]=f[a],f[a]=null},this.getElementsForDraggable=function(a){return d[a]},this.elementRemoved=function(a){var b=f[a];b&&(delete d[b][a],delete f[a])},this.reset=function(){b={},c=[],d={},e={}},this.dragEnded=function(b){var c=a.getId(b),d=f[c];d&&this.updateOffsets(d)},this.setParent=function(b,c,e,g){var h=f[c];if(h){d[g]||(d[g]={}),d[g][c]=d[h][c],delete d[h][c];var i=jsPlumbAdapter.getOffset(e,a),j=jsPlumbAdapter.getOffset(b,a);d[g][c].offset={left:j.left-i.left,top:j.top-i.top},f[c]=g}},this.getDragAncestor=function(b){var c=jsPlumb.getDOMElement(b),d=a.getId(c),e=f[d];return e?jsPlumb.getDOMElement(e):null}};window.console||(window.console={time:function(){},timeEnd:function(){},group:function(){},groupEnd:function(){},log:function(){}});var m=function(a){return null==a?null:a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},n=function(a,b){b=m(b),void 0!==a.className.baseVal?a.className.baseVal=b:a.className=b},o=function(a){return void 0===a.className.baseVal?a.className:a.className.baseVal},p=function(a,b,c){for(var d=jsPlumbUtil.isArray(c)?c:c.split(/\s+/),e=o(a),f=e.split(/\s+/),g=0;g<d.length;g++)if(b)-1==jsPlumbUtil.indexOf(f,d[g])&&f.push(d[g]);else{var h=jsPlumbUtil.indexOf(f,d[g]);-1!=h&&f.splice(h,1)}n(a,f.join(" "))},q=function(a,b){if(null!=a)if("string"==typeof a)b(jsPlumb.getDOMElement(a));else if(null!=a.length)for(var c=0;c<a.length;c++)b(jsPlumb.getDOMElement(a[c]));else b(a)};window.jsPlumbAdapter={headless:!1,pageLocation:g,screenLocation:h,clientLocation:i,getAttribute:function(a,b){return a.getAttribute(b)},setAttribute:function(a,b,c){a.setAttribute(b,c)},appendToRoot:function(a){document.body.appendChild(a)},getRenderModes:function(){return["svg","vml"]},isRenderModeAvailable:function(a){return{svg:b,vml:c()}[a]},getDragManager:function(a){return new l(a)},setRenderMode:function(a){var b;if(a){a=a.toLowerCase();var c=this.isRenderModeAvailable("svg"),d=this.isRenderModeAvailable("vml");"svg"===a&&c?b="svg":d&&(b="vml")}return b},addClass:function(a,b){q(a,function(a){p(a,!0,b)})},hasClass:function(a,b){return a=jsPlumb.getDOMElement(a),a.classList?a.classList.contains(b):-1!=o(a).indexOf(b)},removeClass:function(a,b){q(a,function(a){p(a,!1,b)})},setClass:function(a,b){q(a,function(a){n(a,b)})},setPosition:function(a,b){a.style.left=b.left+"px",a.style.top=b.top+"px"},getPosition:function(a){var b=function(b){var c=a.style[b];return c?c.substring(0,c.length-2):0};return{left:b("left"),top:b("top")}},getOffset:function(a,b,c){a=jsPlumb.getDOMElement(a);for(var d=b.getContainer(),e=a.offsetLeft,f=a.offsetTop,g=c||null!=d&&a.offsetParent!=d?a.offsetParent:null;null!=g;)e+=g.offsetLeft,f+=g.offsetTop,g=c?g.offsetParent:g.offsetParent==d?null:g.offsetParent;return{left:e,top:f}},getPositionOnElement:function(a,b,c){var d=void 0!==b.getBoundingClientRect?b.getBoundingClientRect():{left:0,top:0,width:0,height:0},e=document.body,f=document.documentElement,g=(b.offsetParent,window.pageYOffset||f.scrollTop||e.scrollTop),h=window.pageXOffset||f.scrollLeft||e.scrollLeft,i=f.clientTop||e.clientTop||0,j=f.clientLeft||e.clientLeft||0,k=0,l=0,m=d.top+g-i+k*c,n=d.left+h-j+l*c,o=jsPlumbAdapter.pageLocation(a),p=d.width||b.offsetWidth*c,q=d.height||b.offsetHeight*c;return[(o[0]-n)/p,(o[1]-m)/q]},getAbsolutePosition:function(a){var b=function(b){var c=a.style[b];return c?parseFloat(c.substring(0,c.length-2)):void 0};return[b("left"),b("top")]},setAbsolutePosition:function(b,c,d,e){d?a.jsPlumb.animate(b,{left:"+="+(c[0]-d[0]),top:"+="+(c[1]-d[1])},e):(b.style.left=c[0]+"px",b.style.top=c[1]+"px")}}}.call(this),function(){"use strict";var a=jsPlumbUtil,b=function(a,b,c){return jsPlumbAdapter.getOffset(a,b,c)},c=function(){return""+(new Date).getTime()},d=function(a){if(a._jsPlumb.paintStyle&&a._jsPlumb.hoverPaintStyle){var b={};u.extend(b,a._jsPlumb.paintStyle),u.extend(b,a._jsPlumb.hoverPaintStyle),delete a._jsPlumb.hoverPaintStyle,b.gradient&&a._jsPlumb.paintStyle.fillStyle&&delete b.gradient,a._jsPlumb.hoverPaintStyle=b}},e=["click","dblclick","mouseenter","mouseout","mousemove","mousedown","mouseup","contextmenu"],f={mouseout:"mouseleave",mouseexit:"mouseleave"},g=function(a,b,c,d){var e=a.getAttachedElements();if(e)for(var f=0,g=e.length;g>f;f++)d&&d==e[f]||e[f].setHover(b,!0,c)},h=function(a){return null==a?null:a.split(" ")},i=function(b,c,d){if(b.getDefaultType){for(var e=b.getTypeDescriptor(),f=a.merge({},b.getDefaultType()),g=0,h=b._jsPlumb.types.length;h>g;g++)f=a.merge(f,b._jsPlumb.instance.getType(b._jsPlumb.types[g],e),["cssClass"]);c&&(f=a.populate(f,c)),b.applyType(f,d),d||b.repaint()}},j=window.jsPlumbUIComponent=function(b){jsPlumbUtil.EventGenerator.apply(this,arguments);var c=this,d=arguments,g=c.idPrefix,h=g+(new Date).getTime();if(this._jsPlumb={instance:b._jsPlumb,parameters:b.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:b.beforeDetach,beforeDrop:b.beforeDrop,overlayPlacements:[],hoverClass:b.hoverClass||b._jsPlumb.Defaults.HoverClass,types:[]},this.getId=function(){return h},b.events)for(var i in b.events)c.bind(i,b.events[i]);this.clone=function(){var a={};return this.constructor.apply(a,d),a}.bind(this),this.isDetachAllowed=function(b){var c=!0;if(this._jsPlumb.beforeDetach)try{c=this._jsPlumb.beforeDetach(b)}catch(b){a.log("jsPlumb: beforeDetach callback failed",b)}return c},this.isDropAllowed=function(b,c,d,e,f,g,h){var i=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:b,targetId:c,scope:d,connection:e,dropEndpoint:f,source:g,target:h});if(this._jsPlumb.beforeDrop)try{i=this._jsPlumb.beforeDrop({sourceId:b,targetId:c,scope:d,connection:e,dropEndpoint:f,source:g,target:h})}catch(b){a.log("jsPlumb: beforeDrop callback failed",b)}return i};var j=[],k=function(a,b,c){j.push([a,b,c]),a.bind(b,c)},l=[],m=function(a,b,c,d){var e=f[c]||c,g=function(a){d&&!1===d(a)||b.fire(e,b,a)};l.push([a,c,g,b]),b._jsPlumb.instance.on(a,c,g)},n=function(a,b,c,d){f[b],d._jsPlumb.instance.off(a,b,c)};this.setListenerComponent=function(a){for(var b=0;b<l.length;b++)l[b][3]=a},this.bindListeners=function(a,b,c){k(a,"click",function(a,c){b.fire("click",b,c)}),k(a,"dblclick",function(a,c){b.fire("dblclick",b,c)}),k(a,"contextmenu",function(a,c){b.fire("contextmenu",b,c)}),k(a,"mouseleave",function(a,d){b.isHover()&&(c(!1),b.fire("mouseleave",b,d))}),k(a,"mouseenter",function(a,d){b.isHover()||(c(!0),b.fire("mouseenter",b,d))}),k(a,"mousedown",function(a,c){b.fire("mousedown",b,c)}),k(a,"mouseup",function(a,c){b.fire("mouseup",b,c)})},this.unbindListeners=function(){for(var a=0;a<j.length;a++){var b=j[a];b[0].unbind(b[1],b[2])}j=null},this.attachListeners=function(a,b,c){c=c||{};for(var d=0,f=e.length;f>d;d++)m(a,b,e[d],c[e[d]])},this.detachListeners=function(){for(var a=0;a<l.length;a++)n(l[a][0],l[a][1],l[a][2],l[a][3]);l=null},this.reattachListenersForElement=function(a){if(arguments.length>1){for(var b=0,c=e.length;c>b;b++)n(a,e[b]);for(b=1,c=arguments.length;c>b;b++)this.attachListeners(a,arguments[b])}}},k=function(a,b){var c=a._jsPlumb.types[b],d=a._jsPlumb.instance.getType(c,a.getTypeDescriptor());null!=d&&d.cssClass&&a.canvas&&a._jsPlumb.instance.removeClass(a.canvas,d.cssClass)};jsPlumbUtil.extend(j,jsPlumbUtil.EventGenerator,{getParameter:function(a){return this._jsPlumb.parameters[a]},setParameter:function(a,b){this._jsPlumb.parameters[a]=b},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(a){this._jsPlumb.parameters=a},addClass:function(a){jsPlumbAdapter.addClass(this.canvas,a)},removeClass:function(a){jsPlumbAdapter.removeClass(this.canvas,a)},setType:function(a,b,c){this.clearTypes(),this._jsPlumb.types=h(a)||[],i(this,b,c)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(a,b){i(this,a,b)},hasType:function(a){return-1!=jsPlumbUtil.indexOf(this._jsPlumb.types,a)},addType:function(a,b,c){var d=h(a),e=!1;if(null!=d){for(var f=0,g=d.length;g>f;f++)this.hasType(d[f])||(this._jsPlumb.types.push(d[f]),e=!0);e&&i(this,b,c)}},removeType:function(b,c){var d=h(b),e=!1,f=function(b){var c=a.indexOf(this._jsPlumb.types,b);return-1!=c&&(k(this,c),this._jsPlumb.types.splice(c,1),!0)}.bind(this);if(null!=d){for(var g=0,j=d.length;j>g;g++)e=f(d[g])||e;e&&i(this,null,c)}},clearTypes:function(a){for(var b=this._jsPlumb.types.length,c=0;b>c;c++)k(this,0),this._jsPlumb.types.splice(0,1);i(this,{},a)},toggleType:function(a,b,c){var d=h(a);if(null!=d){for(var e=0,f=d.length;f>e;e++){var g=jsPlumbUtil.indexOf(this._jsPlumb.types,d[e]);-1!=g?(k(this,g),this._jsPlumb.types.splice(g,1)):this._jsPlumb.types.push(d[e])}i(this,b,c)}},applyType:function(a,b){if(this.setPaintStyle(a.paintStyle,b),this.setHoverPaintStyle(a.hoverPaintStyle,b),a.parameters)for(var c in a.parameters)this.setParameter(c,a.parameters[c])},setPaintStyle:function(a,b){this._jsPlumb.paintStyle=a,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,d(this),b||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(a,b){this._jsPlumb.hoverPaintStyle=a,d(this),b||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},cleanup:function(){this.unbindListeners(),this.detachListeners()},destroy:function(){this.cleanupListeners(),this.clone=null,this._jsPlumb=null},isHover:function(){return this._jsPlumb.hover},setHover:function(a,b,d){if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){if(this._jsPlumb.hover=a,null!=this.canvas){if(null!=this._jsPlumb.instance.hoverClass){var e=a?"addClass":"removeClass";this._jsPlumb.instance[e](this.canvas,this._jsPlumb.instance.hoverClass)}null!=this._jsPlumb.hoverClass&&this._jsPlumb.instance[e](this.canvas,this._jsPlumb.hoverClass)}null!=this._jsPlumb.hoverPaintStyle&&(this._jsPlumb.paintStyleInUse=a?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(d=d||c(),this.repaint({timestamp:d,recalc:!1}))),this.getAttachedElements&&!b&&g(this,a,c(),this)}}});var l="__label",m=function(a,b){for(var c=-1,d=0,e=a._jsPlumb.overlays.length;e>d;d++)if(b===a._jsPlumb.overlays[d].id){c=d;break}return c},n=function(a,b){var c={cssClass:b.cssClass,labelStyle:a.labelStyle,id:l,component:a,_jsPlumb:a._jsPlumb.instance},d=u.extend(c,b);return new(u.Overlays[a._jsPlumb.instance.getRenderMode()].Label)(d)},o=function(b,c){var d=null;if(a.isArray(c)){var e=c[0],f=u.extend({component:b,_jsPlumb:b._jsPlumb.instance},c[1]);3==c.length&&u.extend(f,c[2]),d=new(u.Overlays[b._jsPlumb.instance.getRenderMode()][e])(f)}else d=c.constructor==String?new(u.Overlays[b._jsPlumb.instance.getRenderMode()][c])({component:b,_jsPlumb:b._jsPlumb.instance}):c;b._jsPlumb.overlays.push(d)},p=function(a,b){var c=a.defaultOverlayKeys||[],d=b.overlays,e=function(b){
return a._jsPlumb.instance.Defaults[b]||u.Defaults[b]||[]};d||(d=[]);for(var f=0,g=c.length;g>f;f++)d.unshift.apply(d,e(c[f]));return d},q=window.OverlayCapableJsPlumbUIComponent=function(a){j.apply(this,arguments),this._jsPlumb.overlays=[];var b=p(this,a);if(b)for(var c=0,d=b.length;d>c;c++)o(this,b[c]);if(a.label){var e=a.labelLocation||this.defaultLabelLocation||.5,f=a.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle;this._jsPlumb.overlays.push(n(this,{label:a.label,location:e,labelStyle:f}))}this.setListenerComponent=function(a){if(this._jsPlumb)for(var b=0;b<this._jsPlumb.overlays.length;b++)this._jsPlumb.overlays[b].setListenerComponent(a)}};jsPlumbUtil.extend(q,j,{applyType:function(a,b){if(this.removeAllOverlays(b),a.overlays)for(var c=0,d=a.overlays.length;d>c;c++)this.addOverlay(a.overlays[c],!0)},setHover:function(a){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged())for(var b=0,c=this._jsPlumb.overlays.length;c>b;b++)this._jsPlumb.overlays[b][a?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)},addOverlay:function(a,b){o(this,a),b||this.repaint()},getOverlay:function(a){var b=m(this,a);return b>=0?this._jsPlumb.overlays[b]:null},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(a){var b=this.getOverlay(a);b&&b.hide()},hideOverlays:function(){for(var a=0,b=this._jsPlumb.overlays.length;b>a;a++)this._jsPlumb.overlays[a].hide()},showOverlay:function(a){var b=this.getOverlay(a);b&&b.show()},showOverlays:function(){for(var a=0,b=this._jsPlumb.overlays.length;b>a;a++)this._jsPlumb.overlays[a].show()},removeAllOverlays:function(a){for(var b=0,c=this._jsPlumb.overlays.length;c>b;b++)this._jsPlumb.overlays[b].cleanup&&this._jsPlumb.overlays[b].cleanup();this._jsPlumb.overlays.splice(0,this._jsPlumb.overlays.length),this._jsPlumb.overlayPositions=null,a||this.repaint()},removeOverlay:function(a){var b=m(this,a);if(-1!=b){var c=this._jsPlumb.overlays[b];c.cleanup&&c.cleanup(),this._jsPlumb.overlays.splice(b,1),this._jsPlumb.overlayPositions&&delete this._jsPlumb.overlayPositions[a]}},removeOverlays:function(){for(var a=0,b=arguments.length;b>a;a++)this.removeOverlay(arguments[a])},moveParent:function(a){this.bgCanvas&&(this.bgCanvas.parentNode.removeChild(this.bgCanvas),a.appendChild(this.bgCanvas)),this.canvas.parentNode.removeChild(this.canvas),a.appendChild(this.canvas);for(var b=0;b<this._jsPlumb.overlays.length;b++)this._jsPlumb.overlays[b].isAppendedAtTopLevel&&(this._jsPlumb.overlays[b].canvas.parentNode.removeChild(this._jsPlumb.overlays[b].canvas),a.appendChild(this._jsPlumb.overlays[b].canvas))},getLabel:function(){var a=this.getOverlay(l);return null!=a?a.getLabel():null},getLabelOverlay:function(){return this.getOverlay(l)},setLabel:function(a){var b=this.getOverlay(l);if(b)a.constructor==String||a.constructor==Function?b.setLabel(a):(a.label&&b.setLabel(a.label),a.location&&b.setLocation(a.location));else{var c=a.constructor==String||a.constructor==Function?{label:a}:a;b=n(this,c),this._jsPlumb.overlays.push(b)}this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(){for(var a=0;a<this._jsPlumb.overlays.length;a++)this._jsPlumb.overlays[a].cleanup(),this._jsPlumb.overlays[a].destroy();this._jsPlumb.overlays.splice(0),this._jsPlumb.overlayPositions=null},setVisible:function(a){this[a?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(a,b){this._jsPlumb.overlayPositions=this._jsPlumb.overlayPositions||{},this._jsPlumb.overlayPositions[a.id]=b},getAbsoluteOverlayPosition:function(a){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[a.id]:null}});var r=0,s=function(){var a=r+1;return r++,a},t=window.jsPlumbInstance=function(d){this.Defaults={Anchor:"BottomCenter",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fillStyle:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{lineWidth:8,strokeStyle:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"},d&&u.extend(this.Defaults,d),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},jsPlumbUtil.EventGenerator.apply(this);var e=this,f=s(),g=e.bind,h={},i=1,k=function(a){var b=e.getDOMElement(a);return{el:b,id:jsPlumbUtil.isString(a)&&null==b?a:Y(b)}};this.getInstanceIndex=function(){return f},this.setZoom=function(a,b){return jsPlumbUtil.oldIE||(i=a,e.fire("zoom",i),b&&e.repaintEverything()),!jsPlumbUtil.oldIE},this.getZoom=function(){return i};for(var l in this.Defaults)h[l]=this.Defaults[l];var m;this.setContainer=function(a){a=this.getDOMElement(a),this.select().each(function(b){b.moveParent(a)}),this.selectEndpoints().each(function(b){b.moveParent(a)}),m=a},this.getContainer=function(){return m},this.bind=function(a,b){"ready"===a&&o?b():g.apply(e,[a,b])},e.importDefaults=function(a){for(var b in a)e.Defaults[b]=a[b];return a.Container&&this.setContainer(a.Container),e},e.restoreDefaults=function(){return e.Defaults=u.extend({},h),e};var n=null,o=!1,p=[],q={},r={},t={},v={},w={},x={},y=!1,z=[],A=!1,B=null,C=this.Defaults.Scope,D=null,E=1,F=function(){return""+E++},G=function(a,b){m?m.appendChild(a):b?u.getDOMElement(b).appendChild(a):e.appendToRoot(a)},H=function(a){return a._nodes?a._nodes:a},I=function(a,b,d,f){if(!jsPlumbAdapter.headless&&!A){var g=Y(a),h=e.dragManager.getElementsForDraggable(g);null==d&&(d=c());var i=W({elId:g,offset:b,recalc:!1,timestamp:d});if(h)for(var j in h)W({elId:h[j].id,offset:{left:i.o.left+h[j].offset.left,top:i.o.top+h[j].offset.top},recalc:!1,timestamp:d});if(e.anchorManager.redraw(g,b,d,null,f),h)for(var k in h)e.anchorManager.redraw(h[k].id,b,d,h[k].offset,f,!0)}},J=function(b,c){var d,f,g,h=null;if(a.isArray(b)){h=[];for(var i=0,j=b.length;j>i;i++)d=e.getElementObject(b[i]),g=e.getDOMElement(d),f=e.getAttribute(g,"id"),h.push(c.apply(e,[g,f]))}else d=e.getDOMElement(b),f=e.getId(d),h=c.apply(e,[d,f]);return h},K=function(a){return r[a]},L=function(b,c,d){if(!jsPlumbAdapter.headless){if(null!=c&&c&&u.isDragSupported(b,e)&&!u.isAlreadyDraggable(b,e)){var f=d||e.Defaults.DragOptions;f=u.extend({},f);var g=u.dragEvents.drag,h=u.dragEvents.stop,i=u.dragEvents.start,j=e.getDOMElement(b),k=e.dragManager.getDragAncestor(j),l={left:0,top:0},m=l,n=!1;f[i]=a.wrap(f[i],function(){return m=null!=k?jsPlumbAdapter.getOffset(k,e):l,e.setHoverSuspended(!0),e.select({source:b}).addClass(e.elementDraggingClass+" "+e.sourceElementDraggingClass,!0),e.select({target:b}).addClass(e.elementDraggingClass+" "+e.targetElementDraggingClass,!0),e.setConnectionBeingDragged(!0),f.canDrag?d.canDrag():void 0},!1),f[g]=a.wrap(f[g],function(){var a=e.getUIPosition(arguments,e.getZoom());a.left+=m.left,a.top+=m.top,I(b,a,null,!0),n&&e.addClass(b,"jsPlumb_dragged"),n=!0}),f[h]=a.wrap(f[h],function(){var a=e.getUIPosition(arguments,e.getZoom(),!0);I(b,a),n=!1,e.removeClass(b,"jsPlumb_dragged"),e.setHoverSuspended(!1),e.select({source:b}).removeClass(e.elementDraggingClass+" "+e.sourceElementDraggingClass,!0),e.select({target:b}).removeClass(e.elementDraggingClass+" "+e.targetElementDraggingClass,!0),e.setConnectionBeingDragged(!1),e.dragManager.dragEnded(b)});var o=Y(b);x[o]=!0;var p=x[o];f.disabled=null!=p&&!p,e.initDraggable(b,f,!1),e.dragManager.register(b)}}},M=function(b,c){var d=u.extend({},b);if(c&&u.extend(d,c),d.source&&(d.source.endpoint?d.sourceEndpoint=d.source:d.source=e.getDOMElement(d.source)),d.target&&(d.target.endpoint?d.targetEndpoint=d.target:d.target=e.getDOMElement(d.target)),b.uuids&&(d.sourceEndpoint=K(b.uuids[0]),d.targetEndpoint=K(b.uuids[1])),d.sourceEndpoint&&d.sourceEndpoint.isFull())return void a.log(e,"could not add connection; source endpoint is full");if(d.targetEndpoint&&d.targetEndpoint.isFull())return void a.log(e,"could not add connection; target endpoint is full");if(!d.type&&d.sourceEndpoint&&(d.type=d.sourceEndpoint.connectionType),d.sourceEndpoint&&d.sourceEndpoint.connectorOverlays){d.overlays=d.overlays||[];for(var f=0,g=d.sourceEndpoint.connectorOverlays.length;g>f;f++)d.overlays.push(d.sourceEndpoint.connectorOverlays[f])}!d["pointer-events"]&&d.sourceEndpoint&&d.sourceEndpoint.connectorPointerEvents&&(d["pointer-events"]=d.sourceEndpoint.connectorPointerEvents);var h,i,j,k=function(a,b){var c=u.extend({},a);for(var d in b)b[d]&&(c[d]=b[d]);return c},l=function(a,b,c){return e.addEndpoint(a,k(i.def,{anchor:d.anchors?d.anchors[c]:d.anchor,endpoint:d.endpoints?d.endpoints[c]:d.endpoint,paintStyle:d.endpointStyles?d.endpointStyles[c]:d.endpointStyle,hoverPaintStyle:d.endpointHoverStyles?d.endpointHoverStyles[c]:d.endpointHoverStyle}))};if(d.target&&!d.target.endpoint&&!d.targetEndpoint&&!d.newConnection&&(h=Y(d.target),i=this.targetEndpointDefinitions[h])){if(!i.enabled)return;i.isTarget=!0,j=null!=i.endpoint&&i.endpoint._jsPlumb?i.endpoint:l(d.target,i.def,1),i.uniqueEndpoint&&(i.endpoint=j),d.targetEndpoint=j,j._doNotDeleteOnDetach=!1,j._deleteOnDetach=!0}if(d.source&&!d.source.endpoint&&!d.sourceEndpoint&&!d.newConnection&&(h=Y(d.source),i=this.sourceEndpointDefinitions[h])){if(!i.enabled)return;j=null!=i.endpoint&&i.endpoint._jsPlumb?i.endpoint:l(d.source,i.def,0),i.uniqueEndpoint&&(i.endpoint=j),d.sourceEndpoint=j,j._doNotDeleteOnDetach=!1,j._deleteOnDetach=!0}return d}.bind(e),N=function(a){var b=e.Defaults.ConnectionType||e.getDefaultConnectionType();e.Defaults.EndpointType||u.Endpoint,a._jsPlumb=e,a.newConnection=N,a.newEndpoint=Q,a.endpointsByUUID=r,a.endpointsByElement=q,a.finaliseConnection=O;var c=new b(a);return c.id="con_"+F(),P("click","click",c),P("dblclick","dblclick",c),P("contextmenu","contextmenu",c),c.isDetachable()&&(c.endpoints[0].initDraggable(),c.endpoints[1].initDraggable()),c},O=function(a,b,c,d){if(b=b||{},a.suspendedEndpoint||p.push(a),a.endpoints[0].isTemporarySource=!1,(null==a.suspendedEndpoint||d)&&e.anchorManager.newConnection(a),I(a.source),!b.doNotFireConnectionEvent&&!1!==b.fireEvent){var f={connection:a,source:a.source,target:a.target,sourceId:a.sourceId,targetId:a.targetId,sourceEndpoint:a.endpoints[0],targetEndpoint:a.endpoints[1]};e.fire("connection",f,c)}},P=function(a,b,c){c.bind(a,function(a,d){e.fire(b,c,d)})},Q=function(a){var b=e.Defaults.EndpointType||u.Endpoint,c=u.extend({},a);c._jsPlumb=e,c.newConnection=N,c.newEndpoint=Q,c.endpointsByUUID=r,c.endpointsByElement=q,c.finaliseConnection=O,c.fireDetachEvent=_,c.fireMoveEvent=aa,c.floatingConnections=w,c.elementId=Y(c.source);var d=new b(c);return d.id="ep_"+F(),P("click","endpointClick",d),P("dblclick","endpointDblClick",d),P("contextmenu","contextmenu",d),jsPlumbAdapter.headless||e.dragManager.endpointAdded(c.source),d},R=function(a,b,c){var d=q[a];if(d&&d.length)for(var e=0,f=d.length;f>e;e++){for(var g=0,h=d[e].connections.length;h>g;g++){var i=b(d[e].connections[g]);if(i)return}c&&c(d[e])}},S=function(a,b){return J(a,function(a,c){x[c]=b,this.isDragSupported(a)&&this.setElementDraggable(a,b)})},T=function(a,b,c){b="block"===b;var d=null;c&&(d=b?function(a){a.setVisible(!0,!0,!0)}:function(a){a.setVisible(!1,!0,!0)});var e=k(a);R(e.id,function(a){if(b&&c){var d=a.sourceId===e.id?1:0;a.endpoints[d].isVisible()&&a.setVisible(!0)}else a.setVisible(b)},d)},U=function(a){return J(a,function(a,b){var c=null!=x[b]&&x[b];return c=!c,x[b]=c,this.setDraggable(a,c),c})},V=function(a,b){var c=null;b&&(c=function(a){var b=a.isVisible();a.setVisible(!b)}),R(a,function(a){var b=a.isVisible();a.setVisible(!b)},c)},W=this.updateOffset=function(a){var c,d=a.timestamp,f=a.recalc,g=a.offset,h=a.elId;return A&&!d&&(d=B),!f&&d&&d===v[h]?{o:a.offset||t[h],s:z[h]}:(f||!g?null!=(c=document.getElementById(h))&&(z[h]=e.getSize(c),t[h]=b(c,e),v[h]=d):(t[h]=g,null==z[h]&&null!=(c=document.getElementById(h))&&(z[h]=e.getSize(c)),v[h]=d),t[h]&&!t[h].right&&(t[h].right=t[h].left+z[h][0],t[h].bottom=t[h].top+z[h][1],t[h].width=z[h][0],t[h].height=z[h][1],t[h].centerx=t[h].left+t[h].width/2,t[h].centery=t[h].top+t[h].height/2),{o:t[h],s:z[h]})},X=function(a){var b=t[a];return b?{o:b,s:z[a]}:W({elId:a})},Y=function(a,b,c){if(jsPlumbUtil.isString(a))return a;if(null==a)return null;var d=e.getAttribute(a,"id");return d&&"undefined"!==d||(2==arguments.length&&void 0!==arguments[1]?d=b:(1==arguments.length||3==arguments.length&&!arguments[2])&&(d="jsPlumb_"+f+"_"+F()),c||e.setAttribute(a,"id",d)),d};this.setConnectionBeingDragged=function(a){y=a},this.isConnectionBeingDragged=function(){return y},this.connectorClass="_jsPlumb_connector",this.hoverClass="_jsPlumb_hover",this.endpointClass="_jsPlumb_endpoint",this.endpointConnectedClass="_jsPlumb_endpoint_connected",this.endpointFullClass="_jsPlumb_endpoint_full",this.endpointDropAllowedClass="_jsPlumb_endpoint_drop_allowed",this.endpointDropForbiddenClass="_jsPlumb_endpoint_drop_forbidden",this.overlayClass="_jsPlumb_overlay",this.draggingClass="_jsPlumb_dragging",this.elementDraggingClass="_jsPlumb_element_dragging",this.sourceElementDraggingClass="_jsPlumb_source_element_dragging",this.targetElementDraggingClass="_jsPlumb_target_element_dragging",this.endpointAnchorClassPrefix="_jsPlumb_endpoint_anchor",this.hoverSourceClass="_jsPlumb_source_hover",this.hoverTargetClass="_jsPlumb_target_hover",this.dragSelectClass="_jsPlumb_drag_select",this.Anchors={},this.Connectors={svg:{},vml:{}},this.Endpoints={svg:{},vml:{}},this.Overlays={svg:{},vml:{}},this.ConnectorRenderers={},this.SVG="svg",this.VML="vml",this.addEndpoint=function(b,c,d){d=d||{};var f=u.extend({},d);u.extend(f,c),f.endpoint=f.endpoint||e.Defaults.Endpoint,f.paintStyle=f.paintStyle||e.Defaults.EndpointStyle,b=H(b);for(var g=[],h=a.isArray(b)||null!=b.length&&!a.isString(b)?b:[b],i=0,j=h.length;j>i;i++){var k=e.getDOMElement(h[i]),l=Y(k);f.source=k,qa(f.source),W({elId:l,timestamp:B});var m=Q(f);f.parentAnchor&&(m.parentAnchor=f.parentAnchor),a.addToList(q,l,m);var n=t[l],o=z[l],p=m.anchor.compute({xy:[n.left,n.top],wh:o,element:m,timestamp:B}),r={anchorLoc:p,timestamp:B};A&&(r.recalc=!1),A||m.paint(r),g.push(m),m._doNotDeleteOnDetach=!0}return 1==g.length?g[0]:g},this.addEndpoints=function(b,c,d){for(var f=[],g=0,h=c.length;h>g;g++){var i=e.addEndpoint(b,c[g],d);a.isArray(i)?Array.prototype.push.apply(f,i):f.push(i)}return f},this.animate=function(b,c,d){d=d||{};var f=this.getElementObject(b),g=this.getDOMElement(b),h=Y(g),i=u.animEvents.step,j=u.animEvents.complete;d[i]=a.wrap(d[i],function(){e.repaint(h)}),d[j]=a.wrap(d[j],function(){e.repaint(h)}),e.doAnimate(f,c,d)},this.checkCondition=function(b,c){var d=e.getListener(b),f=!0;if(d&&d.length>0)try{for(var g=0,h=d.length;h>g;g++)f=f&&d[g](c)}catch(c){a.log(e,"cannot check condition ["+b+"]"+c)}return f},this.checkASyncCondition=function(b,c,d,f){var g=e.getListener(b);if(g&&g.length>0)try{g[0](c,d,f)}catch(c){a.log(e,"cannot asynchronously check condition ["+b+"]"+c)}},this.connect=function(a,b){var c,d=M(a,b);return d&&(qa(d.source),c=N(d),O(c,d)),c};var Z=[{el:"source",elId:"sourceId",epDefs:"sourceEndpointDefinitions"},{el:"target",elId:"targetId",epDefs:"targetEndpointDefinitions"}],$=function(a,b,c,d){var e,f,g,h=Z[c],i=a[h.elId],j=(a[h.el],a.endpoints[c]),k={index:c,originalSourceId:0===c?i:a.sourceId,newSourceId:a.sourceId,originalTargetId:1==c?i:a.targetId,newTargetId:a.targetId,connection:a};if(b.constructor==u.Endpoint)e=b,e.addConnection(a);else if(f=Y(b),g=this[h.epDefs][f],f===a[h.elId])e=null;else if(g){if(!g.enabled)return;e=null!=g.endpoint&&g.endpoint._jsPlumb?g.endpoint:this.addEndpoint(b,g.def),g.uniqueEndpoint&&(g.endpoint=e),e._doNotDeleteOnDetach=!1,e._deleteOnDetach=!0,e.addConnection(a)}else e=a.makeEndpoint(0===c,b,f),e._doNotDeleteOnDetach=!1,e._deleteOnDetach=!0;return null!=e&&(j.detachFromConnection(a),a.endpoints[c]=e,a[h.el]=e.element,a[h.elId]=e.elementId,k[0===c?"newSourceId":"newTargetId"]=e.elementId,aa(k),d||a.repaint()),k}.bind(this);this.setSource=function(a,b,c){var d=$(a,b,0,c);this.anchorManager.sourceChanged(d.originalSourceId,d.newSourceId,a)},this.setTarget=function(a,b,c){var d=$(a,b,1,c);this.anchorManager.updateOtherEndpoint(d.originalSourceId,d.originalTargetId,d.newTargetId,a)},this.deleteEndpoint=function(a,b){var c=e.setSuspendDrawing(!0),d="string"==typeof a?r[a]:a;return d&&e.deleteObject({endpoint:d}),c||e.setSuspendDrawing(!1,b),e},this.deleteEveryEndpoint=function(){var a=e.setSuspendDrawing(!0);for(var b in q){var c=q[b];if(c&&c.length)for(var d=0,f=c.length;f>d;d++)e.deleteEndpoint(c[d],!0)}return q={},r={},e.anchorManager.reset(),e.dragManager.reset(),a||e.setSuspendDrawing(!1),e};var _=function(a,b,c){var d=e.Defaults.ConnectionType||e.getDefaultConnectionType(),f=a.constructor==d,g=f?{connection:a,source:a.source,target:a.target,sourceId:a.sourceId,targetId:a.targetId,sourceEndpoint:a.endpoints[0],targetEndpoint:a.endpoints[1]}:a;b&&e.fire("connectionDetached",g,c),e.anchorManager.connectionDetached(g)},aa=function(a,b){e.fire("connectionMoved",a,b)};this.unregisterEndpoint=function(a){a._jsPlumb.uuid&&(r[a._jsPlumb.uuid]=null),e.anchorManager.deleteEndpoint(a);for(var b in q){var c=q[b];if(c){for(var d=[],f=0,g=c.length;g>f;f++)c[f]!=a&&d.push(c[f]);q[b]=d}q[b].length<1&&delete q[b]}},this.detach=function(){if(0!==arguments.length){var a=e.Defaults.ConnectionType||e.getDefaultConnectionType(),b=arguments[0].constructor==a,c=2==arguments.length&&b?arguments[1]||{}:arguments[0],d=!1!==c.fireEvent,f=c.forceDetach,g=b?arguments[0]:c.connection;if(g)(f||jsPlumbUtil.functionChain(!0,!1,[[g.endpoints[0],"isDetachAllowed",[g]],[g.endpoints[1],"isDetachAllowed",[g]],[g,"isDetachAllowed",[g]],[e,"checkCondition",["beforeDetach",g]]]))&&g.endpoints[0].detach(g,!1,!0,d);else{var h=u.extend({},c);if(h.uuids)K(h.uuids[0]).detachFrom(K(h.uuids[1]),d);else if(h.sourceEndpoint&&h.targetEndpoint)h.sourceEndpoint.detachFrom(h.targetEndpoint);else{var i=Y(e.getDOMElement(h.source)),j=Y(e.getDOMElement(h.target));R(i,function(a){(a.sourceId==i&&a.targetId==j||a.targetId==i&&a.sourceId==j)&&e.checkCondition("beforeDetach",a)&&a.endpoints[0].detach(a,!1,!0,d)})}}}},this.detachAllConnections=function(a,b){b=b||{},a=e.getDOMElement(a);var c=Y(a),d=q[c];if(d&&d.length)for(var f=0,g=d.length;g>f;f++)d[f].detachAll(!1!==b.fireEvent);return e},this.detachEveryConnection=function(a){return a=a||{},e.doWhileSuspended(function(){for(var b in q){var c=q[b];if(c&&c.length)for(var d=0,e=c.length;e>d;d++)c[d].detachAll(!1!==a.fireEvent)}p.splice(0)}),e},this.deleteObject=function(a){var b={endpoints:{},connections:{},endpointCount:0,connectionCount:0},c=!1!==a.fireEvent,d=!1!==a.deleteAttachedObjects,f=function(a){if(null!=a&&null==b.connections[a.id]&&(null!=a._jsPlumb&&a.setHover(!1),b.connections[a.id]=a,b.connectionCount++,d))for(var c=0;c<a.endpoints.length;c++)a.endpoints[c]._deleteOnDetach&&g(a.endpoints[c])},g=function(a){if(null!=a&&null==b.endpoints[a.id]&&(null!=a._jsPlumb&&a.setHover(!1),b.endpoints[a.id]=a,b.endpointCount++,d))for(var c=0;c<a.connections.length;c++){var e=a.connections[c];f(e)}};a.connection?f(a.connection):g(a.endpoint);for(var h in b.connections){var i=b.connections[h];i._jsPlumb&&(jsPlumbUtil.removeWithFunction(p,function(a){return i.id==a.id}),_(i,c,a.originalEvent),i.endpoints[0].detachFromConnection(i),i.endpoints[1].detachFromConnection(i),i.cleanup(),i.destroy())}for(var j in b.endpoints){var k=b.endpoints[j];k._jsPlumb&&(e.unregisterEndpoint(k),k.cleanup(),k.destroy())}return b},this.draggable=function(a,b){var c,d,f;if("object"==typeof a&&a.length)for(c=0,d=a.length;d>c;c++)(f=e.getDOMElement(a[c]))&&L(f,!0,b);else if(a._nodes)for(c=0,d=a._nodes.length;d>c;c++)(f=e.getDOMElement(a._nodes[c]))&&L(f,!0,b);else(f=e.getDOMElement(a))&&L(f,!0,b);return e};var ba=function(a,b,c,d){for(var e=0,f=a.length;f>e;e++)a[e][b].apply(a[e],c);return d(a)},ca=function(a,b,c){for(var d=[],e=0,f=a.length;f>e;e++)d.push([a[e][b].apply(a[e],c),a[e]]);return d},da=function(a,b,c){return function(){return ba(a,b,arguments,c)}},ea=function(a,b){return function(){return ca(a,b,arguments)}},fa=function(a,b){var c=[];if(a)if("string"==typeof a){if("*"===a)return a;c.push(a)}else if(b)c=a;else if(a.length)for(var d=0,e=a.length;e>d;d++)c.push(k(a[d]).id);else c.push(k(a).id);return c},ga=function(a,b,c){return"*"===a||(a.length>0?-1!=jsPlumbUtil.indexOf(a,b):!c)};this.getConnections=function(a,b){a?a.constructor==String&&(a={scope:a}):a={};for(var c=a.scope||e.getDefaultScope(),d=fa(c,!0),f=fa(a.source),g=fa(a.target),h=!b&&d.length>1?{}:[],i=function(a,c){if(!b&&d.length>1){var e=h[a];null==e&&(e=h[a]=[]),e.push(c)}else h.push(c)},j=0,k=p.length;k>j;j++){var l=p[j];ga(d,l.scope)&&ga(f,l.sourceId)&&ga(g,l.targetId)&&i(l.scope,l)}return h};var ha=function(a,b){return function(c){for(var d=0,e=a.length;e>d;d++)c(a[d]);return b(a)}},ia=function(a){return function(b){return a[b]}},ja=function(a,b){var c,d,e={length:a.length,each:ha(a,b),get:ia(a)},f=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],g=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"];for(c=0,d=f.length;d>c;c++)e[f[c]]=da(a,f[c],b);for(c=0,d=g.length;d>c;c++)e[g[c]]=ea(a,g[c]);return e},ka=function(a){var b=ja(a,ka);return u.extend(b,{setDetachable:da(a,"setDetachable",ka),setReattach:da(a,"setReattach",ka),setConnector:da(a,"setConnector",ka),detach:function(){for(var b=0,c=a.length;c>b;b++)e.detach(a[b])},isDetachable:ea(a,"isDetachable"),isReattach:ea(a,"isReattach")})},la=function(a){var b=ja(a,la);return u.extend(b,{setEnabled:da(a,"setEnabled",la),setAnchor:da(a,"setAnchor",la),isEnabled:ea(a,"isEnabled"),detachAll:function(){for(var b=0,c=a.length;c>b;b++)a[b].detachAll()},remove:function(){for(var b=0,c=a.length;c>b;b++)e.deleteObject({endpoint:a[b]})}})};this.select=function(a){return a=a||{},a.scope=a.scope||"*",ka(a.connections||e.getConnections(a,!0))},this.selectEndpoints=function(a){a=a||{},a.scope=a.scope||"*";var b=!a.element&&!a.source&&!a.target,c=b?"*":fa(a.element),d=b?"*":fa(a.source),e=b?"*":fa(a.target),f=fa(a.scope,!0),g=[];for(var h in q){var i=ga(c,h,!0),j=ga(d,h,!0),k="*"!=d,l=ga(e,h,!0),m="*"!=e;if(i||j||l)a:for(var n=0,o=q[h].length;o>n;n++){var p=q[h][n];if(ga(f,p.scope,!0)){var r=k&&d.length>0&&!p.isSource,s=m&&e.length>0&&!p.isTarget;if(r||s)continue a;g.push(p)}}}return la(g)},this.getAllConnections=function(){return p},this.getDefaultScope=function(){return C},this.getEndpoint=K,this.getEndpoints=function(a){return q[k(a).id]},this.getDefaultEndpointType=function(){return u.Endpoint},this.getDefaultConnectionType=function(){return u.Connection},this.getId=Y,this.getOffset=function(a){return t[a],W({elId:a})},this.appendElement=G;var ma=!1;this.isHoverSuspended=function(){return ma},this.setHoverSuspended=function(a){ma=a};var na=function(a){return function(){return jsPlumbAdapter.isRenderModeAvailable(a)}};this.isSVGAvailable=na("svg"),this.isVMLAvailable=na("vml"),this.hide=function(a,b){return T(a,"none",b),e},this.idstamp=F,this.connectorsInitialized=!1;var oa=[],pa=["svg","vml"];this.registerConnectorType=function(a,b){oa.push([a,b])};var qa=function(a){if(!m&&a){var b=e.getDOMElement(a);b.offsetParent&&(m=b.offsetParent)}},ra=function(){e.Defaults.Container&&(m=e.getDOMElement(e.Defaults.Container))};this.init=function(){var a=function(a,b,c){u.Connectors[a][b]=function(){c.apply(this,arguments),u.ConnectorRenderers[a].apply(this,arguments)},jsPlumbUtil.extend(u.Connectors[a][b],[c,u.ConnectorRenderers[a]])};if(!u.connectorsInitialized){for(var b=0;b<oa.length;b++)for(var c=0;c<pa.length;c++)a(pa[c],oa[b][1],oa[b][0]);u.connectorsInitialized=!0}o||(ra(),e.anchorManager=new u.AnchorManager({jsPlumbInstance:e}),e.setRenderMode(e.Defaults.RenderMode),o=!0,e.fire("ready",e))}.bind(this),this.log=n,this.jsPlumbUIComponent=j,this.makeAnchor=function(){var b,c=function(a,b){if(u.Anchors[a])return new u.Anchors[a](b);if(!e.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown anchor type '"+a+"'"}};if(0===arguments.length)return null;var d=arguments[0],f=arguments[1],g=arguments[2],h=null;if(d.compute&&d.getOrientation)return d;if("string"==typeof d)h=c(arguments[0],{elementId:f,jsPlumbInstance:e});else if(a.isArray(d))if(a.isArray(d[0])||a.isString(d[0]))2==d.length&&a.isObject(d[1])?a.isString(d[0])?(b=u.extend({elementId:f,jsPlumbInstance:e},d[1]),h=c(d[0],b)):(b=u.extend({elementId:f,jsPlumbInstance:e,anchors:d[0]},d[1]),h=new u.DynamicAnchor(b)):h=new u.DynamicAnchor({anchors:d,selector:null,elementId:f,jsPlumbInstance:g});else{var i={x:d[0],y:d[1],orientation:d.length>=4?[d[2],d[3]]:[0,0],offsets:d.length>=6?[d[4],d[5]]:[0,0],elementId:f,jsPlumbInstance:g,cssClass:7==d.length?d[6]:null};h=new u.Anchor(i),h.clone=function(){return new u.Anchor(i)}}return h.id||(h.id="anchor_"+F()),h},this.makeAnchors=function(b,c,d){for(var f=[],g=0,h=b.length;h>g;g++)"string"==typeof b[g]?f.push(u.Anchors[b[g]]({elementId:c,jsPlumbInstance:d})):a.isArray(b[g])&&f.push(e.makeAnchor(b[g],c,d));return f},this.makeDynamicAnchor=function(a,b){return new u.DynamicAnchor({anchors:a,selector:b,elementId:null,jsPlumbInstance:e})},this.targetEndpointDefinitions={};var sa=function(a,b,c){a.paintStyle=a.paintStyle||c.Defaults.EndpointStyles[b]||c.Defaults.EndpointStyle,a.hoverPaintStyle=a.hoverPaintStyle||c.Defaults.EndpointHoverStyles[b]||c.Defaults.EndpointHoverStyle,a.anchor=a.anchor||c.Defaults.Anchors[b]||c.Defaults.Anchor,a.endpoint=a.endpoint||c.Defaults.Endpoints[b]||c.Defaults.Endpoint};this.sourceEndpointDefinitions={};var ta=function(a,b,c,d,e){for(var f=a.target||a.srcElement,g=!1,h=d.getSelector(b,c),i=0;i<h.length;i++)if(h[i]==f){g=!0;break}return e?!g:g};this.makeTarget=function(c,d,f){var g=u.extend({_jsPlumb:this},f);u.extend(g,d),sa(g,1,this);var h=g.scope||e.Defaults.Scope,i=!(!1===g.deleteEndpointsOnDetach),l=g.maxConnections||-1,m=g.onMaxConnections,n=function(c){var d=k(c),e=d.id,f=new j(g),n=u.extend({},g.dropOptions||{});qa(e),this.targetEndpointDefinitions[e]={def:g,uniqueEndpoint:g.uniqueEndpoint,maxConnections:l,enabled:!0};var o=function(){this.currentlyDragging=!1;var a=this.getDropEvent(arguments),c=this.select({target:e}).length,h=this.getDOMElement(this.getDragObject(arguments)),j=this.getAttribute(h,"dragId"),k=this.getAttribute(h,"originalScope"),l=w[j];if(null!=l){var n=l.endpoints[0].isFloating()?0:1,o=l.endpoints[0],p=(g.endpoint&&u.extend({},g.endpoint),this.targetEndpointDefinitions[e]);if(!p.enabled||p.maxConnections>0&&c>=p.maxConnections)return m&&m({element:d.el,connection:l},a),!1;if(o.anchor.locked=!1,k&&this.setDragScope(h,k),null==l.suspendedEndpoint&&!l.pending)return!1;var q=f.isDropAllowed(0===n?e:l.sourceId,0===n?l.targetId:e,l.scope,l,null,0===n?d.el:l.source,0===n?l.target:d.el);if(l.suspendedEndpoint){l[n?"targetId":"sourceId"]=l.suspendedEndpoint.elementId,l[n?"target":"source"]=l.suspendedEndpoint.element,l.endpoints[n]=l.suspendedEndpoint;var r=(l.suspendedEndpoint.getElement(),l.suspendedEndpoint.elementId);aa({index:n,originalSourceId:0===n?r:l.sourceId,newSourceId:0===n?e:l.sourceId,originalTargetId:1==n?r:l.targetId,newTargetId:1==n?e:l.targetId,connection:l},a)}if(q){var s=this.getElementObject(d.el),t=p.endpoint;if((null==t||null==t._jsPlumb)&&(t=this.addEndpoint(s,g)),g.uniqueEndpoint&&(p.endpoint=t),t._doNotDeleteOnDetach=!1,t._deleteOnDetach=!0,l.isDetachable()&&t.initDraggable(),null!=t.anchor.positionFinder){var v=this.getUIPosition(arguments,this.getZoom()),x=b(s,this),y=this.getSize(s),z=t.anchor.positionFinder(v,x,y,t.anchor.constructorParams);t.anchor.x=z[0],t.anchor.y=z[1]}l[n?"target":"source"]=t.element,l[n?"targetId":"sourceId"]=t.elementId,l.endpoints[n].detachFromConnection(l),l.endpoints[n]._deleteOnDetach&&(l.endpoints[n].deleteAfterDragStop=!0),t.addConnection(l),l.endpoints[n]=t,l.deleteEndpointsOnDetach=i,1==n?this.anchorManager.updateOtherEndpoint(l.sourceId,l.suspendedElementId,l.targetId,l):this.anchorManager.sourceChanged(l.suspendedEndpoint.elementId,l.sourceId,l),O(l,null,a),l.pending=!1}else l.suspendedEndpoint&&(l.isReattach()?(l.setHover(!1),l.floatingAnchorIndex=null,l.suspendedEndpoint.addConnection(l),this.repaint(o.elementId)):l.deleteConnectionNow=!0)}}.bind(this),p=u.dragEvents.drop;n.scope=n.scope||h,n[p]=a.wrap(n[p],o),!1===g.allowLoopback&&(n.canDrop=function(a){return a.getDragElement()._jsPlumbRelatedElement!=d.el}),this.initDroppable(this.getElementObject(d.el),n,!0)}.bind(this);c=H(c);for(var o=c.length&&c.constructor!=String?c:[c],p=0,q=o.length;q>p;p++)n(o[p]);return this},this.unmakeTarget=function(a,b){var c=k(a);return u.destroyDroppable(c.el),b||delete this.targetEndpointDefinitions[c.id],this},this.makeSource=function(c,d,f){var g=u.extend({},f);u.extend(g,d),sa(g,0,this);var h=g.maxConnections||1,j=g.onMaxConnections,l=function(c){var d=c.id,f=this.getElementObject(c.el),k=this.getDOMElement(f),l=function(){return null==g.parent?null:"parent"===g.parent?c.el.parentNode:e.getDOMElement(g.parent)},n=null!=g.parent?this.getId(l()):d;qa(n),this.sourceEndpointDefinitions[n]={def:g,uniqueEndpoint:g.uniqueEndpoint,maxConnections:h,enabled:!0};var o=u.dragEvents.stop,p=u.dragEvents.drag,q=u.extend({},g.dragOptions||{}),r=q.drag,s=q.stop,t=null,v=!1;q.scope=q.scope||g.scope,q[p]=a.wrap(q[p],function(){r&&r.apply(this,arguments),v=!1}),q[o]=a.wrap(q[o],function(){if(s&&s.apply(this,arguments),this.currentlyDragging=!1,null!=t._jsPlumb){var a=g.anchor||this.Defaults.Anchor,c=t.anchor,e=t.connections[0],f=this.makeAnchor(a,d,this),h=t.element;if(null!=f.positionFinder){var i=b(h,this),j=this.getSize(h),k={left:i.left+c.x*j[0],top:i.top+c.y*j[1]},n=f.positionFinder(k,i,j,f.constructorParams);f.x=n[0],f.y=n[1]}if(t.setAnchor(f,!0),g.parent){var o=l();if(o){var p=g.container||m;t.setElement(o,p)}}t.repaint(),this.repaint(t.elementId),this.repaint(e.targetId)}}.bind(this));var w=function(a){var b=this.getOriginalEvent(a),c=this.sourceEndpointDefinitions[n];if(d=this.getId(this.getDOMElement(f)),c.enabled){if(g.filter){if(!1===(jsPlumbUtil.isString(g.filter)?ta(b,f,g.filter,this,g.filterExclude):g.filter(b,f)))return}var m=this.select({source:n}).length;if(c.maxConnections>=0&&c.uniqueEndpoint&&m>=c.maxConnections)return j&&j({element:f,maxConnections:h},a),!1;var o=jsPlumbAdapter.getPositionOnElement(b,k,i),p=o;g.parent&&(p=jsPlumbAdapter.getPositionOnElement(b,l(),i));var r={};u.extend(r,g),r.isTemporarySource=!0,r.anchor=[o[0],o[1],0,0],r.parentAnchor=[p[0],p[1],0,0],r.dragOptions=q,t=this.addEndpoint(d,r),v=!0,t.endpointWillMoveTo=g.parent?l():null,t._doNotDeleteOnDetach=!1,t._deleteOnDetach=!0;var s=function(){v&&(v=!1,e.deleteEndpoint(t))};e.registerListener(t.canvas,"mouseup",s),e.registerListener(f,"mouseup",s),e.trigger(t.canvas,"mousedown",a),jsPlumbUtil.consume(a)}}.bind(this);this.registerListener(f,"mousedown",w),this.sourceEndpointDefinitions[n].trigger=w,g.filter&&jsPlumbUtil.isString(g.filter)&&e.setDragFilter(f,g.filter)}.bind(this);c=H(c);for(var n=c.length&&c.constructor!=String?c:[c],o=0,p=n.length;p>o;o++)l(k(n[o]));return this},this.unmakeSource=function(a,b){var c=k(a),d=this.sourceEndpointDefinitions[c.id].trigger;return d&&e.unregisterListener(c.el,"mousedown",d),b||delete this.sourceEndpointDefinitions[c.id],this},this.unmakeEverySource=function(){for(var a in this.sourceEndpointDefinitions)e.unmakeSource(a,!0);return this.sourceEndpointDefinitions={},this},this.unmakeEveryTarget=function(){
for(var a in this.targetEndpointDefinitions)e.unmakeTarget(a,!0);return this.targetEndpointDefinitions={},this};var ua=function(b,c,d,e){var f="source"==b?this.sourceEndpointDefinitions:this.targetEndpointDefinitions;if(c=H(c),a.isString(c))f[c].enabled=e?!f[c].enabled:d;else if(c.length)for(var g=0,h=c.length;h>g;g++){var i=k(c[g]);f[i.id]&&(f[i.id].enabled=e?!f[i.id].enabled:d)}else{var j=k(c).id;f[j].enabled=e?!f[j].enabled:d}return this}.bind(this),va=function(b,c){return b=H(b),a.isString(b)||!b.length?c.apply(this,[b]):b.length?c.apply(this,[b[0]]):void 0}.bind(this);this.toggleSourceEnabled=function(a){return ua("source",a,null,!0),this.isSourceEnabled(a)},this.setSourceEnabled=function(a,b){return ua("source",a,b)},this.isSource=function(a){return va(a,function(a){return null!=this.sourceEndpointDefinitions[k(a).id]})},this.isSourceEnabled=function(a){return va(a,function(a){var b=this.sourceEndpointDefinitions[k(a).id];return b&&!0===b.enabled})},this.toggleTargetEnabled=function(a){return ua("target",a,null,!0),this.isTargetEnabled(a)},this.isTarget=function(a){return va(a,function(a){return null!=this.targetEndpointDefinitions[k(a).id]})},this.isTargetEnabled=function(a){return va(a,function(a){var b=this.targetEndpointDefinitions[k(a).id];return b&&!0===b.enabled})},this.setTargetEnabled=function(a,b){return ua("target",a,b)},this.ready=function(a){e.bind("ready",a)},this.repaint=function(a,b,c){if("object"==typeof a&&a.length)for(var d=0,f=a.length;f>d;d++)I(a[d],b,c);else I(a,b,c);return e},this.repaintEverything=function(a){var b=c();for(var d in q)I(d,null,b,a);return this},this.removeAllEndpoints=function(a,b){var c=function(a){var d,f,g=k(a),h=q[g.id];if(h)for(d=0,f=h.length;f>d;d++)e.deleteEndpoint(h[d]);if(delete q[g.id],b&&g.el&&3!=g.el.nodeType&&8!=g.el.nodeType)for(d=0,f=g.el.childNodes.length;f>d;d++)c(g.el.childNodes[d])};return c(a),this},this.remove=function(a,b){var c=k(a);return e.doWhileSuspended(function(){e.removeAllEndpoints(c.id,!0),e.dragManager.elementRemoved(c.id),delete w[c.id],e.anchorManager.clearFor(c.id),e.anchorManager.removeFloatingConnection(c.id)},!1===b),c.el&&e.removeElement(c.el),e};var wa={},xa=function(){for(var a in wa)for(var b=0,c=wa[a].length;c>b;b++){var d=wa[a][b];e.off(d.el,d.event,d.listener)}wa={}};this.registerListener=function(a,b,c){e.on(a,b,c),jsPlumbUtil.addToList(wa,b,{el:a,event:b,listener:c})},this.unregisterListener=function(a,b,c){e.off(a,b,c),jsPlumbUtil.removeWithFunction(wa,function(a){return a.type==b&&a.listener==c})},this.reset=function(){e.deleteEveryEndpoint(),e.unbind(),this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={},p.splice(0),xa(),e.anchorManager.reset(),jsPlumbAdapter.headless||e.dragManager.reset()},this.setDefaultScope=function(a){return C=a,e},this.setDraggable=S,this.setId=function(a,b,c){var d;jsPlumbUtil.isString(a)?d=a:(a=this.getDOMElement(a),d=this.getId(a));var e=this.getConnections({source:d,scope:"*"},!0),f=this.getConnections({target:d,scope:"*"},!0);b=""+b,c?a=this.getDOMElement(b):(a=this.getDOMElement(d),this.setAttribute(a,"id",b)),q[b]=q[d]||[];for(var g=0,h=q[b].length;h>g;g++)q[b][g].setElementId(b),q[b][g].setReferenceElement(a);delete q[d],this.anchorManager.changeId(d,b),this.dragManager&&this.dragManager.changeId(d,b);var i=function(c,d,e){for(var f=0,g=c.length;g>f;f++)c[f].endpoints[d].setElementId(b),c[f].endpoints[d].setReferenceElement(a),c[f][e+"Id"]=b,c[f][e]=a};i(e,0,"source"),i(f,1,"target"),this.repaint(b)},this.setDebugLog=function(a){n=a},this.setSuspendDrawing=function(a,b){var c=A;return A=a,B=a?(new Date).getTime():null,b&&this.repaintEverything(),c},this.isSuspendDrawing=function(){return A},this.getSuspendedAt=function(){return B},this.doWhileSuspended=function(b,c){var d=this.isSuspendDrawing();d||this.setSuspendDrawing(!0);try{b()}catch(b){a.log("Function run while suspended failed",b)}d||this.setSuspendDrawing(!1,!c)},this.getOffset=function(a){return t[a]},this.getCachedData=X,this.timestamp=c,this.setRenderMode=function(a){if(a!==u.SVG&&a!==u.VML)throw new TypeError("Render mode ["+a+"] not supported");return D=jsPlumbAdapter.setRenderMode(a)},this.getRenderMode=function(){return D},this.show=function(a,b){return T(a,"block",b),e},this.toggleVisible=V,this.toggleDraggable=U,this.addListener=this.bind,jsPlumbAdapter.headless||(e.dragManager=jsPlumbAdapter.getDragManager(e),e.recalculateOffsets=e.dragManager.updateOffsets)};jsPlumbUtil.extend(t,jsPlumbUtil.EventGenerator,{setAttribute:function(a,b,c){this.setAttribute(a,b,c)},getAttribute:function(a,b){return this.getAttribute(u.getDOMElement(a),b)},registerConnectionType:function(a,b){this._connectionTypes[a]=u.extend({},b)},registerConnectionTypes:function(a){for(var b in a)this._connectionTypes[b]=u.extend({},a[b])},registerEndpointType:function(a,b){this._endpointTypes[a]=u.extend({},b)},registerEndpointTypes:function(a){for(var b in a)this._endpointTypes[b]=u.extend({},a[b])},getType:function(a,b){return"connection"===b?this._connectionTypes[a]:this._endpointTypes[a]},setIdChanged:function(a,b){this.setId(a,b,!0)},setParent:function(a,b){var c=this.getElementObject(a),d=this.getDOMElement(c),e=this.getId(d),f=this.getElementObject(b),g=this.getDOMElement(f),h=this.getId(g);d.parentNode.removeChild(d),g.appendChild(d),this.dragManager.setParent(c,e,f,h)},getSize:function(a){return[a.offsetWidth,a.offsetHeight]},getWidth:function(a){return a.offsetWidth},getHeight:function(a){return a.offsetHeight},extend:function(a,b,c){var d;if(c)for(d=0;d<c.length;d++)a[c[d]]=b[c[d]];else for(d in b)a[d]=b[d];return a}},jsPlumbAdapter);var u=new t;"undefined"!=typeof window&&(window.jsPlumb=u),u.getInstance=function(a){var b=new t(a);return b.init(),b},"function"==typeof define&&(define("jsplumb",[],function(){return u}),define("jsplumbinstance",[],function(){return u.getInstance()})),"undefined"!=typeof exports&&(exports.jsPlumb=u)}(),function(){"use strict";var a=function(a,b){var c=!1;return{drag:function(){if(c)return c=!1,!0;var d=jsPlumb.getUIPosition(arguments,b.getZoom());a.element&&(jsPlumbAdapter.setPosition(a.element,d),b.repaint(a.element,d))},stopDrag:function(){c=!0}}},b=function(a,b){var c=document.createElement("div");c.style.position="absolute",(b.getContainer()||document.body).appendChild(c);var d=b.getId(c);b.updateOffset({elId:d}),a.id=d,a.element=c},c=function(a,b,c,d,e,f,g){return g({paintStyle:a,endpoint:c,anchor:new jsPlumb.FloatingAnchor({reference:b,referenceCanvas:d,jsPlumbInstance:f}),source:e,scope:"__floating"})},d=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],e=function(a,b){var c=0;if(null!=b)for(var d=0;d<a.connections.length;d++)if(a.connections[d].sourceId==b||a.connections[d].targetId==b){c=d;break}return a.connections[c]},f=function(a,b){return jsPlumbUtil.findWithFunction(b.connections,function(b){return b.id==a.id})};jsPlumb.Endpoint=function(g){var h=g._jsPlumb,i=(jsPlumbAdapter.getAttribute,jsPlumb.getElementObject),j=jsPlumbUtil,k=g.newConnection,l=g.newEndpoint,m=g.finaliseConnection,n=(g.fireDetachEvent,g.fireMoveEvent),o=g.floatingConnections;this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.getDefaultType=function(){return{parameters:{},scope:null,maxConnections:this._jsPlumb.instance.Defaults.MaxConnections,paintStyle:this._jsPlumb.instance.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle,endpoint:this._jsPlumb.instance.Defaults.Endpoint||jsPlumb.Defaults.Endpoint,hoverPaintStyle:this._jsPlumb.instance.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle,overlays:this._jsPlumb.instance.Defaults.EndpointOverlays||jsPlumb.Defaults.EndpointOverlays,connectorStyle:g.connectorStyle,connectorHoverStyle:g.connectorHoverStyle,connectorClass:g.connectorClass,connectorHoverClass:g.connectorHoverClass,connectorOverlays:g.connectorOverlays,connector:g.connector,connectorTooltip:g.connectorTooltip}},this._jsPlumb.enabled=!(!1===g.enabled),this._jsPlumb.visible=!0,this.element=jsPlumb.getDOMElement(g.source),this._jsPlumb.uuid=g.uuid,this._jsPlumb.floatingEndpoint=null;var p=null;this._jsPlumb.uuid&&(g.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=g.elementId,this._jsPlumb.connectionCost=g.connectionCost,this._jsPlumb.connectionsDirected=g.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={};var q=function(){jsPlumbAdapter.removeClass(this.element,h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),this.removeClass(h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),this._jsPlumb.currentAnchorClass=this.anchor.getCssClass(),this.addClass(h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),jsPlumbAdapter.addClass(this.element,h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass)}.bind(this);this.setAnchor=function(a,b){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=this._jsPlumb.instance.makeAnchor(a,this.elementId,h),q(),this.anchor.bind("anchorChanged",function(a){this.fire("anchorChanged",{endpoint:this,anchor:a}),q()}.bind(this)),b||this._jsPlumb.instance.repaint(this.elementId),this};var r=g.anchor?g.anchor:g.anchors?g.anchors:h.Defaults.Anchor||"Top";this.setAnchor(r,!0);var s=function(a){this.connections.length>0?this.connections[0].setHover(a,!1):this.setHover(a)}.bind(this);g._transient||this._jsPlumb.instance.anchorManager.add(this,this.elementId),this.setEndpoint=function(a){null!=this.endpoint&&(this.endpoint.cleanup(),this.endpoint.destroy());var b=function(a,b){var c=h.getRenderMode();if(jsPlumb.Endpoints[c][a])return new jsPlumb.Endpoints[c][a](b);if(!h.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown endpoint type '"+a+"'"}},c={_jsPlumb:this._jsPlumb.instance,cssClass:g.cssClass,container:g.container,tooltip:g.tooltip,connectorTooltip:g.connectorTooltip,endpoint:this};j.isString(a)?this.endpoint=b(a,c):j.isArray(a)?(c=j.merge(a[1],c),this.endpoint=b(a[0],c)):this.endpoint=a.clone(),jsPlumb.extend({},c),this.endpoint.clone=function(){return j.isString(a)?b(a,c):j.isArray(a)?(c=j.merge(a[1],c),b(a[0],c)):void 0}.bind(this),this.type=this.endpoint.type,this.bindListeners(this.endpoint,this,s)},this.setEndpoint(g.endpoint||h.Defaults.Endpoint||jsPlumb.Defaults.Endpoint||"Dot"),this.setPaintStyle(g.paintStyle||g.style||h.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle,!0),this.setHoverPaintStyle(g.hoverPaintStyle||h.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle,!0),this._jsPlumb.paintStyleInUse=this.getPaintStyle(),jsPlumb.extend(this,g,d),this.isSource=g.isSource||!1,this.isTemporarySource=g.isTemporarySource||!1,this.isTarget=g.isTarget||!1,this._jsPlumb.maxConnections=g.maxConnections||h.Defaults.MaxConnections,this.canvas=this.endpoint.canvas,this.addClass(h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),jsPlumbAdapter.addClass(this.element,h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),this.connections=g.connections||[],this.connectorPointerEvents=g["connector-pointer-events"],this.scope=g.scope||h.getDefaultScope(),this.timestamp=null,this.reattachConnections=g.reattach||h.Defaults.ReattachConnections,this.connectionsDetachable=h.Defaults.ConnectionsDetachable,(!1===g.connectionsDetachable||!1===g.detachable)&&(this.connectionsDetachable=!1),this.dragAllowedWhenFull=!1!==g.dragAllowedWhenFull,g.onMaxConnections&&this.bind("maxConnections",g.onMaxConnections),this.addConnection=function(a){this.connections.push(a),this[(this.connections.length>0?"add":"remove")+"Class"](h.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](h.endpointFullClass)},this.detachFromConnection=function(a,b,c){b=null==b?f(a,this):b,b>=0&&(this.connections.splice(b,1),this[(this.connections.length>0?"add":"remove")+"Class"](h.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](h.endpointFullClass)),!c&&this._deleteOnDetach&&0===this.connections.length&&h.deleteObject({endpoint:this,fireEvent:!1,deleteAttachedObjects:!1})},this.detach=function(a,b,c,d,e,g,i){var j=null==i?f(a,this):i,k=!1;return d=!1!==d,j>=0&&(c||a._forceDetach||a.isDetachable()&&a.isDetachAllowed(a)&&this.isDetachAllowed(a)&&h.checkCondition("beforeDetach",a))&&(h.deleteObject({connection:a,fireEvent:!b&&d,originalEvent:e,deleteAttachedObjects:!1}),k=!0),k},this.detachAll=function(a,b){for(;this.connections.length>0;)this.detach(this.connections[0],!1,!0,!1!==a,b,this,0);return this},this.detachFrom=function(a,b,c){for(var d=[],e=0;e<this.connections.length;e++)(this.connections[e].endpoints[1]==a||this.connections[e].endpoints[0]==a)&&d.push(this.connections[e]);for(var f=0;f<d.length;f++)this.detach(d[f],!1,!0,b,c);return this},this.getElement=function(){return this.element},this.setElement=function(a){var b=this._jsPlumb.instance.getId(a),c=this.elementId;return j.removeWithFunction(g.endpointsByElement[this.elementId],function(a){return a.id==this.id}.bind(this)),this.element=jsPlumb.getDOMElement(a),this.elementId=h.getId(this.element),h.anchorManager.rehomeEndpoint(this,c,this.element),h.dragManager.endpointAdded(this.element),j.addToList(g.endpointsByElement,b,this),this},this.makeInPlaceCopy=function(){var a=this.anchor.getCurrentLocation({element:this}),b=this.anchor.getOrientation(this),c=this.anchor.getCssClass(),d={bind:function(){},compute:function(){return[a[0],a[1]]},getCurrentLocation:function(){return[a[0],a[1]]},getOrientation:function(){return b},getCssClass:function(){return c}};return l({dropOptions:g.dropOptions,anchor:d,source:this.element,paintStyle:this.getPaintStyle(),endpoint:g.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope})},this.connectorSelector=function(){var a=this.connections[0];return this.isTarget&&a?a:this.connections.length<this._jsPlumb.maxConnections||-1==this._jsPlumb.maxConnections?null:a},this.setStyle=this.setPaintStyle,this.paint=function(a){a=a||{};var b=a.timestamp,c=!(!1===a.recalc);if(!b||this.timestamp!==b){var d=h.updateOffset({elId:this.elementId,timestamp:b}),f=a.offset?a.offset.o:d.o;if(null!=f){var g=a.anchorPoint,i=a.connectorPaintStyle;if(null==g){var j=a.dimensions||d.s,k={xy:[f.left,f.top],wh:j,element:this,timestamp:b};if(c&&this.anchor.isDynamic&&this.connections.length>0){var l=e(this,a.elementWithPrecedence),m=l.endpoints[0]==this?1:0,n=0===m?l.sourceId:l.targetId,o=h.getCachedData(n),p=o.o,q=o.s;k.txy=[p.left,p.top],k.twh=q,k.tElement=l.endpoints[m]}g=this.anchor.compute(k)}this.endpoint.compute(g,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,i||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=b;for(var r=0;r<this._jsPlumb.overlays.length;r++){var s=this._jsPlumb.overlays[r];s.isVisible()&&(this._jsPlumb.overlayPlacements[r]=s.draw(this.endpoint,this._jsPlumb.paintStyleInUse),s.paint(this._jsPlumb.overlayPlacements[r]))}}}},this.repaint=this.paint;var t=!1;this.initDraggable=function(){if(!t&&jsPlumb.isDragSupported(this.element)){var d={id:null,element:null},e=null,f=!1,m=null,n=a(d,h),q=function(){e=this.connectorSelector();var a=!0;if(this.isEnabled()||(a=!1),null!=e||this.isSource||this.isTemporarySource||(a=!1),this.isSource&&this.isFull()&&!this.dragAllowedWhenFull&&(a=!1),null==e||e.isDetachable()||(a=!1),!1===a)return h.stopDrag&&h.stopDrag(this.canvas),n.stopDrag(),!1;for(var q=0;q<this.connections.length;q++)this.connections[q].setHover(!1);this.addClass("endpointDrag"),h.setConnectionBeingDragged(!0),e&&!this.isFull()&&this.isSource&&(e=null),h.updateOffset({elId:this.elementId}),p=this.makeInPlaceCopy(),p.referenceEndpoint=this,p.paint(),b(d,h);var r=i(p.canvas),s=jsPlumbAdapter.getOffset(r,this._jsPlumb.instance),t=i(this.canvas);if(jsPlumbAdapter.setPosition(d.element,s),this.parentAnchor&&(this.anchor=h.makeAnchor(this.parentAnchor,this.elementId,h)),h.setAttribute(this.canvas,"dragId",d.id),h.setAttribute(this.canvas,"elId",this.elementId),this._jsPlumb.floatingEndpoint=c(this.getPaintStyle(),this.anchor,this.endpoint,this.canvas,d.element,h,l),this.canvas.style.visibility="hidden",null==e)this.anchor.locked=!0,this.setHover(!1,!1),e=k({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.endpointWillMoveTo||this.element,target:d.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:g.connectorStyle,hoverPaintStyle:g.connectorHoverStyle,connector:g.connector,overlays:g.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass}),e.pending=!0,e.addClass(h.draggingClass),this._jsPlumb.floatingEndpoint.addClass(h.draggingClass),h.fire("connectionDrag",e);else{f=!0,e.setHover(!1);var u=e.endpoints[0].id==this.id?0:1;e.floatingAnchorIndex=u,this.detachFromConnection(e,null,!0);var v=h.getDragScope(t);h.setAttribute(this.canvas,"originalScope",v);var w=h.getDropScope(t);h.setDragScope(t,w),h.fire("connectionDrag",e),0===u?(m=[e.source,e.sourceId,t,v],e.source=d.element,e.sourceId=d.id):(m=[e.target,e.targetId,t,v],e.target=d.element,e.targetId=d.id),e.endpoints[0===u?1:0].anchor.locked=!0,e.suspendedEndpoint=e.endpoints[u],e.suspendedElement=e.endpoints[u].getElement(),e.suspendedElementId=e.endpoints[u].elementId,e.suspendedElementType=0===u?"source":"target",e.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=e.suspendedEndpoint,e.endpoints[u]=this._jsPlumb.floatingEndpoint,e.addClass(h.draggingClass),this._jsPlumb.floatingEndpoint.addClass(h.draggingClass)}o[d.id]=e,h.anchorManager.addFloatingConnection(d.id,e),j.addToList(g.endpointsByElement,d.id,this._jsPlumb.floatingEndpoint),h.currentlyDragging=!0}.bind(this),r=g.dragOptions||{},s={},u=jsPlumb.dragEvents.start,v=jsPlumb.dragEvents.stop,w=jsPlumb.dragEvents.drag;r=jsPlumb.extend(s,r),r.scope=r.scope||this.scope,r[u]=j.wrap(r[u],q,!1),r[w]=j.wrap(r[w],n.drag),r[v]=j.wrap(r[v],function(){if(h.setConnectionBeingDragged(!1),e&&null!=e.endpoints){var a=h.getDropEvent(arguments),b=null==e.floatingAnchorIndex?1:e.floatingAnchorIndex;if(e.endpoints[0===b?1:0].anchor.locked=!1,e.removeClass(h.draggingClass),this._jsPlumb&&(e.deleteConnectionNow||e.endpoints[b]==this._jsPlumb.floatingEndpoint)&&f&&e.suspendedEndpoint){0===b?(e.source=m[0],e.sourceId=m[1]):(e.target=m[0],e.targetId=m[1]);var c=this._jsPlumb.floatingEndpoint;h.setDragScope(m[2],m[3]),e.endpoints[b]=e.suspendedEndpoint,e.isReattach()||e._forceReattach||e._forceDetach||!e.endpoints[0===b?1:0].detach(e,!1,!1,!0,a)?(e.setHover(!1),e.floatingAnchorIndex=null,e._forceDetach=null,e._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(e),e.suspendedEndpoint.addConnection(e),h.repaint(m[1])):h.deleteObject({endpoint:c})}h.remove(d.element,!1),h.deleteObject({endpoint:p}),this.deleteAfterDragStop?h.deleteObject({endpoint:this}):this._jsPlumb&&(this._jsPlumb.floatingEndpoint=null,this.canvas.style.visibility="visible",this.anchor.locked=!1,this.paint({recalc:!1})),h.fire("connectionDragStop",e,a),h.currentlyDragging=!1,e=null}}.bind(this));var x=i(this.canvas);h.initDraggable(x,r,!0),this.canvas._jsPlumbRelatedElement=this.element,t=!0}},(this.isSource||this.isTarget||this.isTemporarySource)&&this.initDraggable();var u=function(a,b,c,d){if((this.isTarget||b)&&jsPlumb.isDropSupported(this.element)){var e=g.dropOptions||h.Defaults.DropOptions||jsPlumb.Defaults.DropOptions;e=jsPlumb.extend({},e),e.scope=e.scope||this.scope;var f=jsPlumb.dragEvents.drop,i=jsPlumb.dragEvents.over,k=jsPlumb.dragEvents.out,l=function(){this.removeClass(h.endpointDropAllowedClass),this.removeClass(h.endpointDropForbiddenClass);var a=h.getDropEvent(arguments),b=h.getDOMElement(h.getDragObject(arguments)),c=h.getAttribute(b,"dragId"),e=(h.getAttribute(b,"elId"),h.getAttribute(b,"originalScope")),f=o[c];if(null!=f){if(f.suspendedEndpoint&&(f.suspendedEndpoint.id==this.id||this.referenceEndpoint&&f.suspendedEndpoint.id==this.referenceEndpoint.id))return void(f._forceReattach=!0);var g=null==f.floatingAnchorIndex?1:f.floatingAnchorIndex;e&&h.setDragScope(b,e);var i=null==d||d.isEnabled();if(this.isFull()&&this.fire("maxConnections",{endpoint:this,connection:f,maxConnections:this._jsPlumb.maxConnections},a),!this.isFull()&&(0!==g||this.isSource)&&(1!=g||this.isTarget)&&i){var j=!0;f.suspendedEndpoint&&f.suspendedEndpoint.id!=this.id&&(0===g?(f.source=f.suspendedEndpoint.element,f.sourceId=f.suspendedEndpoint.elementId):(f.target=f.suspendedEndpoint.element,f.targetId=f.suspendedEndpoint.elementId),f.isDetachAllowed(f)&&f.endpoints[g].isDetachAllowed(f)&&f.suspendedEndpoint.isDetachAllowed(f)&&h.checkCondition("beforeDetach",f)||(j=!1)),0===g?(f.source=this.element,f.sourceId=this.elementId):(f.target=this.element,f.targetId=this.elementId);var k=function(){f.floatingAnchorIndex=null},l=function(){f.pending=!1,f.endpoints[g].detachFromConnection(f),f.suspendedEndpoint&&f.suspendedEndpoint.detachFromConnection(f),f.endpoints[g]=this,this.addConnection(f);var b=this.getParameters();for(var c in b)f.setParameter(c,b[c]);if(f.suspendedEndpoint){var d=(f.suspendedEndpoint.getElement(),f.suspendedEndpoint.elementId);n({index:g,originalSourceId:0===g?d:f.sourceId,newSourceId:0===g?this.elementId:f.sourceId,originalTargetId:1==g?d:f.targetId,newTargetId:1==g?this.elementId:f.targetId,originalSourceEndpoint:0===g?f.suspendedEndpoint:f.endpoints[0],newSourceEndpoint:0===g?this:f.endpoints[0],originalTargetEndpoint:1==g?f.suspendedEndpoint:f.endpoints[1],newTargetEndpoint:1==g?this:f.endpoints[1],connection:f},a)}else b.draggable&&jsPlumb.initDraggable(this.element,dragOptions,!0,h);1==g?h.anchorManager.updateOtherEndpoint(f.sourceId,f.suspendedElementId,f.targetId,f):h.anchorManager.sourceChanged(f.suspendedEndpoint.elementId,f.sourceId,f),m(f,null,a),k()}.bind(this),p=function(){f.suspendedEndpoint&&(f.endpoints[g]=f.suspendedEndpoint,f.setHover(!1),f._forceDetach=!0,0===g?(f.source=f.suspendedEndpoint.element,f.sourceId=f.suspendedEndpoint.elementId):(f.target=f.suspendedEndpoint.element,f.targetId=f.suspendedEndpoint.elementId),f.suspendedEndpoint.addConnection(f),f.endpoints[0].repaint(),f.repaint(),h.repaint(f.sourceId),f._forceDetach=!1),k()};j=j&&this.isDropAllowed(f.sourceId,f.targetId,f.scope,f,this),j?l():p()}h.currentlyDragging=!1}}.bind(this);e[f]=j.wrap(e[f],l),e[i]=j.wrap(e[i],function(){var a=jsPlumb.getDragObject(arguments),b=h.getAttribute(jsPlumb.getDOMElement(a),"dragId"),c=o[b];if(null!=c){var d=null==c.floatingAnchorIndex?1:c.floatingAnchorIndex;if(this.isTarget&&0!==c.floatingAnchorIndex||c.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==c.suspendedEndpoint.id){var e=h.checkCondition("checkDropAllowed",{sourceEndpoint:c.endpoints[d],targetEndpoint:this,connection:c});this[(e?"add":"remove")+"Class"](h.endpointDropAllowedClass),this[(e?"remove":"add")+"Class"](h.endpointDropForbiddenClass),c.endpoints[d].anchor.over(this.anchor,this)}}}.bind(this)),e[k]=j.wrap(e[k],function(){var a=jsPlumb.getDragObject(arguments),b=null==a?null:h.getAttribute(jsPlumb.getDOMElement(a),"dragId"),c=b?o[b]:null;if(null!=c){var d=null==c.floatingAnchorIndex?1:c.floatingAnchorIndex;(this.isTarget&&0!==c.floatingAnchorIndex||c.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==c.suspendedEndpoint.id)&&(this.removeClass(h.endpointDropAllowedClass),this.removeClass(h.endpointDropForbiddenClass),c.endpoints[d].anchor.out())}}.bind(this)),h.initDroppable(a,e,!0,c)}}.bind(this);return this.anchor.isFloating||u(i(this.canvas),!0,!(g._transient||this.anchor.isFloating),this),g.type&&this.addType(g.type,g.data,h.isSuspendDrawing()),this},jsPlumbUtil.extend(jsPlumb.Endpoint,OverlayCapableJsPlumbUIComponent,{getTypeDescriptor:function(){return"endpoint"},isVisible:function(){return this._jsPlumb.visible},setVisible:function(a,b,c){if(this._jsPlumb.visible=a,this.canvas&&(this.canvas.style.display=a?"block":"none"),this[a?"showOverlays":"hideOverlays"](),!b)for(var d=0;d<this.connections.length;d++)if(this.connections[d].setVisible(a),!c){var e=this===this.connections[d].endpoints[0]?1:0;1==this.connections[d].endpoints[e].connections.length&&this.connections[d].endpoints[e].setVisible(a,!0,!0)}},getAttachedElements:function(){return this.connections},applyType:function(a){null!=a.maxConnections&&(this._jsPlumb.maxConnections=a.maxConnections),a.scope&&(this.scope=a.scope),jsPlumb.extend(this,a,d),a.anchor&&(this.anchor=this._jsPlumb.instance.makeAnchor(a.anchor)),null!=a.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,a.cssClass)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(a){this._jsPlumb.enabled=a},cleanup:function(){jsPlumbAdapter.removeClass(this.element,this._jsPlumb.instance.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),this.anchor=null,this.endpoint.cleanup(),this.endpoint.destroy(),this.endpoint=null;var a=jsPlumb.getElementObject(this.canvas);this._jsPlumb.instance.destroyDraggable(a),this._jsPlumb.instance.destroyDroppable(a)},setHover:function(a){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(a)},isFull:function(){return!(this.isFloating()||this._jsPlumb.maxConnections<1||this.connections.length<this._jsPlumb.maxConnections)},isFloating:function(){return null!=this.anchor&&this.anchor.isFloating},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(a){this._jsPlumb.connectionCost=a},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(a){this._jsPlumb.connectionsDirected=a},setElementId:function(a){this.elementId=a,this.anchor.elementId=a},setReferenceElement:function(a){this.element=jsPlumb.getDOMElement(a)},setDragAllowedWhenFull:function(a){this.dragAllowedWhenFull=a},equals:function(a){return this.anchor.equals(a.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(a){return this.anchor.compute(a)}})}(),function(){"use strict";var a=function(a,b,c,d){if(!a.Defaults.DoNotThrowErrors&&null==jsPlumb.Connectors[b][c])throw{msg:"jsPlumb: unknown connector type '"+c+"'"};return new jsPlumb.Connectors[b][c](d)},b=function(a,b,c){return a?c.makeAnchor(a,b,c):null};jsPlumb.Connection=function(a){var b=(a.newConnection,a.newEndpoint),c=(jsPlumb.getElementObject,jsPlumbUtil);this.connector=null,this.idPrefix="_jsplumb_c_",this.defaultLabelLocation=.5,this.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.previousConnection=a.previousConnection,this.source=jsPlumb.getDOMElement(a.source),this.target=jsPlumb.getDOMElement(a.target),a.sourceEndpoint&&(this.source=a.sourceEndpoint.endpointWillMoveTo||a.sourceEndpoint.getElement()),a.targetEndpoint&&(this.target=a.targetEndpoint.getElement()),OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.sourceId=this._jsPlumb.instance.getId(this.source),this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=a.scope,this.endpoints=[],this.endpointStyles=[];var d=this._jsPlumb.instance;this._jsPlumb.visible=!0,this._jsPlumb.editable=!0===a.editable,this._jsPlumb.params={cssClass:a.cssClass,container:a.container,"pointer-events":a["pointer-events"],editorParams:a.editorParams},this._jsPlumb.lastPaintedAt=null,this.getDefaultType=function(){return{parameters:{},scope:null,detachable:this._jsPlumb.instance.Defaults.ConnectionsDetachable,rettach:this._jsPlumb.instance.Defaults.ReattachConnections,paintStyle:this._jsPlumb.instance.Defaults.PaintStyle||jsPlumb.Defaults.PaintStyle,connector:this._jsPlumb.instance.Defaults.Connector||jsPlumb.Defaults.Connector,hoverPaintStyle:this._jsPlumb.instance.Defaults.HoverPaintStyle||jsPlumb.Defaults.HoverPaintStyle,overlays:this._jsPlumb.instance.Defaults.ConnectorOverlays||jsPlumb.Defaults.ConnectorOverlays}},this.makeEndpoint=function(c,e,f,g){return f=f||this._jsPlumb.instance.getId(e),this.prepareEndpoint(d,b,this,g,c?0:1,a,e,f)};var e=this.makeEndpoint(!0,this.source,this.sourceId,a.sourceEndpoint),f=this.makeEndpoint(!1,this.target,this.targetId,a.targetEndpoint);e&&c.addToList(a.endpointsByElement,this.sourceId,e),f&&c.addToList(a.endpointsByElement,this.targetId,f),this.scope||(this.scope=this.endpoints[0].scope),null!=a.deleteEndpointsOnDetach?(this.endpoints[0]._deleteOnDetach=a.deleteEndpointsOnDetach,this.endpoints[1]._deleteOnDetach=a.deleteEndpointsOnDetach):(this.endpoints[0]._doNotDeleteOnDetach||(this.endpoints[0]._deleteOnDetach=!0),this.endpoints[1]._doNotDeleteOnDetach||(this.endpoints[1]._deleteOnDetach=!0)),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||a.connector||d.Defaults.Connector||jsPlumb.Defaults.Connector,!0,!0),a.path&&this.connector.setPath(a.path),this.setPaintStyle(this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||a.paintStyle||d.Defaults.PaintStyle||jsPlumb.Defaults.PaintStyle,!0),this.setHoverPaintStyle(this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||a.hoverPaintStyle||d.Defaults.HoverPaintStyle||jsPlumb.Defaults.HoverPaintStyle,!0),this._jsPlumb.paintStyleInUse=this.getPaintStyle();var g=d.getSuspendedAt();if(d.updateOffset({elId:this.sourceId,timestamp:g}),d.updateOffset({elId:this.targetId,timestamp:g}),!d.isSuspendDrawing()){var h=d.getCachedData(this.sourceId),i=h.o,j=h.s,k=d.getCachedData(this.targetId),l=k.o,m=k.s,n=g||d.timestamp(),o=this.endpoints[0].anchor.compute({xy:[i.left,i.top],wh:j,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[l.left,l.top],twh:m,tElement:this.endpoints[1],timestamp:n});this.endpoints[0].paint({anchorLoc:o,timestamp:n}),o=this.endpoints[1].anchor.compute({xy:[l.left,l.top],wh:m,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[i.left,i.top],twh:j,tElement:this.endpoints[0],timestamp:n}),this.endpoints[1].paint({anchorLoc:o,timestamp:n})}this._jsPlumb.detachable=d.Defaults.ConnectionsDetachable,!1===a.detachable&&(this._jsPlumb.detachable=!1),!1===this.endpoints[0].connectionsDetachable&&(this._jsPlumb.detachable=!1),!1===this.endpoints[1].connectionsDetachable&&(this._jsPlumb.detachable=!1),this._jsPlumb.reattach=a.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||d.Defaults.ReattachConnections,this._jsPlumb.cost=a.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=a.directed,null==a.directed&&(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var p=jsPlumb.extend({},this.endpoints[1].getParameters());jsPlumb.extend(p,this.endpoints[0].getParameters()),jsPlumb.extend(p,this.getParameters()),this.setParameters(p);var q=[a.type,this.endpoints[0].connectionType,this.endpoints[1].connectionType].join(" ");/[^\s]/.test(q)&&this.addType(q,a.data,!0)},jsPlumbUtil.extend(jsPlumb.Connection,OverlayCapableJsPlumbUIComponent,{applyType:function(a,b){null!=a.detachable&&this.setDetachable(a.detachable),null!=a.reattach&&this.setReattach(a.reattach),a.scope&&(this.scope=a.scope),this.setConnector(a.connector,b),null!=a.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,a.cssClass),a.anchor?(this.endpoints[0].anchor=this._jsPlumb.instance.makeAnchor(a.anchor),this.endpoints[1].anchor=this._jsPlumb.instance.makeAnchor(a.anchor)):a.anchors&&(this.endpoints[0].anchor=this._jsPlumb.instance.makeAnchor(a.anchors[0]),this.endpoints[1].anchor=this._jsPlumb.instance.makeAnchor(a.anchors[1]))},getTypeDescriptor:function(){return"connection"},getAttachedElements:function(){return this.endpoints},addClass:function(a,b){b&&(this.endpoints[0].addClass(a),this.endpoints[1].addClass(a),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(a)),this.connector&&this.connector.addClass(a)},removeClass:function(a,b){b&&(this.endpoints[0].removeClass(a),this.endpoints[1].removeClass(a),
this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(a)),this.connector&&this.connector.removeClass(a)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(a){this._jsPlumb.visible=a,this.connector&&this.connector.setVisible(a),this.repaint()},cleanup:function(){this.endpoints=null,this.source=null,this.target=null,null!=this.connector&&(this.connector.cleanup(),this.connector.destroy()),this.connector=null},isDetachable:function(){return!0===this._jsPlumb.detachable},setDetachable:function(a){this._jsPlumb.detachable=!0===a},isReattach:function(){return!0===this._jsPlumb.reattach},setReattach:function(a){this._jsPlumb.reattach=!0===a},setHover:function(a){this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&(this.connector.setHover(a),jsPlumbAdapter[a?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass),jsPlumbAdapter[a?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass))},getCost:function(){return this._jsPlumb.cost},setCost:function(a){this._jsPlumb.cost=a},isDirected:function(){return!0===this._jsPlumb.directed},getConnector:function(){return this.connector},setConnector:function(b,c,d){var e=jsPlumbUtil;null!=this.connector&&(this.connector.cleanup(),this.connector.destroy());var f={_jsPlumb:this._jsPlumb.instance,cssClass:this._jsPlumb.params.cssClass,container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"]},g=this._jsPlumb.instance.getRenderMode();e.isString(b)?this.connector=a(this._jsPlumb.instance,g,b,f):e.isArray(b)&&(this.connector=1==b.length?a(this._jsPlumb.instance,g,b[0],f):a(this._jsPlumb.instance,g,b[0],e.merge(b[1],f))),this.bindListeners(this.connector,this,function(a){this.setHover(a,!1)}.bind(this)),this.canvas=this.connector.canvas,this.bgCanvas=this.connector.bgCanvas,d||this.setListenerComponent(this.connector),this._jsPlumb.editable&&null!=jsPlumb.ConnectorEditors&&jsPlumb.ConnectorEditors[this.connector.type]&&this.connector.isEditable()?new jsPlumb.ConnectorEditors[this.connector.type]({connector:this.connector,connection:this,params:this._jsPlumb.params.editorParams||{}}):this._jsPlumb.editable=!1,c||this.repaint()},paint:function(a){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){a=a||{};var b=(a.elId,a.ui),c=a.recalc,d=a.timestamp,e=!1,f=e?this.sourceId:this.targetId,g=e?this.targetId:this.sourceId,h=e?0:1,i=e?1:0;if(null==d||d!=this._jsPlumb.lastPaintedAt){var j=this._jsPlumb.instance.updateOffset({elId:g,offset:b,recalc:c,timestamp:d}).o,k=this._jsPlumb.instance.updateOffset({elId:f,timestamp:d}).o,l=this.endpoints[i],m=this.endpoints[h];a.clearEdits&&(this._jsPlumb.overlayPositions=null,l.anchor.clearUserDefinedLocation(),m.anchor.clearUserDefinedLocation(),this.connector.setEdited(!1));var n=l.anchor.getCurrentLocation({xy:[j.left,j.top],wh:[j.width,j.height],element:l,timestamp:d}),o=m.anchor.getCurrentLocation({xy:[k.left,k.top],wh:[k.width,k.height],element:m,timestamp:d});this.connector.resetBounds(),this.connector.compute({sourcePos:n,targetPos:o,sourceEndpoint:this.endpoints[i],targetEndpoint:this.endpoints[h],lineWidth:this._jsPlumb.paintStyleInUse.lineWidth,sourceInfo:j,targetInfo:k,clearEdits:!0===a.clearEdits});for(var p={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},q=0;q<this._jsPlumb.overlays.length;q++){var r=this._jsPlumb.overlays[q];r.isVisible()&&(this._jsPlumb.overlayPlacements[q]=r.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(r)),p.minX=Math.min(p.minX,this._jsPlumb.overlayPlacements[q].minX),p.maxX=Math.max(p.maxX,this._jsPlumb.overlayPlacements[q].maxX),p.minY=Math.min(p.minY,this._jsPlumb.overlayPlacements[q].minY),p.maxY=Math.max(p.maxY,this._jsPlumb.overlayPlacements[q].maxY))}var s=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||1)/2,t=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||0),u={xmin:Math.min(this.connector.bounds.minX-(s+t),p.minX),ymin:Math.min(this.connector.bounds.minY-(s+t),p.minY),xmax:Math.max(this.connector.bounds.maxX+(s+t),p.maxX),ymax:Math.max(this.connector.bounds.maxY+(s+t),p.maxY)};this.connector.paint(this._jsPlumb.paintStyleInUse,null,u);for(var v=0;v<this._jsPlumb.overlays.length;v++){var w=this._jsPlumb.overlays[v];w.isVisible()&&w.paint(this._jsPlumb.overlayPlacements[v],u)}}this._jsPlumb.lastPaintedAt=d}},repaint:function(a){a=a||{},this.paint({elId:this.sourceId,recalc:!(!1===a.recalc),timestamp:a.timestamp,clearEdits:a.clearEdits})},prepareEndpoint:function(a,c,d,e,f,g,h,i){var j;if(e)d.endpoints[f]=e,e.addConnection(d);else{g.endpoints||(g.endpoints=[null,null]);var k=g.endpoints[f]||g.endpoint||a.Defaults.Endpoints[f]||jsPlumb.Defaults.Endpoints[f]||a.Defaults.Endpoint||jsPlumb.Defaults.Endpoint;g.endpointStyles||(g.endpointStyles=[null,null]),g.endpointHoverStyles||(g.endpointHoverStyles=[null,null]);var l=g.endpointStyles[f]||g.endpointStyle||a.Defaults.EndpointStyles[f]||jsPlumb.Defaults.EndpointStyles[f]||a.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle;null==l.fillStyle&&null!=g.paintStyle&&(l.fillStyle=g.paintStyle.strokeStyle),null==l.outlineColor&&null!=g.paintStyle&&(l.outlineColor=g.paintStyle.outlineColor),null==l.outlineWidth&&null!=g.paintStyle&&(l.outlineWidth=g.paintStyle.outlineWidth);var m=g.endpointHoverStyles[f]||g.endpointHoverStyle||a.Defaults.EndpointHoverStyles[f]||jsPlumb.Defaults.EndpointHoverStyles[f]||a.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle;null!=g.hoverPaintStyle&&(null==m&&(m={}),null==m.fillStyle&&(m.fillStyle=g.hoverPaintStyle.strokeStyle));var n=g.anchors?g.anchors[f]:g.anchor?g.anchor:b(a.Defaults.Anchors[f],i,a)||b(jsPlumb.Defaults.Anchors[f],i,a)||b(a.Defaults.Anchor,i,a)||b(jsPlumb.Defaults.Anchor,i,a);j=c({paintStyle:l,hoverPaintStyle:m,endpoint:k,connections:[d],uuid:g.uuids?g.uuids[f]:null,anchor:n,source:h,scope:g.scope,reattach:g.reattach||a.Defaults.ReattachConnections,detachable:g.detachable||a.Defaults.ConnectionsDetachable}),d.endpoints[f]=j,!1===g.drawEndpoints&&j.setVisible(!1,!0,!0)}return j}})}(),function(){"use strict";jsPlumb.AnchorManager=function(a){var b={},c={},d={},e={},f={},g={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"},h=["left","top","right","bottom"],i={},j=this,k={},l=a.jsPlumbInstance,m={},n=function(a,b,c,d,e,f){if(a===b)return{orientation:g.IDENTITY,a:["top","top"]};var i=Math.atan2(d.centery-c.centery,d.centerx-c.centerx),j=Math.atan2(c.centery-d.centery,c.centerx-d.centerx),k=[],l={};!function(a,b){for(var c=0;c<a.length;c++)l[a[c]]={left:[b[c].left,b[c].centery],right:[b[c].right,b[c].centery],top:[b[c].centerx,b[c].top],bottom:[b[c].centerx,b[c].bottom]}}(["source","target"],[c,d]);for(var m=0;m<h.length;m++)for(var n=0;n<h.length;n++)m!=n&&k.push({source:h[m],target:h[n],dist:Biltong.lineLength(l.source[h[m]],l.target[h[n]])});k.sort(function(a,b){return a.dist<b.dist?-1:a.dist>b.dist?1:0});for(var o=k[0].source,p=k[0].target,q=0;q<k.length&&(o=!e.isContinuous||e.isEdgeSupported(k[q].source)?k[q].source:null,p=!f.isContinuous||f.isEdgeSupported(k[q].target)?k[q].target:null,null==o||null==p);q++);return{a:[o,p],theta:i,theta2:j}},o=function(a,b,c,d,e,f,g){for(var h=[],i=b[e?0:1]/(d.length+1),j=0;j<d.length;j++){var k=(j+1)*i,l=f*b[e?1:0];g&&(k=b[e?0:1]-k);var m=e?k:l,n=c[0]+m,o=m/b[0],p=e?l:k,q=c[1]+p,r=p/b[1];h.push([n,q,o,r,d[j][1],d[j][2]])}return h},p=function(a){return function(b,c){var d=!0;return d=a?b[0][0]<c[0][0]:b[0][0]>c[0][0],!1===d?-1:1}},q=function(a,b){return(a[0][0]<0?-Math.PI-a[0][0]:Math.PI-a[0][0])>(b[0][0]<0?-Math.PI-b[0][0]:Math.PI-b[0][0])?1:a[0][1]>b[0][1]?1:-1},r={top:function(a,b){return a[0]>b[0]?1:-1},right:p(!0),bottom:p(!0),left:q},s=function(a,b){return a.sort(b)},t=function(a,b){var c=l.getCachedData(a),e=c.s,g=c.o,h=function(b,c,e,g,h,i,j){if(g.length>0)for(var k=s(g,r[b]),l="right"===b||"top"===b,m=o(b,c,e,k,h,i,l),n=function(a,b){d[a.id]=[b[0],b[1],b[2],b[3]],f[a.id]=j},p=0;p<m.length;p++){var q=m[p][4],t=q.endpoints[0].elementId===a,u=q.endpoints[1].elementId===a;t?n(q.endpoints[0],m[p]):u&&n(q.endpoints[1],m[p])}};h("bottom",e,[g.left,g.top],b.bottom,!0,1,[0,1]),h("top",e,[g.left,g.top],b.top,!0,0,[0,-1]),h("left",e,[g.left,g.top],b.left,!1,0,[-1,0]),h("right",e,[g.left,g.top],b.right,!1,1,[1,0])};this.reset=function(){b={},i={},k={}},this.addFloatingConnection=function(a,b){m[a]=b},this.removeFloatingConnection=function(a){delete m[a]},this.newConnection=function(a){var b=a.sourceId,c=a.targetId,d=a.endpoints,e=!0,f=function(f,g,h,j,k){b==c&&h.isContinuous&&(a._jsPlumb.instance.removeElement(d[1].canvas),e=!1),jsPlumbUtil.addToList(i,j,[k,g,h.constructor==jsPlumb.DynamicAnchor])};f(0,d[0],d[0].anchor,c,a),e&&f(1,d[1],d[1].anchor,b,a)};var u=function(a){!function(a,b){if(a){var c=function(a){return a[4]==b};jsPlumbUtil.removeWithFunction(a.top,c),jsPlumbUtil.removeWithFunction(a.left,c),jsPlumbUtil.removeWithFunction(a.bottom,c),jsPlumbUtil.removeWithFunction(a.right,c)}}(k[a.elementId],a.id)};this.connectionDetached=function(a){var b=a.connection||a,c=a.sourceId,d=a.targetId,e=b.endpoints,f=function(a,b,c,d,e){null!=c&&c.constructor==jsPlumb.FloatingAnchor||jsPlumbUtil.removeWithFunction(i[d],function(a){return a[0].id==e.id})};f(1,e[1],e[1].anchor,c,b),f(0,e[0],e[0].anchor,d,b),u(b.endpoints[0]),u(b.endpoints[1]),j.redraw(b.sourceId),j.redraw(b.targetId)},this.add=function(a,c){jsPlumbUtil.addToList(b,c,a)},this.changeId=function(a,c){i[c]=i[a],b[c]=b[a],delete i[a],delete b[a]},this.getConnectionsFor=function(a){return i[a]||[]},this.getEndpointsFor=function(a){return b[a]||[]},this.deleteEndpoint=function(a){jsPlumbUtil.removeWithFunction(b[a.elementId],function(b){return b.id==a.id}),u(a)},this.clearFor=function(a){delete b[a],b[a]=[]};var v=function(b,c,d,e,f,g,h,i,j,k,l,m){var n=-1,o=-1,p=e.endpoints[h],q=p.id,r=[1,0][h],s=[[c,d],e,f,g,q],t=b[j],u=p._continuousAnchorEdge?b[p._continuousAnchorEdge]:null;if(u){var v=jsPlumbUtil.findWithFunction(u,function(a){return a[4]==q});if(-1!=v){u.splice(v,1);for(var w=0;w<u.length;w++)jsPlumbUtil.addWithFunction(l,u[w][1],function(a){return a.id==u[w][1].id}),jsPlumbUtil.addWithFunction(m,u[w][1].endpoints[h],function(a){return a.id==u[w][1].endpoints[h].id}),jsPlumbUtil.addWithFunction(m,u[w][1].endpoints[r],function(a){return a.id==u[w][1].endpoints[r].id})}}for(w=0;w<t.length;w++)1==a.idx&&t[w][3]===g&&-1==o&&(o=w),jsPlumbUtil.addWithFunction(l,t[w][1],function(a){return a.id==t[w][1].id}),jsPlumbUtil.addWithFunction(m,t[w][1].endpoints[h],function(a){return a.id==t[w][1].endpoints[h].id}),jsPlumbUtil.addWithFunction(m,t[w][1].endpoints[r],function(a){return a.id==t[w][1].endpoints[r].id});if(-1!=n)t[n]=s;else{var x=i?-1!=o?o:0:t.length;t.splice(x,0,s)}p._continuousAnchorEdge=j};this.updateOtherEndpoint=function(a,b,c,d){var e=jsPlumbUtil.findWithFunction(i[a],function(a){return a[0].id===d.id}),f=jsPlumbUtil.findWithFunction(i[b],function(a){return a[0].id===d.id});-1!=e&&(i[a][e][0]=d,i[a][e][1]=d.endpoints[1],i[a][e][2]=d.endpoints[1].anchor.constructor==jsPlumb.DynamicAnchor),f>-1&&(i[b].splice(f,1),jsPlumbUtil.addToList(i,c,[d,d.endpoints[0],d.endpoints[0].anchor.constructor==jsPlumb.DynamicAnchor]))},this.sourceChanged=function(a,b,c){if(a!==b){jsPlumbUtil.removeWithFunction(i[a],function(a){return a[0].id===c.id});var d=jsPlumbUtil.findWithFunction(i[c.targetId],function(a){return a[0].id===c.id});d>-1&&(i[c.targetId][d][0]=c,i[c.targetId][d][1]=c.endpoints[0],i[c.targetId][d][2]=c.endpoints[0].anchor.constructor==jsPlumb.DynamicAnchor),jsPlumbUtil.addToList(i,b,[c,c.endpoints[1],c.endpoints[1].anchor.constructor==jsPlumb.DynamicAnchor])}},this.rehomeEndpoint=function(a,c,d){var e=b[c]||[],f=l.getId(d);if(f!==c){var g=jsPlumbUtil.indexOf(e,a);if(g>-1){var h=e.splice(g,1)[0];j.add(h,f)}}for(var i=0;i<a.connections.length;i++)a.connections[i].sourceId==c?(a.connections[i].sourceId=a.elementId,a.connections[i].source=a.element,j.sourceChanged(c,a.elementId,a.connections[i])):a.connections[i].targetId==c&&(a.connections[i].targetId=a.elementId,a.connections[i].target=a.element,j.updateOtherEndpoint(a.connections[i].sourceId,c,a.elementId,a.connections[i]))},this.redraw=function(a,c,d,e,f,g){if(!l.isSuspendDrawing()){var h=b[a]||[],j=i[a]||[],o=[],p=[],q=[];d=d||l.timestamp(),e=e||{left:0,top:0},c&&(c={left:c.left+e.left,top:c.top+e.top});for(var r=l.updateOffset({elId:a,offset:c,recalc:!1,timestamp:d}),s={},u=0;u<j.length;u++){var w=j[u][0],x=w.sourceId,y=w.targetId,z=w.endpoints[0].anchor.isContinuous,A=w.endpoints[1].anchor.isContinuous;if(z||A){var B=x+"_"+y,C=s[B],D=w.sourceId==a?1:0;z&&!k[x]&&(k[x]={top:[],right:[],bottom:[],left:[]}),A&&!k[y]&&(k[y]={top:[],right:[],bottom:[],left:[]}),a!=y&&l.updateOffset({elId:y,timestamp:d}),a!=x&&l.updateOffset({elId:x,timestamp:d});var E=l.getCachedData(y),F=l.getCachedData(x);y==x&&(z||A)?v(k[x],-Math.PI/2,0,w,!1,y,0,!1,"top",x,o,p):(C||(C=n(x,y,F.o,E.o,w.endpoints[0].anchor,w.endpoints[1].anchor),s[B]=C),z&&v(k[x],C.theta,0,w,!1,y,0,!1,C.a[0],x,o,p),A&&v(k[y],C.theta2,-1,w,!0,x,1,!0,C.a[1],y,o,p)),z&&jsPlumbUtil.addWithFunction(q,x,function(a){return a===x}),A&&jsPlumbUtil.addWithFunction(q,y,function(a){return a===y}),jsPlumbUtil.addWithFunction(o,w,function(a){return a.id==w.id}),(z&&0===D||A&&1===D)&&jsPlumbUtil.addWithFunction(p,w.endpoints[D],function(a){return a.id==w.endpoints[D].id})}}for(u=0;u<h.length;u++)0===h[u].connections.length&&h[u].anchor.isContinuous&&(k[a]||(k[a]={top:[],right:[],bottom:[],left:[]}),v(k[a],-Math.PI/2,0,{endpoints:[h[u],h[u]],paint:function(){}},!1,a,0,!1,"top",a,o,p),jsPlumbUtil.addWithFunction(q,a,function(b){return b===a}));for(u=0;u<q.length;u++)t(q[u],k[q[u]]);for(u=0;u<h.length;u++)h[u].paint({timestamp:d,offset:r,dimensions:r.s,recalc:!0!==g});for(u=0;u<p.length;u++){var G=l.getCachedData(p[u].elementId);p[u].paint({timestamp:d,offset:G,dimensions:G.s})}for(u=0;u<j.length;u++){var H=j[u][1];if(H.anchor.constructor==jsPlumb.DynamicAnchor){H.paint({elementWithPrecedence:a,timestamp:d}),jsPlumbUtil.addWithFunction(o,j[u][0],function(a){return a.id==j[u][0].id});for(var I=0;I<H.connections.length;I++)H.connections[I]!==j[u][0]&&jsPlumbUtil.addWithFunction(o,H.connections[I],function(a){return a.id==H.connections[I].id})}else H.anchor.constructor==jsPlumb.Anchor&&jsPlumbUtil.addWithFunction(o,j[u][0],function(a){return a.id==j[u][0].id})}var J=m[a];for(J&&J.paint({timestamp:d,recalc:!1,elId:a}),u=0;u<o.length;u++){var K=d;o[u].paint({elId:a,timestamp:K,recalc:!1,clearEdits:f})}}};var w=function(a){jsPlumbUtil.EventGenerator.apply(this),this.type="Continuous",this.isDynamic=!0,this.isContinuous=!0;for(var b=a.faces||["top","right","bottom","left"],c=!(!1===a.clockwise),g={},h={top:"bottom",right:"left",left:"right",bottom:"top"},i={top:"right",right:"bottom",left:"top",bottom:"left"},j={top:"left",right:"top",left:"bottom",bottom:"right"},k=c?i:j,l=c?j:i,m=a.cssClass||"",n=0;n<b.length;n++)g[b[n]]=!0;this.verifyEdge=function(a){return g[a]?a:g[h[a]]?h[a]:g[k[a]]?k[a]:g[l[a]]?l[a]:a},this.isEdgeSupported=function(a){return!0===g[a]},this.compute=function(a){return e[a.element.id]||d[a.element.id]||[0,0]},this.getCurrentLocation=function(a){return e[a.element.id]||d[a.element.id]||[0,0]},this.getOrientation=function(a){return f[a.id]||[0,0]},this.clearUserDefinedLocation=function(){delete e[a.elementId]},this.setUserDefinedLocation=function(b){e[a.elementId]=b},this.getCssClass=function(){return m},this.setCssClass=function(a){m=a}};l.continuousAnchorFactory={get:function(a){var b=c[a.elementId];return b||(b=new w(a),c[a.elementId]=b),b},clear:function(a){delete c[a]}}},jsPlumb.Anchor=function(a){this.x=a.x||0,this.y=a.y||0,this.elementId=a.elementId,this.cssClass=a.cssClass||"",this.userDefinedLocation=null,this.orientation=a.orientation||[0,0],jsPlumbUtil.EventGenerator.apply(this),a.jsPlumbInstance,this.lastReturnValue=null,this.offsets=a.offsets||[0,0],this.timestamp=null,this.compute=function(a){var b=a.xy,c=a.wh,d=(a.element,a.timestamp);return a.clearUserDefinedLocation&&(this.userDefinedLocation=null),d&&d===self.timestamp?this.lastReturnValue:(this.lastReturnValue=null!=this.userDefinedLocation?this.userDefinedLocation:[b[0]+this.x*c[0]+this.offsets[0],b[1]+this.y*c[1]+this.offsets[1]],this.timestamp=d,this.lastReturnValue)},this.getCurrentLocation=function(a){return null==this.lastReturnValue||null!=a.timestamp&&this.timestamp!=a.timestamp?this.compute(a):this.lastReturnValue}},jsPlumbUtil.extend(jsPlumb.Anchor,jsPlumbUtil.EventGenerator,{equals:function(a){if(!a)return!1;var b=a.getOrientation(),c=this.getOrientation();return this.x==a.x&&this.y==a.y&&this.offsets[0]==a.offsets[0]&&this.offsets[1]==a.offsets[1]&&c[0]==b[0]&&c[1]==b[1]},getUserDefinedLocation:function(){return this.userDefinedLocation},setUserDefinedLocation:function(a){this.userDefinedLocation=a},clearUserDefinedLocation:function(){this.userDefinedLocation=null},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),jsPlumb.FloatingAnchor=function(a){jsPlumb.Anchor.apply(this,arguments);var b=a.reference,c=(a.jsPlumbInstance,a.referenceCanvas),d=jsPlumb.getSize(c),e=null,f=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(a){var b=a.xy,c=(a.element,[b[0]+d[0]/2,b[1]+d[1]/2]);return f=c,c},this.getOrientation=function(a){if(e)return e;var c=b.getOrientation(a);return[-1*Math.abs(c[0])*0,-1*Math.abs(c[1])*0]},this.over=function(a,b){e=a.getOrientation(b)},this.out=function(){e=null},this.getCurrentLocation=function(a){return null==f?this.compute(a):f}},jsPlumbUtil.extend(jsPlumb.FloatingAnchor,jsPlumb.Anchor);var a=function(a,b,c){return a.constructor==jsPlumb.Anchor?a:b.makeAnchor(a,c,b)};jsPlumb.DynamicAnchor=function(b){jsPlumb.Anchor.apply(this,arguments),this.isSelective=!0,this.isDynamic=!0,this.anchors=[],this.elementId=b.elementId,this.jsPlumbInstance=b.jsPlumbInstance;for(var c=0;c<b.anchors.length;c++)this.anchors[c]=a(b.anchors[c],this.jsPlumbInstance,this.elementId);this.addAnchor=function(b){this.anchors.push(a(b,this.jsPlumbInstance,this.elementId))},this.getAnchors=function(){return this.anchors},this.locked=!1;var d=this.anchors.length>0?this.anchors[0]:null,e=(this.anchors.length,d),f=this,g=function(a,b,c,d,e){var f=d[0]+a.x*e[0],g=d[1]+a.y*e[1],h=d[0]+e[0]/2,i=d[1]+e[1]/2;return Math.sqrt(Math.pow(b-f,2)+Math.pow(c-g,2))+Math.sqrt(Math.pow(h-f,2)+Math.pow(i-g,2))},h=b.selector||function(a,b,c,d,e){for(var f=c[0]+d[0]/2,h=c[1]+d[1]/2,i=-1,j=1/0,k=0;k<e.length;k++){var l=g(e[k],f,h,a,b);j>l&&(i=k+0,j=l)}return e[i]};this.compute=function(a){var b=a.xy,c=a.wh,g=a.timestamp,i=a.txy,j=a.twh;a.clearUserDefinedLocation&&(userDefinedLocation=null),this.timestamp=g;var k=f.getUserDefinedLocation();return null!=k?k:this.locked||null==i||null==j?d.compute(a):(a.timestamp=null,d=h(b,c,i,j,this.anchors),this.x=d.x,this.y=d.y,d!=e&&this.fire("anchorChanged",d),e=d,d.compute(a))},this.getCurrentLocation=function(a){return this.getUserDefinedLocation()||(null!=d?d.getCurrentLocation(a):null)},this.getOrientation=function(a){return null!=d?d.getOrientation(a):[0,0]},this.over=function(a,b){null!=d&&d.over(a,b)},this.out=function(){null!=d&&d.out()},this.getCssClass=function(){return d&&d.getCssClass()||""}},jsPlumbUtil.extend(jsPlumb.DynamicAnchor,jsPlumb.Anchor);var b=function(a,b,c,d,e,f){jsPlumb.Anchors[e]=function(g){var h=g.jsPlumbInstance.makeAnchor([a,b,c,d,0,0],g.elementId,g.jsPlumbInstance);return h.type=e,f&&f(h,g),h}};b(.5,0,0,-1,"TopCenter"),b(.5,1,0,1,"BottomCenter"),b(0,.5,-1,0,"LeftMiddle"),b(1,.5,1,0,"RightMiddle"),b(.5,0,0,-1,"Top"),b(.5,1,0,1,"Bottom"),b(0,.5,-1,0,"Left"),b(1,.5,1,0,"Right"),b(.5,.5,0,0,"Center"),b(1,0,0,-1,"TopRight"),b(1,1,0,1,"BottomRight"),b(0,0,0,-1,"TopLeft"),b(0,1,0,1,"BottomLeft"),jsPlumb.Defaults.DynamicAnchors=function(a){return a.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],a.elementId,a.jsPlumbInstance)},jsPlumb.Anchors.AutoDefault=function(a){var b=a.jsPlumbInstance.makeDynamicAnchor(jsPlumb.Defaults.DynamicAnchors(a));return b.type="AutoDefault",b};var c=function(a,b){jsPlumb.Anchors[a]=function(c){var d=c.jsPlumbInstance.makeAnchor(["Continuous",{faces:b}],c.elementId,c.jsPlumbInstance);return d.type=a,d}};jsPlumb.Anchors.Continuous=function(a){return a.jsPlumbInstance.continuousAnchorFactory.get(a)},c("ContinuousLeft",["left"]),c("ContinuousTop",["top"]),c("ContinuousBottom",["bottom"]),c("ContinuousRight",["right"]),b(0,0,0,0,"Assign",function(a,b){var c=b.position||"Fixed";a.positionFinder=c.constructor==String?b.jsPlumbInstance.AnchorPositionFinders[c]:c,a.constructorParams=b}),jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(a,b,c){return[(a.left-b.left)/c[0],(a.top-b.top)/c[1]]},Grid:function(a,b,c,d){var e=a.left-b.left,f=a.top-b.top,g=c[0]/d.grid[0],h=c[1]/d.grid[1],i=Math.floor(e/g),j=Math.floor(f/h);return[(i*g+g/2)/c[0],(j*h+h/2)/c[1]]}},jsPlumb.Anchors.Perimeter=function(a){a=a||{};var b=a.anchorCount||60,c=a.shape;if(!c)throw new Error("no shape supplied to Perimeter Anchor type");var d=function(){for(var a=.5,c=2*Math.PI/b,d=0,e=[],f=0;b>f;f++){var g=a+a*Math.sin(d),h=a+a*Math.cos(d);e.push([g,h,0,0]),d+=c}return e},e=function(a){for(var c=b/a.length,d=[],e=function(a,e,f,g,h){c=b*h;for(var i=(f-a)/c,j=(g-e)/c,k=0;c>k;k++)d.push([a+i*k,e+j*k,0,0])},f=0;f<a.length;f++)e.apply(null,a[f]);return d},f=function(a){for(var b=[],c=0;c<a.length;c++)b.push([a[c][0],a[c][1],a[c][2],a[c][3],1/a.length]);return e(b)},g=function(){return f([[0,0,1,0],[1,0,1,1],[1,1,0,1],[0,1,0,0]])},h={Circle:d,Ellipse:d,Diamond:function(){return f([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:g,Square:g,Triangle:function(){return f([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(a){for(var b=a.points,c=[],d=0,f=0;f<b.length-1;f++){var g=Math.sqrt(Math.pow(b[f][2]-b[f][0])+Math.pow(b[f][3]-b[f][1]));d+=g,c.push([b[f][0],b[f][1],b[f+1][0],b[f+1][1],g])}for(var h=0;h<c.length;h++)c[h][4]=c[h][4]/d;return e(c)}},i=function(a,b){for(var c=[],d=b/180*Math.PI,e=0;e<a.length;e++){var f=a[e][0]-.5,g=a[e][1]-.5;c.push([f*Math.cos(d)-g*Math.sin(d)+.5,f*Math.sin(d)+g*Math.cos(d)+.5,a[e][2],a[e][3]])}return c};if(!h[c])throw new Error("Shape ["+c+"] is unknown by Perimeter Anchor type");var j=h[c](a);a.rotation&&(j=i(j,a.rotation));var k=a.jsPlumbInstance.makeDynamicAnchor(j);return k.type="Perimeter",k}}(),function(){"use strict";jsPlumb.DOMElementComponent=jsPlumbUtil.extend(jsPlumb.jsPlumbUIComponent,function(){this.mousemove=this.dblclick=this.click=this.mousedown=this.mouseup=function(){}}),jsPlumb.Segments={AbstractSegment:function(a){this.params=a,this.findClosestPointOnPath=function(){return{d:1/0,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(a.x1,a.x2),minY:Math.min(a.y1,a.y2),maxX:Math.max(a.x1,a.x2),maxY:Math.max(a.y1,a.y2)}}},Straight:function(a){var b,c,d,e,f,g,h,i=(jsPlumb.Segments.AbstractSegment.apply(this,arguments),function(){b=Math.sqrt(Math.pow(f-e,2)+Math.pow(h-g,2)),c=Biltong.gradient({x:e,y:g},{x:f,y:h}),d=-1/c});this.type="Straight",this.getLength=function(){return b},this.getGradient=function(){return c},this.getCoordinates=function(){return{x1:e,y1:g,x2:f,y2:h}},this.setCoordinates=function(a){e=a.x1,g=a.y1,f=a.x2,h=a.y2,i()},this.setCoordinates({x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2}),this.getBounds=function(){return{minX:Math.min(e,f),minY:Math.min(g,h),maxX:Math.max(e,f),maxY:Math.max(g,h)}},this.pointOnPath=function(a,c){if(0!==a||c){if(1!=a||c){var d=c?a>0?a:b+a:a*b;return Biltong.pointOnLine({x:e,y:g},{x:f,y:h},d)}return{x:f,y:h}}return{x:e,y:g}},this.gradientAtPoint=function(){return c},this.pointAlongPathFrom=function(a,b,c){var d=this.pointOnPath(a,c),i=0>=b?{x:e,y:g}:{x:f,y:h};return 0>=b&&Math.abs(b)>1&&(b*=-1),Biltong.pointOnLine(d,i,b)};var j=function(a,b,c){return c>=Math.min(a,b)&&c<=Math.max(a,b)},k=function(a,b,c){return Math.abs(c-a)<Math.abs(c-b)?a:b};this.findClosestPointOnPath=function(a,i){var l={d:1/0,x:null,y:null,l:null,x1:e,x2:f,y1:g,y2:h};if(0===c)l.y=g,l.x=j(e,f,a)?a:k(e,f,a);else if(1/0==c||c==-1/0)l.x=e,l.y=j(g,h,i)?i:k(g,h,i);else{var m=g-c*e,n=i-d*a,o=(n-m)/(c-d),p=c*o+m;l.x=j(e,f,o)?o:k(e,f,o),l.y=j(g,h,p)?p:k(g,h,p)}var q=Biltong.lineLength([l.x,l.y],[e,g]);return l.d=Biltong.lineLength([a,i],[l.x,l.y]),l.l=q/b,l}},Arc:function(a){var b=(jsPlumb.Segments.AbstractSegment.apply(this,arguments),function(b,c){return Biltong.theta([a.cx,a.cy],[b,c])}),c=function(a,b){if(a.anticlockwise){var c=a.startAngle<a.endAngle?a.startAngle+d:a.startAngle;return c-Math.abs(c-a.endAngle)*b}var e=a.endAngle<a.startAngle?a.endAngle+d:a.endAngle,f=Math.abs(e-a.startAngle);return a.startAngle+f*b},d=2*Math.PI;this.radius=a.r,this.anticlockwise=a.ac,this.type="Arc",a.startAngle&&a.endAngle?(this.startAngle=a.startAngle,this.endAngle=a.endAngle,this.x1=a.cx+this.radius*Math.cos(a.startAngle),this.y1=a.cy+this.radius*Math.sin(a.startAngle),this.x2=a.cx+this.radius*Math.cos(a.endAngle),this.y2=a.cy+this.radius*Math.sin(a.endAngle)):(this.startAngle=b(a.x1,a.y1),this.endAngle=b(a.x2,a.y2),this.x1=a.x1,this.y1=a.y1,this.x2=a.x2,this.y2=a.y2),this.endAngle<0&&(this.endAngle+=d),this.startAngle<0&&(this.startAngle+=d),this.segment=Biltong.quadrant([this.x1,this.y1],[this.x2,this.y2]);var e=this.endAngle<this.startAngle?this.endAngle+d:this.endAngle;this.sweep=Math.abs(e-this.startAngle),this.anticlockwise&&(this.sweep=d-this.sweep);var f=2*Math.PI*this.radius,g=this.sweep/d,h=f*g;this.getLength=function(){return h},this.getBounds=function(){return{minX:a.cx-a.r,maxX:a.cx+a.r,minY:a.cy-a.r,maxY:a.cy+a.r}};var i=1e-10,j=function(a){var b=Math.floor(a),c=Math.ceil(a);return i>a-b?b:i>c-a?c:a};this.pointOnPath=function(b,d){if(0===b)return{x:this.x1,y:this.y1,theta:this.startAngle};if(1==b)return{x:this.x2,y:this.y2,theta:this.endAngle};d&&(b/=h);var e=c(this,b),f=a.cx+a.r*Math.cos(e),g=a.cy+a.r*Math.sin(e);return{x:j(f),y:j(g),theta:e}},this.gradientAtPoint=function(b,c){var d=this.pointOnPath(b,c),e=Biltong.normal([a.cx,a.cy],[d.x,d.y]);return this.anticlockwise||1/0!=e&&e!=-1/0||(e*=-1),e},this.pointAlongPathFrom=function(b,c,d){var e=this.pointOnPath(b,d),g=c/f*2*Math.PI,h=this.anticlockwise?-1:1,i=e.theta+h*g;return{x:a.cx+this.radius*Math.cos(i),y:a.cy+this.radius*Math.sin(i)}}},Bezier:function(a){var b=(jsPlumb.Segments.AbstractSegment.apply(this,arguments),[{x:a.x1,y:a.y1},{x:a.cp1x,y:a.cp1y},{x:a.cp2x,y:a.cp2y},{x:a.x2,y:a.y2}]),c={minX:Math.min(a.x1,a.x2,a.cp1x,a.cp2x),minY:Math.min(a.y1,a.y2,a.cp1y,a.cp2y),maxX:Math.max(a.x1,a.x2,a.cp1x,a.cp2x),maxY:Math.max(a.y1,a.y2,a.cp1y,a.cp2y)};this.type="Bezier";var d=function(a,b,c){return c&&(b=jsBezier.locationAlongCurveFrom(a,b>0?0:1,b)),b};this.pointOnPath=function(a,c){return a=d(b,a,c),jsBezier.pointOnCurve(b,a)},this.gradientAtPoint=function(a,c){return a=d(b,a,c),jsBezier.gradientAtPoint(b,a)},this.pointAlongPathFrom=function(a,c,e){return a=d(b,a,e),jsBezier.pointAlongCurveFrom(b,a,c)},this.getLength=function(){return jsBezier.getLength(b)},this.getBounds=function(){return c}}};var a=function(){this.resetBounds=function(){this.bounds={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}},this.resetBounds()};jsPlumb.Connectors.AbstractConnector=function(b){a.apply(this,arguments);var c=[],d=0,e=[],f=[],g=b.stub||0,h=jsPlumbUtil.isArray(g)?g[0]:g,i=jsPlumbUtil.isArray(g)?g[1]:g,j=b.gap||0,k=jsPlumbUtil.isArray(j)?j[0]:j,l=jsPlumbUtil.isArray(j)?j[1]:j,m=null,n=!1,o=null;this.isEditable=function(){return!1},this.setEdited=function(a){n=a},this.getPath=function(){},this.setPath=function(){},this.findSegmentForPoint=function(a,b){for(var d={d:1/0,s:null,x:null,y:null,l:null},e=0;e<c.length;e++){var f=c[e].findClosestPointOnPath(a,b);f.d<d.d&&(d.d=f.d,d.l=f.l,d.x=f.x,d.y=f.y,d.s=c[e],d.x1=f.x1,d.x2=f.x2,d.y1=f.y1,d.y2=f.y2,d.index=e)}return d};var p=function(){for(var a=0,b=0;b<c.length;b++){var g=c[b].getLength();f[b]=g/d,e[b]=[a,a+=g/d]}},q=function(a,b){b&&(a=a>0?a/d:(d+a)/d);for(var g=e.length-1,h=1,i=0;i<e.length;i++)if(e[i][1]>=a){g=i,h=1==a?1:0===a?0:(a-e[i][0])/f[i];break}return{segment:c[g],proportion:h,index:g}},r=function(a,b,e){if(e.x1!=e.x2||e.y1!=e.y2){var f=new jsPlumb.Segments[b](e);c.push(f),d+=f.getLength(),a.updateBounds(f)}},s=function(){d=c.length=e.length=f.length=0};this.setSegments=function(a){m=[],d=0;for(var b=0;b<a.length;b++)m.push(a[b]),d+=a[b].getLength()};var t=function(a){this.lineWidth=a.lineWidth;var b=Biltong.quadrant(a.sourcePos,a.targetPos),c=a.targetPos[0]<a.sourcePos[0],d=a.targetPos[1]<a.sourcePos[1],e=a.lineWidth||1,f=a.sourceEndpoint.anchor.getOrientation(a.sourceEndpoint),g=a.targetEndpoint.anchor.getOrientation(a.targetEndpoint),j=c?a.targetPos[0]:a.sourcePos[0],m=d?a.targetPos[1]:a.sourcePos[1],n=Math.abs(a.targetPos[0]-a.sourcePos[0]),o=Math.abs(a.targetPos[1]-a.sourcePos[1]);if(0===f[0]&&0===f[1]||0===g[0]&&0===g[1]){var p=n>o?0:1,q=[1,0][p];f=[],g=[],f[p]=a.sourcePos[p]>a.targetPos[p]?-1:1,g[p]=a.sourcePos[p]>a.targetPos[p]?1:-1,f[q]=0,g[q]=0}var r=c?n+k*f[0]:k*f[0],s=d?o+k*f[1]:k*f[1],t=c?l*g[0]:n+l*g[0],u=d?l*g[1]:o+l*g[1],v=f[0]*g[0]+f[1]*g[1],w={sx:r,sy:s,tx:t,ty:u,lw:e,xSpan:Math.abs(t-r),ySpan:Math.abs(u-s),mx:(r+t)/2,my:(s+u)/2,so:f,to:g,x:j,y:m,w:n,h:o,segment:b,startStubX:r+f[0]*h,startStubY:s+f[1]*h,endStubX:t+g[0]*i,endStubY:u+g[1]*i,isXGreaterThanStubTimes2:Math.abs(r-t)>h+i,isYGreaterThanStubTimes2:Math.abs(s-u)>h+i,opposite:-1==v,perpendicular:0===v,orthogonal:1==v,sourceAxis:0===f[0]?"y":"x",points:[j,m,n,o,r,s,t,u]};return w.anchorOrientation=w.opposite?"opposite":w.orthogonal?"orthogonal":"perpendicular",w};return this.getSegments=function(){return c},this.updateBounds=function(a){var b=a.getBounds();this.bounds.minX=Math.min(this.bounds.minX,b.minX),this.bounds.maxX=Math.max(this.bounds.maxX,b.maxX),this.bounds.minY=Math.min(this.bounds.minY,b.minY),this.bounds.maxY=Math.max(this.bounds.maxY,b.maxY)},this.pointOnPath=function(a,b){var c=q(a,b);return c.segment&&c.segment.pointOnPath(c.proportion,!1)||[0,0]},this.gradientAtPoint=function(a,b){var c=q(a,b);return c.segment&&c.segment.gradientAtPoint(c.proportion,!1)||0},this.pointAlongPathFrom=function(a,b,c){var d=q(a,c);return d.segment&&d.segment.pointAlongPathFrom(d.proportion,b,!1)||[0,0]},this.compute=function(a){n||(o=t.call(this,a)),s(),this._compute(o,a),this.x=o.points[0],this.y=o.points[1],this.w=o.points[2],this.h=o.points[3],this.segment=o.segment,p()},{addSegment:r,prepareCompute:t,sourceStub:h,targetStub:i,maxStub:Math.max(h,i),sourceGap:k,targetGap:l,maxGap:Math.max(k,l)}},jsPlumbUtil.extend(jsPlumb.Connectors.AbstractConnector,a);var b=jsPlumb.Connectors.Straight=function(){this.type="Straight";var a=jsPlumb.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(b){a.addSegment(this,"Straight",{x1:b.sx,y1:b.sy,x2:b.startStubX,y2:b.startStubY}),a.addSegment(this,"Straight",{x1:b.startStubX,y1:b.startStubY,x2:b.endStubX,y2:b.endStubY}),a.addSegment(this,"Straight",{x1:b.endStubX,y1:b.endStubY,x2:b.tx,y2:b.ty})}};jsPlumbUtil.extend(jsPlumb.Connectors.Straight,jsPlumb.Connectors.AbstractConnector),jsPlumb.registerConnectorType(b,"Straight"),jsPlumb.Endpoints.AbstractEndpoint=function(b){return a.apply(this,arguments),{compute:this.compute=function(){var a=this._compute.apply(this,arguments);return this.x=a[0],this.y=a[1],this.w=a[2],this.h=a[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,a},cssClass:b.cssClass}},jsPlumbUtil.extend(jsPlumb.Endpoints.AbstractEndpoint,a),jsPlumb.Endpoints.Dot=function(a){this.type="Dot",jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments),a=a||{},this.radius=a.radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(a,b,c){this.radius=c.radius||this.radius;var d=a[0]-this.radius,e=a[1]-this.radius,f=2*this.radius,g=2*this.radius;if(c.strokeStyle){
var h=c.lineWidth||1;d-=h,e-=h,f+=2*h,g+=2*h}return[d,e,f,g,this.radius]}},jsPlumbUtil.extend(jsPlumb.Endpoints.Dot,jsPlumb.Endpoints.AbstractEndpoint),jsPlumb.Endpoints.Rectangle=function(a){this.type="Rectangle",jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments),a=a||{},this.width=a.width||20,this.height=a.height||20,this._compute=function(a,b,c){var d=c.width||this.width,e=c.height||this.height;return[a[0]-d/2,a[1]-e/2,d,e]}},jsPlumbUtil.extend(jsPlumb.Endpoints.Rectangle,jsPlumb.Endpoints.AbstractEndpoint);var c=function(){jsPlumb.DOMElementComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};jsPlumbUtil.extend(c,jsPlumb.DOMElementComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(a){this._jsPlumb.displayElements.push(a)}}),jsPlumb.Endpoints.Image=function(a){this.type="Image",c.apply(this,arguments),jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments);var b=a.onload,d=a.src||a.url,e=a.cssClass?" "+a.cssClass:"";this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=a.width,this._jsPlumb.heightToUse=a.height,this._jsPlumb.endpoint=a.endpoint,this._jsPlumb.img.onload=function(){null!=this._jsPlumb&&(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,b&&b(this))}.bind(this),this._jsPlumb.endpoint.setImage=function(a,c){var d=a.constructor==String?a:a.src;b=c,this._jsPlumb.img.src=d,null!=this.canvas&&this.canvas.setAttribute("src",this._jsPlumb.img.src)}.bind(this),this._jsPlumb.endpoint.setImage(d,b),this._compute=function(a){return this.anchorPoint=a,this._jsPlumb.ready?[a[0]-this._jsPlumb.widthToUse/2,a[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=document.createElement("img"),this.canvas.style.margin=0,this.canvas.style.padding=0,this.canvas.style.outline=0,this.canvas.style.position="absolute",this.canvas.className=this._jsPlumb.instance.endpointClass+e,this._jsPlumb.widthToUse&&this.canvas.setAttribute("width",this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&&this.canvas.setAttribute("height",this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas),this.attachListeners(this.canvas,this),this.actuallyPaint=function(){if(!this._jsPlumb.deleted){this._jsPlumb.initialized||(this.canvas.setAttribute("src",this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0);var a=this.anchorPoint[0]-this._jsPlumb.widthToUse/2,b=this.anchorPoint[1]-this._jsPlumb.heightToUse/2;jsPlumbUtil.sizeElement(this.canvas,a,b,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse)}},this.paint=function(a,b){null!=this._jsPlumb&&(this._jsPlumb.ready?this.actuallyPaint(a,b):window.setTimeout(function(){this.paint(a,b)}.bind(this),200))}},jsPlumbUtil.extend(jsPlumb.Endpoints.Image,[c,jsPlumb.Endpoints.AbstractEndpoint],{cleanup:function(){this._jsPlumb.deleted=!0,this.canvas&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=null}}),jsPlumb.Endpoints.Blank=function(){jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments),this.type="Blank",c.apply(this,arguments),this._compute=function(a){return[a[0],a[1],10,0]},this.canvas=document.createElement("div"),this.canvas.style.display="block",this.canvas.style.width="1px",this.canvas.style.height="1px",this.canvas.style.background="transparent",this.canvas.style.position="absolute",this.canvas.className=this._jsPlumb.endpointClass,jsPlumb.appendElement(this.canvas),this.paint=function(){jsPlumbUtil.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},jsPlumbUtil.extend(jsPlumb.Endpoints.Blank,[jsPlumb.Endpoints.AbstractEndpoint,c],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),jsPlumb.Endpoints.Triangle=function(a){this.type="Triangle",jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments),a=a||{},a.width=a.width||55,a.height=a.height||55,this.width=a.width,this.height=a.height,this._compute=function(a,b,c){var d=c.width||self.width,e=c.height||self.height;return[a[0]-d/2,a[1]-e/2,d,e]}};var d=jsPlumb.Overlays.AbstractOverlay=function(a){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=a.component,this.loc=null==a.location?.5:a.location,this.endpointLoc=null==a.endpointLocation?[.5,.5]:a.endpointLocation};d.prototype={cleanup:function(){this.component=null,this.canvas=null,this.endpointLoc=null},setVisible:function(a){this.visible=a,this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(a){this.loc+=a,this.component.repaint()},setLocation:function(a){this.loc=a,this.component.repaint()},getLocation:function(){return this.loc}},jsPlumb.Overlays.Arrow=function(a){this.type="Arrow",d.apply(this,arguments),this.isAppendedAtTopLevel=!1,a=a||{};var b=jsPlumbUtil,c=Biltong;this.length=a.length||20,this.width=a.width||20,this.id=a.id;var e=(a.direction||1)<0?-1:1,f=a.paintStyle||{lineWidth:1},g=a.foldback||.623;this.computeMaxSize=function(){return 1.5*self.width},this.draw=function(a,d){var h,i,j,k,l;if(a.pointAlongPathFrom){if(b.isString(this.loc)||this.loc>1||this.loc<0){var m=parseInt(this.loc,10),n=this.loc<0?1:0;h=a.pointAlongPathFrom(n,m,!1),i=a.pointAlongPathFrom(n,m-e*this.length/2,!1),j=c.pointOnLine(h,i,this.length)}else if(1==this.loc){if(h=a.pointOnPath(this.loc),i=a.pointAlongPathFrom(this.loc,-this.length),j=c.pointOnLine(h,i,this.length),-1==e){var o=j;j=h,h=o}}else if(0===this.loc){if(j=a.pointOnPath(this.loc),i=a.pointAlongPathFrom(this.loc,this.length),h=c.pointOnLine(j,i,this.length),-1==e){var p=j;j=h,h=p}}else h=a.pointAlongPathFrom(this.loc,e*this.length/2),i=a.pointOnPath(this.loc),j=c.pointOnLine(h,i,this.length);k=c.perpendicularLineTo(h,j,this.width),l=c.pointOnLine(h,j,g*this.length);var q={hxy:h,tail:k,cxy:l},r=f.strokeStyle||d.strokeStyle,s=f.fillStyle||d.strokeStyle;return{component:a,d:q,lineWidth:f.lineWidth||d.lineWidth,strokeStyle:r,fillStyle:s,minX:Math.min(h.x,k[0].x,k[1].x),maxX:Math.max(h.x,k[0].x,k[1].x),minY:Math.min(h.y,k[0].y,k[1].y),maxY:Math.max(h.y,k[0].y,k[1].y)}}return{component:a,minX:0,maxX:0,minY:0,maxY:0}}},jsPlumbUtil.extend(jsPlumb.Overlays.Arrow,d),jsPlumb.Overlays.PlainArrow=function(a){a=a||{};var b=jsPlumb.extend(a,{foldback:1});jsPlumb.Overlays.Arrow.call(this,b),this.type="PlainArrow"},jsPlumbUtil.extend(jsPlumb.Overlays.PlainArrow,jsPlumb.Overlays.Arrow),jsPlumb.Overlays.Diamond=function(a){a=a||{};var b=a.length||40,c=jsPlumb.extend(a,{length:b/2,foldback:2});jsPlumb.Overlays.Arrow.call(this,c),this.type="Diamond"},jsPlumbUtil.extend(jsPlumb.Overlays.Diamond,jsPlumb.Overlays.Arrow);var e=function(a,b){return(null==a._jsPlumb.cachedDimensions||b)&&(a._jsPlumb.cachedDimensions=a.getDimensions()),a._jsPlumb.cachedDimensions},f=function(a){jsPlumb.DOMElementComponent.apply(this,arguments),d.apply(this,arguments),this.id=a.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=a.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=a.create,this._jsPlumb.initiallyInvisible=!1===a.visible,this.getElement=function(){if(null==this._jsPlumb.div){var b=this._jsPlumb.div=jsPlumb.getDOMElement(this._jsPlumb.create(this._jsPlumb.component));b.style.position="absolute";var c=this._jsPlumb.instance.overlayClass+" "+(this.cssClass?this.cssClass:a.cssClass?a.cssClass:"");b.className=c,this._jsPlumb.instance.appendElement(b),this._jsPlumb.instance.getId(b),this.attachListeners(b,this),this.canvas=b,!1===a.visible&&(b.style.display="none")}return this._jsPlumb.div},this.draw=function(a,b,c){var d=e(this);if(null!=d&&2==d.length){var f={x:0,y:0};if(c)f={x:c[0],y:c[1]};else if(a.pointOnPath){var g=this.loc,h=!1;(jsPlumbUtil.isString(this.loc)||this.loc<0||this.loc>1)&&(g=parseInt(this.loc,10),h=!0),f=a.pointOnPath(g,h)}else{var i=this.loc.constructor==Array?this.loc:this.endpointLoc;f={x:i[0]*a.w,y:i[1]*a.h}}var j=f.x-d[0]/2,k=f.y-d[1]/2;return{component:a,d:{minx:j,miny:k,td:d,cxy:f},minX:j,maxX:j+d[0],minY:k,maxY:k+d[1]}}return{minX:0,maxX:0,minY:0,maxY:0}}};jsPlumbUtil.extend(f,[jsPlumb.DOMElementComponent,d],{getDimensions:function(){return jsPlumb.getSize(this.getElement())},setVisible:function(a){this._jsPlumb.div.style.display=a?"block":"none",a&&this._jsPlumb.initiallyInvisible&&(e(this,!0),this.component.repaint(),this._jsPlumb.initiallyInvisible=!1)},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(){null!=this._jsPlumb.div&&this._jsPlumb.instance.removeElement(this._jsPlumb.div)},computeMaxSize:function(){var a=e(this);return Math.max(a[0],a[1])},reattachListeners:function(a){this._jsPlumb.div&&this.reattachListenersForElement(this._jsPlumb.div,this,a)},paint:function(a){this._jsPlumb.initialised||(this.getElement(),a.component.appendDisplayElement(this._jsPlumb.div),this.attachListeners(this._jsPlumb.div,a.component),this._jsPlumb.initialised=!0),this._jsPlumb.div.style.left=a.component.x+a.d.minx+"px",this._jsPlumb.div.style.top=a.component.y+a.d.miny+"px"}}),jsPlumb.Overlays.Custom=function(){this.type="Custom",f.apply(this,arguments)},jsPlumbUtil.extend(jsPlumb.Overlays.Custom,f),jsPlumb.Overlays.GuideLines=function(){var a=this;a.length=50,a.lineWidth=5,this.type="GuideLines",d.apply(this,arguments),jsPlumb.jsPlumbUIComponent.apply(this,arguments),this.draw=function(b){var c=b.pointAlongPathFrom(a.loc,a.length/2),d=b.pointOnPath(a.loc),e=Biltong.pointOnLine(c,d,a.length),f=Biltong.perpendicularLineTo(c,e,40),g=Biltong.perpendicularLineTo(e,c,20);return{connector:b,head:c,tail:e,headLine:g,tailLine:f,minX:Math.min(c.x,e.x,g[0].x,g[1].x),minY:Math.min(c.y,e.y,g[0].y,g[1].y),maxX:Math.max(c.x,e.x,g[0].x,g[1].x),maxY:Math.max(c.y,e.y,g[0].y,g[1].y)}}},jsPlumb.Overlays.Label=function(a){this.labelStyle=a.labelStyle,this.cssClass=null!=this.labelStyle?this.labelStyle.cssClass:null;var b=jsPlumb.extend({create:function(){return document.createElement("div")}},a);if(jsPlumb.Overlays.Custom.call(this,b),this.type="Label",this.label=a.label||"",this.labelText=null,this.labelStyle){var c=this.getElement();if(this.labelStyle.font=this.labelStyle.font||"12px sans-serif",c.style.font=this.labelStyle.font,c.style.color=this.labelStyle.color||"black",this.labelStyle.fillStyle&&(c.style.background=this.labelStyle.fillStyle),this.labelStyle.borderWidth>0){var d=this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black";c.style.border=this.labelStyle.borderWidth+"px solid "+d}this.labelStyle.padding&&(c.style.padding=this.labelStyle.padding)}},jsPlumbUtil.extend(jsPlumb.Overlays.Label,jsPlumb.Overlays.Custom,{cleanup:function(){this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null},getLabel:function(){return this.label},setLabel:function(a){this.label=a,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),f.prototype.getDimensions.apply(this,arguments)},update:function(){if("function"==typeof this.label){var a=this.label(this);this.getElement().innerHTML=a.replace(/\r\n/g,"<br/>")}else null==this.labelText&&(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>"))}})}(),function(){"use strict";var a=function(a){this.type="Flowchart",a=a||{},a.stub=null==a.stub?30:a.stub;var b,c=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),d=null==a.midpoint?.5:a.midpoint,e=[],f=(a.grid,a.alwaysRespectStubs),g=null,h=null,i=null,j=null!=a.cornerRadius?a.cornerRadius:0,k=function(a){return 0>a?-1:0===a?0:1},l=function(a,b,c,d){if(h!=b||i!=c){var e=null==h?d.sx:h,f=null==i?d.sy:i,g=e==b?"v":"h",j=k(b-e),l=k(c-f);h=b,i=c,a.push([e,f,b,c,g,j,l])}},m=function(a){return Math.sqrt(Math.pow(a[0]-a[2],2)+Math.pow(a[1]-a[3],2))},n=function(a){var b=[];return b.push.apply(b,a),b},o=function(a,b,d){for(var e,f,g=0;g<b.length-1;g++){if(e=e||n(b[g]),f=n(b[g+1]),j>0&&e[4]!=f[4]){var h=Math.min(j,m(e),m(f));e[2]-=e[5]*h,e[3]-=e[6]*h,f[0]+=f[5]*h,f[1]+=f[6]*h;var i=e[6]==f[5]&&1==f[5]||e[6]==f[5]&&0===f[5]&&e[5]!=f[6]||e[6]==f[5]&&-1==f[5],k=f[1]>e[3]?1:-1,l=f[0]>e[2]?1:-1,o=k==l,p=o&&i||!o&&!i?f[0]:e[2],q=o&&i||!o&&!i?e[3]:f[1];c.addSegment(a,"Straight",{x1:e[0],y1:e[1],x2:e[2],y2:e[3]}),c.addSegment(a,"Arc",{r:h,x1:e[2],y1:e[3],x2:f[0],y2:f[1],cx:p,cy:q,ac:i})}else{var r=e[2]==e[0]?0:e[2]>e[0]?d.lw/2:-d.lw/2,s=e[3]==e[1]?0:e[3]>e[1]?d.lw/2:-d.lw/2;c.addSegment(a,"Straight",{x1:e[0]-r,y1:e[1]-s,x2:e[2]+r,y2:e[3]+s})}e=f}null!=f&&c.addSegment(a,"Straight",{x1:f[0],y1:f[1],x2:f[2],y2:f[3]})};this.setSegments=function(a){g=a},this.isEditable=function(){return!0},this.getOriginalSegments=function(){return g||e},this._compute=function(a,j){if(j.clearEdits&&(g=null),null!=g)return void o(this,g,a);e=[],h=null,i=null,b=null;var k=a.startStubX+(a.endStubX-a.startStubX)*d,m=a.startStubY+(a.endStubY-a.startStubY)*d,n={x:[0,1],y:[1,0]},p=function(){return[a.startStubX,a.startStubY,a.endStubX,a.endStubY]},q={perpendicular:p,orthogonal:p,opposite:function(b){var c=a,d="x"==b?0:1,e={x:function(){return 1==c.so[d]&&(c.startStubX>c.endStubX&&c.tx>c.startStubX||c.sx>c.endStubX&&c.tx>c.sx)||-1==c.so[d]&&(c.startStubX<c.endStubX&&c.tx<c.startStubX||c.sx<c.endStubX&&c.tx<c.sx)},y:function(){return 1==c.so[d]&&(c.startStubY>c.endStubY&&c.ty>c.startStubY||c.sy>c.endStubY&&c.ty>c.sy)||-1==c.so[d]&&(c.startStubY<c.endStubY&&c.ty<c.startStubY||c.sy<c.endStubY&&c.ty<c.sy)}};return!f&&e[b]()?{x:[(a.sx+a.tx)/2,a.startStubY,(a.sx+a.tx)/2,a.endStubY],y:[a.startStubX,(a.sy+a.ty)/2,a.endStubX,(a.sy+a.ty)/2]}[b]:[a.startStubX,a.startStubY,a.endStubX,a.endStubY]}},r={perpendicular:function(b){var c=a,d={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},e={x:[[c.startStubX,c.endStubX],null,[c.endStubX,c.startStubX]],y:[[c.startStubY,c.endStubY],null,[c.endStubY,c.startStubY]]},f={x:[[k,c.startStubY],[k,c.endStubY]],y:[[c.startStubX,m],[c.endStubX,m]]},g={x:[[c.endStubX,c.startStubY]],y:[[c.startStubX,c.endStubY]]},h={x:[[c.startStubX,c.endStubY],[c.endStubX,c.endStubY]],y:[[c.endStubX,c.startStubY],[c.endStubX,c.endStubY]]},i={x:[[c.startStubX,m],[c.endStubX,m],[c.endStubX,c.endStubY]],y:[[k,c.startStubY],[k,c.endStubY],[c.endStubX,c.endStubY]]},j={x:[c.startStubY,c.endStubY],y:[c.startStubX,c.endStubX]},l=n[b][0],o=n[b][1],p=c.so[l]+1,q=c.to[o]+1,r=-1==c.to[o]&&j[b][1]<j[b][0]||1==c.to[o]&&j[b][1]>j[b][0],s=e[b][p][0],t=e[b][p][1],u=d[b][p][q];return c.segment==u[3]||c.segment==u[2]&&r?f[b]:c.segment==u[2]&&s>t?g[b]:c.segment==u[2]&&t>=s||c.segment==u[1]&&!r?i[b]:c.segment==u[0]||c.segment==u[1]&&r?h[b]:void 0},orthogonal:function(b,c,d,e,f){var g=a,h={x:-1==g.so[0]?Math.min(c,e):Math.max(c,e),y:-1==g.so[1]?Math.min(c,e):Math.max(c,e)}[b];return{x:[[h,d],[h,f],[e,f]],y:[[d,h],[f,h],[f,e]]}[b]},opposite:function(b,d,e,f){var g=a,h={x:"y",y:"x"}[b],i={x:"height",y:"width"}[b],l=g["is"+b.toUpperCase()+"GreaterThanStubTimes2"];if(j.sourceEndpoint.elementId==j.targetEndpoint.elementId){var n=e+(1-j.sourceEndpoint.anchor[h])*j.sourceInfo[i]+c.maxStub;return{x:[[d,n],[f,n]],y:[[n,d],[n,f]]}[b]}return!l||1==g.so[t]&&d>f||-1==g.so[t]&&f>d?{x:[[d,m],[f,m]],y:[[k,d],[k,f]]}[b]:1==g.so[t]&&f>d||-1==g.so[t]&&d>f?{x:[[k,g.sy],[k,g.ty]],y:[[g.sx,m],[g.tx,m]]}[b]:void 0}},s=q[a.anchorOrientation](a.sourceAxis),t="x"==a.sourceAxis?0:1,u="x"==a.sourceAxis?1:0,v=s[t],w=s[u],x=s[t+2],y=s[u+2];l(e,s[0],s[1],a);var z=r[a.anchorOrientation](a.sourceAxis,v,w,x,y);if(z)for(var A=0;A<z.length;A++)l(e,z[A][0],z[A][1],a);l(e,s[2],s[3],a),l(e,a.tx,a.ty,a),o(this,e,a)},this.getPath=function(){for(var a=null,b=null,c=[],d=g||e,f=0;f<d.length;f++){var h=d[f],i=h[4],j="v"==i?3:2;null!=a&&b===i?a[j]=h[j]:(h[0]!=h[2]||h[1]!=h[3])&&(c.push({start:[h[0],h[1]],end:[h[2],h[3]]}),a=h,b=h[4])}return c},this.setPath=function(a){g=[];for(var b=0;b<a.length;b++){var c=a[b].start[0],d=a[b].start[1],e=a[b].end[0],f=a[b].end[1],h=c==e?"v":"h",i=k(e-c),j=k(f-d);g.push([c,d,e,f,h,i,j])}}};jsPlumbUtil.extend(a,jsPlumb.Connectors.AbstractConnector),jsPlumb.registerConnectorType(a,"Flowchart")}(),function(){"use strict";var a=function(a,b,c,d){return c>=a&&b>=d?1:c>=a&&d>=b?2:a>=c&&d>=b?3:4},b=function(a,b,c,d,e,f,g,h,i){return i>=h?[a,b]:1===c?d[3]<=0&&e[3]>=1?[a+(d[2]<.5?-1*f:f),b]:d[2]>=1&&e[2]<=0?[a,b+(d[3]<.5?-1*g:g)]:[a+-1*f,b+-1*g]:2===c?d[3]>=1&&e[3]<=0?[a+(d[2]<.5?-1*f:f),b]:d[2]>=1&&e[2]<=0?[a,b+(d[3]<.5?-1*g:g)]:[a+1*f,b+-1*g]:3===c?d[3]>=1&&e[3]<=0?[a+(d[2]<.5?-1*f:f),b]:d[2]<=0&&e[2]>=1?[a,b+(d[3]<.5?-1*g:g)]:[a+-1*f,b+-1*g]:4===c?d[3]<=0&&e[3]>=1?[a+(d[2]<.5?-1*f:f),b]:d[2]<=0&&e[2]>=1?[a,b+(d[3]<.5?-1*g:g)]:[a+1*f,b+-1*g]:void 0},c=function(c){c=c||{},this.type="StateMachine";var d=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),e=c.curviness||10,f=c.margin||5,g=c.proximityLimit||80,h=c.orientation&&"clockwise"===c.orientation,i=c.loopbackRadius||25,j=!1!==c.showLoopback;this._compute=function(c,k){var l=Math.abs(k.sourcePos[0]-k.targetPos[0]),m=Math.abs(k.sourcePos[1]-k.targetPos[1]);if(Math.min(k.sourcePos[0],k.targetPos[0]),Math.min(k.sourcePos[1],k.targetPos[1]),j&&k.sourceEndpoint.elementId===k.targetEndpoint.elementId){var n=k.sourcePos[0],o=(k.sourcePos[0],k.sourcePos[1]-f),p=(k.sourcePos[1],n),q=o-i,r=2*i,s=2*i,t=p-i,u=q-i;c.points[0]=t,c.points[1]=u,c.points[2]=r,c.points[3]=s,d.addSegment(this,"Arc",{loopback:!0,x1:n-t+4,y1:o-u,startAngle:0,endAngle:2*Math.PI,r:i,ac:!h,x2:n-t-4,y2:o-u,cx:p-t,cy:q-u})}else{var v=k.sourcePos[0]<k.targetPos[0]?0:l,w=k.sourcePos[1]<k.targetPos[1]?0:m,x=k.sourcePos[0]<k.targetPos[0]?l:0,y=k.sourcePos[1]<k.targetPos[1]?m:0;0===k.sourcePos[2]&&(v-=f),1===k.sourcePos[2]&&(v+=f),0===k.sourcePos[3]&&(w-=f),1===k.sourcePos[3]&&(w+=f),0===k.targetPos[2]&&(x-=f),1===k.targetPos[2]&&(x+=f),0===k.targetPos[3]&&(y-=f),1===k.targetPos[3]&&(y+=f);var z=(v+x)/2,A=(w+y)/2,B=-1*z/A,C=Math.atan(B),D=(1/0==B||B==-1/0||Math.abs(e/2*Math.sin(C)),1/0==B||B==-1/0||Math.abs(e/2*Math.cos(C)),a(v,w,x,y)),E=Math.sqrt(Math.pow(x-v,2)+Math.pow(y-w,2)),F=b(z,A,D,k.sourcePos,k.targetPos,e,e,E,g);d.addSegment(this,"Bezier",{x1:x,y1:y,x2:v,y2:w,cp1x:F[0],cp1y:F[1],cp2x:F[0],cp2y:F[1]})}}};jsPlumb.registerConnectorType(c,"StateMachine")}(),function(){var a=function(a){a=a||{};var b=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),c=(a.stub,a.curviness||150),d=10;this.type="Bezier",this.getCurviness=function(){return c},this._findControlPoint=function(a,b,e,f,g){var h=f.anchor.getOrientation(f),i=g.anchor.getOrientation(g),j=h[0]!=i[0]||h[1]==i[1],k=[];return j?(0===i[0]?k.push(e[0]<b[0]?a[0]+d:a[0]-d):k.push(a[0]+c*i[0]),0===i[1]?k.push(e[1]<b[1]?a[1]+d:a[1]-d):k.push(a[1]+c*h[1])):(0===h[0]?k.push(b[0]<e[0]?a[0]+d:a[0]-d):k.push(a[0]-c*h[0]),0===h[1]?k.push(b[1]<e[1]?a[1]+d:a[1]-d):k.push(a[1]+c*i[1])),k},this._compute=function(a,c){var d=c.sourcePos,e=c.targetPos,f=Math.abs(d[0]-e[0]),g=Math.abs(d[1]-e[1]),h=d[0]<e[0]?f:0,i=d[1]<e[1]?g:0,j=d[0]<e[0]?0:f,k=d[1]<e[1]?0:g,l=this._findControlPoint([h,i],d,e,c.sourceEndpoint,c.targetEndpoint),m=this._findControlPoint([j,k],e,d,c.targetEndpoint,c.sourceEndpoint);b.addSegment(this,"Bezier",{x1:h,y1:i,x2:j,y2:k,cp1x:l[0],cp1y:l[1],cp2x:m[0],cp2y:m[1]})}};jsPlumbUtil.extend(a,jsPlumb.Connectors.AbstractConnector),jsPlumb.registerConnectorType(a,"Bezier")}(),function(){"use strict";var a={joinstyle:"stroke-linejoin","stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},b="stroke-dasharray",c="dashstyle",d="linearGradient",e="radialGradient",f="defs",g="fill",h="stop",i="stroke",j="stroke-width",k="style",l="none",m="jsplumb_gradient_",n="lineWidth",o={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml"},p=function(a,b){for(var c in b)a.setAttribute(c,""+b[c])},q=function(a,b){var c=document.createElementNS(o.svg,a);return b=b||{},b.version="1.1",b.xmlns=o.xhtml,p(c,b),c},r=function(a){return"position:absolute;left:"+a[0]+"px;top:"+a[1]+"px"},s=function(a){for(var b=0;b<a.childNodes.length;b++)(a.childNodes[b].tagName==f||a.childNodes[b].tagName==d||a.childNodes[b].tagName==e)&&a.removeChild(a.childNodes[b])},t=function(a,b,c,j,k){var l=m+k._jsPlumb.instance.idstamp();s(a);var n;n=c.gradient.offset?q(e,{id:l}):q(d,{id:l,gradientUnits:"userSpaceOnUse"});var o=q(f);a.appendChild(o),o.appendChild(n);for(var p=0;p<c.gradient.stops.length;p++){var r=1==k.segment||2==k.segment?p:c.gradient.stops.length-1-p,t=jsPlumbUtil.convertStyle(c.gradient.stops[r][1],!0),u=q(h,{offset:Math.floor(100*c.gradient.stops[p][0])+"%","stop-color":t});n.appendChild(u)}var v=c.strokeStyle?i:g;b.setAttribute(v,"url(#"+l+")")},u=function(d,e,f,h,m){if(e.setAttribute(g,f.fillStyle?jsPlumbUtil.convertStyle(f.fillStyle,!0):l),e.setAttribute(i,f.strokeStyle?jsPlumbUtil.convertStyle(f.strokeStyle,!0):l),f.gradient?t(d,e,f,h,m):(s(d),e.setAttribute(k,"")),f.lineWidth&&e.setAttribute(j,f.lineWidth),f[c]&&f[n]&&!f[b]){var o=-1==f[c].indexOf(",")?" ":",",p=f[c].split(o),q="";p.forEach(function(a){q+=Math.floor(a*f.lineWidth)+o}),e.setAttribute(b,q)}else f[b]&&e.setAttribute(b,f[b]);for(var r in a)f[r]&&e.setAttribute(a[r],f[r])},v=function(a,b,c){a.childNodes.length>c?a.insertBefore(b,a.childNodes[c]):a.appendChild(b)};jsPlumbUtil.svg={node:q,attr:p,pos:r};var w=function(a){var b=a.pointerEventsSpec||"all",c={};jsPlumb.jsPlumbUIComponent.apply(this,a.originalArgs),this.canvas=null,this.path=null,this.svg=null,this.bgCanvas=null;var d=a.cssClass+" "+(a.originalArgs[0].cssClass||""),e={style:"",width:0,height:0,"pointer-events":b,position:"absolute"};this.svg=q("svg",e),a.useDivWrapper?(this.canvas=document.createElement("div"),this.canvas.style.position="absolute",jsPlumbUtil.sizeElement(this.canvas,0,0,1,1),this.canvas.className=d):(p(this.svg,{class:d}),this.canvas=this.svg),a._jsPlumb.appendElement(this.canvas,a.originalArgs[0].parent),a.useDivWrapper&&this.canvas.appendChild(this.svg);var f=[this.canvas];return this.getDisplayElements=function(){return f},this.appendDisplayElement=function(a){f.push(a)},this.paint=function(b,d,e){if(null!=b){var f,g=[this.x,this.y],h=[this.w,this.h];null!=e&&(e.xmin<0&&(g[0]+=e.xmin),e.ymin<0&&(g[1]+=e.ymin),h[0]=e.xmax+(e.xmin<0?-e.xmin:0),h[1]=e.ymax+(e.ymin<0?-e.ymin:0)),a.useDivWrapper?(jsPlumbUtil.sizeElement(this.canvas,g[0],g[1],h[0],h[1]),g[0]=0,g[1]=0,f=r([0,0])):f=r([g[0],g[1]]),c.paint.apply(this,arguments),p(this.svg,{style:f,width:h[0],height:h[1]})}},{renderer:c}};jsPlumbUtil.extend(w,jsPlumb.jsPlumbUIComponent,{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.svg=null,this.canvas=null,this.bgCanvas=null,this.path=null,this.group=null},setVisible:function(a){this.canvas&&(this.canvas.style.display=a?"block":"none"),this.bgCanvas&&(this.bgCanvas.style.display=a?"block":"none")}}),jsPlumb.ConnectorRenderers.svg=function(a){var b=this;w.apply(this,[{cssClass:a._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:a._jsPlumb}]).renderer.paint=function(c,d,e){var f=b.getSegments(),g="",h=[0,0];if(e.xmin<0&&(h[0]=-e.xmin),e.ymin<0&&(h[1]=-e.ymin),f.length>0){for(var i=0;i<f.length;i++)g+=jsPlumb.Segments.svg.SegmentRenderer.getPath(f[i]),g+=" ";var j={d:g,transform:"translate("+h[0]+","+h[1]+")","pointer-events":a["pointer-events"]||"visibleStroke"},k=null,l=[b.x,b.y,b.w,b.h],m={mouseenter:function(a){var c=a.relatedTarget;return null==c||c!=b.path&&c!=b.bgPath},mouseout:function(a){var c=a.relatedTarget;return null==c||c!=b.path&&c!=b.bgPath}};if(c.outlineColor){var n=c.outlineWidth||1,o=c.lineWidth+2*n;k=jsPlumb.extend({},c),k.strokeStyle=jsPlumbUtil.convertStyle(c.outlineColor),k.lineWidth=o,null==b.bgPath?(b.bgPath=q("path",j),v(b.svg,b.bgPath,0),b.attachListeners(b.bgPath,b,m)):p(b.bgPath,j),u(b.svg,b.bgPath,k,l,b)}null==b.path?(b.path=q("path",j),v(b.svg,b.path,c.outlineColor?1:0),b.attachListeners(b.path,b,m)):p(b.path,j),u(b.svg,b.path,c,l,b)}},this.reattachListeners=function(){this.bgPath&&this.reattachListenersForElement(this.bgPath,this),this.path&&this.reattachListenersForElement(this.path,this)}},jsPlumbUtil.extend(jsPlumb.ConnectorRenderers.svg,w),jsPlumb.Segments.svg={SegmentRenderer:{getPath:function(a){return{Straight:function(){var b=a.getCoordinates();return"M "+b.x1+" "+b.y1+" L "+b.x2+" "+b.y2},Bezier:function(){var b=a.params;return"M "+b.x1+" "+b.y1+" C "+b.cp1x+" "+b.cp1y+" "+b.cp2x+" "+b.cp2y+" "+b.x2+" "+b.y2},Arc:function(){var b=a.params,c=a.sweep>Math.PI?1:0,d=a.anticlockwise?0:1;return"M"+a.x1+" "+a.y1+" A "+a.radius+" "+b.r+" 0 "+c+","+d+" "+a.x2+" "+a.y2}}[a.type]()}}};var x=window.SvgEndpoint=function(a){w.apply(this,[{cssClass:a._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:a._jsPlumb}]).renderer.paint=function(a){var b=jsPlumb.extend({},a);b.outlineColor&&(b.strokeWidth=b.outlineWidth,b.strokeStyle=jsPlumbUtil.convertStyle(b.outlineColor,!0)),null==this.node?(this.node=this.makeNode(b),this.svg.appendChild(this.node),this.attachListeners(this.node,this)):null!=this.updateNode&&this.updateNode(this.node),u(this.svg,this.node,b,[this.x,this.y,this.w,this.h],this),r(this.node,[this.x,this.y])}.bind(this)};jsPlumbUtil.extend(x,w,{reattachListeners:function(){this.node&&this.reattachListenersForElement(this.node,this)}}),jsPlumb.Endpoints.svg.Dot=function(){jsPlumb.Endpoints.Dot.apply(this,arguments),x.apply(this,arguments),this.makeNode=function(){return q("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(a){p(a,{cx:this.w/2,cy:this.h/2,r:this.radius})}},jsPlumbUtil.extend(jsPlumb.Endpoints.svg.Dot,[jsPlumb.Endpoints.Dot,x]),jsPlumb.Endpoints.svg.Rectangle=function(){jsPlumb.Endpoints.Rectangle.apply(this,arguments),x.apply(this,arguments),this.makeNode=function(){return q("rect",{width:this.w,height:this.h})},this.updateNode=function(a){p(a,{width:this.w,height:this.h})}},jsPlumbUtil.extend(jsPlumb.Endpoints.svg.Rectangle,[jsPlumb.Endpoints.Rectangle,x]),jsPlumb.Endpoints.svg.Image=jsPlumb.Endpoints.Image,jsPlumb.Endpoints.svg.Blank=jsPlumb.Endpoints.Blank,jsPlumb.Overlays.svg.Label=jsPlumb.Overlays.Label,jsPlumb.Overlays.svg.Custom=jsPlumb.Overlays.Custom;var y=function(a,b){a.apply(this,b),jsPlumb.jsPlumbUIComponent.apply(this,b),this.isAppendedAtTopLevel=!1,this.path=null,this.paint=function(a,d){if(a.component.svg&&d){null==this.path&&(this.path=q("path",{"pointer-events":"all"}),a.component.svg.appendChild(this.path),this.canvas=a.component.svg,this.attachListeners(this.path,a.component),this.attachListeners(this.path,this));var e=b&&1==b.length?b[0].cssClass||"":"",f=[0,0];d.xmin<0&&(f[0]=-d.xmin),d.ymin<0&&(f[1]=-d.ymin),p(this.path,{d:c(a.d),class:e,stroke:a.strokeStyle?a.strokeStyle:null,fill:a.fillStyle?a.fillStyle:null,transform:"translate("+f[0]+","+f[1]+")"})}};var c=function(a){return"M"+a.hxy.x+","+a.hxy.y+" L"+a.tail[0].x+","+a.tail[0].y+" L"+a.cxy.x+","+a.cxy.y+" L"+a.tail[1].x+","+a.tail[1].y+" L"+a.hxy.x+","+a.hxy.y};this.reattachListeners=function(){this.path&&this.reattachListenersForElement(this.path,this)}};jsPlumbUtil.extend(y,[jsPlumb.jsPlumbUIComponent,jsPlumb.Overlays.AbstractOverlay],{cleanup:function(){null!=this.path&&this._jsPlumb.instance.removeElement(this.path)},setVisible:function(a){null!=this.path&&(this.path.style.display=a?"block":"none")}}),jsPlumb.Overlays.svg.Arrow=function(){y.apply(this,[jsPlumb.Overlays.Arrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.svg.Arrow,[jsPlumb.Overlays.Arrow,y]),jsPlumb.Overlays.svg.PlainArrow=function(){y.apply(this,[jsPlumb.Overlays.PlainArrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.svg.PlainArrow,[jsPlumb.Overlays.PlainArrow,y]),jsPlumb.Overlays.svg.Diamond=function(){y.apply(this,[jsPlumb.Overlays.Diamond,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.svg.Diamond,[jsPlumb.Overlays.Diamond,y]),jsPlumb.Overlays.svg.GuideLines=function(){var a,b,c=null,d=this;jsPlumb.Overlays.GuideLines.apply(this,arguments),this.paint=function(f,g){null==c&&(c=q("path"),f.connector.svg.appendChild(c),d.attachListeners(c,f.connector),d.attachListeners(c,d),a=q("path"),f.connector.svg.appendChild(a),d.attachListeners(a,f.connector),d.attachListeners(a,d),b=q("path"),f.connector.svg.appendChild(b),d.attachListeners(b,f.connector),d.attachListeners(b,d));var h=[0,0];g.xmin<0&&(h[0]=-g.xmin),g.ymin<0&&(h[1]=-g.ymin),p(c,{d:e(f.head,f.tail),stroke:"red",fill:null,transform:"translate("+h[0]+","+h[1]+")"}),p(a,{d:e(f.tailLine[0],f.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+h[0]+","+h[1]+")"}),p(b,{d:e(f.headLine[0],f.headLine[1]),stroke:"green",fill:null,transform:"translate("+h[0]+","+h[1]+")"})};var e=function(a,b){return"M "+a.x+","+a.y+" L"+b.x+","+b.y}},jsPlumbUtil.extend(jsPlumb.Overlays.svg.GuideLines,jsPlumb.Overlays.GuideLines)}(),function(){"use strict";var a={"stroke-linejoin":"joinstyle",joinstyle:"joinstyle",endcap:"endcap",miterlimit:"miterlimit"},b=null;if(document.createStyleSheet&&document.namespaces){var c=[".jsplumb_vml","jsplumb\\:textbox","jsplumb\\:oval","jsplumb\\:rect","jsplumb\\:stroke","jsplumb\\:shape","jsplumb\\:group"],d="behavior:url(#default#VML);position:absolute;";b=document.createStyleSheet();for(var e=0;e<c.length;e++)b.addRule(c[e],d);document.namespaces.add("jsplumb","urn:schemas-microsoft-com:vml")}jsPlumb.vml={};var f=1e3,g=function(a,b){for(var c in b)a[c]=b[c]},h=function(a,b,c,d,e,f){c=c||{};var h=document.createElement("jsplumb:"+a);return f?e.appendElement(h,d):d.appendChild(h),h.className=(c.class?c.class+" ":"")+"jsplumb_vml",i(h,b),g(h,c),h},i=function(a,b,c){a.style.left=b[0]+"px",a.style.top=b[1]+"px",a.style.width=b[2]+"px",a.style.height=b[3]+"px",a.style.position="absolute",c&&(a.style.zIndex=c)},j=jsPlumb.vml.convertValue=function(a){return Math.floor(a*f)},k=function(a,b,c,d){"transparent"===b?d.setOpacity(c,"0.0"):d.setOpacity(c,"1.0")},l=function(a,b,c,d){var e={};if(b.strokeStyle){e.stroked="true";var f=jsPlumbUtil.convertStyle(b.strokeStyle,!0);e.strokecolor=f,k(e,f,"stroke",c),e.strokeweight=b.lineWidth+"px"}else e.stroked="false";if(b.fillStyle){e.filled="true";var i=jsPlumbUtil.convertStyle(b.fillStyle,!0);e.fillcolor=i,k(e,i,"fill",c)}else e.filled="false";if(b.dashstyle)null==c.strokeNode?c.strokeNode=h("stroke",[0,0,0,0],{dashstyle:b.dashstyle},a,d):c.strokeNode.dashstyle=b.dashstyle;else if(b["stroke-dasharray"]&&b.lineWidth){for(var j=-1==b["stroke-dasharray"].indexOf(",")?" ":",",l=b["stroke-dasharray"].split(j),m="",n=0;n<l.length;n++)m+=Math.floor(l[n]/b.lineWidth)+j;null==c.strokeNode?c.strokeNode=h("stroke",[0,0,0,0],{dashstyle:m},a,d):c.strokeNode.dashstyle=m}g(a,e)},m=function(){var a=this;jsPlumb.jsPlumbUIComponent.apply(this,arguments),this.opacityNodes={stroke:null,fill:null},this.initOpacityNodes=function(b){a.opacityNodes.stroke=h("stroke",[0,0,1,1],{opacity:"0.0"},b,a._jsPlumb.instance),a.opacityNodes.fill=h("fill",[0,0,1,1],{opacity:"0.0"},b,a._jsPlumb.instance)},this.setOpacity=function(b,c){var d=a.opacityNodes[b];d&&(d.opacity=""+c)};var b=[];this.getDisplayElements=function(){return b},this.appendDisplayElement=function(c,d){d||a.canvas.parentNode.appendChild(c),b.push(c)}};jsPlumbUtil.extend(m,jsPlumb.jsPlumbUIComponent,{cleanup:function(){this.bgCanvas&&this.bgCanvas.parentNode.removeChild(this.bgCanvas),this.canvas&&this.canvas.parentNode.removeChild(this.canvas)}});var n=jsPlumb.ConnectorRenderers.vml=function(b){this.strokeNode=null,this.canvas=null,m.apply(this,arguments);var c=this._jsPlumb.instance.connectorClass+(b.cssClass?" "+b.cssClass:"");this.paint=function(d){if(null!==d){this.w=Math.max(this.w,1),this.h=Math.max(this.h,1);for(var e=this.getSegments(),j={path:""
},k=[this.x,this.y,this.w,this.h],m=0;m<e.length;m++)j.path+=jsPlumb.Segments.vml.SegmentRenderer.getPath(e[m]),j.path+=" ";if(d.outlineColor){var n=d.outlineWidth||1,o=d.lineWidth+2*n,p={strokeStyle:jsPlumbUtil.convertStyle(d.outlineColor),lineWidth:o};for(var q in a)p[q]=d[q];null==this.bgCanvas?(j.class=c,j.coordsize=k[2]*f+","+k[3]*f,this.bgCanvas=h("shape",k,j,b.parent,this._jsPlumb.instance,!0),i(this.bgCanvas,k),this.appendDisplayElement(this.bgCanvas,!0),this.attachListeners(this.bgCanvas,this),this.initOpacityNodes(this.bgCanvas,["stroke"])):(j.coordsize=k[2]*f+","+k[3]*f,i(this.bgCanvas,k),g(this.bgCanvas,j)),l(this.bgCanvas,p,this)}null==this.canvas?(j.class=c,j.coordsize=k[2]*f+","+k[3]*f,this.canvas=h("shape",k,j,b.parent,this._jsPlumb.instance,!0),this.appendDisplayElement(this.canvas,!0),this.attachListeners(this.canvas,this),this.initOpacityNodes(this.canvas,["stroke"])):(j.coordsize=k[2]*f+","+k[3]*f,i(this.canvas,k),g(this.canvas,j)),l(this.canvas,d,this,this._jsPlumb.instance)}}};jsPlumbUtil.extend(n,m,{reattachListeners:function(){this.canvas&&this.reattachListenersForElement(this.canvas,this)},setVisible:function(a){this.canvas&&(this.canvas.style.display=a?"block":"none"),this.bgCanvas&&(this.bgCanvas.style.display=a?"block":"none")}});var o=window.VmlEndpoint=function(a){m.apply(this,arguments),this._jsPlumb.vml=null,this.canvas=document.createElement("div"),this.canvas.style.position="absolute",this._jsPlumb.clazz=this._jsPlumb.instance.endpointClass+(a.cssClass?" "+a.cssClass:""),a._jsPlumb.appendElement(this.canvas,a.parent),this.paint=function(a,b){var c={},d=this._jsPlumb.vml;jsPlumbUtil.sizeElement(this.canvas,this.x,this.y,this.w,this.h),null==this._jsPlumb.vml?(c.class=this._jsPlumb.clazz,d=this._jsPlumb.vml=this.getVml([0,0,this.w,this.h],c,b,this.canvas,this._jsPlumb.instance),this.attachListeners(d,this),this.appendDisplayElement(d,!0),this.appendDisplayElement(this.canvas,!0),this.initOpacityNodes(d,["fill"])):(i(d,[0,0,this.w,this.h]),g(d,c)),l(d,a,this)}};jsPlumbUtil.extend(o,m,{reattachListeners:function(){this._jsPlumb.vml&&this.reattachListenersForElement(this._jsPlumb.vml,this)}}),jsPlumb.Segments.vml={SegmentRenderer:{getPath:function(a){return{Straight:function(a){var b=a.params;return"m"+j(b.x1)+","+j(b.y1)+" l"+j(b.x2)+","+j(b.y2)+" e"},Bezier:function(a){var b=a.params;return"m"+j(b.x1)+","+j(b.y1)+" c"+j(b.cp1x)+","+j(b.cp1y)+","+j(b.cp2x)+","+j(b.cp2y)+","+j(b.x2)+","+j(b.y2)+" e"},Arc:function(a){var b=a.params,c=Math.min(b.x1,b.x2),d=(Math.max(b.x1,b.x2),Math.min(b.y1,b.y2)),e=(Math.max(b.y1,b.y2),a.anticlockwise?1:0);return(a.anticlockwise?"at ":"wa ")+" "+function(){if(b.loopback)return"0,0,"+j(2*b.r)+","+j(2*b.r);var f=[null,[function(){return[c,d]},function(){return[c-b.r,d-b.r]}],[function(){return[c-b.r,d]},function(){return[c,d-b.r]}],[function(){return[c-b.r,d-b.r]},function(){return[c,d]}],[function(){return[c,d-b.r]},function(){return[c-b.r,d]}]][a.segment][e]();return j(f[0])+","+j(f[1])+","+j(f[0]+2*b.r)+","+j(f[1]+2*b.r)}()+","+j(b.x1)+","+j(b.y1)+","+j(b.x2)+","+j(b.y2)+" e"}}[a.type](a)}}},jsPlumb.Endpoints.vml.Dot=function(){jsPlumb.Endpoints.Dot.apply(this,arguments),o.apply(this,arguments),this.getVml=function(a,b,c,d,e){return h("oval",a,b,d,e)}},jsPlumbUtil.extend(jsPlumb.Endpoints.vml.Dot,o),jsPlumb.Endpoints.vml.Rectangle=function(){jsPlumb.Endpoints.Rectangle.apply(this,arguments),o.apply(this,arguments),this.getVml=function(a,b,c,d,e){return h("rect",a,b,d,e)}},jsPlumbUtil.extend(jsPlumb.Endpoints.vml.Rectangle,o),jsPlumb.Endpoints.vml.Image=jsPlumb.Endpoints.Image,jsPlumb.Endpoints.vml.Blank=jsPlumb.Endpoints.Blank,jsPlumb.Overlays.vml.Label=jsPlumb.Overlays.Label,jsPlumb.Overlays.vml.Custom=jsPlumb.Overlays.Custom;var p=function(a,b){a.apply(this,b),m.apply(this,b);var c=this;this.canvas=null,this.isAppendedAtTopLevel=!0;var d=function(a){return"m "+j(a.hxy.x)+","+j(a.hxy.y)+" l "+j(a.tail[0].x)+","+j(a.tail[0].y)+" "+j(a.cxy.x)+","+j(a.cxy.y)+" "+j(a.tail[1].x)+","+j(a.tail[1].y)+" x e"};this.paint=function(a,e){if(a.component.canvas&&e){var j={},k=a.d,l=a.component;a.strokeStyle&&(j.stroked="true",j.strokecolor=jsPlumbUtil.convertStyle(a.strokeStyle,!0)),a.lineWidth&&(j.strokeweight=a.lineWidth+"px"),a.fillStyle&&(j.filled="true",j.fillcolor=a.fillStyle);var m=Math.min(k.hxy.x,k.tail[0].x,k.tail[1].x,k.cxy.x),n=Math.min(k.hxy.y,k.tail[0].y,k.tail[1].y,k.cxy.y),o=Math.max(k.hxy.x,k.tail[0].x,k.tail[1].x,k.cxy.x),p=Math.max(k.hxy.y,k.tail[0].y,k.tail[1].y,k.cxy.y),q=Math.abs(o-m),r=Math.abs(p-n),s=[m,n,q,r];if(j.path=d(k),j.coordsize=l.w*f+","+l.h*f,s[0]=l.x,s[1]=l.y,s[2]=l.w,s[3]=l.h,null==c.canvas){var t=l._jsPlumb.overlayClass||"",u=b&&1==b.length?b[0].cssClass||"":"";j.class=u+" "+t,c.canvas=h("shape",s,j,l.canvas.parentNode,l._jsPlumb.instance,!0),l.appendDisplayElement(c.canvas,!0),c.attachListeners(c.canvas,l),c.attachListeners(c.canvas,c)}else i(c.canvas,s),g(c.canvas,j)}},this.reattachListeners=function(){this.canvas&&this.reattachListenersForElement(c.canvas,this)},this.cleanup=function(){null!=this.canvas&&this._jsPlumb.instance.removeElement(this.canvas)}};jsPlumbUtil.extend(p,[m,jsPlumb.Overlays.AbstractOverlay],{setVisible:function(a){this.canvas.style.display=a?"block":"none"}}),jsPlumb.Overlays.vml.Arrow=function(){p.apply(this,[jsPlumb.Overlays.Arrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.vml.Arrow,[jsPlumb.Overlays.Arrow,p]),jsPlumb.Overlays.vml.PlainArrow=function(){p.apply(this,[jsPlumb.Overlays.PlainArrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.vml.PlainArrow,[jsPlumb.Overlays.PlainArrow,p]),jsPlumb.Overlays.vml.Diamond=function(){p.apply(this,[jsPlumb.Overlays.Diamond,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.vml.Diamond,[jsPlumb.Overlays.Diamond,p])}(),function(a){"use strict";var b=function(b){return a("string"==typeof b?"#"+b:b)};a.extend(jsPlumbInstance.prototype,{getDOMElement:function(a){return null==a?null:"string"==typeof a?document.getElementById(a):a.context||null!=a.length?a[0]:a},getElementObject:b,removeElement:function(a){b(a).remove()},doAnimate:function(a,b,c){a.animate(b,c)},getSelector:function(c,d){return 2==arguments.length?b(c).find(d):a(c)},destroyDraggable:function(b){a(b).data("draggable")&&a(b).draggable("destroy")},destroyDroppable:function(b){a(b).data("droppable")&&a(b).droppable("destroy")},initDraggable:function(b,c,d){c=c||{},b=a(b),c.start=jsPlumbUtil.wrap(c.start,function(){a("body").addClass(this.dragSelectClass)},!1),c.stop=jsPlumbUtil.wrap(c.stop,function(){a("body").removeClass(this.dragSelectClass)}),c.doNotRemoveHelper||(c.helper=null),d&&(c.scope=c.scope||jsPlumb.Defaults.Scope),b.draggable(c)},initDroppable:function(b,c){c.scope=c.scope||jsPlumb.Defaults.Scope,a(b).droppable(c)},isAlreadyDraggable:function(b){return a(b).hasClass("ui-draggable")},isDragSupported:function(b){return a(b).draggable},isDropSupported:function(b){return a(b).droppable},getDragObject:function(a){return a[1].helper||a[1].draggable},getDragScope:function(b){return a(b).draggable("option","scope")},getDropEvent:function(a){return a[0]},getDropScope:function(b){return a(b).droppable("option","scope")},getUIPosition:function(a,b,c){var d;if(b=b||1,1==a.length)d={left:a[0].pageX,top:a[0].pageY};else{var e=a[1];d=e.position||e.absolutePosition,c||(e.position.left/=b,e.position.top/=b)}return{left:d.left,top:d.top}},isDragFilterSupported:function(){return!0},setDragFilter:function(b,c){jsPlumb.isAlreadyDraggable(b)&&a(b).draggable("option","cancel",c)},setElementDraggable:function(b,c){a(b).draggable("option","disabled",!c)},setDragScope:function(b,c){a(b).draggable("option","scope",c)},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete"},animEvents:{step:"step",complete:"complete"},trigger:function(a,c,d){jQuery._data(b(a)[0],"handle")(d)},getOriginalEvent:function(a){return a.originalEvent},on:function(a){a=b(a);var c=[];c.push.apply(c,arguments),a.on.apply(a,c.slice(1))},off:function(a){a=b(a);var c=[];c.push.apply(c,arguments),a.off.apply(a,c.slice(1))}}),a(document).ready(jsPlumb.init)}(jQuery),angular.module("dangle",[]),angular.module("dangle").directive("fsArea",[function(){"use strict";return{restrict:"E",scope:{onClick:"=",width:"=",height:"=",bind:"=",label:"@",field:"@",duration:"@",delay:"@",plot:"@",pointRadius:"@"},link:function(a,b,c){var d={top:20,right:20,bottom:30,left:80},e=a.width||1280,f=a.height||300,g=(c.interpolate,c.label||"Frequency"),h=c.class||"";e=e-d.left-d.right,f=f-d.top-d.bottom;var i=d3.time.scale().range([0,e]),j=d3.scale.linear().range([f,0]),k=d3.svg.axis().scale(i).orient("bottom"),l=d3.svg.axis().scale(j).orient("left"),m=d3.svg.line().x(function(a){return i(a.time)}).y(function(a){return j(a.count)}),n=d3.svg.area().x(function(a){return i(a.time)}).y0(f).y1(function(a){return j(a.count)});"true"==c.interpolate&&(m.interpolate("cardinal"),n.interpolate("cardinal"));var o=d3.select(b[0]).append("svg").attr("preserveAspectRatio","xMinYMin").attr("viewBox","0 0 "+(e+d.left+d.right)+" "+(f+d.top+d.bottom)).append("g").attr("transform","translate("+d.left+","+d.top+")");o.append("path").datum([]).attr("class","area fill "+h).attr("d",n),o.append("g").attr("class","area x axis "+h).attr("transform","translate(0,"+f+")").call(k),o.append("g").attr("class","area y axis "+h).call(l).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text(g),o.append("path").datum([]).attr("class","area line "+h).attr("d",m),a.$watch("bind",function(b){var d=a.duration||0,e=(a.delay,a.plot||"true"),f=a.pointRadius||8,g=a.field||c.bind.split(".").pop().toLowerCase();if(b){b=b.entries||[],i.domain(d3.extent(b,function(a){return a.time})),j.domain([0,d3.max(b,function(a){return a.count})]);var p=o.transition().duration(d);if(p.select(".area").attr("d",n(b)),p.select(".line").attr("d",m(b)),"true"==e){var q=o.selectAll("circle").data(b.filter(function(a){return a.count}),function(a){return Math.random()});q.enter().append("circle").attr("class","area line points "+h).attr("cursor","pointer").attr("cx",m.x()).attr("cy",m.y()).style("opacity",0).transition().duration(d).style("opacity",1).attr("cx",m.x()).attr("cy",m.y()).attr("r",f),q.on("mousedown",function(b){a.$apply(function(){(a.onClick||angular.noop)(g,b.time)})}),q.exit().remove()}p.select(".x").call(k),p.select(".y").call(l)}})}}}]),angular.module("dangle").directive("fsBar",[function(){"user strict";return{restrict:"E",scope:{onClick:"=",width:"=",height:"=",bind:"=",duration:"@"},link:function(a,b,c){var d={top:10,right:10,bottom:10,left:10},e=a.width||300,f=a.height||1020;e=e-d.left-d.right,f=f-d.top-d.bottom;var g=c.class||"",h=c.align||"left",i="right"===h?"xMaxYMin":"xMinYMin",j=d3.scale.linear().range([0,e]),k=d3.scale.ordinal().rangeBands([0,f],.1),l=d3.select(b[0]).append("svg").attr("preserveAspectRatio",i+" meet").attr("viewBox","0 0 "+(e+d.left+d.right)+" "+(f+d.top+d.bottom)).append("g").attr("transform","translate("+d.left+","+d.top+")");a.$watch("bind",function(b){var d=a.duration||0,f=(a.delay,a.field||c.bind.split(".").pop().toLowerCase());if(b){b=b.terms||[],j.domain([0,2*d3.max(b,function(a){return a.count})]),k.domain(b.map(function(a){return a.term}));var i=l.selectAll("rect").data(b,function(a){return Math.random()});i.enter().append("rect").attr("class","bar rect "+g).attr("cursor","pointer").attr("y",function(a){return k(a.term)}).attr("height",k.rangeBand()).attr("x",function(a){return"right"===h?e:0}).transition().duration(d).attr("width",function(a){return j(a.count)}).attr("x",function(a){return"right"===h?e-j(a.count):0}),i.on("mousedown",function(b){a.$apply(function(){(a.onClick||angular.noop)(f,b.term)})}),i.exit().remove();var m=l.selectAll("text").data(b,function(a){return Math.random()});m.enter().append("text").attr("class","bar text "+g).attr("cursor","pointer").attr("y",function(a){return k(a.term)+k.rangeBand()/2}).attr("x",function(a){return"right"===h?e-j(a.count)-3:j(a.count)+3}).attr("dy",".35em").attr("text-anchor",function(a){return"right"===h?"end":"start"}).text(function(a){return"right"===h?"("+a.count+") "+a.term:a.term+" ("+a.count+")"}),m.on("mousedown",function(b){a.$apply(function(){(a.onClick||angular.noop)(f,b.term)})}),m.exit().remove()}})}}}]),angular.module("dangle").directive("fsColumn",[function(){"use strict";return{restrict:"E",scope:{fontSize:"=",onClick:"=",width:"=",height:"=",bind:"="},link:function(a,b,c){var d={top:20,right:20,bottom:30,left:40},e=a.width||960,f=a.height||500,g=c.color||"steelblue",h=c.fontColor||"#000",i=a.fontSize||14,j=c.label||"Frequency";void 0==c.field&&(c.field=c.bind.split(".").pop().toLowerCase()),e=e-d.left-d.right,f=f-d.top-d.bottom;var k=d3.scale.ordinal().rangeRoundBands([0,e],.1),l=d3.scale.linear().range([f,0]),m=d3.svg.axis().scale(k).orient("bottom"),n=d3.svg.axis().scale(l).orient("left"),o=d3.select(b[0]).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+(e+d.left+d.right)+" "+(f+d.top+d.bottom)).append("g").attr("transform","translate("+d.left+","+d.top+")");a.$watch("bind",function(b){b&&(b=b.terms||[],o.selectAll("*").remove(),k.domain(b.map(function(a){return a.term})),l.domain([0,d3.max(b,function(a){return a.count})]),o.append("g").attr("fill",h).attr("font-size",i).attr("class","x axis").attr("transform","translate(0,"+f+")").call(m),o.append("g").attr("class","y axis").attr("font-size",i).attr("fill",h).call(n).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".51em").style("text-anchor","end").text(j),o.selectAll(".bar").data(b).enter().append("rect").attr("fill",g).attr("x",function(a){return k(a.term)}).attr("width",k.rangeBand()).attr("y",function(a){return l(a.count)}).attr("height",function(a){return f-l(a.count)}).on("mousedown",function(b){a.$apply(function(){(a.onClick||angular.noop)(c.field,b.term)})}))})}}}]),angular.module("dangle").directive("fsDateHisto",[function(){"use strict";return{restrict:"E",scope:{onClick:"=",width:"=",height:"=",bind:"=",label:"@",field:"@",duration:"@",delay:"@",interval:"@"},link:function(a,b,c){var d={top:20,right:20,bottom:30,left:80},e=a.width||1280,f=a.height||300,g=c.label||"Frequency",h=c.class||"";e=e-d.left-d.right,f=f-d.top-d.bottom;var i=d3.time.scale().range([0,e]),j=d3.scale.linear().range([f,0]),k=d3.svg.axis().scale(i).orient("bottom"),l=d3.svg.axis().scale(j).orient("left"),m=d3.select(b[0]).append("svg").attr("preserveAspectRatio","xMinYMin").attr("viewBox","0 0 "+(e+d.left+d.right)+" "+(f+d.top+d.bottom)).append("g").attr("transform","translate("+d.left+","+d.top+")");m.append("g").attr("class","histo x axis "+h).attr("transform","translate(0,"+f+")").call(k),m.append("g").attr("class","histo y axis "+h).call(l).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".51em").style("text-anchor","end").text(g),a.$watch("bind",function(b){var d=a.duration||0,g=a.delay||0,n=a.field||c.bind.split(".").pop().toLowerCase(),o=a.interval||"day";if(b){b=b.entries||[];var p=e/b.length-2,q=864e5;switch(o.toLowerCase()){case"minute":q=6e4;break;case"hour":q=36e5;break;case"day":q=864e5;break;case"week":q=6048e5;break;case"month":q=263e7;break;case"year":q=3156e7}i.domain([d3.min(b,function(a){return a.time}),d3.max(b,function(a){return a.time})+q]),j.domain([0,d3.max(b,function(a){return a.count})]);var r=m.transition().duration(d),s=m.selectAll("rect").data(b,function(a){return Math.random()});s.enter().append("rect").attr("class","histo rect "+h).attr("cursor","pointer").attr("x",function(a){return i(a.time)}).attr("y",function(a){return f}).attr("width",p).transition().delay(function(a,b){return b*g}).duration(d).attr("height",function(a){return f-j(a.count)}).attr("y",function(a){return j(a.count)}),s.on("mousedown",function(b){a.$apply(function(){(a.onClick||angular.noop)(n,b.time)})}),s.exit().remove(),r.select(".x").call(k),r.select(".y").call(l)}},!0)}}}]),angular.module("dangle").directive("fsDonut",[function(){"use strict";return{restrict:"E",scope:{outerRadius:"=",innerRadius:"=",fontSize:"=",domain:"=",colorMap:"=",onClick:"=",bind:"=",duration:"@"},link:function(a,b,c){var d=a.outerRadius||200,e=a.innerRadius||0,f=(a.fontSize,c.fontColor,void 0);void 0==c.field&&(c.field=c.bind.split(".").pop().toLowerCase()),void 0===a.colorMap?(f=d3.scale.category20c(),void 0!==a.domain&&f.domain(a.domain)):f=function(b){return a.colorMap[b]};var g=3*d+30,h=d*(/Trident\/7\./.test(navigator.userAgent)&&a.$parent.inDashboard?.25:3),i=d3.svg.arc().outerRadius(d-10).innerRadius(e),j=d3.layout.pie().sort(null).value(function(a){return a.count}),k="xMinYMin meet";/Trident\/7\./.test(navigator.userAgent)&&a.$parent.inDashboard&&(k="xMinYMax meet");var l=d3.select(b[0]).append("svg").attr("preserveAspectRatio",k).attr("viewBox","0 0 "+g+" "+h),m=l.append("g").attr("transform","translate("+g/2+","+h/2+") rotate(180) scale(-1, -1)"),n=l.append("g").attr("class","label_group").attr("transform","translate("+g/2+","+h/2+")");a.$watch("bind",function(b){function e(a,b){var b=d3.interpolate(this._current,a);return this._current=b(0),function(a){return i(b(a))}}function g(a,b){var c=(this._current.startAngle+this._current.endAngle-Math.PI)/2,e=(a.startAngle+a.endAngle-Math.PI)/2,f=d3.interpolateNumber(c,e);return function(a){var b=f(a);return"translate("+Math.cos(b)*(d+o)+","+Math.sin(b)*(d+o)+")"}}var h=a.duration||0,k=function(a){return(a.startAngle+a.endAngle)/2<Math.PI?"beginning":"end"},o=14;if(b){b=b.terms||[];for(var p=j(b),q=0,r=0;r<b.length;r++)q+=b[r].count;if(q>0){var s=m.selectAll("path").data(p);s.enter().append("path").attr("d",i).attr("stroke","#fff").attr("stroke-width","1.5").attr("cursor","pointer").style("fill",function(a){return f(a.data.term)}).each(function(a){this._current=a}).on("mousedown",function(b){a.$apply(function(){(a.onClick||angular.noop)(c.field,b.data.term)})}),s.transition().duration(h).attrTween("d",e);var t=n.selectAll("line").data(p);t.enter().append("line").attr("x1",0).attr("x2",0).attr("y1",-d-3).attr("y2",-d-8).attr("stroke","grey").attr("stroke-width",2).attr("transform",function(a){return"rotate("+(a.startAngle+a.endAngle)/2*(180/Math.PI)+")"}).each(function(a){this._current=a}),t.transition().duration(750).attr("transform",function(a){return"rotate("+(a.startAngle+a.endAngle)/2*(180/Math.PI)+")"}),t.exit().remove();var u=n.selectAll("text.value").data(p).attr("dy",function(a){return(a.startAngle+a.endAngle)/2>Math.PI/2&&(a.startAngle+a.endAngle)/2<1.5*Math.PI?17:-17}).attr("text-anchor",k).text(function(a){return(a.value/q*100).toFixed(1)+"%"});u.enter().append("text").attr("class","value").attr("font-size",20).attr("font-weight","bold").attr("transform",function(a){return"translate("+Math.cos((a.startAngle+a.endAngle-Math.PI)/2)*(d+o)+","+Math.sin((a.startAngle+a.endAngle-Math.PI)/2)*(d+o)+")"}).attr("dy",function(a){return(a.startAngle+a.endAngle)/2>Math.PI/2&&(a.startAngle+a.endAngle)/2<1.5*Math.PI?17:-17}).attr("text-anchor",k).text(function(a){return(a.value/q*100).toFixed(1)+"%"}).each(function(a){this._current=a}),u.transition().duration(h).attrTween("transform",g),u.exit().remove();var v=n.selectAll("text.units").data(p).attr("dy",function(a){return(a.startAngle+a.endAngle)/2>Math.PI/2&&(a.startAngle+a.endAngle)/2<1.5*Math.PI?36:2}).attr("text-anchor",function(a){return(a.startAngle+a.endAngle)/2<Math.PI?"beginning":"end"}).text(function(a){return"T"===a.data.term?"TRUE ("+a.value+")":"F"===a.data.term?"FALSE ("+a.value+")":a.data.term+" ("+a.value+")"});v.enter().append("text").attr("class","units").attr("font-size",16).attr("stroke","none").attr("fill","#000").attr("transform",function(a){return"translate("+Math.cos((a.startAngle+a.endAngle-Math.PI)/2)*(d+o)+","+Math.sin((a.startAngle+a.endAngle-Math.PI)/2)*(d+o)+")"}).attr("dy",function(a){return(a.startAngle+a.endAngle)/2>Math.PI/2&&(a.startAngle+a.endAngle)/2<1.5*Math.PI?36:2}).attr("text-anchor",k).text(function(a){return"T"===a.data.term?"TRUE ("+a.value+")":"F"===a.data.term?"FALSE ("+a.value+")":a.data.term+" ("+a.value+")"}).each(function(a){this._current=a}),v.transition().duration(h).attrTween("transform",g),v.exit().remove()}else l.selectAll("path").remove(),n.selectAll("line").remove(),n.selectAll("text.value").remove(),n.selectAll("text.units").remove()}})}}}]),angular.module("dangle").directive("fsPie",[function(){"use strict";return{restrict:"E",scope:{outerRadius:"=",innerRadius:"=",fontSize:"=",domain:"=",colorMap:"=",onClick:"=",bind:"="},link:function(a,b,c){var d=a.outerRadius||200,e=a.innerRadius||0,f=a.fontSize||14,g=c.fontColor||"#fff",h=void 0;void 0==c.field&&(c.field=c.bind.split(".").pop().toLowerCase()),void 0==a.colorMap?(h=d3.scale.category20c(),void 0!==a.domain&&h.domain(a.domain)):h=function(b){return a.colorMap[b]};var i=d3.svg.arc().outerRadius(d-10).innerRadius(e),j=d3.layout.pie().sort(null).value(function(a){return a.count}),k=d3.select(b[0]).append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+2*d+" "+2*d).append("g").attr("transform","translate("+d+","+d+") rotate(180) scale(-1, -1)");a.$watch("bind",function(b){if(b){b=b.terms||[],k.selectAll("*").remove();var d=k.selectAll(".arc").data(j(b)).enter().append("g").attr("class","arc").on("mousedown",function(b){a.$apply(function(){(a.onClick||angular.noop)(c.field,b.data.term)})});d.append("path").attr("d",i).style("fill",function(a){return h(a.data.term)}),d.append("text").attr("transform",function(a){return"translate("+i.centroid(a)+")"}).attr("dy",".55em").style("text-anchor","middle").attr("fill",g).attr("font-size",f).text(function(a){return a.data.term})}})}}}]),d3.gantt=function(){function a(b){r(b),s();var d=d3.select("body").append("svg").attr("class","chart").attr("width",j+c.left+c.right).attr("height",i+c.top+c.bottom).append("g").attr("class","gantt-chart").attr("width",j+c.left+c.right).attr("height",i+c.top+c.bottom).attr("transform","translate("+c.left+", "+c.top+")");return d.selectAll(".chart").data(b,l).enter().append("rect").attr("rx",5).attr("ry",5).attr("class",function(a){return null==h[a.status]?"bar":h[a.status]}).attr("y",0).attr("transform",m).attr("height",function(a){return o.rangeBand()}).attr("width",function(a){return n(a.endDate)-n(a.startDate)}),d.append("g").attr("class","x axis").attr("transform","translate(0, "+(i-c.top-c.bottom)+")").transition().call(p),d.append("g").attr("class","y axis").transition().call(q),a}var b="fit",c={top:20,right:40,bottom:20,left:150},d=d3.time.day.offset(new Date,-3),e=d3.time.hour.offset(new Date,3),f=b,g=[],h=[],i=document.body.clientHeight-c.top-c.bottom-5,j=document.body.clientWidth-c.right-c.left-5,k="%H:%M",l=function(a){return a.startDate+a.taskName+a.endDate},m=function(a){return"translate("+n(a.startDate)+","+o(a.taskName)+")"},n=d3.time.scale().domain([d,e]).range([0,j]).clamp(!0),o=d3.scale.ordinal().domain(g).rangeRoundBands([0,i-c.top-c.bottom],.1),p=d3.svg.axis().scale(n).orient("bottom").tickFormat(d3.time.format(k)).tickSubdivide(!0).tickSize(8).tickPadding(8),q=d3.svg.axis().scale(o).orient("left").tickSize(0),r=function(a){if(f===b){if(void 0===a||a.length<1)return d=d3.time.day.offset(new Date,-3),void(e=d3.time.hour.offset(new Date,3));a.sort(function(a,b){return a.endDate-b.endDate}),e=a[a.length-1].endDate,a.sort(function(a,b){return a.startDate-b.startDate}),d=a[0].startDate}},s=function(){n=d3.time.scale().domain([d,e]).range([0,j]).clamp(!0),o=d3.scale.ordinal().domain(g).rangeRoundBands([0,i-c.top-c.bottom],.1),p=d3.svg.axis().scale(n).orient("bottom").tickFormat(d3.time.format(k)).tickSubdivide(!0).tickSize(8).tickPadding(8),q=d3.svg.axis().scale(o).orient("left").tickSize(0)};return a.redraw=function(b){r(b),s();var c=d3.select("svg"),d=c.select(".gantt-chart"),e=d.selectAll("rect").data(b,l);return e.enter().insert("rect",":first-child").attr("rx",5).attr("ry",5).attr("class",function(a){return null==h[a.status]?"bar":h[a.status]}).transition().attr("y",0).attr("transform",m).attr("height",function(a){return o.rangeBand()}).attr("width",function(a){return n(a.endDate)-n(a.startDate)}),e.transition().attr("transform",m).attr("height",function(a){return o.rangeBand()}).attr("width",function(a){return n(a.endDate)-n(a.startDate)}),e.exit().remove(),c.select(".x").transition().call(p),c.select(".y").transition().call(q),a},a.margin=function(b){return arguments.length?(c=b,a):c},a.timeDomain=function(b){return arguments.length?(d=+b[0],e=+b[1],a):[d,e]},a.timeDomainMode=function(b){return arguments.length?(f=b,a):f},a.taskTypes=function(b){return arguments.length?(g=b,a):g},a.taskStatus=function(b){return arguments.length?(h=b,a):h},a.width=function(b){return arguments.length?(j=+b,a):j},a.height=function(b){return arguments.length?(i=+b,a):i},a.tickFormat=function(b){return arguments.length?(k=b,a):k},a},window.CodeMirror=function(){"use strict";function a(c,d){if(!(this instanceof a))return new a(c,d);this.options=d=d||{};for(var e in Td)!d.hasOwnProperty(e)&&Td.hasOwnProperty(e)&&(d[e]=Td[e]);m(d);var f="string"==typeof d.value?0:d.value.first,g=this.display=b(c,f);g.wrapper.CodeMirror=this,j(this),d.autofocus&&!Bd&&ja(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new Nc},h(this),d.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");var i=d.value;"string"==typeof i&&(i=new de(d.value,d.mode)),ba(this,hc)(this,i),od&&setTimeout(Wc(ia,this,!0),20),la(this);var k;try{k=document.activeElement==g.input}catch(a){}k||d.autofocus&&!Bd?setTimeout(Wc(Ba,this),20):Ca(this),ba(this,function(){for(var a in Sd)Sd.propertyIsEnumerable(a)&&Sd[a](this,d[a],Ud);for(var b=0;b<Yd.length;++b)Yd[b](this)})()}function b(a,b){var c={},d=c.input=Zc("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");rd?d.style.width="1000px":d.setAttribute("wrap","off"),Ad&&(d.style.border="1px solid black"),d.setAttribute("autocorrect","off"),d.setAttribute("autocapitalize","off"),c.inputDiv=Zc("div",[d],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),c.scrollbarH=Zc("div",[Zc("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),c.scrollbarV=Zc("div",[Zc("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),c.scrollbarFiller=Zc("div",null,"CodeMirror-scrollbar-filler"),c.lineDiv=Zc("div"),c.selectionDiv=Zc("div",null,null,"position: relative; z-index: 1"),c.cursor=Zc("div"," ","CodeMirror-cursor"),c.otherCursor=Zc("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"),c.measure=Zc("div",null,"CodeMirror-measure"),c.lineSpace=Zc("div",[c.measure,c.selectionDiv,c.lineDiv,c.cursor,c.otherCursor],null,"position: relative; outline: none"),c.mover=Zc("div",[Zc("div",[c.lineSpace],"CodeMirror-lines")],null,"position: relative"),c.sizer=Zc("div",[c.mover],"CodeMirror-sizer"),c.heightForcer=Zc("div",null,null,"position: absolute; height: "+ie+"px; width: 1px;"),c.gutters=Zc("div",null,"CodeMirror-gutters"),c.lineGutter=null;var e=Zc("div",[c.sizer,c.heightForcer,c.gutters],null,"position: relative; min-height: 100%");return c.scroller=Zc("div",[e],"CodeMirror-scroll"),c.scroller.setAttribute("tabIndex","-1"),c.wrapper=Zc("div",[c.inputDiv,c.scrollbarH,c.scrollbarV,c.scrollbarFiller,c.scroller],"CodeMirror"),pd&&(c.gutters.style.zIndex=-1,c.scroller.style.paddingRight=0),a.appendChild?a.appendChild(c.wrapper):a(c.wrapper),Ad&&(d.style.width="0px"),rd||(c.scroller.draggable=!0),wd?(c.inputDiv.style.height="1px",c.inputDiv.style.position="absolute"):pd&&(c.scrollbarH.style.minWidth=c.scrollbarV.style.minWidth="18px"),c.viewOffset=c.lastSizeC=0,c.showingFrom=c.showingTo=b,c.lineNumWidth=c.lineNumInnerWidth=c.lineNumChars=null,c.prevInput="",c.alignWidgets=!1,c.pollingFast=!1,c.poll=new Nc,c.cachedCharWidth=c.cachedTextHeight=null,c.measureLineCache=[],c.measureLineCachePos=0,c.inaccurateSelection=!1,c.maxLine=null,c.maxLineLength=0,c.maxLineChanged=!1,c.wheelDX=c.wheelDY=c.wheelStartX=c.wheelStartY=null,c}function c(b){b.doc.mode=a.getMode(b.options,b.doc.modeOption),b.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null)}),b.doc.frontier=b.doc.first,F(b,100),b.state.modeGen++,b.curOp&&ea(b)}function d(a){a.options.lineWrapping?(a.display.wrapper.className+=" CodeMirror-wrap",a.display.sizer.style.minWidth=""):(a.display.wrapper.className=a.display.wrapper.className.replace(" CodeMirror-wrap",""),l(a)),f(a),ea(a),R(a),setTimeout(function(){n(a.display,a.doc.height)},100)}function e(a){var b=Z(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/$(a.display)-3);return function(e){return Kb(a.doc,e)?0:c?(Math.ceil(e.text.length/d)||1)*b:b}}function f(a){var b=a.doc,c=e(a);b.iter(function(a){var b=c(a);b!=a.height&&lc(a,b)})}function g(a){var b=$d[a.options.keyMap].style;a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(b?" cm-keymap-"+b:"")}function h(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-"),R(a)}function i(a){j(a),ea(a)}function j(a){var b=a.display.gutters,c=a.options.gutters;$c(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(Zc("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none"}function k(a,b){if(0==b.height)return 0;for(var c,d=b.text.length,e=b;c=Hb(e);){var f=c.find();e=ic(a,f.from.line),d+=f.from.ch-f.to.ch}for(e=b;c=Ib(e);){var f=c.find();d-=e.text.length-f.from.ch,e=ic(a,f.to.line),d+=e.text.length-f.to.ch}return d}function l(a){var b=a.display,c=a.doc;b.maxLine=ic(c,c.first),b.maxLineLength=k(c,b.maxLine),b.maxLineChanged=!0,c.iter(function(a){var d=k(c,a);d>b.maxLineLength&&(b.maxLineLength=d,b.maxLine=a)})}function m(a){for(var b=!1,c=0;c<a.gutters.length;++c)"CodeMirror-linenumbers"==a.gutters[c]&&(a.lineNumbers?b=!0:a.gutters.splice(c--,1));!b&&a.lineNumbers&&a.gutters.push("CodeMirror-linenumbers")}function n(a,b){var c=b+K(a);a.sizer.style.minHeight=a.heightForcer.style.top=c+"px";var d=Math.max(c,a.scroller.scrollHeight),e=a.scroller.scrollWidth>a.scroller.clientWidth,f=d>a.scroller.clientHeight;f?(a.scrollbarV.style.display="block",a.scrollbarV.style.bottom=e?cd(a.measure)+"px":"0",a.scrollbarV.firstChild.style.height=d-a.scroller.clientHeight+a.scrollbarV.clientHeight+"px"):a.scrollbarV.style.display="",e?(a.scrollbarH.style.display="block",a.scrollbarH.style.right=f?cd(a.measure)+"px":"0",a.scrollbarH.firstChild.style.width=a.scroller.scrollWidth-a.scroller.clientWidth+a.scrollbarH.clientWidth+"px"):a.scrollbarH.style.display="",e&&f?(a.scrollbarFiller.style.display="block",a.scrollbarFiller.style.height=a.scrollbarFiller.style.width=cd(a.measure)+"px"):a.scrollbarFiller.style.display="",xd&&0===cd(a.measure)&&(a.scrollbarV.style.minWidth=a.scrollbarH.style.minHeight=yd?"18px":"12px")}function o(a,b,c){var d=a.scroller.scrollTop,e=a.wrapper.clientHeight;"number"==typeof c?d=c:c&&(d=c.top,e=c.bottom-c.top),d=Math.floor(d-J(a));var f=Math.ceil(d+e);return{from:nc(b,d),to:nc(b,f)}}function p(a){var b=a.display;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var c=s(b)-b.scroller.scrollLeft+a.doc.scrollLeft,d=b.gutters.offsetWidth,e=c+"px",f=b.lineDiv.firstChild;f;f=f.nextSibling)if(f.alignable)for(var g=0,h=f.alignable;g<h.length;++g)h[g].style.left=e;a.options.fixedGutter&&(b.gutters.style.left=c+d+"px")}}function q(a){if(!a.options.lineNumbers)return!1;var b=a.doc,c=r(a.options,b.first+b.size-1),d=a.display;if(c.length!=d.lineNumChars){var e=d.measure.appendChild(Zc("div",[Zc("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt")),f=e.firstChild.offsetWidth,g=e.offsetWidth-f;return d.lineGutter.style.width="",d.lineNumInnerWidth=Math.max(f,d.lineGutter.offsetWidth-g),
d.lineNumWidth=d.lineNumInnerWidth+g,d.lineNumChars=d.lineNumInnerWidth?c.length:-1,d.lineGutter.style.width=d.lineNumWidth+"px",!0}return!1}function r(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function s(a){return bd(a.scroller).left-bd(a.sizer).left}function t(a,b,c){for(var d,e=a.display.showingFrom,f=a.display.showingTo,g=o(a.display,a.doc,c);u(a,b,g)&&(d=!0,Kc(a,"update",a),a.display.showingFrom==e&&a.display.showingTo==f||Kc(a,"viewportChange",a,a.display.showingFrom,a.display.showingTo),B(a),n(a.display,a.doc.height),c&&(c=Math.min(a.display.scroller.scrollHeight-a.display.scroller.clientHeight,"number"==typeof c?c:c.top)),g=o(a.display,a.doc,c),!(g.from>=a.display.showingFrom&&g.to<=a.display.showingTo));)b=[];return d}function u(a,b,c){var d=a.display,e=a.doc;if(!d.wrapper.clientWidth)return d.showingFrom=d.showingTo=e.first,void(d.viewOffset=0);if(!(0==b.length&&c.from>d.showingFrom&&c.to<d.showingTo)){q(a)&&(b=[{from:e.first,to:e.first+e.size}]);var f=d.sizer.style.marginLeft=d.gutters.offsetWidth+"px";d.scrollbarH.style.left=a.options.fixedGutter?f:"0";var g=1/0;if(a.options.lineNumbers)for(var h=0;h<b.length;++h)if(b[h].diff){g=b[h].from;break}var i=e.first+e.size,j=Math.max(c.from-a.options.viewportMargin,e.first),k=Math.min(i,c.to+a.options.viewportMargin);if(d.showingFrom<j&&j-d.showingFrom<20&&(j=Math.max(e.first,d.showingFrom)),d.showingTo>k&&d.showingTo-k<20&&(k=Math.min(i,d.showingTo)),Ld)for(j=mc(Jb(e,ic(e,j)));k<i&&Kb(e,ic(e,k));)++k;var l=[{from:Math.max(d.showingFrom,e.first),to:Math.min(d.showingTo,i)}];if(l=l[0].from>=l[0].to?[]:w(l,b),Ld)for(var h=0;h<l.length;++h)for(var m,n=l[h];m=Ib(ic(e,n.to-1));){var o=m.find().from.line;if(!(o>n.from)){l.splice(h--,1);break}n.to=o}for(var p=0,h=0;h<l.length;++h){var n=l[h];n.from<j&&(n.from=j),n.to>k&&(n.to=k),n.from>=n.to?l.splice(h--,1):p+=n.to-n.from}if(p==k-j&&j==d.showingFrom&&k==d.showingTo)return void v(a);l.sort(function(a,b){return a.from-b.from});try{var r=document.activeElement}catch(a){}p<.7*(k-j)&&(d.lineDiv.style.display="none"),y(a,j,k,l,g),d.lineDiv.style.display="",r&&document.activeElement!=r&&r.offsetHeight&&r.focus();(j!=d.showingFrom||k!=d.showingTo||d.lastSizeC!=d.wrapper.clientHeight)&&(d.lastSizeC=d.wrapper.clientHeight),d.showingFrom=j,d.showingTo=k,F(a,100);for(var s,t=d.lineDiv.offsetTop,u=d.lineDiv.firstChild;u;u=u.nextSibling)if(u.lineObj){if(pd){var x=u.offsetTop+u.offsetHeight;s=x-t,t=x}else{var z=bd(u);s=z.bottom-z.top}var A=u.lineObj.height-s;if(s<2&&(s=Z(d)),A>.001||A<-.001){lc(u.lineObj,s);var B=u.lineObj.widgets;if(B)for(var h=0;h<B.length;++h)B[h].height=B[h].node.offsetHeight}}return v(a),!0}}function v(a){var b=a.display.viewOffset=oc(a,ic(a.doc,a.display.showingFrom));a.display.mover.style.top=b+"px"}function w(a,b){for(var c=0,d=b.length||0;c<d;++c){for(var e=b[c],f=[],g=e.diff||0,h=0,i=a.length;h<i;++h){var j=a[h];e.to<=j.from&&e.diff?f.push({from:j.from+g,to:j.to+g}):e.to<=j.from||e.from>=j.to?f.push(j):(e.from>j.from&&f.push({from:j.from,to:e.from}),e.to<j.to&&f.push({from:e.to+g,to:j.to+g}))}a=f}return a}function x(a){for(var b=a.display,c={},d={},e=b.gutters.firstChild,f=0;e;e=e.nextSibling,++f)c[a.options.gutters[f]]=e.offsetLeft,d[a.options.gutters[f]]=e.offsetWidth;return{fixedPos:s(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function y(a,b,c,d,e){function f(b){var c=b.nextSibling;return rd&&Cd&&a.display.currentWheelTarget==b?(b.style.display="none",b.lineObj=null):b.parentNode.removeChild(b),c}var g=x(a),h=a.display,i=a.options.lineNumbers;d.length||rd&&a.display.currentWheelTarget||$c(h.lineDiv);var j=h.lineDiv,k=j.firstChild,l=d.shift(),m=b;for(a.doc.iter(b,c,function(b){if(l&&l.to==m&&(l=d.shift()),Kb(a.doc,b)){if(0!=b.height&&lc(b,0),b.widgets&&k.previousSibling)for(var c=0;c<b.widgets.length;++c)if(b.widgets[c].showIfHidden){var h=k.previousSibling;if(/pre/i.test(h.nodeName)){var n=Zc("div",null,null,"position: relative");h.parentNode.replaceChild(n,h),n.appendChild(h),h=n}var o=h.appendChild(Zc("div",[b.widgets[c].node],"CodeMirror-linewidget"));A(b.widgets[c],o,h,g)}}else if(l&&l.from<=m&&l.to>m){for(;k.lineObj!=b;)k=f(k);i&&e<=m&&k.lineNumber&&ad(k.lineNumber,r(a.options,m)),k=k.nextSibling}else{if(b.widgets)for(var p,q=0,s=k;s&&q<20;++q,s=s.nextSibling)if(s.lineObj==b&&/div/i.test(s.nodeName)){p=s;break}var t=z(a,b,m,g,p);if(t!=p)j.insertBefore(t,k);else{for(;k!=p;)k=f(k);k=k.nextSibling}t.lineObj=b}++m});k;)k=f(k)}function z(a,b,c,d,e){var f,g=Zb(a,b),h=b.gutterMarkers,i=a.display;if(!(a.options.lineNumbers||h||b.bgClass||b.wrapClass||b.widgets))return g;if(e){e.alignable=null;for(var j,k=!0,l=0,m=e.firstChild;m;m=j)if(j=m.nextSibling,/\bCodeMirror-linewidget\b/.test(m.className)){for(var n=0,o=!0;n<b.widgets.length;++n){var p=b.widgets[n],q=!1;if(p.above||(q=o,o=!1),p.node==m.firstChild){A(p,m,e,d),++l,q&&e.insertBefore(g,m);break}}if(n==b.widgets.length){k=!1;break}}else e.removeChild(m);k&&l==b.widgets.length&&(f=e,e.className=b.wrapClass||"")}if(f||(f=Zc("div",null,b.wrapClass,"position: relative"),f.appendChild(g)),b.bgClass&&f.insertBefore(Zc("div",null,b.bgClass+" CodeMirror-linebackground"),f.firstChild),a.options.lineNumbers||h){var s=f.insertBefore(Zc("div",null,null,"position: absolute; left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px"),f.firstChild);if(a.options.fixedGutter&&(f.alignable||(f.alignable=[])).push(s),!a.options.lineNumbers||h&&h["CodeMirror-linenumbers"]||(f.lineNumber=s.appendChild(Zc("div",r(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+i.lineNumInnerWidth+"px"))),h)for(var t=0;t<a.options.gutters.length;++t){var u=a.options.gutters[t],v=h.hasOwnProperty(u)&&h[u];v&&s.appendChild(Zc("div",[v],"CodeMirror-gutter-elt","left: "+d.gutterLeft[u]+"px; width: "+d.gutterWidth[u]+"px"))}}if(pd&&(f.style.zIndex=2),b.widgets&&f!=e)for(var n=0,w=b.widgets;n<w.length;++n){var p=w[n],x=Zc("div",[p.node],"CodeMirror-linewidget");A(p,x,f,d),p.above?f.insertBefore(x,a.options.lineNumbers&&0!=b.height?s:g):f.appendChild(x),Kc(p,"redraw")}return f}function A(a,b,c,d){if(a.noHScroll){(c.alignable||(c.alignable=[])).push(b);var e=d.wrapperWidth;b.style.left=d.fixedPos+"px",a.coverGutter||(e-=d.gutterTotalWidth,b.style.paddingLeft=d.gutterTotalWidth+"px"),b.style.width=e+"px"}a.coverGutter&&(b.style.zIndex=5,b.style.position="relative",a.noHScroll||(b.style.marginLeft=-d.gutterTotalWidth+"px"))}function B(a){var b=a.display,c=Qa(a.doc.sel.from,a.doc.sel.to);if(c||a.options.showCursorWhenSelecting?C(a):b.cursor.style.display=b.otherCursor.style.display="none",c?b.selectionDiv.style.display="none":D(a),a.options.moveInputWithCursor){var d=V(a,a.doc.sel.head,"div"),e=bd(b.wrapper),f=bd(b.lineDiv);b.inputDiv.style.top=Math.max(0,Math.min(b.wrapper.clientHeight-10,d.top+f.top-e.top))+"px",b.inputDiv.style.left=Math.max(0,Math.min(b.wrapper.clientWidth-10,d.left+f.left-e.left))+"px"}}function C(a){var b=a.display,c=V(a,a.doc.sel.head,"div");b.cursor.style.left=c.left+"px",b.cursor.style.top=c.top+"px",b.cursor.style.height=Math.max(0,c.bottom-c.top)*a.options.cursorHeight+"px",b.cursor.style.display="",c.other?(b.otherCursor.style.display="",b.otherCursor.style.left=c.other.left+"px",b.otherCursor.style.top=c.other.top+"px",b.otherCursor.style.height=.85*(c.other.bottom-c.other.top)+"px"):b.otherCursor.style.display="none"}function D(a){function b(a,b,c,d){b<0&&(b=0),g.appendChild(Zc("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+b+"px; width: "+(null==c?h-a:c)+"px; height: "+(d-b)+"px"))}function c(c,d,f,g){function j(b){return U(a,Pa(c,b),"div",k)}var k=ic(e,c),l=k.text.length,m=g?1/0:-1/0;return ed(pc(k),d||0,null==f?l:f,function(a,c,e){var k,n,o,p=j(a);if(a==c)k=p,n=o=p.left;else{if(k=j(c-1),"rtl"==e){var q=p;p=k,k=q}n=p.left,o=k.right}k.top-p.top>3&&(b(n,p.top,null,p.bottom),n=i,p.bottom<k.top&&b(n,p.bottom,null,k.top)),null==f&&c==l&&(o=h),null==d&&0==a&&(n=i),m=g?Math.min(k.top,m):Math.max(k.bottom,m),n<i+1&&(n=i),b(n,k.top,o-n,k.bottom)}),m}var d=a.display,e=a.doc,f=a.doc.sel,g=document.createDocumentFragment(),h=d.lineSpace.offsetWidth,i=L(a.display);if(f.from.line==f.to.line)c(f.from.line,f.from.ch,f.to.ch);else{for(var j,k,l=ic(e,f.from.line),m=l,n=[f.from.line,f.from.ch];j=Ib(m);){var o=j.find();if(n.push(o.from.ch,o.to.line,o.to.ch),o.to.line==f.to.line){n.push(f.to.ch),k=!0;break}m=ic(e,o.to.line)}if(k)for(var p=0;p<n.length;p+=3)c(n[p],n[p+1],n[p+2]);else{var q,r,s=ic(e,f.to.line);q=f.from.ch?c(f.from.line,f.from.ch,null,!1):oc(a,l)-d.viewOffset,r=f.to.ch?c(f.to.line,Hb(s)?null:0,f.to.ch,!0):oc(a,s)-d.viewOffset,q<r&&b(i,q,null,r)}}_c(d.selectionDiv,g),d.selectionDiv.style.display=""}function E(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursor.style.visibility=b.otherCursor.style.visibility="",b.blinker=setInterval(function(){b.cursor.style.visibility=b.otherCursor.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate)}}function F(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.showingTo&&a.state.highlight.set(b,Wc(G,a))}function G(a){var b=a.doc;if(b.frontier<b.first&&(b.frontier=b.first),!(b.frontier>=a.display.showingTo)){var c,d=+new Date+a.options.workTime,e=nb(b.mode,I(a,b.frontier)),f=[];b.iter(b.frontier,Math.min(b.first+b.size,a.display.showingTo+500),function(g){if(b.frontier>=a.display.showingFrom){var h=g.styles;g.styles=Vb(a,g,e);for(var i=!h||h.length!=g.styles.length,j=0;!i&&j<h.length;++j)i=h[j]!=g.styles[j];i&&(c&&c.end==b.frontier?c.end++:f.push(c={start:b.frontier,end:b.frontier+1})),g.stateAfter=nb(b.mode,e)}else Xb(a,g,e),g.stateAfter=b.frontier%5==0?nb(b.mode,e):null;if(++b.frontier,+new Date>d)return F(a,a.options.workDelay),!0}),f.length&&ba(a,function(){for(var a=0;a<f.length;++a)ea(this,f[a].start,f[a].end)})()}}function H(a,b){for(var c,d,e=a.doc,f=b,g=b-100;f>g;--f){if(f<=e.first)return e.first;var h=ic(e,f-1);if(h.stateAfter)return f;var i=Oc(h.text,null,a.options.tabSize);(null==d||c>i)&&(d=f-1,c=i)}return d}function I(a,b){var c=a.doc,d=a.display;if(!c.mode.startState)return!0;var e=H(a,b),f=e>c.first&&ic(c,e-1).stateAfter;return f=f?nb(c.mode,f):ob(c.mode),c.iter(e,b,function(g){Xb(a,g,f);var h=e==b-1||e%5==0||e>=d.showingFrom&&e<d.showingTo;g.stateAfter=h?nb(c.mode,f):null,++e}),f}function J(a){return a.lineSpace.offsetTop}function K(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function L(a){return _c(a.measure,Zc("pre",null,null,"text-align: left")).appendChild(Zc("span","x")).offsetLeft}function M(a,b,c,d){var e=-1;d=d||O(a,b);for(var f=c;;f+=e){var g=d[f];if(g)break;e<0&&0==f&&(e=1)}return{left:f<c?g.right:g.left,right:f>c?g.left:g.right,top:g.top,bottom:g.bottom}}function N(a,b){for(var c=a.display.measureLineCache,d=0;d<c.length;++d){var e=c[d];if(e.text==b.text&&e.markedSpans==b.markedSpans&&a.display.scroller.clientWidth==e.width&&e.classes==b.textClass+"|"+b.bgClass+"|"+b.wrapClass)return e.measure}}function O(a,b){var c=N(a,b);if(!c){c=P(a,b);var d=a.display.measureLineCache,e={text:b.text,width:a.display.scroller.clientWidth,markedSpans:b.markedSpans,measure:c,classes:b.textClass+"|"+b.bgClass+"|"+b.wrapClass};16==d.length?d[++a.display.measureLineCachePos%16]=e:d.push(e)}return c}function P(a,b){var c=a.display,d=Vc(b.text.length),e=Zb(a,b,d);if(od&&!pd&&!a.options.lineWrapping&&e.childNodes.length>100){for(var f=document.createDocumentFragment(),g=10,h=e.childNodes.length,i=0,j=Math.ceil(h/g);i<j;++i){for(var k=Zc("div",null,null,"display: inline-block"),l=0;l<g&&h;++l)k.appendChild(e.firstChild),--h;f.appendChild(k)}e.appendChild(f)}_c(c.measure,e);var m=bd(c.lineDiv),n=[],o=Vc(b.text.length),p=e.offsetHeight;qd&&c.measure.first!=e&&_c(c.measure,e);for(var q,i=0;i<d.length;++i)if(q=d[i]){for(var r=bd(q),s=Math.max(0,r.top-m.top),t=Math.min(r.bottom-m.top,p),l=0;l<n.length;l+=2){var u=n[l],v=n[l+1];if(!(u>t||v<s)&&(u<=s&&v>=t||s<=u&&t>=v||Math.min(t,v)-Math.max(s,u)>=t-s>>1)){n[l]=Math.min(s,u),n[l+1]=Math.max(t,v);break}}l==n.length&&n.push(s,t);var w=r.right;q.measureRight&&(w=bd(q.measureRight).left),o[i]={left:r.left-m.left,right:w-m.left,top:l}}for(var q,i=0;i<o.length;++i)if(q=o[i]){var x=q.top;q.top=n[x],q.bottom=n[x+1]}return o}function Q(a,b){var c=!1;if(b.markedSpans)for(var d=0;d<b.markedSpans;++d){var e=b.markedSpans[d];!e.collapsed||null!=e.to&&e.to!=b.text.length||(c=!0)}var f=!c&&N(a,b);if(f)return M(a,b,b.text.length,f).right;var g=Zb(a,b),h=g.appendChild(dd(a.display.measure));return _c(a.display.measure,g),bd(h).right-bd(a.display.lineDiv).left}function R(a){a.display.measureLineCache.length=a.display.measureLineCachePos=0,a.display.cachedCharWidth=a.display.cachedTextHeight=null,a.options.lineWrapping||(a.display.maxLineChanged=!0),a.display.lineNumChars=null}function S(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=Pb(b.widgets[e]);c.top+=f,c.bottom+=f}if("line"==d)return c;d||(d="local");var g=oc(a,b);if("local"!=d&&(g-=a.display.viewOffset),"page"==d){var h=bd(a.display.lineSpace);g+=h.top+(window.pageYOffset||(document.documentElement||document.body).scrollTop);var i=h.left+(window.pageXOffset||(document.documentElement||document.body).scrollLeft);c.left+=i,c.right+=i}return c.top+=g,c.bottom+=g,c}function T(a,b,c){if("div"==c)return b;var d=b.left,e=b.top;"page"==c&&(d-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,e-=window.pageYOffset||(document.documentElement||document.body).scrollTop);var f=bd(a.display.lineSpace);if(d-=f.left,e-=f.top,"local"==c||!c){var g=bd(a.display.wrapper);d+=g.left,e+=g.top}return{left:d,top:e}}function U(a,b,c,d){return d||(d=ic(a.doc,b.line)),S(a,d,M(a,d,b.ch),c)}function V(a,b,c,d,e){function f(b,f){var g=M(a,d,b,e);return f?g.left=g.right:g.right=g.left,S(a,d,g,c)}d=d||ic(a.doc,b.line),e||(e=O(a,d));var g=pc(d),h=b.ch;if(!g)return f(h);for(var i,j,k=g[0].level,l=0;l<g.length;++l){var m,n,o=g[l],p=o.level%2;if(o.from<h&&o.to>h)return f(h,p);var q=p?o.to:o.from,r=p?o.from:o.to;if(q==h)n=l&&o.level<(m=g[l-1]).level?f(m.level%2?m.from:m.to-1,!0):f(p&&o.from!=o.to?h-1:h),p==k?i=n:j=n;else if(r==h){var m=l<g.length-1&&g[l+1];if(!p&&m&&m.from==m.to)continue;n=m&&o.level<m.level?f(m.level%2?m.to-1:m.from):f(p?h:h-1,!0),p==k?i=n:j=n}}return k&&!h&&(j=f(g[0].to-1)),i?(j&&(i.other=j),i):j}function W(a,b,c){var d=new Pa(a,b);return c&&(d.outside=!0),d}function X(a,b,c){var d=a.doc;if((c+=a.display.viewOffset)<0)return W(d.first,0,!0);var e=nc(d,c),f=d.first+d.size-1;if(e>f)return W(d.first+d.size-1,ic(d,f).text.length,!0);for(b<0&&(b=0);;){var g=ic(d,e),h=Y(a,g,e,b,c),i=Ib(g),j=i&&i.find();if(!(i&&h.ch>=j.from.ch))return h;e=j.to.line}}function Y(a,b,c,d,e){function f(d){var e=V(a,Pa(c,d),"line",b,j);return h=!0,g>e.bottom?e.left-i:g<e.top?e.left+i:(h=!1,e.left)}var g=e-oc(a,b),h=!1,i=2*a.display.wrapper.clientWidth,j=O(a,b),k=pc(b),l=b.text.length,m=hd(b),n=id(b),o=f(m),p=h,q=f(n),r=h;if(d>q)return W(c,n,r);for(;;){if(k?n==m||n==ld(b,m,1):n-m<=1){for(var s=d-o<q-d,t=s?m:n;me.test(b.text.charAt(t));)++t;var u=W(c,t,s?p:r);return u.after=s,u}var v=Math.ceil(l/2),w=m+v;if(k){w=m;for(var x=0;x<v;++x)w=ld(b,w,1)}var y=f(w);y>d?(n=w,q=y,(r=h)&&(q+=1e3),l=v):(m=w,o=y,p=h,l-=v)}}function Z(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==Fd){Fd=Zc("pre");for(var b=0;b<49;++b)Fd.appendChild(document.createTextNode("x")),Fd.appendChild(Zc("br"));Fd.appendChild(document.createTextNode("x"))}_c(a.measure,Fd);var c=Fd.offsetHeight/50;return c>3&&(a.cachedTextHeight=c),$c(a.measure),c||1}function $(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=Zc("span","x"),c=Zc("pre",[b]);_c(a.measure,c);var d=b.offsetWidth;return d>2&&(a.cachedCharWidth=d),d||10}function _(a){a.curOp={changes:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++Md},he++||(ge=[])}function aa(a){var b=a.curOp,c=a.doc,d=a.display;if(a.curOp=null,b.updateMaxLine&&l(a),d.maxLineChanged&&!a.options.lineWrapping&&d.maxLine){var e=Q(a,d.maxLine);d.sizer.style.minWidth=Math.max(0,e+3+ie)+"px",d.maxLineChanged=!1;var f=Math.max(0,d.sizer.offsetLeft+d.sizer.offsetWidth-d.scroller.clientWidth);f<c.scrollLeft&&!b.updateScrollPos&&ta(a,Math.min(d.scroller.scrollLeft,f),!0)}var g,h;if(b.updateScrollPos)g=b.updateScrollPos;else if(b.selectionChanged&&d.scroller.clientHeight){var i=V(a,c.sel.head);g=db(a,i.left,i.top,i.left,i.bottom)}(b.changes.length||g&&null!=g.scrollTop)&&(h=t(a,b.changes,g&&g.scrollTop),a.display.scroller.offsetHeight&&(a.doc.scrollTop=a.display.scroller.scrollTop)),!h&&b.selectionChanged&&B(a),b.updateScrollPos?(d.scroller.scrollTop=d.scrollbarV.scrollTop=c.scrollTop=g.scrollTop,d.scroller.scrollLeft=d.scrollbarH.scrollLeft=c.scrollLeft=g.scrollLeft,p(a),b.scrollToPos&&bb(a,Ua(a.doc,b.scrollToPos),b.scrollToPosMargin)):g&&ab(a),b.selectionChanged&&E(a),a.state.focused&&b.updateInput&&ia(a,b.userSelChange);var j=b.maybeHiddenMarkers,k=b.maybeUnhiddenMarkers;if(j)for(var m=0;m<j.length;++m)j[m].lines.length||Jc(j[m],"hide");if(k)for(var m=0;m<k.length;++m)k[m].lines.length&&Jc(k[m],"unhide");var n;if(--he||(n=ge,ge=null),b.textChanged&&Jc(a,"change",a,b.textChanged),b.cursorActivity&&Jc(a,"cursorActivity",a),n)for(var m=0;m<n.length;++m)n[m]()}function ba(a,b){return function(){var c=a||this,d=!c.curOp;d&&_(c);try{var e=b.apply(c,arguments)}finally{d&&aa(c)}return e}}function ca(a){return function(){var b,c=this.cm&&!this.cm.curOp;c&&_(this.cm);try{b=a.apply(this,arguments)}finally{c&&aa(this.cm)}return b}}function da(a,b){var c,d=!a.curOp;d&&_(a);try{c=b()}finally{d&&aa(a)}return c}function ea(a,b,c,d){null==b&&(b=a.doc.first),null==c&&(c=a.doc.first+a.doc.size),a.curOp.changes.push({from:b,to:c,diff:d})}function fa(a){a.display.pollingFast||a.display.poll.set(a.options.pollInterval,function(){ha(a),a.state.focused&&fa(a)})}function ga(a){function b(){ha(a)||c?(a.display.pollingFast=!1,fa(a)):(c=!0,a.display.poll.set(60,b))}var c=!1;a.display.pollingFast=!0,a.display.poll.set(20,b)}function ha(a){var b=a.display.input,c=a.display.prevInput,d=a.doc,e=d.sel;if(!a.state.focused||se(b)||ka(a))return!1;var f=b.value;if(f==c&&Qa(e.from,e.to))return!1;if(od&&!qd&&a.display.inputHasSelection===f)return ia(a,!0),!1;var g=!a.curOp;g&&_(a),e.shift=!1;for(var h=0,i=Math.min(c.length,f.length);h<i&&c.charCodeAt(h)==f.charCodeAt(h);)++h;var j=e.from,k=e.to;h<c.length?j=Pa(j.line,j.ch-(c.length-h)):a.state.overwrite&&Qa(j,k)&&!a.state.pasteIncoming&&(k=Pa(k.line,Math.min(ic(d,k.line).text.length,k.ch+(f.length-h))));var l=a.curOp.updateInput;return Ia(a.doc,{from:j,to:k,text:re(f.slice(h)),origin:a.state.pasteIncoming?"paste":"+input"},"end"),a.curOp.updateInput=l,f.length>1e3||f.indexOf("\n")>-1?b.value=a.display.prevInput="":a.display.prevInput=f,g&&aa(a),a.state.pasteIncoming=!1,!0}function ia(a,b){var c,d,e=a.doc;if(Qa(e.sel.from,e.sel.to))b&&(a.display.prevInput=a.display.input.value="",od&&!qd&&(a.display.inputHasSelection=null));else{a.display.prevInput="",c=te&&(e.sel.to.line-e.sel.from.line>100||(d=a.getSelection()).length>1e3);var f=c?"-":d||a.getSelection();a.display.input.value=f,a.state.focused&&Rc(a.display.input),od&&!qd&&(a.display.inputHasSelection=f)}a.display.inaccurateSelection=c}function ja(a){"nocursor"==a.options.readOnly||Bd&&document.activeElement==a.display.input||a.display.input.focus()}function ka(a){return a.options.readOnly||a.doc.cantEdit}function la(a){function b(){a.state.focused&&setTimeout(Wc(ja,a),0)}function c(){g.cachedCharWidth=g.cachedTextHeight=null,R(a),da(a,Wc(ea,a))}function d(){for(var a=g.wrapper.parentNode;a&&a!=document.body;a=a.parentNode);a?setTimeout(d,5e3):Ic(window,"resize",c)}function e(b){a.options.onDragEvent&&a.options.onDragEvent(a,Bc(b))||Ec(b)}function f(){g.inaccurateSelection&&(g.prevInput="",g.inaccurateSelection=!1,g.input.value=a.getSelection(),Rc(g.input))}var g=a.display;Hc(g.scroller,"mousedown",ba(a,oa)),od?Hc(g.scroller,"dblclick",ba(a,function(b){var c=na(a,b);if(c&&!qa(a,b)&&!ma(a.display,b)){Cc(b);var d=kb(ic(a.doc,c.line).text,c);Xa(a.doc,d.from,d.to)}})):Hc(g.scroller,"dblclick",Cc),Hc(g.lineSpace,"selectstart",function(a){ma(g,a)||Cc(a)}),Jd||Hc(g.scroller,"contextmenu",function(b){Da(a,b)}),Hc(g.scroller,"scroll",function(){g.scroller.clientHeight&&(sa(a,g.scroller.scrollTop),ta(a,g.scroller.scrollLeft,!0),Jc(a,"scroll",a))}),Hc(g.scrollbarV,"scroll",function(){g.scroller.clientHeight&&sa(a,g.scrollbarV.scrollTop)}),Hc(g.scrollbarH,"scroll",function(){g.scroller.clientHeight&&ta(a,g.scrollbarH.scrollLeft)}),Hc(g.scroller,"mousewheel",function(b){ua(a,b)}),Hc(g.scroller,"DOMMouseScroll",function(b){ua(a,b)}),Hc(g.scrollbarH,"mousedown",b),Hc(g.scrollbarV,"mousedown",b),Hc(g.wrapper,"scroll",function(){g.wrapper.scrollTop=g.wrapper.scrollLeft=0}),Hc(window,"resize",c),setTimeout(d,5e3),Hc(g.input,"keyup",ba(a,function(b){a.options.onKeyEvent&&a.options.onKeyEvent(a,Bc(b))||16==b.keyCode&&(a.doc.sel.shift=!1)})),Hc(g.input,"input",Wc(ga,a)),Hc(g.input,"keydown",ba(a,za)),Hc(g.input,"keypress",ba(a,Aa)),Hc(g.input,"focus",Wc(Ba,a)),Hc(g.input,"blur",Wc(Ca,a)),a.options.dragDrop&&(Hc(g.scroller,"dragstart",function(b){ra(a,b)}),Hc(g.scroller,"dragenter",e),Hc(g.scroller,"dragover",e),Hc(g.scroller,"drop",ba(a,pa))),Hc(g.scroller,"paste",function(b){ma(g,b)||(ja(a),ga(a))}),Hc(g.input,"paste",function(){a.state.pasteIncoming=!0,ga(a)}),Hc(g.input,"cut",f),Hc(g.input,"copy",f),wd&&Hc(g.sizer,"mouseup",function(){document.activeElement==g.input&&g.input.blur(),ja(a)})}function ma(a,b){for(var c=Fc(b);c!=a.wrapper;c=c.parentNode){if(!c)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(c.className)||c.parentNode==a.sizer&&c!=a.mover)return!0}}function na(a,b,c){var d=a.display;if(!c){var e=Fc(b);if(e==d.scrollbarH||e==d.scrollbarH.firstChild||e==d.scrollbarV||e==d.scrollbarV.firstChild||e==d.scrollbarFiller)return null}var f,g,h=bd(d.lineSpace);try{f=b.clientX,g=b.clientY}catch(b){return null}return X(a,f-h.left,g-h.top)}function oa(a){function b(a){if(!Qa(r,a)){if(r=a,"single"==k)return void Xa(e.doc,Ua(g,i),a);if(p=Ua(g,p),q=Ua(g,q),"double"==k){var b=kb(ic(g,a.line).text,a);Ra(a,p)?Xa(e.doc,b.from,q):Xa(e.doc,p,b.to)}else"triple"==k&&(Ra(a,p)?Xa(e.doc,q,Ua(g,Pa(a.line,0))):Xa(e.doc,p,Ua(g,Pa(a.line+1,0))))}}function c(a){var d=++t,h=na(e,a,!0);if(h)if(Qa(h,m)){var i=a.clientY<s.top?-20:a.clientY>s.bottom?20:0;i&&setTimeout(ba(e,function(){t==d&&(f.scroller.scrollTop+=i,c(a))}),50)}else{e.state.focused||Ba(e),m=h,b(h);var j=o(f,g);(h.line>=j.to||h.line<j.from)&&setTimeout(ba(e,function(){t==d&&c(a)}),150)}}function d(a){t=1/0;var c=na(e,a);c&&b(c),Cc(a),ja(e),Ic(document,"mousemove",u),Ic(document,"mouseup",v)}var e=this,f=e.display,g=e.doc,h=g.sel;if(h.shift=a.shiftKey,ma(f,a))return void(rd||(f.scroller.draggable=!1,setTimeout(function(){f.scroller.draggable=!0},100)));if(!qa(e,a)){var i=na(e,a);switch(Gc(a)){case 3:return void(Jd&&Da.call(e,e,a));case 2:return i&&Xa(e.doc,i),setTimeout(Wc(ja,e),20),void Cc(a)}if(!i)return void(Fc(a)==f.scroller&&Cc(a));e.state.focused||Ba(e);var j=+new Date,k="single";if(Hd&&Hd.time>j-400&&Qa(Hd.pos,i))k="triple",Cc(a),setTimeout(Wc(ja,e),20),lb(e,i.line);else if(Gd&&Gd.time>j-400&&Qa(Gd.pos,i)){k="double",Hd={time:j,pos:i},Cc(a);var l=kb(ic(g,i.line).text,i);Xa(e.doc,l.from,l.to)}else Gd={time:j,pos:i};var m=i;if(e.options.dragDrop&&ne&&!ka(e)&&!Qa(h.from,h.to)&&!Ra(i,h.from)&&!Ra(h.to,i)&&"single"==k){var n=ba(e,function(b){rd&&(f.scroller.draggable=!1),e.state.draggingText=!1,Ic(document,"mouseup",n),Ic(f.scroller,"drop",n),Math.abs(a.clientX-b.clientX)+Math.abs(a.clientY-b.clientY)<10&&(Cc(b),Xa(e.doc,i),ja(e))});return rd&&(f.scroller.draggable=!0),e.state.draggingText=n,f.scroller.dragDrop&&f.scroller.dragDrop(),Hc(document,"mouseup",n),void Hc(f.scroller,"drop",n)}Cc(a),"single"==k&&Xa(e.doc,Ua(g,i));var p=h.from,q=h.to,r=i,s=bd(f.wrapper),t=0,u=ba(e,function(a){od||Gc(a)?c(a):d(a)}),v=ba(e,d);Hc(document,"mousemove",u),Hc(document,"mouseup",v)}}function pa(a){var b=this;if(!(ma(b.display,a)||b.options.onDragEvent&&b.options.onDragEvent(b,Bc(a)))){Cc(a);var c=na(b,a,!0),d=a.dataTransfer.files;if(c&&!ka(b))if(d&&d.length&&window.FileReader&&window.File)for(var e=d.length,f=Array(e),g=0,h=function(a,d){var h=new FileReader;h.onload=function(){f[d]=h.result,++g==e&&(c=Ua(b.doc,c),Ia(b.doc,{from:c,to:c,text:re(f.join("\n")),origin:"paste"},"around"))},h.readAsText(a)},i=0;i<e;++i)h(d[i],i);else{if(b.state.draggingText&&!Ra(c,b.doc.sel.from)&&!Ra(b.doc.sel.to,c))return b.state.draggingText(a),void setTimeout(Wc(ja,b),20);try{var f=a.dataTransfer.getData("Text");if(f){var j=b.doc.sel.from,k=b.doc.sel.to;Za(b.doc,c,c),b.state.draggingText&&Oa(b.doc,"",j,k,"paste"),b.replaceSelection(f,null,"paste"),ja(b),Ba(b)}}catch(a){}}}}function qa(a,b){var c=a.display;try{var d=b.clientX,e=b.clientY}catch(b){return!1}if(d>=Math.floor(bd(c.gutters).right))return!1;if(Cc(b),!Mc(a,"gutterClick"))return!0;var f=bd(c.lineDiv);if(e>f.bottom)return!0;e-=f.top-c.viewOffset;for(var g=0;g<a.options.gutters.length;++g){var h=c.gutters.childNodes[g];if(h&&bd(h).right>=d){Kc(a,"gutterClick",a,nc(a.doc,e),a.options.gutters[g],b);break}}return!0}function ra(a,b){if(od&&!a.state.draggingText)return void Ec(b);if(!ma(a.display,b)){var c=a.getSelection();if(b.dataTransfer.setData("Text",c),b.dataTransfer.setDragImage){var d=Zc("img",null,null,"position: fixed; left: 0; top: 0;");ud&&(d.width=d.height=1,a.display.wrapper.appendChild(d),d._top=d.offsetTop),vd&&(a.display.dragImg?d=a.display.dragImg:(a.display.dragImg=d,d.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",a.display.wrapper.appendChild(d))),b.dataTransfer.setDragImage(d,0,0),ud&&d.parentNode.removeChild(d)}}}function sa(a,b){Math.abs(a.doc.scrollTop-b)<2||(a.doc.scrollTop=b,nd||t(a,[],b),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbarV.scrollTop!=b&&(a.display.scrollbarV.scrollTop=b),nd&&t(a,[]))}function ta(a,b,c){(c?b==a.doc.scrollLeft:Math.abs(a.doc.scrollLeft-b)<2)||(b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),a.doc.scrollLeft=b,p(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbarH.scrollLeft!=b&&(a.display.scrollbarH.scrollLeft=b))}function ua(a,b){var c=b.wheelDeltaX,d=b.wheelDeltaY;null==c&&b.detail&&b.axis==b.HORIZONTAL_AXIS&&(c=b.detail),null==d&&b.detail&&b.axis==b.VERTICAL_AXIS?d=b.detail:null==d&&(d=b.wheelDelta);var e=a.display,f=e.scroller;if(c&&f.scrollWidth>f.clientWidth||d&&f.scrollHeight>f.clientHeight){if(d&&Cd&&rd)for(var g=b.target;g!=f;g=g.parentNode)if(g.lineObj){a.display.currentWheelTarget=g;break}if(c&&!nd&&!ud&&null!=Od)return d&&sa(a,Math.max(0,Math.min(f.scrollTop+d*Od,f.scrollHeight-f.clientHeight))),ta(a,Math.max(0,Math.min(f.scrollLeft+c*Od,f.scrollWidth-f.clientWidth))),Cc(b),void(e.wheelStartX=null);if(d&&null!=Od){var h=d*Od,i=a.doc.scrollTop,j=i+e.wrapper.clientHeight;h<0?i=Math.max(0,i+h-50):j=Math.min(a.doc.height,j+h+50),t(a,[],{top:i,bottom:j})}Nd<20&&(null==e.wheelStartX?(e.wheelStartX=f.scrollLeft,e.wheelStartY=f.scrollTop,e.wheelDX=c,e.wheelDY=d,setTimeout(function(){if(null!=e.wheelStartX){var a=f.scrollLeft-e.wheelStartX,b=f.scrollTop-e.wheelStartY,c=b&&e.wheelDY&&b/e.wheelDY||a&&e.wheelDX&&a/e.wheelDX;e.wheelStartX=e.wheelStartY=null,c&&(Od=(Od*Nd+c)/(Nd+1),++Nd)}},200)):(e.wheelDX+=c,e.wheelDY+=d))}}function va(a,b,c){if("string"==typeof b&&!(b=Zd[b]))return!1;a.display.pollingFast&&ha(a)&&(a.display.pollingFast=!1);var d=a.doc,e=d.sel.shift,f=!1;try{ka(a)&&(a.state.suppressEdits=!0),c&&(d.sel.shift=!1),f=b(a)!=je}finally{d.sel.shift=e,a.state.suppressEdits=!1}return f}function wa(a){var b=a.state.keyMaps.slice(0);return a.options.extraKeys&&b.push(a.options.extraKeys),b.push(a.options.keyMap),b}function xa(a,b){var c=pb(a.options.keyMap),d=c.auto;clearTimeout(Pd),d&&!rb(b)&&(Pd=setTimeout(function(){pb(a.options.keyMap)==c&&(a.options.keyMap=d.call?d.call(null,a):d)},50));var e=sb(b,!0),f=!1;if(!e)return!1;var g=wa(a);return f=b.shiftKey?qb("Shift-"+e,g,function(b){return va(a,b,!0)})||qb(e,g,function(b){if("string"==typeof b&&/^go[A-Z]/.test(b))return va(a,b)}):qb(e,g,function(b){return va(a,b)}),"stop"==f&&(f=!1),f&&(Cc(b),E(a),qd&&(b.oldKeyCode=b.keyCode,b.keyCode=0)),f}function ya(a,b,c){var d=qb("'"+c+"'",wa(a),function(b){return va(a,b,!0)});return d&&(Cc(b),E(a)),d}function za(a){var b=this;if(b.state.focused||Ba(b),od&&27==a.keyCode&&(a.returnValue=!1),!b.options.onKeyEvent||!b.options.onKeyEvent(b,Bc(a))){var c=a.keyCode;b.doc.sel.shift=16==c||a.shiftKey;var d=xa(b,a);ud&&(Rd=d?c:null,!d&&88==c&&!te&&(Cd?a.metaKey:a.ctrlKey)&&b.replaceSelection(""))}}function Aa(a){var b=this;if(!b.options.onKeyEvent||!b.options.onKeyEvent(b,Bc(a))){var c=a.keyCode,d=a.charCode;if(ud&&c==Rd)return Rd=null,void Cc(a);if(!(ud&&(!a.which||a.which<10)||wd)||!xa(b,a)){var e=String.fromCharCode(null==d?c:d);this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!ka(this)&&this.doc.mode.electricChars.indexOf(e)>-1&&setTimeout(ba(b,function(){gb(b,b.doc.sel.to.line,"smart")}),75),ya(b,a,e)||(od&&!qd&&(b.display.inputHasSelection=null),ga(b))}}}function Ba(a){"nocursor"!=a.options.readOnly&&(a.state.focused||(Jc(a,"focus",a),a.state.focused=!0,-1==a.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(a.display.wrapper.className+=" CodeMirror-focused"),ia(a,!0)),fa(a),E(a))}function Ca(a){a.state.focused&&(Jc(a,"blur",a),a.state.focused=!1,a.display.wrapper.className=a.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.doc.sel.shift=!1)},150)}function Da(a,b){function c(){if(d.inputDiv.style.position="relative",d.input.style.cssText=h,qd&&(d.scrollbarV.scrollTop=d.scroller.scrollTop=g),fa(a),null!=d.input.selectionStart&&(!od||qd)){clearTimeout(Qd);var b=d.input.value=" "+(Qa(e.from,e.to)?"":d.input.value),c=0;d.prevInput=" ",d.input.selectionStart=1,d.input.selectionEnd=b.length;var f=function(){" "==d.prevInput&&0==d.input.selectionStart?ba(a,Zd.selectAll)(a):c++<10?Qd=setTimeout(f,500):ia(a)};Qd=setTimeout(f,200)}}var d=a.display,e=a.doc.sel;if(!ma(d,b)){var f=na(a,b),g=d.scroller.scrollTop;if(f&&!ud){(Qa(e.from,e.to)||Ra(f,e.from)||!Ra(f,e.to))&&ba(a,Za)(a.doc,f,f);var h=d.input.style.cssText;if(d.inputDiv.style.position="absolute",d.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(b.clientY-5)+"px; left: "+(b.clientX-5)+"px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);",ja(a),ia(a,!0),Qa(e.from,e.to)&&(d.input.value=d.prevInput=" "),Jd){Ec(b);var i=function(){Ic(window,"mouseup",i),setTimeout(c,20)};Hc(window,"mouseup",i)}else setTimeout(c,50)}}}function Ea(a){return a.text?Pa(a.from.line+a.text.length-1,Qc(a.text).length+(1==a.text.length?a.from.ch:0)):a.to}function Fa(a,b,c){if(!Ra(b.from,c))return Ua(a,c);var d=b.text.length-1-(b.to.line-b.from.line);if(c.line>b.to.line+d){var e=c.line-d,f=a.first+a.size-1;return e>f?Pa(f,ic(a,f).text.length):Va(c,ic(a,e).text.length)}if(c.line==b.to.line+d)return Va(c,Qc(b.text).length+(1==b.text.length?b.from.ch:0)+ic(a,b.to.line).text.length-b.to.ch);var g=c.line-b.from.line;return Va(c,b.text[g].length+(g?0:b.from.ch))}function Ga(a,b,c){if(c&&"object"==typeof c)return{anchor:Fa(a,b,c.anchor),head:Fa(a,b,c.head)};if("start"==c)return{anchor:b.from,head:b.from};var d=Ea(b);if("around"==c)return{anchor:b.from,head:d};if("end"==c)return{anchor:d,head:d};var e=function(a){if(Ra(a,b.from))return a;if(!Ra(b.to,a))return d;var c=a.line+b.text.length-(b.to.line-b.from.line)-1,e=a.ch;return a.line==b.to.line&&(e+=d.ch-b.to.ch),Pa(c,e)};return{anchor:e(a.sel.anchor),
head:e(a.sel.head)}}function Ha(a,b){var c={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,update:function(b,c,d,e){b&&(this.from=Ua(a,b)),c&&(this.to=Ua(a,c)),d&&(this.text=d),void 0!==e&&(this.origin=e)},cancel:function(){this.canceled=!0}};return Jc(a,"beforeChange",a,c),a.cm&&Jc(a.cm,"beforeChange",a.cm,c),c.canceled?null:{from:c.from,to:c.to,text:c.text,origin:c.origin}}function Ia(a,b,c,d){if(a.cm){if(!a.cm.curOp)return ba(a.cm,Ia)(a,b,c,d);if(a.cm.state.suppressEdits)return}if(!(Mc(a,"beforeChange")||a.cm&&Mc(a.cm,"beforeChange"))||(b=Ha(a,b))){var e=Kd&&!d&&Fb(a,b.from,b.to);if(e){for(var f=e.length-1;f>=1;--f)Ja(a,{from:e[f].from,to:e[f].to,text:[""]});e.length&&Ja(a,{from:e[0].from,to:e[0].to,text:b.text},c)}else Ja(a,b,c)}}function Ja(a,b,c){var d=Ga(a,b,c);tc(a,b,d,a.cm?a.cm.curOp.id:NaN),Ma(a,b,d,Db(a,b));var e=[];gc(a,function(a,c){c||-1!=Sc(e,a.history)||(zc(a.history,b),e.push(a.history)),Ma(a,b,null,Db(a,b))})}function Ka(a,b){if(!a.cm||!a.cm.state.suppressEdits){var c=a.history,d=("undo"==b?c.done:c.undone).pop();if(d){c.dirtyCounter+="undo"==b?-1:1;var e={changes:[],anchorBefore:d.anchorAfter,headBefore:d.headAfter,anchorAfter:d.anchorBefore,headAfter:d.headBefore};("undo"==b?c.undone:c.done).push(e);for(var f=d.changes.length-1;f>=0;--f){var g=d.changes[f];g.origin=b,e.changes.push(sc(a,g));var h=f?Ga(a,g,null):{anchor:d.anchorBefore,head:d.headBefore};Ma(a,g,h,Eb(a,g));var i=[];gc(a,function(a,b){b||-1!=Sc(i,a.history)||(zc(a.history,g),i.push(a.history)),Ma(a,g,null,Eb(a,g))})}}}}function La(a,b){function c(a){return Pa(a.line+b,a.ch)}a.first+=b,a.cm&&ea(a.cm,a.first,a.first,b),a.sel.head=c(a.sel.head),a.sel.anchor=c(a.sel.anchor),a.sel.from=c(a.sel.from),a.sel.to=c(a.sel.to)}function Ma(a,b,c,d){if(a.cm&&!a.cm.curOp)return ba(a.cm,Ma)(a,b,c,d);if(b.to.line<a.first)return void La(a,b.text.length-1-(b.to.line-b.from.line));if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);La(a,e),b={from:Pa(a.first,0),to:Pa(b.to.line+e,b.to.ch),text:[Qc(b.text)],origin:b.origin}}var f=a.lastLine();b.to.line>f&&(b={from:b.from,to:Pa(f,ic(a,f).text.length),text:[b.text[0]],origin:b.origin}),b.removed=jc(a,b.from,b.to),c||(c=Ga(a,b,null)),a.cm?Na(a.cm,b,d,c):dc(a,b,d,c)}}function Na(a,b,c,d){var f=a.doc,g=a.display,h=b.from,i=b.to,j=!1,l=h.line;a.options.lineWrapping||(l=mc(Jb(f,ic(f,h.line))),f.iter(l,i.line+1,function(a){if(a==g.maxLine)return j=!0,!0})),Ra(f.sel.head,b.from)||Ra(b.to,f.sel.head)||(a.curOp.cursorActivity=!0),dc(f,b,c,d,e(a)),a.options.lineWrapping||(f.iter(l,h.line+b.text.length,function(a){var b=k(f,a);b>g.maxLineLength&&(g.maxLine=a,g.maxLineLength=b,g.maxLineChanged=!0,j=!1)}),j&&(a.curOp.updateMaxLine=!0)),f.frontier=Math.min(f.frontier,h.line),F(a,400);var m=b.text.length-(i.line-h.line)-1;if(ea(a,h.line,i.line+1,m),Mc(a,"change")){var n={from:h,to:i,text:b.text,removed:b.removed,origin:b.origin};if(a.curOp.textChanged){for(var o=a.curOp.textChanged;o.next;o=o.next);o.next=n}else a.curOp.textChanged=n}}function Oa(a,b,c,d,e){if(d||(d=c),Ra(d,c)){var f=d;d=c,c=f}"string"==typeof b&&(b=re(b)),Ia(a,{from:c,to:d,text:b,origin:e},null)}function Pa(a,b){if(!(this instanceof Pa))return new Pa(a,b);this.line=a,this.ch=b}function Qa(a,b){return a.line==b.line&&a.ch==b.ch}function Ra(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function Sa(a){return Pa(a.line,a.ch)}function Ta(a,b){return Math.max(a.first,Math.min(b,a.first+a.size-1))}function Ua(a,b){if(b.line<a.first)return Pa(a.first,0);var c=a.first+a.size-1;return b.line>c?Pa(c,ic(a,c).text.length):Va(b,ic(a,b.line).text.length)}function Va(a,b){var c=a.ch;return null==c||c>b?Pa(a.line,b):c<0?Pa(a.line,0):a}function Wa(a,b){return b>=a.first&&b<a.first+a.size}function Xa(a,b,c,d){if(a.sel.shift||a.sel.extend){var e=a.sel.anchor;if(c){var f=Ra(b,e);f!=Ra(c,e)?(e=b,b=c):f!=Ra(b,c)&&(b=c)}Za(a,e,b,d)}else Za(a,b,c||b,d);a.cm&&(a.cm.curOp.userSelChange=!0)}function Ya(a,b,c){var d={anchor:b,head:c};return Jc(a,"beforeSelectionChange",a,d),a.cm&&Jc(a.cm,"beforeSelectionChange",a.cm,d),d.anchor=Ua(a,d.anchor),d.head=Ua(a,d.head),d}function Za(a,b,c,d,e){if(!e&&Mc(a,"beforeSelectionChange")||a.cm&&Mc(a.cm,"beforeSelectionChange")){var f=Ya(a,b,c);c=f.head,b=f.anchor}var g=a.sel;if(g.goalColumn=null,!e&&Qa(b,g.anchor)||(b=_a(a,b,d,"push"!=e)),!e&&Qa(c,g.head)||(c=_a(a,c,d,"push"!=e)),!Qa(g.anchor,b)||!Qa(g.head,c)){g.anchor=b,g.head=c;var h=Ra(c,b);g.from=h?c:b,g.to=h?b:c,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=a.cm.curOp.cursorActivity=!0),Kc(a,"cursorActivity",a)}}function $a(a){Za(a.doc,a.doc.sel.from,a.doc.sel.to,null,"push")}function _a(a,b,c,d){var e=!1,f=b,g=c||1;a.cantEdit=!1;a:for(;;){var h=ic(a,f.line);if(h.markedSpans)for(var i=0;i<h.markedSpans.length;++i){var j=h.markedSpans[i],k=j.marker;if((null==j.from||(k.inclusiveLeft?j.from<=f.ch:j.from<f.ch))&&(null==j.to||(k.inclusiveRight?j.to>=f.ch:j.to>f.ch))){if(d&&(Jc(k,"beforeCursorEnter"),k.explicitlyCleared)){if(h.markedSpans){--i;continue}break}if(!k.atomic)continue;var l=k.find()[g<0?"from":"to"];if(Qa(l,f)&&(l.ch+=g,l.ch<0?l=l.line>a.first?Ua(a,Pa(l.line-1)):null:l.ch>h.text.length&&(l=l.line<a.first+a.size-1?Pa(l.line+1,0):null),!l)){if(e)return d?(a.cantEdit=!0,Pa(a.first,0)):_a(a,b,c,!0);e=!0,l=b,g=-g}f=l;continue a}}return f}}function ab(a){var b=bb(a,a.doc.sel.head);if(a.state.focused){var c=a.display,d=bd(c.sizer),e=null,f=J(a.display);if(b.top+f+d.top<0?e=!0:b.bottom+f+d.top>(window.innerHeight||document.documentElement.clientHeight)&&(e=!1),null!=e&&!zd){var g="none"==c.cursor.style.display;g&&(c.cursor.style.display="",c.cursor.style.left=b.left+"px",c.cursor.style.top=b.top-c.viewOffset+"px"),c.cursor.scrollIntoView(e),g&&(c.cursor.style.display="none")}}}function bb(a,b,c){for(null==c&&(c=0);;){var d=!1,e=V(a,b),f=db(a,e.left,e.top-c,e.left,e.bottom+c),g=a.doc.scrollTop,h=a.doc.scrollLeft;if(null!=f.scrollTop&&(sa(a,f.scrollTop),Math.abs(a.doc.scrollTop-g)>1&&(d=!0)),null!=f.scrollLeft&&(ta(a,f.scrollLeft),Math.abs(a.doc.scrollLeft-h)>1&&(d=!0)),!d)return e}}function cb(a,b,c,d,e){var f=db(a,b,c,d,e);null!=f.scrollTop&&sa(a,f.scrollTop),null!=f.scrollLeft&&ta(a,f.scrollLeft)}function db(a,b,c,d,e){var f=a.display,g=J(f);c+=g,e+=g,c<0&&(c=0);var h=f.scroller.clientHeight-ie,i=f.scroller.scrollTop,j={},k=a.doc.height+K(f),l=c<g+10,m=e+g>k-10;if(c<i)j.scrollTop=l?0:c;else if(e>i+h){var n=Math.min(c,(m?k:e)-h);n!=i&&(j.scrollTop=n)}var o=f.scroller.clientWidth-ie,p=f.scroller.scrollLeft;b+=f.gutters.offsetWidth,d+=f.gutters.offsetWidth;var q=f.gutters.offsetWidth,r=b<q+10;return b<p+q||r?(r&&(b=0),j.scrollLeft=Math.max(0,b-10-q)):d>o+p-3&&(j.scrollLeft=d+10-o),j}function eb(a,b,c){a.curOp.updateScrollPos={scrollLeft:null==b?a.doc.scrollLeft:b,scrollTop:null==c?a.doc.scrollTop:c}}function fb(a,b,c){var d=a.curOp.updateScrollPos||(a.curOp.updateScrollPos={scrollLeft:a.doc.scrollLeft,scrollTop:a.doc.scrollTop}),e=a.display.scroller;d.scrollTop=Math.max(0,Math.min(e.scrollHeight-e.clientHeight,d.scrollTop+c)),d.scrollLeft=Math.max(0,Math.min(e.scrollWidth-e.clientWidth,d.scrollLeft+b))}function gb(a,b,c,d){var e=a.doc;if(c||(c="add"),"smart"==c)if(a.doc.mode.indent)var f=I(a,b);else c="prev";var g,h=a.options.tabSize,i=ic(e,b),j=Oc(i.text,null,h),k=i.text.match(/^\s*/)[0];if("smart"==c&&(g=a.doc.mode.indent(f,i.text.slice(k.length),i.text))==je){if(!d)return;c="prev"}"prev"==c?g=b>e.first?Oc(ic(e,b-1).text,null,h):0:"add"==c?g=j+a.options.indentUnit:"subtract"==c&&(g=j-a.options.indentUnit),g=Math.max(0,g);var l="",m=0;if(a.options.indentWithTabs)for(var n=Math.floor(g/h);n;--n)m+=h,l+="\t";m<g&&(l+=Pc(g-m)),l!=k&&Oa(a.doc,l,Pa(b,0),Pa(b,k.length),"+input"),i.stateAfter=null}function hb(a,b,c){var d=b,e=b,f=a.doc;return"number"==typeof b?e=ic(f,Ta(f,b)):d=mc(b),null==d?null:c(e,d)?(ea(a,d,d+1),e):null}function ib(a,b,c,d,e){function f(){var b=h+c;return b<a.first||b>=a.first+a.size?k=!1:(h=b,j=ic(a,b))}function g(a){var b=(e?ld:md)(j,i,c,!0);if(null==b){if(a||!f())return k=!1;i=e?(c<0?id:hd)(j):c<0?j.text.length:0}else i=b;return!0}var h=b.line,i=b.ch,j=ic(a,h),k=!0;if("char"==d)g();else if("column"==d)g(!0);else if("word"==d||"group"==d)for(var l=null,m="group"==d,n=!0;!(c<0)||g(!n);n=!1){var o=j.text.charAt(i)||"\n",p=Xc(o)?"w":m?/\s/.test(o)?null:"p":null;if(l&&l!=p){c<0&&(c=1,g());break}if(p&&(l=p),c>0&&!g(!n))break}var q=_a(a,Pa(h,i),c,!0);return k||(q.hitSide=!0),q}function jb(a,b,c,d){var e,f=a.doc,g=b.left;if("page"==d){var h=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);e=b.top+c*(h-(c<0?1.5:.5)*Z(a.display))}else"line"==d&&(e=c>0?b.bottom+3:b.top-3);for(;;){var i=X(a,g,e);if(!i.outside)break;if(c<0?e<=0:e>=f.height){i.hitSide=!0;break}e+=5*c}return i}function kb(a,b){var c=b.ch,d=b.ch;if(a){!1===b.after||d==a.length?--c:++d;for(var e=a.charAt(c),f=Xc(e)?Xc:/\s/.test(e)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!Xc(a)};c>0&&f(a.charAt(c-1));)--c;for(;d<a.length&&f(a.charAt(d));)++d}return{from:Pa(b.line,c),to:Pa(b.line,d)}}function lb(a,b){Xa(a.doc,Pa(b,0),Ua(a.doc,Pa(b+1,0)))}function mb(b,c,d,e){a.defaults[b]=c,d&&(Sd[b]=e?function(a,b,c){c!=Ud&&d(a,b,c)}:d)}function nb(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={};for(var d in b){var e=b[d];e instanceof Array&&(e=e.concat([])),c[d]=e}return c}function ob(a,b,c){return!a.startState||a.startState(b,c)}function pb(a){return"string"==typeof a?$d[a]:a}function qb(a,b,c){function d(b){b=pb(b);var e=b[a];if(!1===e)return"stop";if(null!=e&&c(e))return!0;if(b.nofallthrough)return"stop";var f=b.fallthrough;if(null==f)return!1;if("[object Array]"!=Object.prototype.toString.call(f))return d(f);for(var g=0,h=f.length;g<h;++g){var i=d(f[g]);if(i)return i}return!1}for(var e=0;e<b.length;++e){var f=d(b[e]);if(f)return f}}function rb(a){var b=ue[a.keyCode];return"Ctrl"==b||"Alt"==b||"Shift"==b||"Mod"==b}function sb(a,b){if(ud&&34==a.keyCode&&a.char)return!1;var c=ue[a.keyCode];return null!=c&&!a.altGraphKey&&(a.altKey&&(c="Alt-"+c),(Id?a.metaKey:a.ctrlKey)&&(c="Ctrl-"+c),(Id?a.ctrlKey:a.metaKey)&&(c="Cmd-"+c),!b&&a.shiftKey&&(c="Shift-"+c),c)}function tb(a,b){this.pos=this.start=0,this.string=a,this.tabSize=b||8,this.lastColumnPos=this.lastColumnValue=0}function ub(a,b){this.lines=[],this.type=b,this.doc=a}function vb(a,b,c,d,e){if(d&&d.shared)return xb(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return ba(a.cm,vb)(a,b,c,d,e);var f=new ub(a,e);if("range"==e&&!Ra(b,c))return f;d&&Uc(d,f),f.replacedWith&&(f.collapsed=!0,f.replacedWith=Zc("span",[f.replacedWith],"CodeMirror-widget")),f.collapsed&&(Ld=!0),f.addToHistory&&tc(a,{from:b,to:c,origin:"markText"},{head:a.sel.head,anchor:a.sel.anchor},NaN);var g,h,i,j=b.line,k=0,l=a.cm;if(a.iter(j,c.line+1,function(d){l&&f.collapsed&&!l.options.lineWrapping&&Jb(a,d)==l.display.maxLine&&(i=!0);var e={from:null,to:null,marker:f};k+=d.text.length,j==b.line&&(e.from=b.ch,k-=b.ch),j==c.line&&(e.to=c.ch,k-=d.text.length-c.ch),f.collapsed&&(j==c.line&&(h=Gb(d,c.ch)),j==b.line?g=Gb(d,b.ch):lc(d,0)),Ab(d,e),++j}),f.collapsed&&a.iter(b.line,c.line+1,function(b){Kb(a,b)&&lc(b,0)}),f.clearOnEnter&&Hc(f,"beforeCursorEnter",function(){f.clear()}),f.readOnly&&(Kd=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory()),f.collapsed){if(g!=h)throw new Error("Inserting collapsed marker overlapping an existing one");f.size=k,f.atomic=!0}return l&&(i&&(l.curOp.updateMaxLine=!0),(f.className||f.startStyle||f.endStyle||f.collapsed)&&ea(l,b.line,c.line+1),f.atomic&&$a(l)),f}function wb(a,b){this.markers=a,this.primary=b;for(var c=0,d=this;c<a.length;++c)a[c].parent=this,Hc(a[c],"clear",function(){d.clear()})}function xb(a,b,c,d,e){d=Uc(d),d.shared=!1;var f=[vb(a,b,c,d,e)],g=f[0],h=d.replacedWith;return gc(a,function(a){h&&(d.replacedWith=h.cloneNode(!0)),f.push(vb(a,Ua(a,b),Ua(a,c),d,e));for(var i=0;i<a.linked.length;++i)if(a.linked[i].isParent)return;g=Qc(f)}),new wb(f,g)}function yb(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function zb(a,b){for(var c,d=0;d<a.length;++d)a[d]!=b&&(c||(c=[])).push(a[d]);return c}function Ab(a,b){a.markedSpans=a.markedSpans?a.markedSpans.concat([b]):[b],b.marker.attachLine(a)}function Bb(a,b,c){if(a)for(var d,e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);if(h||"bookmark"==g.type&&f.from==b&&(!c||!f.marker.insertLeft)){var i=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);(d||(d=[])).push({from:f.from,to:i?null:f.to,marker:g})}}return d}function Cb(a,b,c){if(a)for(var d,e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);if(h||"bookmark"==g.type&&f.from==b&&(!c||f.marker.insertLeft)){var i=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);(d||(d=[])).push({from:i?null:f.from-b,to:null==f.to?null:f.to-b,marker:g})}}return d}function Db(a,b){var c=Wa(a,b.from.line)&&ic(a,b.from.line).markedSpans,d=Wa(a,b.to.line)&&ic(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,g=Qa(b.from,b.to),h=Bb(c,e,g),i=Cb(d,f,g),j=1==b.text.length,k=Qc(b.text).length+(j?e:0);if(h)for(var l=0;l<h.length;++l){var m=h[l];if(null==m.to){var n=yb(i,m.marker);n?j&&(m.to=null==n.to?null:n.to+k):m.to=e}}if(i)for(var l=0;l<i.length;++l){var m=i[l];if(null!=m.to&&(m.to+=k),null==m.from){var n=yb(h,m.marker);n||(m.from=k,j&&(h||(h=[])).push(m))}else m.from+=k,j&&(h||(h=[])).push(m)}var o=[h];if(!j){var p,q=b.text.length-2;if(q>0&&h)for(var l=0;l<h.length;++l)null==h[l].to&&(p||(p=[])).push({from:null,to:null,marker:h[l].marker});for(var l=0;l<q;++l)o.push(p);o.push(i)}return o}function Eb(a,b){var c=vc(a,b),d=Db(a,b);if(!c)return d;if(!d)return c;for(var e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g)a:for(var h=0;h<g.length;++h){for(var i=g[h],j=0;j<f.length;++j)if(f[j].marker==i.marker)continue a;f.push(i)}else g&&(c[e]=g)}return c}function Fb(a,b,c){var d=null;if(a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=Sc(d,c)||(d||(d=[])).push(c)}}),!d)return null;for(var e=[{from:b,to:c}],f=0;f<d.length;++f)for(var g=d[f],h=g.find(),i=0;i<e.length;++i){var j=e[i];if(!Ra(j.to,h.from)&&!Ra(h.to,j.from)){var k=[i,1];(Ra(j.from,h.from)||!g.inclusiveLeft&&Qa(j.from,h.from))&&k.push({from:j.from,to:h.from}),(Ra(h.to,j.to)||!g.inclusiveRight&&Qa(j.to,h.to))&&k.push({from:h.to,to:j.to}),e.splice.apply(e,k),i+=k.length-1}}return e}function Gb(a,b){var c,d=Ld&&a.markedSpans;if(d)for(var e,f=0;f<d.length;++f)e=d[f],e.marker.collapsed&&(null==e.from||e.from<b)&&(null==e.to||e.to>b)&&(!c||c.width<e.marker.width)&&(c=e.marker);return c}function Hb(a){return Gb(a,-1)}function Ib(a){return Gb(a,a.text.length+1)}function Jb(a,b){for(var c;c=Hb(b);)b=ic(a,c.find().from.line);return b}function Kb(a,b){var c=Ld&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed){if(null==d.from)return!0;if(0==d.from&&d.marker.inclusiveLeft&&Lb(a,b,d))return!0}}function Lb(a,b,c){if(null==c.to){var d=c.marker.find().to,e=ic(a,d.line);return Lb(a,e,yb(e.markedSpans,c.marker))}if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var f,g=0;g<b.markedSpans.length;++g)if(f=b.markedSpans[g],f.marker.collapsed&&f.from==c.to&&(f.marker.inclusiveLeft||c.marker.inclusiveRight)&&Lb(a,b,f))return!0}function Mb(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function Nb(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function Ob(a){return function(){var b=!this.cm.curOp;b&&_(this.cm);try{var c=a.apply(this,arguments)}finally{b&&aa(this.cm)}return c}}function Pb(a){return null!=a.height?a.height:(a.node.parentNode&&1==a.node.parentNode.nodeType||_c(a.cm.display.measure,Zc("div",[a.node],null,"position: relative")),a.height=a.node.offsetHeight)}function Qb(a,b,c,d){var e=new _d(a,c,d);return e.noHScroll&&(a.display.alignWidgets=!0),hb(a,b,function(b){if((b.widgets||(b.widgets=[])).push(e),e.line=b,!Kb(a.doc,b)||e.showIfHidden){var c=oc(a,b)<a.display.scroller.scrollTop;lc(b,b.height+Pb(e)),c&&fb(a,0,e.height)}return!0}),e}function Rb(a,b,c){var d={text:a};return Nb(d,b),d.height=c?c(d):1,d}function Sb(a,b,c,d){a.text=b,a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null),null!=a.order&&(a.order=null),Mb(a),Nb(a,c);var e=d?d(a):1;e!=a.height&&lc(a,e)}function Tb(a){a.parent=null,Mb(a)}function Ub(a,b,c,d,e){var f=c.flattenSpans;null==f&&(f=a.options.flattenSpans);var g,h="",i=null,j=new tb(b,a.options.tabSize);for(""==b&&c.blankLine&&c.blankLine(d);!j.eol();){j.pos>a.options.maxHighlightLength?(f=!1,j.pos=Math.min(b.length,j.start+5e4),g=null):g=c.token(j,d);var k=j.current();j.start=j.pos,f&&i==g?h+=k:(h&&e(h,i),h=k,i=g)}h&&e(h,i)}function Vb(a,b,c){var d=[a.state.modeGen];Ub(a,b.text,a.doc.mode,c,function(a,b){d.push(a,b)});for(var e=0;e<a.state.overlays.length;++e){var f=a.state.overlays[e],g=1;Ub(a,b.text,f.mode,!0,function(a,b){for(var c=g,e=a.length;e;){var h=d[g],i=h.length;i<=e?e-=i:(d.splice(g,1,h.slice(0,e),d[g+1],h.slice(e)),e=0),g+=2}if(b)if(f.opaque)d.splice(c,g-c,a,b),g=c+2;else for(;c<g;c+=2){var h=d[c+1];d[c+1]=h?h+" "+b:b}})}return d}function Wb(a,b){return b.styles&&b.styles[0]==a.state.modeGen||(b.styles=Vb(a,b,b.stateAfter=I(a,mc(b)))),b.styles}function Xb(a,b,c){var d=a.doc.mode,e=new tb(b.text,a.options.tabSize);for(""==b.text&&d.blankLine&&d.blankLine(c);!e.eol()&&e.pos<=a.options.maxHighlightLength;)d.token(e,c),e.start=e.pos}function Yb(a){return a?ae[a]||(ae[a]="cm-"+a.replace(/ +/g," cm-")):null}function Zb(a,b,c){for(var d,e,f,g=b,h=!0;d=Hb(g);)h=!1,g=ic(a.doc,d.find().from.line),e||(e=g);var i={pre:Zc("pre"),col:0,pos:0,display:!c,measure:null,addedOne:!1,cm:a};g.textClass&&(i.pre.className=g.textClass);do{i.measure=g==b&&c,i.pos=0,i.addToken=i.measure?_b:$b,(od||rd)&&a.getOption("lineWrapping")&&(i.addToken=ac(i.addToken)),c&&f&&g!=b&&!i.addedOne&&(c[0]=i.pre.appendChild(dd(a.display.measure)),i.addedOne=!0);var j=cc(g,i,Wb(a,g));f=g==e,j&&(g=ic(a.doc,j.to.line),h=!1)}while(j);c&&!i.addedOne&&(c[0]=i.pre.appendChild(h?Zc("span"," "):dd(a.display.measure))),i.pre.firstChild||Kb(a.doc,b)||i.pre.appendChild(document.createTextNode(" "));var k;if(c&&od&&(k=pc(g))){var l=k.length-1;k[l].from==k[l].to&&--l;var m=k[l],n=k[l-1];if(m.from+1==m.to&&n&&m.level<n.level){var o=c[i.pos-1];o&&o.parentNode.insertBefore(o.measureRight=dd(a.display.measure),o.nextSibling)}}return Jc(a,"renderLine",a,b,i.pre),i.pre}function $b(a,b,c,d,e){if(b){if(be.test(b))for(var f=document.createDocumentFragment(),g=0;;){be.lastIndex=g;var h=be.exec(b),i=h?h.index-g:b.length-g;if(i&&(f.appendChild(document.createTextNode(b.slice(g,g+i))),a.col+=i),!h)break;if(g+=i+1,"\t"==h[0]){var j=a.cm.options.tabSize,k=j-a.col%j;f.appendChild(Zc("span",Pc(k),"cm-tab")),a.col+=k}else{var l=Zc("span","•","cm-invalidchar");l.title="\\u"+h[0].charCodeAt(0).toString(16),f.appendChild(l),a.col+=1}}else{a.col+=b.length;var f=document.createTextNode(b)}if(c||d||e||a.measure){var m=c||"";return d&&(m+=d),e&&(m+=e),a.pre.appendChild(Zc("span",[f],m))}a.pre.appendChild(f)}}function _b(a,b,c,d,e){for(var f=a.cm.options.lineWrapping,g=0;g<b.length;++g){var h=b.charAt(g),i=0==g;h>="�"&&h<"�"&&g<b.length-1?(h=b.slice(g,g+2),++g):g&&f&&oe.test(b.slice(g-1,g+1))&&a.pre.appendChild(Zc("wbr"));var j=a.measure[a.pos]=$b(a,h,c,i&&d,g==b.length-1&&e);od&&f&&" "==h&&g&&!/\s/.test(b.charAt(g-1))&&g<b.length-1&&!/\s/.test(b.charAt(g+1))&&(j.style.whiteSpace="normal"),a.pos+=h.length}b.length&&(a.addedOne=!0)}function ac(a){function b(a){for(var b=" ",c=0;c<a.length-2;++c)b+=c%2?" ":" ";return b+=" "}return function(c,d,e,f,g){return a(c,d.replace(/ {3,}/,b),e,f,g)}}function bc(a,b,c){c&&(a.display||(c=c.cloneNode(!0)),a.pre.appendChild(c),a.measure&&b&&(a.measure[a.pos]=c,a.addedOne=!0)),a.pos+=b}function cc(a,b,c){var d=a.markedSpans;if(d)for(var e,f,g,h,i,j=a.text,k=j.length,l=0,m=1,n="",o=0;;){if(o==l){f=g=h="",i=null,o=1/0;for(var p=null,q=0;q<d.length;++q){var r=d[q],s=r.marker;r.from<=l&&(null==r.to||r.to>l)?(null!=r.to&&o>r.to&&(o=r.to,g=""),s.className&&(f+=" "+s.className),s.startStyle&&r.from==l&&(h+=" "+s.startStyle),s.endStyle&&r.to==o&&(g+=" "+s.endStyle),s.collapsed&&(!i||i.marker.width<s.width)&&(i=r)):r.from>l&&o>r.from&&(o=r.from),"bookmark"==s.type&&r.from==l&&s.replacedWith&&(p=s.replacedWith)}if(i&&(i.from||0)==l&&(bc(b,(null==i.to?k:i.to)-l,null!=i.from&&i.marker.replacedWith),null==i.to))return i.marker.find();p&&!i&&bc(b,0,p)}if(l>=k)break;for(var t=Math.min(k,o);;){if(n){var u=l+n.length;if(!i){var v=u>t?n.slice(0,t-l):n;b.addToken(b,v,e?e+f:f,h,l+v.length==o?g:"")}if(u>=t){n=n.slice(t-l),l=t;break}l=u,h=""}n=c[m++],e=Yb(c[m++])}}else for(var m=1;m<c.length;m+=2)b.addToken(b,c[m],Yb(c[m+1]))}function dc(a,b,c,d,e){function f(a){return c?c[a]:null}function g(a,c,d){Sb(a,c,d,e),Kc(a,"change",a,b)}var h=b.from,i=b.to,j=b.text,k=ic(a,h.line),l=ic(a,i.line),m=Qc(j),n=f(j.length-1),o=i.line-h.line;if(0==h.ch&&0==i.ch&&""==m){for(var p=0,q=j.length-1,r=[];p<q;++p)r.push(Rb(j[p],f(p),e));g(l,l.text,n),o&&a.remove(h.line,o),r.length&&a.insert(h.line,r)}else if(k==l)if(1==j.length)g(k,k.text.slice(0,h.ch)+m+k.text.slice(i.ch),n);else{for(var r=[],p=1,q=j.length-1;p<q;++p)r.push(Rb(j[p],f(p),e));r.push(Rb(m+k.text.slice(i.ch),n,e)),g(k,k.text.slice(0,h.ch)+j[0],f(0)),a.insert(h.line+1,r)}else if(1==j.length)g(k,k.text.slice(0,h.ch)+j[0]+l.text.slice(i.ch),f(0)),a.remove(h.line+1,o);else{g(k,k.text.slice(0,h.ch)+j[0],f(0)),g(l,m+l.text.slice(i.ch),n);for(var p=1,q=j.length-1,r=[];p<q;++p)r.push(Rb(j[p],f(p),e));o>1&&a.remove(h.line+1,o-1),a.insert(h.line+1,r)}Kc(a,"change",a,b),Za(a,d.anchor,d.head,null,!0)}function ec(a){this.lines=a,this.parent=null;for(var b=0,c=a.length,d=0;b<c;++b)a[b].parent=this,d+=a[b].height;this.height=d}function fc(a){this.children=a;for(var b=0,c=0,d=0,e=a.length;d<e;++d){var f=a[d];b+=f.chunkSize(),c+=f.height,f.parent=this}this.size=b,this.height=c,this.parent=null}function gc(a,b,c){function d(a,e,f){if(a.linked)for(var g=0;g<a.linked.length;++g){var h=a.linked[g];if(h.doc!=e){var i=f&&h.sharedHist;c&&!i||(b(h.doc,i),d(h.doc,a,i))}}}d(a,null,!0)}function hc(a,b){if(b.cm)throw new Error("This document is already in use.");a.doc=b,b.cm=a,f(a),c(a),a.options.lineWrapping||l(a),a.options.mode=b.modeOption,ea(a)}function ic(a,b){for(b-=a.first;!a.lines;)for(var c=0;;++c){var d=a.children[c],e=d.chunkSize();if(b<e){a=d;break}b-=e}return a.lines[b]}function jc(a,b,c){var d=[],e=b.line;return a.iter(b.line,c.line+1,function(a){var f=a.text;e==c.line&&(f=f.slice(0,c.ch)),e==b.line&&(f=f.slice(b.ch)),d.push(f),++e}),d}function kc(a,b,c){var d=[];return a.iter(b,c,function(a){d.push(a.text)}),d}function lc(a,b){for(var c=b-a.height,d=a;d;d=d.parent)d.height+=c}function mc(a){if(null==a.parent)return null;for(var b=a.parent,c=Sc(b.lines,a),d=b.parent;d;b=d,d=d.parent)for(var e=0;d.children[e]!=b;++e)c+=d.children[e].chunkSize();return c+b.first}function nc(a,b){var c=a.first;a:do{for(var d=0,e=a.children.length;d<e;++d){var f=a.children[d],g=f.height;if(b<g){a=f;continue a}b-=g,c+=f.chunkSize()}return c}while(!a.lines);for(var d=0,e=a.lines.length;d<e;++d){var h=a.lines[d],i=h.height;if(b<i)break;b-=i}return c+d}function oc(a,b){b=Jb(a.doc,b);for(var c=0,d=b.parent,e=0;e<d.lines.length;++e){var f=d.lines[e];if(f==b)break;c+=f.height}for(var g=d.parent;g;d=g,g=d.parent)for(var e=0;e<g.children.length;++e){var h=g.children[e];if(h==d)break;c+=h.height}return c}function pc(a){var b=a.order;return null==b&&(b=a.order=ve(a.text)),b}function qc(){return{done:[],undone:[],undoDepth:1/0,lastTime:0,lastOp:null,lastOrigin:null,dirtyCounter:0}}function rc(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans),++f})}function sc(a,b){var c={from:b.from,to:Ea(b),text:jc(a,b.from,b.to)};return rc(a,c,b.from.line,b.to.line+1),gc(a,function(a){rc(a,c,b.from.line,b.to.line+1)},!0),c}function tc(a,b,c,d){var e=a.history;e.undone.length=0;var f=+new Date,g=Qc(e.done);if(g&&(e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastTime>f-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0)))){var h=Qc(g.changes);Qa(b.from,b.to)&&Qa(b.from,h.to)?h.to=Ea(b):g.changes.push(sc(a,b)),g.anchorAfter=c.anchor,g.headAfter=c.head}else{for(g={changes:[sc(a,b)],anchorBefore:a.sel.anchor,headBefore:a.sel.head,anchorAfter:c.anchor,headAfter:c.head},e.done.push(g);e.done.length>e.undoDepth;)e.done.shift();e.dirtyCounter<0?e.dirtyCounter=NaN:e.dirtyCounter++}e.lastTime=f,e.lastOp=d,e.lastOrigin=b.origin}function uc(a){if(!a)return null;for(var b,c=0;c<a.length;++c)a[c].marker.explicitlyCleared?b||(b=a.slice(0,c)):b&&b.push(a[c]);return b?b.length?b:null:a}function vc(a,b){var c=b["spans_"+a.id];if(!c)return null;for(var d=0,e=[];d<b.text.length;++d)e.push(uc(c[d]));return e}function wc(a,b){for(var c=0,d=[];c<a.length;++c){var e=a[c],f=e.changes,g=[];d.push({changes:g,anchorBefore:e.anchorBefore,headBefore:e.headBefore,anchorAfter:e.anchorAfter,headAfter:e.headAfter});for(var h=0;h<f.length;++h){var i,j=f[h];if(g.push({from:j.from,to:j.to,text:j.text}),b)for(var k in j)(i=k.match(/^spans_(\d+)$/))&&Sc(b,Number(i[1]))>-1&&(Qc(g)[k]=j[k],delete j[k])}}return d}function xc(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function yc(a,b,c,d){for(var e=0;e<a.length;++e){for(var f=a[e],g=!0,h=0;h<f.changes.length;++h){var i=f.changes[h];if(f.copied||(i.from=Sa(i.from),i.to=Sa(i.to)),c<i.from.line)i.from.line+=d,i.to.line+=d;else if(b<=i.to.line){g=!1;break}}f.copied||(f.anchorBefore=Sa(f.anchorBefore),f.headBefore=Sa(f.headBefore),f.anchorAfter=Sa(f.anchorAfter),f.readAfter=Sa(f.headAfter),f.copied=!0),g?(xc(f.anchorBefore),xc(f.headBefore),xc(f.anchorAfter),xc(f.headAfter)):(a.splice(0,e+1),e=0)}}function zc(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;yc(a.done,c,d,e),yc(a.undone,c,d,e)}function Ac(){Ec(this)}function Bc(a){return a.stop||(a.stop=Ac),a}function Cc(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function Dc(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function Ec(a){Cc(a),Dc(a)}function Fc(a){return a.target||a.srcElement}function Gc(a){var b=a.which;return null==b&&(1&a.button?b=1:2&a.button?b=3:4&a.button&&(b=2)),Cd&&a.ctrlKey&&1==b&&(b=3),b}function Hc(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent("on"+b,c);else{var d=a._handlers||(a._handlers={}),e=d[b]||(d[b]=[]);e.push(c)}}function Ic(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else{var d=a._handlers&&a._handlers[b];if(!d)return;for(var e=0;e<d.length;++e)if(d[e]==c){d.splice(e,1);break}}}function Jc(a,b){var c=a._handlers&&a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)}function Kc(a,b){function c(a){return function(){a.apply(null,e)}}var d=a._handlers&&a._handlers[b];if(d){var e=Array.prototype.slice.call(arguments,2);ge||(++he,ge=[],setTimeout(Lc,0));for(var f=0;f<d.length;++f)ge.push(c(d[f]))}}function Lc(){--he;var a=ge;ge=null;for(var b=0;b<a.length;++b)a[b]()}function Mc(a,b){var c=a._handlers&&a._handlers[b];return c&&c.length>0}function Nc(){this.id=null}function Oc(a,b,c,d,e){null==b&&-1==(b=a.search(/[^\s\u00a0]/))&&(b=a.length);for(var f=d||0,g=e||0;f<b;++f)"\t"==a.charAt(f)?g+=c-g%c:++g;return g}function Pc(a){for(;ke.length<=a;)ke.push(Qc(ke)+" ");return ke[a]}function Qc(a){return a[a.length-1]}function Rc(a){Ad?(a.selectionStart=0,a.selectionEnd=a.value.length):a.select()}function Sc(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;++c)if(a[c]==b)return c;return-1}function Tc(a,b){function c(){}c.prototype=a;var d=new c;return b&&Uc(b,d),d}function Uc(a,b){b||(b={});for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function Vc(a){for(var b=[],c=0;c<a;++c)b.push(void 0);return b}function Wc(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function Xc(a){return/\w/.test(a)||a>""&&(a.toUpperCase()!=a.toLowerCase()||le.test(a))}function Yc(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function Zc(a,b,c,d){var e=document.createElement(a);if(c&&(e.className=c),d&&(e.style.cssText=d),"string"==typeof b)ad(e,b);else if(b)for(var f=0;f<b.length;++f)e.appendChild(b[f]);return e}function $c(a){for(var b=a.childNodes.length;b>0;--b)a.removeChild(a.firstChild);return a}function _c(a,b){return $c(a).appendChild(b)}function ad(a,b){qd?(a.innerHTML="",a.appendChild(document.createTextNode(b))):a.textContent=b}function bd(a){return a.getBoundingClientRect()}function cd(a){if(null!=pe)return pe;var b=Zc("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return _c(a,b),b.offsetWidth&&(pe=b.offsetHeight-b.clientHeight),pe||0}function dd(a){if(null==qe){var b=Zc("span","​");_c(a,Zc("span",[b,document.createTextNode("x")])),0!=a.firstChild.offsetHeight&&(qe=b.offsetWidth<=1&&b.offsetHeight>2&&!pd)}return qe?Zc("span","​"):Zc("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function ed(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=0;e<a.length;++e){var f=a[e];(f.from<c&&f.to>b||b==c&&f.to==b)&&d(Math.max(f.from,b),Math.min(f.to,c),1==f.level?"rtl":"ltr")}}function fd(a){return a.level%2?a.to:a.from}function gd(a){return a.level%2?a.from:a.to}function hd(a){var b=pc(a);return b?fd(b[0]):0}function id(a){var b=pc(a);return b?gd(Qc(b)):a.text.length}function jd(a,b){var c=ic(a.doc,b),d=Jb(a.doc,c);d!=c&&(b=mc(d));var e=pc(d);return Pa(b,e?e[0].level%2?id(d):hd(d):0)}function kd(a,b){for(var c,d;c=Ib(d=ic(a.doc,b));)b=c.find().to.line;var e=pc(d);return Pa(b,e?e[0].level%2?hd(d):id(d):d.text.length)}function ld(a,b,c,d){var e=pc(a);if(!e)return md(a,b,c,d);for(var f=d?function(b,c){do{b+=c}while(b>0&&me.test(a.text.charAt(b)));return b}:function(a,b){return a+b},g=e[0].level,h=0;h<e.length;++h){var i=e[h],j=i.level%2==g;if(i.from<b&&i.to>b||j&&(i.from==b||i.to==b))break}for(var k=f(b,i.level%2?-c:c);null!=k;)if(i.level%2==g){if(!(k<i.from||k>i.to))break;i=e[h+=c],k=i&&(c>0==i.level%2?f(i.to,-1):f(i.from,1))}else if(k==fd(i))i=e[--h],k=i&&gd(i);else{if(k!=gd(i))break;i=e[++h],k=i&&fd(i)}return k<0||k>a.text.length?null:k}function md(a,b,c,d){var e=b+c;if(d)for(;e>0&&me.test(a.text.charAt(e));)e+=c;return e<0||e>a.text.length?null:e}var nd=/gecko\/\d/i.test(navigator.userAgent),od=/MSIE \d/.test(navigator.userAgent),pd=od&&(null==document.documentMode||document.documentMode<8),qd=od&&(null==document.documentMode||document.documentMode<9),rd=/WebKit\//.test(navigator.userAgent),sd=rd&&/Qt\/\d+\.\d+/.test(navigator.userAgent),td=/Chrome\//.test(navigator.userAgent),ud=/Opera\//.test(navigator.userAgent),vd=/Apple Computer/.test(navigator.vendor),wd=/KHTML\//.test(navigator.userAgent),xd=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),yd=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),zd=/PhantomJS/.test(navigator.userAgent),Ad=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Bd=Ad||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Cd=Ad||/Mac/.test(navigator.platform),Dd=/windows/i.test(navigator.platform),Ed=ud&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);Ed&&(Ed=Number(Ed[1]));var Fd,Gd,Hd,Id=Cd&&(sd||ud&&(null==Ed||Ed<12.11)),Jd=nd||od&&!qd,Kd=!1,Ld=!1,Md=0,Nd=0,Od=null;od?Od=-.53:nd?Od=15:td?Od=-.7:vd&&(Od=-1/3);var Pd,Qd,Rd=null;a.Pos=Pa,a.prototype={focus:function(){window.focus(),ja(this),Ba(this),ga(this)},setOption:function(a,b){var c=this.options,d=c[a];c[a]==b&&"mode"!=a||(c[a]=b,Sd.hasOwnProperty(a)&&ba(this,Sd[a])(this,b,d))},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},
addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](a)},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(("string"==typeof a?b[c].name:b[c])==a)return b.splice(c,1),!0},addOverlay:ba(null,function(b,c){var d=b.token?b:a.getMode(this.options,b);if(d.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:d,modeSpec:b,opaque:c&&c.opaque}),this.state.modeGen++,ea(this)}),removeOverlay:ba(null,function(a){for(var b=this.state.overlays,c=0;c<b.length;++c)if(b[c].modeSpec==a)return b.splice(c,1),this.state.modeGen++,void ea(this)}),indentLine:ba(null,function(a,b,c){"string"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract"),Wa(this.doc,a)&&gb(this,a,b,c)}),indentSelection:ba(null,function(a){var b=this.doc.sel;if(Qa(b.from,b.to))return gb(this,b.from.line,a);for(var c=b.to.line-(b.to.ch?0:1),d=b.from.line;d<=c;++d)gb(this,d,a)}),getTokenAt:function(a){var b=this.doc;a=Ua(b,a);for(var c=I(this,a.line),d=this.doc.mode,e=ic(b,a.line),f=new tb(e.text,this.options.tabSize);f.pos<a.ch&&!f.eol();){f.start=f.pos;var g=d.token(f,c)}return{start:f.start,end:f.pos,string:f.current(),className:g||null,type:g||null,state:c}},getStateAfter:function(a){var b=this.doc;return a=Ta(b,null==a?b.first+b.size-1:a),I(this,a+1)},cursorCoords:function(a,b){var c,d=this.doc.sel;return c=null==a?d.head:"object"==typeof a?Ua(this.doc,a):a?d.from:d.to,V(this,c,b||"page")},charCoords:function(a,b){return U(this,Ua(this.doc,a),b||"page")},coordsChar:function(a,b){return a=T(this,a,b||"page"),X(this,a.left,a.top)},defaultTextHeight:function(){return Z(this.display)},defaultCharWidth:function(){return $(this.display)},setGutterMarker:ba(null,function(a,b,c){return hb(this,a,function(a){var d=a.gutterMarkers||(a.gutterMarkers={});return d[b]=c,!c&&Yc(d)&&(a.gutterMarkers=null),!0})}),clearGutter:ba(null,function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,ea(b,d,d+1),Yc(c.gutterMarkers)&&(c.gutterMarkers=null)),++d})}),addLineClass:ba(null,function(a,b,c){return hb(this,a,function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass";if(a[d]){if(new RegExp("\\b"+c+"\\b").test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:ba(null,function(a,b,c){return hb(this,a,function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass",e=a[d];if(!e)return!1;if(null==c)a[d]=null;else{var f=e.replace(new RegExp("^"+c+"\\b\\s*|\\s*\\b"+c+"\\b"),"");if(f==e)return!1;a[d]=f||null}return!0})}),addLineWidget:ba(null,function(a,b,c){return Qb(this,a,b,c)}),removeLineWidget:function(a){a.clear()},lineInfo:function(a){if("number"==typeof a){if(!Wa(this.doc,a))return null;var b=a;if(!(a=ic(this.doc,a)))return null}else{var b=mc(a);if(null==b)return null}return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=V(this,Ua(this.doc,a));var g=a.bottom,h=a.left;if(b.style.position="absolute",f.sizer.appendChild(b),"over"==d)g=a.top;else if("above"==d||"near"==d){var i=Math.max(f.wrapper.clientHeight,this.doc.height),j=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>i)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=i&&(g=a.bottom),h+b.offsetWidth>j&&(h=j-b.offsetWidth)}b.style.top=g+J(f)+"px",b.style.left=b.style.right="","right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=h+"px"),c&&cb(this,h,g,h+b.offsetWidth,g+b.offsetHeight)},triggerOnKeyDown:ba(null,za),execCommand:function(a){return Zd[a](this)},findPosH:function(a,b,c,d){var e=1;b<0&&(e=-1,b=-b);for(var f=0,g=Ua(this.doc,a);f<b&&(g=ib(this.doc,g,e,c,d),!g.hitSide);++f);return g},moveH:ba(null,function(a,b){var c,d=this.doc.sel;c=d.shift||d.extend||Qa(d.from,d.to)?ib(this.doc,d.head,a,b,this.options.rtlMoveVisually):a<0?d.from:d.to,Xa(this.doc,c,c,a)}),deleteH:ba(null,function(a,b){var c=this.doc.sel;Qa(c.from,c.to)?Oa(this.doc,"",c.from,ib(this.doc,c.head,a,b,!1),"+delete"):Oa(this.doc,"",c.from,c.to,"+delete"),this.curOp.userSelChange=!0}),findPosV:function(a,b,c,d){var e=1,f=d;b<0&&(e=-1,b=-b);for(var g=0,h=Ua(this.doc,a);g<b;++g){var i=V(this,h,"div");if(null==f?f=i.left:i.left=f,h=jb(this,i,e,c),h.hitSide)break}return h},moveV:ba(null,function(a,b){var c=this.doc.sel,d=V(this,c.head,"div");null!=c.goalColumn&&(d.left=c.goalColumn);var e=jb(this,d,a,b);"page"==b&&fb(this,0,U(this,e,"div").top-d.top),Xa(this.doc,e,e,a),c.goalColumn=d.left}),toggleOverwrite:function(){(this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")},hasFocus:function(){return this.state.focused},scrollTo:ba(null,function(a,b){eb(this,a,b)}),getScrollInfo:function(){var a=this.display.scroller,b=ie;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-b,width:a.scrollWidth-b,clientHeight:a.clientHeight-b,clientWidth:a.clientWidth-b}},scrollIntoView:ba(null,function(a,b){"number"==typeof a&&(a=Pa(a,0)),b||(b=0);var c=a;a&&null==a.line||(this.curOp.scrollToPos=a?Ua(this.doc,a):this.doc.sel.head,this.curOp.scrollToPosMargin=b,c=V(this,this.curOp.scrollToPos));var d=db(this,c.left,c.top-b,c.right,c.bottom+b);eb(this,d.scrollLeft,d.scrollTop)}),setSize:function(a,b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a}null!=a&&(this.display.wrapper.style.width=c(a)),null!=b&&(this.display.wrapper.style.height=c(b)),this.refresh()},on:function(a,b){Hc(this,a,b)},off:function(a,b){Ic(this,a,b)},operation:function(a){return da(this,a)},refresh:ba(null,function(){R(this),eb(this,this.doc.scrollLeft,this.doc.scrollTop),ea(this)}),swapDoc:ba(null,function(a){var b=this.doc;return b.cm=null,hc(this,a),R(this),ia(this,!0),eb(this,a.scrollLeft,a.scrollTop),b}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};var Sd=a.optionHandlers={},Td=a.defaults={},Ud=a.Init={toString:function(){return"CodeMirror.Init"}};mb("value","",function(a,b){a.setValue(b)},!0),mb("mode",null,function(a,b){a.doc.modeOption=b,c(a)},!0),mb("indentUnit",2,c,!0),mb("indentWithTabs",!1),mb("smartIndent",!0),mb("tabSize",4,function(a){c(a),R(a),ea(a)},!0),mb("electricChars",!0),mb("rtlMoveVisually",!Dd),mb("theme","default",function(a){h(a),i(a)},!0),mb("keyMap","default",g),mb("extraKeys",null),mb("onKeyEvent",null),mb("onDragEvent",null),mb("lineWrapping",!1,d,!0),mb("gutters",[],function(a){m(a.options),i(a)},!0),mb("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?s(a.display)+"px":"0",a.refresh()},!0),mb("lineNumbers",!1,function(a){m(a.options),i(a)},!0),mb("firstLineNumber",1,i,!0),mb("lineNumberFormatter",function(a){return a},i,!0),mb("showCursorWhenSelecting",!1,B,!0),mb("readOnly",!1,function(a,b){"nocursor"==b?(Ca(a),a.display.input.blur()):b||ia(a,!0)}),mb("dragDrop",!0),mb("cursorBlinkRate",530),mb("cursorHeight",1),mb("workTime",100),mb("workDelay",100),mb("flattenSpans",!0),mb("pollInterval",100),mb("undoDepth",40,function(a,b){a.doc.history.undoDepth=b}),mb("historyEventDelay",500),mb("viewportMargin",10,function(a){a.refresh()},!0),mb("maxHighlightLength",1e4,function(a){c(a),a.refresh()},!0),mb("moveInputWithCursor",!0,function(a,b){b||(a.display.inputDiv.style.top=a.display.inputDiv.style.left=0)}),mb("tabindex",null,function(a,b){a.display.input.tabIndex=b||""}),mb("autofocus",null);var Vd=a.modes={},Wd=a.mimeModes={};a.defineMode=function(b,c){if(a.defaults.mode||"null"==b||(a.defaults.mode=b),arguments.length>2){c.dependencies=[];for(var d=2;d<arguments.length;++d)c.dependencies.push(arguments[d])}Vd[b]=c},a.defineMIME=function(a,b){Wd[a]=b},a.resolveMode=function(b){if("string"==typeof b&&Wd.hasOwnProperty(b))b=Wd[b];else if("string"==typeof b&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b))return a.resolveMode("application/xml");return"string"==typeof b?{name:b}:b||{name:"null"}},a.getMode=function(b,c){c=a.resolveMode(c);var d=Vd[c.name];if(!d)return a.getMode(b,"text/plain");var e=d(b,c);if(Xd.hasOwnProperty(c.name)){var f=Xd[c.name];for(var g in f)f.hasOwnProperty(g)&&(e.hasOwnProperty(g)&&(e["_"+g]=e[g]),e[g]=f[g])}return e.name=c.name,e},a.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}}),a.defineMIME("text/plain","null");var Xd=a.modeExtensions={};a.extendMode=function(a,b){Uc(b,Xd.hasOwnProperty(a)?Xd[a]:Xd[a]={})},a.defineExtension=function(b,c){a.prototype[b]=c},a.defineDocExtension=function(a,b){de.prototype[a]=b},a.defineOption=mb;var Yd=[];a.defineInitHook=function(a){Yd.push(a)},a.copyState=nb,a.startState=ob,a.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);b=c.state,a=c.mode}return c||{mode:a,state:b}};var Zd=a.commands={selectAll:function(a){a.setSelection(Pa(a.firstLine(),0),Pa(a.lastLine()))},killLine:function(a){var b=a.getCursor(!0),c=a.getCursor(!1),d=!Qa(b,c);d||a.getLine(b.line).length!=b.ch?a.replaceRange("",b,d?c:Pa(b.line),"+delete"):a.replaceRange("",b,Pa(b.line+1,0),"+delete")},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",Pa(b,0),Pa(b),"+delete")},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.extendSelection(Pa(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(Pa(a.lastLine()))},goLineStart:function(a){a.extendSelection(jd(a,a.getCursor().line))},goLineStartSmart:function(a){var b=a.getCursor(),c=jd(a,b.line),d=a.getLineHandle(c.line),e=pc(d);if(e&&0!=e[0].level)a.extendSelection(c);else{var f=Math.max(0,d.text.search(/\S/)),g=b.line==c.line&&b.ch<=f&&b.ch;a.extendSelection(Pa(c.line,g?0:f))}},goLineEnd:function(a){a.extendSelection(kd(a,a.getCursor().line))},goLineRight:function(a){var b=a.charCoords(a.getCursor(),"div").top+5;a.extendSelection(a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div"))},goLineLeft:function(a){var b=a.charCoords(a.getCursor(),"div").top+5;a.extendSelection(a.coordsChar({left:0,top:b},"div"))},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t","end","+input")},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.replaceSelection("\t","end","+input")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);b.ch>0&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),Pa(b.line,b.ch-1),Pa(b.line,b.ch+1))},newlineAndIndent:function(a){ba(a,function(){a.replaceSelection("\n","end","+input"),a.indentLine(a.getCursor().line,null,!0)})()},toggleOverwrite:function(a){a.toggleOverwrite()}},$d=a.keyMap={};$d.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},$d.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},$d.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},$d.default=Cd?$d.macDefault:$d.pcDefault,$d.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},a.lookupKey=qb,a.isModifierKey=rb,a.keyName=sb,a.fromTextArea=function(b,c){function d(){b.value=i.getValue()}if(c||(c={}),c.value=b.value,!c.tabindex&&b.tabindex&&(c.tabindex=b.tabindex),!c.placeholder&&b.placeholder&&(c.placeholder=b.placeholder),null==c.autofocus){var e=document.body;try{e=document.activeElement}catch(a){}c.autofocus=e==b||null!=b.getAttribute("autofocus")&&e==document.body}if(b.form&&(Hc(b.form,"submit",d),!c.leaveSubmitMethodAlone)){var f=b.form,g=f.submit;try{var h=f.submit=function(){d(),f.submit=g,f.submit(),f.submit=h}}catch(a){}}b.style.display="none";var i=a(function(a){b.parentNode.insertBefore(a,b.nextSibling)},c);return i.save=d,i.getTextArea=function(){return b},i.toTextArea=function(){d(),b.parentNode.removeChild(i.getWrapperElement()),b.style.display="",b.form&&(Ic(b.form,"submit",d),"function"==typeof b.form.submit&&(b.form.submit=g))},i},tb.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a)var c=b==a;else var c=b&&(a.test?a.test(b):a(b));if(c)return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){var b=this.string.indexOf(a,this.pos);if(b>-1)return this.pos=b,!0},backUp:function(a){this.pos-=a},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Oc(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:function(){return Oc(this.string,null,this.tabSize)},match:function(a,b,c){if("string"!=typeof a){var d=this.string.slice(this.pos).match(a);return d&&d.index>0?null:(d&&!1!==b&&(this.pos+=d[0].length),d)}var e=function(a){return c?a.toLowerCase():a};if(e(this.string.substr(this.pos,a.length))==e(a))return!1!==b&&(this.pos+=a.length),!0},current:function(){return this.string.slice(this.start,this.pos)}},a.StringStream=tb,a.TextMarker=ub,ub.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;b&&_(a);for(var c=null,d=null,e=0;e<this.lines.length;++e){var f=this.lines[e],g=yb(f.markedSpans,this);null!=g.to&&(d=mc(f)),f.markedSpans=zb(f.markedSpans,g),null!=g.from?c=mc(f):this.collapsed&&!Kb(this.doc,f)&&a&&lc(f,Z(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(var e=0;e<this.lines.length;++e){var h=Jb(a.doc,this.lines[e]),i=k(a.doc,h);i>a.display.maxLineLength&&(a.display.maxLine=h,a.display.maxLineLength=i,a.display.maxLineChanged=!0)}null!=c&&a&&ea(a,c,d+1),this.lines.length=0,this.explicitlyCleared=!0,this.collapsed&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&$a(a)),b&&aa(a),Kc(this,"clear")}},ub.prototype.find=function(){for(var a,b,c=0;c<this.lines.length;++c){var d=this.lines[c],e=yb(d.markedSpans,this);if(null!=e.from||null!=e.to){var f=mc(d);null!=e.from&&(a=Pa(f,e.from)),null!=e.to&&(b=Pa(f,e.to))}}return"bookmark"==this.type?a:a&&{from:a,to:b}},ub.prototype.getOptions=function(a){var b=this.replacedWith;return{className:this.className,inclusiveLeft:this.inclusiveLeft,inclusiveRight:this.inclusiveRight,atomic:this.atomic,collapsed:this.collapsed,replacedWith:a?b&&b.cloneNode(!0):b,readOnly:this.readOnly,startStyle:this.startStyle,endStyle:this.endStyle}},ub.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=Sc(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)},ub.prototype.detachLine=function(a){if(this.lines.splice(Sc(this.lines,a),1),!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;(b.maybeHiddenMarkers||(b.maybeHiddenMarkers=[])).push(this)}},a.SharedTextMarker=wb,wb.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();Kc(this,"clear")}},wb.prototype.find=function(){return this.primary.find()},wb.prototype.getOptions=function(a){var b=this.primary.getOptions(a);return b.shared=!0,b};var _d=a.LineWidget=function(a,b,c){for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.cm=a,this.node=b};_d.prototype.clear=Ob(function(){var a=this.line.widgets,b=mc(this.line);if(null!=b&&a){for(var c=0;c<a.length;++c)a[c]==this&&a.splice(c--,1);a.length||(this.line.widgets=null),lc(this.line,Math.max(0,this.line.height-Pb(this))),ea(this.cm,b,b+1)}}),_d.prototype.changed=Ob(function(){var a=this.height;this.height=null;var b=Pb(this)-a;if(b){lc(this.line,this.line.height+b);var c=mc(this.line);ea(this.cm,c,c+1)}});var ae={},be=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;ec.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;c<d;++c){var e=this.lines[c];this.height-=e.height,Tb(e),Kc(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertInner:function(a,b,c){this.height+=c,this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(var d=0,e=b.length;d<e;++d)b[d].parent=this},iterN:function(a,b,c){for(var d=a+b;a<d;++a)if(c(this.lines[a]))return!0}},fc.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(a<e){var f=Math.min(b,e-a),g=d.height;if(d.removeInner(a,f),this.height-=g-d.height,e==f&&(this.children.splice(c--,1),d.parent=null),0==(b-=f))break;a=0}else a-=e}if(this.size-b<25){var h=[];this.collapse(h),this.children=[new ec(h)],this.children[0].parent=this}},collapse:function(a){for(var b=0,c=this.children.length;b<c;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length,this.height+=c;for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],g=f.chunkSize();if(a<=g){if(f.insertInner(a,b,c),f.lines&&f.lines.length>50){for(;f.lines.length>50;){var h=f.lines.splice(f.lines.length-25,25),i=new ec(h);f.height-=i.height,this.children.splice(d+1,0,i),i.parent=this}this.maybeSpill()}break}a-=g}},maybeSpill:function(){if(!(this.children.length<=10)){var a=this;do{var b=a.children.splice(a.children.length-5,5),c=new fc(b);if(a.parent){a.size-=c.size,a.height-=c.height;var d=Sc(a.parent.children,a);a.parent.children.splice(d+1,0,c)}else{var e=new fc(a.children);e.parent=a,a.children=[e,c],a=e}c.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d],g=f.chunkSize();if(a<g){var h=Math.min(b,g-a);if(f.iterN(a,h,c))return!0;if(0==(b-=h))break;a=0}else a-=g}}};var ce=0,de=a.Doc=function(a,b,c){if(!(this instanceof de))return new de(a,b,c);null==c&&(c=0),fc.call(this,[new ec([Rb("",null)])]),this.first=c,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=qc(),this.frontier=c;var d=Pa(c,0);this.sel={from:d,to:d,head:d,anchor:d,shift:!1,extend:!1,goalColumn:null},this.id=++ce,this.modeOption=b,"string"==typeof a&&(a=re(a)),dc(this,{from:d,to:d,text:a},null,{head:d,anchor:d})};de.prototype=Tc(fc.prototype,{iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0,e=b.length;d<e;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=kc(this,this.first,this.first+this.size);return!1===a?b:b.join(a||"\n")},setValue:function(a){var b=Pa(this.first,0),c=this.first+this.size-1;Ia(this,{from:b,to:Pa(c,ic(this,c).text.length),text:re(a),origin:"setValue"},{head:b,anchor:b},!0)},replaceRange:function(a,b,c,d){b=Ua(this,b),c=c?Ua(this,c):b,Oa(this,a,b,c,d)},getRange:function(a,b,c){var d=jc(this,Ua(this,a),Ua(this,b));return!1===c?d:d.join(c||"\n")},getLine:function(a){var b=this.getLineHandle(a);return b&&b.text},setLine:function(a,b){Wa(this,a)&&Oa(this,b,Pa(a,0),Ua(this,Pa(a)))},removeLine:function(a){a?Oa(this,"",Ua(this,Pa(a-1)),Ua(this,Pa(a))):Oa(this,"",Pa(0,0),Ua(this,Pa(1,0)))},getLineHandle:function(a){if(Wa(this,a))return ic(this,a)},getLineNumber:function(a){return mc(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return Ua(this,a)},getCursor:function(a){var b,c=this.sel;return b=null==a||"head"==a?c.head:"anchor"==a?c.anchor:"end"==a||!1===a?c.to:c.from,Sa(b)},somethingSelected:function(){return!Qa(this.sel.head,this.sel.anchor)},setCursor:ca(function(a,b,c){var d=Ua(this,"number"==typeof a?Pa(a,b||0):a);c?Xa(this,d):Za(this,d,d)}),setSelection:ca(function(a,b){Za(this,Ua(this,a),Ua(this,b||a))}),extendSelection:ca(function(a,b){Xa(this,Ua(this,a),b&&Ua(this,b))}),getSelection:function(a){return this.getRange(this.sel.from,this.sel.to,a)},replaceSelection:function(a,b,c){Ia(this,{from:this.sel.from,to:this.sel.to,text:re(a),origin:c},b||"around")},undo:ca(function(){Ka(this,"undo")}),redo:ca(function(){Ka(this,"redo")}),setExtending:function(a){this.sel.extend=a},historySize:function(){var a=this.history;return{undo:a.done.length,redo:a.undone.length}},clearHistory:function(){this.history=qc()},markClean:function(){this.history.dirtyCounter=0,this.history.lastOp=this.history.lastOrigin=null},isClean:function(){return 0==this.history.dirtyCounter},getHistory:function(){return{done:wc(this.history.done),undone:wc(this.history.undone)}},setHistory:function(a){var b=this.history=qc();b.done=a.done.slice(0),b.undone=a.undone.slice(0)},markText:function(a,b,c){return vb(this,Ua(this,a),Ua(this,b),c,"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft};return a=Ua(this,a),vb(this,a,a,c,"bookmark")},findMarksAt:function(a){a=Ua(this,a);var b=[],c=ic(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},getAllMarks:function(){var a=[];return this.iter(function(b){var c=b.markedSpans;if(c)for(var d=0;d<c.length;++d)null!=c[d].from&&a.push(c[d].marker)}),a},posFromIndex:function(a){var b,c=this.first;return this.iter(function(d){var e=d.text.length+1;if(e>a)return b=a,!0;a-=e,++c}),Ua(this,Pa(c,b))},indexFromPos:function(a){a=Ua(this,a);var b=a.ch;return a.line<this.first||a.ch<0?0:(this.iter(this.first,a.line,function(a){b+=a.text.length+1}),b)},copy:function(a){var b=new de(kc(this,this.first,this.first+this.size),this.modeOption,this.first);return b.scrollTop=this.scrollTop,b.scrollLeft=this.scrollLeft,b.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory())),b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from),null!=a.to&&a.to<c&&(c=a.to);var d=new de(kc(this,b,c),a.mode||this.modeOption,b);return a.sharedHist&&(d.history=this.history),(this.linked||(this.linked=[])).push({doc:d,sharedHist:a.sharedHist}),d.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}],d},unlinkDoc:function(b){if(b instanceof a&&(b=b.doc),this.linked)for(var c=0;c<this.linked.length;++c){var d=this.linked[c];if(d.doc==b){this.linked.splice(c,1),b.unlinkDoc(this);break}}if(b.history==this.history){var e=[b.id];gc(b,function(a){e.push(a.id)},!0),b.history=qc(),b.history.done=wc(this.history.done,e),b.history.undone=wc(this.history.undone,e)}},iterLinkedDocs:function(a){gc(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),de.prototype.eachLine=de.prototype.iter;var ee="iter insert remove copy getEditor".split(" ");for(var fe in de.prototype)de.prototype.hasOwnProperty(fe)&&Sc(ee,fe)<0&&(a.prototype[fe]=function(a){return function(){return a.apply(this.doc,arguments)}}(de.prototype[fe]));a.e_stop=Ec,a.e_preventDefault=Cc,a.e_stopPropagation=Dc;var ge,he=0;a.on=Hc,a.off=Ic,a.signal=Jc;var ie=30,je=a.Pass={toString:function(){return"CodeMirror.Pass"}};Nc.prototype={set:function(a,b){clearTimeout(this.id),this.id=setTimeout(b,a)}},a.countColumn=Oc;var ke=[""],le=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/,me=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;a.replaceGetRect=function(a){bd=a};var ne=function(){if(qd)return!1;var a=Zc("div");return"draggable"in a||"dragDrop"in a}(),oe=/^$/;nd?oe=/$'/:vd&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?oe=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:rd&&(oe=/[~!#%&*)=+}\]|\"\.>,:;][({[<]|-[^\-?\.]|\?[\w~`@#$%\^&*(_=+{[|><]/);var pe,qe,re=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)};a.splitLines=re;var se=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(a){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(a){}return!(!b||b.parentElement()!=a)&&0!=b.compareEndPoints("StartToEnd",b)},te=function(){var a=Zc("div");return"oncopy"in a||(a.setAttribute("oncopy","return;"),"function"==typeof a.oncopy)}(),ue={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};a.keyNames=ue,function(){for(var a=0;a<10;a++)ue[a+48]=String(a);for(var a=65;a<=90;a++)ue[a]=String.fromCharCode(a);for(var a=1;a<=12;a++)ue[a+111]=ue[a+63235]="F"+a}();var ve=function(){function a(a){return a<=255?b.charAt(a):1424<=a&&a<=1524?"R":1536<=a&&a<=1791?c.charAt(a-1536):1792<=a&&a<=2220?"r":"L"}var b="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",c="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",d=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,e=/[stwN]/,f=/[LRr]/,g=/[Lb1n]/,h=/[1n]/,i="L";return function(b){if(!d.test(b))return!1;for(var c,j=b.length,k=[],l=0;l<j;++l)k.push(c=a(b.charCodeAt(l)));for(var l=0,m=i;l<j;++l){var c=k[l];"m"==c?k[l]=m:m=c}for(var l=0,n=i;l<j;++l){var c=k[l];"1"==c&&"r"==n?k[l]="n":f.test(c)&&(n=c,"r"==c&&(k[l]="R"))}for(var l=1,m=k[0];l<j-1;++l){var c=k[l];"+"==c&&"1"==m&&"1"==k[l+1]?k[l]="1":","!=c||m!=k[l+1]||"1"!=m&&"n"!=m||(k[l]=m),m=c}for(var l=0;l<j;++l){var c=k[l];if(","==c)k[l]="N";else if("%"==c){for(var o=l+1;o<j&&"%"==k[o];++o);for(var p=l&&"!"==k[l-1]||o<j-1&&"1"==k[o]?"1":"N",q=l;q<o;++q)k[q]=p;l=o-1}}for(var l=0,n=i;l<j;++l){var c=k[l];"L"==n&&"1"==c?k[l]="L":f.test(c)&&(n=c)}for(var l=0;l<j;++l)if(e.test(k[l])){for(var o=l+1;o<j&&e.test(k[o]);++o);for(var r="L"==(l?k[l-1]:i),s="L"==(o<j-1?k[o]:i),p=r||s?"L":"R",q=l;q<o;++q)k[q]=p;l=o-1}for(var t,u=[],l=0;l<j;)if(g.test(k[l])){var v=l;for(++l;l<j&&g.test(k[l]);++l);u.push({from:v,to:l,level:0})}else{var w=l,x=u.length;for(++l;l<j&&"L"!=k[l];++l);for(var q=w;q<l;)if(h.test(k[q])){w<q&&u.splice(x,0,{from:w,to:q,level:1});var y=q;for(++q;q<l&&h.test(k[q]);++q);u.splice(x,0,{from:y,to:q,level:2}),w=q}else++q;w<l&&u.splice(x,0,{from:w,to:l,level:1})}return 1==u[0].level&&(t=b.match(/^\s+/))&&(u[0].from=t[0].length,u.unshift({from:0,to:t[0].length,level:0})),1==Qc(u).level&&(t=b.match(/\s+$/))&&(Qc(u).to-=t[0].length,u.push({from:j-t[0].length,to:j,level:0})),u[0].level!=Qc(u).level&&u.push({from:j,to:j,level:u[0].level}),u}}();return a.version="3.12",a}(),function(){function a(a,e){var f=a.getCursor(),g=a.getTokenAt(f),h=CodeMirror.innerMode(a.getMode(),g.state),i=h.state;if("xml"!=h.mode.name)return CodeMirror.Pass;var j=a.getOption("autoCloseTags"),k="html"==h.mode.configuration,l="object"==typeof j&&j.dontCloseTags||k&&c,m="object"==typeof j&&j.indentTags||k&&d;if(">"==e&&i.tagName){var n=i.tagName;g.end>f.ch&&(n=n.slice(0,n.length-g.end+f.ch));var o=n.toLowerCase();if("tag"==g.type&&"closeTag"==i.type||g.string.indexOf("/")==g.string.length-1||l&&b(l,o)>-1)return CodeMirror.Pass;var p=m&&b(m,o)>-1,q=p?CodeMirror.Pos(f.line+1,0):CodeMirror.Pos(f.line,f.ch+1);return a.replaceSelection(">"+(p?"\n\n":"")+"</"+n+">",{head:q,anchor:q}),void(p&&(a.indentLine(f.line+1),a.indentLine(f.line+2)))}if("/"==e&&"<"==g.string){var n=i.context&&i.context.tagName;return void(n&&a.replaceSelection("/"+n+">","end"))}return CodeMirror.Pass}function b(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;++c)if(a[c]==b)return c;return-1}CodeMirror.defineOption("autoCloseTags",!1,function(b,c,d){if(!c||d!=CodeMirror.Init&&d)!c&&d!=CodeMirror.Init&&d&&b.removeKeyMap("autoCloseTags");else{var e={name:"autoCloseTags"};("object"!=typeof c||c.whenClosing)&&(e["'/'"]=function(b){return a(b,"/")}),("object"!=typeof c||c.whenOpening)&&(e["'>'"]=function(b){return a(b,">")}),b.addKeyMap(e)}})
;var c=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],d=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"]}(),function(){function a(a){var b,c=a.getCursor(),d=a.getTokenAt(c),e=CodeMirror.innerMode(a.getMode(),d.state).mode;if("comment"==d.type&&e.blockCommentStart){var f,g=d.string.indexOf(e.blockCommentEnd),h=a.getRange(CodeMirror.Pos(c.line,0),CodeMirror.Pos(c.line,d.end));if(-1!=g&&g==d.string.length-e.blockCommentEnd.length);else if(0==d.string.indexOf(e.blockCommentStart)){if(b=h.slice(0,d.start),!/^\s*$/.test(b)){b="";for(var i=0;i<d.start;++i)b+=" "}}else-1!=(f=h.indexOf(e.blockCommentContinue))&&f+e.blockCommentContinue.length>d.start&&/^\s*$/.test(h.slice(0,f))&&(b=h.slice(0,f))}if(null==b)return CodeMirror.Pass;a.replaceSelection("\n"+b+e.blockCommentContinue,"end")}for(var b=["clike","css","javascript"],c=0;c<b.length;++c)CodeMirror.extendMode(b[c],{blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * "});CodeMirror.defineOption("continueComments",null,function(b,c,d){d&&d!=CodeMirror.Init&&b.removeKeyMap("continueComment");var e={name:"continueComment"};e["string"==typeof c?c:"Enter"]=a,b.addKeyMap(e)})}(),function(){"use strict";var a=/^(\s*)([*+-]|(\d+)\.)(\s*)/;CodeMirror.commands.newlineAndIndentContinueMarkdownList=function(b){var c,d=b.getCursor();if(!b.getStateAfter(d.line).list||!(c=b.getLine(d.line).match(a)))return void b.execCommand("newlineAndIndent");var e=c[1],f=c[4],g="*+-".indexOf(c[2])>=0?c[2]:parseInt(c[3],10)+1+".";b.replaceSelection("\n"+e+g+f,"end")}}(),function(){function a(a){function b(b,d,g){if(b.text){var h=k?0:b.text.length-1,i=k?b.text.length:-1;if(b.text.length>c)return null;var j=b.text.length<1e3;for(null!=g&&(h=g+l);h!=i;h+=l){var p=b.text.charAt(h);if(o.test(p)&&(!j||a.getTokenAt(e(d,h+1)).type==m)){var q=f[p];if(">"==q.charAt(1)==k)n.push(p);else{if(n.pop()!=q.charAt(0))return{pos:h,match:!1};if(!n.length)return{pos:h,match:!0}}}}}}var c=a.state._matchBrackets.maxScanLineLength||1e4,d=a.getCursor(),g=a.getLineHandle(d.line),h=d.ch-1,i=h>=0&&f[g.text.charAt(h)]||f[g.text.charAt(++h)];if(!i)return null;for(var j,k=">"==i.charAt(1),l=k?1:-1,m=a.getTokenAt(e(d.line,h+1)).type,n=[g.text.charAt(h)],o=/[(){}[\]]/,p=d.line,q=k?Math.min(p+100,a.lineCount()):Math.max(-1,p-100);p!=q&&!(j=p==d.line?b(g,p,h):b(a.getLineHandle(p),p));p+=l);return{from:e(d.line,h),to:j&&e(p,j.pos),match:j&&j.match}}function b(b,c){var f=b.state._matchBrackets.maxHighlightLineLength||1e3,g=a(b);if(!(!g||b.getLine(g.from.line).length>f||g.to&&b.getLine(g.to.line).length>f)){var h=g.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",i=b.markText(g.from,e(g.from.line,g.from.ch+1),{className:h}),j=g.to&&b.markText(g.to,e(g.to.line,g.to.ch+1),{className:h});d&&b.state.focused&&b.display.input.focus();var k=function(){b.operation(function(){i.clear(),j&&j.clear()})};if(!c)return k;setTimeout(k,800)}}function c(a){a.operation(function(){g&&(g(),g=null),a.somethingSelected()||(g=b(a,!1))})}var d=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),e=CodeMirror.Pos,f={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},g=null;CodeMirror.defineOption("matchBrackets",!1,function(a,b,d){d&&d!=CodeMirror.Init&&a.off("cursorActivity",c),b&&(a.state._matchBrackets="object"==typeof b?b:{},a.on("cursorActivity",c))}),CodeMirror.defineExtension("matchBrackets",function(){b(this,!0)}),CodeMirror.defineExtension("findMatchingBracket",function(){return a(this)})}(),CodeMirror.newFoldFunction=function(a,b){if(null==b&&(b="↔"),"string"==typeof b){var c=document.createTextNode(b);b=document.createElement("span"),b.appendChild(c),b.className="CodeMirror-foldmarker"}return function(c,d){"number"==typeof d&&(d=CodeMirror.Pos(d,0));var e=a(c,d);if(e){for(var f=c.findMarksAt(e.from),g=0,h=0;h<f.length;++h)f[h].__isFold&&(++g,f[h].clear());if(!g){var i=b.cloneNode(!0);CodeMirror.on(i,"mousedown",function(){j.clear()});var j=c.markText(e.from,e.to,{replacedWith:i,clearOnEnter:!0,__isFold:!0})}}}},CodeMirror.braceRangeFinder=function(a,b){for(var c,d,e=b.line,f=a.getLine(e),g=f.length;g>0;){var h=f.lastIndexOf("{",g);if(h<b.ch)break;if(d=a.getTokenAt(CodeMirror.Pos(e,h+1)).type,!/^(comment|string)/.test(d)){c=h;break}g=h-1}if(!(null==c||f.lastIndexOf("}")>c)){var i,j,k=1,l=a.lineCount();a:for(var m=e+1;m<l;++m)for(var n=a.getLine(m),o=0;;){var p=n.indexOf("{",o),q=n.indexOf("}",o);if(p<0&&(p=n.length),q<0&&(q=n.length),(o=Math.min(p,q))==n.length)break;if(a.getTokenAt(CodeMirror.Pos(m,o+1)).type==d)if(o==p)++k;else if(!--k){i=m,j=o;break a}++o}if(null!=i&&i!=e+1)return{from:CodeMirror.Pos(e,c+1),to:CodeMirror.Pos(i,j)}}},CodeMirror.tagRangeFinder=function(){var a="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",b=a+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",c=new RegExp("<(/?)(["+a+"]["+b+"]*)","g");return function(a,b){function d(){if(!(h>=a.lastLine()))return i=0,j=a.getLine(++h),!0}function e(){for(;;){var a=j.indexOf(">",i);if(-1==a){if(d())continue;return}var b=j.lastIndexOf("/",a),c=b>-1&&/^\s*$/.test(j.slice(b+1,a));return i=a+1,c?"selfClose":"regular"}}function f(){for(;;){c.lastIndex=i;var a=c.exec(j);if(!a){if(d())continue;return}return i=a.index+a[0].length,a}}for(var g,h=b.line,i=b.ch,j=a.getLine(h),k=[];;){var l,m=f();if(!m||h!=b.line||!(l=e()))return;if(!m[1]&&"selfClose"!=l){k.push(m[2]),g=i;break}}for(;;){var l,n=f(),o=h,p=i-(n?n[0].length:0);if(!n||!(l=e()))return;if("selfClose"!=l)if(n[1]){for(var q=k.length-1;q>=0;--q)if(k[q]==n[2]){k.length=q;break}if(!k.length)return{from:CodeMirror.Pos(b.line,g),to:CodeMirror.Pos(o,p)}}else k.push(n[2])}}}(),function(){CodeMirror.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(a,b){return/^[;{}]$/.test(b)}}),CodeMirror.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(a,b,c,d){return this.jsonMode?/^[\[,{]$/.test(b)||/^}/.test(c):(";"!=b||!d.lexical||")"!=d.lexical.type)&&(/^[;{}]$/.test(b)&&!/^;/.test(c))}});var a=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;CodeMirror.extendMode("xml",{commentStart:"\x3c!--",commentEnd:"--\x3e",newlineAfterToken:function(b,c,d,e){var f=!1;return"html"==this.configuration&&(f=!!e.context&&a.test(e.context.tagName)),!f&&("tag"==b&&/>$/.test(c)&&e.context||/^</.test(d))}}),CodeMirror.defineExtension("commentRange",function(a,b,c){var d=this,e=CodeMirror.innerMode(d.getMode(),d.getTokenAt(b).state).mode;d.operation(function(){if(a)d.replaceRange(e.commentEnd,c),d.replaceRange(e.commentStart,b),b.line==c.line&&b.ch==c.ch&&d.setCursor(b.line,b.ch+e.commentStart.length);else{var f=d.getRange(b,c),g=f.indexOf(e.commentStart),h=f.lastIndexOf(e.commentEnd);g>-1&&h>-1&&h>g&&(f=f.substr(0,g)+f.substring(g+e.commentStart.length,h)+f.substr(h+e.commentEnd.length)),d.replaceRange(f,b,c)}})}),CodeMirror.defineExtension("autoIndentRange",function(a,b){var c=this;this.operation(function(){for(var d=a.line;d<=b.line;d++)c.indentLine(d,"smart")})}),CodeMirror.defineExtension("autoFormatRange",function(a,b){function c(){i+="\n",k=!0,++j}for(var d=this,e=d.getMode(),f=d.getRange(a,b).split("\n"),g=CodeMirror.copyState(e,d.getTokenAt(a).state),h=d.getOption("tabSize"),i="",j=0,k=0==a.ch,l=0;l<f.length;++l){for(var m=new CodeMirror.StringStream(f[l],h);!m.eol();){var n=CodeMirror.innerMode(e,g),o=e.token(m,g),p=m.current();m.start=m.pos,k&&!/\S/.test(p)||(i+=p,k=!1),!k&&n.mode.newlineAfterToken&&n.mode.newlineAfterToken(o,p,m.string.slice(m.pos)||f[l+1]||"",n.state)&&c()}!m.pos&&e.blankLine&&e.blankLine(g),!k&&l<f.length-1&&c()}d.operation(function(){d.replaceRange(i,a,b);for(var c=a.line+1,e=a.line+j;c<=e;++c)d.indentLine(c,"smart");d.setSelection(a,d.getCursor(!1))})})}(),CodeMirror.defineMode("javascript",function(a,b){function c(a,b,c){return b.tokenize=c,c(a,b)}function d(a,b){for(var c,d=!1;null!=(c=a.next());){if(c==b&&!d)return!1;d=!d&&"\\"==c}return d}function e(a,b,c){return R=a,S=c,b}function f(a,b){var f=a.next();if('"'==f||"'"==f)return c(a,b,g(f));if(/[\[\]{}\(\),;\:\.]/.test(f))return e(f);if("0"==f&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),e("number","number");if(/\d/.test(f)||"-"==f&&a.eat(/\d/))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),e("number","number");if("/"==f)return a.eat("*")?c(a,b,h):a.eat("/")?(a.skipToEnd(),e("comment","comment")):"operator"==b.lastType||"keyword c"==b.lastType||/^[\[{}\(,;:]$/.test(b.lastType)?(d(a,"/"),a.eatWhile(/[gimy]/),e("regexp","string-2")):(a.eatWhile(X),e("operator",null,a.current()));if("#"==f)return a.skipToEnd(),e("error","error");if(X.test(f))return a.eatWhile(X),e("operator",null,a.current());a.eatWhile(/[\w\$_]/);var i=a.current(),j=W.propertyIsEnumerable(i)&&W[i];return j&&"."!=b.lastType?e(j.type,j.style,i):e("variable","variable",i)}function g(a){return function(b,c){return d(b,a)||(c.tokenize=f),e("string","string")}}function h(a,b){for(var c,d=!1;c=a.next();){if("/"==c&&d){b.tokenize=f;break}d="*"==c}return e("comment","comment")}function i(a,b,c,d,e,f){this.indented=a,this.column=b,this.type=c,this.prev=e,this.info=f,null!=d&&(this.align=d)}function j(a,b){for(var c=a.localVars;c;c=c.next)if(c.name==b)return!0}function k(a,b,c,d,e){var f=a.cc;for(Z.state=a,Z.stream=e,Z.marked=null,Z.cc=f,a.lexical.hasOwnProperty("align")||(a.lexical.align=!0);;){if((f.length?f.pop():U?u:t)(c,d)){for(;f.length&&f[f.length-1].lex;)f.pop()();return Z.marked?Z.marked:"variable"==c&&j(a,d)?"variable-2":b}}}function l(){for(var a=arguments.length-1;a>=0;a--)Z.cc.push(arguments[a])}function m(){return l.apply(null,arguments),!0}function n(a){function b(b){for(var c=b;c;c=c.next)if(c.name==a)return!0;return!1}var c=Z.state;if(c.context){if(Z.marked="def",b(c.localVars))return;c.localVars={name:a,next:c.localVars}}else{if(b(c.globalVars))return;c.globalVars={name:a,next:c.globalVars}}}function o(){Z.state.context={prev:Z.state.context,vars:Z.state.localVars},Z.state.localVars=$}function p(){Z.state.localVars=Z.state.context.vars,Z.state.context=Z.state.context.prev}function q(a,b){var c=function(){var c=Z.state;c.lexical=new i(c.indented,Z.stream.column(),a,null,c.lexical,b)};return c.lex=!0,c}function r(){var a=Z.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function s(a){return function(b){return b==a?m():";"==a?l():m(arguments.callee)}}function t(a){return"var"==a?m(q("vardef"),I,s(";"),r):"keyword a"==a?m(q("form"),u,t,r):"keyword b"==a?m(q("form"),t,r):"{"==a?m(q("}"),F,r):";"==a?m():"if"==a?m(q("form"),u,t,r,K(Z.state.indented)):"function"==a?m(P):"for"==a?m(q("form"),s("("),q(")"),L,s(")"),r,t,r):"variable"==a?m(q("stat"),A):"switch"==a?m(q("form"),u,q("}","switch"),s("{"),F,r,r):"case"==a?m(u,s(":")):"default"==a?m(s(":")):"catch"==a?m(q("form"),o,s("("),Q,s(")"),t,r,p):l(q("stat"),u,s(";"),r)}function u(a){return w(a,y)}function v(a){return w(a,z)}function w(a,b){return Y.hasOwnProperty(a)?m(b):"function"==a?m(P):"keyword c"==a?m(x):"("==a?m(q(")"),x,s(")"),r,b):"operator"==a?m(u):"["==a?m(q("]"),E(v,"]"),r,b):"{"==a?m(q("}"),E(C,"}"),r,b):m()}function x(a){return a.match(/[;\}\)\],]/)?l():l(u)}function y(a,b){return","==a?m(u):z(a,b,y)}function z(a,b,c){return c||(c=z),"operator"==a?/\+\+|--/.test(b)?m(c):"?"==b?m(u,s(":"),u):m(u):";"!=a?"("==a?m(q(")","call"),E(v,")"),r,c):"."==a?m(B,c):"["==a?m(q("]"),u,s("]"),r,c):void 0:void 0}function A(a){return":"==a?m(r,t):l(y,s(";"),r)}function B(a){if("variable"==a)return Z.marked="property",m()}function C(a,b){if("variable"==a){if(Z.marked="property","get"==b||"set"==b)return m(D)}else"number"!=a&&"string"!=a||(Z.marked=a+" property");if(Y.hasOwnProperty(a))return m(s(":"),v)}function D(a){return":"==a?m(u):"variable"!=a?m(s(":"),u):(Z.marked="property",m(P))}function E(a,b){function c(d){if(","==d){var e=Z.state.lexical;return"call"==e.info&&(e.pos=(e.pos||0)+1),m(a,c)}return d==b?m():m(s(b))}return function(d){return d==b?m():l(a,c)}}function F(a){return"}"==a?m():l(t,F)}function G(a){return":"==a?m(H):l()}function H(a){return"variable"==a?(Z.marked="variable-3",m()):l()}function I(a,b){return"variable"==a?(n(b),V?m(G,J):m(J)):l()}function J(a,b){return"="==b?m(v,J):","==a?m(I):void 0}function K(a){return function(b,c){return"keyword b"==b&&"else"==c?(Z.state.lexical=new i(a,0,"form",null,Z.state.lexical),m(t,r)):l()}}function L(a){return"var"==a?m(I,s(";"),N):";"==a?m(N):"variable"==a?m(M):l(u,s(";"),N)}function M(a,b){return"in"==b?m(u):m(y,N)}function N(a,b){return";"==a?m(O):"in"==b?m(u):l(u,s(";"),O)}function O(a){")"!=a&&m(u)}function P(a,b){return"variable"==a?(n(b),m(P)):"("==a?m(q(")"),o,E(Q,")"),r,t,p):void 0}function Q(a,b){if("variable"==a)return n(b),V?m(G):m()}var R,S,T=a.indentUnit,U=b.json,V=b.typescript,W=function(){function a(a){return{type:a,style:"keyword"}}var b=a("keyword a"),c=a("keyword b"),d=a("keyword c"),e=a("operator"),f={type:"atom",style:"atom"},g={if:a("if"),while:b,with:b,else:c,do:c,try:c,finally:c,return:d,break:d,continue:d,new:d,delete:d,throw:d,var:a("var"),const:a("var"),let:a("var"),function:a("function"),catch:a("catch"),for:a("for"),switch:a("switch"),case:a("case"),default:a("default"),in:e,typeof:e,instanceof:e,true:f,false:f,null:f,undefined:f,NaN:f,Infinity:f,this:a("this")};if(V){var h={type:"variable",style:"variable-3"},i={interface:a("interface"),class:a("class"),extends:a("extends"),constructor:a("constructor"),public:a("public"),private:a("private"),protected:a("protected"),static:a("static"),super:a("super"),string:h,number:h,bool:h,any:h};for(var j in i)g[j]=i[j]}return g}(),X=/[+\-*&%=<>!?|~^]/,Y={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0},Z={state:null,column:null,marked:null,cc:null},$={name:"this",next:{name:"arguments"}};return r.lex=!0,{startState:function(a){return{tokenize:f,lastType:null,cc:[],lexical:new i((a||0)-T,0,"block",!1),localVars:b.localVars,globalVars:b.globalVars,context:b.localVars&&{vars:b.localVars},indented:0}},token:function(a,b){if(a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation()),b.tokenize!=h&&a.eatSpace())return null;var c=b.tokenize(a,b);return"comment"==R?c:(b.lastType="operator"!=R||"++"!=S&&"--"!=S?R:"incdec",k(b,c,R,S,a))},indent:function(a,c){if(a.tokenize==h)return CodeMirror.Pass;if(a.tokenize!=f)return 0;var d=c&&c.charAt(0),e=a.lexical;"stat"==e.type&&"}"==d&&(e=e.prev);var g=e.type,i=d==g;return null!=b.statementIndent&&(")"==g&&e.prev&&"stat"==e.prev.type&&(e=e.prev),"stat"==e.type)?e.indented+b.statementIndent:"vardef"==g?e.indented+("operator"==a.lastType||","==a.lastType?4:0):"form"==g&&"{"==d?e.indented:"form"==g?e.indented+T:"stat"==g?e.indented+("operator"==a.lastType||","==a.lastType?T:0):"switch"!=e.info||i?e.align?e.column+(i?0:1):e.indented+(i?0:T):e.indented+(/^(?:case|default)\b/.test(c)?T:2*T)},electricChars:":{}",jsonMode:U}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("text/ecmascript","javascript"),CodeMirror.defineMIME("application/javascript","javascript"),CodeMirror.defineMIME("application/ecmascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMode("xml",function(a,b){function c(a,b){function c(c){return b.tokenize=c,c(a,b)}var e=a.next();if("<"==e){if(a.eat("!"))return a.eat("[")?a.match("CDATA[")?c(f("atom","]]>")):null:a.match("--")?c(f("comment","--\x3e")):a.match("DOCTYPE",!0,!0)?(a.eatWhile(/[\w\._\-]/),c(g(1))):null;if(a.eat("?"))return a.eatWhile(/[\w\._\-]/),b.tokenize=f("meta","?>"),"meta";var h=a.eat("/");t="";for(var i;i=a.eat(/[^\s\u00a0=<>\"\'\/?]/);)t+=i;return t?(u=h?"closeTag":"openTag",b.tokenize=d,"tag"):"error"}if("&"==e){var j;return j=a.eat("#")?a.eat("x")?a.eatWhile(/[a-fA-F\d]/)&&a.eat(";"):a.eatWhile(/[\d]/)&&a.eat(";"):a.eatWhile(/[\w\.\-:]/)&&a.eat(";"),j?"atom":"error"}return a.eatWhile(/[^&<]/),null}function d(a,b){var d=a.next();return">"==d||"/"==d&&a.eat(">")?(b.tokenize=c,u=">"==d?"endTag":"selfcloseTag","tag"):"="==d?(u="equals",null):/[\'\"]/.test(d)?(b.tokenize=e(d),b.tokenize(a,b)):(a.eatWhile(/[^\s\u00a0=<>\"\']/),"word")}function e(a){return function(b,c){for(;!b.eol();)if(b.next()==a){c.tokenize=d;break}return"string"}}function f(a,b){return function(d,e){for(;!d.eol();){if(d.match(b)){e.tokenize=c;break}d.next()}return a}}function g(a){return function(b,d){for(var e;null!=(e=b.next());){if("<"==e)return d.tokenize=g(a+1),d.tokenize(b,d);if(">"==e){if(1==a){d.tokenize=c;break}return d.tokenize=g(a-1),d.tokenize(b,d)}}return"meta"}}function h(){for(var a=arguments.length-1;a>=0;a--)v.cc.push(arguments[a])}function i(){return h.apply(null,arguments),!0}function j(a,b){var c=A.doNotIndent.hasOwnProperty(a)||v.context&&v.context.noIndent;v.context={prev:v.context,tagName:a,indent:v.indented,startOfLine:b,noIndent:c}}function k(){v.context&&(v.context=v.context.prev)}function l(a){if("openTag"==a)return v.tagName=t,v.tagStart=w.column(),i(p,m(v.startOfLine));if("closeTag"==a){var b=!1;return v.context?v.context.tagName!=t&&(A.implicitlyClosed.hasOwnProperty(v.context.tagName.toLowerCase())&&k(),b=!v.context||v.context.tagName!=t):b=!0,b&&(x="error"),i(n(b))}return i()}function m(a){return function(b){var c=v.tagName;return v.tagName=v.tagStart=null,"selfcloseTag"==b||"endTag"==b&&A.autoSelfClosers.hasOwnProperty(c.toLowerCase())?(o(c.toLowerCase()),i()):"endTag"==b?(o(c.toLowerCase()),j(c,a),i()):i()}}function n(a){return function(b){return a&&(x="error"),"endTag"==b?(k(),i()):(x="error",i(arguments.callee))}}function o(a){for(var b;;){if(!v.context)return;if(b=v.context.tagName.toLowerCase(),!A.contextGrabbers.hasOwnProperty(b)||!A.contextGrabbers[b].hasOwnProperty(a))return;k()}}function p(a){return"word"==a?(x="attribute",i(q,p)):"endTag"==a||"selfcloseTag"==a?h():(x="error",i(p))}function q(a){return"equals"==a?i(r,p):(A.allowMissing?"word"==a&&(x="attribute"):x="error","endTag"==a||"selfcloseTag"==a?h():i())}function r(a){return"string"==a?i(s):"word"==a&&A.allowUnquoted?(x="string",i()):(x="error","endTag"==a||"selfCloseTag"==a?h():i())}function s(a){return"string"==a?i(s):h()}var t,u,v,w,x,y=a.indentUnit,z=b.multilineTagIndentFactor||1,A=b.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1},B=b.alignCDATA;return{startState:function(){return{tokenize:c,cc:[],indented:0,startOfLine:!0,tagName:null,tagStart:null,context:null}},token:function(a,b){if(!b.tagName&&a.sol()&&(b.startOfLine=!0,b.indented=a.indentation()),a.eatSpace())return null;x=u=t=null;var c=b.tokenize(a,b);if(b.type=u,(c||u)&&"comment"!=c)for(v=b,w=a;;){var d=b.cc.pop()||l;if(d(u||c))break}return b.startOfLine=!1,x||c},indent:function(a,b,e){var f=a.context;if(a.tokenize!=d&&a.tokenize!=c||f&&f.noIndent)return e?e.match(/^(\s*)/)[0].length:0;if(a.tagName)return a.tagStart+y*z;if(B&&/<!\[CDATA\[/.test(b))return 0;for(f&&/^<\//.test(b)&&(f=f.prev);f&&!f.startOfLine;)f=f.prev;return f?f.indent+y:0},electricChars:"/",configuration:b.htmlMode?"html":"xml"}}),CodeMirror.defineMIME("text/xml","xml"),CodeMirror.defineMIME("application/xml","xml"),CodeMirror.mimeModes.hasOwnProperty("text/html")||CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0}),CodeMirror.defineMode("css",function(a){return CodeMirror.getMode(a,"text/css")}),CodeMirror.defineMode("css-base",function(a,b){"use strict";function c(a,b){return o=b,a}function d(a,b){var d=a.next();if(h[d]){var g=h[d](a,b);if(!1!==g)return g}if("@"==d)return a.eatWhile(/[\w\\\-]/),c("def",a.current());if("="==d)c(null,"compare");else{if(("~"==d||"|"==d)&&a.eat("="))return c(null,"compare");if('"'==d||"'"==d)return b.tokenize=e(d),b.tokenize(a,b);if("#"==d)return a.eatWhile(/[\w\\\-]/),c("atom","hash");if("!"==d)return a.match(/^\s*\w*/),c("keyword","important");if(/\d/.test(d))return a.eatWhile(/[\w.%]/),c("number","unit");if("-"!==d)return/[,+>*\/]/.test(d)?c(null,"select-op"):"."==d&&a.match(/^-?[_a-z][_a-z0-9-]*/i)?c("qualifier","qualifier"):":"==d?c("operator",d):/[;{}\[\]\(\)]/.test(d)?c(null,d):"u"==d&&a.match("rl(")?(a.backUp(1),b.tokenize=f,c("property","variable")):(a.eatWhile(/[\w\\\-]/),c("property","variable"));if(/\d/.test(a.peek()))return a.eatWhile(/[\w.%]/),c("number","unit");if(a.match(/^[^-]+-/))return c("meta","meta")}}function e(a,b){return function(e,f){for(var g,h=!1;null!=(g=e.next())&&(g!=a||h);)h=!h&&"\\"==g;return h||(b&&e.backUp(1),f.tokenize=d),c("string","string")}}function f(a,b){return a.next(),a.match(/\s*[\"\']/,!1)?b.tokenize=d:b.tokenize=e(")",!0),c(null,"(")}var g=a.indentUnit,h=b.hooks||{},i=b.atMediaTypes||{},j=b.atMediaFeatures||{},k=b.propertyKeywords||{},l=b.colorKeywords||{},m=b.valueKeywords||{},n=!!b.allowNested,o=null;return{startState:function(a){return{tokenize:d,baseIndent:a||0,stack:[]}},token:function(a,b){if(b.tokenize=b.tokenize||d,b.tokenize==d&&a.eatSpace())return null;var e=b.tokenize(a,b);e&&"string"!=typeof e&&(e=c(e[0],e[1]));var f=b.stack[b.stack.length-1];if("variable"==e)return"variable-definition"==o&&b.stack.push("propertyValue"),"variable-2";if("property"==e?"propertyValue"==f?e=m[a.current()]?"string-2":l[a.current()]?"keyword":"variable-2":"rule"==f?k[a.current()]||(e+=" error"):"block"==f?e=k[a.current()]?"property":l[a.current()]?"keyword":m[a.current()]?"string-2":"tag":f&&"@media{"!=f?"@media"==f?e=i[a.current()]?"attribute":/^(only|not)$/i.test(a.current())?"keyword":"and"==a.current().toLowerCase()?"error":j[a.current()]?"error":"attribute error":"@mediaType"==f?e=i[a.current()]?"attribute":"and"==a.current().toLowerCase()?"operator":/^(only|not)$/i.test(a.current())?"error":(j[a.current()],"error"):"@mediaType("==f?k[a.current()]||(i[a.current()]?e="error":"and"==a.current().toLowerCase()?e="operator":/^(only|not)$/i.test(a.current())?e="error":e+=" error"):e="error":e="tag":"atom"==e?f&&"@media{"!=f&&"block"!=f?"propertyValue"==f?/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(a.current())||(e+=" error"):e="error":e="builtin":"@media"==f&&"{"==o&&(e="error"),"{"==o)if("@media"==f||"@mediaType"==f)b.stack.pop(),b.stack[b.stack.length-1]="@media{";else{var g=n?"block":"rule";b.stack.push(g)}else if("}"==o){var h=b.stack[b.stack.length-1];"interpolation"==h&&(e="operator"),b.stack.pop(),"propertyValue"==f&&b.stack.pop()}else"interpolation"==o?b.stack.push("interpolation"):"@media"==o?b.stack.push("@media"):"@media"==f&&/\b(keyword|attribute)\b/.test(e)?b.stack.push("@mediaType"):"@mediaType"==f&&","==a.current()?b.stack.pop():"@mediaType"==f&&"("==o?b.stack.push("@mediaType("):"@mediaType("==f&&")"==o?b.stack.pop():"rule"!=f&&"block"!=f||":"!=o?"propertyValue"==f&&";"==o&&b.stack.pop():b.stack.push("propertyValue");return e},indent:function(a,b){var c=a.stack.length;return/^\}/.test(b)&&(c-="propertyValue"==a.stack[a.stack.length-1]?2:1),a.baseIndent+c*g},electricChars:"}"}}),function(){function a(a){for(var b={},c=0;c<a.length;++c)b[a[c]]=!0;return b}function b(a,b){for(var c,d=!1;null!=(c=a.next());){if(d&&"/"==c){b.tokenize=null;break}d="*"==c}return["comment","comment"]}
var c=a(["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"]),d=a(["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"]),e=a(["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid-cell","grid-column","grid-column-align","grid-column-sizing","grid-column-span","grid-columns","grid-flow","grid-row","grid-row-align","grid-row-sizing","grid-row-span","grid-rows","grid-template","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-shadow","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index"]),f=a(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua"]),g=a(["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","overlay","overline","padding","padding-box","painted","paused","persian","plus-darker","plus-lighter","pointer","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","white","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small"]);CodeMirror.defineMIME("text/css",{atMediaTypes:c,atMediaFeatures:d,propertyKeywords:e,colorKeywords:f,valueKeywords:g,hooks:{"<":function(a,b){function c(a,b){for(var c,d=0;null!=(c=a.next());){if(d>=2&&">"==c){b.tokenize=null;break}d="-"==c?d+1:0}return["comment","comment"]}if(a.eat("!"))return b.tokenize=c,c(a,b)},"/":function(a,c){return!!a.eat("*")&&(c.tokenize=b,b(a,c))}},name:"css-base"}),CodeMirror.defineMIME("text/x-scss",{atMediaTypes:c,atMediaFeatures:d,propertyKeywords:e,colorKeywords:f,valueKeywords:g,allowNested:!0,hooks:{$:function(a){return a.match(/^[\w-]+/),":"==a.peek()?["variable","variable-definition"]:["variable","variable"]},"/":function(a,c){return a.eat("/")?(a.skipToEnd(),["comment","comment"]):a.eat("*")?(c.tokenize=b,b(a,c)):["operator","operator"]},"#":function(a){return a.eat("{")?["operator","interpolation"]:(a.eatWhile(/[\w\\\-]/),["atom","hash"])}},name:"css-base"})}(),CodeMirror.defineMode("htmlmixed",function(a,b){function c(a,b){var c=b.htmlState.tagName,d=g.token(a,b.htmlState);if("script"==c&&/\btag\b/.test(d)&&">"==a.current()){var j=a.string.slice(Math.max(0,a.pos-100),a.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);j=j?j[1]:"",j&&/[\"\']/.test(j.charAt(0))&&(j=j.slice(1,j.length-1));for(var k=0;k<i.length;++k){var l=i[k];if("string"==typeof l.matches?j==l.matches:l.matches.test(j)){l.mode&&(b.token=e,b.localMode=l.mode,b.localState=l.mode.startState&&l.mode.startState(g.indent(b.htmlState,"")));break}}}else"style"==c&&/\btag\b/.test(d)&&">"==a.current()&&(b.token=f,b.localMode=h,b.localState=h.startState(g.indent(b.htmlState,"")));return d}function d(a,b,c){var d=a.current(),e=d.search(b);return e>-1?a.backUp(d.length-e):d.match(/<\/?$/)&&(a.backUp(d.length),a.match(b,!1)||a.match(d[0])),c}function e(a,b){return a.match(/^<\/\s*script\s*>/i,!1)?(b.token=c,b.localState=b.localMode=null,c(a,b)):d(a,/<\/\s*script\s*>/,b.localMode.token(a,b.localState))}function f(a,b){return a.match(/^<\/\s*style\s*>/i,!1)?(b.token=c,b.localState=b.localMode=null,c(a,b)):d(a,/<\/\s*style\s*>/,h.token(a,b.localState))}var g=CodeMirror.getMode(a,{name:"xml",htmlMode:!0}),h=CodeMirror.getMode(a,"css"),i=[],j=b&&b.scriptTypes;if(i.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:CodeMirror.getMode(a,"javascript")}),j)for(var k=0;k<j.length;++k){var l=j[k];i.push({matches:l.matches,mode:l.mode&&CodeMirror.getMode(a,l.mode)})}return i.push({matches:/./,mode:CodeMirror.getMode(a,"text/plain")}),{startState:function(){return{token:c,localMode:null,localState:null,htmlState:g.startState()}},copyState:function(a){if(a.localState)var b=CodeMirror.copyState(a.localMode,a.localState);return{token:a.token,localMode:a.localMode,localState:b,htmlState:CodeMirror.copyState(g,a.htmlState)}},token:function(a,b){return b.token(a,b)},indent:function(a,b){return!a.localMode||/^\s*<\//.test(b)?g.indent(a.htmlState,b):a.localMode.indent?a.localMode.indent(a.localState,b):CodeMirror.Pass},electricChars:"/{}:",innerMode:function(a){return{state:a.localState||a.htmlState,mode:a.localMode||g}}}},"xml","javascript","css"),CodeMirror.defineMIME("text/html","htmlmixed"),CodeMirror.defineMode("markdown",function(a,b){function c(a,b,c){return b.f=b.inline=c,c(a,b)}function d(a,b,c){return b.f=b.block=c,c(a,b)}function e(a){return a.linkTitle=!1,a.em=!1,a.strong=!1,a.quote=0,q||a.f!=g||(a.f=k,a.block=f),a.thisLineHasContent=!1,null}function f(a,e){var f=!1!==e.list;if(!1!==e.list&&e.indentationDiff>=0?(e.indentationDiff<4&&(e.indentation-=e.indentationDiff),e.list=null):!1!==e.list&&e.indentation>0?(e.list=null,e.listDepth=Math.floor(e.indentation/4)):!1!==e.list&&(e.list=!1,e.listDepth=0),e.indentationDiff>=4)return e.indentation-=4,a.skipToEnd(),w;if(a.eatSpace())return null;if("#"===a.peek()||e.prevLineHasContent&&a.match(O))e.header=!0;else if(a.eat(">"))for(e.indentation++,e.quote=1,a.eatSpace();a.eat(">");)a.eatSpace(),e.quote++;else{if("["===a.peek())return c(a,e,m);if(a.match(K,!0))return C;if(e.prevLineHasContent&&!f||!a.match(L,!0)&&!a.match(M,!0)){if(b.fencedCodeBlocks&&a.match(/^```([\w+#]*)/,!0))return e.localMode=t(RegExp.$1),e.localMode&&(e.localState=e.localMode.startState()),d(a,e,h),w}else e.indentation+=4,e.list=!0,e.listDepth++,b.taskLists&&a.match(N,!1)&&(e.taskList=!0)}return c(a,e,e.inline)}function g(a,b){var c=r.token(a,b.htmlState);return q&&"tag"===c&&"openTag"!==b.htmlState.type&&!b.htmlState.context&&(b.f=k,b.block=f),b.md_inside&&-1!=a.current().indexOf(">")&&(b.f=k,b.block=f,b.htmlState.context=void 0),c}function h(a,b){return a.sol()&&a.match(/^```/,!0)?(b.localMode=b.localState=null,b.f=k,b.block=f,w):b.localMode?b.localMode.token(a,b.localState):(a.skipToEnd(),w)}function i(a){var b=[];if(a.taskOpen)return"meta";if(a.taskClosed)return"property";if(a.strong&&b.push(J),a.em&&b.push(I),a.linkText&&b.push(G),a.code&&b.push(w),a.header&&b.push(v),a.quote&&b.push(a.quote%2?x:y),!1!==a.list){var c=(a.listDepth-1)%3;c?1===c?b.push(A):b.push(B):b.push(z)}return b.length?b.join(" "):null}function j(a,b){if(a.match(P,!0))return i(b)}function k(a,e){var f=e.text(a,e);if(void 0!==f)return f;if(e.list)return e.list=null,i(e);if(e.taskList){return"x"!==a.match(N,!0)[1]?e.taskOpen=!0:e.taskClosed=!0,e.taskList=!1,i(e)}e.taskOpen=!1,e.taskClosed=!1;var h=a.next();if("\\"===h)return a.next(),i(e);if(e.linkTitle){e.linkTitle=!1;var j=h;"("===h&&(j=")"),j=(j+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var k="^\\s*(?:[^"+j+"\\\\]+|\\\\\\\\|\\\\.)"+j;if(a.match(new RegExp(k),!0))return H}if("`"===h){var m=i(e),n=a.pos;a.eatWhile("`");var o=1+a.pos-n;return e.code?o===u?(e.code=!1,m):i(e):(u=o,e.code=!0,i(e))}if(e.code)return i(e);if("!"===h&&a.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return a.match(/\[[^\]]*\]/),e.inline=e.f=l,D;if("["===h&&a.match(/.*\](\(| ?\[)/,!1))return e.linkText=!0,i(e);if("]"===h&&e.linkText){var q=i(e);return e.linkText=!1,e.inline=e.f=l,q}if("<"===h&&a.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!0))return c(a,e,p(E,">"));if("<"===h&&a.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!0))return c(a,e,p(F,">"));if("<"===h&&a.match(/^\w/,!1)){if(-1!=a.string.indexOf(">")){/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(a.string.substring(1,a.string.indexOf(">")))&&(e.md_inside=!0)}return a.backUp(1),d(a,e,g)}if("<"===h&&a.match(/^\/\w*?>/))return e.md_inside=!1,"tag";var r=!1;if(!b.underscoresBreakWords&&"_"===h&&"_"!==a.peek()&&a.match(/(\w)/,!1)){var s=a.pos-2;if(s>=0){var t=a.string.charAt(s);"_"!==t&&t.match(/(\w)/,!1)&&(r=!0)}}var m=i(e);if("*"===h||"_"===h&&!r){if(e.strong===h&&a.eat(h))return e.strong=!1,m;if(!e.strong&&a.eat(h))return e.strong=h,i(e);if(e.em===h)return e.em=!1,m;if(!e.em)return e.em=h,i(e)}else if(" "===h&&(a.eat("*")||a.eat("_"))){if(" "===a.peek())return i(e);a.backUp(1)}return i(e)}function l(a,b){if(a.eatSpace())return null;var d=a.next();return"("===d||"["===d?c(a,b,p(H,"("===d?")":"]")):"error"}function m(a,b){return a.match(/^[^\]]*\]:/,!0)?(b.f=n,G):c(a,b,k)}function n(a,b){return a.eatSpace()?null:(a.match(/^[^\s]+/,!0),void 0===a.peek()?b.linkTitle=!0:a.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),b.f=b.inline=k,H)}function o(a){return Q[a]||(a=(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),Q[a]=new RegExp("^(?:[^\\\\]|\\\\.)*?("+a+")")),Q[a]}function p(a,b,c){return c=c||k,function(d,e){return d.match(o(b)),e.inline=e.f=c,a}}var q=CodeMirror.mimeModes.hasOwnProperty("text/html"),r=CodeMirror.getMode(a,q?"text/html":"text/plain"),s={html:"htmlmixed",js:"javascript",json:"application/json",c:"text/x-csrc","c++":"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp","c#":"text/x-csharp",scala:"text/x-scala"},t=function(){var b,c,d={},e={},f=[];for(var g in CodeMirror.modes)CodeMirror.modes.propertyIsEnumerable(g)&&f.push(g);for(b=0;b<f.length;b++)d[f[b]]=f[b];var h=[];for(var g in CodeMirror.mimeModes)CodeMirror.mimeModes.propertyIsEnumerable(g)&&h.push({mime:g,mode:CodeMirror.mimeModes[g]});for(b=0;b<h.length;b++)c=h[b].mime,e[c]=h[b].mime;for(var i in s)(s[i]in d||s[i]in e)&&(d[i]=s[i]);return function(b){return d[b]?CodeMirror.getMode(a,d[b]):null}}();void 0===b.underscoresBreakWords&&(b.underscoresBreakWords=!0),void 0===b.fencedCodeBlocks&&(b.fencedCodeBlocks=!1),void 0===b.taskLists&&(b.taskLists=!1);var u=0,v="header",w="comment",x="atom",y="number",z="variable-2",A="variable-3",B="keyword",C="hr",D="tag",E="link",F="link",G="link",H="string",I="em",J="strong",K=/^([*\-=_])(?:\s*\1){2,}\s*$/,L=/^[*\-+]\s+/,M=/^[0-9]+\.\s+/,N=/^\[(x| )\](?=\s)/,O=/^(?:\={1,}|-{1,})$/,P=/^[^!\[\]*_\\<>` "'(]+/,Q=[];return{startState:function(){return{f:f,prevLineHasContent:!1,thisLineHasContent:!1,block:f,htmlState:CodeMirror.startState(r),indentation:0,inline:k,text:j,linkText:!1,linkTitle:!1,em:!1,strong:!1,header:!1,taskList:!1,list:!1,listDepth:0,quote:0}},copyState:function(a){return{f:a.f,prevLineHasContent:a.prevLineHasContent,thisLineHasContent:a.thisLineHasContent,block:a.block,htmlState:CodeMirror.copyState(r,a.htmlState),indentation:a.indentation,localMode:a.localMode,localState:a.localMode?CodeMirror.copyState(a.localMode,a.localState):null,inline:a.inline,text:a.text,linkTitle:a.linkTitle,em:a.em,strong:a.strong,header:a.header,taskList:a.taskList,list:a.list,listDepth:a.listDepth,quote:a.quote,md_inside:a.md_inside}},token:function(a,b){if(a.sol()){if(a.match(/^\s*$/,!0))return b.prevLineHasContent=!1,e(b);b.prevLineHasContent=b.thisLineHasContent,b.thisLineHasContent=!0,b.header=!1,b.taskList=!1,b.code=!1,b.f=b.block;var c=a.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length,d=4*Math.floor((c-b.indentation)/4);d>4&&(d=4);var f=b.indentation+d;if(b.indentationDiff=f-b.indentation,b.indentation=f,c>0)return null}return b.f(a,b)},blankLine:e,getType:i}},"xml"),CodeMirror.defineMIME("text/x-markdown","markdown"),CodeMirror.defineMode("diff",function(){var a={"+":"positive","-":"negative","@":"meta"};return{token:function(b){var c=b.string.search(/[\t ]+?$/);if(!b.sol()||0===c)return b.skipToEnd(),("error "+(a[b.string.charAt(0)]||"")).replace(/ $/,"");var d=a[b.peek()]||b.skipToEnd();return-1===c?b.skipToEnd():b.pos=c,d}}}),CodeMirror.defineMIME("text/x-diff","diff"),CodeMirror.defineMode("properties",function(){return{token:function(a,b){var c=a.sol()||b.afterSection,d=a.eol();if(b.afterSection=!1,c&&(b.nextMultiline?(b.inMultiline=!0,b.nextMultiline=!1):b.position="def"),d&&!b.nextMultiline&&(b.inMultiline=!1,b.position="def"),c)for(;a.eatSpace(););var e=a.next();return!c||"#"!==e&&"!"!==e&&";"!==e?c&&"["===e?(b.afterSection=!0,a.skipTo("]"),a.eat("]"),"header"):"="===e||":"===e?(b.position="quote",null):("\\"===e&&"quote"===b.position&&void 0===a.next()&&(b.nextMultiline=!0),b.position):(b.position="comment",a.skipToEnd(),"comment")},startState:function(){return{position:"def",nextMultiline:!1,inMultiline:!1,afterSection:!1}}}}),CodeMirror.defineMIME("text/x-properties","properties"),CodeMirror.defineMIME("text/x-ini","properties"),CodeMirror.defineMode("clike",function(a,b){function c(a,b){var c=a.next();if(q[c]){var f=q[c](a,b);if(!1!==f)return f}if('"'==c||"'"==c)return b.tokenize=d(c),b.tokenize(a,b);if(/[\[\]{}\(\),;\:\.]/.test(c))return i=c,null;if(/\d/.test(c))return a.eatWhile(/[\w\.]/),"number";if("/"==c){if(a.eat("*"))return b.tokenize=e,e(a,b);if(a.eat("/"))return a.skipToEnd(),"comment"}if(s.test(c))return a.eatWhile(s),"operator";a.eatWhile(/[\w\$_]/);var g=a.current();return m.propertyIsEnumerable(g)?(o.propertyIsEnumerable(g)&&(i="newstatement"),"keyword"):n.propertyIsEnumerable(g)?(o.propertyIsEnumerable(g)&&(i="newstatement"),"builtin"):p.propertyIsEnumerable(g)?"atom":"variable"}function d(a){return function(b,c){for(var d,e=!1,f=!1;null!=(d=b.next());){if(d==a&&!e){f=!0;break}e=!e&&"\\"==d}return(f||!e&&!r)&&(c.tokenize=null),"string"}}function e(a,b){for(var c,d=!1;c=a.next();){if("/"==c&&d){b.tokenize=null;break}d="*"==c}return"comment"}function f(a,b,c,d,e){this.indented=a,this.column=b,this.type=c,this.align=d,this.prev=e}function g(a,b,c){var d=a.indented;return a.context&&"statement"==a.context.type&&(d=a.context.indented),a.context=new f(d,b,c,null,a.context)}function h(a){var b=a.context.type;return")"!=b&&"]"!=b&&"}"!=b||(a.indented=a.context.indented),a.context=a.context.prev}var i,j=a.indentUnit,k=b.statementIndentUnit||j,l=b.dontAlignCalls,m=b.keywords||{},n=b.builtin||{},o=b.blockKeywords||{},p=b.atoms||{},q=b.hooks||{},r=b.multiLineStrings,s=/[+\-*&%=<>!?|\/]/;return{startState:function(a){return{tokenize:null,context:new f((a||0)-j,0,"top",!1),indented:0,startOfLine:!0}},token:function(a,b){var d=b.context;if(a.sol()&&(null==d.align&&(d.align=!1),b.indented=a.indentation(),b.startOfLine=!0),a.eatSpace())return null;i=null;var e=(b.tokenize||c)(a,b);if("comment"==e||"meta"==e)return e;if(null==d.align&&(d.align=!0),";"!=i&&":"!=i&&","!=i||"statement"!=d.type)if("{"==i)g(b,a.column(),"}");else if("["==i)g(b,a.column(),"]");else if("("==i)g(b,a.column(),")");else if("}"==i){for(;"statement"==d.type;)d=h(b);for("}"==d.type&&(d=h(b));"statement"==d.type;)d=h(b)}else i==d.type?h(b):(("}"==d.type||"top"==d.type)&&";"!=i||"statement"==d.type&&"newstatement"==i)&&g(b,a.column(),"statement");else h(b);return b.startOfLine=!1,e},indent:function(a,b){if(a.tokenize!=c&&null!=a.tokenize)return CodeMirror.Pass;var d=a.context,e=b&&b.charAt(0);"statement"==d.type&&"}"==e&&(d=d.prev);var f=e==d.type;return"statement"==d.type?d.indented+("{"==e?0:k):l&&")"==d.type&&!f?d.indented+k:d.align?d.column+(f?0:1):d.indented+(f?0:j)},electricChars:"{}"}}),function(){function a(a){for(var b={},c=a.split(" "),d=0;d<c.length;++d)b[c[d]]=!0;return b}function b(a,c){if(!c.startOfLine)return!1;for(;;){if(!a.skipTo("\\")){a.skipToEnd(),c.tokenize=null;break}if(a.next(),a.eol()){c.tokenize=b;break}}return"meta"}function c(a,b){for(var c;null!=(c=a.next());)if('"'==c&&!a.eat('"')){b.tokenize=null;break}return"string"}function d(a,b){for(var c=0;c<a.length;++c)CodeMirror.defineMIME(a[c],b)}var e="auto if break int case long char register continue return default short do sizeof double static else struct entry switch extern typedef float union for unsigned goto while enum void const signed volatile";d(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:a(e),blockKeywords:a("case do else for if switch while struct"),atoms:a("null"),hooks:{"#":b}}),d(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:a(e+" asm dynamic_cast namespace reinterpret_cast try bool explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected wchar_t"),blockKeywords:a("catch class do else finally for if struct switch try while"),atoms:a("true false null"),hooks:{"#":b}}),CodeMirror.defineMIME("text/x-java",{name:"clike",keywords:a("abstract assert boolean break byte case catch char class const continue default do double else enum extends final finally float for goto if implements import instanceof int interface long native new package private protected public return short static strictfp super switch synchronized this throw throws transient try void volatile while"),blockKeywords:a("catch class do else finally for if switch try while"),atoms:a("true false null"),hooks:{"@":function(a){return a.eatWhile(/[\w\$_]/),"meta"}}}),CodeMirror.defineMIME("text/x-csharp",{name:"clike",keywords:a("abstract as base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),blockKeywords:a("catch class do else finally for foreach if struct switch try while"),builtin:a("Boolean Byte Char DateTime DateTimeOffset Decimal Double Guid Int16 Int32 Int64 Object SByte Single String TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),atoms:a("true false null"),hooks:{"@":function(a,b){return a.eat('"')?(b.tokenize=c,c(a,b)):(a.eatWhile(/[\w\$_]/),"meta")}}}),CodeMirror.defineMIME("text/x-scala",{name:"clike",keywords:a("abstract case catch class def do else extends false final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try trye type val var while with yield _ : = => <- <: <% >: # @ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector :: #:: Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),blockKeywords:a("catch class do else finally for forSome if match switch try while"),atoms:a("true false null"),hooks:{"@":function(a){return a.eatWhile(/[\w\$_]/),"meta"}}})}(),CodeMirror.defineMode("yaml",function(){var a=["true","false","on","off","yes","no"],b=new RegExp("\\b(("+a.join(")|(")+"))$","i");return{token:function(a,c){var d=a.peek(),e=c.escaped;if(c.escaped=!1,"#"==d)return a.skipToEnd(),"comment";if(c.literal&&a.indentation()>c.keyCol)return a.skipToEnd(),"string";if(c.literal&&(c.literal=!1),a.sol()){if(c.keyCol=0,c.pair=!1,c.pairStart=!1,a.match(/---/))return"def";if(a.match(/\.\.\./))return"def";if(a.match(/\s*-\s+/))return"meta"}if(!c.pair&&a.match(/^\s*([a-z0-9\._-])+(?=\s*:)/i))return c.pair=!0,c.keyCol=a.indentation(),"atom";if(c.pair&&a.match(/^:\s*/))return c.pairStart=!0,"meta";if(a.match(/^(\{|\}|\[|\])/))return"{"==d?c.inlinePairs++:"}"==d?c.inlinePairs--:"["==d?c.inlineList++:c.inlineList--,"meta";if(c.inlineList>0&&!e&&","==d)return a.next(),"meta";if(c.inlinePairs>0&&!e&&","==d)return c.keyCol=0,c.pair=!1,c.pairStart=!1,a.next(),"meta";if(c.pairStart){if(a.match(/^\s*(\||\>)\s*/))return c.literal=!0,"meta";if(a.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable-2";if(0==c.inlinePairs&&a.match(/^\s*-?[0-9\.\,]+\s?$/))return"number";if(c.inlinePairs>0&&a.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(a.match(b))return"keyword"}return c.pairStart=!1,c.escaped="\\"==d,a.next(),null},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}}}}),CodeMirror.defineMIME("text/x-yaml","yaml"),angular.module("ui.config",[]).value("ui.config",{}),angular.module("ui.filters",["ui.config"]),angular.module("ui.directives",["ui.config"]),angular.module("ui",["ui.filters","ui.directives","ui.config"]),angular.module("ui.directives").directive("uiAnimate",["ui.config","$timeout",function(a,b){var c={};return angular.isString(a.animate)?c.class=a.animate:a.animate&&(c=a.animate),{restrict:"A",link:function(a,d,e){var f={};e.uiAnimate&&(f=a.$eval(e.uiAnimate),angular.isString(f)&&(f={class:f})),f=angular.extend({class:"ui-animate"},c,f),d.addClass(f.class),b(function(){d.removeClass(f.class)},20,!1)}}}]),angular.module("ui.directives").directive("uiCalendar",["ui.config","$parse",function(a,b){return a.uiCalendar=a.uiCalendar||{},{require:"ngModel",restrict:"A",link:function(b,c,d,e){function f(){b.calendar=c.html("");var e=b.calendar.fullCalendar("getView");e&&(e=e.name);var f,h={defaultView:e,eventSources:g};f=d.uiCalendar?b.$eval(d.uiCalendar):{},angular.extend(h,a.uiCalendar,f),b.calendar.fullCalendar(h)}var g=b.$eval(d.ngModel),h=0,i=function(){var a=b.$eval(d.equalsTracker);return h=0,angular.forEach(g,function(a,b){angular.isArray(a)&&(h+=a.length)}),angular.isNumber(a)?h+g.length+a:h+g.length};f(),b.$watch(i,function(a,b){f()})}}}]),angular.module("ui.directives").directive("uiCodemirror",["ui.config","$timeout",function(a,b){"use strict";var c=["cursorActivity","viewportChange","gutterClick","focus","blur","scroll","update"];return{restrict:"A",require:"ngModel",link:function(d,e,f,g){var h,i,j,k,l;if("textarea"!==e[0].type)throw new Error("uiCodemirror3 can only be applied to a textarea element");h=a.codemirror||{},i=angular.extend({},h,d.$eval(f.uiCodemirror)),j=function(a){return function(b,c){var e=b.getValue();e!==g.$viewValue&&(g.$setViewValue(e),d.$apply()),"function"==typeof a&&a(b,c)}},k=function(){l=CodeMirror.fromTextArea(e[0],i),l.on("change",j(i.onChange))
;for(var a,h=0,k=c.length;h<k;++h)void 0!==(a=i["on"+c[h].charAt(0).toUpperCase()+c[h].slice(1)])&&"function"==typeof a&&l.on(c[h],a);g.$formatters.push(function(a){if(angular.isUndefined(a)||null===a)return"";if(angular.isObject(a)||angular.isArray(a))throw new Error("ui-codemirror cannot use an object or an array as a model");return a}),g.$render=function(){l.setValue(g.$viewValue)},f.uiRefresh&&d.$watch(f.uiRefresh,function(a,c){a!==c&&b(l.refresh)})},b(k)}}}]),angular.module("ui.directives").directive("uiCurrency",["ui.config","currencyFilter",function(a,b){var c={pos:"ui-currency-pos",neg:"ui-currency-neg",zero:"ui-currency-zero"};return a.currency&&angular.extend(c,a.currency),{restrict:"EAC",require:"ngModel",link:function(a,d,e,f){var g,h,i;g=angular.extend({},c,a.$eval(e.uiCurrency)),h=function(a){var c;return c=1*a,d.toggleClass(g.pos,c>0),d.toggleClass(g.neg,c<0),d.toggleClass(g.zero,0===c),""===a?d.text(""):d.text(b(c,g.symbol)),!0},f.$render=function(){i=f.$viewValue,d.val(i),h(i)}}}}]),angular.module("ui.directives").directive("uiDate",["ui.config",function(a){"use strict";var b;return b={},angular.isObject(a.date)&&angular.extend(b,a.date),{require:"?ngModel",link:function(b,c,d,e){var f=function(){return angular.extend({},a.date,b.$eval(d.uiDate))},g=function(){var a=f();if(e){var d=function(){b.$apply(function(){var a=c.datepicker("getDate");c.datepicker("setDate",c.val()),e.$setViewValue(a),c.blur()})};if(a.onSelect){var g=a.onSelect;a.onSelect=function(a,c){d(),b.$apply(function(){g(a,c)})}}else a.onSelect=d;c.bind("change",d),e.$render=function(){var a=e.$viewValue;if(angular.isDefined(a)&&null!==a&&!angular.isDate(a))throw new Error("ng-Model value must be a Date object - currently it is a "+typeof a+" - use ui-date-format to convert it from a string");c.datepicker("setDate",a)}}c.datepicker("destroy"),c.datepicker(a),e&&e.$render()};b.$watch(f,g,!0)}}}]).directive("uiDateFormat",["ui.config",function(a){return{require:"ngModel",link:function(b,c,d,e){var f=d.uiDateFormat||a.dateFormat;f?(e.$formatters.push(function(a){if(angular.isString(a))return $.datepicker.parseDate(f,a)}),e.$parsers.push(function(a){if(a)return $.datepicker.formatDate(f,a)})):(e.$formatters.push(function(a){if(angular.isString(a))return new Date(a)}),e.$parsers.push(function(a){if(a)return a.toISOString()}))}}}]),angular.module("ui.directives").directive("uiEvent",["$parse",function(a){return function(b,c,d){var e=b.$eval(d.uiEvent);angular.forEach(e,function(d,e){var f=a(d);c.bind(e,function(a){var c=Array.prototype.slice.call(arguments);c=c.splice(1),b.$apply(function(){f(b,{$event:a,$params:c})})})})}}]),angular.module("ui.directives").directive("uiIf",[function(){return{transclude:"element",priority:1e3,terminal:!0,restrict:"A",compile:function(a,b,c){return function(a,b,d){var e,f;a.$watch(d.uiIf,function(d){e&&(e.remove(),e=void 0),f&&(f.$destroy(),f=void 0),d&&(f=a.$new(),c(f,function(a){e=a,b.after(a)}))})}}}}]),angular.module("ui.directives").directive("uiJq",["ui.config","$timeout",function(a,b){return{restrict:"A",compile:function(c,d){if(!angular.isFunction(c[d.uiJq]))throw new Error('ui-jq: The "'+d.uiJq+'" function does not exist');var e=a.jq&&a.jq[d.uiJq];return function(a,c,d){function f(){b(function(){c[d.uiJq].apply(c,g)},0,!1)}var g=[];d.uiOptions?(g=a.$eval("["+d.uiOptions+"]"),angular.isObject(e)&&angular.isObject(g[0])&&(g[0]=angular.extend({},e,g[0]))):e&&(g=[e]),d.ngModel&&c.is("select,input,textarea")&&c.on("change",function(){c.trigger("input")}),d.uiRefresh&&a.$watch(d.uiRefresh,function(a){f()}),f()}}}}]),angular.module("ui.directives").factory("keypressHelper",["$parse",function(a){var b={8:"backspace",9:"tab",13:"enter",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete"},c=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};return function(d,e,f,g){var h,i=[];h=e.$eval(g["ui"+c(d)]),angular.forEach(h,function(b,c){var d,e;e=a(b),angular.forEach(c.split(" "),function(a){d={expression:e,keys:{}},angular.forEach(a.split("-"),function(a){d.keys[a]=!0}),i.push(d)})}),f.bind(d,function(a){var c=a.metaKey||a.altKey,f=a.ctrlKey,g=a.shiftKey,h=a.keyCode;"keypress"===d&&!g&&h>=97&&h<=122&&(h-=32),angular.forEach(i,function(d){var h=d.keys[b[a.keyCode]]||d.keys[a.keyCode.toString()]||!1,i=d.keys.alt||!1,j=d.keys.ctrl||!1,k=d.keys.shift||!1;h&&i==c&&j==f&&k==g&&e.$apply(function(){d.expression(e,{$event:a})})})})}}]),angular.module("ui.directives").directive("uiKeydown",["keypressHelper",function(a){return{link:function(b,c,d){a("keydown",b,c,d)}}}]),angular.module("ui.directives").directive("uiKeypress",["keypressHelper",function(a){return{link:function(b,c,d){a("keypress",b,c,d)}}}]),angular.module("ui.directives").directive("uiKeyup",["keypressHelper",function(a){return{link:function(b,c,d){a("keyup",b,c,d)}}}]),function(){function a(a,b,c,d){angular.forEach(b.split(" "),function(b){var e={type:"map-"+b};google.maps.event.addListener(c,b,function(b){d.triggerHandler(angular.extend({},e,b)),a.$$phase||a.$apply()})})}function b(b,d){c.directive(b,[function(){return{restrict:"A",link:function(c,e,f){c.$watch(f[b],function(b){a(c,d,b,e)})}}}])}var c=angular.module("ui.directives");c.directive("uiMap",["ui.config","$parse",function(b,c){var d=b.map||{};return{restrict:"A",link:function(b,e,f){var g=angular.extend({},d,b.$eval(f.uiOptions)),h=new google.maps.Map(e[0],g);c(f.uiMap).assign(b,h),a(b,"bounds_changed center_changed click dblclick drag dragend dragstart heading_changed idle maptypeid_changed mousemove mouseout mouseover projection_changed resize rightclick tilesloaded tilt_changed zoom_changed",h,e)}}}]),c.directive("uiMapInfoWindow",["ui.config","$parse","$compile",function(b,c,d){var e=b.mapInfoWindow||{};return{link:function(b,f,g){var h=angular.extend({},e,b.$eval(g.uiOptions));h.content=f[0];var i=c(g.uiMapInfoWindow),j=i(b);j||(j=new google.maps.InfoWindow(h),i.assign(b,j)),a(b,"closeclick content_change domready position_changed zindex_changed",j,f),f.replaceWith("<div></div>");var k=j.open;j.open=function(a,c,e,g,h,i){d(f.contents())(b),k.call(j,a,c,e,g,h,i)}}}}]),b("uiMapMarker","animation_changed click clickable_changed cursor_changed dblclick drag dragend draggable_changed dragstart flat_changed icon_changed mousedown mouseout mouseover mouseup position_changed rightclick shadow_changed shape_changed title_changed visible_changed zindex_changed"),b("uiMapPolyline","click dblclick mousedown mousemove mouseout mouseover mouseup rightclick"),b("uiMapPolygon","click dblclick mousedown mousemove mouseout mouseover mouseup rightclick"),b("uiMapRectangle","bounds_changed click dblclick mousedown mousemove mouseout mouseover mouseup rightclick"),b("uiMapCircle","center_changed click dblclick mousedown mousemove mouseout mouseover mouseup radius_changed rightclick"),b("uiMapGroundOverlay","click dblclick")}(),angular.module("ui.directives").directive("uiMask",[function(){return{require:"ngModel",link:function(a,b,c,d){d.$render=function(){var e=d.$viewValue||"";b.val(e),b.mask(a.$eval(c.uiMask))},d.$parsers.push(function(a){var c=b.isMaskValid()||angular.isUndefined(b.isMaskValid())&&b.val().length>0;return d.$setValidity("mask",c),c?a:void 0}),b.bind("keyup",function(){a.$apply(function(){d.$setViewValue(b.mask())})})}}}]),angular.module("ui.directives").directive("uiReset",["ui.config",function(a){var b=null;return void 0!==a.reset&&(b=a.reset),{require:"ngModel",link:function(a,c,d,e){var f;f=angular.element('<a class="ui-reset" />'),c.wrap('<span class="ui-resetwrap" />').after(f),f.bind("click",function(c){c.preventDefault(),a.$apply(function(){d.uiReset?e.$setViewValue(a.$eval(d.uiReset)):e.$setViewValue(b),e.$render()})})}}}]),angular.module("ui.directives").directive("uiRoute",["$location","$parse",function(a,b){return{restrict:"AC",compile:function(c,d){var e;if(d.uiRoute)e="uiRoute";else if(d.ngHref)e="ngHref";else{if(!d.href)throw new Error("uiRoute missing a route or href property on "+c[0]);e="href"}return function(c,d,f){function g(b){(hash=b.indexOf("#"))>-1&&(b=b.substr(hash+1)),(j=function(){i(c,a.path().indexOf(b)>-1)})()}function h(b){(hash=b.indexOf("#"))>-1&&(b=b.substr(hash+1)),(j=function(){var d=new RegExp("^"+b+"$",["i"]);i(c,d.test(a.path()))})()}var i=b(f.ngModel||f.routeModel||"$uiRoute").assign,j=angular.noop;switch(e){case"uiRoute":f.uiRoute?h(f.uiRoute):f.$observe("uiRoute",h);break;case"ngHref":f.ngHref?g(f.ngHref):f.$observe("ngHref",g);break;case"href":g(f.href)}c.$on("$routeChangeSuccess",function(){j()})}}}}]),angular.module("ui.directives").directive("uiScrollfix",["$window",function(a){"use strict";return{link:function(b,c,d){var e=c.offset().top;d.uiScrollfix?"-"===d.uiScrollfix.charAt(0)?d.uiScrollfix=e-d.uiScrollfix.substr(1):"+"===d.uiScrollfix.charAt(0)&&(d.uiScrollfix=e+parseFloat(d.uiScrollfix.substr(1))):d.uiScrollfix=e,angular.element(a).on("scroll.ui-scrollfix",function(){var b;if(angular.isDefined(a.pageYOffset))b=a.pageYOffset;else{b=(document.compatMode&&"BackCompat"!==document.compatMode?document.documentElement:document.body).scrollTop}!c.hasClass("ui-scrollfix")&&b>d.uiScrollfix?c.addClass("ui-scrollfix"):c.hasClass("ui-scrollfix")&&b<d.uiScrollfix&&c.removeClass("ui-scrollfix")})}}}]),angular.module("ui.directives").directive("uiSelect2",["ui.config","$timeout",function(a,b){var c={};return a.select2&&angular.extend(c,a.select2),{require:"?ngModel",compile:function(a,d){var e,f,g,h=a.is("select"),i=void 0!==d.multiple;return a.is("select")&&(f=a.find("option[ng-repeat], option[data-ng-repeat]"),f.length&&(g=f.attr("ng-repeat")||f.attr("data-ng-repeat"),e=jQuery.trim(g.split("|")[0]).split(" ").pop())),function(a,d,f,g){var j=angular.extend({},c,a.$eval(f.uiSelect2));if(h?(delete j.multiple,delete j.initSelection):i&&(j.multiple=!0),g&&(g.$render=function(){h?d.select2("val",g.$modelValue):i?g.$modelValue?angular.isArray(g.$modelValue)?d.select2("data",g.$modelValue):d.select2("val",g.$modelValue):d.select2("data",[]):angular.isObject(g.$modelValue)?d.select2("data",g.$modelValue):d.select2("val",g.$modelValue)},e&&a.$watch(e,function(a,c,e){a&&b(function(){d.select2("val",g.$viewValue),d.trigger("change")})}),!h&&(d.bind("change",function(){a.$apply(function(){g.$setViewValue(d.select2("data"))})}),j.initSelection))){var k=j.initSelection;j.initSelection=function(a,b){k(a,function(a){g.$setViewValue(a),b(a)})}}f.$observe("disabled",function(a){d.select2(a&&"disable"||"enable")}),f.ngMultiple&&a.$watch(f.ngMultiple,function(a){d.select2(j)}),d.val(a.$eval(f.ngModel)),b(function(){d.select2(j),j.initSelection||h||g.$setViewValue(d.select2("data"))})}}}}]),angular.module("ui.directives").directive("uiShow",[function(){return function(a,b,c){a.$watch(c.uiShow,function(a,c){a?b.addClass("ui-show"):b.removeClass("ui-show")})}}]).directive("uiHide",[function(){return function(a,b,c){a.$watch(c.uiHide,function(a,c){a?b.addClass("ui-hide"):b.removeClass("ui-hide")})}}]).directive("uiToggle",[function(){return function(a,b,c){a.$watch(c.uiToggle,function(a,c){a?b.removeClass("ui-hide").addClass("ui-show"):b.removeClass("ui-show").addClass("ui-hide")})}}]),angular.module("ui.directives").directive("uiSortable",["ui.config",function(a){return{require:"?ngModel",link:function(b,c,d,e){var f,g,h,i,j,k,l,m,n;j=angular.extend({},a.sortable,b.$eval(d.uiSortable)),e&&(e.$render=function(){c.sortable("refresh")},h=function(a,b){b.item.sortable={index:b.item.index()}},i=function(a,b){b.item.sortable.resort=e},f=function(a,b){b.item.sortable.relocate=!0,e.$modelValue.splice(b.item.index(),0,b.item.sortable.moved)},g=function(a,b){1===e.$modelValue.length?b.item.sortable.moved=e.$modelValue.splice(0,1)[0]:b.item.sortable.moved=e.$modelValue.splice(b.item.sortable.index,1)[0]},onStop=function(a,c){if(c.item.sortable.resort&&!c.item.sortable.relocate){var d,e;e=c.item.sortable.index,d=c.item.index(),e<d&&d--,c.item.sortable.resort.$modelValue.splice(d,0,c.item.sortable.resort.$modelValue.splice(e,1)[0])}(c.item.sortable.resort||c.item.sortable.relocate)&&b.$apply()},m=j.start,j.start=function(a,b){h(a,b),"function"==typeof m&&m(a,b)},_stop=j.stop,j.stop=function(a,b){onStop(a,b),"function"==typeof _stop&&_stop(a,b)},n=j.update,j.update=function(a,b){i(a,b),"function"==typeof n&&n(a,b)},k=j.receive,j.receive=function(a,b){f(a,b),"function"==typeof k&&k(a,b)},l=j.remove,j.remove=function(a,b){g(a,b),"function"==typeof l&&l(a,b)}),c.sortable(j)}}}]),angular.module("ui.directives").directive("uiTinymce",["ui.config",function(a){return a.tinymce=a.tinymce||{},{require:"ngModel",link:function(b,c,d,e){var f,g={onchange_callback:function(a){a.isDirty()&&(a.save(),e.$setViewValue(c.val()),b.$$phase||b.$apply())},handle_event_callback:function(a){return this.isDirty()&&(this.save(),e.$setViewValue(c.val()),b.$$phase||b.$apply()),!0},setup:function(a){a.onSetContent.add(function(a,d){a.isDirty()&&(a.save(),e.$setViewValue(c.val()),b.$$phase||b.$apply())})}};f=d.uiTinymce?b.$eval(d.uiTinymce):{},angular.extend(g,a.tinymce,f),setTimeout(function(){c.tinymce(g)})}}}]),angular.module("ui.directives").directive("uiValidate",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e,f,g={},h=a.$eval(c.uiValidate);h&&(angular.isString(h)&&(h={validator:h}),angular.forEach(h,function(b,c){e=function(e){return a.$eval(b,{$value:e})?(d.$setValidity(c,!0),e):void d.$setValidity(c,!1)},g[c]=e,d.$formatters.push(e),d.$parsers.push(e)}),c.uiValidateWatch&&(f=a.$eval(c.uiValidateWatch),angular.isString(f)?a.$watch(f,function(){angular.forEach(g,function(a,b){a(d.$modelValue)})}):angular.forEach(f,function(b,c){a.$watch(b,function(){g[c](d.$modelValue)})})))}}}),angular.module("ui.filters").filter("format",function(){return function(a,b){if(!a)return a;var c,d=a.toString();return void 0===b?d:angular.isArray(b)||angular.isObject(b)?(c=angular.isArray(b)&&"$"||":",angular.forEach(b,function(a,b){d=d.split(c+b).join(a)}),d):d.split("$0").join(b)}}),angular.module("ui.filters").filter("highlight",function(){return function(a,b,c){return b||angular.isNumber(b)?(a=a.toString(),b=b.toString(),c?a.split(b).join('<span class="ui-match">'+b+"</span>"):a.replace(new RegExp(b,"gi"),'<span class="ui-match">$&</span>')):a}}),angular.module("ui.filters").filter("inflector",function(){function a(a){return a.replace(/^([a-z])|\s+([a-z])/g,function(a){return a.toUpperCase()})}function b(a,b){return a.replace(/[A-Z]/g,function(a){return b+a})}var c={humanize:function(c){return a(b(c," ").split("_").join(" "))},underscore:function(a){return a.substr(0,1).toLowerCase()+b(a.substr(1),"_").toLowerCase().split(" ").join("_")},variable:function(b){return b=b.substr(0,1).toLowerCase()+a(b.split("_").join(" ")).substr(1).split(" ").join("")}};return function(a,b,d){return!1!==b&&angular.isString(a)?(b=b||"humanize",c[b](a)):a}}),angular.module("ui.filters").filter("unique",function(){return function(a,b){if(!1===b)return a;if((b||angular.isUndefined(b))&&angular.isArray(a)){var c=[],d=function(a){return angular.isObject(a)&&angular.isString(b)?a[b]:a};angular.forEach(a,function(a){for(var b=!1,e=0;e<c.length;e++)if(angular.equals(d(c[e]),d(a))){b=!0;break}b||c.push(a)}),a=c}return a}}),angular.module("ui.bootstrap",["ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.datepicker","ui.bootstrap.dialog","ui.bootstrap.dropdownToggle","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.position","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){var b=function(a,b,c){b.removeClass("collapse"),b.css({height:c}),b[0].offsetWidth,b.addClass("collapse")};return{link:function(c,d,e){var f,g=!0;c.$watch(function(){return d[0].scrollHeight},function(){0!==d[0].scrollHeight&&(f||(g?b(c,d,d[0].scrollHeight+"px"):b(c,d,"auto")))}),c.$watch(e.collapse,function(a){a?k():j()});var h,i=function(b){return h&&h.cancel(),h=a(d,b),h.then(function(){h=void 0},function(){h=void 0}),h},j=function(){g?(g=!1,f||b(c,d,"auto")):i({height:d[0].scrollHeight+"px"}).then(function(){f||b(c,d,"auto")}),f=!1},k=function(){f=!0,g?(g=!1,b(c,d,0)):(b(c,d,d[0].scrollHeight+"px"),i({height:"0"}))}}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){(angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers)&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(){b.removeGroup(a)})},this.removeGroup=function(a){-1!==this.groups.indexOf(a)&&this.groups.splice(this.groups.indexOf(a),1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",["$parse","$transition","$timeout",function(a){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@"},controller:["$scope",function(){this.setHeading=function(a){this.heading=a}}],link:function(b,c,d,e){var f,g;e.addGroup(b),b.isOpen=!1,d.isOpen&&(f=a(d.isOpen),g=f.assign,b.$watch(function(){return f(b.$parent)},function(a){b.isOpen=a}),b.isOpen=!!f&&f(b.$parent)),b.$watch("isOpen",function(a){a&&e.closeOthers(b),g&&g(b.$parent,a)})}}}]).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",compile:function(a,b,c){return function(a,b,d,e){e.setHeading(c(a,function(){}))}}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.html(""),b.append(a))})}}}),angular.module("ui.bootstrap.alert",[]).directive("alert",function(){return{restrict:"EA",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"=",close:"&"},link:function(a,b,c){a.closeable="close"in c}}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).directive("btnRadio",["buttonConfig",function(a){var b=a.activeClass||"active",c=a.toggleEvent||"click";return{require:"ngModel",link:function(a,d,e,f){f.$render=function(){d.toggleClass(b,angular.equals(f.$modelValue,a.$eval(e.btnRadio)))},d.bind(c,function(){d.hasClass(b)||a.$apply(function(){f.$setViewValue(a.$eval(e.btnRadio)),f.$render()})})}}}]).directive("btnCheckbox",["buttonConfig",function(a){var b=a.activeClass||"active",c=a.toggleEvent||"click";return{require:"ngModel",link:function(a,d,e,f){var g=a.$eval(e.btnCheckboxTrue),h=a.$eval(e.btnCheckboxFalse);g=!angular.isDefined(g)||g,h=!!angular.isDefined(h)&&h,f.$render=function(){d.toggleClass(b,angular.equals(f.$modelValue,g))},d.bind(c,function(){a.$apply(function(){f.$setViewValue(d.hasClass(b)?h:g),f.$render()})})}}}]),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition","$q",function(a,b,c){function d(){function c(){f?(a.next(),d()):a.pause()}e&&b.cancel(e);var g=+a.interval;!isNaN(g)&&g>=0&&(e=b(c,g))}var e,f,g=this,h=g.slides=[],i=-1;g.currentSlide=null,g.select=function(e,f){function j(){g.currentSlide&&angular.isString(f)&&!a.noTransition&&e.$element?(e.$element.addClass(f),e.$element[0].offsetWidth=e.$element[0].offsetWidth,angular.forEach(h,function(a){angular.extend(a,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(e,{direction:f,active:!0,entering:!0}),angular.extend(g.currentSlide||{},{direction:f,leaving:!0}),a.$currentTransition=c(e.$element,{}),function(b,c){a.$currentTransition.then(function(){k(b,c)},function(){k(b,c)})}(e,g.currentSlide)):k(e,g.currentSlide),g.currentSlide=e,i=l,d()}function k(b,c){angular.extend(b,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(c||{},{direction:"",active:!1,leaving:!1,entering:!1}),a.$currentTransition=null}var l=h.indexOf(e);void 0===f&&(f=l>i?"next":"prev"),e&&e!==g.currentSlide&&(a.$currentTransition?(a.$currentTransition.cancel(),b(j)):j())},g.indexOfSlide=function(a){return h.indexOf(a)},a.next=function(){var b=(i+1)%h.length;return a.$currentTransition?void 0:g.select(h[b],"next")},a.prev=function(){var b=0>i-1?h.length-1:i-1;return a.$currentTransition?void 0:g.select(h[b],"prev")},a.select=function(a){g.select(a)},a.isActive=function(a){return g.currentSlide===a},a.slides=function(){return h},a.$watch("interval",d),a.play=function(){f||(f=!0,d())},a.pause=function(){a.noPause||(f=!1,e&&b.cancel(e))},g.addSlide=function(b,c){b.$element=c,h.push(b),1===h.length||b.active?(g.select(h[h.length-1]),1==h.length&&a.play()):b.active=!1},g.removeSlide=function(a){var b=h.indexOf(a);h.splice(b,1),h.length>0&&a.active?b>=h.length?g.select(h[b-1]):g.select(h[b]):i>b&&i--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",["$parse",function(a){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{},link:function(b,c,d,e){if(d.active){var f=a(d.active),g=f.assign,h=b.active=f(b.$parent);b.$watch(function(){var a=f(b.$parent);return a!==b.active&&(a!==h?h=b.active=a:g(b.$parent,a=h=b.active)),a})}e.addSlide(b,c),b.$on("$destroy",function(){e.removeSlide(b)}),b.$watch("active",function(a){a&&e.select(b)})}}}]),angular.module("ui.bootstrap.datepicker",[]).constant("datepickerConfig",{dayFormat:"dd",monthFormat:"MMMM",yearFormat:"yyyy",dayHeaderFormat:"EEE",dayTitleFormat:"MMMM yyyy",monthTitleFormat:"yyyy",showWeeks:!0,startingDay:0,yearRange:20}).directive("datepicker",["dateFilter","$parse","datepickerConfig",function(a,b,c){return{restrict:"EA",replace:!0,scope:{model:"=ngModel",dateDisabled:"&"},templateUrl:"template/datepicker/datepicker.html",link:function(d,e,f){function g(a,b,c){d.rows=a,d.labels=b,d.title=c}function h(){d.showWeekNumbers="day"===d.mode&&l}function j(a,b){return"year"===d.mode?b.getFullYear()-a.getFullYear():"month"===d.mode?new Date(b.getFullYear(),b.getMonth())-new Date(a.getFullYear(),a.getMonth()):"day"===d.mode?new Date(b.getFullYear(),b.getMonth(),b.getDate())-new Date(a.getFullYear(),a.getMonth(),a.getDate()):void 0}function k(a){return m&&j(a,m)>0||n&&0>j(a,n)||d.dateDisabled&&d.dateDisabled({date:a,mode:d.mode})}d.mode="day";var l,m,n,o=new Date,p={};p.day=angular.isDefined(f.dayFormat)?d.$eval(f.dayFormat):c.dayFormat,p.month=angular.isDefined(f.monthFormat)?d.$eval(f.monthFormat):c.monthFormat,p.year=angular.isDefined(f.yearFormat)?d.$eval(f.yearFormat):c.yearFormat,p.dayHeader=angular.isDefined(f.dayHeaderFormat)?d.$eval(f.dayHeaderFormat):c.dayHeaderFormat,p.dayTitle=angular.isDefined(f.dayTitleFormat)?d.$eval(f.dayTitleFormat):c.dayTitleFormat,p.monthTitle=angular.isDefined(f.monthTitleFormat)?d.$eval(f.monthTitleFormat):c.monthTitleFormat;var q=angular.isDefined(f.startingDay)?d.$eval(f.startingDay):c.startingDay,r=angular.isDefined(f.yearRange)?d.$eval(f.yearRange):c.yearRange;f.showWeeks?d.$parent.$watch(b(f.showWeeks),function(a){l=!!a,h()}):(l=c.showWeeks,h()),f.min&&d.$parent.$watch(b(f.min),function(a){m=new Date(a),v()}),f.max&&d.$parent.$watch(b(f.max),function(a){n=new Date(a),v()});var s=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},t=function(a,b){return new Date(a,b+1,0).getDate()},u={day:function(){function b(b,d,f){for(var g=0;d>g;g++)c.push({date:new Date(b),isCurrent:f,isSelected:w(b),label:a(b,p.day),disabled:k(b)}),b.setDate(b.getDate()+1);e=b}var c=[],d=[],e=null,f=new Date(o);f.setDate(1);var h=q-f.getDay(),j=h>0?7-h:-h;for(j>0&&(f.setDate(1-j),b(f,j,!1)),b(e||f,t(o.getFullYear(),o.getMonth()),!0),b(e,(7-c.length%7)%7,!1),i=0;7>i;i++)d.push(a(c[i].date,p.dayHeader));g(s(c,7),d,a(o,p.dayTitle))},month:function(){for(var b=[],c=0,d=o.getFullYear();12>c;){var e=new Date(d,c++,1);b.push({date:e,isCurrent:!0,isSelected:w(e),label:a(e,p.month),disabled:k(e)})}g(s(b,3),[],a(o,p.monthTitle))},year:function(){for(var b=[],c=parseInt((o.getFullYear()-1)/r,10)*r+1,d=0;r>d;d++){var e=new Date(c+d,0,1);b.push({date:e,isCurrent:!0,isSelected:w(e),label:a(e,p.year),disabled:k(e)})}var f=b[0].label+" - "+b[b.length-1].label;g(s(b,5),[],f)}},v=function(){u[d.mode]()},w=function(a){if(d.model&&d.model.getFullYear()===a.getFullYear()){if("year"===d.mode)return!0;if(d.model.getMonth()===a.getMonth())return"month"===d.mode||"day"===d.mode&&d.model.getDate()===a.getDate()}return!1};d.$watch("model",function(a,b){angular.isDate(a)&&(o=angular.copy(a)),angular.equals(a,b)||v()}),d.$watch("mode",function(){h(),v()}),d.select=function(a){o=new Date(a),"year"===d.mode?(d.mode="month",o.setFullYear(a.getFullYear())):"month"===d.mode?(d.mode="day",o.setMonth(a.getMonth())):"day"===d.mode&&(d.model=new Date(o))},d.move=function(a){"day"===d.mode?o.setMonth(o.getMonth()+a):"month"===d.mode?o.setFullYear(o.getFullYear()+a):"year"===d.mode&&o.setFullYear(o.getFullYear()+a*r),v()},d.toggleMode=function(){d.mode="day"===d.mode?"month":"month"===d.mode?"year":"day"},d.getWeekNumber=function(a){if("day"===d.mode&&d.showWeekNumbers&&7===a.length){var b=q>4?11-q:4-q,c=new Date(a[b].date);return c.setHours(0,0,0),Math.ceil(((c-new Date(c.getFullYear(),0,1))/864e5+1)/7)}}}}}]);var dialogModule=angular.module("ui.bootstrap.dialog",["ui.bootstrap.transition"]);dialogModule.controller("MessageBoxController",["$scope","dialog","model",function(a,b,c){a.title=c.title,a.message=c.message,a.buttons=c.buttons,a.close=function(a){b.close(a)}}]),dialogModule.provider("$dialog",function(){var a={backdrop:!0,dialogClass:"modal",backdropClass:"modal-backdrop",transitionClass:"fade",triggerClass:"in",resolve:{},backdropFade:!1,dialogFade:!1,keyboard:!0,backdropClick:!0},b={},c={value:0};this.options=function(a){b=a},this.$get=["$http","$document","$compile","$rootScope","$controller","$templateCache","$q","$transition","$injector",function(d,e,f,g,h,i,j,k,l){function m(a){var b=angular.element("<div>");return b.addClass(a),b}function n(c){var d=this,e=this.options=angular.extend({},a,b,c);this._open=!1,this.backdropEl=m(e.backdropClass),e.backdropFade&&(this.backdropEl.addClass(e.transitionClass),this.backdropEl.removeClass(e.triggerClass)),this.modalEl=m(e.dialogClass),e.dialogFade&&(this.modalEl.addClass(e.transitionClass),this.modalEl.removeClass(e.triggerClass)),this.handledEscapeKey=function(a){27===a.which&&(d.close(),a.preventDefault(),d.$scope.$apply())},this.handleBackDropClick=function(a){d.close(),a.preventDefault(),d.$scope.$apply()},this.handleLocationChange=function(){d.close()}}var o=e.find("body");return n.prototype.isOpen=function(){return this._open},n.prototype.open=function(a,b){var c=this,d=this.options;if(a&&(d.templateUrl=a),b&&(d.controller=b),!d.template&&!d.templateUrl)throw Error("Dialog.open expected template or templateUrl, neither found. Use options or open method to specify them.");return this._loadResolves().then(function(a){var b=a.$scope=c.$scope=a.$scope?a.$scope:g.$new();if(c.modalEl.html(a.$template),c.options.controller){var d=h(c.options.controller,a);c.modalEl.children().data("ngControllerController",d)}f(c.modalEl)(b),c._addElementsToDom(),setTimeout(function(){c.options.dialogFade&&c.modalEl.addClass(c.options.triggerClass),c.options.backdropFade&&c.backdropEl.addClass(c.options.triggerClass)}),c._bindEvents()}),this.deferred=j.defer(),this.deferred.promise},n.prototype.close=function(a){function b(a){a.removeClass(d.options.triggerClass)}function c(){d._open&&d._onCloseComplete(a)}var d=this,e=this._getFadingElements();if(e.length>0)for(var f=e.length-1;f>=0;f--)k(e[f],b).then(c);else this._onCloseComplete(a)},n.prototype._getFadingElements=function(){var a=[];return this.options.dialogFade&&a.push(this.modalEl),this.options.backdropFade&&a.push(this.backdropEl),a},n.prototype._bindEvents=function(){this.options.keyboard&&o.bind("keydown",this.handledEscapeKey),this.options.backdrop&&this.options.backdropClick&&this.backdropEl.bind("click",this.handleBackDropClick)},n.prototype._unbindEvents=function(){this.options.keyboard&&o.unbind("keydown",this.handledEscapeKey),this.options.backdrop&&this.options.backdropClick&&this.backdropEl.unbind("click",this.handleBackDropClick)},n.prototype._onCloseComplete=function(a){this._removeElementsFromDom(),this._unbindEvents(),this.deferred.resolve(a)},n.prototype._addElementsToDom=function(){o.append(this.modalEl),this.options.backdrop&&(0===c.value&&o.append(this.backdropEl),c.value++),this._open=!0},n.prototype._removeElementsFromDom=function(){this.modalEl.remove(),this.options.backdrop&&0===--c.value&&this.backdropEl.remove(),this._open=!1},n.prototype._loadResolves=function(){var a,b=[],c=[],e=this;return this.options.template?a=j.when(this.options.template):this.options.templateUrl&&(a=d.get(this.options.templateUrl,{cache:i}).then(function(a){return a.data})),angular.forEach(this.options.resolve||[],function(a,d){c.push(d),b.push(angular.isString(a)?l.get(a):l.invoke(a))}),c.push("$template"),b.push(a),j.all(b).then(function(a){var b={};return angular.forEach(a,function(a,d){b[c[d]]=a}),b.dialog=e,b})},{dialog:function(a){return new n(a)},messageBox:function(a,b,c){return new n({templateUrl:"template/dialog/message.html",controller:"MessageBoxController",resolve:{model:function(){return{title:a,message:b,buttons:c}}}})}}}]}),angular.module("ui.bootstrap.dropdownToggle",[]).directive("dropdownToggle",["$document","$location",function(a){var b=null,c=angular.noop;return{restrict:"CA",link:function(d,e){d.$watch("$location.path",function(){c()}),e.parent().bind("click",function(){c()}),e.bind("click",function(d){var f=e===b;d.preventDefault(),d.stopPropagation(),b&&c(),f||(e.parent().addClass("open"),b=e,c=function(d){d&&(d.preventDefault(),d.stopPropagation()),a.unbind("click",c),e.parent().removeClass("open"),c=angular.noop,b=null},a.bind("click",c))})}}}]),angular.module("ui.bootstrap.modal",["ui.bootstrap.dialog"]).directive("modal",["$parse","$dialog",function(a,b){return{restrict:"EA",terminal:!0,link:function(c,d,e){var f,g=angular.extend({},c.$eval(e.uiOptions||e.bsOptions||e.options)),h=e.modal||e.show;g=angular.extend(g,{template:d.html(),resolve:{$scope:function(){return c}}});var i=b.dialog(g);d.remove(),f=e.close?function(){a(e.close)(c)}:function(){angular.isFunction(a(h).assign)&&a(h).assign(c,!1)},c.$watch(h,function(a){
a?i.open().then(function(){f()}):i.isOpen()&&i.close()})}}}]),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope",function(a){a.noPrevious=function(){return 1===a.currentPage},a.noNext=function(){return a.currentPage===a.numPages},a.isActive=function(b){return a.currentPage===b},a.selectPage=function(b){!a.isActive(b)&&b>0&&a.numPages>=b&&(a.currentPage=b,a.onSelectPage({page:b}))}}]).constant("paginationConfig",{boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["paginationConfig",function(a){return{restrict:"EA",scope:{numPages:"=",currentPage:"=",maxSize:"=",onSelectPage:"&"},controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(b,c,d){function e(a,b,c,d){return{number:a,text:b,active:c,disabled:d}}var f=angular.isDefined(d.boundaryLinks)?b.$eval(d.boundaryLinks):a.boundaryLinks,g=angular.isDefined(d.directionLinks)?b.$eval(d.directionLinks):a.directionLinks,h=angular.isDefined(d.firstText)?b.$parent.$eval(d.firstText):a.firstText,i=angular.isDefined(d.previousText)?b.$parent.$eval(d.previousText):a.previousText,j=angular.isDefined(d.nextText)?b.$parent.$eval(d.nextText):a.nextText,k=angular.isDefined(d.lastText)?b.$parent.$eval(d.lastText):a.lastText,l=angular.isDefined(d.rotate)?b.$eval(d.rotate):a.rotate;b.$watch("numPages + currentPage + maxSize",function(){b.pages=[];var a=1,c=b.numPages,d=angular.isDefined(b.maxSize)&&b.maxSize<b.numPages;d&&(l?(a=Math.max(b.currentPage-Math.floor(b.maxSize/2),1),(c=a+b.maxSize-1)>b.numPages&&(c=b.numPages,a=c-b.maxSize+1)):(a=(Math.ceil(b.currentPage/b.maxSize)-1)*b.maxSize+1,c=Math.min(a+b.maxSize-1,b.numPages)));for(var m=a;c>=m;m++){var n=e(m,m,b.isActive(m),!1);b.pages.push(n)}if(d&&!l){if(a>1){var o=e(a-1,"...",!1,!1);b.pages.unshift(o)}if(b.numPages>c){var p=e(c+1,"...",!1,!1);b.pages.push(p)}}if(g){var q=e(b.currentPage-1,i,!1,b.noPrevious());b.pages.unshift(q);var r=e(b.currentPage+1,j,!1,b.noNext());b.pages.push(r)}if(f){var s=e(1,h,!1,b.noPrevious());b.pages.unshift(s);var t=e(b.numPages,k,!1,b.noNext());b.pages.push(t)}b.currentPage>b.numPages&&b.selectPage(b.numPages)})}}}]).constant("pagerConfig",{previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{numPages:"=",currentPage:"=",onSelectPage:"&"},controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d){function e(a,b,c,d,e){return{number:a,text:b,disabled:c,previous:h&&d,next:h&&e}}var f=angular.isDefined(d.previousText)?b.$parent.$eval(d.previousText):a.previousText,g=angular.isDefined(d.nextText)?b.$parent.$eval(d.nextText):a.nextText,h=angular.isDefined(d.align)?b.$parent.$eval(d.align):a.align;b.$watch("numPages + currentPage",function(){b.pages=[];var a=e(b.currentPage-1,f,b.noPrevious(),!0,!1);b.pages.unshift(a);var c=e(b.currentPage+1,g,b.noNext(),!1,!0);b.pages.push(c),b.currentPage>b.numPages&&b.selectPage(b.numPages)})}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e,f;a.bind("mousemove",function(a){e=a.pageX,f=a.pageY});var g=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},e=g(b[0]);return e!=a[0]&&(d=this.offset(angular.element(e)),d.top+=e.clientTop,d.left+=e.clientLeft),{width:b.prop("offsetWidth"),height:b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:c.prop("offsetWidth"),height:c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].body.scrollTop),left:d.left+(b.pageXOffset||a[0].body.scrollLeft)}},mouse:function(){return{x:e,y:f}}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g;return a.replace(b,function(a,b){return(b?"-":"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$parse","$document","$position","$interpolate",function(e,f,g,h,i,j,k){return function(e,l,m){function n(a){var b,d;return b=a||o.trigger||m,d=angular.isDefined(o.trigger)?c[o.trigger]||b:c[b]||b,{show:b,hide:d}}var o=angular.extend({},b,d),p=a(e),q=n(void 0),r=k.startSymbol(),s=k.endSymbol(),t="<"+p+'-popup title="'+r+"tt_title"+s+'" content="'+r+"tt_content"+s+'" placement="'+r+"tt_placement"+s+'" animation="tt_animation()" is-open="tt_isOpen"></'+p+"-popup>";return{restrict:"EA",scope:!0,link:function(a,b,c){function d(){a.tt_isOpen?m():k()}function k(){a.tt_popupDelay?u=g(p,a.tt_popupDelay):a.$apply(p)}function m(){a.$apply(function(){r()})}function p(){var c,d,e,f;if(a.tt_content){switch(s&&g.cancel(s),w.css({top:0,left:0,display:"block"}),x?(v=v||i.find("body"),v.append(w)):b.after(w),c=o.appendToBody?j.offset(b):j.position(b),d=w.prop("offsetWidth"),e=w.prop("offsetHeight"),a.tt_placement){case"mouse":var h=j.mouse();f={top:h.y,left:h.x};break;case"right":f={top:c.top+c.height/2-e/2,left:c.left+c.width};break;case"bottom":f={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"left":f={top:c.top+c.height/2-e/2,left:c.left-d};break;default:f={top:c.top-e,left:c.left+c.width/2-d/2}}f.top+="px",f.left+="px",w.css(f),a.tt_isOpen=!0}}function r(){a.tt_isOpen=!1,g.cancel(u),angular.isDefined(a.tt_animation)&&a.tt_animation()?s=g(function(){w.remove()},500):w.remove()}var s,u,v,w=f(t)(a),x=!!angular.isDefined(o.appendToBody)&&o.appendToBody;a.tt_isOpen=!1,c.$observe(e,function(b){a.tt_content=b}),c.$observe(l+"Title",function(b){a.tt_title=b}),c.$observe(l+"Placement",function(b){a.tt_placement=angular.isDefined(b)?b:o.placement}),c.$observe(l+"Animation",function(b){a.tt_animation=angular.isDefined(b)?h(b):function(){return o.animation}}),c.$observe(l+"PopupDelay",function(b){var c=parseInt(b,10);a.tt_popupDelay=isNaN(c)?o.popupDelay:c}),c.$observe(l+"Trigger",function(a){b.unbind(q.show),b.unbind(q.hide),q=n(a),q.show===q.hide?b.bind(q.show,d):(b.bind(q.show,k),b.bind(q.hide,m))}),c.$observe(l+"AppendToBody",function(b){x=angular.isDefined(b)?h(b)(a):x}),x&&a.$on("$locationChangeSuccess",function(){a.tt_isOpen&&r()}),a.$on("$destroy",function(){a.tt_isOpen?r():w.remove()})}}}}]}).directive("tooltipPopup",function(){return{restrict:"E",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"E",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$compile","$timeout","$parse","$window","$tooltip",function(a,b,c,d,e){return e("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",["ui.bootstrap.transition"]).constant("progressConfig",{animate:!0,autoType:!1,stackedTypes:["success","info","warning","danger"]}).controller("ProgressBarController",["$scope","$attrs","progressConfig",function(a,b,c){function d(a){return g[a]}var e=angular.isDefined(b.animate)?a.$eval(b.animate):c.animate,f=angular.isDefined(b.autoType)?a.$eval(b.autoType):c.autoType,g=angular.isDefined(b.stackedTypes)?a.$eval("["+b.stackedTypes+"]"):c.stackedTypes;this.makeBar=function(a,b,c){var g=angular.isObject(a)?a.value:a||0;return{from:angular.isObject(b)?b.value:b||0,to:g,type:angular.isObject(a)&&angular.isDefined(a.type)?a.type:f?d(c||0):null,animate:e}},this.addBar=function(b){a.bars.push(b),a.totalPercent+=b.to},this.clearBars=function(){a.bars=[],a.totalPercent=0},this.clearBars()}]).directive("progress",function(){return{restrict:"EA",replace:!0,controller:"ProgressBarController",scope:{value:"=percent",onFull:"&",onEmpty:"&"},templateUrl:"template/progressbar/progress.html",link:function(a,b,c,d){a.$watch("value",function(a,b){if(d.clearBars(),angular.isArray(a))for(var c=0,e=a.length;e>c;c++)d.addBar(d.makeBar(a[c],b[c],c));else d.addBar(d.makeBar(a,b))},!0),a.$watch("totalPercent",function(b){b>=100?a.onFull():0>=b&&a.onEmpty()},!0)}}}).directive("progressbar",["$transition",function(a){return{restrict:"EA",replace:!0,scope:{width:"=",old:"=",type:"=",animate:"="},templateUrl:"template/progressbar/bar.html",link:function(b,c){b.$watch("width",function(d){b.animate?(c.css("width",b.old+"%"),a(c,{width:d+"%"})):c.css("width",d+"%")})}}}]),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5}).directive("rating",["ratingConfig","$parse",function(a,b){return{restrict:"EA",scope:{value:"="},templateUrl:"template/rating/rating.html",replace:!0,link:function(c,d,e){var f=angular.isDefined(e.max)?c.$eval(e.max):a.max;c.range=[];for(var g=1;f>=g;g++)c.range.push(g);c.rate=function(a){c.readonly||(c.value=a)},c.enter=function(a){c.readonly||(c.val=a)},c.reset=function(){c.val=angular.copy(c.value)},c.reset(),c.$watch("value",function(a){c.val=a}),c.readonly=!1,e.readonly&&c.$parent.$watch(b(e.readonly),function(a){c.readonly=!!a})}}}]),angular.module("ui.bootstrap.tabs",[]).directive("tabs",function(){return function(){throw Error("The `tabs` directive is deprecated, please migrate to `tabset`. Instructions can be found at http://github.com/angular-ui/bootstrap/tree/master/CHANGELOG.md")}}).controller("TabsetController",["$scope","$element",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(a){a.active=!1}),a.active=!0},b.addTab=function(a){c.push(a),1==c.length&&b.select(a)},b.removeTab=function(a){var d=c.indexOf(a);if(a.active&&c.length>1){var e=d==c.length-1?d-1:d+1;b.select(c[e])}c.splice(d,1)}}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,scope:{},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=!!angular.isDefined(c.vertical)&&a.$eval(c.vertical),a.type=angular.isDefined(c.type)?a.$parent.$eval(c.type):"tabs"}}}).directive("tab",["$parse","$http","$templateCache","$compile",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{heading:"@",onSelect:"&select"},controller:function(){},compile:function(b,c,d){return function(b,c,e,f){var g,h;b.active=!1,e.active?(g=a(e.active),h=g.assign,b.$parent.$watch(g,function(a){a&&b.disabled?h(b.$parent,!1):b.active=!!a})):h=g=angular.noop,b.$watch("active",function(a){h(b.$parent,a),a&&(f.select(b),b.onSelect())}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b)}),b.active&&h(b.$parent,!0),d(b.$parent,function(a){var c,d=[];angular.forEach(a,function(a){a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"==a.tagName.toLowerCase()||"data-tab-heading"==a.tagName.toLowerCase())?c=a:d.push(a)}),c&&(b.headingElement=angular.element(c)),b.contentElement=angular.element(d)})}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",["$parse",function(a){return{restrict:"A",require:"^tabset",link:function(b,c,d){b.$watch(a(d.tabContentTransclude),function(a){c.html(""),a&&c.append(a.contentElement)})}}}]),angular.module("ui.bootstrap.timepicker",[]).filter("pad",function(){return function(a){return angular.isDefined(a)&&2>(""+a).length&&(a="0"+a),a}}).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:["AM","PM"],readonlyInput:!1,mousewheel:!0}).directive("timepicker",["padFilter","$parse","timepickerConfig",function(a,b,c){return{restrict:"EA",require:"ngModel",replace:!0,templateUrl:"template/timepicker/timepicker.html",scope:{model:"=ngModel"},link:function(d,e,f){function g(){var a=parseInt(d.hours,10);return(d.showMeridian?a>0&&13>a:a>=0&&24>a)?(d.showMeridian&&(12===a&&(a=0),d.meridian===k[1]&&(a+=12)),a):void 0}function h(){var b=j.getHours();d.showMeridian&&(b=0===b||12===b?12:b%12),d.hours="h"===r?b:a(b),d.validHours=!0;var c=j.getMinutes();d.minutes="m"===r?c:a(c),d.validMinutes=!0,d.meridian=d.showMeridian?12>j.getHours()?k[0]:k[1]:"",r=!1}function i(a){var b=new Date(j.getTime()+6e4*a);b.getDate()!==j.getDate()&&b.setDate(b.getDate()-1),j.setTime(b.getTime()),d.model=new Date(j)}var j=new Date,k=c.meridians,l=c.hourStep;f.hourStep&&d.$parent.$watch(b(f.hourStep),function(a){l=parseInt(a,10)});var m=c.minuteStep;f.minuteStep&&d.$parent.$watch(b(f.minuteStep),function(a){m=parseInt(a,10)}),d.showMeridian=c.showMeridian,f.showMeridian&&d.$parent.$watch(b(f.showMeridian),function(a){if(d.showMeridian=!!a,d.model)h();else{var b=new Date(j),c=g();angular.isDefined(c)&&b.setHours(c),d.model=new Date(b)}});var n=e.find("input"),o=n.eq(0),p=n.eq(1);if(angular.isDefined(f.mousewheel)?d.$eval(f.mousewheel):c.mousewheel){var q=function(a){return a.originalEvent&&(a=a.originalEvent),a.detail||a.wheelDelta>0};o.bind("mousewheel",function(a){d.$apply(q(a)?d.incrementHours():d.decrementHours()),a.preventDefault()}),p.bind("mousewheel",function(a){d.$apply(q(a)?d.incrementMinutes():d.decrementMinutes()),a.preventDefault()})}var r=!1;d.readonlyInput=angular.isDefined(f.readonlyInput)?d.$eval(f.readonlyInput):c.readonlyInput,d.readonlyInput?(d.updateHours=angular.noop,d.updateMinutes=angular.noop):(d.updateHours=function(){var a=g();angular.isDefined(a)?(r="h",null===d.model&&(d.model=new Date(j)),d.model.setHours(a)):(d.model=null,d.validHours=!1)},o.bind("blur",function(){d.validHours&&10>d.hours&&d.$apply(function(){d.hours=a(d.hours)})}),d.updateMinutes=function(){var a=parseInt(d.minutes,10);a>=0&&60>a?(r="m",null===d.model&&(d.model=new Date(j)),d.model.setMinutes(a)):(d.model=null,d.validMinutes=!1)},p.bind("blur",function(){d.validMinutes&&10>d.minutes&&d.$apply(function(){d.minutes=a(d.minutes)})})),d.$watch(function(){return+d.model},function(a){!isNaN(a)&&a>0&&(j=new Date(a),h())}),d.incrementHours=function(){i(60*l)},d.decrementHours=function(){i(60*-l)},d.incrementMinutes=function(){i(m)},d.decrementMinutes=function(){i(-m)},d.toggleMeridian=function(){i(720*(12>j.getHours()?1:-1))}}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(c){var d=c.match(b);if(!d)throw Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+c+"'.");return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(a,b,c,d,e,f,g){var h=[9,13,27,38,40];return{require:"ngModel",link:function(i,j,k,l){var m,n=i.$eval(k.typeaheadMinLength)||1,o=i.$eval(k.typeaheadWaitMs)||0,p=g.parse(k.typeahead),q=!1!==i.$eval(k.typeaheadEditable),r=b(k.typeaheadLoading).assign||angular.noop,s=b(k.typeaheadOnSelect),t=angular.element("<typeahead-popup></typeahead-popup>");t.attr({matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"});var u=i.$new();i.$on("$destroy",function(){u.$destroy()});var v=function(){u.matches=[],u.activeIdx=-1},w=function(a){var b={$viewValue:a};r(i,!0),c.when(p.source(u,b)).then(function(c){if(a===l.$viewValue){if(c.length>0){u.activeIdx=0,u.matches.length=0;for(var d=0;c.length>d;d++)b[p.itemName]=c[d],u.matches.push({label:p.viewMapper(u,b),model:c[d]});u.query=a,u.position=f.position(j),u.position.top=u.position.top+j.prop("offsetHeight")}else v();r(i,!1)}},function(){v(),r(i,!1)})};v(),u.query=void 0,l.$parsers.push(function(a){var b;return v(),m?a:(a&&a.length>=n&&(o>0?(b&&d.cancel(b),b=d(function(){w(a)},o)):w(a)),q?a:void 0)}),l.$render=function(){var a={};a[p.itemName]=m||l.$viewValue,j.val(p.viewMapper(u,a)||l.$viewValue),m=void 0},u.select=function(a){var b,c,d={};d[p.itemName]=c=m=u.matches[a].model,b=p.modelMapper(u,d),l.$setViewValue(b),l.$render(),s(u,{$item:c,$model:b,$label:p.viewMapper(u,d)}),j[0].focus()},j.bind("keydown",function(a){0!==u.matches.length&&-1!==h.indexOf(a.which)&&(a.preventDefault(),40===a.which?(u.activeIdx=(u.activeIdx+1)%u.matches.length,u.$digest()):38===a.which?(u.activeIdx=(u.activeIdx?u.activeIdx:u.matches.length)-1,u.$digest()):13===a.which||9===a.which?u.$apply(function(){u.select(u.activeIdx)}):27===a.which&&(a.stopPropagation(),v(),u.$digest()))}),e.bind("click",function(){v(),u.$digest()}),j.after(a(t)(u))}}}]).directive("typeaheadPopup",function(){return{restrict:"E",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead.html",link:function(a){a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c?b.replace(RegExp(a(c),"gi"),"<strong>$&</strong>"):c}}),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.datepicker","ui.bootstrap.dialog","ui.bootstrap.dropdownToggle","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.position","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/dialog/message.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){var b=function(a,b,c){b.removeClass("collapse"),b.css({height:c}),b[0].offsetWidth,b.addClass("collapse")};return{link:function(c,d,e){var f,g=!0;c.$watch(function(){return d[0].scrollHeight},function(){0!==d[0].scrollHeight&&(f||(g?b(c,d,d[0].scrollHeight+"px"):b(c,d,"auto")))}),c.$watch(e.collapse,function(a){a?k():j()});var h,i=function(b){return h&&h.cancel(),h=a(d,b),h.then(function(){h=void 0},function(){h=void 0}),h},j=function(){g?(g=!1,f||b(c,d,"auto")):i({height:d[0].scrollHeight+"px"}).then(function(){f||b(c,d,"auto")}),f=!1},k=function(){f=!0,g?(g=!1,b(c,d,0)):(b(c,d,d[0].scrollHeight+"px"),i({height:"0"}))}}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){(angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers)&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(){b.removeGroup(a)})},this.removeGroup=function(a){-1!==this.groups.indexOf(a)&&this.groups.splice(this.groups.indexOf(a),1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",["$parse","$transition","$timeout",function(a){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@"},controller:["$scope",function(){this.setHeading=function(a){this.heading=a}}],link:function(b,c,d,e){var f,g;e.addGroup(b),b.isOpen=!1,d.isOpen&&(f=a(d.isOpen),g=f.assign,b.$watch(function(){return f(b.$parent)},function(a){b.isOpen=a}),b.isOpen=!!f&&f(b.$parent)),b.$watch("isOpen",function(a){a&&e.closeOthers(b),g&&g(b.$parent,a)})}}}]).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",compile:function(a,b,c){return function(a,b,d,e){e.setHeading(c(a,function(){}))}}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.html(""),b.append(a))})}}}),angular.module("ui.bootstrap.alert",[]).directive("alert",function(){return{restrict:"EA",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"=",close:"&"},link:function(a,b,c){a.closeable="close"in c}}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).directive("btnRadio",["buttonConfig",function(a){var b=a.activeClass||"active",c=a.toggleEvent||"click";return{require:"ngModel",link:function(a,d,e,f){f.$render=function(){d.toggleClass(b,angular.equals(f.$modelValue,a.$eval(e.btnRadio)))},d.bind(c,function(){d.hasClass(b)||a.$apply(function(){f.$setViewValue(a.$eval(e.btnRadio)),f.$render()})})}}}]).directive("btnCheckbox",["buttonConfig",function(a){var b=a.activeClass||"active",c=a.toggleEvent||"click";return{require:"ngModel",link:function(a,d,e,f){var g=a.$eval(e.btnCheckboxTrue),h=a.$eval(e.btnCheckboxFalse);g=!angular.isDefined(g)||g,h=!!angular.isDefined(h)&&h,f.$render=function(){d.toggleClass(b,angular.equals(f.$modelValue,g))},d.bind(c,function(){a.$apply(function(){f.$setViewValue(d.hasClass(b)?h:g),f.$render()})})}}}]),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition","$q",function(a,b,c){function d(){function c(){f?(a.next(),d()):a.pause()}e&&b.cancel(e);var g=+a.interval;!isNaN(g)&&g>=0&&(e=b(c,g))}var e,f,g=this,h=g.slides=[],i=-1;g.currentSlide=null,g.select=function(e,f){function j(){g.currentSlide&&angular.isString(f)&&!a.noTransition&&e.$element?(e.$element.addClass(f),e.$element[0].offsetWidth=e.$element[0].offsetWidth,angular.forEach(h,function(a){angular.extend(a,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(e,{direction:f,active:!0,entering:!0}),angular.extend(g.currentSlide||{},{direction:f,leaving:!0}),a.$currentTransition=c(e.$element,{}),function(b,c){a.$currentTransition.then(function(){k(b,c)},function(){k(b,c)})}(e,g.currentSlide)):k(e,g.currentSlide),g.currentSlide=e,i=l,d()}function k(b,c){angular.extend(b,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(c||{},{direction:"",active:!1,leaving:!1,entering:!1}),a.$currentTransition=null}var l=h.indexOf(e);void 0===f&&(f=l>i?"next":"prev"),e&&e!==g.currentSlide&&(a.$currentTransition?(a.$currentTransition.cancel(),b(j)):j())},g.indexOfSlide=function(a){return h.indexOf(a)},a.next=function(){var b=(i+1)%h.length;return a.$currentTransition?void 0:g.select(h[b],"next")},a.prev=function(){var b=0>i-1?h.length-1:i-1;return a.$currentTransition?void 0:g.select(h[b],"prev")},a.select=function(a){g.select(a)},a.isActive=function(a){return g.currentSlide===a},a.slides=function(){return h},a.$watch("interval",d),a.play=function(){f||(f=!0,d())},a.pause=function(){a.noPause||(f=!1,e&&b.cancel(e))},g.addSlide=function(b,c){b.$element=c,h.push(b),1===h.length||b.active?(g.select(h[h.length-1]),1==h.length&&a.play()):b.active=!1},g.removeSlide=function(a){var b=h.indexOf(a);h.splice(b,1),h.length>0&&a.active?b>=h.length?g.select(h[b-1]):g.select(h[b]):i>b&&i--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",["$parse",function(a){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{},link:function(b,c,d,e){if(d.active){var f=a(d.active),g=f.assign,h=b.active=f(b.$parent);b.$watch(function(){var a=f(b.$parent);return a!==b.active&&(a!==h?h=b.active=a:g(b.$parent,a=h=b.active)),a})}e.addSlide(b,c),b.$on("$destroy",function(){e.removeSlide(b)}),b.$watch("active",function(a){a&&e.select(b)})}}}]),angular.module("ui.bootstrap.datepicker",[]).constant("datepickerConfig",{dayFormat:"dd",monthFormat:"MMMM",yearFormat:"yyyy",dayHeaderFormat:"EEE",dayTitleFormat:"MMMM yyyy",monthTitleFormat:"yyyy",showWeeks:!0,startingDay:0,yearRange:20}).directive("datepicker",["dateFilter","$parse","datepickerConfig",function(a,b,c){return{restrict:"EA",replace:!0,scope:{model:"=ngModel",dateDisabled:"&"},templateUrl:"template/datepicker/datepicker.html",link:function(d,e,f){function g(a,b,c){d.rows=a,d.labels=b,d.title=c}function h(){d.showWeekNumbers="day"===d.mode&&l}function j(a,b){return"year"===d.mode?b.getFullYear()-a.getFullYear():"month"===d.mode?new Date(b.getFullYear(),b.getMonth())-new Date(a.getFullYear(),a.getMonth()):"day"===d.mode?new Date(b.getFullYear(),b.getMonth(),b.getDate())-new Date(a.getFullYear(),a.getMonth(),a.getDate()):void 0}function k(a){return m&&j(a,m)>0||n&&0>j(a,n)||d.dateDisabled&&d.dateDisabled({date:a,mode:d.mode})}d.mode="day";var l,m,n,o=new Date,p={};p.day=angular.isDefined(f.dayFormat)?d.$eval(f.dayFormat):c.dayFormat,p.month=angular.isDefined(f.monthFormat)?d.$eval(f.monthFormat):c.monthFormat,p.year=angular.isDefined(f.yearFormat)?d.$eval(f.yearFormat):c.yearFormat,p.dayHeader=angular.isDefined(f.dayHeaderFormat)?d.$eval(f.dayHeaderFormat):c.dayHeaderFormat,p.dayTitle=angular.isDefined(f.dayTitleFormat)?d.$eval(f.dayTitleFormat):c.dayTitleFormat,p.monthTitle=angular.isDefined(f.monthTitleFormat)?d.$eval(f.monthTitleFormat):c.monthTitleFormat;var q=angular.isDefined(f.startingDay)?d.$eval(f.startingDay):c.startingDay,r=angular.isDefined(f.yearRange)?d.$eval(f.yearRange):c.yearRange;f.showWeeks?d.$parent.$watch(b(f.showWeeks),function(a){l=!!a,h()}):(l=c.showWeeks,h()),f.min&&d.$parent.$watch(b(f.min),function(a){m=new Date(a),v()}),f.max&&d.$parent.$watch(b(f.max),function(a){n=new Date(a),v()});var s=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},t=function(a,b){return new Date(a,b+1,0).getDate()},u={day:function(){function b(b,d,f){for(var g=0;d>g;g++)c.push({date:new Date(b),isCurrent:f,isSelected:w(b),label:a(b,p.day),disabled:k(b)}),b.setDate(b.getDate()+1);e=b}var c=[],d=[],e=null,f=new Date(o);f.setDate(1);var h=q-f.getDay(),j=h>0?7-h:-h;for(j>0&&(f.setDate(1-j),b(f,j,!1)),b(e||f,t(o.getFullYear(),o.getMonth()),!0),b(e,(7-c.length%7)%7,!1),i=0;7>i;i++)d.push(a(c[i].date,p.dayHeader));g(s(c,7),d,a(o,p.dayTitle))},month:function(){for(var b=[],c=0,d=o.getFullYear();12>c;){var e=new Date(d,c++,1);b.push({date:e,isCurrent:!0,isSelected:w(e),label:a(e,p.month),disabled:k(e)})}g(s(b,3),[],a(o,p.monthTitle))},year:function(){for(var b=[],c=parseInt((o.getFullYear()-1)/r,10)*r+1,d=0;r>d;d++){var e=new Date(c+d,0,1);b.push({date:e,isCurrent:!0,isSelected:w(e),label:a(e,p.year),disabled:k(e)})}var f=b[0].label+" - "+b[b.length-1].label;g(s(b,5),[],f)}},v=function(){u[d.mode]()},w=function(a){if(d.model&&d.model.getFullYear()===a.getFullYear()){if("year"===d.mode)return!0;if(d.model.getMonth()===a.getMonth())return"month"===d.mode||"day"===d.mode&&d.model.getDate()===a.getDate()}return!1};d.$watch("model",function(a,b){angular.isDate(a)&&(o=angular.copy(a)),angular.equals(a,b)||v()}),d.$watch("mode",function(){h(),v()}),d.select=function(a){o=new Date(a),"year"===d.mode?(d.mode="month",o.setFullYear(a.getFullYear())):"month"===d.mode?(d.mode="day",o.setMonth(a.getMonth())):"day"===d.mode&&(d.model=new Date(o))},d.move=function(a){"day"===d.mode?o.setMonth(o.getMonth()+a):"month"===d.mode?o.setFullYear(o.getFullYear()+a):"year"===d.mode&&o.setFullYear(o.getFullYear()+a*r),v()},d.toggleMode=function(){d.mode="day"===d.mode?"month":"month"===d.mode?"year":"day"},d.getWeekNumber=function(a){if("day"===d.mode&&d.showWeekNumbers&&7===a.length){var b=q>4?11-q:4-q,c=new Date(a[b].date);return c.setHours(0,0,0),Math.ceil(((c-new Date(c.getFullYear(),0,1))/864e5+1)/7)}}}}}]);var dialogModule=angular.module("ui.bootstrap.dialog",["ui.bootstrap.transition"]);dialogModule.controller("MessageBoxController",["$scope","dialog","model",function(a,b,c){a.title=c.title,a.message=c.message,a.buttons=c.buttons,a.close=function(a){b.close(a)}}]),dialogModule.provider("$dialog",function(){var a={backdrop:!0,dialogClass:"modal",backdropClass:"modal-backdrop",transitionClass:"fade",triggerClass:"in",resolve:{},backdropFade:!1,dialogFade:!1,keyboard:!0,backdropClick:!0},b={},c={value:0};this.options=function(a){b=a},this.$get=["$http","$document","$compile","$rootScope","$controller","$templateCache","$q","$transition","$injector",function(d,e,f,g,h,i,j,k,l){function m(a){var b=angular.element("<div>");return b.addClass(a),b}function n(c){var d=this,e=this.options=angular.extend({},a,b,c);this._open=!1,this.backdropEl=m(e.backdropClass),e.backdropFade&&(this.backdropEl.addClass(e.transitionClass),this.backdropEl.removeClass(e.triggerClass)),this.modalEl=m(e.dialogClass),e.dialogFade&&(this.modalEl.addClass(e.transitionClass),this.modalEl.removeClass(e.triggerClass)),this.handledEscapeKey=function(a){27===a.which&&(d.close(),a.preventDefault(),d.$scope.$apply())},this.handleBackDropClick=function(a){d.close(),a.preventDefault(),d.$scope.$apply()},this.handleLocationChange=function(){d.close()}}var o=e.find("body");return n.prototype.isOpen=function(){return this._open},n.prototype.open=function(a,b){var c=this,d=this.options;if(a&&(d.templateUrl=a),b&&(d.controller=b),
!d.template&&!d.templateUrl)throw Error("Dialog.open expected template or templateUrl, neither found. Use options or open method to specify them.");return this._loadResolves().then(function(a){var b=a.$scope=c.$scope=a.$scope?a.$scope:g.$new();if(c.modalEl.html(a.$template),c.options.controller){var d=h(c.options.controller,a);c.modalEl.children().data("ngControllerController",d)}f(c.modalEl)(b),c._addElementsToDom(),setTimeout(function(){c.options.dialogFade&&c.modalEl.addClass(c.options.triggerClass),c.options.backdropFade&&c.backdropEl.addClass(c.options.triggerClass)}),c._bindEvents()}),this.deferred=j.defer(),this.deferred.promise},n.prototype.close=function(a){function b(a){a.removeClass(d.options.triggerClass)}function c(){d._open&&d._onCloseComplete(a)}var d=this,e=this._getFadingElements();if(e.length>0)for(var f=e.length-1;f>=0;f--)k(e[f],b).then(c);else this._onCloseComplete(a)},n.prototype._getFadingElements=function(){var a=[];return this.options.dialogFade&&a.push(this.modalEl),this.options.backdropFade&&a.push(this.backdropEl),a},n.prototype._bindEvents=function(){this.options.keyboard&&o.bind("keydown",this.handledEscapeKey),this.options.backdrop&&this.options.backdropClick&&this.backdropEl.bind("click",this.handleBackDropClick)},n.prototype._unbindEvents=function(){this.options.keyboard&&o.unbind("keydown",this.handledEscapeKey),this.options.backdrop&&this.options.backdropClick&&this.backdropEl.unbind("click",this.handleBackDropClick)},n.prototype._onCloseComplete=function(a){this._removeElementsFromDom(),this._unbindEvents(),this.deferred.resolve(a)},n.prototype._addElementsToDom=function(){o.append(this.modalEl),this.options.backdrop&&(0===c.value&&o.append(this.backdropEl),c.value++),this._open=!0},n.prototype._removeElementsFromDom=function(){this.modalEl.remove(),this.options.backdrop&&0===--c.value&&this.backdropEl.remove(),this._open=!1},n.prototype._loadResolves=function(){var a,b=[],c=[],e=this;return this.options.template?a=j.when(this.options.template):this.options.templateUrl&&(a=d.get(this.options.templateUrl,{cache:i}).then(function(a){return a.data})),angular.forEach(this.options.resolve||[],function(a,d){c.push(d),b.push(angular.isString(a)?l.get(a):l.invoke(a))}),c.push("$template"),b.push(a),j.all(b).then(function(a){var b={};return angular.forEach(a,function(a,d){b[c[d]]=a}),b.dialog=e,b})},{dialog:function(a){return new n(a)},messageBox:function(a,b,c){return new n({templateUrl:"template/dialog/message.html",controller:"MessageBoxController",resolve:{model:function(){return{title:a,message:b,buttons:c}}}})}}}]}),angular.module("ui.bootstrap.dropdownToggle",[]).directive("dropdownToggle",["$document","$location",function(a){var b=null,c=angular.noop;return{restrict:"CA",link:function(d,e){d.$watch("$location.path",function(){c()}),e.parent().bind("click",function(){c()}),e.bind("click",function(d){var f=e===b;d.preventDefault(),d.stopPropagation(),b&&c(),f||(e.parent().addClass("open"),b=e,c=function(d){d&&(d.preventDefault(),d.stopPropagation()),a.unbind("click",c),e.parent().removeClass("open"),c=angular.noop,b=null},a.bind("click",c))})}}}]),angular.module("ui.bootstrap.modal",["ui.bootstrap.dialog"]).directive("modal",["$parse","$dialog",function(a,b){return{restrict:"EA",terminal:!0,link:function(c,d,e){var f,g=angular.extend({},c.$eval(e.uiOptions||e.bsOptions||e.options)),h=e.modal||e.show;g=angular.extend(g,{template:d.html(),resolve:{$scope:function(){return c}}});var i=b.dialog(g);d.remove(),f=e.close?function(){a(e.close)(c)}:function(){angular.isFunction(a(h).assign)&&a(h).assign(c,!1)},c.$watch(h,function(a){a?i.open().then(function(){f()}):i.isOpen()&&i.close()})}}}]),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope",function(a){a.noPrevious=function(){return 1===a.currentPage},a.noNext=function(){return a.currentPage===a.numPages},a.isActive=function(b){return a.currentPage===b},a.selectPage=function(b){!a.isActive(b)&&b>0&&a.numPages>=b&&(a.currentPage=b,a.onSelectPage({page:b}))}}]).constant("paginationConfig",{boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["paginationConfig",function(a){return{restrict:"EA",scope:{numPages:"=",currentPage:"=",maxSize:"=",onSelectPage:"&"},controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(b,c,d){function e(a,b,c,d){return{number:a,text:b,active:c,disabled:d}}var f=angular.isDefined(d.boundaryLinks)?b.$eval(d.boundaryLinks):a.boundaryLinks,g=angular.isDefined(d.directionLinks)?b.$eval(d.directionLinks):a.directionLinks,h=angular.isDefined(d.firstText)?b.$parent.$eval(d.firstText):a.firstText,i=angular.isDefined(d.previousText)?b.$parent.$eval(d.previousText):a.previousText,j=angular.isDefined(d.nextText)?b.$parent.$eval(d.nextText):a.nextText,k=angular.isDefined(d.lastText)?b.$parent.$eval(d.lastText):a.lastText,l=angular.isDefined(d.rotate)?b.$eval(d.rotate):a.rotate;b.$watch("numPages + currentPage + maxSize",function(){b.pages=[];var a=1,c=b.numPages,d=angular.isDefined(b.maxSize)&&b.maxSize<b.numPages;d&&(l?(a=Math.max(b.currentPage-Math.floor(b.maxSize/2),1),(c=a+b.maxSize-1)>b.numPages&&(c=b.numPages,a=c-b.maxSize+1)):(a=(Math.ceil(b.currentPage/b.maxSize)-1)*b.maxSize+1,c=Math.min(a+b.maxSize-1,b.numPages)));for(var m=a;c>=m;m++){var n=e(m,m,b.isActive(m),!1);b.pages.push(n)}if(d&&!l){if(a>1){var o=e(a-1,"...",!1,!1);b.pages.unshift(o)}if(b.numPages>c){var p=e(c+1,"...",!1,!1);b.pages.push(p)}}if(g){var q=e(b.currentPage-1,i,!1,b.noPrevious());b.pages.unshift(q);var r=e(b.currentPage+1,j,!1,b.noNext());b.pages.push(r)}if(f){var s=e(1,h,!1,b.noPrevious());b.pages.unshift(s);var t=e(b.numPages,k,!1,b.noNext());b.pages.push(t)}b.currentPage>b.numPages&&b.selectPage(b.numPages)})}}}]).constant("pagerConfig",{previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{numPages:"=",currentPage:"=",onSelectPage:"&"},controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d){function e(a,b,c,d,e){return{number:a,text:b,disabled:c,previous:h&&d,next:h&&e}}var f=angular.isDefined(d.previousText)?b.$parent.$eval(d.previousText):a.previousText,g=angular.isDefined(d.nextText)?b.$parent.$eval(d.nextText):a.nextText,h=angular.isDefined(d.align)?b.$parent.$eval(d.align):a.align;b.$watch("numPages + currentPage",function(){b.pages=[];var a=e(b.currentPage-1,f,b.noPrevious(),!0,!1);b.pages.unshift(a);var c=e(b.currentPage+1,g,b.noNext(),!1,!0);b.pages.push(c),b.currentPage>b.numPages&&b.selectPage(b.numPages)})}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e,f;a.bind("mousemove",function(a){e=a.pageX,f=a.pageY});var g=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},e=g(b[0]);return e!=a[0]&&(d=this.offset(angular.element(e)),d.top+=e.clientTop,d.left+=e.clientLeft),{width:b.prop("offsetWidth"),height:b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:c.prop("offsetWidth"),height:c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].body.scrollTop),left:d.left+(b.pageXOffset||a[0].body.scrollLeft)}},mouse:function(){return{x:e,y:f}}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g;return a.replace(b,function(a,b){return(b?"-":"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$parse","$document","$position","$interpolate",function(e,f,g,h,i,j,k){return function(e,l,m){function n(a){var b,d;return b=a||o.trigger||m,d=angular.isDefined(o.trigger)?c[o.trigger]||b:c[b]||b,{show:b,hide:d}}var o=angular.extend({},b,d),p=a(e),q=n(void 0),r=k.startSymbol(),s=k.endSymbol(),t="<"+p+'-popup title="'+r+"tt_title"+s+'" content="'+r+"tt_content"+s+'" placement="'+r+"tt_placement"+s+'" animation="tt_animation()" is-open="tt_isOpen"></'+p+"-popup>";return{restrict:"EA",scope:!0,link:function(a,b,c){function d(){a.tt_isOpen?m():k()}function k(){a.tt_popupDelay?u=g(p,a.tt_popupDelay):a.$apply(p)}function m(){a.$apply(function(){r()})}function p(){var c,d,e,f;if(a.tt_content){switch(s&&g.cancel(s),w.css({top:0,left:0,display:"block"}),x?(v=v||i.find("body"),v.append(w)):b.after(w),c=o.appendToBody?j.offset(b):j.position(b),d=w.prop("offsetWidth"),e=w.prop("offsetHeight"),a.tt_placement){case"mouse":var h=j.mouse();f={top:h.y,left:h.x};break;case"right":f={top:c.top+c.height/2-e/2,left:c.left+c.width};break;case"bottom":f={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"left":f={top:c.top+c.height/2-e/2,left:c.left-d};break;default:f={top:c.top-e,left:c.left+c.width/2-d/2}}f.top+="px",f.left+="px",w.css(f),a.tt_isOpen=!0}}function r(){a.tt_isOpen=!1,g.cancel(u),angular.isDefined(a.tt_animation)&&a.tt_animation()?s=g(function(){w.remove()},500):w.remove()}var s,u,v,w=f(t)(a),x=!!angular.isDefined(o.appendToBody)&&o.appendToBody;a.tt_isOpen=!1,c.$observe(e,function(b){a.tt_content=b}),c.$observe(l+"Title",function(b){a.tt_title=b}),c.$observe(l+"Placement",function(b){a.tt_placement=angular.isDefined(b)?b:o.placement}),c.$observe(l+"Animation",function(b){a.tt_animation=angular.isDefined(b)?h(b):function(){return o.animation}}),c.$observe(l+"PopupDelay",function(b){var c=parseInt(b,10);a.tt_popupDelay=isNaN(c)?o.popupDelay:c}),c.$observe(l+"Trigger",function(a){b.unbind(q.show),b.unbind(q.hide),q=n(a),q.show===q.hide?b.bind(q.show,d):(b.bind(q.show,k),b.bind(q.hide,m))}),c.$observe(l+"AppendToBody",function(b){x=angular.isDefined(b)?h(b)(a):x}),x&&a.$on("$locationChangeSuccess",function(){a.tt_isOpen&&r()}),a.$on("$destroy",function(){a.tt_isOpen?r():w.remove()})}}}}]}).directive("tooltipPopup",function(){return{restrict:"E",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"E",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$compile","$timeout","$parse","$window","$tooltip",function(a,b,c,d,e){return e("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",["ui.bootstrap.transition"]).constant("progressConfig",{animate:!0,autoType:!1,stackedTypes:["success","info","warning","danger"]}).controller("ProgressBarController",["$scope","$attrs","progressConfig",function(a,b,c){function d(a){return g[a]}var e=angular.isDefined(b.animate)?a.$eval(b.animate):c.animate,f=angular.isDefined(b.autoType)?a.$eval(b.autoType):c.autoType,g=angular.isDefined(b.stackedTypes)?a.$eval("["+b.stackedTypes+"]"):c.stackedTypes;this.makeBar=function(a,b,c){var g=angular.isObject(a)?a.value:a||0;return{from:angular.isObject(b)?b.value:b||0,to:g,type:angular.isObject(a)&&angular.isDefined(a.type)?a.type:f?d(c||0):null,animate:e}},this.addBar=function(b){a.bars.push(b),a.totalPercent+=b.to},this.clearBars=function(){a.bars=[],a.totalPercent=0},this.clearBars()}]).directive("progress",function(){return{restrict:"EA",replace:!0,controller:"ProgressBarController",scope:{value:"=percent",onFull:"&",onEmpty:"&"},templateUrl:"template/progressbar/progress.html",link:function(a,b,c,d){a.$watch("value",function(a,b){if(d.clearBars(),angular.isArray(a))for(var c=0,e=a.length;e>c;c++)d.addBar(d.makeBar(a[c],b[c],c));else d.addBar(d.makeBar(a,b))},!0),a.$watch("totalPercent",function(b){b>=100?a.onFull():0>=b&&a.onEmpty()},!0)}}}).directive("progressbar",["$transition",function(a){return{restrict:"EA",replace:!0,scope:{width:"=",old:"=",type:"=",animate:"="},templateUrl:"template/progressbar/bar.html",link:function(b,c){b.$watch("width",function(d){b.animate?(c.css("width",b.old+"%"),a(c,{width:d+"%"})):c.css("width",d+"%")})}}}]),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5}).directive("rating",["ratingConfig","$parse",function(a,b){return{restrict:"EA",scope:{value:"="},templateUrl:"template/rating/rating.html",replace:!0,link:function(c,d,e){var f=angular.isDefined(e.max)?c.$eval(e.max):a.max;c.range=[];for(var g=1;f>=g;g++)c.range.push(g);c.rate=function(a){c.readonly||(c.value=a)},c.enter=function(a){c.readonly||(c.val=a)},c.reset=function(){c.val=angular.copy(c.value)},c.reset(),c.$watch("value",function(a){c.val=a}),c.readonly=!1,e.readonly&&c.$parent.$watch(b(e.readonly),function(a){c.readonly=!!a})}}}]),angular.module("ui.bootstrap.tabs",[]).directive("tabs",function(){return function(){throw Error("The `tabs` directive is deprecated, please migrate to `tabset`. Instructions can be found at http://github.com/angular-ui/bootstrap/tree/master/CHANGELOG.md")}}).controller("TabsetController",["$scope","$element",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(a){a.active=!1}),a.active=!0},b.addTab=function(a){c.push(a),1==c.length&&b.select(a)},b.removeTab=function(a){var d=c.indexOf(a);if(a.active&&c.length>1){var e=d==c.length-1?d-1:d+1;b.select(c[e])}c.splice(d,1)}}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,scope:{},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=!!angular.isDefined(c.vertical)&&a.$eval(c.vertical),a.type=angular.isDefined(c.type)?a.$parent.$eval(c.type):"tabs"}}}).directive("tab",["$parse","$http","$templateCache","$compile",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{heading:"@",onSelect:"&select"},controller:function(){},compile:function(b,c,d){return function(b,c,e,f){var g,h;b.active=!1,e.active?(g=a(e.active),h=g.assign,b.$parent.$watch(g,function(a){a&&b.disabled?h(b.$parent,!1):b.active=!!a})):h=g=angular.noop,b.$watch("active",function(a){h(b.$parent,a),a&&(f.select(b),b.onSelect())}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b)}),b.active&&h(b.$parent,!0),d(b.$parent,function(a){var c,d=[];angular.forEach(a,function(a){a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"==a.tagName.toLowerCase()||"data-tab-heading"==a.tagName.toLowerCase())?c=a:d.push(a)}),c&&(b.headingElement=angular.element(c)),b.contentElement=angular.element(d)})}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",["$parse",function(a){return{restrict:"A",require:"^tabset",link:function(b,c,d){b.$watch(a(d.tabContentTransclude),function(a){c.html(""),a&&c.append(a.contentElement)})}}}]),angular.module("ui.bootstrap.timepicker",[]).filter("pad",function(){return function(a){return angular.isDefined(a)&&2>(""+a).length&&(a="0"+a),a}}).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:["AM","PM"],readonlyInput:!1,mousewheel:!0}).directive("timepicker",["padFilter","$parse","timepickerConfig",function(a,b,c){return{restrict:"EA",require:"ngModel",replace:!0,templateUrl:"template/timepicker/timepicker.html",scope:{model:"=ngModel"},link:function(d,e,f){function g(){var a=parseInt(d.hours,10);return(d.showMeridian?a>0&&13>a:a>=0&&24>a)?(d.showMeridian&&(12===a&&(a=0),d.meridian===k[1]&&(a+=12)),a):void 0}function h(){var b=j.getHours();d.showMeridian&&(b=0===b||12===b?12:b%12),d.hours="h"===r?b:a(b),d.validHours=!0;var c=j.getMinutes();d.minutes="m"===r?c:a(c),d.validMinutes=!0,d.meridian=d.showMeridian?12>j.getHours()?k[0]:k[1]:"",r=!1}function i(a){var b=new Date(j.getTime()+6e4*a);b.getDate()!==j.getDate()&&b.setDate(b.getDate()-1),j.setTime(b.getTime()),d.model=new Date(j)}var j=new Date,k=c.meridians,l=c.hourStep;f.hourStep&&d.$parent.$watch(b(f.hourStep),function(a){l=parseInt(a,10)});var m=c.minuteStep;f.minuteStep&&d.$parent.$watch(b(f.minuteStep),function(a){m=parseInt(a,10)}),d.showMeridian=c.showMeridian,f.showMeridian&&d.$parent.$watch(b(f.showMeridian),function(a){if(d.showMeridian=!!a,d.model)h();else{var b=new Date(j),c=g();angular.isDefined(c)&&b.setHours(c),d.model=new Date(b)}});var n=e.find("input"),o=n.eq(0),p=n.eq(1);if(angular.isDefined(f.mousewheel)?d.$eval(f.mousewheel):c.mousewheel){var q=function(a){return a.originalEvent&&(a=a.originalEvent),a.detail||a.wheelDelta>0};o.bind("mousewheel",function(a){d.$apply(q(a)?d.incrementHours():d.decrementHours()),a.preventDefault()}),p.bind("mousewheel",function(a){d.$apply(q(a)?d.incrementMinutes():d.decrementMinutes()),a.preventDefault()})}var r=!1;d.readonlyInput=angular.isDefined(f.readonlyInput)?d.$eval(f.readonlyInput):c.readonlyInput,d.readonlyInput?(d.updateHours=angular.noop,d.updateMinutes=angular.noop):(d.updateHours=function(){var a=g();angular.isDefined(a)?(r="h",null===d.model&&(d.model=new Date(j)),d.model.setHours(a)):(d.model=null,d.validHours=!1)},o.bind("blur",function(){d.validHours&&10>d.hours&&d.$apply(function(){d.hours=a(d.hours)})}),d.updateMinutes=function(){var a=parseInt(d.minutes,10);a>=0&&60>a?(r="m",null===d.model&&(d.model=new Date(j)),d.model.setMinutes(a)):(d.model=null,d.validMinutes=!1)},p.bind("blur",function(){d.validMinutes&&10>d.minutes&&d.$apply(function(){d.minutes=a(d.minutes)})})),d.$watch(function(){return+d.model},function(a){!isNaN(a)&&a>0&&(j=new Date(a),h())}),d.incrementHours=function(){i(60*l)},d.decrementHours=function(){i(60*-l)},d.incrementMinutes=function(){i(m)},d.decrementMinutes=function(){i(-m)},d.toggleMeridian=function(){i(720*(12>j.getHours()?1:-1))}}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(c){var d=c.match(b);if(!d)throw Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+c+"'.");return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(a,b,c,d,e,f,g){var h=[9,13,27,38,40];return{require:"ngModel",link:function(i,j,k,l){var m,n=i.$eval(k.typeaheadMinLength)||1,o=i.$eval(k.typeaheadWaitMs)||0,p=g.parse(k.typeahead),q=!1!==i.$eval(k.typeaheadEditable),r=b(k.typeaheadLoading).assign||angular.noop,s=b(k.typeaheadOnSelect),t=angular.element("<typeahead-popup></typeahead-popup>");t.attr({matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"});var u=i.$new();i.$on("$destroy",function(){u.$destroy()});var v=function(){u.matches=[],u.activeIdx=-1},w=function(a){var b={$viewValue:a};r(i,!0),c.when(p.source(u,b)).then(function(c){if(a===l.$viewValue){if(c.length>0){u.activeIdx=0,u.matches.length=0;for(var d=0;c.length>d;d++)b[p.itemName]=c[d],u.matches.push({label:p.viewMapper(u,b),model:c[d]});u.query=a,u.position=f.position(j),u.position.top=u.position.top+j.prop("offsetHeight")}else v();r(i,!1)}},function(){v(),r(i,!1)})};v(),u.query=void 0,l.$parsers.push(function(a){var b;return v(),m?a:(a&&a.length>=n&&(o>0?(b&&d.cancel(b),b=d(function(){w(a)},o)):w(a)),q?a:void 0)}),l.$render=function(){var a={};a[p.itemName]=m||l.$viewValue,j.val(p.viewMapper(u,a)||l.$viewValue),m=void 0},u.select=function(a){var b,c,d={};d[p.itemName]=c=m=u.matches[a].model,b=p.modelMapper(u,d),l.$setViewValue(b),l.$render(),s(u,{$item:c,$model:b,$label:p.viewMapper(u,d)}),j[0].focus()},j.bind("keydown",function(a){0!==u.matches.length&&-1!==h.indexOf(a.which)&&(a.preventDefault(),40===a.which?(u.activeIdx=(u.activeIdx+1)%u.matches.length,u.$digest()):38===a.which?(u.activeIdx=(u.activeIdx?u.activeIdx:u.matches.length)-1,u.$digest()):13===a.which||9===a.which?u.$apply(function(){u.select(u.activeIdx)}):27===a.which&&(a.stopPropagation(),v(),u.$digest()))}),e.bind("click",function(){v(),u.$digest()}),j.after(a(t)(u))}}}]).directive("typeaheadPopup",function(){return{restrict:"E",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead.html",link:function(a){a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c?b.replace(RegExp(a(c),"gi"),"<strong>$&</strong>"):c}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="accordion-group">\n  <div class="accordion-heading" ><a class="accordion-toggle" ng-click="isOpen = !isOpen" accordion-transclude="heading">{{heading}}</a></div>\n  <div class="accordion-body" collapse="!isOpen">\n    <div class="accordion-inner" ng-transclude></div>  </div>\n</div>')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="accordion" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html","<div class='alert' ng-class='type && \"alert-\" + type'>\n    <button ng-show='closeable' type='button' class='close' ng-click='close()'>&times;</button>\n    <div ng-transclude></div>\n</div>\n")}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel">\n    <ol class="carousel-indicators" ng-show="slides().length > 1">\n        <li ng-repeat="slide in slides()" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a ng-click="prev()" class="carousel-control left" ng-show="slides().length > 1">&lsaquo;</a>\n    <a ng-click="next()" class="carousel-control right" ng-show="slides().length > 1">&rsaquo;</a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<table class="well well-large">\n  <thead>\n    <tr class="text-center">\n      <th><button class="btn pull-left" ng-click="move(-1)"><i class="icon-chevron-left"></i></button></th>\n      <th colspan="{{rows[0].length - 2 + showWeekNumbers}}"><button class="btn btn-block" ng-click="toggleMode()"><strong>{{title}}</strong></button></th>\n      <th><button class="btn pull-right" ng-click="move(1)"><i class="icon-chevron-right"></i></button></th>\n    </tr>\n    <tr class="text-center" ng-show="labels.length > 0">\n      <th ng-show="showWeekNumbers">#</th>\n      <th ng-repeat="label in labels">{{label}}</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows">\n      <td ng-show="showWeekNumbers" class="text-center"><em>{{ getWeekNumber(row) }}</em></td>\n      <td ng-repeat="dt in row" class="text-center">\n        <button style="width:100%;" class="btn" ng-class="{\'btn-info\': dt.isSelected}" ng-click="select(dt.date)" ng-disabled="dt.disabled"><span ng-class="{muted: ! dt.isCurrent}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/dialog/message.html",[]).run(["$templateCache",function(a){a.put("template/dialog/message.html",'<div class="modal-header">\n\t<h3>{{ title }}</h3>\n</div>\n<div class="modal-body">\n\t<p>{{ message }}</p>\n</div>\n<div class="modal-footer">\n\t<button ng-repeat="btn in buttons" ng-click="close(btn.result)" class="btn" ng-class="btn.cssClass">{{ btn.label }}</button>\n</div>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop"></div>')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div class="modal in" ng-transclude></div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<div class="pager">\n  <ul>\n    <li ng-repeat="page in pages" ng-class="{disabled: page.disabled, previous: page.previous, next: page.next}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  </ul>\n</div>\n')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<div class="pagination"><ul>\n  <li ng-repeat="page in pages" ng-class="{active: page.active, disabled: page.disabled}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  </ul>\n</div>\n')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/bar.html",'<div class="bar" ng-class=\'type && "bar-" + type\'></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress"><progressbar ng-repeat="bar in bars" width="bar.to" old="bar.from" animate="bar.animate" type="bar.type"></progressbar></div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()">\n\t<i ng-repeat="number in range" ng-mouseenter="enter(number)" ng-click="rate(number)" ng-class="{\'icon-star\': number <= val, \'icon-star-empty\': number > val}"></i>\n</span>\n')}]),angular.module("template/tabs/pane.html",[]).run(["$templateCache",function(a){a.put("template/tabs/pane.html",'<div class="tab-pane" ng-class="{active: selected}" ng-show="selected" ng-transclude></div>\n')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabs.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabs.html",'<div class="tabbable">\n  <ul class="nav nav-tabs">\n    <li ng-repeat="pane in panes" ng-class="{active:pane.selected}">\n      <a ng-click="select(pane)">{{pane.heading}}</a>\n    </li>\n  </ul>\n  <div class="tab-content" ng-transclude></div>\n</div>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset.html",'\n<div class="tabbable">\n  <ul class="nav {{type && \'nav-\' + type}}" ng-class="{\'nav-stacked\': vertical}" ng-transclude>\n  </ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab" tt="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table class="form-inline">\n\t<tr class="text-center">\n\t\t<td><a ng-click="incrementHours()" class="btn btn-link"><i class="icon-chevron-up"></i></a></td>\n\t\t<td>&nbsp;</td>\n\t\t<td><a ng-click="incrementMinutes()" class="btn btn-link"><i class="icon-chevron-up"></i></a></td>\n\t\t<td ng-show="showMeridian"></td>\n\t</tr>\n\t<tr>\n\t\t<td class="control-group" ng-class="{\'error\': !validHours}"><input type="text" ng-model="hours" ng-change="updateHours()" class="span1 text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2" /></td>\n\t\t<td>:</td>\n\t\t<td class="control-group" ng-class="{\'error\': !validMinutes}"><input type="text" ng-model="minutes" ng-change="updateMinutes()" class="span1 text-center" ng-readonly="readonlyInput" maxlength="2"></td>\n\t\t<td ng-show="showMeridian"><button ng-click="toggleMeridian()" class="btn text-center">{{meridian}}</button></td>\n\t</tr>\n\t<tr class="text-center">\n\t\t<td><a ng-click="decrementHours()" class="btn btn-link"><i class="icon-chevron-down"></i></a></td>\n\t\t<td>&nbsp;</td>\n\t\t<td><a ng-click="decrementMinutes()" class="btn btn-link"><i class="icon-chevron-down"></i></a></td>\n\t\t<td ng-show="showMeridian"></td>\n\t</tr>\n</table>')}]),angular.module("template/typeahead/typeahead.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead.html",'<ul class="typeahead dropdown-menu" ng-style="{display: isOpen()&&\'block\' || \'none\', top: position.top+\'px\', left: position.left+\'px\'}">\n    <li ng-repeat="match in matches" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)">\n        <a tabindex="-1" ng-click="selectMatch($index)" ng-bind-html-unsafe="match.label | typeaheadHighlight:query"></a>\n    </li>\n</ul>')}]),function(){function a(a){return function(){return a}}function b(a){var b="Array"===a&&lb.isArray||function(b,c){return(c||sb.call(b))==="[object "+a+"]"};return xb[a]=b}function c(a,b){function c(c){return p(c)?sb.call(c)==="[object "+b+"]":typeof c===a}return xb[b]=c}function d(a){a.SugarMethods||(i(a,"SugarMethods",{}),e(a,!1,!0,{extend:function(b,c,d){e(a,!1!==d,c,b)},sugarRestore:function(){return g(this,a,arguments,function(a,b,c){
i(a,b,c.method)})},sugarRevert:function(){return g(this,a,arguments,function(a,b,c){c.existed?i(a,b,c.original):delete a[b]})}}))}function e(a,b,c,e){var f=b?a.prototype:a;d(a),s(e,function(d,e){var g=f[d],j=o(f,d);Gb(c)&&g&&(e=h(g,e,c)),!1===c&&g||i(f,d,e),a.SugarMethods[d]={method:e,existed:j,original:g,instance:b}})}function f(a,b,c,d,f){var g={};d=Cb(d)?d.split(","):d,d.forEach(function(a,b){f(g,a,b)}),e(a,b,c,g)}function g(a,b,c,d){var e=0===c.length,f=j(c),g=!1;return s(b.SugarMethods,function(b,c){(e||-1!==f.indexOf(b))&&(g=!0,d(c.instance?a.prototype:a,b,c))}),g}function h(a,b,c){return function(d){return c.apply(this,arguments)?b.apply(this,arguments):a.apply(this,arguments)}}function i(a,b,c){ub?kb.defineProperty(a,b,{value:c,configurable:!0,enumerable:!1,writable:!0}):a[b]=c}function j(a,b,c){var d=[];c=c||0;var e;for(e=a.length;c<e;c++)d.push(a[c]),b&&b.call(a,a[c],c);return d}function k(a,b,c){var d=a[c||0];Db(d)&&(a=d,c=0),j(a,b,c)}function l(a){if(!a||!a.call)throw new TypeError("Callback is not callable")}function m(a){return void 0!==a}function n(a){return void 0===a}function o(a,b){return!!a&&tb.call(a,b)}function p(a){return!!a&&("object"==typeof a||vb&&Fb(a))}function q(a){var b=typeof a;return null==a||"string"===b||"number"===b||"boolean"===b}function r(a,b){b=b||sb.call(a);try{if(a&&a.constructor&&!o(a,"constructor")&&!o(a.constructor.prototype,"isPrototypeOf"))return!1}catch(a){return!1}return!!a&&"[object Object]"===b&&"hasOwnProperty"in a}function s(a,b){for(var c in a)if(o(a,c)&&!1===b.call(a,c,a[c],a))break}function t(a,b){for(var c=0;c<a;c++)b(c)}function u(a,b){return s(b,function(c){a[c]=b[c]}),a}function v(a){if(q(a)&&(a=kb(a)),wb&&Cb(a))for(var b,c=a,d=0;b=c.charAt(d);)c[d++]=b;return a}function w(a){u(this,v(a))}function x(a,b,c){var d=Jb(10,Ib(b||0));return c=c||Mb,0>b&&(d=1/d),c(a*d)/d}function y(){return"\t\n\v\f\r   ᠎             \u2028\u2029　\ufeff"}function z(a,b){var c="";for(a=a.toString();0<b;)1&b&&(c+=a),(b>>=1)&&(a+=a);return c}function A(a,b){var c,d;return c=a.replace(Hb,function(a){return a=Vb[a],a===Tb&&(d=!0),a}),d?parseFloat(c):parseInt(c,b||10)}function B(a,b,c,d){return d=Ib(a).toString(d||10),d=z("0",b-d.replace(/\.\d+/,"").length)+d,(c||0>a)&&(d=(0>a?"-":"+")+d),d}function C(a){if(11<=a&&13>=a)return"th";switch(a%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}function D(a,b){function c(a,c){(a||-1<b.indexOf(c))&&(d+=c)}var d="";return b=b||"",c(a.multiline,"m"),c(a.ignoreCase,"i"),c(a.global,"g"),c(a.u,"y"),d}function E(a){return Cb(a)||(a=ob(a)),a.replace(/([\\/\'*+?|()\[\]{}.^$])/g,"\\$1")}function F(a,b){return a["get"+(a._utc?"UTC":"")+b]()}function G(a,b,c){return a["set"+(a._utc&&"ISOWeek"!=b?"UTC":"")+b](c)}function H(a,b){var c,d,e,f,g,h,i,j=typeof a;if("string"===j)return a;if(e=sb.call(a),c=r(a,e),d=Db(a,e),null!=a&&c||d){if(b||(b=[]),1<b.length)for(h=b.length;h--;)if(b[h]===a)return"CYC";for(b.push(a),c=a.valueOf()+ob(a.constructor),f=d?a:kb.keys(a).sort(),h=0,i=f.length;h<i;h++)g=d?h:f[h],c+=g+H(a[g],b);b.pop()}else c=-1/0==1/a?"-0":ob(a&&a.valueOf?a.valueOf():a);return j+e+c}function I(a,b){return a===b?0!==a||1/a==1/b:!(!J(a)||!J(b))&&H(a)===H(b)}function J(a){var b=sb.call(a);return yb.test(b)||r(a,b)}function K(a,b,c){var d,e=a.length,f=b.length,g=!1!==b[f-1];return f>(g?1:2)?(d=[],j(b,function(b){if(Ab(b))return!1;d.push(L(a,e,b,g,c))}),d):L(a,e,b[0],g,c)}function L(a,b,c,d,e){return d&&0>(c%=b)&&(c=b+c),e?a.charAt(c):a[c]}function M(a,b){f(b,!0,!1,a,function(a,b){a[b+("equal"===b?"s":"")]=function(){return kb[b].apply(null,[this].concat(j(arguments)))}})}function N(a,b,c,d){var e=a.length,f=-1==d,g=f?e-1:0;for(c=isNaN(c)?g:parseInt(c>>0),0>c&&(c=e+c),(!f&&0>c||f&&c>=e)&&(c=g);f&&0<=c||!f&&c<e;){if(a[c]===b)return c;c+=d}return-1}function O(a,b,c,d){var e=a.length,f=0,g=m(c);if(l(b),0==e&&!g)throw new TypeError("Reduce called on empty array with no initial value");for(g||(c=a[d?e-1:f],f++);f<e;)g=d?e-f-1:f,g in a&&(c=b(c,a[g],g,a)),f++;return c}function P(a){if(0===a.length)throw new TypeError("First argument must be defined")}function Q(a){return a=mb(a),function(b){return a.test(b)}}function R(a){var b=a.getTime();return function(a){return!(!a||!a.getTime)&&a.getTime()===b}}function S(a){return function(b,c,d){return b===a||a.call(this,b,c,d)}}function T(a){return function(b,c,d){return b===a||a.call(d,c,b,d)}}function U(a,b){var c={};return function(d,e,f){var g;if(!p(d))return!1;for(g in a)if(c[g]=c[g]||W(a[g],b),!1===c[g].call(f,d[g],e,f))return!1;return!0}}function V(a){return function(b){return b===a||I(b,a)}}function W(a,b){if(!q(a)){if(Fb(a))return Q(a);if(Eb(a))return R(a);if(Gb(a))return b?T(a):S(a);if(r(a))return U(a,b)}return V(a)}function X(a,b,c,d){return b?b.apply?b.apply(c,d||[]):Gb(a[b])?a[b].call(a):a[b]:a}function Y(a,b,c,d){var e=+a.length;for(0>c&&(c=a.length+c),c=isNaN(c)?0:c,!0===d&&(e+=c);c<e;){if(!((d=c%a.length)in a)){Z(a,b,c);break}if(!1===b.call(a,a[d],d,a))break;c++}}function Z(a,b,c){var d,e=[];for(d in a)d in a&&d>>>0==d&&4294967295!=d&&d>=c&&e.push(parseInt(d));e.sort().each(function(c){return b.call(a,a[c],c,a)})}function $(a,b,c,d,e,f){var g,h,i;return 0<a.length&&(i=W(b),Y(a,function(b,c){if(i.call(f,b,c,a))return g=b,h=c,!1},c,d)),e?h:g}function _(a,b){var c,d=[],e={};return Y(a,function(f,g){c=b?X(f,b,a,[f,g,a]):f,ea(e,c)||d.push(f)}),d}function aa(a,b,c){var d=[],e={};return b.each(function(a){ea(e,a)}),a.each(function(a){var b=H(a),f=!J(a);if(da(e,b,a,f)!==c){var g=0;if(f)for(b=e[b];g<b.length;)b[g]===a?b.splice(g,1):g+=1;else delete e[b];d.push(a)}}),d}function ba(a,b,c){b=b||1/0,c=c||0;var d=[];return Y(a,function(a){Db(a)&&c<b?d=d.concat(ba(a,b,c+1)):d.push(a)}),d}function ca(a){var b=[];return j(a,function(a){b=b.concat(a)}),b}function da(a,b,c,d){var e=b in a;return d&&(a[b]||(a[b]=[]),e=-1!==a[b].indexOf(c)),e}function ea(a,b){var c=H(b),d=!J(b),e=da(a,c,b,d);return d?a[c].push(b):a[c]=b,e}function fa(a,b,c,d){var e,f,g,h=[],i="max"===c,j="min"===c,k=lb.isArray(a);for(e in a)if(a.hasOwnProperty(e)){if(c=a[e],g=X(c,b,a,k?[c,parseInt(e),a]:[]),n(g))throw new TypeError("Cannot compare with undefined");g===f?h.push(c):(n(f)||i&&g>f||j&&g<f)&&(h=[c],f=g)}return k||(h=ba(h,1)),d?h:h[0]}function ga(a,b){var c,d,e,f,g=0,h=0;c=lb[Zb],d=lb[$b];var i=lb[_b],j=lb[Yb],k=lb[ac];a=ha(a,c,d),b=ha(b,c,d);do{c=a.charAt(g),e=i[c]||c,c=b.charAt(g),f=i[c]||c,c=e?j.indexOf(e):null,d=f?j.indexOf(f):null,-1===c||-1===d?(c=a.charCodeAt(g)||null,d=b.charCodeAt(g)||null,k&&(c>=Pb&&c<=Qb||c>=Rb&&c<=Sb)&&(d>=Pb&&d<=Qb||d>=Rb&&d<=Sb)&&(c=A(a.slice(g)),d=A(b.slice(g)))):(e=e!==a.charAt(g),f=f!==b.charAt(g),e!==f&&0===h&&(h=e-f)),g+=1}while(null!=c&&null!=d&&c===d);return c===d?h:c-d}function ha(a,b,c){return Cb(a)||(a=ob(a)),c&&(a=a.toLowerCase()),b&&(a=a.replace(b,"")),a}function ia(a,b){f(kb,!1,!0,a,function(a,c){a[c]=function(a,d,e){var f,g=kb.keys(v(a));return b||(f=W(d,!0)),e=lb.prototype[c].call(g,function(c){var e=a[c];return b?X(e,d,a,[c,e,a]):f(e,c,a)},e),Db(e)&&(e=e.reduce(function(b,c){return b[c]=a[c],b},{})),e}}),M(a,w)}function ja(a){u(this,a),this.g=nc.concat()}function ka(a,b,c){var d,e,f=b[0],g=b[1],h=b[2];return b=a[c]||a.relative,Gb(b)?b.call(a,f,g,h,c):(e=a.units[8*(a.plural&&1<f?1:0)+g]||a.units[g],a.capitalizeUnit&&(e=ra(e)),d=a.modifiers.filter(function(a){return"sign"==a.name&&a.value==(0<h?1:-1)})[0],b.replace(/\{(.*?)\}/g,function(a,b){switch(b){case"num":return f;case"unit":return e;case"sign":return d.src}}))}function la(a,b){return"en"===(b=b||a.code)||"en-US"===b||a.variant}function ma(a,b){return b.replace(mb(a.num,"g"),function(b){return na(a,b)||""})}function na(a,b){var c;return Bb(b)?b:b&&-1!==(c=a.numbers.indexOf(b))?(c+1)%10:1}function oa(a,b){var c;if(Cb(a)||(a=""),c=rc[a]||rc[a.slice(0,2)],!1===b&&!c)throw new TypeError("Invalid locale.");return c||gc}function pa(a,b){function c(a){var b=h[a];Cb(b)?h[a]=b.split(","):b||(h[a]=[])}function d(a,b){a=a.split("+").map(function(a){return a.replace(/(.+):(.+)$/,function(a,b,c){return c.split("|").map(function(a){return b+a}).join("|")})}).join("|"),a.split("|").forEach(b)}function e(a,b,c){var e=[];h[a].forEach(function(a,f){b&&(a+="+"+a.slice(0,3)),d(a,function(a,b){e[b*c+f]=a.toLowerCase()})}),h[a]=e}function f(a,b,c){return a="\\d{"+a+","+b+"}",c&&(a+="|(?:"+sa(h.numbers)+")+"),a}function g(a,b){h[a]=h[a]||b}var h,i;return h=new ja(b),c("modifiers"),"months weekdays units numbers articles tokens timeMarker ampm timeSuffixes dateParse timeParse".split(" ").forEach(c),i=!h.monthSuffix,e("months",i,12),e("weekdays",i,7),e("units",!1,8),e("numbers",!1,10),g("code",a),g("date",f(1,2,h.digitDate)),g("year","'\\d{2}|"+f(4,4)),g("num",function(){var a=["-?\\d+"].concat(h.articles);return h.numbers&&(a=a.concat(h.numbers)),sa(a)}()),function(){var a=[];h.i={},h.modifiers.push({name:"day",src:"yesterday",value:-1}),h.modifiers.push({name:"day",src:"today",value:0}),h.modifiers.push({name:"day",src:"tomorrow",value:1}),h.modifiers.forEach(function(b){var c=b.name;d(b.src,function(d){var e=h[c];h.i[d]=b,a.push({name:c,src:d,value:b.value}),h[c]=e?e+"|"+d:d})}),h.day+="|"+sa(h.weekdays),h.modifiers=a}(),h.monthSuffix&&(h.month=f(1,2),h.months="1 2 3 4 5 6 7 8 9 10 11 12".split(" ").map(function(a){return a+h.monthSuffix})),h.full_month=f(1,2)+"|"+sa(h.months),0<h.timeSuffixes.length&&h.addFormat(La(h),!1,kc),h.addFormat("{day}",!0),h.addFormat("{month}"+(h.monthSuffix||"")),h.addFormat("{year}"+(h.yearSuffix||"")),h.timeParse.forEach(function(a){h.addFormat(a,!0)}),h.dateParse.forEach(function(a){h.addFormat(a)}),rc[a]=h}function qa(a,b,c,d){a.g.unshift({r:d,locale:a,q:mb("^"+b+"$","i"),to:c})}function ra(a){return a.slice(0,1).toUpperCase()+a.slice(1)}function sa(a){return a.filter(function(a){return!!a}).join("|")}function ta(){var a=nb.SugarNewDate;return a?a():new nb}function ua(a,b){var c;return p(a[0])?a:Bb(a[0])&&!Bb(a[1])?[a[0]]:Cb(a[0])&&b?[va(a[0]),a[1]]:(c={},ic.forEach(function(b,d){c[b.name]=a[d]}),[c])}function va(a){var b,c={};return(a=a.match(/^(\d+)?\s?(\w+?)s?$/i))&&(n(b)&&(b=parseInt(a[1])||1),c[a[2].toLowerCase()]=b),c}function wa(a,b,c){var d;for(n(c)&&(c=jc.length),b=b||0;b<c&&(d=jc[b],!1!==a(d.name,d,b));b++);}function xa(a,b){var c,d,e={};return b.forEach(function(b,f){c=a[f+1],n(c)||""===c||("year"===b&&(e.t=c.replace(/'/,"")),d=parseFloat(c.replace(/'/,"").replace(/,/,".")),e[b]=isNaN(d)?c.toLowerCase():d)}),e}function ya(a){return a=a.trim().replace(/^just (?=now)|\.+$/i,""),za(a)}function za(a){return a.replace(hc,function(a,b,c){var d,e,f=0,g=1;return b?a:(c.split("").reverse().forEach(function(a){a=mc[a];var b=9<a;b?(d&&(f+=g),g*=a/(e||1),e=a):(!1===d&&(g*=10),f+=g*a),d=b}),d&&(f+=g),f)})}function Aa(a,b,c,d){function e(a){n.push(a)}function f(){n.forEach(function(a){a.call()})}function g(){var a=j.getWeekday();j.setWeekday(7*(q.num-1)+(a>u?u+7:u))}function h(){var a=o.i[q.edge];wa(function(a){if(m(q[a]))return r=a,!1},4),"year"===r?q.e="month":"month"!==r&&"week"!==r||(q.e="day"),j[(0>a.value?"endOf":"beginningOf")+ra(r)](),-2===a.value&&j.reset()}function i(){var a;wa(function(b,c,d){if("day"===b&&(b="date"),m(q[b])){if(d>=t)return j.setTime(NaN),!1;a=a||{},a[b]=q[b],delete q[b]}}),a&&e(function(){j.set(a,!0)})}var j,k,l,n,o,q,r,t,u,v,w;return j=ta(),n=[],j.utc(d),Eb(a)?j.utc(a.isUTC()).setTime(a.getTime()):Bb(a)?j.setTime(a):p(a)?(j.set(a,!0),q=a):Cb(a)&&(l=oa(b),a=ya(a),l&&s(l.o?[l.o].concat(l.g):l.g,function(c,d){var f=a.match(d.q);if(f)return o=d.locale,q=xa(f,d.to),o.o=d,q.utc&&j.utc(),q.timestamp?(q=q.timestamp,!1):(d.r&&!Cb(q.month)&&(Cb(q.date)||la(l,b))&&(w=q.month,q.month=q.date,q.date=w),q.year&&2===q.t.length&&(q.year=100*Mb(F(ta(),"FullYear")/100)-100*Mb(q.year/100)+q.year),q.month&&(q.month=o.getMonth(q.month),q.shift&&!q.unit&&(q.unit=o.units[7])),q.weekday&&q.date?delete q.weekday:q.weekday&&(q.weekday=o.getWeekday(q.weekday),q.shift&&!q.unit&&(q.unit=o.units[5])),q.day&&(w=o.i[q.day])?(q.day=w.value,j.reset(),k=!0):q.day&&-1<(u=o.getWeekday(q.day))&&(delete q.day,q.num&&q.month?(e(g),q.day=1):q.weekday=u),q.date&&!Bb(q.date)&&(q.date=ma(o,q.date)),q.ampm&&q.ampm===o.ampm[1]&&12>q.hour?q.hour+=12:q.ampm===o.ampm[0]&&12===q.hour&&(q.hour=0),("offset_hours"in q||"offset_minutes"in q)&&(j.utc(),q.offset_minutes=q.offset_minutes||0,q.offset_minutes+=60*q.offset_hours,"-"===q.offset_sign&&(q.offset_minutes*=-1),q.minute-=q.offset_minutes),q.unit&&(k=!0,v=na(o,q.num),t=o.units.indexOf(q.unit)%8,r=fc.units[t],i(),q.shift&&(v*=(w=o.i[q.shift])?w.value:0),q.sign&&(w=o.i[q.sign])&&(v*=w.value),m(q.weekday)&&(j.set({weekday:q.weekday},!0),delete q.weekday),q[r]=(q[r]||0)+v),q.edge&&e(h),"-"===q.year_sign&&(q.year*=-1),wa(function(a,b,c){b=q[a];var d=b%1;d&&(q[jc[c-1].name]=Mb(d*("second"===a?1e3:60)),q[a]=Lb(b))},1,4),!1)}),q?k?j.advance(q):(j._utc&&j.reset(),Ka(j,q,!0,!1,c)):("now"!==a&&(j=new nb(a)),d&&j.addMinutes(-j.getTimezoneOffset())),f(),j.utc(!1)),{c:j,set:q}}function Ba(a){var b,c=Ib(a),d=c,e=0;return wa(function(a,f,g){1<=(b=Lb(x(c/f.b(),1)))&&(d=b,e=g)},1),[d,e,a]}function Ca(a){var b=Ba(a.millisecondsFromNow());return(6===b[1]||5===b[1]&&4===b[0]&&a.daysFromNow()>=ta().daysInMonth())&&(b[0]=Ib(a.monthsFromNow()),b[1]=6),b}function Da(a,b,c){function d(a,c){var d=F(a,"Month");return oa(c).months[d+12*b]}Ea(a,d,c),Ea(ra(a),d,c,1)}function Ea(a,b,c,d){pc[a]=function(a,e){var f=b(a,e);return c&&(f=f.slice(0,c)),d&&(f=f.slice(0,d).toUpperCase()+f.slice(d)),f}}function Fa(a,b,c){pc[a]=b,pc[a+a]=function(a,c){return B(b(a,c),2)},c&&(pc[a+a+a]=function(a,c){return B(b(a,c),3)},pc[a+a+a+a]=function(a,c){return B(b(a,c),4)})}function Ga(a){var b=a.match(/(\{\w+\})|[^{}]+/g);oc[a]=b.map(function(a){return a.replace(/\{(\w+)\}/,function(b,c){return a=pc[c]||c,c}),a})}function Ha(a,b,c,d){var e;if(!a.isValid())return"Invalid Date";if(Date[b]?b=Date[b]:Gb(b)&&(e=Ca(a),b=b.apply(a,e.concat(oa(d)))),!b&&c)return e=e||Ca(a),0===e[1]&&(e[1]=1,e[0]=1),a=oa(d),ka(a,e,0<e[2]?"future":"past");b=b||"long","short"!==b&&"long"!==b&&"full"!==b||(b=oa(d)[b]),oc[b]||Ga(b);var f,g;for(e="",b=oc[b],f=0,c=b.length;f<c;f++)g=b[f],e+=Gb(g)?g(a,d):g;return e}function Ia(a,b,c,d,e){var f,g,h,i=0,j=0,k=0;return f=Aa(b,c,null,e),0<d&&(j=k=d,g=!0),!!f.c.isValid()&&(f.set&&f.set.e&&(qc.forEach(function(b){b.name===f.set.e&&(i=b.b(f.c,a-f.c)-1)}),b=ra(f.set.e),(f.set.edge||f.set.shift)&&f.c["beginningOf"+b](),"month"===f.set.e&&(h=f.c.clone()["endOf"+b]().getTime()),!g&&f.set.sign&&"millisecond"!=f.set.e&&(j=50,k=-50)),g=a.getTime(),b=f.c.getTime(),h=Ja(a,b,h||b+i),g>=b-j&&g<=h+k)}function Ja(a,b,c){return b=new nb(b),a=new nb(c).utc(a.isUTC()),23!==F(a,"Hours")&&(b=b.getTimezoneOffset(),a=a.getTimezoneOffset(),b!==a&&(c+=(a-b).minutes())),c}function Ka(a,b,c,d,e){function f(a){return m(b[a])?b[a]:b[a+"s"]}function g(a){return m(f(a))}var h;if(Bb(b)&&d)b={milliseconds:b};else if(Bb(b))return a.setTime(b),a;m(b.date)&&(b.day=b.date),wa(function(d,e,f){var i="day"===d;if(g(d)||i&&g("weekday"))return b.e=d,h=+f,!1;!c||"week"===d||i&&g("week")||G(a,e.method,i?1:0)}),qc.forEach(function(c){var e=c.name;c=c.method;var h;h=f(e),n(h)||(d?("week"===e&&(h=(b.day||0)+7*h,c="Date"),h=h*d+F(a,c)):"month"===e&&g("day")&&G(a,"Date",15),G(a,c,h),d&&"month"===e&&(e=h,0>e&&(e=e%12+12),e%12!=F(a,"Month")&&G(a,"Date",0)))}),d||g("day")||!g("weekday")||a.setWeekday(f("weekday"));var i;a:{switch(e){case-1:i=a>ta();break a;case 1:i=a<ta();break a}i=void 0}return i&&wa(function(b,c){if((c.k||"week"===b&&g("weekday"))&&!(g(b)||"day"===b&&g("weekday")))return a[c.j](e),!1},h+1),a}function La(a,b){var c,d=lc,e={h:0,m:1,s:2};return a=a||fc,d.replace(/{([a-z])}/g,function(d,f){var g=[],h="h"===f,i=h&&!b;return"t"===f?a.ampm.join("|"):(h&&g.push(":"),(c=a.timeSuffixes[e[f]])&&g.push(c+"\\s*"),0===g.length?"":"(?:"+g.join("|")+")"+(i?"":"?"))})}function Ma(a,b,c){var d,e;return Bb(a[1])?d=ua(a)[0]:(d=a[0],e=a[1]),Aa(d,e,b,c).c}function Na(a,b){function c(){return Mb(this*b)}function d(){return Ma(arguments)[a.j](this)}function e(){return Ma(arguments)[a.j](-this)}var f=a.name,g={};g[f]=c,g[f+"s"]=c,g[f+"Before"]=e,g[f+"sBefore"]=e,g[f+"Ago"]=e,g[f+"sAgo"]=e,g[f+"After"]=d,g[f+"sAfter"]=d,g[f+"FromNow"]=d,g[f+"sFromNow"]=d,pb.extend(g)}function Oa(a,b,c,d,e){1/0!==b&&(a.timers||(a.timers=[]),Bb(b)||(b=1),a.n=!1,a.timers.push(setTimeout(function(){a.n||c.apply(d,e||[])},b)))}function Pa(a,b,c,d,e,f){var g=a.toFixed(20),h=g.search(/\./),g=g.search(/[1-9]/),h=h-g;return 0<h&&(h-=1),e=Ob(Nb(Lb(h/3),!1===e?c.length:e),-d),d=c.charAt(e+d-1),-9>h&&(e=-3,b=Ib(h)-9,d=c.slice(0,1)),c=f?Jb(2,10*e):Jb(10,3*e),x(a/c,b||0).format()+d.trim()}function Qa(a,b,c,d){var e,f,g;(f=b.match(/^(.+?)(\[.*\])$/))?(g=f[1],b=f[2].replace(/^\[|\]$/g,"").split("]["),b.forEach(function(b){e=!b||b.match(/^\d+$/),!g&&Db(a)&&(g=a.length),o(a,g)||(a[g]=e?[]:{}),a=a[g],g=b}),!g&&e&&(g=a.length.toString()),Qa(a,g,c,d)):a[b]=!(!d||"true"!==c)||(!d||"false"!==c)&&c}function Ra(a,b){var c;return Db(b)||p(b)&&b.toString===sb?(c=[],s(b,function(b,d){a&&(b=a+"["+b+"]"),c.push(Ra(b,d))}),c.join("&")):a?Sa(a)+"="+(Eb(b)?b.getTime():Sa(b)):""}function Sa(a){return a||!1===a||0===a?encodeURIComponent(a).replace(/%20/g,"+"):""}function Ta(a,b,c){var d,e=a instanceof w?new w:{};return s(a,function(a,f){d=!1,k(b,function(b){(Fb(b)?b.test(a):p(b)?b[a]===f:a===ob(b))&&(d=!0)},1),d===c&&(e[a]=f)}),e}function Ua(a,b){this.start=Va(a),this.end=Va(b)}function Va(a){return Eb(a)?new nb(a.getTime()):null==a?a:Eb(a)?a.getTime():a.valueOf()}function Wa(a){return!!(a=null==a?a:Eb(a)?a.getTime():a.valueOf())||0===a}function Xa(a,b){var c,d,e,f;return Bb(b)?new nb(a.getTime()+b):(c=b[0],d=b[1],e=F(a,d),f=new nb(a.getTime()),G(f,d,e+c),f)}function Ya(a,b){return ob.fromCharCode(a.charCodeAt(0)+b)}function Za(a,b){return a+b}function $a(a){if(0>(a=+a)||1/0===a)throw new RangeError("Invalid number");return a}function _a(a,b){return z(m(b)?b:" ",a)}function ab(a,b,c,d,e){var f;if(a.length<=b)return a.toString();switch(d=n(d)?"...":d,c){case"left":return a=e?bb(a,b,!0):a.slice(a.length-b),d+a;case"middle":return c=Kb(b/2),f=Lb(b/2),b=e?bb(a,c):a.slice(0,c),a=e?bb(a,f,!0):a.slice(a.length-f),b+d+a;default:return(b=e?bb(a,b):a.slice(0,b))+d}}function bb(a,b,c){if(c)return bb(a.reverse(),b).reverse();c=mb("(?=["+y()+"])");var d=0;return a.split(c).filter(function(a){return(d+=a.length)<=b}).join("")}function cb(a,b,c){return Cb(b)&&-1===(b=a.indexOf(b))&&(b=c?a.length:0),b}function db(a){var b=Ac;-1<(a=b.indexOf(a))&&b.splice(a,1)}function eb(a,b,c){Cb(b)&&db(b),db(c),a.unshift({l:b,p:c})}function fb(a,b){return a==b||"all"==a||!a}function gb(a){return Ac.some(function(b){return new mb("\\b"+b+"$","i").test(a)})}function hb(a,b){return a=Cb(a)?a.toString():"",a.isBlank()||gb(a)?a:ib(a,b?yc:zc)}function ib(a,b){return s(b,function(b,c){if(a.match(c.l))return a=a.replace(c.l,c.p),!1}),a}function jb(a){return a.replace(/^\W*[a-z]/,function(a){return a.toUpperCase()})}var kb=Object,lb=Array,mb=RegExp,nb=Date,ob=String,pb=Number,qb=Math,rb="undefined"!=typeof global?global:this,sb=kb.prototype.toString,tb=kb.prototype.hasOwnProperty,ub=kb.defineProperty&&kb.defineProperties,vb="function"==typeof mb(),wb=!("0"in new ob("a")),xb={},yb=/^\[object Date|Array|String|Number|RegExp|Boolean|Arguments\]$/,zb="Boolean Number String Array Date RegExp Function".split(" "),Ab=c("boolean",zb[0]),Bb=c("number",zb[1]),Cb=c("string",zb[2]),Db=b(zb[3]),Eb=b(zb[4]),Fb=b(zb[5]),Gb=b(zb[6]);w.prototype.constructor=kb;var Hb,Ib=qb.abs,Jb=qb.pow,Kb=qb.ceil,Lb=qb.floor,Mb=qb.round,Nb=qb.min,Ob=qb.max,Pb=48,Qb=57,Rb=65296,Sb=65305,Tb=".",Ub="",Vb={};d(kb),s(zb,function(a,b){d(rb[b])});var Wb,Xb;for(Xb=0;9>=Xb;Xb++)Wb=ob.fromCharCode(Xb+Rb),Ub+=Wb,Vb[Wb]=ob.fromCharCode(Xb+Pb);Vb[","]="",Vb["．"]=Tb,Vb[Tb]=Tb,Hb=mb("["+Ub+"．,"+Tb+"]","g"),e(kb,!1,!1,{keys:function(a){var b=[];if(!p(a)&&!Fb(a)&&!Gb(a))throw new TypeError("Object required");return s(a,function(a){b.push(a)}),b}}),e(lb,!1,!1,{isArray:function(a){return Db(a)}}),e(lb,!0,!1,{every:function(a,b){var c=this.length,d=0;for(P(arguments);d<c;){if(d in this&&!a.call(b,this[d],d,this))return!1;d++}return!0},some:function(a,b){var c=this.length,d=0;for(P(arguments);d<c;){if(d in this&&a.call(b,this[d],d,this))return!0;d++}return!1},map:function(a,b){b=arguments[1];var c=this.length,d=0,e=Array(c);for(P(arguments);d<c;)d in this&&(e[d]=a.call(b,this[d],d,this)),d++;return e},filter:function(a){var b=arguments[1],c=this.length,d=0,e=[];for(P(arguments);d<c;)d in this&&a.call(b,this[d],d,this)&&e.push(this[d]),d++;return e},indexOf:function(a,b){return Cb(this)?this.indexOf(a,b):N(this,a,b,1)},lastIndexOf:function(a,b){return Cb(this)?this.lastIndexOf(a,b):N(this,a,b,-1)},forEach:function(a,b){var c=this.length,d=0;for(l(a);d<c;)d in this&&a.call(b,this[d],d,this),d++},reduce:function(a,b){return O(this,a,b)},reduceRight:function(a,b){return O(this,a,b,!0)}}),e(Function,!0,!1,{bind:function(a){var b,c=this,d=j(arguments,null,1);if(!Gb(this))throw new TypeError("Function.prototype.bind called on a non-function");return b=function(){return c.apply(c.prototype&&this instanceof c?this:a,d.concat(j(arguments)))},b.prototype=this.prototype,b}}),e(nb,!1,!1,{now:function(){return(new nb).getTime()}}),function(){var a=y().match(/^\s+$/);try{ob.prototype.trim.call([1])}catch(b){a=!1}e(ob,!0,!a,{trim:function(){return this.toString().trimLeft().trimRight()},trimLeft:function(){return this.replace(mb("^["+y()+"]+"),"")},trimRight:function(){return this.replace(mb("["+y()+"]+$"),"")}})}(),function(){var a=new nb(nb.UTC(1999,11,31)),a=a.toISOString&&"1999-12-31T00:00:00.000Z"===a.toISOString();f(nb,!0,!a,"toISOString,toJSON",function(a,b){a[b]=function(){return B(this.getUTCFullYear(),4)+"-"+B(this.getUTCMonth()+1,2)+"-"+B(this.getUTCDate(),2)+"T"+B(this.getUTCHours(),2)+":"+B(this.getUTCMinutes(),2)+":"+B(this.getUTCSeconds(),2)+"."+B(this.getUTCMilliseconds(),3)+"Z"}})}();var Yb="AlphanumericSortOrder",Zb="AlphanumericSortIgnore",$b="AlphanumericSortIgnoreCase",_b="AlphanumericSortEquivalents",ac="AlphanumericSortNatural";e(lb,!1,!0,{create:function(){var a=[];return j(arguments,function(b){(!q(b)&&"length"in b&&("[object Arguments]"===sb.call(b)||b.callee)||!q(b)&&"length"in b&&!Cb(b)&&!r(b))&&(b=lb.prototype.slice.call(b,0)),a=a.concat(b)}),a}}),e(lb,!0,!1,{find:function(a,b){return l(a),$(this,a,0,!1,!1,b)},findIndex:function(a,b){var c;return l(a),c=$(this,a,0,!1,!0,b),n(c)?-1:c}}),e(lb,!0,!0,{findFrom:function(a,b,c){return $(this,a,b,c)},findIndexFrom:function(a,b,c){return b=$(this,a,b,c,!0),n(b)?-1:b},findAll:function(a,b,c){var d,e=[];return 0<this.length&&(d=W(a),Y(this,function(a,b,c){d(a,b,c)&&e.push(a)},b,c)),e},count:function(a){return n(a)?this.length:this.findAll(a).length},removeAt:function(a,b){return n(a)?this:(n(b)&&(b=a),this.splice(a,b-a+1),this)},include:function(a,b){return this.clone().add(a,b)},exclude:function(){return lb.prototype.remove.apply(this.clone(),arguments)},clone:function(){return u([],this)},unique:function(a){return _(this,a)},flatten:function(a){return ba(this,a)},union:function(){return _(this.concat(ca(arguments)))},intersect:function(){return aa(this,ca(arguments),!1)},subtract:function(a){return aa(this,ca(arguments),!0)},at:function(){return K(this,arguments)},first:function(a){return n(a)?this[0]:(0>a&&(a=0),this.slice(0,a))},last:function(a){return n(a)?this[this.length-1]:this.slice(0>this.length-a?0:this.length-a)},from:function(a){return this.slice(a)},to:function(a){return n(a)&&(a=this.length),this.slice(0,a)},min:function(a,b){return fa(this,a,"min",b)},max:function(a,b){return fa(this,a,"max",b)},least:function(a,b){return fa(this.groupBy.apply(this,[a]),"length","min",b)},most:function(a,b){return fa(this.groupBy.apply(this,[a]),"length","max",b)},sum:function(a){return a=a?this.map(a):this,0<a.length?a.reduce(function(a,b){return a+b}):0},average:function(a){return a=a?this.map(a):this,0<a.length?a.sum()/a.length:0},inGroups:function(a,b){var c=1<arguments.length,d=this,e=[],f=Kb(this.length/a);return t(a,function(a){a*=f;var g=d.slice(a,a+f);c&&g.length<f&&t(f-g.length,function(){g=g.add(b)}),e.push(g)}),e},inGroupsOf:function(a,b){var c,d=[],e=this.length,f=this;return 0===e||0===a?f:(n(a)&&(a=1),n(b)&&(b=null),t(Kb(e/a),function(e){for(c=f.slice(a*e,a*e+a);c.length<a;)c.push(b);d.push(c)}),d)},isEmpty:function(){return 0==this.compact().length},sortBy:function(a,b){var c=this.clone();return c.sort(function(d,e){var f,g;return f=X(d,a,c,[d]),g=X(e,a,c,[e]),(Cb(f)&&Cb(g)?ga(f,g):f<g?-1:f>g?1:0)*(b?-1:1)}),c},randomize:function(){for(var a,b,c=this.concat(),d=c.length;d;)a=qb.random()*d|0,b=c[--d],c[d]=c[a],c[a]=b;return c},zip:function(){var a=j(arguments);return this.map(function(b,c){return[b].concat(a.map(function(a){return c in a?a[c]:null}))})},sample:function(a){var b=this.randomize();return 0<arguments.length?b.slice(0,a):b[0]},each:function(a,b,c){return Y(this,a,b,c),this},add:function(a,b){return Bb(pb(b))&&!isNaN(b)||(b=this.length),lb.prototype.splice.apply(this,[b,0].concat(a)),this},remove:function(){var a=this;return j(arguments,function(b){var c=0;for(b=W(b);c<a.length;)b(a[c],c,a)?a.splice(c,1):c++}),a},compact:function(a){var b=[];return Y(this,function(c){Db(c)?b.push(c.compact()):a&&c?b.push(c):a||null==c||c.valueOf()!==c.valueOf()||b.push(c)}),b},groupBy:function(a,b){var c,d=this,e={};return Y(d,function(b,f){c=X(b,a,d,[b,f,d]),e[c]||(e[c]=[]),e[c].push(b)}),b&&s(e,b),e},none:function(){return!this.any.apply(this,arguments)}}),e(lb,!0,!0,{all:lb.prototype.every,any:lb.prototype.some,insert:lb.prototype.add}),e(kb,!1,!0,{map:function(a,b){var c,d,e={};for(c in a)o(a,c)&&(d=a[c],e[c]=X(d,b,a,[c,d,a]));return e},reduce:function(a){var b=kb.keys(v(a)).map(function(b){return a[b]});return b.reduce.apply(b,j(arguments,null,1))},each:function(a,b){return l(b),s(a,b),a},size:function(a){return kb.keys(v(a)).length}});var bc="any all none count find findAll isEmpty".split(" "),cc="sum average min max least most".split(" "),dc=["map","reduce","size"],ec=bc.concat(cc).concat(dc);!function(){function a(){var a=arguments;return 0<a.length&&!Gb(a[0])}var b=lb.prototype.map;f(lb,!0,a,"every,all,some,filter,any,none,find,findIndex",function(a,b){var c=lb.prototype[b];a[b]=function(a){var b=W(a);return c.call(this,function(a,c){return b(a,c,this)})}}),e(lb,!0,a,{map:function(a){return b.call(this,function(b,c){return X(b,a,this,[b,c,this])})}})}(),function(){lb[Yb]="AÁÀÂÃĄBCĆČÇDĎÐEÉÈĚÊËĘFGĞHıIÍÌİÎÏJKLŁMNŃŇÑOÓÒÔPQRŘSŚŠŞTŤUÚÙŮÛÜVWXYÝZŹŻŽÞÆŒØÕÅÄÖ".split("").map(function(a){return a+a.toLowerCase()}).join("");var a={};Y("AÁÀÂÃÄ CÇ EÉÈÊË IÍÌİÎÏ OÓÒÔÕÖ Sß UÚÙÛÜ".split(" "),function(b){var c=b.charAt(0);Y(b.slice(1).split(""),function(b){a[b]=c,a[b.toLowerCase()]=c.toLowerCase()})}),lb[ac]=!0,lb[$b]=!0,lb[_b]=a}(),ia(bc),ia(cc,!0),M(dc,w),lb.AlphanumericSort=ga;var fc,gc,hc,ic,jc,kc="ampm hour minute second ampm utc offset_sign offset_hours offset_minutes ampm".split(" "),lc="({t})?\\s*(\\d{1,2}(?:[,.]\\d+)?)(?:{h}([0-5]\\d(?:[,.]\\d+)?)?{m}(?::?([0-5]\\d(?:[,.]\\d+)?){s})?\\s*(?:({t})|(Z)|(?:([+-])(\\d{2,2})(?::?(\\d{2,2}))?)?)?|\\s*({t}))",mc={},nc=[],oc={},pc={yyyy:function(a){return F(a,"FullYear")},yy:function(a){return F(a,"FullYear")%100},ord:function(a){return(a=F(a,"Date"))+C(a)},tz:function(a){return a.getUTCOffset()},isotz:function(a){return a.getUTCOffset(!0)},Z:function(a){return a.getUTCOffset()},ZZ:function(a){return a.getUTCOffset().replace(/(\d{2})$/,":$1")}},qc=[{name:"year",method:"FullYear",k:!0,b:function(a){return 864e5*(365+(a?a.isLeapYear()?1:0:.25))}},{name:"month",error:.919,method:"Month",k:!0,b:function(a,b){var c,d=30.4375;return a&&(c=a.daysInMonth(),b<=c.days()&&(d=c)),864e5*d}},{name:"week",method:"ISOWeek",b:a(6048e5)},{name:"day",error:.958,method:"Date",k:!0,b:a(864e5)},{name:"hour",method:"Hours",b:a(36e5)},{name:"minute",method:"Minutes",b:a(6e4)},{name:"second",method:"Seconds",b:a(1e3)},{name:"millisecond",method:"Milliseconds",b:a(1)}],rc={};ja.prototype={getMonth:function(a){return Bb(a)?a-1:this.months.indexOf(a)%12},getWeekday:function(a){return this.weekdays.indexOf(a)%7},addFormat:function(a,b,c,d,e){var f,g=c||[],h=this;a=a.replace(/\s+/g,"[,. ]*"),a=a.replace(/\{([^,]+?)\}/g,function(a,b){var d,e,f,i=b.match(/\?$/);f=b.match(/^(\d+)\??$/);var j=b.match(/(\d)(?:-(\d))?/),k=b.replace(/[^a-z]+$/,"");return f?d=h.tokens[f[1]]:h[k]?d=h[k]:h[k+"s"]&&(d=h[k+"s"],j&&(e=[],d.forEach(function(a,b){var c=b%(h.units?8:d.length);c>=j[1]&&c<=(j[2]||j[1])&&e.push(a)}),d=e),d=sa(d)),f?f="(?:"+d+")":(c||g.push(k),f="("+d+")"),i&&(f+="?"),f}),b?(b=La(h,e),e=["t","[\\s\\u3000]"].concat(h.timeMarker),f=a.match(/\\d\{\d,\d\}\)+\??$/),qa(h,"(?:"+b+")[,\\s\\u3000]+?"+a,kc.concat(g),d),qa(h,a+"(?:[,\\s]*(?:"+e.join("|")+(f?"+":"*")+")"+b+")?",g.concat(kc),d)):qa(h,a,g,d)}},e(nb,!1,!0,{create:function(){return Ma(arguments)},past:function(){return Ma(arguments,-1)},future:function(){return Ma(arguments,1)},addLocale:function(a,b){return pa(a,b)},setLocale:function(a){var b=oa(a,!1);return gc=b,a&&a!=b.code&&(b.code=a),b},getLocale:function(a){return a?oa(a,!1):gc},addFormat:function(a,b,c){qa(oa(c),a,b)}}),e(nb,!0,!0,{set:function(){var a=ua(arguments);return Ka(this,a[0],a[1])},setWeekday:function(a){if(!n(a))return G(this,"Date",F(this,"Date")+a-F(this,"Day"))},setISOWeek:function(a){var b=F(this,"Day")||7;if(!n(a))return this.set({month:0,date:4}),this.set({weekday:1}),1<a&&this.addWeeks(a-1),1!==b&&this.advance({days:b-1}),this.getTime()},getISOWeek:function(){var a;a=this.clone();var b=F(a,"Day")||7;return a.addDays(4-b).reset(),1+Lb(a.daysSince(a.clone().beginningOfYear())/7)},beginningOfISOWeek:function(){var a=this.getDay();return 0===a?a=-6:1!==a&&(a=1),this.setWeekday(a),this.reset()},endOfISOWeek:function(){return 0!==this.getDay()&&this.setWeekday(7),this.endOfDay()},getUTCOffset:function(a){var b=this._utc?0:this.getTimezoneOffset(),c=!0===a?":":"";return!b&&a?"Z":B(Lb(-b/60),2,!0)+c+B(Ib(b%60),2)},utc:function(a){return i(this,"_utc",!0===a||0===arguments.length),this},isUTC:function(){return!!this._utc||0===this.getTimezoneOffset()},advance:function(){var a=ua(arguments,!0);return Ka(this,a[0],a[1],1)},rewind:function(){var a=ua(arguments,!0);return Ka(this,a[0],a[1],-1)},isValid:function(){return!isNaN(this.getTime())},isAfter:function(a,b){return this.getTime()>nb.create(a).getTime()-(b||0)},isBefore:function(a,b){return this.getTime()<nb.create(a).getTime()+(b||0)},isBetween:function(a,b,c){var d=this.getTime();a=nb.create(a).getTime();var e=nb.create(b).getTime();return b=Nb(a,e),a=Ob(a,e),c=c||0,b-c<d&&a+c>d},isLeapYear:function(){var a=F(this,"FullYear");return 0==a%4&&0!=a%100||0==a%400},daysInMonth:function(){return 32-F(new nb(F(this,"FullYear"),F(this,"Month"),32),"Date")},format:function(a,b){return Ha(this,a,!1,b)},relative:function(a,b){return Cb(a)&&(b=a,a=null),Ha(this,a,!0,b)},is:function(a,b,c){var d,e;if(this.isValid()){if(Cb(a))switch(a=a.trim().toLowerCase(),e=this.clone().utc(c),!0){case"future"===a:return this.getTime()>ta().getTime();case"past"===a:return this.getTime()<ta().getTime();case"weekday"===a:return 0<F(e,"Day")&&6>F(e,"Day");case"weekend"===a:return 0===F(e,"Day")||6===F(e,"Day");case-1<(d=fc.weekdays.indexOf(a)%7):return F(e,"Day")===d;case-1<(d=fc.months.indexOf(a)%12):return F(e,"Month")===d}return Ia(this,a,null,b,c)}},reset:function(a){var b,c={};return a=a||"hours","date"===a&&(a="days"),b=qc.some(function(b){return a===b.name||a===b.name+"s"}),c[a]=a.match(/^days?/)?1:0,b?this.set(c,!0):this},clone:function(){var a=new nb(this.getTime());return a.utc(!!this._utc),a}}),e(nb,!0,!0,{iso:function(){return this.toISOString()},getWeekday:nb.prototype.getDay,getUTCWeekday:nb.prototype.getUTCDay}),e(pb,!0,!0,{duration:function(a){return a=oa(a),ka(a,Ba(this),"duration")}}),fc=gc=nb.addLocale("en",{plural:!0,timeMarker:"at",ampm:"am,pm",months:"January,February,March,April,May,June,July,August,September,October,November,December",
weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",units:"millisecond:|s,second:|s,minute:|s,hour:|s,day:|s,week:|s,month:|s,year:|s",numbers:"one,two,three,four,five,six,seven,eight,nine,ten",articles:"a,an,the",tokens:"the,st|nd|rd|th,of",short:"{Month} {d}, {yyyy}",long:"{Month} {d}, {yyyy} {h}:{mm}{tt}",full:"{Weekday} {Month} {d}, {yyyy} {h}:{mm}:{ss}{tt}",past:"{num} {unit} {sign}",future:"{num} {unit} {sign}",duration:"{num} {unit}",modifiers:[{name:"sign",src:"ago|before",value:-1},{name:"sign",src:"from now|after|from|in|later",value:1},{name:"edge",src:"last day",value:-2},{name:"edge",src:"end",value:-1},{name:"edge",src:"first day|beginning",value:1},{name:"shift",src:"last",value:-1},{name:"shift",src:"the|this",value:0},{name:"shift",src:"next",value:1}],dateParse:["{month} {year}","{shift} {unit=5-7}","{0?} {date}{1}","{0?} {edge} of {shift?} {unit=4-7?}{month?}{year?}"],timeParse:"{num} {unit} {sign};{sign} {num} {unit};{0} {num}{1} {day} of {month} {year?};{weekday?} {month} {date}{1?} {year?};{date} {month} {year};{date} {month};{shift} {weekday};{shift} week {weekday};{weekday} {2?} {shift} week;{num} {unit=4-5} {sign} {day};{0?} {date}{1} of {month};{0?}{month?} {date?}{1?} of {shift} {unit=6-7}".split(";")}),jc=qc.concat().reverse(),ic=qc.concat(),ic.splice(2,1),f(nb,!0,!0,qc,function(a,b,c){function d(a){a/=i;var c=a%1,d=b.error||.999;return c&&Ib(c%1)>d&&(a=Mb(a)),0>a?Kb(a):Lb(a)}var e,f,g=b.name,h=ra(g),i=b.b();b.j="add"+h+"s",e=function(a,b){return d(this.getTime()-nb.create(a,b).getTime())},f=function(a,b){return d(nb.create(a,b).getTime()-this.getTime())},a[g+"sAgo"]=f,a[g+"sUntil"]=f,a[g+"sSince"]=e,a[g+"sFromNow"]=e,a[b.j]=function(a,b){var c={};return c[g]=a,this.advance(c,b)},Na(b,i),3>c&&["Last","This","Next"].forEach(function(b){a["is"+b+h]=function(){return Ia(this,b+" "+g,"en")}}),4>c&&(a["beginningOf"+h]=function(){var a={};switch(g){case"year":a.year=F(this,"FullYear");break;case"month":a.month=F(this,"Month");break;case"day":a.day=F(this,"Date");break;case"week":a.weekday=0}return this.set(a,!0)},a["endOf"+h]=function(){var a={hours:23,minutes:59,seconds:59,milliseconds:999};switch(g){case"year":a.month=11,a.day=31;break;case"month":a.day=this.daysInMonth();break;case"week":a.weekday=6}return this.set(a,!0)})}),fc.addFormat("([+-])?(\\d{4,4})[-.]?{full_month}[-.]?(\\d{1,2})?",!0,["year_sign","year","month","date"],!1,!0),fc.addFormat("(\\d{1,2})[-.\\/]{full_month}(?:[-.\\/](\\d{2,4}))?",!0,["date","month","year"],!0),fc.addFormat("{full_month}[-.](\\d{4,4})",!1,["month","year"]),fc.addFormat("\\/Date\\((\\d+(?:[+-]\\d{4,4})?)\\)\\/",!1,["timestamp"]),fc.addFormat(La(fc),!1,kc),nc=fc.g.slice(0,7).reverse(),fc.g=fc.g.slice(7).concat(nc),Fa("f",function(a){return F(a,"Milliseconds")},!0),Fa("s",function(a){return F(a,"Seconds")}),Fa("m",function(a){return F(a,"Minutes")}),Fa("h",function(a){return F(a,"Hours")%12||12}),Fa("H",function(a){return F(a,"Hours")}),Fa("d",function(a){return F(a,"Date")}),Fa("M",function(a){return F(a,"Month")+1}),function(){function a(a,b){var c=F(a,"Hours");return oa(b).ampm[Lb(c/12)]||""}Ea("t",a,1),Ea("tt",a),Ea("T",a,1,1),Ea("TT",a,null,2)}(),function(){function a(a,b){var c=F(a,"Day");return oa(b).weekdays[c]}Ea("dow",a,3),Ea("Dow",a,3,1),Ea("weekday",a),Ea("Weekday",a,null,1)}(),Da("mon",0,3),Da("month",0),Da("month2",1),Da("month3",2),pc.ms=pc.f,pc.milliseconds=pc.f,pc.seconds=pc.s,pc.minutes=pc.m,pc.hours=pc.h,pc["24hr"]=pc.H,pc["12hr"]=pc.h,pc.date=pc.d,pc.day=pc.d,pc.year=pc.yyyy,f(nb,!0,!0,"short,long,full",function(a,b){a[b]=function(a){return Ha(this,b,!1,a)}}),"〇一二三四五六七八九十百千万".split("").forEach(function(a,b){9<b&&(b=Jb(10,b-9)),mc[a]=b}),u(mc,Vb),hc=mb("([期週周])?([〇一二三四五六七八九十百千万"+Ub+"]+)(?!昨)","g"),function(){var a=fc.weekdays.slice(0,7),b=fc.months.slice(0,12);f(nb,!0,!0,"today yesterday tomorrow weekday weekend future past".split(" ").concat(a).concat(b),function(a,b){a["is"+ra(b)]=function(a){return this.is(b,0,a)}})}(),nb.utc||(nb.utc={create:function(){return Ma(arguments,0,!0)},past:function(){return Ma(arguments,-1,!0)},future:function(){return Ma(arguments,1,!0)}}),e(nb,!1,!0,{RFC1123:"{Dow}, {dd} {Mon} {yyyy} {HH}:{mm}:{ss} {tz}",RFC1036:"{Weekday}, {dd}-{Mon}-{yy} {HH}:{mm}:{ss} {tz}",ISO8601_DATE:"{yyyy}-{MM}-{dd}",ISO8601_DATETIME:"{yyyy}-{MM}-{dd}T{HH}:{mm}:{ss}.{fff}{isotz}"}),e(Function,!0,!0,{lazy:function(a,b,c){function d(){return j.length<c-(k&&b?1:0)&&j.push([this,arguments]),k||(k=!0,b?e():Oa(d,f,e)),h}var e,f,g,h,i=this,j=[],k=!1;return a=a||1,c=c||1/0,f=Kb(a),g=Mb(f/a)||1,e=function(){var a,b=j.length;if(0!=b){for(a=Ob(b-g,0);b>a;)h=Function.prototype.apply.apply(i,j.shift()),b--;Oa(d,f,function(){k=!1,e()})}},d},throttle:function(a){return this.lazy(a,!0,1)},debounce:function(a){function b(){b.cancel(),Oa(b,a,c,this,arguments)}var c=this;return b},delay:function(a){return Oa(this,a,this,this,j(arguments,null,1)),this},every:function(a){function b(){c.apply(c,d),Oa(c,a,b)}var c=this,d=arguments,d=1<d.length?j(d,null,1):[];return Oa(c,a,b),c},cancel:function(){var a,b=this.timers;if(Db(b))for(;a=b.shift();)clearTimeout(a);return this.n=!0,this},after:function(a){var b=this,c=0,d=[];if(Bb(a)){if(0===a)return b.call(),b}else a=1;return function(){var e;if(d.push(j(arguments)),++c==a)return e=b.call(this,d),c=0,d=[],e}},once:function(){return this.throttle(1/0,!0)},fill:function(){var a=this,b=j(arguments);return function(){var c=j(arguments);return b.forEach(function(a,b){(null!=a||b>=c.length)&&c.splice(b,0,a)}),a.apply(this,c)}}}),e(pb,!1,!0,{random:function(a,b){var c,d;return 1==arguments.length&&(b=a,a=0),c=Nb(a||0,n(b)?1:b),d=Ob(a||0,n(b)?1:b)+1,Lb(qb.random()*(d-c)+c)}}),e(pb,!0,!0,{log:function(a){return qb.log(this)/(a?qb.log(a):1)},abbr:function(a){return Pa(this,a,"kmbt",0,4)},metric:function(a,b){return Pa(this,a,"nμm kMGTPE",4,n(b)?1:b)},bytes:function(a,b){return Pa(this,a,"kMGTPE",0,n(b)?4:b,!0)+"B"},isInteger:function(){return 0==this%1},isOdd:function(){return!isNaN(this)&&!this.isMultipleOf(2)},isEven:function(){return this.isMultipleOf(2)},isMultipleOf:function(a){return 0==this%a},format:function(a,b,c){var d,e,f,g="";for(n(b)&&(b=","),n(c)&&(c="."),d=(Bb(a)?x(this,a||0).toFixed(Ob(a,0)):this.toString()).replace(/^-/,"").split("."),e=d[0],f=d[1],d=e.length;0<d;d-=3)d<e.length&&(g=b+g),g=e.slice(Ob(0,d-3),d)+g;return f&&(g+=c+z("0",(a||0)-f.length)+f),(0>this?"-":"")+g},hex:function(a){return this.pad(a||1,!1,16)},times:function(a){if(a)for(var b=0;b<this;b++)a.call(this,b);return this.toNumber()},chr:function(){return ob.fromCharCode(this)},pad:function(a,b,c){return B(this,a,b,c)},ordinalize:function(){var a=Ib(this),a=parseInt(a.toString().slice(-2));return this+C(a)},toNumber:function(){return parseFloat(this,10)}}),function(){function a(a){return function(b){return b?x(this,b,a):a(this)}}e(pb,!0,!0,{ceil:a(Kb),round:a(Mb),floor:a(Lb)}),f(pb,!0,!0,"abs,pow,sin,asin,cos,acos,tan,atan,exp,pow,sqrt",function(a,b){a[b]=function(a,c){return qb[b](this,a,c)}})}();var sc=["isObject","isNaN"],tc="keys values select reject each merge clone equal watch tap has toQueryString".split(" ");e(kb,!1,!0,{watch:function(a,b,c){if(ub){var d=a[b];kb.defineProperty(a,b,{enumerable:!0,configurable:!0,get:function(){return d},set:function(e){d=c.call(a,b,d,e)}})}}}),e(kb,!1,function(){return 1<arguments.length},{keys:function(a,b){var c=kb.keys(a);return c.forEach(function(c){b.call(a,c,a[c])}),c}}),e(kb,!1,!0,{isObject:function(a){return r(a)},isNaN:function(a){return Bb(a)&&a.valueOf()!==a.valueOf()},equal:function(a,b){return I(a,b)},extended:function(a){return new w(a)},merge:function(a,b,c,d){var e,f,g,h,i,j,k;if(a&&"string"!=typeof b)for(e in b)if(o(b,e)&&a){if(h=b[e],i=a[e],j=m(i),f=p(h),g=p(i),k=j&&!1===d?i:h,j&&Gb(d)&&(k=d.call(b,e,i,h)),c&&(f||g))if(Eb(h))k=new nb(h.getTime());else{if(!Fb(h)){g||(a[e]=lb.isArray(h)?[]:{}),kb.merge(a[e],h,c,d);continue}k=new mb(h.source,D(h))}a[e]=k}return a},values:function(a,b){var c=[];return s(a,function(d,e){c.push(e),b&&b.call(a,e)}),c},clone:function(a,b){var c;if(!p(a))return a;if(c=sb.call(a),Eb(a,c)&&a.clone)return a.clone();if(Eb(a,c)||Fb(a,c))return new a.constructor(a);if(a instanceof w)c=new w;else if(Db(a,c))c=[];else{if(!r(a,c))throw new TypeError("Clone must be a basic data type.");c={}}return kb.merge(c,a,b)},fromQueryString:function(a,b){var c=kb.extended();return a=a&&a.toString?a.toString():"",a.replace(/^.*?\?/,"").split("&").forEach(function(a){a=a.split("="),2===a.length&&Qa(c,a[0],decodeURIComponent(a[1]),b)}),c},toQueryString:function(a,b){return Ra(b,a)},tap:function(a,b){var c=b;return Gb(b)||(c=function(){b&&a[b]()}),c.call(a,a),a},has:function(a,b){return o(a,b)},select:function(a){return Ta(a,arguments,!0)},reject:function(a){return Ta(a,arguments,!1)}}),f(kb,!1,!0,zb,function(a,b){var c="is"+b;sc.push(c),a[c]=xb[b]}),e(kb,!1,function(){return 0===arguments.length},{extend:function(){var a=sc.concat(tc);void 0!==ec&&(a=a.concat(ec)),M(a,kb)}}),M(tc,w),Ua.prototype.toString=function(){return this.isValid()?this.start+".."+this.end:"Invalid Range"},e(Ua,!0,!0,{isValid:function(){return Wa(this.start)&&Wa(this.end)&&typeof this.start==typeof this.end},span:function(){return this.isValid()?Ib((Cb(this.end)?this.end.charCodeAt(0):this.end)-(Cb(this.start)?this.start.charCodeAt(0):this.start))+1:NaN},contains:function(a){return null!=a&&(a.start&&a.end?a.start>=this.start&&a.start<=this.end&&a.end>=this.start&&a.end<=this.end:a>=this.start&&a<=this.end)},every:function(a,b){var c,d=this.start,e=this.end,f=e<d,g=d,h=0,i=[];for(Gb(a)&&(b=a,a=null),a=a||1,Bb(d)?c=Za:Cb(d)?c=Ya:Eb(d)&&(c=a,Bb(c)?a=c:(d=c.toLowerCase().match(/^(\d+)?\s?(\w+?)s?$/i),c=parseInt(d[1])||1,d=d[2].slice(0,1).toUpperCase()+d[2].slice(1),d.match(/hour|minute|second/i)?d+="s":"Year"===d?d="FullYear":"Day"===d&&(d="Date"),a=[c,d]),c=Xa),f&&0<a&&(a*=-1);f?g>=e:g<=e;)i.push(g),b&&b(g,h),g=c(g,a),h++;return i},union:function(a){return new Ua(this.start<a.start?this.start:a.start,this.end>a.end?this.end:a.end)},intersect:function(a){return a.start>this.end||a.end<this.start?new Ua(NaN,NaN):new Ua(this.start>a.start?this.start:a.start,this.end<a.end?this.end:a.end)},clone:function(){return new Ua(this.start,this.end)},clamp:function(a){var b=this.start,c=this.end,d=c<b?c:b,b=b>c?b:c;return Va(a<d?d:a>b?b:a)}}),[pb,ob,nb].forEach(function(a){e(a,!1,!0,{range:function(b,c){return a.create&&(b=a.create(b),c=a.create(c)),new Ua(b,c)}})}),e(pb,!0,!0,{upto:function(a,b,c){return pb.range(this,a).every(c,b)},clamp:function(a,b){return new Ua(a,b).clamp(this)},cap:function(a){return this.clamp(void 0,a)}}),e(pb,!0,!0,{downto:pb.prototype.upto}),e(lb,!1,function(a){return a instanceof Ua},{create:function(a){return a.every()}}),e(mb,!1,!0,{escape:function(a){return E(a)}}),e(mb,!0,!0,{getFlags:function(){return D(this)},setFlags:function(a){return mb(this.source,a)},addFlag:function(a){return this.setFlags(D(this,a))},removeFlag:function(a){return this.setFlags(D(this).replace(a,""))}});var uc,vc;e(ob,!0,!1,{repeat:function(a){return a=$a(a),z(this,a)}}),e(ob,!0,function(a){return Fb(a)||2<arguments.length},{startsWith:function(a){var b=arguments,c=b[1],b=b[2],d=this;return c&&(d=d.slice(c)),n(b)&&(b=!0),c=Fb(a)?a.source.replace("^",""):E(a),mb("^"+c,b?"":"i").test(d)},endsWith:function(a){var b=arguments,c=b[1],b=b[2],d=this;return m(c)&&(d=d.slice(0,c)),n(b)&&(b=!0),c=Fb(a)?a.source.replace("$",""):E(a),mb(c+"$",b?"":"i").test(d)}}),e(ob,!0,!0,{escapeRegExp:function(){return E(this)},escapeURL:function(a){return a?encodeURIComponent(this):encodeURI(this)},unescapeURL:function(a){return a?decodeURI(this):decodeURIComponent(this)},escapeHTML:function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\//g,"&#x2f;")},unescapeHTML:function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&#x2f;/g,"/").replace(/&amp;/g,"&")},encodeBase64:function(){return uc(unescape(encodeURIComponent(this)))},decodeBase64:function(){return decodeURIComponent(escape(vc(this)))},each:function(a,b){var c,d,e;if(Gb(a)?(b=a,a=/[\s\S]/g):a?Cb(a)?a=mb(E(a),"gi"):Fb(a)&&(a=mb(a.source,D(a,"g"))):a=/[\s\S]/g,c=this.match(a)||[],b)for(d=0,e=c.length;d<e;d++)c[d]=b.call(this,c[d],d,c)||c[d];return c},shift:function(a){var b="";return a=a||0,this.codes(function(c){b+=ob.fromCharCode(c+a)}),b},codes:function(a){var b,c,d=[];for(b=0,c=this.length;b<c;b++){var e=this.charCodeAt(b);d.push(e),a&&a.call(this,e,b)}return d},chars:function(a){return this.each(a)},words:function(a){return this.trim().each(/\S+/g,a)},lines:function(a){return this.trim().each(/^.*$/gm,a)},paragraphs:function(a){var b=this.trim().split(/[\r\n]{2,}/);return b=b.map(function(b){if(a)var c=a.call(b);return c||b})},isBlank:function(){return 0===this.trim().length},has:function(a){return-1!==this.search(Fb(a)?a:E(a))},add:function(a,b){return b=n(b)?this.length:b,this.slice(0,b)+a+this.slice(b)},remove:function(a){return this.replace(a,"")},reverse:function(){return this.split("").reverse().join("")},compact:function(){return this.trim().replace(/([\r\n\s\u3000])+/g,function(a,b){return"　"===b?b:" "})},at:function(){return K(this,arguments,!0)},from:function(a){return this.slice(cb(this,a,!0))},to:function(a){return n(a)&&(a=this.length),this.slice(0,cb(this,a))},dasherize:function(){return this.underscore().replace(/_/g,"-")},underscore:function(){return this.replace(/[-\s]+/g,"_").replace(ob.Inflector&&ob.Inflector.acronymRegExp,function(a,b){return(0<b?"_":"")+a.toLowerCase()}).replace(/([A-Z\d]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").toLowerCase()},camelize:function(a){return this.underscore().replace(/(^|_)([^_]+)/g,function(b,c,d,e){return b=(b=ob.Inflector)&&b.acronyms[d],b=Cb(b)?b:void 0,e=!1!==a||0<e,b?e?b:b.toLowerCase():e?d.capitalize():d})},spacify:function(){return this.underscore().replace(/_/g," ")},stripTags:function(){var a=this;return k(0<arguments.length?arguments:[""],function(b){a=a.replace(mb("</?"+E(b)+"[^<>]*>","gi"),"")}),a},removeTags:function(){var a=this;return k(0<arguments.length?arguments:["\\S+"],function(b){b=mb("<("+b+")[^<>]*(?:\\/>|>.*?<\\/\\1>)","gi"),a=a.replace(b,"")}),a},truncate:function(a,b,c){return ab(this,a,b,c)},truncateOnWord:function(a,b,c){return ab(this,a,b,c,!0)},pad:function(a,b){var c,d;return a=$a(a),c=Ob(0,a-this.length)/2,d=Lb(c),c=Kb(c),_a(d,b)+this+_a(c,b)},padLeft:function(a,b){return a=$a(a),_a(Ob(0,a-this.length),b)+this},padRight:function(a,b){return a=$a(a),this+_a(Ob(0,a-this.length),b)},first:function(a){return n(a)&&(a=1),this.substr(0,a)},last:function(a){return n(a)&&(a=1),this.substr(0>this.length-a?0:this.length-a)},toNumber:function(a){return A(this,a)},capitalize:function(a){var b;return this.toLowerCase().replace(a?/[^']/g:/^\S/,function(a){var c,d=a.toUpperCase();return c=b?a:d,b=d!==a,c})},assign:function(){var a={};return k(arguments,function(b,c){p(b)?u(a,b):a[c+1]=b}),this.replace(/\{([^{]+?)\}/g,function(b,c){return o(a,c)?a[c]:b})}}),e(ob,!0,!0,{insert:ob.prototype.add}),function(a){if(rb.btoa)uc=rb.btoa,vc=rb.atob;else{var b=/[^A-Za-z0-9\+\/\=]/g;uc=function(b){var c,d,e,f,g,h,i="",j=0;do{c=b.charCodeAt(j++),d=b.charCodeAt(j++),e=b.charCodeAt(j++),f=c>>2,c=(3&c)<<4|d>>4,g=(15&d)<<2|e>>6,h=63&e,isNaN(d)?g=h=64:isNaN(e)&&(h=64),i=i+a.charAt(f)+a.charAt(c)+a.charAt(g)+a.charAt(h)}while(j<b.length);return i},vc=function(c){var d,e,f,g,h,i="",j=0;if(c.match(b))throw Error("String contains invalid base64 characters");c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{d=a.indexOf(c.charAt(j++)),e=a.indexOf(c.charAt(j++)),g=a.indexOf(c.charAt(j++)),h=a.indexOf(c.charAt(j++)),d=d<<2|e>>4,e=(15&e)<<4|g>>2,f=(3&g)<<6|h,i+=ob.fromCharCode(d),64!=g&&(i+=ob.fromCharCode(e)),64!=h&&(i+=ob.fromCharCode(f))}while(j<c.length);return i}}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=");var wc,xc,yc=[],zc=[],Ac=[],Bc=[],Cc={};xc={acronym:function(a){Cc[a.toLowerCase()]=a,a=kb.keys(Cc).map(function(a){return Cc[a]}),xc.acronymRegExp=mb(a.join("|"),"g")},plural:function(a,b){eb(yc,a,b)},singular:function(a,b){eb(zc,a,b)},irregular:function(a,b){var c=a.first(),d=a.from(1),e=b.first(),f=b.from(1),g=e.toUpperCase(),h=e.toLowerCase(),i=c.toUpperCase(),j=c.toLowerCase();db(a),db(b),i==g?(xc.plural(new mb("({1}){2}$".assign(c,d),"i"),"$1"+f),xc.plural(new mb("({1}){2}$".assign(e,f),"i"),"$1"+f),xc.singular(new mb("({1}){2}$".assign(e,f),"i"),"$1"+d)):(xc.plural(new mb("{1}{2}$".assign(i,d)),g+f),xc.plural(new mb("{1}{2}$".assign(j,d)),h+f),xc.plural(new mb("{1}{2}$".assign(g,f)),g+f),xc.plural(new mb("{1}{2}$".assign(h,f)),h+f),xc.singular(new mb("{1}{2}$".assign(g,f)),i+d),xc.singular(new mb("{1}{2}$".assign(h,f)),j+d))},uncountable:function(a){var b=lb.isArray(a)?a:j(arguments);Ac=Ac.concat(b)},human:function(a,b){Bc.unshift({l:a,p:b})},clear:function(a){fb(a,"singulars")&&(zc=[]),fb(a,"plurals")&&(yc=[]),fb(a,"uncountables")&&(Ac=[]),fb(a,"humans")&&(Bc=[]),fb(a,"acronyms")&&(Cc={})}},wc="and or nor a an the so but to of at by from into on onto off out in over with for".split(" "),xc.plural(/$/,"s"),xc.plural(/s$/gi,"s"),xc.plural(/(ax|test)is$/gi,"$1es"),xc.plural(/(octop|vir|fung|foc|radi|alumn)(i|us)$/gi,"$1i"),xc.plural(/(census|alias|status)$/gi,"$1es"),xc.plural(/(bu)s$/gi,"$1ses"),xc.plural(/(buffal|tomat)o$/gi,"$1oes"),xc.plural(/([ti])um$/gi,"$1a"),xc.plural(/([ti])a$/gi,"$1a"),xc.plural(/sis$/gi,"ses"),xc.plural(/f+e?$/gi,"ves"),xc.plural(/(cuff|roof)$/gi,"$1s"),xc.plural(/([ht]ive)$/gi,"$1s"),xc.plural(/([^aeiouy]o)$/gi,"$1es"),xc.plural(/([^aeiouy]|qu)y$/gi,"$1ies"),xc.plural(/(x|ch|ss|sh)$/gi,"$1es"),xc.plural(/(matr|vert|ind)(?:ix|ex)$/gi,"$1ices"),xc.plural(/([ml])ouse$/gi,"$1ice"),xc.plural(/([ml])ice$/gi,"$1ice"),xc.plural(/^(ox)$/gi,"$1en"),xc.plural(/^(oxen)$/gi,"$1"),xc.plural(/(quiz)$/gi,"$1zes"),xc.plural(/(phot|cant|hom|zer|pian|portic|pr|quart|kimon)o$/gi,"$1os"),xc.plural(/(craft)$/gi,"$1"),xc.plural(/([ft])[eo]{2}(th?)$/gi,"$1ee$2"),xc.singular(/s$/gi,""),xc.singular(/([pst][aiu]s)$/gi,"$1"),xc.singular(/([aeiouy])ss$/gi,"$1ss"),xc.singular(/(n)ews$/gi,"$1ews"),xc.singular(/([ti])a$/gi,"$1um"),xc.singular(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/gi,"$1$2sis"),xc.singular(/(^analy)ses$/gi,"$1sis"),xc.singular(/(i)(f|ves)$/i,"$1fe"),xc.singular(/([aeolr]f?)(f|ves)$/i,"$1f"),xc.singular(/([ht]ive)s$/gi,"$1"),xc.singular(/([^aeiouy]|qu)ies$/gi,"$1y"),xc.singular(/(s)eries$/gi,"$1eries"),xc.singular(/(m)ovies$/gi,"$1ovie"),xc.singular(/(x|ch|ss|sh)es$/gi,"$1"),xc.singular(/([ml])(ous|ic)e$/gi,"$1ouse"),xc.singular(/(bus)(es)?$/gi,"$1"),xc.singular(/(o)es$/gi,"$1"),xc.singular(/(shoe)s?$/gi,"$1"),xc.singular(/(cris|ax|test)[ie]s$/gi,"$1is"),xc.singular(/(octop|vir|fung|foc|radi|alumn)(i|us)$/gi,"$1us"),xc.singular(/(census|alias|status)(es)?$/gi,"$1"),xc.singular(/^(ox)(en)?/gi,"$1"),xc.singular(/(vert|ind)(ex|ices)$/gi,"$1ex"),xc.singular(/(matr)(ix|ices)$/gi,"$1ix"),xc.singular(/(quiz)(zes)?$/gi,"$1"),xc.singular(/(database)s?$/gi,"$1"),xc.singular(/ee(th?)$/gi,"oo$1"),xc.irregular("person","people"),xc.irregular("man","men"),xc.irregular("child","children"),xc.irregular("sex","sexes"),xc.irregular("move","moves"),xc.irregular("save","saves"),xc.irregular("cow","kine"),xc.irregular("goose","geese"),xc.irregular("zombie","zombies"),xc.uncountable("equipment information rice money species series fish sheep jeans".split(" ")),e(ob,!0,!0,{pluralize:function(){return hb(this,!0)},singularize:function(){return hb(this,!1)},humanize:function(){var a,b=ib(this,Bc),b=b.replace(/_id$/g,""),b=b.replace(/(_)?([a-z\d]*)/gi,function(b,c,d){return a=o(Cc,d)?Cc[d]:null,(c?" ":"")+(a||d.toLowerCase())});return jb(b)},titleize:function(){var a,b,c,d=/[.:;!]$/;return this.spacify().humanize().words(function(e,f,g){return a=d.test(e),c=0==f||f==g.length-1||a||b,b=a,c||-1===wc.indexOf(e)?jb(e):e}).join(" ")},parameterize:function(a){var b=this;return void 0===a&&(a="-"),b.normalize&&(b=b.normalize()),b=b.replace(/[^a-z0-9\-_]+/gi,a),a&&(b=b.replace(new mb("^{sep}+|{sep}+$|({sep}){sep}+".assign({sep:E(a)}),"g"),"$1")),encodeURI(b.toLowerCase())}}),ob.Inflector=xc,ob.Inflector.acronyms=Cc}(),function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.IPv6=b(a)}(this,function(a){var b=a&&a.IPv6;return{best:function(a){a=a.toLowerCase().split(":");var b=a.length,c=8;""===a[0]&&""===a[1]&&""===a[2]?(a.shift(),a.shift()):""===a[0]&&""===a[1]?a.shift():""===a[b-1]&&""===a[b-2]&&a.pop(),b=a.length,-1!==a[b-1].indexOf(".")&&(c=7);var d;for(d=0;d<b&&""!==a[d];d++);if(d<c)for(a.splice(d,1,"0000");a.length<c;)a.splice(d,0,"0000");for(d=0;d<c;d++){for(var b=a[d].split(""),e=0;3>e&&("0"===b[0]&&1<b.length);e++)b.splice(0,1);a[d]=b.join("")}var b=-1,f=e=0,g=-1,h=!1;for(d=0;d<c;d++)h?"0"===a[d]?f+=1:(h=!1,f>e&&(b=g,e=f)):"0"===a[d]&&(h=!0,g=d,f=1);for(f>e&&(b=g,e=f),1<e&&a.splice(b,e,""),b=a.length,c="",""===a[0]&&(c=":"),d=0;d<b&&(c+=a[d],d!==b-1);d++)c+=":";return""===a[b-1]&&(c+=":"),c},noConflict:function(){return a.IPv6===this&&(a.IPv6=b),this}}}),function(a){function b(a){throw RangeError(s[a])}function c(a,b){for(var c=a.length;c--;)a[c]=b(a[c]);return a}function d(a,b){return c(a.split(r),b).join(".")}function e(a){for(var b,c,d=[],e=0,f=a.length;e<f;)b=a.charCodeAt(e++),55296<=b&&56319>=b&&e<f?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function f(a){return c(a,function(a){var b="";return 65535<a&&(a-=65536,b+=u(a>>>10&1023|55296),a=56320|1023&a),b+=u(a)}).join("")}function g(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function h(a,b,c){var d=0;for(a=c?t(a/700):a>>1,a+=t(a/b);455<a;d+=36)a=t(a/35);return t(d+36*a/(a+38))}function i(a){var c,d,e,g,i,j,k=[],l=a.length,m=0,n=128,o=72;for(d=a.lastIndexOf("-"),0>d&&(d=0),e=0;e<d;++e)128<=a.charCodeAt(e)&&b("not-basic"),k.push(a.charCodeAt(e));for(d=0<d?d+1:0;d<l;){for(e=m,c=1,g=36;d>=l&&b("invalid-input"),i=a.charCodeAt(d++),i=10>i-48?i-22:26>i-65?i-65:26>i-97?i-97:36,(36<=i||i>t((2147483647-m)/c))&&b("overflow"),m+=i*c,j=g<=o?1:g>=o+26?26:g-o,!(i<j);g+=36)i=36-j,c>t(2147483647/i)&&b("overflow"),c*=i;c=k.length+1,o=h(m-e,c,0==e),t(m/c)>2147483647-n&&b("overflow"),n+=t(m/c),m%=c,k.splice(m++,0,n)}return f(k)}function j(a){var c,d,f,i,j,k,l,m,n,o,p,q,r=[];for(a=e(a),o=a.length,c=128,d=0,j=72,k=0;k<o;++k)128>(n=a[k])&&r.push(u(n));for((f=i=r.length)&&r.push("-");f<o;){for(l=2147483647,k=0;k<o;++k)(n=a[k])>=c&&n<l&&(l=n);for(p=f+1,l-c>t((2147483647-d)/p)&&b("overflow"),d+=(l-c)*p,c=l,k=0;k<o;++k)if(n=a[k],n<c&&2147483647<++d&&b("overflow"),n==c){for(m=d,l=36;n=l<=j?1:l>=j+26?26:l-j,!(m<n);l+=36)q=m-n,m=36-n,r.push(u(g(n+q%m,0))),m=t(q/m);r.push(u(g(m,0))),j=h(d,p,f==i),d=0,++f}++d,++c}return r.join("")}var k="object"==typeof exports&&exports,l="object"==typeof module&&module&&module.exports==k&&module,m="object"==typeof global&&global;m.global!==m&&m.window!==m||(a=m);var n,o,p=/^xn--/,q=/[^ -~]/,r=/\x2E|\u3002|\uFF0E|\uFF61/g,s={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},t=Math.floor,u=String.fromCharCode;if(n={version:"1.2.3",ucs2:{decode:e,encode:f},decode:i,encode:j,toASCII:function(a){return d(a,function(a){return q.test(a)?"xn--"+j(a):a})},toUnicode:function(a){return d(a,function(a){return p.test(a)?i(a.slice(4).toLowerCase()):a})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return n});else if(k&&!k.nodeType)if(l)l.exports=n;else for(o in n)n.hasOwnProperty(o)&&(k[o]=n[o]);else a.punycode=n}(this),function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.SecondLevelDomains=b(a)}(this,function(a){var b=a&&a.SecondLevelDomains,c={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch "},has:function(a){var b=a.lastIndexOf(".");if(0>=b||b>=a.length-1)return!1;var d=a.lastIndexOf(".",b-1);if(0>=d||d>=b-1)return!1;var e=c.list[a.slice(b+1)];return!!e&&0<=e.indexOf(" "+a.slice(d+1,b)+" ")},is:function(a){var b=a.lastIndexOf(".");if(0>=b||b>=a.length-1||0<=a.lastIndexOf(".",b-1))return!1;var d=c.list[a.slice(b+1)];return!!d&&0<=d.indexOf(" "+a.slice(0,b)+" ")},get:function(a){var b=a.lastIndexOf(".");if(0>=b||b>=a.length-1)return null;var d=a.lastIndexOf(".",b-1);if(0>=d||d>=b-1)return null;var e=c.list[a.slice(b+1)];return!e||0>e.indexOf(" "+a.slice(d+1,b)+" ")?null:a.slice(d+1)},noConflict:function(){return a.SecondLevelDomains===this&&(a.SecondLevelDomains=b),this}};return c}),function(a,b){
"object"==typeof exports?module.exports=b(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],b):a.URI=b(a.punycode,a.IPv6,a.SecondLevelDomains,a)}(this,function(a,b,c,d){function e(a,b){return this instanceof e?(void 0===a&&(a="undefined"!=typeof location?location.href+"":""),this.href(a),void 0!==b?this.absoluteTo(b):this):new e(a,b)}function f(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function g(a){return void 0===a?"Undefined":String(Object.prototype.toString.call(a)).slice(8,-1)}function h(a){return"Array"===g(a)}function i(a,b){var c,d;if(h(b)){for(c=0,d=b.length;c<d;c++)if(!i(a,b[c]))return!1;return!0}var e=g(b);for(c=0,d=a.length;c<d;c++)if("RegExp"===e){if("string"==typeof a[c]&&a[c].match(b))return!0}else if(a[c]===b)return!0;return!1}function j(a,b){if(!h(a)||!h(b)||a.length!==b.length)return!1;a.sort(),b.sort();for(var c=0,d=a.length;c<d;c++)if(a[c]!==b[c])return!1;return!0}function k(a){return escape(a)}function l(a){return encodeURIComponent(a).replace(/[!'()*]/g,k).replace(/\*/g,"%2A")}var m=d&&d.URI;e.version="1.14.0";var n=e.prototype,o=Object.prototype.hasOwnProperty;e._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:e.duplicateQueryParameters,escapeQuerySpace:e.escapeQuerySpace}},e.duplicateQueryParameters=!1,e.escapeQuerySpace=!0,e.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,e.idn_expression=/[^a-z0-9\.-]/i,e.punycode_expression=/(xn--)/i,e.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,e.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,e.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/gi,e.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u201e\u2018\u2019]+$/},e.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},e.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,e.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},e.getDomAttribute=function(a){if(a&&a.nodeName){var b=a.nodeName.toLowerCase();return"input"===b&&"image"!==a.type?void 0:e.domAttributes[b]}},e.encode=l,e.decode=decodeURIComponent,e.iso8859=function(){e.encode=escape,e.decode=unescape},e.unicode=function(){e.encode=l,e.decode=decodeURIComponent},e.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},e.encodeQuery=function(a,b){var c=e.encode(a+"");return void 0===b&&(b=e.escapeQuerySpace),b?c.replace(/%20/g,"+"):c},e.decodeQuery=function(a,b){a+="",void 0===b&&(b=e.escapeQuerySpace);try{return e.decode(b?a.replace(/\+/g,"%20"):a)}catch(b){return a}},e.recodePath=function(a){a=(a+"").split("/");for(var b=0,c=a.length;b<c;b++)a[b]=e.encodePathSegment(e.decode(a[b]));return a.join("/")},e.decodePath=function(a){a=(a+"").split("/");for(var b=0,c=a.length;b<c;b++)a[b]=e.decodePathSegment(a[b]);return a.join("/")};var p,q={encode:"encode",decode:"decode"},r=function(a,b){return function(c){try{return e[b](c+"").replace(e.characters[a][b].expression,function(c){return e.characters[a][b].map[c]})}catch(a){return c}}};for(p in q)e[p+"PathSegment"]=r("pathname",q[p]);e.encodeReserved=r("reserved","encode"),e.parse=function(a,b){var c;return b||(b={}),c=a.indexOf("#"),-1<c&&(b.fragment=a.substring(c+1)||null,a=a.substring(0,c)),c=a.indexOf("?"),-1<c&&(b.query=a.substring(c+1)||null,a=a.substring(0,c)),"//"===a.substring(0,2)?(b.protocol=null,a=a.substring(2),a=e.parseAuthority(a,b)):-1<(c=a.indexOf(":"))&&(b.protocol=a.substring(0,c)||null,b.protocol&&!b.protocol.match(e.protocol_expression)?b.protocol=void 0:"//"===a.substring(c+1,c+3)?(a=a.substring(c+3),a=e.parseAuthority(a,b)):(a=a.substring(c+1),b.urn=!0)),b.path=a,b},e.parseHost=function(a,b){var c,d=a.indexOf("/");return-1===d&&(d=a.length),"["===a.charAt(0)?(c=a.indexOf("]"),b.hostname=a.substring(1,c)||null,b.port=a.substring(c+2,d)||null,"/"===b.port&&(b.port=null)):a.indexOf(":")!==a.lastIndexOf(":")?(b.hostname=a.substring(0,d)||null,b.port=null):(c=a.substring(0,d).split(":"),b.hostname=c[0]||null,b.port=c[1]||null),b.hostname&&"/"!==a.substring(d).charAt(0)&&(d++,a="/"+a),a.substring(d)||"/"},e.parseAuthority=function(a,b){return a=e.parseUserinfo(a,b),e.parseHost(a,b)},e.parseUserinfo=function(a,b){var c=a.indexOf("/"),d=a.lastIndexOf("@",-1<c?c:a.length-1);return-1<d&&(-1===c||d<c)?(c=a.substring(0,d).split(":"),b.username=c[0]?e.decode(c[0]):null,c.shift(),b.password=c[0]?e.decode(c.join(":")):null,a=a.substring(d+1)):(b.username=null,b.password=null),a},e.parseQuery=function(a,b){if(!a)return{};if(!(a=a.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var c,d,f={},g=a.split("&"),h=g.length,i=0;i<h;i++)c=g[i].split("="),d=e.decodeQuery(c.shift(),b),c=c.length?e.decodeQuery(c.join("="),b):null,f[d]?("string"==typeof f[d]&&(f[d]=[f[d]]),f[d].push(c)):f[d]=c;return f},e.build=function(a){var b="";return a.protocol&&(b+=a.protocol+":"),a.urn||!b&&!a.hostname||(b+="//"),b+=e.buildAuthority(a)||"","string"==typeof a.path&&("/"!==a.path.charAt(0)&&"string"==typeof a.hostname&&(b+="/"),b+=a.path),"string"==typeof a.query&&a.query&&(b+="?"+a.query),"string"==typeof a.fragment&&a.fragment&&(b+="#"+a.fragment),b},e.buildHost=function(a){var b="";return a.hostname?(b=e.ip6_expression.test(a.hostname)?b+"["+a.hostname+"]":b+a.hostname,a.port&&(b+=":"+a.port),b):""},e.buildAuthority=function(a){return e.buildUserinfo(a)+e.buildHost(a)},e.buildUserinfo=function(a){var b="";return a.username&&(b+=e.encode(a.username),a.password&&(b+=":"+e.encode(a.password)),b+="@"),b},e.buildQuery=function(a,b,c){var d,f,g,i,j="";for(f in a)if(o.call(a,f)&&f)if(h(a[f]))for(d={},g=0,i=a[f].length;g<i;g++)void 0!==a[f][g]&&void 0===d[a[f][g]+""]&&(j+="&"+e.buildQueryParameter(f,a[f][g],c),!0!==b&&(d[a[f][g]+""]=!0));else void 0!==a[f]&&(j+="&"+e.buildQueryParameter(f,a[f],c));return j.substring(1)},e.buildQueryParameter=function(a,b,c){return e.encodeQuery(a,c)+(null!==b?"="+e.encodeQuery(b,c):"")},e.addQuery=function(a,b,c){if("object"==typeof b)for(var d in b)o.call(b,d)&&e.addQuery(a,d,b[d]);else{if("string"!=typeof b)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");void 0===a[b]?a[b]=c:("string"==typeof a[b]&&(a[b]=[a[b]]),h(c)||(c=[c]),a[b]=a[b].concat(c))}},e.removeQuery=function(a,b,c){var d;if(h(b))for(c=0,d=b.length;c<d;c++)a[b[c]]=void 0;else if("object"==typeof b)for(d in b)o.call(b,d)&&e.removeQuery(a,d,b[d]);else{if("string"!=typeof b)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");if(void 0!==c){if(a[b]===c)a[b]=void 0;else if(h(a[b])){d=a[b];var f,g,i={};if(h(c))for(f=0,g=c.length;f<g;f++)i[c[f]]=!0;else i[c]=!0;for(f=0,g=d.length;f<g;f++)void 0!==i[d[f]]&&(d.splice(f,1),g--,f--);a[b]=d}}else a[b]=void 0}},e.hasQuery=function(a,b,c,d){if("object"==typeof b){for(var f in b)if(o.call(b,f)&&!e.hasQuery(a,f,b[f]))return!1;return!0}if("string"!=typeof b)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(g(c)){case"Undefined":return b in a;case"Boolean":return a=Boolean(h(a[b])?a[b].length:a[b]),c===a;case"Function":return!!c(a[b],b,a);case"Array":return!!h(a[b])&&(d?i:j)(a[b],c);case"RegExp":return h(a[b])?!!d&&i(a[b],c):Boolean(a[b]&&a[b].match(c));case"Number":c=String(c);case"String":return h(a[b])?!!d&&i(a[b],c):a[b]===c;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},e.commonPath=function(a,b){var c,d=Math.min(a.length,b.length);for(c=0;c<d;c++)if(a.charAt(c)!==b.charAt(c)){c--;break}return 1>c?a.charAt(0)===b.charAt(0)&&"/"===a.charAt(0)?"/":"":("/"===a.charAt(c)&&"/"===b.charAt(c)||(c=a.substring(0,c).lastIndexOf("/")),a.substring(0,c+1))},e.withinString=function(a,b,c){c||(c={});var d=c.start||e.findUri.start,f=c.end||e.findUri.end,g=c.trim||e.findUri.trim,h=/[a-z0-9-]=["']?$/i;for(d.lastIndex=0;;){var i=d.exec(a);if(!i)break;if(i=i.index,c.ignoreHtml){var j=a.slice(Math.max(i-3,0),i);if(j&&h.test(j))continue}var j=i+a.slice(i).search(f),k=a.slice(i,j).replace(g,"");c.ignore&&c.ignore.test(k)||(j=i+k.length,k=b(k,i,j,a),a=a.slice(0,i)+k+a.slice(j),d.lastIndex=i+k.length)}return d.lastIndex=0,a},e.ensureValidHostname=function(b){if(b.match(e.invalid_hostname_characters)){if(!a)throw new TypeError('Hostname "'+b+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(a.toASCII(b).match(e.invalid_hostname_characters))throw new TypeError('Hostname "'+b+'" contains characters other than [A-Z0-9.-]')}},e.noConflict=function(a){return a?(a={URI:this.noConflict()},d.URITemplate&&"function"==typeof d.URITemplate.noConflict&&(a.URITemplate=d.URITemplate.noConflict()),d.IPv6&&"function"==typeof d.IPv6.noConflict&&(a.IPv6=d.IPv6.noConflict()),d.SecondLevelDomains&&"function"==typeof d.SecondLevelDomains.noConflict&&(a.SecondLevelDomains=d.SecondLevelDomains.noConflict()),a):(d.URI===this&&(d.URI=m),this)},n.build=function(a){return!0===a?this._deferred_build=!0:(void 0===a||this._deferred_build)&&(this._string=e.build(this._parts),this._deferred_build=!1),this},n.clone=function(){return new e(this)},n.valueOf=n.toString=function(){return this.build(!1)._string},q={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"},r=function(a){return function(b,c){return void 0===b?this._parts[a]||"":(this._parts[a]=b||null,this.build(!c),this)}};for(p in q)n[p]=r(q[p]);q={query:"?",fragment:"#"},r=function(a,b){return function(c,d){return void 0===c?this._parts[a]||"":(null!==c&&(c+="",c.charAt(0)===b&&(c=c.substring(1))),this._parts[a]=c,this.build(!d),this)}};for(p in q)n[p]=r(p,q[p]);q={search:["?","query"],hash:["#","fragment"]},r=function(a,b){return function(c,d){var e=this[a](c,d);return"string"==typeof e&&e.length?b+e:e}};for(p in q)n[p]=r(q[p][1],q[p][0]);n.pathname=function(a,b){if(void 0===a||!0===a){var c=this._parts.path||(this._parts.hostname?"/":"");return a?e.decodePath(c):c}return this._parts.path=a?e.recodePath(a):"/",this.build(!b),this},n.path=n.pathname,n.href=function(a,b){var c;if(void 0===a)return this.toString();this._string="",this._parts=e._parts();var d=a instanceof e,f="object"==typeof a&&(a.hostname||a.path||a.pathname);if(a.nodeName&&(f=e.getDomAttribute(a),a=a[f]||"",f=!1),!d&&f&&void 0!==a.pathname&&(a=a.toString()),"string"==typeof a)this._parts=e.parse(a,this._parts);else{if(!d&&!f)throw new TypeError("invalid input");for(c in d=d?a._parts:a)o.call(this._parts,c)&&(this._parts[c]=d[c])}return this.build(!b),this},n.is=function(a){var b=!1,d=!1,f=!1,g=!1,h=!1,i=!1,j=!1,k=!this._parts.urn;switch(this._parts.hostname&&(k=!1,d=e.ip4_expression.test(this._parts.hostname),f=e.ip6_expression.test(this._parts.hostname),b=d||f,h=(g=!b)&&c&&c.has(this._parts.hostname),i=g&&e.idn_expression.test(this._parts.hostname),j=g&&e.punycode_expression.test(this._parts.hostname)),a.toLowerCase()){case"relative":return k;case"absolute":return!k;case"domain":case"name":return g;case"sld":return h;case"ip":return b;case"ip4":case"ipv4":case"inet4":return d;case"ip6":case"ipv6":case"inet6":return f;case"idn":return i;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return j}return null};var s=n.protocol,t=n.port,u=n.hostname;n.protocol=function(a,b){if(void 0!==a&&a&&(a=a.replace(/:(\/\/)?$/,""),!a.match(e.protocol_expression)))throw new TypeError('Protocol "'+a+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return s.call(this,a,b)},n.scheme=n.protocol,n.port=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a&&(0===a&&(a=null),a&&(a+="",":"===a.charAt(0)&&(a=a.substring(1)),a.match(/[^0-9]/))))throw new TypeError('Port "'+a+'" contains characters other than [0-9]');return t.call(this,a,b)},n.hostname=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a){var c={};e.parseHost(a,c),a=c.hostname}return u.call(this,a,b)},n.host=function(a,b){return this._parts.urn?void 0===a?"":this:void 0===a?this._parts.hostname?e.buildHost(this._parts):"":(e.parseHost(a,this._parts),this.build(!b),this)},n.authority=function(a,b){return this._parts.urn?void 0===a?"":this:void 0===a?this._parts.hostname?e.buildAuthority(this._parts):"":(e.parseAuthority(a,this._parts),this.build(!b),this)},n.userinfo=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.username)return"";var c=e.buildUserinfo(this._parts);return c.substring(0,c.length-1)}return"@"!==a[a.length-1]&&(a+="@"),e.parseUserinfo(a,this._parts),this.build(!b),this},n.resource=function(a,b){var c;return void 0===a?this.path()+this.search()+this.hash():(c=e.parse(a),this._parts.path=c.path,this._parts.query=c.query,this._parts.fragment=c.fragment,this.build(!b),this)},n.subdomain=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,c)||""}return c=this._parts.hostname.length-this.domain().length,c=this._parts.hostname.substring(0,c),c=new RegExp("^"+f(c)),a&&"."!==a.charAt(a.length-1)&&(a+="."),a&&e.ensureValidHostname(a),this._parts.hostname=this._parts.hostname.replace(c,a),this.build(!b),this},n.domain=function(a,b){if(this._parts.urn)return void 0===a?"":this;if("boolean"==typeof a&&(b=a,a=void 0),void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.match(/\./g);return c&&2>c.length?this._parts.hostname:(c=this._parts.hostname.length-this.tld(b).length-1,c=this._parts.hostname.lastIndexOf(".",c-1)+1,this._parts.hostname.substring(c)||"")}if(!a)throw new TypeError("cannot set domain empty");return e.ensureValidHostname(a),!this._parts.hostname||this.is("IP")?this._parts.hostname=a:(c=new RegExp(f(this.domain())+"$"),this._parts.hostname=this._parts.hostname.replace(c,a)),this.build(!b),this},n.tld=function(a,b){if(this._parts.urn)return void 0===a?"":this;if("boolean"==typeof a&&(b=a,a=void 0),void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var d=this._parts.hostname.lastIndexOf("."),d=this._parts.hostname.substring(d+1);return!0!==b&&c&&c.list[d.toLowerCase()]?c.get(this._parts.hostname)||d:d}if(!a)throw new TypeError("cannot set TLD empty");if(a.match(/[^a-zA-Z0-9-]/)){if(!c||!c.is(a))throw new TypeError('TLD "'+a+'" contains characters other than [A-Z0-9]');d=new RegExp(f(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(d,a)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");d=new RegExp(f(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(d,a)}return this.build(!b),this},n.directory=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var c=this._parts.path.length-this.filename().length-1,c=this._parts.path.substring(0,c)||(this._parts.hostname?"/":"");return a?e.decodePath(c):c}return c=this._parts.path.length-this.filename().length,c=this._parts.path.substring(0,c),c=new RegExp("^"+f(c)),this.is("relative")||(a||(a="/"),"/"!==a.charAt(0)&&(a="/"+a)),a&&"/"!==a.charAt(a.length-1)&&(a+="/"),a=e.recodePath(a),this._parts.path=this._parts.path.replace(c,a),this.build(!b),this},n.filename=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this._parts.path.lastIndexOf("/"),c=this._parts.path.substring(c+1);return a?e.decodePathSegment(c):c}c=!1,"/"===a.charAt(0)&&(a=a.substring(1)),a.match(/\.?\//)&&(c=!0);var d=new RegExp(f(this.filename())+"$");return a=e.recodePath(a),this._parts.path=this._parts.path.replace(d,a),c?this.normalizePath(b):this.build(!b),this},n.suffix=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this.filename(),d=c.lastIndexOf(".");return-1===d?"":(c=c.substring(d+1),c=/^[a-z0-9%]+$/i.test(c)?c:"",a?e.decodePathSegment(c):c)}if("."===a.charAt(0)&&(a=a.substring(1)),c=this.suffix())d=a?new RegExp(f(c)+"$"):new RegExp(f("."+c)+"$");else{if(!a)return this;this._parts.path+="."+e.recodePath(a)}return d&&(a=e.recodePath(a),this._parts.path=this._parts.path.replace(d,a)),this.build(!b),this},n.segment=function(a,b,c){var d=this._parts.urn?":":"/",e=this.path(),f="/"===e.substring(0,1),e=e.split(d);if(void 0!==a&&"number"!=typeof a&&(c=b,b=a,a=void 0),void 0!==a&&"number"!=typeof a)throw Error('Bad segment "'+a+'", must be 0-based integer');if(f&&e.shift(),0>a&&(a=Math.max(e.length+a,0)),void 0===b)return void 0===a?e:e[a];if(null===a||void 0===e[a])if(h(b)){e=[],a=0;for(var g=b.length;a<g;a++)(b[a].length||e.length&&e[e.length-1].length)&&(e.length&&!e[e.length-1].length&&e.pop(),e.push(b[a]))}else(b||"string"==typeof b)&&(""===e[e.length-1]?e[e.length-1]=b:e.push(b));else b||"string"==typeof b&&b.length?e[a]=b:e.splice(a,1);return f&&e.unshift(""),this.path(e.join(d),c)},n.segmentCoded=function(a,b,c){var d,f;if("number"!=typeof a&&(c=b,b=a,a=void 0),void 0===b){if(a=this.segment(a,b,c),h(a))for(d=0,f=a.length;d<f;d++)a[d]=e.decode(a[d]);else a=void 0!==a?e.decode(a):void 0;return a}if(h(b))for(d=0,f=b.length;d<f;d++)b[d]=e.decode(b[d]);else b="string"==typeof b?e.encode(b):b;return this.segment(a,b,c)};var v=n.query;return n.query=function(a,b){if(!0===a)return e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof a){var c=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace),d=a.call(this,c);return this._parts.query=e.buildQuery(d||c,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this}return void 0!==a&&"string"!=typeof a?(this._parts.query=e.buildQuery(a,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this):v.call(this,a,b)},n.setQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("object"==typeof a)for(var f in a)o.call(a,f)&&(d[f]=a[f]);else{if("string"!=typeof a)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");d[a]=void 0!==b?b:null}return this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof a&&(c=b),this.build(!c),this},n.addQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.addQuery(d,a,void 0===b?null:b),this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof a&&(c=b),this.build(!c),this},n.removeQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.removeQuery(d,a,b),this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof a&&(c=b),this.build(!c),this},n.hasQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.hasQuery(d,a,b,c)},n.setSearch=n.setQuery,n.addSearch=n.addQuery,n.removeSearch=n.removeQuery,n.hasSearch=n.hasQuery,n.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},n.normalizeProtocol=function(a){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!a)),this},n.normalizeHostname=function(c){return this._parts.hostname&&(this.is("IDN")&&a?this._parts.hostname=a.toASCII(this._parts.hostname):this.is("IPv6")&&b&&(this._parts.hostname=b.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!c)),this},n.normalizePort=function(a){return"string"==typeof this._parts.protocol&&this._parts.port===e.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!a)),this},n.normalizePath=function(a){if(this._parts.urn||!this._parts.path||"/"===this._parts.path)return this;var b,c,d,f=this._parts.path,g="";for("/"!==f.charAt(0)&&(b=!0,f="/"+f),f=f.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),b&&(g=f.substring(1).match(/^(\.\.\/)+/)||"")&&(g=g[0]);-1!==(c=f.indexOf("/.."));)0!==c?(d=f.substring(0,c).lastIndexOf("/"),-1===d&&(d=c),f=f.substring(0,d)+f.substring(c+3)):f=f.substring(3);return b&&this.is("relative")&&(f=g+f.substring(1)),f=e.recodePath(f),this._parts.path=f,this.build(!a),this},n.normalizePathname=n.normalizePath,n.normalizeQuery=function(a){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(e.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!a)),this},n.normalizeFragment=function(a){return this._parts.fragment||(this._parts.fragment=null,this.build(!a)),this},n.normalizeSearch=n.normalizeQuery,n.normalizeHash=n.normalizeFragment,n.iso8859=function(){var a=e.encode,b=e.decode;return e.encode=escape,e.decode=decodeURIComponent,this.normalize(),e.encode=a,e.decode=b,this},n.unicode=function(){var a=e.encode,b=e.decode;return e.encode=l,e.decode=unescape,this.normalize(),e.encode=a,e.decode=b,this},n.readable=function(){var b=this.clone();b.username("").password("").normalize();var c="";if(b._parts.protocol&&(c+=b._parts.protocol+"://"),b._parts.hostname&&(b.is("punycode")&&a?(c+=a.toUnicode(b._parts.hostname),b._parts.port&&(c+=":"+b._parts.port)):c+=b.host()),b._parts.hostname&&b._parts.path&&"/"!==b._parts.path.charAt(0)&&(c+="/"),c+=b.path(!0),b._parts.query){for(var d="",f=0,g=b._parts.query.split("&"),h=g.length;f<h;f++){var i=(g[f]||"").split("="),d=d+"&"+e.decodeQuery(i[0],this._parts.escapeQuerySpace).replace(/&/g,"%26");void 0!==i[1]&&(d+="="+e.decodeQuery(i[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}c+="?"+d.substring(1)}return c+=e.decodeQuery(b.hash(),!0)},n.absoluteTo=function(a){var b,c,d=this.clone(),f=["protocol","username","password","hostname","port"];if(this._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");if(a instanceof e||(a=new e(a)),d._parts.protocol||(d._parts.protocol=a._parts.protocol),this._parts.hostname)return d;for(b=0;c=f[b];b++)d._parts[c]=a._parts[c];return d._parts.path?".."===d._parts.path.substring(-2)&&(d._parts.path+="/"):(d._parts.path=a._parts.path,d._parts.query||(d._parts.query=a._parts.query)),"/"!==d.path().charAt(0)&&(a=a.directory(),d._parts.path=(a?a+"/":"")+d._parts.path,d.normalizePath()),d.build(),d},n.relativeTo=function(a){var b,c,d,f,g=this.clone().normalize();if(g._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");if(a=new e(a).normalize(),b=g._parts,c=a._parts,d=g.path(),f=a.path(),"/"!==d.charAt(0))throw Error("URI is already relative");if("/"!==f.charAt(0))throw Error("Cannot calculate a URI relative to another relative URI");return b.protocol===c.protocol&&(b.protocol=null),b.username!==c.username||b.password!==c.password||null!==b.protocol||null!==b.username||null!==b.password||b.hostname!==c.hostname||b.port!==c.port?g.build():(b.hostname=null,b.port=null,d===f?(b.path="",g.build()):(a=e.commonPath(g.path(),a.path()))?(c=c.path.substring(a.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../"),b.path=c+b.path.substring(a.length),g.build()):g.build())},n.equals=function(a){var b=this.clone();a=new e(a);var c,d={},f={},g={};if(b.normalize(),a.normalize(),b.toString()===a.toString())return!0;if(d=b.query(),f=a.query(),b.query(""),a.query(""),b.toString()!==a.toString()||d.length!==f.length)return!1;d=e.parseQuery(d,this._parts.escapeQuerySpace),f=e.parseQuery(f,this._parts.escapeQuerySpace);for(c in d)if(o.call(d,c)){if(h(d[c])){if(!j(d[c],f[c]))return!1}else if(d[c]!==f[c])return!1;g[c]=!0}for(c in f)if(o.call(f,c)&&!g[c])return!1;return!0},n.duplicateQueryParameters=function(a){return this._parts.duplicateQueryParameters=!!a,this},n.escapeQuerySpace=function(a){return this._parts.escapeQuerySpace=!!a,this},e}),function(a,b){"object"==typeof exports?module.exports=b(require("./URI")):"function"==typeof define&&define.amd?define(["./URI"],b):a.URITemplate=b(a.URI,a)}(this,function(a,b){function c(a){return c._cache[a]?c._cache[a]:this instanceof c?(this.expression=a,c._cache[a]=this,this):new c(a)}function d(a){this.data=a,this.cache={}}var e=b&&b.URITemplate,f=Object.prototype.hasOwnProperty,g=c.prototype,h={"":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encode"},"+":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},"#":{prefix:"#",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},".":{prefix:".",separator:".",named:!1,empty_name_separator:!1,encode:"encode"},"/":{prefix:"/",separator:"/",named:!1,empty_name_separator:!1,encode:"encode"},";":{prefix:";",separator:";",named:!0,empty_name_separator:!1,encode:"encode"},"?":{prefix:"?",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"},"&":{prefix:"&",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"}};return c._cache={},c.EXPRESSION_PATTERN=/\{([^a-zA-Z0-9%_]?)([^\}]+)(\}|$)/g,c.VARIABLE_PATTERN=/^([^*:]+)((\*)|:(\d+))?$/,c.VARIABLE_NAME_PATTERN=/[^a-zA-Z0-9%_]/,c.expand=function(a,b){var d,e,f,g=h[a.operator],i=g.named?"Named":"Unnamed",j=a.variables,k=[];for(f=0;e=j[f];f++)d=b.get(e.name),d.val.length?k.push(c["expand"+i](d,g,e.explode,e.explode&&g.separator||",",e.maxlength,e.name)):d.type&&k.push("");return k.length?g.prefix+k.join(g.separator):""},c.expandNamed=function(b,c,d,e,f,g){var h="",i=c.encode;c=c.empty_name_separator;var j,k,l,m=!b[i].length,n=2===b.type?"":a[i](g);for(k=0,l=b.val.length;k<l;k++)f?(j=a[i](b.val[k][1].substring(0,f)),2===b.type&&(n=a[i](b.val[k][0].substring(0,f)))):m?(j=a[i](b.val[k][1]),2===b.type?(n=a[i](b.val[k][0]),b[i].push([n,j])):b[i].push([void 0,j])):(j=b[i][k][1],2===b.type&&(n=b[i][k][0])),h&&(h+=e),d?h+=n+(c||j?"=":"")+j:(k||(h+=a[i](g)+(c||j?"=":"")),2===b.type&&(h+=n+","),h+=j);return h},c.expandUnnamed=function(b,c,d,e,f){var g="",h=c.encode;c=c.empty_name_separator;var i,j,k,l,m=!b[h].length;for(k=0,l=b.val.length;k<l;k++)f?j=a[h](b.val[k][1].substring(0,f)):m?(j=a[h](b.val[k][1]),b[h].push([2===b.type?a[h](b.val[k][0]):void 0,j])):j=b[h][k][1],g&&(g+=e),2===b.type&&(i=f?a[h](b.val[k][0].substring(0,f)):b[h][k][0],g+=i,g=d?g+(c||j?"=":""):g+","),g+=j;return g},c.noConflict=function(){return b.URITemplate===c&&(b.URITemplate=e),c},g.expand=function(a){var b="";this.parts&&this.parts.length||this.parse(),a instanceof d||(a=new d(a));for(var e=0,f=this.parts.length;e<f;e++)b+="string"==typeof this.parts[e]?this.parts[e]:c.expand(this.parts[e],a);return b},g.parse=function(){var a,b,d,e=this.expression,f=c.EXPRESSION_PATTERN,g=c.VARIABLE_PATTERN,i=c.VARIABLE_NAME_PATTERN,j=[],k=0;for(f.lastIndex=0;;){if(null===(b=f.exec(e))){j.push(e.substring(k));break}if(j.push(e.substring(k,b.index)),k=b.index+b[0].length,!h[b[1]])throw Error('Unknown Operator "'+b[1]+'" in "'+b[0]+'"');if(!b[3])throw Error('Unclosed Expression "'+b[0]+'"');a=b[2].split(",");for(var l=0,m=a.length;l<m;l++){if(null===(d=a[l].match(g)))throw Error('Invalid Variable "'+a[l]+'" in "'+b[0]+'"');if(d[1].match(i))throw Error('Invalid Variable Name "'+d[1]+'" in "'+b[0]+'"');a[l]={name:d[1],explode:!!d[3],maxlength:d[4]&&parseInt(d[4],10)}}if(!a.length)throw Error('Expression Missing Variable(s) "'+b[0]+'"');j.push({expression:b[0],operator:b[1],variables:a})}return j.length||j.push(e),this.parts=j,this},d.prototype.get=function(a){var b,c=this.data,d={type:0,val:[],encode:[],encodeReserved:[]};if(void 0!==this.cache[a])return this.cache[a];if(this.cache[a]=d,void 0!==(c="[object Function]"===String(Object.prototype.toString.call(c))?c(a):"[object Function]"===String(Object.prototype.toString.call(c[a]))?c[a](a):c[a])&&null!==c)if("[object Array]"===String(Object.prototype.toString.call(c))){for(b=0,a=c.length;b<a;b++)void 0!==c[b]&&null!==c[b]&&d.val.push([void 0,String(c[b])]);d.val.length&&(d.type=3)}else if("[object Object]"===String(Object.prototype.toString.call(c))){for(b in c)f.call(c,b)&&void 0!==c[b]&&null!==c[b]&&d.val.push([b,String(c[b])]);d.val.length&&(d.type=2)}else d.type=1,d.val.push([void 0,String(c)]);return d},a.expand=function(b,d){var e=new c(b).expand(d);return new a(e)},c});var _apacheCamelModelVersion="2.20.0",_apacheCamelModel={definitions:{expression:{type:"object",title:"expression",group:"language",icon:"generic24.png",description:"Expression in the choose language",properties:{expression:{kind:"element",type:"string",title:"Expression",description:"The expression",required:!0},language:{kind:"element",type:"string",title:"Expression",description:"The chosen language",required:!0,enum:["constant","el","exchangeProperty","groovy","header","javaScript","jsonpath","jxpath","language","method","mvel","ognl","php","python","ref","ruby","simple","spel","sql","terser","tokenize","xpath","xquery","xtokenize"]}}},aggregate:{type:"object",title:"Aggregate",group:"eip,routing",icon:"aggregate24.png",description:"Aggregates many messages into a single message",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{correlationExpression:{kind:"expression",type:"object",description:"The expression used to calculate the correlation key to use for aggregation. The Exchange which has the same correlation key is aggregated together. If the correlation key could not be evaluated an Exception is thrown. You can disable this by using the ignoreBadCorrelationKeys option.",title:"Correlation Expression",required:!0,deprecated:!1},completionPredicate:{kind:"expression",type:"object",description:"A Predicate to indicate when an aggregated exchange is complete. If this is not specified and the AggregationStrategy object implements Predicate the aggregationStrategy object will be used as the completionPredicate.",
title:"Completion Predicate",required:!1,deprecated:!1},completionTimeoutExpression:{kind:"expression",type:"object",description:"Time in millis that an aggregated exchange should be inactive before its complete (timeout). This option can be set as either a fixed value or using an Expression which allows you to evaluate a timeout dynamically - will use Long as result. If both are set Camel will fallback to use the fixed value if the Expression result was null or 0. You cannot use this option together with completionInterval only one of the two can be used. By default the timeout checker runs every second you can use the completionTimeoutCheckerInterval option to configure how frequently to run the checker. The timeout is an approximation and there is no guarantee that the a timeout is triggered exactly after the timeout value. It is not recommended to use very low timeout values or checker intervals.",title:"Completion Timeout",required:!1,deprecated:!1},completionSizeExpression:{kind:"expression",type:"object",description:"Number of messages aggregated before the aggregation is complete. This option can be set as either a fixed value or using an Expression which allows you to evaluate a size dynamically - will use Integer as result. If both are set Camel will fallback to use the fixed value if the Expression result was null or 0.",title:"Completion Size",required:!1,deprecated:!1},optimisticLockRetryPolicy:{kind:"element",type:"object",description:"Allows to configure retry settings when using optimistic locking.",title:"Optimistic Lock Retry Policy",required:!1,deprecated:!1},parallelProcessing:{kind:"attribute",type:"boolean",defaultValue:"false",description:"When aggregated are completed they are being send out of the aggregator. This option indicates whether or not Camel should use a thread pool with multiple threads for concurrency. If no custom thread pool has been specified then Camel creates a default pool with 10 concurrent threads.",title:"Parallel Processing",required:!1,deprecated:!1},optimisticLocking:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Turns on using optimistic locking which requires the aggregationRepository being used is supporting this by implementing org.apache.camel.spi.OptimisticLockingAggregationRepository.",title:"Optimistic Locking",required:!1,deprecated:!1},executorServiceRef:{kind:"attribute",type:"string",description:"If using parallelProcessing you can specify a custom thread pool to be used. In fact also if you are not using parallelProcessing this custom thread pool is used to send out aggregated exchanges as well.",title:"Executor Service Ref",required:!1,deprecated:!1},timeoutCheckerExecutorServiceRef:{kind:"attribute",type:"string",description:"If using either of the completionTimeout completionTimeoutExpression or completionInterval options a background thread is created to check for the completion for every aggregator. Set this option to provide a custom thread pool to be used rather than creating a new thread for every aggregator.",title:"Timeout Checker Executor Service Ref",required:!1,deprecated:!1},aggregationRepositoryRef:{kind:"attribute",type:"string",description:"Sets the custom aggregate repository to use Will by default use org.apache.camel.processor.aggregate.MemoryAggregationRepository",title:"Aggregation Repository Ref",required:!1,deprecated:!1},strategyRef:{kind:"attribute",type:"string",description:"A reference to lookup the AggregationStrategy in the Registry. Configuring an AggregationStrategy is required and is used to merge the incoming Exchange with the existing already merged exchanges. At first call the oldExchange parameter is null. On subsequent invocations the oldExchange contains the merged exchanges and newExchange is of course the new incoming Exchange.",title:"Strategy Ref",required:!1,deprecated:!1},strategyMethodName:{kind:"attribute",type:"string",description:"This option can be used to explicit declare the method name to use when using POJOs as the AggregationStrategy.",title:"Strategy Method Name",required:!1,deprecated:!1},strategyMethodAllowNull:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If this option is false then the aggregate method is not used for the very first aggregation. If this option is true then null values is used as the oldExchange (at the very first aggregation) when using POJOs as the AggregationStrategy.",title:"Strategy Method Allow Null",required:!1,deprecated:!1},completionSize:{kind:"attribute",type:"integer",description:"Number of messages aggregated before the aggregation is complete. This option can be set as either a fixed value or using an Expression which allows you to evaluate a size dynamically - will use Integer as result. If both are set Camel will fallback to use the fixed value if the Expression result was null or 0.",title:"Completion Size",required:!1,deprecated:!1},completionInterval:{kind:"attribute",type:"integer",description:"A repeating period in millis by which the aggregator will complete all current aggregated exchanges. Camel has a background task which is triggered every period. You cannot use this option together with completionTimeout only one of them can be used.",title:"Completion Interval",required:!1,deprecated:!1},completionTimeout:{kind:"attribute",type:"integer",description:"Time in millis that an aggregated exchange should be inactive before its complete (timeout). This option can be set as either a fixed value or using an Expression which allows you to evaluate a timeout dynamically - will use Long as result. If both are set Camel will fallback to use the fixed value if the Expression result was null or 0. You cannot use this option together with completionInterval only one of the two can be used. By default the timeout checker runs every second you can use the completionTimeoutCheckerInterval option to configure how frequently to run the checker. The timeout is an approximation and there is no guarantee that the a timeout is triggered exactly after the timeout value. It is not recommended to use very low timeout values or checker intervals.",title:"Completion Timeout",required:!1,deprecated:!1},completionTimeoutCheckerInterval:{kind:"attribute",type:"integer",defaultValue:"1000",description:"Interval in millis that is used by the background task that checks for timeouts (org.apache.camel.TimeoutMap). By default the timeout checker runs every second. The timeout is an approximation and there is no guarantee that the a timeout is triggered exactly after the timeout value. It is not recommended to use very low timeout values or checker intervals.",title:"Completion Timeout Checker Interval",required:!1,deprecated:!1},completionFromBatchConsumer:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Enables the batch completion mode where we aggregate from a org.apache.camel.BatchConsumer and aggregate the total number of exchanges the org.apache.camel.BatchConsumer has reported as total by checking the exchange property link org.apache.camel.ExchangeBATCH_COMPLETE when its complete.",title:"Completion From Batch Consumer",required:!1,deprecated:!1},groupExchanges:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Enables grouped exchanges so the aggregator will group all aggregated exchanges into a single combined Exchange holding all the aggregated exchanges in a java.util.List.",title:"Group Exchanges",required:!1,deprecated:!0},eagerCheckCompletion:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Use eager completion checking which means that the completionPredicate will use the incoming Exchange. As opposed to without eager completion checking the completionPredicate will use the aggregated Exchange.",title:"Eager Check Completion",required:!1,deprecated:!1},ignoreInvalidCorrelationKeys:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If a correlation key cannot be successfully evaluated it will be ignored by logging a DEBUG and then just ignore the incoming Exchange.",title:"Ignore Invalid Correlation Keys",required:!1,deprecated:!1},closeCorrelationKeyOnCompletion:{kind:"attribute",type:"integer",description:"Closes a correlation key when its complete. Any late received exchanges which has a correlation key that has been closed it will be defined and a ClosedCorrelationKeyException is thrown.",title:"Close Correlation Key On Completion",required:!1,deprecated:!1},discardOnCompletionTimeout:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Discards the aggregated message on completion timeout. This means on timeout the aggregated message is dropped and not sent out of the aggregator.",title:"Discard On Completion Timeout",required:!1,deprecated:!1},forceCompletionOnStop:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Indicates to complete all current aggregated exchanges when the context is stopped",title:"Force Completion On Stop",required:!1,deprecated:!1},completeAllOnStop:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Indicates to wait to complete all current and partial (pending) aggregated exchanges when the context is stopped. This also means that we will wait for all pending exchanges which are stored in the aggregation repository to complete so the repository is empty before we can stop. You may want to enable this when using the memory based aggregation repository that is memory based only and do not store data on disk. When this option is enabled then the aggregator is waiting to complete all those exchanges before its stopped when stopping CamelContext or the route using it.",title:"Complete All On Stop",required:!1,deprecated:!1},aggregateControllerRef:{kind:"attribute",type:"string",description:"To use a org.apache.camel.processor.aggregate.AggregateController to allow external sources to control this aggregator.",title:"Aggregate Controller Ref",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},aop:{type:"object",title:"Aop",group:"configuration",icon:"generic24.png",description:"Does processing before and/or after the route is completed",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{beforeUri:{kind:"attribute",type:"string",description:"Endpoint to call in AOP before.",title:"Before Uri",required:!1,deprecated:!1},afterUri:{kind:"attribute",type:"string",description:"Endpoint to call in AOP after. The difference between after and afterFinally is that afterFinally is invoked from a finally block so it will always be invoked no matter what eg also in case of an exception occur.",title:"After Uri",required:!1,deprecated:!1},afterFinallyUri:{kind:"attribute",type:"string",description:"Endpoint to call in AOP after finally. The difference between after and afterFinally is that afterFinally is invoked from a finally block so it will always be invoked no matter what eg also in case of an exception occur.",title:"After Finally Uri",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},"batch-config":{type:"object",title:"Batch-config",group:"eip,routing,resequence",icon:"generic24.png",description:"Configures batch-processing resequence eip.",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{batchSize:{kind:"attribute",type:"integer",defaultValue:"100",description:"Sets the size of the batch to be re-ordered. The default size is 100.",title:"Batch Size",required:!1,deprecated:!1},batchTimeout:{kind:"attribute",type:"integer",defaultValue:"1000",description:"Sets the timeout for collecting elements to be re-ordered. The default timeout is 1000 msec.",title:"Batch Timeout",required:!1,deprecated:!1},allowDuplicates:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to allow duplicates.",title:"Allow Duplicates",required:!1,deprecated:!1},reverse:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to reverse the ordering.",title:"Reverse",required:!1,deprecated:!1},ignoreInvalidExchanges:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to ignore invalid exchanges",title:"Ignore Invalid Exchanges",required:!1,deprecated:!1}}},bean:{type:"object",title:"Bean",group:"eip,endpoint",icon:"bean24.png",description:"Calls a java bean",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{ref:{kind:"attribute",type:"string",description:"Sets a reference to a bean to use",title:"Ref",required:!1,deprecated:!1},method:{kind:"attribute",type:"string",description:"Sets the method name on the bean to use",title:"Method",required:!1,deprecated:!1},beanType:{kind:"attribute",type:"string",description:"Sets the Class of the bean",title:"Bean Type",required:!1,deprecated:!1},cache:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Caches the bean lookup to avoid lookup up bean on every usage.",title:"Cache",required:!1,deprecated:!1},multiParameterArray:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the message body is an array type.",title:"Multi Parameter Array",required:!1,deprecated:!0},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},beanPostProcessor:{type:"object",title:"Bean Post Processor",group:"spring,configuration",icon:"generic24.png",description:"Spring specific DefaultCamelBeanPostProcessor which uses Spring BeanPostProcessor to post process beans.",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{}},blacklistServiceFilter:{type:"object",title:"Blacklist Service Filter",group:"routing,cloud,service-filter",icon:"generic24.png",description:"",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{servers:{kind:"element",type:"array",description:"Sets the server blacklist. Each entry can be a list of servers separated by comma in the format: servicehost:portservicehost2:portservicehost3:port",title:"Servers",required:!1,deprecated:!1},properties:{kind:"element",type:"array",description:"Set client properties to use. These properties are specific to what service call implementation are in use. For example if using ribbon then the client properties are define in com.netflix.client.config.CommonClientConfigKey.",title:"Properties",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},cachingServiceDiscovery:{type:"object",title:"Caching Service Discovery",group:"routing,cloud,service-discovery",icon:"generic24.png",description:"",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{timeout:{kind:"attribute",type:"integer",defaultValue:"60",description:"Set the time the services will be retained.",title:"Timeout",required:!1,deprecated:!1},units:{kind:"attribute",type:"object",defaultValue:"SECONDS",enum:["DAYS","HOURS","MICROSECONDS","MILLISECONDS","MINUTES","NANOSECONDS","SECONDS"],description:"Set the time unit for the timeout.",title:"Units",required:!1,deprecated:!1},serviceDiscoveryConfiguration:{kind:"element",type:"object",description:"Set the service-call configuration to use",title:"Service Discovery Configuration",required:!0,deprecated:!1},properties:{kind:"element",type:"array",description:"Set client properties to use. These properties are specific to what service call implementation are in use. For example if using ribbon then the client properties are define in com.netflix.client.config.CommonClientConfigKey.",title:"Properties",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},camelContext:{type:"object",title:"Camel Context",group:"spring,configuration",icon:"generic24.png",description:"CamelContext using XML configuration.",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{"depends-on":{kind:"attribute",type:"string",description:"List of other bean id's this CamelContext depends up. Multiple bean id's can be separated by comma.",title:"Depends-on",required:!1,deprecated:!1},trace:{kind:"attribute",type:"string",description:"Sets whether tracing is enabled or not.",title:"Trace",required:!1,deprecated:!1},messageHistory:{kind:"attribute",type:"string",defaultValue:"true",description:"Sets whether message history is enabled or not.",title:"Message History",required:!1,deprecated:!1},logMask:{kind:"attribute",type:"string",defaultValue:"false",description:"Sets whether security mask for Logging is enabled or not.",title:"Log Mask",required:!1,deprecated:!1},logExhaustedMessageBody:{kind:"attribute",type:"string",description:"Sets whether to log exhausted message body with message history.",title:"Log Exhausted Message Body",required:!1,deprecated:!1},streamCache:{kind:"attribute",type:"string",description:"Sets whether stream caching is enabled or not.",title:"Stream Cache",required:!1,deprecated:!1},delayer:{kind:"attribute",type:"string",description:"Sets a delay value in millis that a message is delayed at every step it takes in the route path slowing the process down to better observe what is occurring",title:"Delayer",required:!1,deprecated:!1},handleFault:{kind:"attribute",type:"string",description:"Sets whether fault handling is enabled or not (default is disabled).",title:"Handle Fault",required:!1,deprecated:!1},errorHandlerRef:{kind:"attribute",type:"string",description:"Sets the name of the error handler object used to default the error handling strategy",title:"Error Handler Ref",required:!1,deprecated:!1},autoStartup:{kind:"attribute",type:"string",defaultValue:"true",description:"Sets whether the object should automatically start when Camel starts. Important: Currently only routes can be disabled as CamelContexts are always started. Note: When setting auto startup false on CamelContext then that takes precedence and no routes is started. You would need to start CamelContext explicit using the link org.apache.camel.CamelContextstart() method to start the context and then you would need to start the routes manually using link CamelContextstartRoute(String).",title:"Auto Startup",required:!1,deprecated:!1},shutdownEager:{kind:"attribute",type:"string",defaultValue:"true",description:"Whether to shutdown CamelContext eager when Spring is shutting down. This ensure a cleaner shutdown of Camel as dependent bean's are not shutdown at this moment. The bean's will then be shutdown after camelContext.",title:"Shutdown Eager",required:!1,deprecated:!1},registerEndpointIdsFromRoute:{kind:"attribute",type:"string",defaultValue:"false",description:"Sets whether to register endpoints that has id attribute assigned in the Spring registry. This mode is by default false but can be turned on for backwards compatibility.",title:"Register Endpoint Ids From Route",required:!1,deprecated:!0},useMDCLogging:{kind:"attribute",type:"string",description:"Set whether MDC is enabled.",title:"Use M D C Logging",required:!1,deprecated:!1},useDataType:{kind:"attribute",type:"string",description:"Whether to enable using data type on Camel messages. Data type are automatic turned on if: one ore more routes has been explicit configured with input and output types when using rest-dsl with binding turned on Otherwise data type is default off.",title:"Use Data Type",required:!1,deprecated:!1},useBreadcrumb:{kind:"attribute",type:"string",defaultValue:"true",description:"Set whether breadcrumb is enabled.",title:"Use Breadcrumb",required:!1,deprecated:!1},allowUseOriginalMessage:{kind:"attribute",type:"string",description:"Sets whether to allow access to the original message from Camel's error handler or from link org.apache.camel.spi.UnitOfWorkgetOriginalInMessage(). Turning this off can optimize performance as defensive copy of the original message is not needed.",title:"Allow Use Original Message",required:!1,deprecated:!1},runtimeEndpointRegistryEnabled:{kind:"attribute",type:"string",description:"Sets whether org.apache.camel.spi.RuntimeEndpointRegistry is enabled.",title:"Runtime Endpoint Registry Enabled",required:!1,deprecated:!1},managementNamePattern:{kind:"attribute",type:"string",defaultValue:"#name#",description:"The naming pattern for creating the CamelContext management name.",title:"Management Name Pattern",required:!1,deprecated:!1},threadNamePattern:{kind:"attribute",type:"string",defaultValue:"Camel (#camelId#) thread ##counter# - #name#",description:"Sets the thread name pattern used for creating the full thread name. The default pattern is: Camel (camelId) thread counter - name Where camelId is the name of the org.apache.camel.CamelContext and counter is a unique incrementing counter. and name is the regular thread name. You can also use longName is the long thread name which can includes endpoint parameters etc.",title:"Thread Name Pattern",required:!1,deprecated:!1},shutdownRoute:{kind:"attribute",type:"object",defaultValue:"Default",enum:["Default","Defer"],description:"Sets the ShutdownRoute option for routes.",title:"Shutdown Route",required:!1,deprecated:!1},shutdownRunningTask:{kind:"attribute",type:"object",defaultValue:"CompleteCurrentTaskOnly",enum:["CompleteAllTasks","CompleteCurrentTaskOnly"],description:"Sets the ShutdownRunningTask option to use when shutting down a route.",title:"Shutdown Running Task",required:!1,deprecated:!1},lazyLoadTypeConverters:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Sets whether type converters should be loaded lazy",title:"Lazy Load Type Converters",required:!1,deprecated:!0},loadTypeConverters:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Sets whether to load custom type converters by scanning classpath. This can be turned off if you are only using Camel components that does not provide type converters which is needed at runtime. In such situations setting this option to false can speedup starting Camel.",title:"Load Type Converters",required:!1,deprecated:!1},typeConverterStatisticsEnabled:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Sets whether or not type converter statistics is enabled. By default the type converter utilization statistics is disabled. Notice: If enabled then there is a slight performance impact under very heavy load. You can enable/disable the statistics at runtime using the link org.apache.camel.spi.TypeConverterRegistrygetStatistics()setTypeConverterStatisticsEnabled(Boolean) method or from JMX on the org.apache.camel.api.management.mbean.ManagedTypeConverterRegistryMBean mbean.",title:"Type Converter Statistics Enabled",required:!1,deprecated:!1},typeConverterExists:{kind:"attribute",type:"object",defaultValue:"Override",enum:["Fail","Ignore","Override"],description:"What should happen when attempting to add a duplicate type converter. The default behavior is to override the existing.",title:"Type Converter Exists",required:!1,deprecated:!1},typeConverterExistsLoggingLevel:{kind:"attribute",type:"object",defaultValue:"WARN",enum:["DEBUG","ERROR","INFO","OFF","TRACE","WARN"],description:"The logging level to use when logging that a type converter already exists when attempting to add a duplicate type converter. The default logging level is WARN",title:"Type Converter Exists Logging Level",required:!1,deprecated:!1},properties:{kind:"element",type:"object",description:"Configuration of CamelContext properties such as limit of debug logging and other general options.",title:"Properties",required:!1,deprecated:!0},globalOptions:{kind:"element",type:"object",description:"Configuration of CamelContext properties such as limit of debug logging and other general options.",title:"Global Options",required:!1,deprecated:!1},propertyPlaceholder:{kind:"element",type:"object",description:"Configuration of property placeholder",title:"Property Placeholder",required:!1,deprecated:!1},package:{kind:"element",type:"array",description:"Sets the package names to be recursively searched for Java classes which extend org.apache.camel.builder.RouteBuilder to be auto-wired up to the CamelContext as a route. Note that classes are excluded if they are specifically configured in the spring.xml A more advanced configuration can be done using link setPackageScan(org.apache.camel.model.PackageScanDefinition)",title:"Package",required:!1,deprecated:!1},packageScan:{kind:"element",type:"object",description:"Sets the package scanning information. Package scanning allows for the automatic discovery of certain camel classes at runtime for inclusion e.g. org.apache.camel.builder.RouteBuilder implementations",title:"Package Scan",required:!1,deprecated:!1},contextScan:{kind:"element",type:"object",description:"Sets the context scanning (eg Spring's ApplicationContext) information. Context scanning allows for the automatic discovery of Camel routes runtime for inclusion e.g. org.apache.camel.builder.RouteBuilder implementations",title:"Context Scan",required:!1,deprecated:!1},streamCaching:{kind:"element",type:"object",description:"Configuration of stream caching.",title:"Stream Caching",required:!1,deprecated:!1},jmxAgent:{kind:"element",type:"object",description:"Configuration of JMX.",title:"Jmx Agent",required:!1,deprecated:!1},beansFactory:{kind:"null",type:"array",description:"Miscellaneous configurations",title:"Beans Factory",required:!1,deprecated:!1},beans:{kind:"null",type:"array",description:"Miscellaneous configurations",title:"Beans",required:!1,deprecated:!1},defaultServiceCallConfiguration:{kind:"element",type:"object",description:"ServiceCall EIP default configuration",title:"Default Service Call Configuration",required:!1,deprecated:!1},serviceCallConfiguration:{kind:"element",type:"array",description:"ServiceCall EIP configurations",title:"Service Call Configuration",required:!1,deprecated:!1},defaultHystrixConfiguration:{kind:"element",type:"object",description:"Hystrix EIP default configuration",title:"Default Hystrix Configuration",required:!1,deprecated:!1},hystrixConfiguration:{kind:"element",type:"array",description:"Hystrix EIP configurations",title:"Hystrix Configuration",required:!1,deprecated:!1},routeBuilder:{kind:"element",type:"array",description:"Refers to Java RouteBuilder instances to include as routes in this CamelContext.",title:"Route Builder",required:!1,deprecated:!1},routeContextRef:{kind:"element",type:"array",description:"Refers to XML routes to include as routes in this CamelContext.",title:"Route Context Ref",required:!1,deprecated:!1},restContextRef:{kind:"element",type:"array",description:"Refers to XML rest-dsl to include as REST services in this CamelContext.",title:"Rest Context Ref",required:!1,deprecated:!1},threadPoolProfile:{kind:"element",type:"array",description:"Configuration of thread pool profiles.",title:"Thread Pool Profile",required:!1,deprecated:!1},threadPool:{kind:"element",type:"array",description:"Configuration of thread pool",title:"Thread Pool",required:!1,deprecated:!1},endpoint:{kind:"element",type:"array",description:"Configuration of endpoints",title:"Endpoint",required:!1,deprecated:!1},dataFormats:{kind:"element",type:"object",description:"Configuration of data formats.",title:"Data Formats",required:!1,deprecated:!1},transformers:{kind:"element",type:"object",description:"Configuration of transformers.",title:"Transformers",required:!1,deprecated:!1},validators:{kind:"element",type:"object",description:"Configuration of validators.",title:"Validators",required:!1,deprecated:!1},redeliveryPolicyProfile:{kind:"element",type:"array",description:"Configuration of redelivery settings.",title:"Redelivery Policy Profile",required:!1,deprecated:!1},onException:{kind:"element",type:"array",description:"Configuration of error handlers that triggers on exceptions thrown.",title:"On Exception",required:!1,deprecated:!1},onCompletion:{kind:"element",type:"array",description:"Configuration of sub routes to run at the completion of routing.",title:"On Completion",required:!1,deprecated:!1},intercept:{kind:"element",type:"array",description:"Configuration of interceptors.",title:"Intercept",required:!1,deprecated:!1},interceptFrom:{kind:"element",type:"array",description:"Configuration of interceptors that triggers from the beginning of routes.",title:"Intercept From",required:!1,deprecated:!1},interceptSendToEndpoint:{kind:"element",type:"array",description:"Configuration of interceptors that triggers sending messages to endpoints.",title:"Intercept Send To Endpoint",required:!1,deprecated:!1},restConfiguration:{kind:"element",type:"object",description:"Configuration for rest-dsl",title:"Rest Configuration",required:!1,deprecated:!1},rest:{kind:"element",type:"array",description:"Contains the rest services defined using the rest-dsl",title:"Rest",required:!1,deprecated:!1},route:{kind:"element",type:"array",description:"Contains the Camel routes",title:"Route",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id (name) of this CamelContext",title:"Id",required:!1,deprecated:!1}}},choice:{type:"object",title:"Choice",group:"eip,routing",icon:"choice24.png",description:"Routes messages based on a series of predicates",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{whenClauses:{kind:"element",type:"array",description:"Sets the when clauses",title:"When Clauses",required:!1,deprecated:!1},otherwise:{kind:"element",type:"object",description:"Sets the otherwise node",title:"Otherwise",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},circuitBreaker:{type:"object",title:"Circuit Breaker",group:"eip,routing,loadbalance,circuitbreaker",icon:"generic24.png",description:"Circuit break load balancer",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{exception:{kind:"element",type:"array",description:"A list of class names for specific exceptions to monitor. If no exceptions is configured then all exceptions is monitored",title:"Exception",required:!1,deprecated:!1},halfOpenAfter:{kind:"attribute",type:"integer",description:"The timeout in millis to use as threshold to move state from closed to half-open or open state",title:"Half Open After",required:!1,deprecated:!1},threshold:{kind:"attribute",type:"integer",description:"Number of previous failed messages to use as threshold to move state from closed to half-open or open state",title:"Threshold",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},consulServiceDiscovery:{type:"object",title:"Consul Service Discovery",group:"routing,cloud,service-discovery",icon:"generic24.png",description:"",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{url:{kind:"attribute",type:"string",description:"The Consul agent URL",title:"Url",required:!1,deprecated:!1},datacenter:{kind:"attribute",type:"string",description:"The data center",title:"Datacenter",required:!1,deprecated:!1},aclToken:{kind:"attribute",type:"string",
description:"Sets the ACL token to be used with Consul",title:"Acl Token",required:!1,deprecated:!1},userName:{kind:"attribute",type:"string",description:"Sets the username to be used for basic authentication",title:"User Name",required:!1,deprecated:!1},password:{kind:"attribute",type:"string",description:"Sets the password to be used for basic authentication",title:"Password",required:!1,deprecated:!1},connectTimeoutMillis:{kind:"attribute",type:"integer",description:"Connect timeout for OkHttpClient",title:"Connect Timeout Millis",required:!1,deprecated:!1},readTimeoutMillis:{kind:"attribute",type:"integer",description:"Read timeout for OkHttpClient",title:"Read Timeout Millis",required:!1,deprecated:!1},writeTimeoutMillis:{kind:"attribute",type:"integer",description:"Write timeout for OkHttpClient",title:"Write Timeout Millis",required:!1,deprecated:!1},blockSeconds:{kind:"attribute",type:"integer",defaultValue:"10",description:"The seconds to wait for a watch event default 10 seconds",title:"Block Seconds",required:!1,deprecated:!1},properties:{kind:"element",type:"array",description:"Set client properties to use. These properties are specific to what service call implementation are in use. For example if using ribbon then the client properties are define in com.netflix.client.config.CommonClientConfigKey.",title:"Properties",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},consumerTemplate:{type:"object",title:"Consumer Template",group:"spring,configuration",icon:"generic24.png",description:"Configures a ConsumerTemplate",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{maximumCacheSize:{kind:"attribute",type:"integer",description:"Sets a custom maximum cache size to use in the backing cache pools.",title:"Maximum Cache Size",required:!1,deprecated:!1},camelContextId:{kind:"attribute",type:"string",description:"Id of CamelContext to use if there are multiple CamelContexts in the same JVM",title:"Camel Context Id",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},contextScan:{type:"object",title:"Context Scan",group:"configuration",icon:"generic24.png",description:"Scans for Java org.apache.camel.builder.RouteBuilder instances in the context org.apache.camel.spi.Registry.",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{includeNonSingletons:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to include non-singleton beans (prototypes) By default only singleton beans is included in the context scan",title:"Include Non Singletons",required:!1,deprecated:!1},excludes:{kind:"element",type:"array",description:"Exclude finding route builder from these java package names.",title:"Excludes",required:!1,deprecated:!1},includes:{kind:"element",type:"array",description:"Include finding route builder from these java package names.",title:"Includes",required:!1,deprecated:!1}}},convertBodyTo:{type:"object",title:"Convert Body To",group:"eip,transformation",icon:"convertBodyTo24.png",description:"Converts the message body to another type",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{type:{kind:"attribute",type:"string",description:"The java type to convert to",title:"Type",required:!0,deprecated:!1},charset:{kind:"attribute",type:"string",description:"To use a specific charset when converting",title:"Charset",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},customLoadBalancer:{type:"object",title:"Custom Load Balancer",group:"eip,routing,loadbalance",icon:"generic24.png",description:"Custom load balancer",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{ref:{kind:"attribute",type:"string",description:"Refers to the custom load balancer to lookup from the registry",title:"Ref",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},customServiceFilter:{type:"object",title:"Custom Service Filter",group:"routing,cloud,service-filter",icon:"generic24.png",description:"",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{ref:{kind:"attribute",type:"string",description:"Reference of a ServiceFilter",title:"Ref",required:!1,deprecated:!1},properties:{kind:"element",type:"array",description:"Set client properties to use. These properties are specific to what service call implementation are in use. For example if using ribbon then the client properties are define in com.netflix.client.config.CommonClientConfigKey.",title:"Properties",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},defaultLoadBalancer:{type:"object",title:"Default Load Balancer",group:"routing,cloud,load-balancing",icon:"generic24.png",description:"",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{properties:{kind:"element",type:"array",description:"Set client properties to use. These properties are specific to what service call implementation are in use. For example if using ribbon then the client properties are define in com.netflix.client.config.CommonClientConfigKey.",title:"Properties",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},delay:{type:"object",title:"Delay",group:"eip,routing",icon:"generic24.png",description:"Delays processing for a specified length of time",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{expression:{kind:"expression",type:"object",description:"Expression to define how long time to wait (in millis)",title:"Expression",required:!0,deprecated:!1},executorServiceRef:{kind:"attribute",type:"string",description:"Refers to a custom Thread Pool if asyncDelay has been enabled.",title:"Executor Service Ref",required:!1,deprecated:!1},asyncDelayed:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Enables asynchronous delay which means the thread will noy block while delaying.",title:"Async Delayed",required:!1,deprecated:!1},callerRunsWhenRejected:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether or not the caller should run the task when it was rejected by the thread pool. Is by default true",title:"Caller Runs When Rejected",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},description:{type:"object",title:"Description",group:"configuration",icon:"generic24.png",description:"To provide comments about the node.",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{lang:{kind:"attribute",type:"string",description:"Language such as en for english.",title:"Lang",required:!1,deprecated:!1},layoutX:{kind:"attribute",type:"number",description:"Layout position X",title:"Layout X",required:!1,deprecated:!0},layoutY:{kind:"attribute",type:"number",description:"Layout position Y",title:"Layout Y",required:!1,deprecated:!0},layoutWidth:{kind:"attribute",type:"number",description:"Layout width",title:"Layout Width",required:!1,deprecated:!0},layoutHeight:{kind:"attribute",type:"number",description:"Layout height",title:"Layout Height",required:!1,deprecated:!0},text:{kind:"value",type:"string",description:"The description as human readable text",title:"Text",required:!0,deprecated:!1}}},dnsServiceDiscovery:{type:"object",title:"Dns Service Discovery",group:"routing,cloud,service-discovery",icon:"generic24.png",description:"",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{proto:{kind:"attribute",type:"string",defaultValue:"_tcp",description:"The transport protocol of the desired service.",title:"Proto",required:!1,deprecated:!1},domain:{kind:"attribute",type:"string",description:"The domain name;",title:"Domain",required:!1,deprecated:!1},properties:{kind:"element",type:"array",description:"Set client properties to use. These properties are specific to what service call implementation are in use. For example if using ribbon then the client properties are define in com.netflix.client.config.CommonClientConfigKey.",title:"Properties",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},doCatch:{type:"object",title:"Do Catch",group:"error",icon:"generic24.png",description:"Catches exceptions as part of a try catch finally block",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{exception:{kind:"element",type:"array",description:"The exception(s) to catch.",title:"Exception",required:!1,deprecated:!1},onWhen:{kind:"element",type:"object",description:"Sets an additional predicate that should be true before the onCatch is triggered. To be used for fine grained controlling whether a thrown exception should be intercepted by this exception type or not.",title:"On When",required:!1,deprecated:!1},handled:{kind:"expression",type:"object",description:"Sets whether the exchange should be marked as handled or not.",title:"Handled",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},doFinally:{type:"object",title:"Do Finally",group:"error",icon:"generic24.png",description:"Path traversed when a try catch finally block exits",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},doTry:{type:"object",title:"Do Try",group:"error",icon:"generic24.png",description:"Marks the beginning of a try catch finally block",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},dynamicRouter:{type:"object",title:"Dynamic Router",group:"eip,endpoint,routing",icon:"dynamicRouter24.png",description:"Routes messages based on dynamic rules",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{expression:{kind:"expression",type:"object",description:"Expression to call that returns the endpoint(s) to route to in the dynamic routing. Important: The expression will be called in a while loop fashion until the expression returns null which means the dynamic router is finished.",title:"Expression",required:!0,deprecated:!1},uriDelimiter:{kind:"attribute",type:"string",defaultValue:",",description:"Sets the uri delimiter to use",title:"Uri Delimiter",required:!1,deprecated:!1},ignoreInvalidEndpoints:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Ignore the invalidate endpoint exception when try to create a producer with that endpoint",title:"Ignore Invalid Endpoints",required:!1,deprecated:!1},cacheSize:{kind:"attribute",type:"integer",description:"Sets the maximum size used by the org.apache.camel.impl.ProducerCache which is used to cache and reuse producers when using this recipient list when uris are reused.",title:"Cache Size",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},endpoint:{type:"object",title:"Endpoint",group:"spring,configuration,endpoint",icon:"generic24.png",description:"Camel endpoint configuration",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{singleton:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Not in use",title:"Singleton",required:!1,deprecated:!0},uri:{kind:"attribute",type:"string",description:"Sets the URI to use to resolve the endpoint. Notice that additional options can be configured using a series of property.",title:"Uri",required:!0,deprecated:!1},pattern:{kind:"attribute",type:"object",enum:["InOnly","InOptionalOut","InOut","OutIn","OutOnly","OutOptionalIn","RobustInOnly","RobustOutOnly"],description:"Sets the exchange pattern of the endpoint",title:"Pattern",required:!1,deprecated:!0},properties:{kind:"element",type:"array",description:"To configure additional endpoint options using a XML style which is similar as configuring Spring or Blueprint beans.",title:"Properties",required:!0,deprecated:!1},camelContextId:{kind:"attribute",type:"string",description:"Id of CamelContext to use if there are multiple CamelContexts in the same JVM",title:"Camel Context Id",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},enrich:{type:"object",title:"Enrich",group:"eip,transformation",icon:"enrich24.png",description:"Enriches a message with data from a secondary resource",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{expression:{kind:"expression",type:"object",description:"Expression that computes the endpoint uri to use as the resource endpoint to enrich from",title:"Expression",required:!0,deprecated:!1},strategyRef:{kind:"attribute",type:"string",description:"Refers to an AggregationStrategy to be used to merge the reply from the external service into a single outgoing message. By default Camel will use the reply from the external service as outgoing message.",title:"Strategy Ref",required:!1,deprecated:!1},strategyMethodName:{kind:"attribute",type:"string",description:"This option can be used to explicit declare the method name to use when using POJOs as the AggregationStrategy.",title:"Strategy Method Name",required:!1,deprecated:!1},strategyMethodAllowNull:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If this option is false then the aggregate method is not used if there was no data to enrich. If this option is true then null values is used as the oldExchange (when no data to enrich) when using POJOs as the AggregationStrategy.",title:"Strategy Method Allow Null",required:!1,deprecated:!1},aggregateOnException:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If this option is false then the aggregate method is not used if there was an exception thrown while trying to retrieve the data to enrich from the resource. Setting this option to true allows end users to control what to do if there was an exception in the aggregate method. For example to suppress the exception or set a custom message body etc.",title:"Aggregate On Exception",required:!1,deprecated:!1},shareUnitOfWork:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Shares the org.apache.camel.spi.UnitOfWork with the parent and the resource exchange. Enrich will by default not share unit of work between the parent exchange and the resource exchange. This means the resource exchange has its own individual unit of work.",title:"Share Unit Of Work",required:!1,deprecated:!1},cacheSize:{kind:"attribute",type:"integer",description:"Sets the maximum size used by the org.apache.camel.impl.ProducerCache which is used to cache and reuse producer when uris are reused.",title:"Cache Size",required:!1,deprecated:!1},ignoreInvalidEndpoint:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Ignore the invalidate endpoint exception when try to create a producer with that endpoint",title:"Ignore Invalid Endpoint",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},errorHandler:{type:"object",title:"Error Handler",group:"spring,configuration,error",icon:"generic24.png",description:"Error handler settings",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{type:{kind:"attribute",type:"object",defaultValue:"DefaultErrorHandler",enum:["DeadLetterChannel","DefaultErrorHandler","LoggingErrorHandler","NoErrorHandler","TransactionErrorHandler"],description:"The type of the error handler",title:"Type",required:!0,deprecated:!1},deadLetterUri:{kind:"attribute",type:"string",description:"The dead letter endpoint uri for the Dead Letter error handler.",title:"Dead Letter Uri",required:!1,deprecated:!1},deadLetterHandleNewException:{kind:"attribute",type:"string",description:"Whether the dead letter channel should handle (and ignore) any new exception that may been thrown during sending the message to the dead letter endpoint. The default value is true which means any such kind of exception is handled and ignored. Set this to false to let the exception be propagated back on the org.apache.camel.Exchange. This can be used in situations where you use transactions and want to use Camel's dead letter channel to deal with exceptions during routing but if the dead letter channel itself fails because of a new exception being thrown then by setting this to false the new exceptions is propagated back and set on the org.apache.camel.Exchange which allows the transaction to detect the exception and rollback.",title:"Dead Letter Handle New Exception",required:!1,deprecated:!1},level:{kind:"attribute",type:"object",defaultValue:"ERROR",enum:["DEBUG","ERROR","INFO","OFF","TRACE","WARN"],description:"Logging level to use when using the logging error handler type.",title:"Level",required:!1,deprecated:!1},rollbackLoggingLevel:{kind:"attribute",type:"object",defaultValue:"WARN",enum:["DEBUG","ERROR","INFO","OFF","TRACE","WARN"],description:"Sets the logging level to use for logging transactional rollback. This option is default WARN.",title:"Rollback Logging Level",required:!1,deprecated:!1},logName:{kind:"attribute",type:"string",description:"Name of the logger to use for the logging error handler",title:"Log Name",required:!1,deprecated:!1},useOriginalMessage:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Will use the original input message when an org.apache.camel.Exchange is moved to the dead letter queue. Notice: this only applies when all redeliveries attempt have failed and the org.apache.camel.Exchange is doomed for failure. Instead of using the current inprogress org.apache.camel.Exchange IN body we use the original IN body instead. This allows you to store the original input in the dead letter queue instead of the inprogress snapshot of the IN body. For instance if you route transform the IN body during routing and then failed. With the original exchange store in the dead letter queue it might be easier to manually re submit the org.apache.camel.Exchange again as the IN body is the same as when Camel received it. So you should be able to send the org.apache.camel.Exchange to the same input. By default this feature is off.",title:"Use Original Message",required:!1,deprecated:!1},transactionTemplateRef:{kind:"attribute",type:"string",description:"References to the org.springframework.transaction.support.TransactionTemplate to use with the transaction error handler.",title:"Transaction Template Ref",required:!1,deprecated:!1},transactionManagerRef:{kind:"attribute",type:"string",description:"References to the org.springframework.transaction.PlatformTransactionManager to use with the transaction error handler.",title:"Transaction Manager Ref",required:!1,deprecated:!1},onRedeliveryRef:{kind:"attribute",type:"string",description:"Sets a reference to a processor that should be processed before a redelivery attempt. Can be used to change the org.apache.camel.Exchange before its being redelivered.",title:"On Redelivery Ref",required:!1,deprecated:!1},onExceptionOccurredRef:{kind:"attribute",type:"string",description:"Sets a reference to a processor that should be processed just after an exception occurred. Can be used to perform custom logging about the occurred exception at the exact time it happened. Important: Any exception thrown from this processor will be ignored.",title:"On Exception Occurred Ref",required:!1,deprecated:!1},onPrepareFailureRef:{kind:"attribute",type:"string",description:"Sets a reference to a processor to prepare the org.apache.camel.Exchange before handled by the failure processor / dead letter channel. This allows for example to enrich the message before sending to a dead letter queue.",title:"On Prepare Failure Ref",required:!1,deprecated:!1},retryWhileRef:{kind:"attribute",type:"string",description:"Sets a reference to an retry while expression. Will continue retrying until expression evaluates to false.",title:"Retry While Ref",required:!1,deprecated:!1},redeliveryPolicyRef:{kind:"attribute",type:"string",description:"Sets a reference to a RedeliveryPolicy to be used for redelivery settings.",title:"Redelivery Policy Ref",required:!1,deprecated:!1},executorServiceRef:{kind:"attribute",type:"string",description:"Sets a reference to a thread pool to be used by the error handler",title:"Executor Service Ref",required:!1,deprecated:!1},redeliveryPolicy:{kind:"element",type:"object",description:"Sets the redelivery settings",title:"Redelivery Policy",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},etcdServiceDiscovery:{type:"object",title:"Etcd Service Discovery",group:"routing,cloud,service-discovery",icon:"generic24.png",description:"",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{uris:{kind:"attribute",type:"string",description:"The URIs the client can connect to.",title:"Uris",required:!1,deprecated:!1},userName:{kind:"attribute",type:"string",description:"The user name to use for basic authentication.",title:"User Name",required:!1,deprecated:!1},password:{kind:"attribute",type:"string",description:"The password to use for basic authentication.",title:"Password",required:!1,deprecated:!1},timeout:{kind:"attribute",type:"integer",description:"To set the maximum time an action could take to complete.",title:"Timeout",required:!1,deprecated:!1},servicePath:{kind:"attribute",type:"string",defaultValue:"/services/",description:"The path to look for for service discovery",title:"Service Path",required:!1,deprecated:!1},type:{kind:"attribute",type:"string",defaultValue:"on-demand",enum:["on-demand","watch"],description:"To set the discovery type valid values are on-demand and watch.",title:"Type",required:!1,deprecated:!1},properties:{kind:"element",type:"array",description:"Set client properties to use. These properties are specific to what service call implementation are in use. For example if using ribbon then the client properties are define in com.netflix.client.config.CommonClientConfigKey.",title:"Properties",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},export:{type:"object",title:"Export",group:"spring,configuration",icon:"generic24.png",description:"Used for export a service using Spring Remoting to hide the network call using an interface.",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{uri:{kind:"attribute",type:"string",description:"Camel endpoint uri to use a remote transport when calling the service",title:"Uri",required:!0,deprecated:!1},serviceRef:{kind:"attribute",type:"string",description:"Reference to the service name to lookup in the registry.",title:"Service Ref",required:!1,deprecated:!1},serviceInterface:{kind:"attribute",type:"string",description:"Java interfaces to use as facade for the service to be exported",title:"Service Interface",required:!1,deprecated:!1},camelContextId:{kind:"attribute",type:"string",description:"The id of the CamelContext to use if there is multiple CamelContext in the same JVM.",title:"Camel Context Id",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},failover:{type:"object",title:"Failover",group:"eip,routing,loadbalance",icon:"generic24.png",description:"Failover load balancer",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{exception:{kind:"element",type:"array",description:"A list of class names for specific exceptions to monitor. If no exceptions is configured then all exceptions is monitored",title:"Exception",required:!1,deprecated:!1},roundRobin:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether or not the failover load balancer should operate in round robin mode or not. If not then it will always start from the first endpoint when a new message is to be processed. In other words it restart from the top for every message. If round robin is enabled then it keeps state and will continue with the next endpoint in a round robin fashion. You can also enable sticky mode together with round robin if so then it will pick the last known good endpoint to use when starting the load balancing (instead of using the next when starting).",title:"Round Robin",required:!1,deprecated:!1},sticky:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether or not the failover load balancer should operate in sticky mode or not. If not then it will always start from the first endpoint when a new message is to be processed. In other words it restart from the top for every message. If sticky is enabled then it keeps state and will continue with the last known good endpoint. You can also enable sticky mode together with round robin if so then it will pick the last known good endpoint to use when starting the load balancing (instead of using the next when starting).",title:"Sticky",required:!1,deprecated:!1},maximumFailoverAttempts:{kind:"attribute",type:"integer",defaultValue:"-1",description:"A value to indicate after X failover attempts we should exhaust (give up). Use -1 to indicate never give up and continuously try to failover. Use 0 to never failover. And use e.g. 3 to failover at most 3 times before giving up. his option can be used whether or not roundRobin is enabled or not.",title:"Maximum Failover Attempts",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},filter:{type:"object",title:"Filter",group:"eip,routing",icon:"filter24.png",description:"Filter out messages based using a predicate",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{expression:{kind:"expression",type:"object",description:"Expression to determine if the message should be filtered or not. If the expression returns an empty value or false then the message is filtered (dropped) otherwise the message is continued being routed.",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},fluentTemplate:{type:"object",title:"Fluent Template",group:"spring,configuration",icon:"generic24.png",description:"Configures a org.apache.camel.FluentProducerTemplate",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{defaultEndpoint:{kind:"attribute",type:"string",description:"Sets the default endpoint URI used by default for sending message exchanges",title:"Default Endpoint",required:!1,deprecated:!1},maximumCacheSize:{kind:"attribute",type:"integer",description:"Sets a custom maximum cache size to use in the backing cache pools.",title:"Maximum Cache Size",required:!1,deprecated:!1},camelContextId:{kind:"attribute",type:"string",description:"Id of CamelContext to use if there are multiple CamelContexts in the same JVM",title:"Camel Context Id",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},from:{type:"object",title:"From",group:"eip,endpoint,routing",icon:"endpoint24.png",description:"Act as a message source as input to a route",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{uri:{kind:"attribute",type:"string",description:"Sets the URI of the endpoint to use",title:"Uri",required:!0,deprecated:!1},ref:{kind:"attribute",type:"string",description:"Sets the name of the endpoint within the registry (such as the Spring ApplicationContext or JNDI) to use",title:"Ref",required:!1,deprecated:!0},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},globalOption:{type:"object",title:"Global Option",group:"configuration",icon:"generic24.png",description:"Models a string key/value pair for configuring some global options on a Camel context such as max debug log length.",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{key:{kind:"attribute",type:"string",description:"Global option key",title:"Key",required:!0,deprecated:!1},value:{kind:"attribute",type:"string",description:"Global option value",title:"Value",required:!0,deprecated:!1}}},globalOptions:{type:"object",title:"Global Options",group:"configuration",icon:"generic24.png",description:"Models a series of string key/value pairs for configuring some global options on a Camel context such as max debug log length.",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{globalOption:{kind:"element",type:"array",description:"A series of global options as key value pairs",title:"Global Option",required:!1,deprecated:!1}}},healthyServiceFilter:{type:"object",title:"Healthy Service Filter",group:"routing,cloud,service-filter",icon:"generic24.png",description:"",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{properties:{kind:"element",type:"array",description:"Set client properties to use. These properties are specific to what service call implementation are in use. For example if using ribbon then the client properties are define in com.netflix.client.config.CommonClientConfigKey.",title:"Properties",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},hystrix:{type:"object",title:"Hystrix",group:"eip,routing,circuitbreaker",icon:"generic24.png",description:"Hystrix Circuit Breaker EIP",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{hystrixConfiguration:{kind:"element",type:"object",
description:"Configures the Hystrix EIP Use end when configuration is complete to return back to the Hystrix EIP.",title:"Hystrix Configuration",required:!1,deprecated:!1},hystrixConfigurationRef:{kind:"attribute",type:"string",description:"Refers to a Hystrix configuration to use for configuring the Hystrix EIP.",title:"Hystrix Configuration Ref",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},hystrixConfiguration:{type:"object",title:"Hystrix Configuration",group:"eip,routing,circuitbreaker",icon:"generic24.png",description:"Hystrix Circuit Breaker EIP configuration",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{groupKey:{kind:"attribute",type:"string",defaultValue:"CamelHystrix",description:"Sets the group key to use. The default value is CamelHystrix.",title:"Group Key",required:!1,deprecated:!1},threadPoolKey:{kind:"attribute",type:"string",defaultValue:"CamelHystrix",description:"Sets the thread pool key to use. Will by default use the same value as groupKey has been configured to use.",title:"Thread Pool Key",required:!1,deprecated:!1},circuitBreakerEnabled:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to use a HystrixCircuitBreaker or not. If false no circuit-breaker logic will be used and all requests permitted. This is similar in effect to circuitBreakerForceClosed() except that continues tracking metrics and knowing whether it should be open/closed this property results in not even instantiating a circuit-breaker.",title:"Circuit Breaker Enabled",required:!1,deprecated:!1},circuitBreakerErrorThresholdPercentage:{kind:"attribute",type:"integer",defaultValue:"50",description:"Error percentage threshold (as whole number such as 50) at which point the circuit breaker will trip open and reject requests. It will stay tripped for the duration defined in circuitBreakerSleepWindowInMilliseconds; The error percentage this is compared against comes from HystrixCommandMetrics.getHealthCounts().",title:"Circuit Breaker Error Threshold Percentage",required:!1,deprecated:!1},circuitBreakerForceClosed:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If true the HystrixCircuitBreakerallowRequest() will always return true to allow requests regardless of the error percentage from HystrixCommandMetrics.getHealthCounts(). The circuitBreakerForceOpen() property takes precedence so if it set to true this property does nothing.",title:"Circuit Breaker Force Closed",required:!1,deprecated:!1},circuitBreakerForceOpen:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If true the HystrixCircuitBreaker.allowRequest() will always return false causing the circuit to be open (tripped) and reject all requests. This property takes precedence over circuitBreakerForceClosed();",title:"Circuit Breaker Force Open",required:!1,deprecated:!1},circuitBreakerRequestVolumeThreshold:{kind:"attribute",type:"integer",defaultValue:"20",description:"Minimum number of requests in the metricsRollingStatisticalWindowInMilliseconds() that must exist before the HystrixCircuitBreaker will trip. If below this number the circuit will not trip regardless of error percentage.",title:"Circuit Breaker Request Volume Threshold",required:!1,deprecated:!1},circuitBreakerSleepWindowInMilliseconds:{kind:"attribute",type:"integer",defaultValue:"5000",description:"The time in milliseconds after a HystrixCircuitBreaker trips open that it should wait before trying requests again.",title:"Circuit Breaker Sleep Window In Milliseconds",required:!1,deprecated:!1},executionIsolationSemaphoreMaxConcurrentRequests:{kind:"attribute",type:"integer",defaultValue:"20",description:"Number of concurrent requests permitted to HystrixCommand.run(). Requests beyond the concurrent limit will be rejected. Applicable only when executionIsolationStrategy == SEMAPHORE.",title:"Execution Isolation Semaphore Max Concurrent Requests",required:!1,deprecated:!1},executionIsolationStrategy:{kind:"attribute",type:"string",defaultValue:"THREAD",enum:["SEMAPHORE","THREAD"],description:"What isolation strategy HystrixCommand.run() will be executed with. If THREAD then it will be executed on a separate thread and concurrent requests limited by the number of threads in the thread-pool. If SEMAPHORE then it will be executed on the calling thread and concurrent requests limited by the semaphore count.",title:"Execution Isolation Strategy",required:!1,deprecated:!1},executionIsolationThreadInterruptOnTimeout:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether the execution thread should attempt an interrupt (using link Futurecancel) when a thread times out. Applicable only when executionIsolationStrategy() == THREAD.",title:"Execution Isolation Thread Interrupt On Timeout",required:!1,deprecated:!1},executionTimeoutInMilliseconds:{kind:"attribute",type:"integer",defaultValue:"1000",description:"Time in milliseconds at which point the command will timeout and halt execution. If link executionIsolationThreadInterruptOnTimeout == true and the command is thread-isolated the executing thread will be interrupted. If the command is semaphore-isolated and a HystrixObservableCommand that command will get unsubscribed.",title:"Execution Timeout In Milliseconds",required:!1,deprecated:!1},executionTimeoutEnabled:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether the timeout mechanism is enabled for this command",title:"Execution Timeout Enabled",required:!1,deprecated:!1},fallbackIsolationSemaphoreMaxConcurrentRequests:{kind:"attribute",type:"integer",defaultValue:"10",description:"Number of concurrent requests permitted to HystrixCommand.getFallback(). Requests beyond the concurrent limit will fail-fast and not attempt retrieving a fallback.",title:"Fallback Isolation Semaphore Max Concurrent Requests",required:!1,deprecated:!1},fallbackEnabled:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether HystrixCommand.getFallback() should be attempted when failure occurs.",title:"Fallback Enabled",required:!1,deprecated:!1},metricsHealthSnapshotIntervalInMilliseconds:{kind:"attribute",type:"integer",defaultValue:"500",description:"Time in milliseconds to wait between allowing health snapshots to be taken that calculate success and error percentages and affect HystrixCircuitBreaker.isOpen() status. On high-volume circuits the continual calculation of error percentage can become CPU intensive thus this controls how often it is calculated.",title:"Metrics Health Snapshot Interval In Milliseconds",required:!1,deprecated:!1},metricsRollingPercentileBucketSize:{kind:"attribute",type:"integer",defaultValue:"10",description:"Maximum number of values stored in each bucket of the rolling percentile. This is passed into HystrixRollingPercentile inside HystrixCommandMetrics.",title:"Metrics Rolling Percentile Bucket Size",required:!1,deprecated:!1},metricsRollingPercentileEnabled:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether percentile metrics should be captured using HystrixRollingPercentile inside HystrixCommandMetrics.",title:"Metrics Rolling Percentile Enabled",required:!1,deprecated:!1},metricsRollingPercentileWindowInMilliseconds:{kind:"attribute",type:"integer",defaultValue:"10000",description:"Duration of percentile rolling window in milliseconds. This is passed into HystrixRollingPercentile inside HystrixCommandMetrics.",title:"Metrics Rolling Percentile Window In Milliseconds",required:!1,deprecated:!1},metricsRollingPercentileWindowBuckets:{kind:"attribute",type:"integer",defaultValue:"6",description:"Number of buckets the rolling percentile window is broken into. This is passed into HystrixRollingPercentile inside HystrixCommandMetrics.",title:"Metrics Rolling Percentile Window Buckets",required:!1,deprecated:!1},metricsRollingStatisticalWindowInMilliseconds:{kind:"attribute",type:"integer",defaultValue:"10000",description:"This property sets the duration of the statistical rolling window in milliseconds. This is how long metrics are kept for the thread pool. The window is divided into buckets and rolls by those increments.",title:"Metrics Rolling Statistical Window In Milliseconds",required:!1,deprecated:!1},metricsRollingStatisticalWindowBuckets:{kind:"attribute",type:"integer",defaultValue:"10",description:"Number of buckets the rolling statistical window is broken into. This is passed into HystrixRollingNumber inside HystrixCommandMetrics.",title:"Metrics Rolling Statistical Window Buckets",required:!1,deprecated:!1},requestLogEnabled:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether HystrixCommand execution and events should be logged to HystrixRequestLog.",title:"Request Log Enabled",required:!1,deprecated:!1},corePoolSize:{kind:"attribute",type:"integer",defaultValue:"10",description:"Core thread-pool size that gets passed to link java.util.concurrent.ThreadPoolExecutorsetCorePoolSize(int)",title:"Core Pool Size",required:!1,deprecated:!1},maximumSize:{kind:"attribute",type:"integer",defaultValue:"10",description:"Maximum thread-pool size that gets passed to link ThreadPoolExecutorsetMaximumPoolSize(int). This is the maximum amount of concurrency that can be supported without starting to reject HystrixCommands. Please note that this setting only takes effect if you also set allowMaximumSizeToDivergeFromCoreSize",title:"Maximum Size",required:!1,deprecated:!1},keepAliveTime:{kind:"attribute",type:"integer",defaultValue:"1",description:"Keep-alive time in minutes that gets passed to link ThreadPoolExecutorsetKeepAliveTime(long TimeUnit)",title:"Keep Alive Time",required:!1,deprecated:!1},maxQueueSize:{kind:"attribute",type:"integer",defaultValue:"-1",description:"Max queue size that gets passed to BlockingQueue in HystrixConcurrencyStrategy.getBlockingQueue(int) This should only affect the instantiation of a threadpool - it is not eliglible to change a queue size on the fly. For that use queueSizeRejectionThreshold().",title:"Max Queue Size",required:!1,deprecated:!1},queueSizeRejectionThreshold:{kind:"attribute",type:"integer",defaultValue:"5",description:"Queue size rejection threshold is an artificial max size at which rejections will occur even if link maxQueueSize has not been reached. This is done because the link maxQueueSize of a BlockingQueue can not be dynamically changed and we want to support dynamically changing the queue size that affects rejections. This is used by HystrixCommand when queuing a thread for execution.",title:"Queue Size Rejection Threshold",required:!1,deprecated:!1},threadPoolRollingNumberStatisticalWindowInMilliseconds:{kind:"attribute",type:"integer",defaultValue:"10000",description:"Duration of statistical rolling window in milliseconds. This is passed into HystrixRollingNumber inside each HystrixThreadPoolMetrics instance.",title:"Thread Pool Rolling Number Statistical Window In Milliseconds",required:!1,deprecated:!1},threadPoolRollingNumberStatisticalWindowBuckets:{kind:"attribute",type:"integer",defaultValue:"10",description:"Number of buckets the rolling statistical window is broken into. This is passed into HystrixRollingNumber inside each HystrixThreadPoolMetrics instance.",title:"Thread Pool Rolling Number Statistical Window Buckets",required:!1,deprecated:!1},allowMaximumSizeToDivergeFromCoreSize:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Allows the configuration for maximumSize to take effect. That value can then be equal to or higher than coreSize",title:"Allow Maximum Size To Diverge From Core Size",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},idempotentConsumer:{type:"object",title:"Idempotent Consumer",group:"eip,routing",icon:"idempotentConsumer24.png",description:"Filters out duplicate messages",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{expression:{kind:"expression",type:"object",description:"Expression used to calculate the correlation key to use for duplicate check. The Exchange which has the same correlation key is regarded as a duplicate and will be rejected.",title:"Expression",required:!0,deprecated:!1},messageIdRepositoryRef:{kind:"attribute",type:"string",description:"Sets the reference name of the message id repository",title:"Message Id Repository Ref",required:!0,deprecated:!1},eager:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Sets whether to eagerly add the key to the idempotent repository or wait until the exchange is complete. Eager is default enabled.",title:"Eager",required:!1,deprecated:!1},completionEager:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Sets whether to complete the idempotent consumer eager or when the exchange is done. If this option is true to complete eager then the idempotent consumer will trigger its completion when the exchange reached the end of the block of the idempotent consumer pattern. So if the exchange is continued routed after the block ends then whatever happens there does not affect the state. If this option is false (default) to not complete eager then the idempotent consumer will complete when the exchange is done being routed. So if the exchange is continued routed after the block ends then whatever happens there also affect the state. For example if the exchange failed due to an exception then the state of the idempotent consumer will be a rollback.",title:"Completion Eager",required:!1,deprecated:!1},skipDuplicate:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Sets whether to skip duplicates or not. The default behavior is to skip duplicates. A duplicate message would have the Exchange property link org.apache.camel.ExchangeDUPLICATE_MESSAGE set to a link BooleanTRUE value. A none duplicate message will not have this property set.",title:"Skip Duplicate",required:!1,deprecated:!1},removeOnFailure:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Sets whether to remove or keep the key on failure. The default behavior is to remove the key on failure.",title:"Remove On Failure",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},inOnly:{type:"object",title:"In Only",group:"eip,endpoint,routing",icon:"eventMessage24.png",description:"Marks the exchange pattern for the route to one way",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{uri:{kind:"attribute",type:"string",description:"Sets the uri of the endpoint to send to.",title:"Uri",required:!0,deprecated:!1},ref:{kind:"attribute",type:"string",description:"Sets the reference of the endpoint to send to.",title:"Ref",required:!1,deprecated:!0},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},inOut:{type:"object",title:"In Out",group:"eip,endpoint,routing",icon:"requestReply24.png",description:"Marks the exchange pattern for the route to request/reply",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{uri:{kind:"attribute",type:"string",description:"Sets the uri of the endpoint to send to.",title:"Uri",required:!0,deprecated:!1},ref:{kind:"attribute",type:"string",description:"Sets the reference of the endpoint to send to.",title:"Ref",required:!1,deprecated:!0},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},inputType:{type:"object",title:"Input Type",group:"configuration",icon:"generic24.png",description:"Set the expected data type of the input message. If the actual message type is different at runtime camel look for a required Transformer and apply if exists. If validate attribute is true then camel applies Validator as well.",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{urn:{kind:"attribute",type:"string",description:"Set input type URN.",title:"Urn",required:!0,deprecated:!1},validate:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Set if validation is required for this input type.",title:"Validate",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},intercept:{type:"object",title:"Intercept",group:"configuration",icon:"generic24.png",description:"Intercepts a message at each step in the route",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},interceptFrom:{type:"object",title:"Intercept From",group:"configuration",icon:"generic24.png",description:"Intercepts incoming messages",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{uri:{kind:"attribute",type:"string",description:"Intercept incoming messages from the uri or uri pattern. If this option is not configured then all incoming messages is intercepted.",title:"Uri",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},interceptSendToEndpoint:{type:"object",title:"Intercept Send To Endpoint",group:"configuration",icon:"generic24.png",description:"Intercepts messages being sent to an endpoint",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{uri:{kind:"attribute",type:"string",description:"Intercept sending to the uri or uri pattern.",title:"Uri",required:!0,deprecated:!1},skipSendToOriginalEndpoint:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If set to true then the message is not sent to the original endpoint. By default (false) the message is both intercepted and then sent to the original endpoint.",title:"Skip Send To Original Endpoint",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},jmxAgent:{type:"object",title:"Jmx Agent",group:"spring,configuration",icon:"generic24.png",description:"JMX configuration.",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{disabled:{kind:"attribute",type:"string",defaultValue:"false",description:"Disable JMI (default false)",title:"Disabled",required:!1,deprecated:!1},onlyRegisterProcessorWithCustomId:{kind:"attribute",type:"string",defaultValue:"false",description:"Only register processor if a custom id was defined for it.",title:"Only Register Processor With Custom Id",required:!1,deprecated:!1},registryPort:{kind:"attribute",type:"string",defaultValue:"1099",description:"RMI connector registry port (default 1099)",title:"Registry Port",required:!1,deprecated:!1},connectorPort:{kind:"attribute",type:"string",defaultValue:"-1",description:"RMI connector server port (default -1 not used)",title:"Connector Port",required:!1,deprecated:!1},mbeanServerDefaultDomain:{kind:"attribute",type:"string",defaultValue:"org.apache.camel",description:"MBean server default domain name (default org.apache.camel)",title:"Mbean Server Default Domain",required:!1,deprecated:!1},mbeanObjectDomainName:{kind:"attribute",type:"string",defaultValue:"org.apache.camel",description:"MBean object domain name (default org.apache.camel)",title:"Mbean Object Domain Name",required:!1,deprecated:!1},serviceUrlPath:{kind:"attribute",type:"string",defaultValue:"/jmxrmi",description:"JMX Service URL path (default /jmxrmi)",title:"Service Url Path",required:!1,deprecated:!1},createConnector:{kind:"attribute",type:"string",defaultValue:"false",description:"A flag that indicates whether the agent should be created",title:"Create Connector",required:!1,deprecated:!1},usePlatformMBeanServer:{kind:"attribute",type:"string",defaultValue:"true",description:"A flag that indicates whether the platform mbean server should be used",title:"Use Platform M Bean Server",required:!1,deprecated:!1},registerAlways:{kind:"attribute",type:"string",defaultValue:"false",description:"A flag that indicates whether to register mbeans always",title:"Register Always",required:!1,deprecated:!1},registerNewRoutes:{kind:"attribute",type:"string",defaultValue:"false",description:"A flag that indicates whether to register mbeans when starting new routes",title:"Register New Routes",required:!1,deprecated:!1},statisticsLevel:{kind:"attribute",type:"string",defaultValue:"Default",description:"Level of granularity for performance statistics enabled",title:"Statistics Level",required:!1,deprecated:!1},loadStatisticsEnabled:{kind:"attribute",type:"string",defaultValue:"false",description:"A flag that indicates whether Load statistics is enabled",title:"Load Statistics Enabled",required:!1,deprecated:!1},endpointRuntimeStatisticsEnabled:{kind:"attribute",type:"string",defaultValue:"true",description:"A flag that indicates whether endpoint runtime statistics is enabled",title:"Endpoint Runtime Statistics Enabled",required:!1,deprecated:!1},includeHostName:{kind:"attribute",type:"string",defaultValue:"false",description:"A flag that indicates whether to include hostname in JMX MBean names.",title:"Include Host Name",required:!1,deprecated:!1},useHostIPAddress:{kind:"attribute",type:"string",defaultValue:"false",description:"A flag that indicates whether to use hostname or IP Address in the service url.",title:"Use Host I P Address",required:!1,deprecated:!1},mask:{kind:"attribute",type:"string",defaultValue:"true",description:"A flag that indicates whether to remove detected sensitive information (such as passwords) from MBean names and attributes.",title:"Mask",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},kubernetesServiceDiscovery:{type:"object",title:"Kubernetes Service Discovery",group:"routing,cloud,service-discovery",icon:"generic24.png",description:"",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{lookup:{kind:"attribute",type:"string",defaultValue:"environment",enum:["client","dns","environment"],description:"How to perform service lookup. Possible values: client dns environment. When using client then the client queries the kubernetes master to obtain a list of active pods that provides the service and then random (or round robin) select a pod. When using dns the service name is resolved as name.namespace.service.dnsDomain. When using environment then environment variables are used to lookup the service. By default environment is used.",title:"Lookup",required:!1,deprecated:!1},dnsDomain:{kind:"attribute",type:"string",description:"Sets the DNS domain to use for DNS lookup.",title:"Dns Domain",required:!1,deprecated:!1},namespace:{kind:"attribute",type:"string",description:"Sets the namespace to use. Will by default use namespace from the ENV variable KUBERNETES_MASTER.",title:"Namespace",required:!1,deprecated:!1},apiVersion:{kind:"attribute",type:"string",description:"Sets the API version when using client lookup",title:"Api Version",required:!1,deprecated:!1},masterUrl:{kind:"attribute",type:"string",description:"Sets the URL to the master when using client lookup",title:"Master Url",required:!1,deprecated:!1},username:{kind:"attribute",type:"string",description:"Sets the username for authentication when using client lookup",title:"Username",required:!1,deprecated:!1},password:{kind:"attribute",type:"string",description:"Sets the password for authentication when using client lookup",title:"Password",required:!1,deprecated:!1},oauthToken:{kind:"attribute",type:"string",description:"Sets the OAUTH token for authentication (instead of username/password) when using client lookup",title:"Oauth Token",required:!1,deprecated:!1},caCertData:{kind:"attribute",type:"string",description:"Sets the Certificate Authority data when using client lookup",title:"Ca Cert Data",required:!1,deprecated:!1},caCertFile:{kind:"attribute",type:"string",description:"Sets the Certificate Authority data that are loaded from the file when using client lookup",title:"Ca Cert File",required:!1,deprecated:!1},clientCertData:{kind:"attribute",type:"string",description:"Sets the Client Certificate data when using client lookup",title:"Client Cert Data",required:!1,deprecated:!1},clientCertFile:{kind:"attribute",type:"string",description:"Sets the Client Certificate data that are loaded from the file when using client lookup",title:"Client Cert File",required:!1,deprecated:!1},clientKeyAlgo:{kind:"attribute",type:"string",description:"Sets the Client Keystore algorithm such as RSA when using client lookup",title:"Client Key Algo",required:!1,deprecated:!1},clientKeyData:{kind:"attribute",type:"string",description:"Sets the Client Keystore data when using client lookup",title:"Client Key Data",required:!1,deprecated:!1},clientKeyFile:{kind:"attribute",type:"string",description:"Sets the Client Keystore data that are loaded from the file when using client lookup",title:"Client Key File",required:!1,deprecated:!1},clientKeyPassphrase:{kind:"attribute",type:"string",description:"Sets the Client Keystore passphrase when using client lookup",title:"Client Key Passphrase",required:!1,deprecated:!1},trustCerts:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Sets whether to turn on trust certificate check when using client lookup",title:"Trust Certs",required:!1,deprecated:!1},properties:{kind:"element",type:"array",description:"Set client properties to use. These properties are specific to what service call implementation are in use. For example if using ribbon then the client properties are define in com.netflix.client.config.CommonClientConfigKey.",title:"Properties",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},loadBalance:{type:"object",title:"Load Balance",group:"eip,routing",icon:"loadBalance24.png",description:"Balances message processing among a number of nodes",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{loadBalancerType:{kind:"element",type:"object",description:"The load balancer to be used",title:"Load Balancer Type",required:!0,deprecated:!1},inheritErrorHandler:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Sets whether or not to inherit the configured error handler. The default value is true. You can use this to disable using the inherited error handler for a given DSL such as a load balancer where you want to use a custom error handler strategy.",title:"Inherit Error Handler",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},loadBalancerConfiguration:{type:"object",title:"Load Balancer Configuration",group:"routing,cloud,load-balancing",icon:"generic24.png",description:"",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{properties:{kind:"element",type:"array",description:"Set client properties to use. These properties are specific to what service call implementation are in use. For example if using ribbon then the client properties are define in com.netflix.client.config.CommonClientConfigKey.",title:"Properties",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},log:{type:"object",title:"Log",group:"eip,configuration",icon:"log24.png",description:"Logs the defined message to the logger",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{message:{kind:"attribute",type:"string",description:"Sets the log message (uses simple language)",title:"Message",required:!0,deprecated:!1},loggingLevel:{kind:"attribute",type:"object",defaultValue:"INFO",enum:["DEBUG","ERROR","INFO","OFF","TRACE","WARN"],description:"Sets the logging level. The default value is INFO",title:"Logging Level",required:!1,deprecated:!1},logName:{kind:"attribute",type:"string",description:"Sets the name of the logger",title:"Log Name",required:!1,deprecated:!1},marker:{kind:"attribute",type:"string",description:"To use slf4j marker",title:"Marker",required:!1,deprecated:!1},loggerRef:{kind:"attribute",type:"string",description:"To refer to a custom logger instance to lookup from the registry.",title:"Logger Ref",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},loop:{type:"object",title:"Loop",group:"eip,routing",icon:"generic24.png",description:"Processes a message multiple times",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{expression:{kind:"expression",type:"object",description:"Expression to define how many times we should loop. Notice the expression is only evaluated once and should return a number as how many times to loop. A value of zero or negative means no looping. The loop is like a for-loop fashion if you want a while loop then the dynamic router may be a better choice.",title:"Expression",required:!0,deprecated:!1},copy:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If the copy attribute is true a copy of the input Exchange is used for each iteration. That means each iteration will start from a copy of the same message. By default loop will loop the same exchange all over so each iteration may have different message content.",title:"Copy",required:!1,deprecated:!1},doWhile:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Enables the while loop that loops until the predicate evaluates to false or null.",title:"Do While",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},marshal:{type:"object",title:"Marshal",group:"eip,transformation",icon:"marshal24.png",description:"Marshals data into a specified format for transmission over a transport or component",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{dataFormatType:{kind:"element",type:"object",description:"The data format to be used",title:"Data Format Type",
required:!0,deprecated:!1},ref:{kind:"attribute",type:"string",description:"To refer to a custom data format to use as marshaller",title:"Ref",required:!1,deprecated:!0},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},multiServiceDiscovery:{type:"object",title:"Multi Service Discovery",group:"routing,cloud,service-discovery",icon:"generic24.png",description:"",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{serviceDiscoveryConfigurations:{kind:"element",type:"array",description:"List of ServiceDiscovery configuration to use",title:"Service Discovery Configurations",required:!0,deprecated:!1},properties:{kind:"element",type:"array",description:"Set client properties to use. These properties are specific to what service call implementation are in use. For example if using ribbon then the client properties are define in com.netflix.client.config.CommonClientConfigKey.",title:"Properties",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},multiServiceFilter:{type:"object",title:"Multi Service Filter",group:"routing,cloud,service-filter",icon:"generic24.png",description:"",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{serviceFilterConfigurations:{kind:"element",type:"array",description:"List of ServiceFilter configuration to use",title:"Service Filter Configurations",required:!0,deprecated:!1},properties:{kind:"element",type:"array",description:"Set client properties to use. These properties are specific to what service call implementation are in use. For example if using ribbon then the client properties are define in com.netflix.client.config.CommonClientConfigKey.",title:"Properties",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},multicast:{type:"object",title:"Multicast",group:"eip,routing",icon:"multicast24.png",description:"Routes the same message to multiple paths either sequentially or in parallel.",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{parallelProcessing:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If enabled then sending messages to the multicasts occurs concurrently. Note the caller thread will still wait until all messages has been fully processed before it continues. Its only the sending and processing the replies from the multicasts which happens concurrently.",title:"Parallel Processing",required:!1,deprecated:!1},strategyRef:{kind:"attribute",type:"string",description:"Refers to an AggregationStrategy to be used to assemble the replies from the multicasts into a single outgoing message from the Multicast. By default Camel will use the last reply as the outgoing message. You can also use a POJO as the AggregationStrategy",title:"Strategy Ref",required:!1,deprecated:!1},strategyMethodName:{kind:"attribute",type:"string",description:"This option can be used to explicit declare the method name to use when using POJOs as the AggregationStrategy.",title:"Strategy Method Name",required:!1,deprecated:!1},strategyMethodAllowNull:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If this option is false then the aggregate method is not used if there was no data to enrich. If this option is true then null values is used as the oldExchange (when no data to enrich) when using POJOs as the AggregationStrategy",title:"Strategy Method Allow Null",required:!1,deprecated:!1},executorServiceRef:{kind:"attribute",type:"string",description:"Refers to a custom Thread Pool to be used for parallel processing. Notice if you set this option then parallel processing is automatic implied and you do not have to enable that option as well.",title:"Executor Service Ref",required:!1,deprecated:!1},streaming:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If enabled then Camel will process replies out-of-order eg in the order they come back. If disabled Camel will process replies in the same order as defined by the multicast.",title:"Streaming",required:!1,deprecated:!1},stopOnException:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Will now stop further processing if an exception or failure occurred during processing of an org.apache.camel.Exchange and the caused exception will be thrown. Will also stop if processing the exchange failed (has a fault message) or an exception was thrown and handled by the error handler (such as using onException). In all situations the multicast will stop further processing. This is the same behavior as in pipeline which is used by the routing engine. The default behavior is to not stop but continue processing till the end",title:"Stop On Exception",required:!1,deprecated:!1},timeout:{kind:"attribute",type:"integer",defaultValue:"0",description:"Sets a total timeout specified in millis when using parallel processing. If the Multicast hasn't been able to send and process all replies within the given timeframe then the timeout triggers and the Multicast breaks out and continues. Notice if you provide a TimeoutAwareAggregationStrategy then the timeout method is invoked before breaking out. If the timeout is reached with running tasks still remaining certain tasks for which it is difficult for Camel to shut down in a graceful manner may continue to run. So use this option with a bit of care.",title:"Timeout",required:!1,deprecated:!1},onPrepareRef:{kind:"attribute",type:"string",description:"Uses the Processor when preparing the org.apache.camel.Exchange to be send. This can be used to deep-clone messages that should be send or any custom logic needed before the exchange is send.",title:"On Prepare Ref",required:!1,deprecated:!1},shareUnitOfWork:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Shares the org.apache.camel.spi.UnitOfWork with the parent and each of the sub messages. Multicast will by default not share unit of work between the parent exchange and each multicasted exchange. This means each sub exchange has its own individual unit of work.",title:"Share Unit Of Work",required:!1,deprecated:!1},parallelAggregate:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If enabled then the aggregate method on AggregationStrategy can be called concurrently. Notice that this would require the implementation of AggregationStrategy to be implemented as thread-safe. By default this is false meaning that Camel synchronizes the call to the aggregate method. Though in some use-cases this can be used to archive higher performance when the AggregationStrategy is implemented as thread-safe.",title:"Parallel Aggregate",required:!1,deprecated:!1},stopOnAggregateException:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If enabled unwind exceptions occurring at aggregation time to the error handler when parallelProcessing is used. Currently aggregation time exceptions do not stop the route processing when parallelProcessing is used. Enabling this option allows to work around this behavior. The default value is false for the sake of backward compatibility.",title:"Stop On Aggregate Exception",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},onCompletion:{type:"object",title:"On Completion",group:"configuration",icon:"generic24.png",description:"Route to be executed when normal route processing completes",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{mode:{kind:"attribute",type:"object",defaultValue:"AfterConsumer",enum:["AfterConsumer","BeforeConsumer"],description:"Sets the on completion mode. The default value is AfterConsumer",title:"Mode",required:!1,deprecated:!1},onCompleteOnly:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Will only synchronize when the org.apache.camel.Exchange completed successfully (no errors).",title:"On Complete Only",required:!1,deprecated:!1},onFailureOnly:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Will only synchronize when the org.apache.camel.Exchange ended with failure (exception or FAULT message).",title:"On Failure Only",required:!1,deprecated:!1},onWhen:{kind:"element",type:"object",description:"Sets an additional predicate that should be true before the onCompletion is triggered. To be used for fine grained controlling whether a completion callback should be invoked or not",title:"On When",required:!1,deprecated:!1},parallelProcessing:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If enabled then the on completion process will run asynchronously by a separate thread from a thread pool. By default this is false meaning the on completion process will run synchronously using the same caller thread as from the route.",title:"Parallel Processing",required:!1,deprecated:!1},executorServiceRef:{kind:"attribute",type:"string",description:"Refers to a custom Thread Pool to be used for parallel processing. Notice if you set this option then parallel processing is automatic implied and you do not have to enable that option as well.",title:"Executor Service Ref",required:!1,deprecated:!1},useOriginalMessage:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Will use the original input body when an org.apache.camel.Exchange for this on completion. By default this feature is off.",title:"Use Original Message",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},onException:{type:"object",title:"On Exception",group:"error",icon:"generic24.png",description:"Route to be executed when an exception is thrown",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{exception:{kind:"element",type:"array",description:"A set of exceptions to react upon.",title:"Exception",required:!0,deprecated:!1},onWhen:{kind:"element",type:"object",description:"Sets an additional predicate that should be true before the onException is triggered. To be used for fine grained controlling whether a thrown exception should be intercepted by this exception type or not.",title:"On When",required:!1,deprecated:!1},retryWhile:{kind:"expression",type:"object",description:"Sets the retry while predicate. Will continue retrying until predicate returns false.",title:"Retry While",required:!1,deprecated:!1},redeliveryPolicy:{kind:"element",type:"object",description:"Set the RedeliveryPolicy to be used.",title:"Redelivery Policy",required:!1,deprecated:!1},redeliveryPolicyRef:{kind:"attribute",type:"string",description:"Sets a reference to a RedeliveryPolicy to lookup in the org.apache.camel.spi.Registry to be used.",title:"Redelivery Policy Ref",required:!1,deprecated:!1},handled:{kind:"expression",type:"object",description:"Sets whether the exchange should be marked as handled or not.",title:"Handled",required:!1,deprecated:!1},continued:{kind:"expression",type:"object",description:"Sets whether the exchange should handle and continue routing from the point of failure. If this option is enabled then its considered handled as well.",title:"Continued",required:!1,deprecated:!1},onRedeliveryRef:{kind:"attribute",type:"string",description:"Sets a reference to a processor that should be processed before a redelivery attempt. Can be used to change the org.apache.camel.Exchange before its being redelivered.",title:"On Redelivery Ref",required:!1,deprecated:!1},onExceptionOccurredRef:{kind:"attribute",type:"string",description:"Sets a reference to a processor that should be processed just after an exception occurred. Can be used to perform custom logging about the occurred exception at the exact time it happened. Important: Any exception thrown from this processor will be ignored.",title:"On Exception Occurred Ref",required:!1,deprecated:!1},useOriginalMessage:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Will use the original input message when an org.apache.camel.Exchange is moved to the dead letter queue. Notice: this only applies when all redeliveries attempt have failed and the org.apache.camel.Exchange is doomed for failure. Instead of using the current in-progress org.apache.camel.Exchange IN body we use the original IN body instead. This allows you to store the original input in the dead letter queue instead of the in-progress snapshot of the IN body. For instance if you route transform the IN body during routing and then failed. With the original exchange store in the dead letter queue it might be easier to manually re submit the org.apache.camel.Exchange again as the IN body is the same as when Camel received it. So you should be able to send the org.apache.camel.Exchange to the same input. By default this feature is off.",title:"Use Original Message",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},onFallback:{type:"object",title:"On Fallback",group:"eip,routing,circuitbreaker",icon:"generic24.png",description:"Route to be executed when Hystrix EIP executes fallback",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{fallbackViaNetwork:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the fallback goes over the network. If the fallback will go over the network it is another possible point of failure and so it also needs to be wrapped by a HystrixCommand. It is important to execute the fallback command on a separate thread-pool otherwise if the main command were to become latent and fill the thread-pool this would prevent the fallback from running if the two commands share the same pool.",title:"Fallback Via Network",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},optimisticLockRetryPolicy:{type:"object",title:"Optimistic Lock Retry Policy",group:"configuration",icon:"generic24.png",description:"To configure optimistic locking",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{maximumRetries:{kind:"attribute",type:"integer",description:"Sets the maximum number of retries",title:"Maximum Retries",required:!1,deprecated:!1},retryDelay:{kind:"attribute",type:"integer",defaultValue:"50",description:"Sets the delay in millis between retries",title:"Retry Delay",required:!1,deprecated:!1},maximumRetryDelay:{kind:"attribute",type:"integer",defaultValue:"1000",description:"Sets the upper value of retry in millis between retries when using exponential or random backoff",title:"Maximum Retry Delay",required:!1,deprecated:!1},exponentialBackOff:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Enable exponential backoff",title:"Exponential Back Off",required:!1,deprecated:!1},randomBackOff:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Enables random backoff",title:"Random Back Off",required:!1,deprecated:!1}}},otherwise:{type:"object",title:"Otherwise",group:"eip,routing",icon:"generic24.png",description:"Route to be executed when all other choices evaluate to false",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},outputType:{type:"object",title:"Output Type",group:"configuration",icon:"generic24.png",description:"Set the expected data type of the output message. If the actual message type is different at runtime camel look for a required Transformer and apply if exists. If validate attribute is true then camel applies Validator as well.",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{urn:{kind:"attribute",type:"string",description:"Set output type URN.",title:"Urn",required:!0,deprecated:!1},validate:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Set if validation is required for this output type.",title:"Validate",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},packageScan:{type:"object",title:"Package Scan",group:"configuration",icon:"generic24.png",description:"Scans for Java org.apache.camel.builder.RouteBuilder classes in java packages",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{package:{kind:"element",type:"array",description:"Sets the java package names to use for scanning for route builder classes",title:"Package",required:!0,deprecated:!1},excludes:{kind:"element",type:"array",description:"Exclude finding route builder from these java package names.",title:"Excludes",required:!1,deprecated:!1},includes:{kind:"element",type:"array",description:"Include finding route builder from these java package names.",title:"Includes",required:!1,deprecated:!1}}},passThroughServiceFilter:{type:"object",title:"Pass Through Service Filter",group:"routing,cloud,service-filter",icon:"generic24.png",description:"",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{properties:{kind:"element",type:"array",description:"Set client properties to use. These properties are specific to what service call implementation are in use. For example if using ribbon then the client properties are define in com.netflix.client.config.CommonClientConfigKey.",title:"Properties",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},pipeline:{type:"object",title:"Pipeline",group:"eip,routing",icon:"pipeline24.png",description:"Routes the message to a sequence of processors.",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},policy:{type:"object",title:"Policy",group:"configuration",icon:"generic24.png",description:"Defines a policy the route will use",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{ref:{kind:"attribute",type:"string",description:"Sets a reference to use for lookup the policy in the registry.",title:"Ref",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},pollEnrich:{type:"object",title:"Poll Enrich",group:"eip,transformation",icon:"pollEnrich24.png",description:"Enriches messages with data polled from a secondary resource",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{expression:{kind:"expression",type:"object",description:"Expression that computes the endpoint uri to use as the resource endpoint to enrich from",title:"Expression",required:!0,deprecated:!1},timeout:{kind:"attribute",type:"integer",defaultValue:"-1",description:"Timeout in millis when polling from the external service. The timeout has influence about the poll enrich behavior. It basically operations in three different modes: negative value - Waits until a message is available and then returns it. Warning that this method could block indefinitely if no messages are available. 0 - Attempts to receive a message exchange immediately without waiting and returning null if a message exchange is not available yet. positive value - Attempts to receive a message exchange waiting up to the given timeout to expire if a message is not yet available. Returns null if timed out The default value is -1 and therefore the method could block indefinitely and therefore its recommended to use a timeout value",title:"Timeout",required:!1,deprecated:!1},strategyRef:{kind:"attribute",type:"string",description:"Refers to an AggregationStrategy to be used to merge the reply from the external service into a single outgoing message. By default Camel will use the reply from the external service as outgoing message.",title:"Strategy Ref",required:!1,deprecated:!1},strategyMethodName:{kind:"attribute",type:"string",description:"This option can be used to explicit declare the method name to use when using POJOs as the AggregationStrategy.",title:"Strategy Method Name",required:!1,deprecated:!1},strategyMethodAllowNull:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If this option is false then the aggregate method is not used if there was no data to enrich. If this option is true then null values is used as the oldExchange (when no data to enrich) when using POJOs as the AggregationStrategy.",title:"Strategy Method Allow Null",required:!1,deprecated:!1},aggregateOnException:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If this option is false then the aggregate method is not used if there was an exception thrown while trying to retrieve the data to enrich from the resource. Setting this option to true allows end users to control what to do if there was an exception in the aggregate method. For example to suppress the exception or set a custom message body etc.",title:"Aggregate On Exception",required:!1,deprecated:!1},cacheSize:{kind:"attribute",type:"integer",description:"Sets the maximum size used by the org.apache.camel.impl.ConsumerCache which is used to cache and reuse consumers when uris are reused.",title:"Cache Size",required:!1,deprecated:!1},ignoreInvalidEndpoint:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Ignore the invalidate endpoint exception when try to create a producer with that endpoint",title:"Ignore Invalid Endpoint",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},process:{type:"object",title:"Process",group:"eip,endpoint",icon:"process24.png",description:"Calls a Camel processor",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{ref:{kind:"attribute",type:"string",description:"Reference to the Processor to lookup in the registry to use.",title:"Ref",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},properties:{type:"object",title:"Properties",group:"configuration",icon:"generic24.png",description:"A series of key value pair",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{property:{kind:"element",type:"array",description:"A series of properties as key value pairs",title:"Property",required:!1,deprecated:!1}}},propertiesFunction:{type:"object",title:"Properties Function",group:"spring,configuration",icon:"generic24.png",description:"Function to use with properties placeholder",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{ref:{kind:"attribute",type:"string",description:"Reference to the custom properties function to lookup in the registry",title:"Ref",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},propertiesLocation:{type:"object",title:"Properties Location",group:"spring,configuration",icon:"generic24.png",description:"Properties to use with properties placeholder",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{resolver:{kind:"attribute",type:"string",defaultValue:"classpath",description:"The resolver to use to locate the location",title:"Resolver",required:!1,deprecated:!1},path:{kind:"attribute",type:"string",description:"Property locations to use.",title:"Path",required:!0,deprecated:!1},optional:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If the location is optional.",title:"Optional",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},property:{type:"object",title:"Property",group:"configuration",icon:"generic24.png",description:"A key value pair",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{key:{kind:"attribute",type:"string",description:"Property key",title:"Key",required:!0,deprecated:!1},value:{kind:"attribute",type:"string",description:"Property value",title:"Value",required:!0,deprecated:!1}}},propertyPlaceholder:{type:"object",title:"Property Placeholder",group:"spring,configuration",icon:"generic24.png",description:"Properties placeholder",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{location:{kind:"attribute",type:"string",description:"A list of locations to load properties. You can use comma to separate multiple locations. This option will override any default locations and only use the locations from this option.",title:"Location",required:!1,deprecated:!1},encoding:{kind:"attribute",type:"string",description:"Encoding to use when loading properties file from the file system or classpath. If no encoding has been set then the properties files is loaded using ISO-8859-1 encoding (latin-1) as documented by link java.util.Propertiesload(java.io.InputStream)",title:"Encoding",required:!1,deprecated:!1},cache:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether or not to cache loaded properties. The default value is true.",title:"Cache",required:!1,deprecated:!1},ignoreMissingLocation:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to silently ignore if a location cannot be located such as a properties file not found.",title:"Ignore Missing Location",required:!1,deprecated:!1},propertiesResolverRef:{kind:"attribute",type:"string",description:"Reference to a custom PropertiesResolver to be used",title:"Properties Resolver Ref",required:!1,deprecated:!1},propertiesParserRef:{kind:"attribute",type:"string",description:"Reference to a custom PropertiesParser to be used",title:"Properties Parser Ref",required:!1,deprecated:!1},propertyPrefix:{kind:"attribute",type:"string",description:"Optional prefix prepended to property names before resolution.",title:"Property Prefix",required:!1,deprecated:!1},propertySuffix:{kind:"attribute",type:"string",description:"Optional suffix appended to property names before resolution.",title:"Property Suffix",required:!1,deprecated:!1},fallbackToUnaugmentedProperty:{kind:"attribute",type:"boolean",defaultValue:"true",description:"If true first attempt resolution of property name augmented with propertyPrefix and propertySuffix before falling back the plain property name specified. If false only the augmented property name is searched.",title:"Fallback To Unaugmented Property",required:!1,deprecated:!1},defaultFallbackEnabled:{kind:"attribute",type:"boolean",defaultValue:"true",description:"If false the component does not attempt to find a default for the key by looking after the colon separator.",title:"Default Fallback Enabled",required:!1,deprecated:!1},prefixToken:{kind:"attribute",type:"string",defaultValue:"{{",description:"Sets the value of the prefix token used to identify properties to replace. Setting a value of null restores the default token",title:"Prefix Token",required:!1,deprecated:!1},suffixToken:{kind:"attribute",type:"string",defaultValue:"}}",description:"Sets the value of the suffix token used to identify properties to replace. Setting a value of null restores the default token",title:"Suffix Token",required:!1,deprecated:!1},propertiesFunction:{kind:"element",type:"array",description:"List of custom properties function to use.",title:"Properties Function",required:!1,deprecated:!1},propertiesLocation:{kind:"element",type:"array",description:"List of property locations to use.",title:"Properties Location",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},proxy:{type:"object",title:"Proxy",group:"spring,configuration",icon:"generic24.png",description:"To proxy a service call using a interface",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{serviceUrl:{kind:"attribute",type:"string",description:"The camel endpoint uri used to send the message to when calling the service from the interface.",title:"Service Url",required:!1,deprecated:!1},serviceRef:{kind:"attribute",type:"string",description:"The camel endpoint reference used to send the message to when calling the service from the interface.",title:"Service Ref",required:!1,deprecated:!0},serviceInterface:{kind:"attribute",type:"string",description:"Java interfaces to use as facade for the service to be proxied",title:"Service Interface",required:!1,deprecated:!1},camelContextId:{kind:"attribute",type:"string",description:"The id of the CamelContext to use if there is multiple CamelContext in the same JVM.",title:"Camel Context Id",required:!1,deprecated:!1},binding:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Camel parameter binding is enabled by default which will use binding information from the method signature parameters to bind to the Exchange/Message with the following annotations. If disabled then a org.apache.camel.component.bean.CamelInvocationHandler is used.",title:"Binding",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},random:{type:"object",title:"Random",group:"eip,routing,loadbalance",icon:"generic24.png",description:"Random load balancer",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},recipientList:{type:"object",title:"Recipient List",group:"eip,endpoint,routing",icon:"recipientList24.png",description:"Routes messages to a number of dynamically specified recipients (dynamic to)",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{expression:{kind:"expression",type:"object",description:"Expression that returns which endpoints (url) to send the message to (the recipients). If the expression return an empty value then the message is not sent to any recipients.",title:"Expression",required:!0,
deprecated:!1},delimiter:{kind:"attribute",type:"string",defaultValue:",",description:"Delimiter used if the Expression returned multiple endpoints. Can be turned off using the value false. The default value is",title:"Delimiter",required:!1,deprecated:!1},parallelProcessing:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If enabled then sending messages to the recipients occurs concurrently. Note the caller thread will still wait until all messages has been fully processed before it continues. Its only the sending and processing the replies from the recipients which happens concurrently.",title:"Parallel Processing",required:!1,deprecated:!1},strategyRef:{kind:"attribute",type:"string",description:"Sets a reference to the AggregationStrategy to be used to assemble the replies from the recipients into a single outgoing message from the RecipientList. By default Camel will use the last reply as the outgoing message. You can also use a POJO as the AggregationStrategy",title:"Strategy Ref",required:!1,deprecated:!1},strategyMethodName:{kind:"attribute",type:"string",description:"This option can be used to explicit declare the method name to use when using POJOs as the AggregationStrategy.",title:"Strategy Method Name",required:!1,deprecated:!1},strategyMethodAllowNull:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If this option is false then the aggregate method is not used if there was no data to enrich. If this option is true then null values is used as the oldExchange (when no data to enrich) when using POJOs as the AggregationStrategy",title:"Strategy Method Allow Null",required:!1,deprecated:!1},executorServiceRef:{kind:"attribute",type:"string",description:"Refers to a custom Thread Pool to be used for parallel processing. Notice if you set this option then parallel processing is automatic implied and you do not have to enable that option as well.",title:"Executor Service Ref",required:!1,deprecated:!1},stopOnException:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Will now stop further processing if an exception or failure occurred during processing of an org.apache.camel.Exchange and the caused exception will be thrown. Will also stop if processing the exchange failed (has a fault message) or an exception was thrown and handled by the error handler (such as using onException). In all situations the recipient list will stop further processing. This is the same behavior as in pipeline which is used by the routing engine. The default behavior is to not stop but continue processing till the end",title:"Stop On Exception",required:!1,deprecated:!1},ignoreInvalidEndpoints:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Ignore the invalidate endpoint exception when try to create a producer with that endpoint",title:"Ignore Invalid Endpoints",required:!1,deprecated:!1},streaming:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If enabled then Camel will process replies out-of-order eg in the order they come back. If disabled Camel will process replies in the same order as defined by the recipient list.",title:"Streaming",required:!1,deprecated:!1},timeout:{kind:"attribute",type:"integer",defaultValue:"0",description:"Sets a total timeout specified in millis when using parallel processing. If the Recipient List hasn't been able to send and process all replies within the given timeframe then the timeout triggers and the Recipient List breaks out and continues. Notice if you provide a TimeoutAwareAggregationStrategy then the timeout method is invoked before breaking out. If the timeout is reached with running tasks still remaining certain tasks for which it is difficult for Camel to shut down in a graceful manner may continue to run. So use this option with a bit of care.",title:"Timeout",required:!1,deprecated:!1},onPrepareRef:{kind:"attribute",type:"string",description:"Uses the Processor when preparing the org.apache.camel.Exchange to be send. This can be used to deep-clone messages that should be send or any custom logic needed before the exchange is send.",title:"On Prepare Ref",required:!1,deprecated:!1},shareUnitOfWork:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Shares the org.apache.camel.spi.UnitOfWork with the parent and each of the sub messages. Recipient List will by default not share unit of work between the parent exchange and each recipient exchange. This means each sub exchange has its own individual unit of work.",title:"Share Unit Of Work",required:!1,deprecated:!1},cacheSize:{kind:"attribute",type:"integer",description:"Sets the maximum size used by the org.apache.camel.impl.ProducerCache which is used to cache and reuse producers when using this recipient list when uris are reused.",title:"Cache Size",required:!1,deprecated:!1},parallelAggregate:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If enabled then the aggregate method on AggregationStrategy can be called concurrently. Notice that this would require the implementation of AggregationStrategy to be implemented as thread-safe. By default this is false meaning that Camel synchronizes the call to the aggregate method. Though in some use-cases this can be used to archive higher performance when the AggregationStrategy is implemented as thread-safe.",title:"Parallel Aggregate",required:!1,deprecated:!1},stopOnAggregateException:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If enabled unwind exceptions occurring at aggregation time to the error handler when parallelProcessing is used. Currently aggregation time exceptions do not stop the route processing when parallelProcessing is used. Enabling this option allows to work around this behavior. The default value is false for the sake of backward compatibility.",title:"Stop On Aggregate Exception",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},redeliveryPolicy:{type:"object",title:"Redelivery Policy",group:"configuration",icon:"generic24.png",description:"To configure re-delivery for error handling",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{maximumRedeliveries:{kind:"attribute",type:"string",description:"Sets the maximum redeliveries x = redeliver at most x times 0 = no redeliveries -1 = redeliver forever",title:"Maximum Redeliveries",required:!1,deprecated:!1},redeliveryDelay:{kind:"attribute",type:"string",description:"Sets the initial redelivery delay",title:"Redelivery Delay",required:!1,deprecated:!1},asyncDelayedRedelivery:{kind:"attribute",type:"string",description:"Allow synchronous delayed redelivery. The route in particular the consumer's component must support the Asynchronous Routing Engine (e.g. seda).",title:"Async Delayed Redelivery",required:!1,deprecated:!1},backOffMultiplier:{kind:"attribute",type:"string",description:"Sets the back off multiplier",title:"Back Off Multiplier",required:!1,deprecated:!1},useExponentialBackOff:{kind:"attribute",type:"string",description:"Turn on exponential backk off",title:"Use Exponential Back Off",required:!1,deprecated:!1},collisionAvoidanceFactor:{kind:"attribute",type:"string",description:"Sets the collision avoidance factor",title:"Collision Avoidance Factor",required:!1,deprecated:!1},useCollisionAvoidance:{kind:"attribute",type:"string",description:"Turn on collision avoidance.",title:"Use Collision Avoidance",required:!1,deprecated:!1},maximumRedeliveryDelay:{kind:"attribute",type:"string",description:"Sets the maximum delay between redelivery",title:"Maximum Redelivery Delay",required:!1,deprecated:!1},retriesExhaustedLogLevel:{kind:"attribute",type:"object",enum:["DEBUG","ERROR","INFO","OFF","TRACE","WARN"],description:"Sets the logging level to use when retries has exhausted",title:"Retries Exhausted Log Level",required:!1,deprecated:!1},retryAttemptedLogLevel:{kind:"attribute",type:"object",enum:["DEBUG","ERROR","INFO","OFF","TRACE","WARN"],description:"Sets the logging level to use for logging retry attempts",title:"Retry Attempted Log Level",required:!1,deprecated:!1},logRetryAttempted:{kind:"attribute",type:"string",description:"Sets whether retry attempts should be logged or not. Can be used to include or reduce verbose.",title:"Log Retry Attempted",required:!1,deprecated:!1},logStackTrace:{kind:"attribute",type:"string",description:"Sets whether stack traces should be logged. Can be used to include or reduce verbose.",title:"Log Stack Trace",required:!1,deprecated:!1},logRetryStackTrace:{kind:"attribute",type:"string",description:"Sets whether stack traces should be logged when an retry attempt failed. Can be used to include or reduce verbose.",title:"Log Retry Stack Trace",required:!1,deprecated:!1},logHandled:{kind:"attribute",type:"string",description:"Sets whether handled exceptions should be logged or not. Can be used to include or reduce verbose.",title:"Log Handled",required:!1,deprecated:!1},logNewException:{kind:"attribute",type:"string",description:"Sets whether new exceptions should be logged or not. Can be used to include or reduce verbose. A new exception is an exception that was thrown while handling a previous exception.",title:"Log New Exception",required:!1,deprecated:!1},logContinued:{kind:"attribute",type:"string",description:"Sets whether continued exceptions should be logged or not. Can be used to include or reduce verbose.",title:"Log Continued",required:!1,deprecated:!1},logExhausted:{kind:"attribute",type:"string",description:"Sets whether exhausted exceptions should be logged or not. Can be used to include or reduce verbose.",title:"Log Exhausted",required:!1,deprecated:!1},logExhaustedMessageHistory:{kind:"attribute",type:"string",description:"Sets whether exhausted exceptions should be logged including message history or not (supports property placeholders). Can be used to include or reduce verbose.",title:"Log Exhausted Message History",required:!1,deprecated:!1},logExhaustedMessageBody:{kind:"attribute",type:"string",description:"Sets whether exhausted message body should be logged including message history or not (supports property placeholders). Can be used to include or reduce verbose. Requires logExhaustedMessageHistory to be enabled.",title:"Log Exhausted Message Body",required:!1,deprecated:!1},disableRedelivery:{kind:"attribute",type:"string",description:"Disables redelivery (same as setting maximum redeliveries to 0)",title:"Disable Redelivery",required:!1,deprecated:!1},delayPattern:{kind:"attribute",type:"string",description:"Sets the delay pattern with delay intervals.",title:"Delay Pattern",required:!1,deprecated:!1},allowRedeliveryWhileStopping:{kind:"attribute",type:"string",description:"Controls whether to allow redelivery while stopping/shutting down a route that uses error handling.",title:"Allow Redelivery While Stopping",required:!1,deprecated:!1},exchangeFormatterRef:{kind:"attribute",type:"string",description:"Sets the reference of the instance of org.apache.camel.spi.ExchangeFormatter to generate the log message from exchange.",title:"Exchange Formatter Ref",required:!1,deprecated:!1}}},redeliveryPolicyProfile:{type:"object",title:"Redelivery Policy Profile",group:"spring,configuration",icon:"generic24.png",description:"Configuration of redelivery policy.",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{maximumRedeliveries:{kind:"attribute",type:"string",description:"Sets the maximum number of times a message exchange will be redelivered. Setting a negative value will retry forever.",title:"Maximum Redeliveries",required:!1,deprecated:!1},redeliveryDelay:{kind:"attribute",type:"string",defaultValue:"1000",description:"Sets the maximum redelivery delay. Use -1 if you wish to have no maximum",title:"Redelivery Delay",required:!1,deprecated:!1},asyncDelayedRedelivery:{kind:"attribute",type:"string",defaultValue:"false",description:"Sets whether asynchronous delayed redelivery is allowed. This is disabled by default. When enabled it allows Camel to schedule a future task for delayed redelivery which prevents current thread from blocking while waiting. Exchange which is transacted will however always use synchronous delayed redelivery because the transaction must execute in the same thread context.",title:"Async Delayed Redelivery",required:!1,deprecated:!1},backOffMultiplier:{kind:"attribute",type:"string",defaultValue:"2",description:"Sets the multiplier used to increase the delay between redeliveries if useExponentialBackOff is enabled",title:"Back Off Multiplier",required:!1,deprecated:!1},useExponentialBackOff:{kind:"attribute",type:"string",defaultValue:"false",description:"Enables/disables exponential backoff using the backOffMultiplier to increase the time between retries",title:"Use Exponential Back Off",required:!1,deprecated:!1},collisionAvoidanceFactor:{kind:"attribute",type:"string",defaultValue:"0.15",description:"Sets the factor used for collision avoidance if enabled via useCollisionAvoidance.",title:"Collision Avoidance Factor",required:!1,deprecated:!1},useCollisionAvoidance:{kind:"attribute",type:"string",defaultValue:"false",description:"Enables/disables collision avoidance which adds some randomization to the backoff timings to reduce contention probability",title:"Use Collision Avoidance",required:!1,deprecated:!1},maximumRedeliveryDelay:{kind:"attribute",type:"string",defaultValue:"60000",description:"Sets the maximum redelivery delay. Use -1 if you wish to have no maximum",title:"Maximum Redelivery Delay",required:!1,deprecated:!1},retriesExhaustedLogLevel:{kind:"attribute",type:"object",defaultValue:"ERROR",enum:["DEBUG","ERROR","INFO","OFF","TRACE","WARN"],description:"Sets the logging level to use for log messages when retries have been exhausted.",title:"Retries Exhausted Log Level",required:!1,deprecated:!1},retryAttemptedLogLevel:{kind:"attribute",type:"object",defaultValue:"DEBUG",enum:["DEBUG","ERROR","INFO","OFF","TRACE","WARN"],description:"Sets the logging level to use for log messages when retries are attempted.",title:"Retry Attempted Log Level",required:!1,deprecated:!1},logRetryAttempted:{kind:"attribute",type:"string",defaultValue:"true",description:"Sets whether to log retry attempts",title:"Log Retry Attempted",required:!1,deprecated:!1},logStackTrace:{kind:"attribute",type:"string",defaultValue:"true",description:"Sets whether stack traces should be logged or not",title:"Log Stack Trace",required:!1,deprecated:!1},logRetryStackTrace:{kind:"attribute",type:"string",defaultValue:"false",description:"Sets whether stack traces should be logged or not",title:"Log Retry Stack Trace",required:!1,deprecated:!1},logHandled:{kind:"attribute",type:"string",defaultValue:"false",description:"Sets whether errors should be logged even if its handled",title:"Log Handled",required:!1,deprecated:!1},logContinued:{kind:"attribute",type:"string",defaultValue:"false",description:"Sets whether errors should be logged even if its continued",title:"Log Continued",required:!1,deprecated:!1},logExhausted:{kind:"attribute",type:"string",defaultValue:"true",description:"Sets whether exhausted exceptions should be logged or not",title:"Log Exhausted",required:!1,deprecated:!1},logExhaustedMessageHistory:{kind:"attribute",type:"string",defaultValue:"false",description:"Sets whether to log exhausted errors including message history",title:"Log Exhausted Message History",required:!1,deprecated:!1},disableRedelivery:{kind:"attribute",type:"string",defaultValue:"false",description:"Disables redelivery by setting maximum redeliveries to 0.",title:"Disable Redelivery",required:!1,deprecated:!1},delayPattern:{kind:"attribute",type:"string",description:"Sets an optional delay pattern to use instead of fixed delay.",title:"Delay Pattern",required:!1,deprecated:!1},allowRedeliveryWhileStopping:{kind:"attribute",type:"string",defaultValue:"true",description:"Controls whether to allow redelivery while stopping/shutting down a route that uses error handling.",title:"Allow Redelivery While Stopping",required:!1,deprecated:!1},exchangeFormatterRef:{kind:"attribute",type:"string",description:"Sets the reference of the instance of org.apache.camel.spi.ExchangeFormatter to generate the log message from exchange.",title:"Exchange Formatter Ref",required:!1,deprecated:!1},camelContextId:{kind:"attribute",type:"string",description:"Id of CamelContext to use if there are multiple CamelContexts in the same JVM",title:"Camel Context Id",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},removeHeader:{type:"object",title:"Remove Header",group:"eip,transformation",icon:"generic24.png",description:"Removes a named header from the message",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{headerName:{kind:"attribute",type:"string",description:"Name of header to remove",title:"Header Name",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},removeHeaders:{type:"object",title:"Remove Headers",group:"eip,transformation",icon:"generic24.png",description:"Removes message headers whose name matches a specified pattern",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{pattern:{kind:"attribute",type:"string",description:"Name or pattern of headers to remove",title:"Pattern",required:!0,deprecated:!1},excludePattern:{kind:"attribute",type:"string",description:"Name or patter of headers to not remove",title:"Exclude Pattern",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},removeProperties:{type:"object",title:"Remove Properties",group:"eip,transformation",icon:"generic24.png",description:"Removes message exchange properties whose name matches a specified pattern",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{pattern:{kind:"attribute",type:"string",description:"Name or pattern of properties to remove",title:"Pattern",required:!0,deprecated:!1},excludePattern:{kind:"attribute",type:"string",description:"Name or pattern of properties to not remove",title:"Exclude Pattern",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},removeProperty:{type:"object",title:"Remove Property",group:"eip,transformation",icon:"generic24.png",description:"Removes a named property from the message exchange",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{propertyName:{kind:"attribute",type:"string",description:"Name of property to remove",title:"Property Name",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},resequence:{type:"object",title:"Resequence",group:"eip,routing",icon:"resequence24.png",description:"Resequences (re-order) messages based on an expression",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{expression:{kind:"expression",type:"object",description:"Expression to use for re-ordering the messages such as a header with a sequence number",title:"Expression",required:!0,deprecated:!1},resequencerConfig:{kind:"element",type:"object",description:"To configure the resequencer in using either batch or stream configuration. Will by default use batch configuration.",title:"Resequencer Config",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},ribbonLoadBalancer:{type:"object",title:"Ribbon Load Balancer",group:"routing,cloud,load-balancing",icon:"generic24.png",description:"",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{namespace:{kind:"attribute",type:"string",description:"The namespace",title:"Namespace",required:!1,deprecated:!1},username:{kind:"attribute",type:"string",description:"The username",title:"Username",required:!1,deprecated:!1},password:{kind:"attribute",type:"string",description:"The password",title:"Password",required:!1,deprecated:!1},clientName:{kind:"attribute",type:"string",description:"Sets the Ribbon client name",title:"Client Name",required:!1,deprecated:!1},properties:{kind:"element",type:"array",description:"Set client properties to use. These properties are specific to what service call implementation are in use. For example if using ribbon then the client properties are define in com.netflix.client.config.CommonClientConfigKey.",title:"Properties",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},rollback:{type:"object",title:"Rollback",group:"eip,routing",icon:"generic24.png",description:"Forces a rollback by stopping routing the message",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{markRollbackOnly:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Mark the transaction for rollback only (cannot be overruled to commit)",title:"Mark Rollback Only",required:!1,deprecated:!1},markRollbackOnlyLast:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Mark only last sub transaction for rollback only. When using sub transactions (if the transaction manager support this)",title:"Mark Rollback Only Last",required:!1,deprecated:!1},message:{kind:"attribute",type:"string",description:"Message to use in rollback exception",title:"Message",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},roundRobin:{type:"object",title:"Round Robin",group:"eip,routing,loadbalance",icon:"generic24.png",description:"Round robin load balancer",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},route:{type:"object",title:"Route",group:"configuration",icon:"route24.png",description:"A Camel route",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{group:{kind:"attribute",type:"string",description:"The group that this route belongs to; could be the name of the RouteBuilder class or be explicitly configured in the XML. May be null.",title:"Group",required:!1,deprecated:!1},streamCache:{kind:"attribute",type:"string",description:"Whether stream caching is enabled on this route.",title:"Stream Cache",required:!1,deprecated:!1},trace:{kind:"attribute",type:"string",description:"Whether tracing is enabled on this route.",title:"Trace",required:!1,deprecated:!1},messageHistory:{kind:"attribute",type:"string",defaultValue:"true",description:"Whether message history is enabled on this route.",title:"Message History",required:!1,deprecated:!1},logMask:{kind:"attribute",type:"string",defaultValue:"false",description:"Whether security mask for Logging is enabled on this route.",title:"Log Mask",required:!1,deprecated:!1},handleFault:{kind:"attribute",type:"string",description:"Whether handle fault is enabled on this route.",title:"Handle Fault",required:!1,deprecated:!1},delayer:{kind:"attribute",type:"string",description:"Whether to slow down processing messages by a given delay in msec.",title:"Delayer",required:!1,deprecated:!1},autoStartup:{kind:"attribute",type:"string",defaultValue:"true",description:"Whether to auto start this route",title:"Auto Startup",required:!1,deprecated:!1},startupOrder:{kind:"attribute",type:"integer",description:"To configure the ordering of the routes being started",title:"Startup Order",required:!1,deprecated:!1},errorHandlerRef:{kind:"attribute",type:"string",description:"Sets the bean ref name of the error handler builder to use on this route",title:"Error Handler Ref",required:!1,deprecated:!1},routePolicyRef:{kind:"attribute",type:"string",description:"Reference to custom org.apache.camel.spi.RoutePolicy to use by the route. Multiple policies can be configured by separating values using comma.",title:"Route Policy Ref",required:!1,deprecated:!1},shutdownRoute:{kind:"attribute",type:"object",enum:["Default","Defer"],description:"To control how to shutdown the route.",title:"Shutdown Route",required:!1,deprecated:!1},shutdownRunningTask:{kind:"attribute",type:"object",enum:["CompleteCurrentTaskOnly","CompleteAllTasks"],description:"To control how to shutdown the route.",title:"Shutdown Running Task",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},routeBuilder:{type:"object",title:"Route Builder",group:"configuration",icon:"generic24.png",description:"To refer to a Java org.apache.camel.builder.RouteBuilder instance to use.",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{ref:{kind:"attribute",type:"string",description:"Reference to the route builder instance",title:"Ref",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},routeContext:{type:"object",title:"Route Context",group:"spring,configuration,routing",icon:"generic24.png",description:"Configuration of routes using XML",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{route:{kind:"element",type:"array",description:"Contains the Camel routes",title:"Route",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},routeContextRef:{type:"object",title:"Route Context Ref",group:"configuration",icon:"generic24.png",description:"To refer to an XML file with routes defined using the xml-dsl",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{ref:{kind:"attribute",type:"string",description:"Reference to the routes in the xml dsl",title:"Ref",required:!0,deprecated:!1}}},routes:{type:"object",title:"Routes",group:"configuration",icon:"generic24.png",description:"A series of Camel routes",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{routes:{kind:"element",type:"array",description:"Contains the Camel routes",title:"Routes",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},routingSlip:{type:"object",title:"Routing Slip",group:"eip,endpoint,routing",icon:"routingSlip24.png",description:"Routes a message through a series of steps that are pre-determined (the slip)",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{expression:{kind:"expression",type:"object",description:"Expression to define the routing slip which defines which endpoints to route the message in a pipeline style. Notice the expression is evaluated once if you want a more dynamic style then the dynamic router eip is a better choice.",title:"Expression",required:!0,deprecated:!1},uriDelimiter:{kind:"attribute",type:"string",defaultValue:",",description:"Sets the uri delimiter to use",title:"Uri Delimiter",required:!1,deprecated:!1},ignoreInvalidEndpoints:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Ignore the invalidate endpoint exception when try to create a producer with that endpoint",title:"Ignore Invalid Endpoints",required:!1,deprecated:!1},cacheSize:{kind:"attribute",type:"integer",description:"Sets the maximum size used by the org.apache.camel.impl.ProducerCache which is used to cache and reuse producers when using this recipient list when uris are reused.",title:"Cache Size",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},sample:{type:"object",title:"Sample",group:"eip,routing",icon:"generic24.png",description:"Extract a sample of the messages passing through a route",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{samplePeriod:{kind:"attribute",type:"integer",defaultValue:"1",description:"Sets the sample period during which only a single Exchange will pass through.",title:"Sample Period",required:!1,deprecated:!1},messageFrequency:{kind:"attribute",type:"integer",description:"Sets the sample message count which only a single Exchange will pass through after this many received.",title:"Message Frequency",required:!1,deprecated:!1},units:{kind:"attribute",type:"object",defaultValue:"SECONDS",enum:["DAYS","HOURS","MICROSECONDS","MILLISECONDS","MINUTES","NANOSECONDS","SECONDS"],description:"Sets the time units for the sample period defaulting to seconds.",title:"Units",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},script:{type:"object",title:"Script",group:"eip,transformation",icon:"generic24.png",description:"Executes a script from a language which does not change the message body.",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{expression:{kind:"expression",type:"object",description:"Expression to return the transformed message body (the new message body to use)",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},serviceCall:{type:"object",title:"Service Call",group:"eip,routing",icon:"generic24.png",description:"To call remote services",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{name:{kind:"attribute",type:"string",description:"Sets the name of the service to use",title:"Name",required:!0,deprecated:!1},uri:{kind:"attribute",type:"string",description:"The uri of the endpoint to send to. The uri can be dynamic computed using the org.apache.camel.language.simple.SimpleLanguage expression.",title:"Uri",required:!1,deprecated:!1},component:{kind:"attribute",type:"string",
defaultValue:"http4",description:"The component to use.",title:"Component",required:!1,deprecated:!1},pattern:{kind:"attribute",type:"object",enum:["InOnly","InOptionalOut","InOut","OutIn","OutOnly","OutOptionalIn","RobustInOnly","RobustOutOnly"],description:"Sets the optional ExchangePattern used to invoke this endpoint",title:"Pattern",required:!1,deprecated:!1},configurationRef:{kind:"attribute",type:"string",description:"Refers to a ServiceCall configuration to use",title:"Configuration Ref",required:!1,deprecated:!1},serviceDiscoveryRef:{kind:"attribute",type:"string",description:"Sets a reference to a custom ServiceDiscovery to use.",title:"Service Discovery Ref",required:!1,deprecated:!1},serviceFilterRef:{kind:"attribute",type:"string",description:"Sets a reference to a custom ServiceFilter to use.",title:"Service Filter Ref",required:!1,deprecated:!1},serviceChooserRef:{kind:"attribute",type:"string",description:"Sets a reference to a custom ServiceChooser to use.",title:"Service Chooser Ref",required:!1,deprecated:!1},loadBalancerRef:{kind:"attribute",type:"string",description:"Sets a reference to a custom ServiceLoadBalancer to use.",title:"Load Balancer Ref",required:!1,deprecated:!1},expressionRef:{kind:"attribute",type:"string",description:"Set a reference to a custom Expression to use.",title:"Expression Ref",required:!1,deprecated:!1},serviceDiscoveryConfiguration:{kind:"element",type:"object",description:"Configures the ServiceDiscovery using the given configuration.",title:"Service Discovery Configuration",required:!0,deprecated:!1},serviceFilterConfiguration:{kind:"element",type:"object",description:"Configures the ServiceFilter using the given configuration.",title:"Service Filter Configuration",required:!0,deprecated:!1},loadBalancerConfiguration:{kind:"element",type:"object",description:"Configures the LoadBalancer using the given configuration.",title:"Load Balancer Configuration",required:!0,deprecated:!1},expressionConfiguration:{kind:"element",type:"object",description:"Configures the Expression using the given configuration.",title:"Expression Configuration",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},serviceCallConfiguration:{type:"object",title:"Service Call Configuration",group:"routing,cloud",icon:"generic24.png",description:"Remote service call configuration",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{uri:{kind:"attribute",type:"string",description:"The uri of the endpoint to send to. The uri can be dynamic computed using the org.apache.camel.language.simple.SimpleLanguage expression.",title:"Uri",required:!1,deprecated:!1},component:{kind:"attribute",type:"string",defaultValue:"http4",description:"The component to use.",title:"Component",required:!1,deprecated:!1},pattern:{kind:"attribute",type:"object",enum:["InOnly","InOptionalOut","InOut","OutIn","OutOnly","OutOptionalIn","RobustInOnly","RobustOutOnly"],description:"Sets the optional ExchangePattern used to invoke this endpoint",title:"Pattern",required:!1,deprecated:!1},serviceDiscoveryRef:{kind:"attribute",type:"string",description:"Sets a reference to a custom ServiceDiscovery to use.",title:"Service Discovery Ref",required:!1,deprecated:!1},serviceFilterRef:{kind:"attribute",type:"string",description:"Sets a reference to a custom ServiceFilter to use.",title:"Service Filter Ref",required:!1,deprecated:!1},serviceChooserRef:{kind:"attribute",type:"string",description:"Sets a reference to a custom ServiceChooser to use.",title:"Service Chooser Ref",required:!1,deprecated:!1},loadBalancerRef:{kind:"attribute",type:"string",description:"Sets a reference to a custom ServiceLoadBalancer to use.",title:"Load Balancer Ref",required:!1,deprecated:!1},expressionRef:{kind:"attribute",type:"string",description:"Set a reference to a custom Expression to use.",title:"Expression Ref",required:!1,deprecated:!1},serviceDiscoveryConfiguration:{kind:"element",type:"object",description:"Configures the ServiceDiscovery using the given configuration.",title:"Service Discovery Configuration",required:!0,deprecated:!1},serviceFilterConfiguration:{kind:"element",type:"object",description:"Configures the ServiceFilter using the given configuration.",title:"Service Filter Configuration",required:!0,deprecated:!1},loadBalancerConfiguration:{kind:"element",type:"object",description:"Configures theL oadBalancer using the given configuration.",title:"Load Balancer Configuration",required:!0,deprecated:!1},expressionConfiguration:{kind:"element",type:"object",description:"Configures the Expression using the given configuration.",title:"Expression Configuration",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},serviceChooserConfiguration:{type:"object",title:"Service Chooser Configuration",group:"routing,cloud,service-discovery",icon:"generic24.png",description:"",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{properties:{kind:"element",type:"array",description:"Set client properties to use. These properties are specific to what service call implementation are in use. For example if using ribbon then the client properties are define in com.netflix.client.config.CommonClientConfigKey.",title:"Properties",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},serviceDiscoveryConfiguration:{type:"object",title:"Service Discovery Configuration",group:"routing,cloud,service-discovery",icon:"generic24.png",description:"",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{properties:{kind:"element",type:"array",description:"Set client properties to use. These properties are specific to what service call implementation are in use. For example if using ribbon then the client properties are define in com.netflix.client.config.CommonClientConfigKey.",title:"Properties",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},serviceExpression:{type:"object",title:"Service Expression",group:"routing,cloud",icon:"generic24.png",description:"",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{properties:{kind:"element",type:"array",description:"Set client properties to use. These properties are specific to what service call implementation are in use. For example if using ribbon then the client properties are define in com.netflix.client.config.CommonClientConfigKey.",title:"Properties",required:!1,deprecated:!1},hostHeader:{kind:"attribute",type:"string",defaultValue:"CamelServiceCallServiceHost",description:"The header that holds the service host information default ServiceCallConstants.SERVICE_HOST",title:"Host Header",required:!1,deprecated:!1},portHeader:{kind:"attribute",type:"string",defaultValue:"CamelServiceCallServicePort",description:"The header that holds the service port information default ServiceCallConstants.SERVICE_PORT",title:"Port Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},serviceFilterConfiguration:{type:"object",title:"Service Filter Configuration",group:"routing,cloud,service-discovery",icon:"generic24.png",description:"",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{properties:{kind:"element",type:"array",description:"Set client properties to use. These properties are specific to what service call implementation are in use. For example if using ribbon then the client properties are define in com.netflix.client.config.CommonClientConfigKey.",title:"Properties",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},setBody:{type:"object",title:"Set Body",group:"eip,transformation",icon:"setBody24.png",description:"Sets the contents of the message body",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{expression:{kind:"expression",type:"object",description:"Expression that returns the new body to use",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},setExchangePattern:{type:"object",title:"Set Exchange Pattern",group:"configuration",icon:"generic24.png",description:"Sets the exchange pattern on the message exchange",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{pattern:{kind:"attribute",type:"object",enum:["InOnly","InOptionalOut","InOut","OutIn","OutOnly","OutOptionalIn","RobustInOnly","RobustOutOnly"],description:"Sets the new exchange pattern of the Exchange to be used from this point forward",title:"Pattern",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},setFaultBody:{type:"object",title:"Set Fault Body",group:"eip,transformation",icon:"generic24.png",description:"Sets the contents of a fault message's body",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{expression:{kind:"expression",type:"object",description:"Expression that returns the new fault body to use",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},setHeader:{type:"object",title:"Set Header",group:"eip,transformation",icon:"generic24.png",description:"Sets the value of a message header",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{expression:{kind:"expression",type:"object",description:"Expression to return the value of the header",title:"Expression",required:!0,deprecated:!1},headerName:{kind:"attribute",type:"string",description:"Name of message header to set a new value The simple language can be used to define a dynamic evaluated header name to be used. Otherwise a constant name will be used.",title:"Header Name",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},setOutHeader:{type:"object",title:"Set Out Header",group:"eip,transformation",icon:"generic24.png",description:"Sets the value of a header on the outbound message",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{expression:{kind:"expression",type:"object",description:"Expression to return the value of the header",title:"Expression",required:!0,deprecated:!1},headerName:{kind:"attribute",type:"string",description:"Name of message header to set a new value",title:"Header Name",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},setProperty:{type:"object",title:"Set Property",group:"eip,transformation",icon:"generic24.png",description:"Sets a named property on the message exchange",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{expression:{kind:"expression",type:"object",description:"Expression to return the value of the message exchange property",title:"Expression",required:!0,deprecated:!1},propertyName:{kind:"attribute",type:"string",description:"Name of exchange property to set a new value. The simple language can be used to define a dynamic evaluated exchange property name to be used. Otherwise a constant name will be used.",title:"Property Name",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},sort:{type:"object",title:"Sort",group:"eip,routing",icon:"generic24.png",description:"Sorts the contents of the message",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{expression:{kind:"expression",type:"object",description:"Optional expression to sort by something else than the message body",title:"Expression",required:!0,deprecated:!1},comparatorRef:{kind:"attribute",type:"string",description:"Sets a reference to lookup for the comparator to use for sorting",title:"Comparator Ref",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},split:{type:"object",title:"Split",group:"eip,routing",icon:"split24.png",description:"Splits a single message into many sub-messages.",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{expression:{kind:"expression",type:"object",description:"Expression of how to split the message body such as as-is using a tokenizer or using an xpath.",title:"Expression",required:!0,deprecated:!1},parallelProcessing:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If enabled then processing each splitted messages occurs concurrently. Note the caller thread will still wait until all messages has been fully processed before it continues. Its only processing the sub messages from the splitter which happens concurrently.",title:"Parallel Processing",required:!1,deprecated:!1},strategyRef:{kind:"attribute",type:"string",description:"Sets a reference to the AggregationStrategy to be used to assemble the replies from the splitted messages into a single outgoing message from the Splitter. By default Camel will use the original incoming message to the splitter (leave it unchanged). You can also use a POJO as the AggregationStrategy",title:"Strategy Ref",required:!1,deprecated:!1},strategyMethodName:{kind:"attribute",type:"string",description:"This option can be used to explicit declare the method name to use when using POJOs as the AggregationStrategy.",title:"Strategy Method Name",required:!1,deprecated:!1},strategyMethodAllowNull:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If this option is false then the aggregate method is not used if there was no data to enrich. If this option is true then null values is used as the oldExchange (when no data to enrich) when using POJOs as the AggregationStrategy",title:"Strategy Method Allow Null",required:!1,deprecated:!1},executorServiceRef:{kind:"attribute",type:"string",description:"Refers to a custom Thread Pool to be used for parallel processing. Notice if you set this option then parallel processing is automatic implied and you do not have to enable that option as well.",title:"Executor Service Ref",required:!1,deprecated:!1},streaming:{kind:"attribute",type:"boolean",defaultValue:"false",description:"When in streaming mode then the splitter splits the original message on-demand and each splitted message is processed one by one. This reduces memory usage as the splitter do not split all the messages first but then we do not know the total size and therefore the link org.apache.camel.ExchangeSPLIT_SIZE is empty. In non-streaming mode (default) the splitter will split each message first to know the total size and then process each message one by one. This requires to keep all the splitted messages in memory and therefore requires more memory. The total size is provided in the link org.apache.camel.ExchangeSPLIT_SIZE header. The streaming mode also affects the aggregation behavior. If enabled then Camel will process replies out-of-order eg in the order they come back. If disabled Camel will process replies in the same order as the messages was splitted.",title:"Streaming",required:!1,deprecated:!1},stopOnException:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Will now stop further processing if an exception or failure occurred during processing of an org.apache.camel.Exchange and the caused exception will be thrown. Will also stop if processing the exchange failed (has a fault message) or an exception was thrown and handled by the error handler (such as using onException). In all situations the splitter will stop further processing. This is the same behavior as in pipeline which is used by the routing engine. The default behavior is to not stop but continue processing till the end",title:"Stop On Exception",required:!1,deprecated:!1},timeout:{kind:"attribute",type:"integer",defaultValue:"0",description:"Sets a total timeout specified in millis when using parallel processing. If the Splitter hasn't been able to split and process all the sub messages within the given timeframe then the timeout triggers and the Splitter breaks out and continues. Notice if you provide a TimeoutAwareAggregationStrategy then the timeout method is invoked before breaking out. If the timeout is reached with running tasks still remaining certain tasks for which it is difficult for Camel to shut down in a graceful manner may continue to run. So use this option with a bit of care.",title:"Timeout",required:!1,deprecated:!1},onPrepareRef:{kind:"attribute",type:"string",description:"Uses the Processor when preparing the org.apache.camel.Exchange to be send. This can be used to deep-clone messages that should be send or any custom logic needed before the exchange is send.",title:"On Prepare Ref",required:!1,deprecated:!1},shareUnitOfWork:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Shares the org.apache.camel.spi.UnitOfWork with the parent and each of the sub messages. Splitter will by default not share unit of work between the parent exchange and each splitted exchange. This means each splitted exchange has its own individual unit of work.",title:"Share Unit Of Work",required:!1,deprecated:!1},parallelAggregate:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If enabled then the aggregate method on AggregationStrategy can be called concurrently. Notice that this would require the implementation of AggregationStrategy to be implemented as thread-safe. By default this is false meaning that Camel synchronizes the call to the aggregate method. Though in some use-cases this can be used to archive higher performance when the AggregationStrategy is implemented as thread-safe.",title:"Parallel Aggregate",required:!1,deprecated:!1},stopOnAggregateException:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If enabled unwind exceptions occurring at aggregation time to the error handler when parallelProcessing is used. Currently aggregation time exceptions do not stop the route processing when parallelProcessing is used. Enabling this option allows to work around this behavior. The default value is false for the sake of backward compatibility.",title:"Stop On Aggregate Exception",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},staticServiceDiscovery:{type:"object",title:"Static Service Discovery",group:"routing,cloud,service-discovery",icon:"generic24.png",description:"",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{servers:{kind:"element",type:"array",description:"Sets the server list. Each entry can be a list of servers separated by comma in the format: servicehost:portservicehost2:portservicehost3:port",title:"Servers",required:!1,deprecated:!1},properties:{kind:"element",type:"array",description:"Set client properties to use. These properties are specific to what service call implementation are in use. For example if using ribbon then the client properties are define in com.netflix.client.config.CommonClientConfigKey.",title:"Properties",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},sticky:{type:"object",title:"Sticky",group:"eip,routing,loadbalance",icon:"generic24.png",description:"Sticky load balancer",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{correlationExpression:{kind:"expression",type:"object",description:"The correlation expression to use to calculate the correlation key",title:"Correlation Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},stop:{type:"object",title:"Stop",group:"eip,routing",icon:"generic24.png",description:"Stops the processing of the current message",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},"stream-config":{type:"object",title:"Stream-config",group:"eip,routing,resequence",icon:"generic24.png",description:"Configures stream-processing resequence eip.",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{capacity:{kind:"attribute",type:"integer",defaultValue:"100",description:"Sets the capacity of the resequencer's inbound queue.",title:"Capacity",required:!1,deprecated:!1},timeout:{kind:"attribute",type:"integer",defaultValue:"1000",description:"Sets minimum time to wait for missing elements (messages).",title:"Timeout",required:!1,deprecated:!1},deliveryAttemptInterval:{kind:"attribute",type:"integer",defaultValue:"1000",description:"Sets the interval in milli seconds the stream resequencer will at most wait while waiting for condition of being able to deliver.",title:"Delivery Attempt Interval",required:!1,deprecated:!1},ignoreInvalidExchanges:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to ignore invalid exchanges",title:"Ignore Invalid Exchanges",required:!1,deprecated:!1},comparatorRef:{kind:"attribute",type:"string",description:"To use a custom comparator",title:"Comparator Ref",required:!1,deprecated:!1},rejectOld:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If true throws an exception when messages older than the last delivered message are processed",title:"Reject Old",required:!1,deprecated:!1}}},streamCaching:{type:"object",title:"Stream Caching",group:"spring,configuration",icon:"generic24.png",description:"Stream caching configuration.",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{enabled:{kind:"attribute",type:"string",defaultValue:"false",description:"Sets whether the stream caching is enabled. Notice: This cannot be changed at runtime.",title:"Enabled",required:!1,deprecated:!1},spoolDirectory:{kind:"attribute",type:"string",description:"Sets the spool (temporary) directory to use for overflow and spooling to disk. If no spool directory has been explicit configured then a temporary directory is created in the java.io.tmpdir directory.",title:"Spool Directory",required:!1,deprecated:!1},spoolChiper:{kind:"attribute",type:"string",description:"Sets a chiper name to use when spooling to disk to write with encryption. By default the data is not encrypted.",title:"Spool Chiper",required:!1,deprecated:!1},spoolThreshold:{kind:"attribute",type:"string",description:"Threshold in bytes when overflow to disk is activated. The default threshold is link org.apache.camel.StreamCacheDEFAULT_SPOOL_THRESHOLD bytes (eg 128kb). Use -1 to disable overflow to disk.",title:"Spool Threshold",required:!1,deprecated:!1},spoolUsedHeapMemoryThreshold:{kind:"attribute",type:"string",description:"Sets a percentage (1-99) of used heap memory threshold to activate spooling to disk.",title:"Spool Used Heap Memory Threshold",required:!1,deprecated:!1},spoolUsedHeapMemoryLimit:{kind:"attribute",type:"string",description:"Sets what the upper bounds should be when spoolUsedHeapMemoryThreshold is in use.",title:"Spool Used Heap Memory Limit",required:!1,deprecated:!1},spoolRules:{kind:"attribute",type:"string",description:"Reference to one or more custom org.apache.camel.spi.StreamCachingStrategy.SpoolRule to use. Multiple rules can be separated by comma.",title:"Spool Rules",required:!1,deprecated:!1},bufferSize:{kind:"attribute",type:"string",description:"Sets the buffer size to use when allocating in-memory buffers used for in-memory stream caches. The default size is link org.apache.camel.util.IOHelperDEFAULT_BUFFER_SIZE",title:"Buffer Size",required:!1,deprecated:!1},removeSpoolDirectoryWhenStopping:{kind:"attribute",type:"string",defaultValue:"true",description:"Whether to remove the temporary directory when stopping. This option is default true",title:"Remove Spool Directory When Stopping",required:!1,deprecated:!1},statisticsEnabled:{kind:"attribute",type:"string",description:"Sets whether statistics is enabled.",title:"Statistics Enabled",required:!1,deprecated:!1},anySpoolRules:{kind:"attribute",type:"string",defaultValue:"false",description:"Sets whether if just any of the org.apache.camel.spi.StreamCachingStrategy.SpoolRule rules returns true then shouldSpoolCache(long) returns true. If this option is false then all the org.apache.camel.spi.StreamCachingStrategy.SpoolRule must return true. The default value is false which means that all the rules must return true.",title:"Any Spool Rules",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},template:{type:"object",title:"Template",group:"spring,configuration",icon:"generic24.png",description:"Configures a ProducerTemplate",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{defaultEndpoint:{kind:"attribute",type:"string",description:"Sets the default endpoint URI used by default for sending message exchanges",title:"Default Endpoint",required:!1,deprecated:!1},maximumCacheSize:{kind:"attribute",type:"integer",description:"Sets a custom maximum cache size to use in the backing cache pools.",title:"Maximum Cache Size",required:!1,deprecated:!1},camelContextId:{kind:"attribute",type:"string",description:"Id of CamelContext to use if there are multiple CamelContexts in the same JVM",title:"Camel Context Id",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},threadPool:{type:"object",title:"Thread Pool",group:"spring,configuration",icon:"generic24.png",description:"Configuration of thread pools",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{poolSize:{kind:"attribute",type:"string",description:"Sets the core pool size (threads to keep minimum in pool)",title:"Pool Size",required:!0,deprecated:!1},maxPoolSize:{kind:"attribute",type:"string",description:"Sets the maximum pool size",title:"Max Pool Size",required:!1,deprecated:!1},keepAliveTime:{kind:"attribute",type:"string",description:"Sets the keep alive time for inactive threads",title:"Keep Alive Time",required:!1,deprecated:!1},timeUnit:{kind:"attribute",type:"object",defaultValue:"SECONDS",enum:["DAYS","HOURS","MICROSECONDS","MILLISECONDS","MINUTES","NANOSECONDS","SECONDS"],description:"Sets the time unit used for keep alive time",title:"Time Unit",required:!1,deprecated:!1},maxQueueSize:{kind:"attribute",type:"string",description:"Sets the maximum number of tasks in the work queue. Use -1 for an unbounded queue",title:"Max Queue Size",required:!1,deprecated:!1},allowCoreThreadTimeOut:{kind:"attribute",type:"string",description:"Sets whether to allow core threads to timeout",title:"Allow Core Thread Time Out",required:!1,deprecated:!1},rejectedPolicy:{kind:"attribute",type:"object",defaultValue:"CallerRuns",enum:["Abort","CallerRuns","Discard","DiscardOldest"],description:"Sets the handler for tasks which cannot be executed by the thread pool.",title:"Rejected Policy",required:!1,deprecated:!1},threadName:{kind:"attribute",type:"string",description:"To use a custom thread name / pattern",title:"Thread Name",required:!0,deprecated:!1},scheduled:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to use a scheduled thread pool",title:"Scheduled",required:!1,deprecated:!1},camelContextId:{kind:"attribute",type:"string",description:"Id of CamelContext to use if there are multiple CamelContexts in the same JVM",title:"Camel Context Id",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},threadPoolProfile:{type:"object",title:"Thread Pool Profile",group:"configuration",icon:"generic24.png",description:"To configure thread pools",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{defaultProfile:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether this profile is the default thread pool profile",title:"Default Profile",required:!1,deprecated:!1},poolSize:{kind:"attribute",type:"string",description:"Sets the core pool size",title:"Pool Size",required:!1,deprecated:!1},maxPoolSize:{kind:"attribute",type:"string",description:"Sets the maximum pool size",title:"Max Pool Size",required:!1,deprecated:!1},keepAliveTime:{kind:"attribute",type:"string",description:"Sets the keep alive time for idle threads in the pool",title:"Keep Alive Time",required:!1,deprecated:!1},timeUnit:{kind:"attribute",type:"object",enum:["DAYS","HOURS","MICROSECONDS","MILLISECONDS","MINUTES","NANOSECONDS","SECONDS"],description:"Sets the time unit to use for keep alive time By default SECONDS is used.",title:"Time Unit",required:!1,deprecated:!1},maxQueueSize:{kind:"attribute",type:"string",description:"Sets the maximum number of tasks in the work queue. Use -1 or Integer.MAX_VALUE for an unbounded queue",title:"Max Queue Size",required:!1,deprecated:!1},allowCoreThreadTimeOut:{kind:"attribute",type:"string",description:"Whether idle core threads is allowed to timeout and therefore can shrink the pool size below the core pool size Is by default false",title:"Allow Core Thread Time Out",required:!1,deprecated:!1},rejectedPolicy:{kind:"attribute",type:"object",enum:["Abort","CallerRuns","Discard","DiscardOldest"],description:"Sets the handler for tasks which cannot be executed by the thread pool.",title:"Rejected Policy",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},threads:{type:"object",title:"Threads",group:"eip,routing",
icon:"generic24.png",description:"Specifies that all steps after this node are processed asynchronously",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{executorServiceRef:{kind:"attribute",type:"string",description:"To refer to a custom thread pool or use a thread pool profile (as overlay)",title:"Executor Service Ref",required:!1,deprecated:!1},poolSize:{kind:"attribute",type:"integer",description:"Sets the core pool size",title:"Pool Size",required:!1,deprecated:!1},maxPoolSize:{kind:"attribute",type:"integer",description:"Sets the maximum pool size",title:"Max Pool Size",required:!1,deprecated:!1},keepAliveTime:{kind:"attribute",type:"integer",description:"Sets the keep alive time for idle threads",title:"Keep Alive Time",required:!1,deprecated:!1},timeUnit:{kind:"attribute",type:"object",enum:["DAYS","HOURS","MICROSECONDS","MILLISECONDS","MINUTES","NANOSECONDS","SECONDS"],description:"Sets the keep alive time unit. By default SECONDS is used.",title:"Time Unit",required:!1,deprecated:!1},maxQueueSize:{kind:"attribute",type:"integer",description:"Sets the maximum number of tasks in the work queue. Use -1 or Integer.MAX_VALUE for an unbounded queue",title:"Max Queue Size",required:!1,deprecated:!1},allowCoreThreadTimeOut:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether idle core threads is allowed to timeout and therefore can shrink the pool size below the core pool size Is by default false",title:"Allow Core Thread Time Out",required:!1,deprecated:!1},threadName:{kind:"attribute",type:"string",defaultValue:"Threads",description:"Sets the thread name to use.",title:"Thread Name",required:!1,deprecated:!1},rejectedPolicy:{kind:"attribute",type:"object",enum:["Abort","CallerRuns","Discard","DiscardOldest"],description:"Sets the handler for tasks which cannot be executed by the thread pool.",title:"Rejected Policy",required:!1,deprecated:!1},callerRunsWhenRejected:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether or not to use as caller runs as fallback when a task is rejected being added to the thread pool (when its full). This is only used as fallback if no rejectedPolicy has been configured or the thread pool has no configured rejection handler. Is by default true",title:"Caller Runs When Rejected",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},throttle:{type:"object",title:"Throttle",group:"eip,routing",icon:"generic24.png",description:"Controls the rate at which messages are passed to the next node in the route",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{expression:{kind:"expression",type:"object",description:"Expression to configure the maximum number of messages to throttle per request",title:"Expression",required:!0,deprecated:!1},executorServiceRef:{kind:"attribute",type:"string",description:"To use a custom thread pool (ScheduledExecutorService) by the throttler.",title:"Executor Service Ref",required:!1,deprecated:!1},timePeriodMillis:{kind:"attribute",type:"integer",defaultValue:"1000",description:"Sets the time period during which the maximum request count is valid for",title:"Time Period Millis",required:!1,deprecated:!1},asyncDelayed:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Enables asynchronous delay which means the thread will not block while delaying.",title:"Async Delayed",required:!1,deprecated:!1},callerRunsWhenRejected:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether or not the caller should run the task when it was rejected by the thread pool. Is by default true",title:"Caller Runs When Rejected",required:!1,deprecated:!1},rejectExecution:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether or not throttler throws the ThrottlerRejectedExecutionException when the exchange exceeds the request limit Is by default false",title:"Reject Execution",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},throwException:{type:"object",title:"Throw Exception",group:"error",icon:"generic24.png",description:"Throws an exception",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{ref:{kind:"attribute",type:"string",description:"Reference to the exception instance to lookup from the registry to throw",title:"Ref",required:!1,deprecated:!1},message:{kind:"attribute",type:"string",description:"To create a new exception instance and use the given message as caused message (supports simple language)",title:"Message",required:!1,deprecated:!1},exceptionType:{kind:"attribute",type:"string",description:"The class of the exception to create using the message.",title:"Exception Type",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},to:{type:"object",title:"To",group:"eip,endpoint,routing",icon:"endpoint24.png",description:"Sends the message to a static endpoint",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{uri:{kind:"attribute",type:"string",description:"Sets the uri of the endpoint to send to.",title:"Uri",required:!0,deprecated:!1},ref:{kind:"attribute",type:"string",description:"Sets the reference of the endpoint to send to.",title:"Ref",required:!1,deprecated:!0},pattern:{kind:"attribute",type:"object",enum:["InOnly","InOptionalOut","InOut","OutIn","OutOnly","OutOptionalIn","RobustInOnly","RobustOutOnly"],description:"Sets the optional ExchangePattern used to invoke this endpoint",title:"Pattern",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},toD:{type:"object",title:"To D",group:"eip,endpoint,routing",icon:"endpoint24.png",description:"Sends the message to a dynamic endpoint",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{uri:{kind:"attribute",type:"string",description:"The uri of the endpoint to send to. The uri can be dynamic computed using the org.apache.camel.language.simple.SimpleLanguage expression.",title:"Uri",required:!0,deprecated:!1},pattern:{kind:"attribute",type:"object",enum:["InOnly","InOptionalOut","InOut","OutIn","OutOnly","OutOptionalIn","RobustInOnly","RobustOutOnly"],description:"Sets the optional ExchangePattern used to invoke this endpoint",title:"Pattern",required:!1,deprecated:!1},cacheSize:{kind:"attribute",type:"integer",description:"Sets the maximum size used by the org.apache.camel.impl.ConsumerCache which is used to cache and reuse producers.",title:"Cache Size",required:!1,deprecated:!1},ignoreInvalidEndpoint:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Ignore the invalidate endpoint exception when try to create a producer with that endpoint",title:"Ignore Invalid Endpoint",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},topic:{type:"object",title:"Topic",group:"eip,routing,loadbalance",icon:"generic24.png",description:"Topic load balancer",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},transacted:{type:"object",title:"Transacted",group:"configuration",icon:"transactionalClient24.png",description:"Enables transaction on the route",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{ref:{kind:"attribute",type:"string",description:"Sets a reference to use for lookup the policy in the registry.",title:"Ref",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},transform:{type:"object",title:"Transform",group:"eip,transformation",icon:"transform24.png",description:"Transforms the message body based on an expression",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{expression:{kind:"expression",type:"object",description:"Expression to return the transformed message body (the new message body to use)",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},transformers:{type:"object",title:"Transformations",group:"transformation",icon:"generic24.png",description:"To configure transformers.",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{transformers:{kind:"element",type:"array",description:"The configured transformers",title:"Transformers",required:!0,deprecated:!1}}},unmarshal:{type:"object",title:"Unmarshal",group:"eip,transformation",icon:"unmarshal24.png",description:"Converts the message data received from the wire into a format that Apache Camel processors can consume",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{dataFormatType:{kind:"element",type:"object",description:"The data format to be used",title:"Data Format Type",required:!0,deprecated:!1},ref:{kind:"attribute",type:"string",description:"To refer to a custom data format to use as unmarshaller",title:"Ref",required:!1,deprecated:!0},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},validate:{type:"object",title:"Validate",group:"eip,transformation",icon:"generic24.png",description:"Validates a message based on an expression",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{expression:{kind:"expression",type:"object",description:"Expression to use for validation as a predicate. The expression should return either true or false. If returning false the message is invalid and an exception is thrown.",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},validators:{type:"object",title:"Validations",group:"validation",icon:"generic24.png",description:"To configure validators.",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{validators:{kind:"element",type:"array",description:"The configured transformers",title:"Validators",required:!0,deprecated:!1}}},weighted:{type:"object",title:"Weighted",group:"eip,routing,loadbalance",icon:"generic24.png",description:"Weighted load balancer",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{roundRobin:{kind:"attribute",type:"boolean",defaultValue:"false",description:"To enable round robin mode. By default the weighted distribution mode is used. The default value is false.",title:"Round Robin",required:!1,deprecated:!1},distributionRatio:{kind:"attribute",type:"string",description:"The distribution ratio is a delimited String consisting on integer weights separated by delimiters for example 235. The distributionRatio must match the number of endpoints and/or processors specified in the load balancer list.",title:"Distribution Ratio",required:!0,deprecated:!1},distributionRatioDelimiter:{kind:"attribute",type:"string",defaultValue:",",description:"Delimiter used to specify the distribution ratio. The default value is",title:"Distribution Ratio Delimiter",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},when:{type:"object",title:"When",group:"eip,routing",icon:"generic24.png",description:"Triggers a route when an expression evaluates to true",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{expression:{kind:"expression",type:"object",description:"Expression used as the predicate to evaluate whether this when should trigger and route the message or not.",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},whenSkipSendToEndpoint:{type:"object",title:"When Skip Send To Endpoint",group:"configuration",icon:"generic24.png",description:"Predicate to determine if the message should be sent or not to the endpoint when using interceptSentToEndpoint.",acceptInput:"true",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{expression:{kind:"expression",type:"object",description:"Expression used as the predicate to evaluate whether the message should be sent or not to the endpoint",title:"Expression",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},wireTap:{type:"object",title:"Wire Tap",group:"eip,endpoint,routing",icon:"wireTap24.png",description:"Routes a copy of a message (or creates a new message) to a secondary destination while continue routing the original message.",acceptInput:"true",acceptOutput:"false",nextSiblingAddedAsChild:"true",properties:{processorRef:{kind:"attribute",type:"string",description:"Reference to a Processor to use for creating a new body as the message to use for wire tapping",title:"Processor Ref",required:!1,deprecated:!1},body:{kind:"expression",type:"object",description:"Uses the expression for creating a new body as the message to use for wire tapping",title:"Body",required:!1,deprecated:!1},executorServiceRef:{kind:"attribute",type:"string",description:"Uses a custom thread pool",title:"Executor Service Ref",required:!1,deprecated:!1},copy:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Uses a copy of the original exchange",title:"Copy",required:!1,deprecated:!1},dynamicUri:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether the uri is dynamic or static. If the uri is dynamic then the simple language is used to evaluate a dynamic uri to use as the wire-tap destination for each incoming message. This works similar to how the toD EIP pattern works. If static then the uri is used as-is as the wire-tap destination.",title:"Dynamic Uri",required:!1,deprecated:!1},onPrepareRef:{kind:"attribute",type:"string",description:"Uses the Processor when preparing the org.apache.camel.Exchange to be send. This can be used to deep-clone messages that should be send or any custom logic needed before the exchange is send.",title:"On Prepare Ref",required:!1,deprecated:!1},uri:{kind:"attribute",type:"string",description:"The uri of the endpoint to send to. The uri can be dynamic computed using the org.apache.camel.language.simple.SimpleLanguage expression.",title:"Uri",required:!0,deprecated:!1},pattern:{kind:"attribute",type:"object",enum:["InOnly","InOptionalOut","InOut","OutIn","OutOnly","OutOptionalIn","RobustInOnly","RobustOutOnly"],description:"Sets the optional ExchangePattern used to invoke this endpoint",title:"Pattern",required:!1,deprecated:!1},cacheSize:{kind:"attribute",type:"integer",description:"Sets the maximum size used by the org.apache.camel.impl.ConsumerCache which is used to cache and reuse producers.",title:"Cache Size",required:!1,deprecated:!1},ignoreInvalidEndpoint:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Ignore the invalidate endpoint exception when try to create a producer with that endpoint",title:"Ignore Invalid Endpoint",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},zookeeperServiceDiscovery:{type:"object",title:"Zookeeper Service Discovery",group:"routing,cloud,service-discovery",icon:"generic24.png",description:"",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{nodes:{kind:"attribute",type:"string",description:"A comma separate list of servers to connect to in the form host:port",title:"Nodes",required:!0,deprecated:!1},namespace:{kind:"attribute",type:"string",description:"As ZooKeeper is a shared space users of a given cluster should stay within a pre-defined namespace. If a namespace is set here all paths will get pre-pended with the namespace",title:"Namespace",required:!1,deprecated:!1},reconnectBaseSleepTime:{kind:"attribute",type:"string",description:"Initial amount of time to wait between retries.",title:"Reconnect Base Sleep Time",required:!1,deprecated:!1},reconnectMaxSleepTime:{kind:"attribute",type:"string",description:"Max time in ms to sleep on each retry",title:"Reconnect Max Sleep Time",required:!1,deprecated:!1},reconnectMaxRetries:{kind:"attribute",type:"integer",description:"Max number of times to retry",title:"Reconnect Max Retries",required:!1,deprecated:!1},sessionTimeout:{kind:"attribute",type:"string",description:"Session timeout.",title:"Session Timeout",required:!1,deprecated:!1},connectionTimeout:{kind:"attribute",type:"string",description:"Connection timeout.",title:"Connection Timeout",required:!1,deprecated:!1},basePath:{kind:"attribute",type:"string",description:"Set the base path to store in ZK",title:"Base Path",required:!0,deprecated:!1},properties:{kind:"element",type:"array",description:"Set client properties to use. These properties are specific to what service call implementation are in use. For example if using ribbon then the client properties are define in com.netflix.client.config.CommonClientConfigKey.",title:"Properties",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}}},rests:{delete:{type:"object",title:"Delete",group:"rest",icon:"generic24.png",description:"Rest DELETE command",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{method:{kind:"attribute",type:"string",description:"The HTTP verb such as GET POST DELETE etc.",title:"Method",required:!1,deprecated:!1},uri:{kind:"attribute",type:"string",description:"Uri template of this REST service such as /id.",title:"Uri",required:!1,deprecated:!1},consumes:{kind:"attribute",type:"string",description:"To define the content type what the REST service consumes (accept as input) such as application/xml or application/json. This option will override what may be configured on a parent level",title:"Consumes",required:!1,deprecated:!1},produces:{kind:"attribute",type:"string",description:"To define the content type what the REST service produces (uses for output) such as application/xml or application/json This option will override what may be configured on a parent level",title:"Produces",required:!1,deprecated:!1},bindingMode:{kind:"attribute",type:"object",defaultValue:"auto",enum:["auto","json","json_xml","off","xml"],description:"Sets the binding mode to use. This option will override what may be configured on a parent level The default value is auto",title:"Binding Mode",required:!1,deprecated:!1},skipBindingOnErrorCode:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to skip binding on output if there is a custom HTTP error code header. This allows to build custom error messages that do not bind to json / xml etc as success messages otherwise will do. This option will override what may be configured on a parent level",title:"Skip Binding On Error Code",required:!1,deprecated:!1},enableCORS:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to enable CORS headers in the HTTP response. This option will override what may be configured on a parent level The default value is false.",title:"Enable C O R S",required:!1,deprecated:!1},type:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from input to POJO for the incoming data This option will override what may be configured on a parent level. The canonical name of the class of the input data. Append a to the end of the canonical name if you want the input to be an array type.",title:"Type",required:!1,deprecated:!1},outType:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from POJO to output for the outgoing data This option will override what may be configured on a parent level The canonical name of the class of the input data. Append a to the end of the canonical name if you want the input to be an array type.",title:"Out Type",required:!1,deprecated:!1},toOrRoute:{kind:"element",type:"object",description:"To route from this REST service to a Camel endpoint or an inlined route",title:"To Or Route",required:!0,deprecated:!1},routeId:{kind:"attribute",type:"string",description:"The route id this rest-dsl is using (read-only)",title:"Route Id",required:!1,deprecated:!1},apiDocs:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to include or exclude the VerbDefinition in API documentation. The default value is true.",title:"Api Docs",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},get:{type:"object",title:"Get",group:"rest",icon:"generic24.png",description:"Rest GET command",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{method:{kind:"attribute",type:"string",description:"The HTTP verb such as GET POST DELETE etc.",title:"Method",required:!1,deprecated:!1},uri:{kind:"attribute",type:"string",description:"Uri template of this REST service such as /id.",title:"Uri",required:!1,deprecated:!1},consumes:{kind:"attribute",type:"string",description:"To define the content type what the REST service consumes (accept as input) such as application/xml or application/json. This option will override what may be configured on a parent level",title:"Consumes",required:!1,deprecated:!1},produces:{kind:"attribute",type:"string",description:"To define the content type what the REST service produces (uses for output) such as application/xml or application/json This option will override what may be configured on a parent level",title:"Produces",required:!1,deprecated:!1},bindingMode:{kind:"attribute",type:"object",defaultValue:"auto",enum:["auto","json","json_xml","off","xml"],description:"Sets the binding mode to use. This option will override what may be configured on a parent level The default value is auto",title:"Binding Mode",required:!1,deprecated:!1},skipBindingOnErrorCode:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to skip binding on output if there is a custom HTTP error code header. This allows to build custom error messages that do not bind to json / xml etc as success messages otherwise will do. This option will override what may be configured on a parent level",title:"Skip Binding On Error Code",required:!1,deprecated:!1},enableCORS:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to enable CORS headers in the HTTP response. This option will override what may be configured on a parent level The default value is false.",title:"Enable C O R S",required:!1,deprecated:!1},type:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from input to POJO for the incoming data This option will override what may be configured on a parent level. The canonical name of the class of the input data. Append a to the end of the canonical name if you want the input to be an array type.",title:"Type",required:!1,deprecated:!1},outType:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from POJO to output for the outgoing data This option will override what may be configured on a parent level The canonical name of the class of the input data. Append a to the end of the canonical name if you want the input to be an array type.",title:"Out Type",required:!1,deprecated:!1},toOrRoute:{kind:"element",type:"object",description:"To route from this REST service to a Camel endpoint or an inlined route",title:"To Or Route",required:!0,deprecated:!1},routeId:{kind:"attribute",type:"string",description:"The route id this rest-dsl is using (read-only)",title:"Route Id",required:!1,deprecated:!1},apiDocs:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to include or exclude the VerbDefinition in API documentation. The default value is true.",title:"Api Docs",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},head:{type:"object",title:"Head",group:"rest",icon:"generic24.png",description:"Rest HEAD command",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{method:{kind:"attribute",type:"string",description:"The HTTP verb such as GET POST DELETE etc.",title:"Method",required:!1,deprecated:!1},uri:{kind:"attribute",type:"string",description:"Uri template of this REST service such as /id.",title:"Uri",required:!1,deprecated:!1},consumes:{kind:"attribute",type:"string",description:"To define the content type what the REST service consumes (accept as input) such as application/xml or application/json. This option will override what may be configured on a parent level",title:"Consumes",required:!1,deprecated:!1},produces:{kind:"attribute",type:"string",description:"To define the content type what the REST service produces (uses for output) such as application/xml or application/json This option will override what may be configured on a parent level",title:"Produces",required:!1,deprecated:!1},bindingMode:{kind:"attribute",type:"object",defaultValue:"auto",enum:["auto","json","json_xml","off","xml"],description:"Sets the binding mode to use. This option will override what may be configured on a parent level The default value is auto",title:"Binding Mode",required:!1,deprecated:!1},skipBindingOnErrorCode:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to skip binding on output if there is a custom HTTP error code header. This allows to build custom error messages that do not bind to json / xml etc as success messages otherwise will do. This option will override what may be configured on a parent level",title:"Skip Binding On Error Code",required:!1,deprecated:!1},enableCORS:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to enable CORS headers in the HTTP response. This option will override what may be configured on a parent level The default value is false.",title:"Enable C O R S",required:!1,deprecated:!1},type:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from input to POJO for the incoming data This option will override what may be configured on a parent level. The canonical name of the class of the input data. Append a to the end of the canonical name if you want the input to be an array type.",title:"Type",required:!1,deprecated:!1},outType:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from POJO to output for the outgoing data This option will override what may be configured on a parent level The canonical name of the class of the input data. Append a to the end of the canonical name if you want the input to be an array type.",title:"Out Type",required:!1,deprecated:!1},toOrRoute:{kind:"element",type:"object",description:"To route from this REST service to a Camel endpoint or an inlined route",title:"To Or Route",required:!0,deprecated:!1},routeId:{kind:"attribute",type:"string",description:"The route id this rest-dsl is using (read-only)",title:"Route Id",required:!1,deprecated:!1},apiDocs:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to include or exclude the VerbDefinition in API documentation. The default value is true.",title:"Api Docs",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},options:{type:"object",title:"Options",group:"rest",icon:"generic24.png",description:"Rest OPTIONS command",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{method:{kind:"attribute",type:"string",description:"The HTTP verb such as GET POST DELETE etc.",title:"Method",required:!1,deprecated:!1},uri:{kind:"attribute",type:"string",description:"Uri template of this REST service such as /id.",title:"Uri",required:!1,deprecated:!1},consumes:{kind:"attribute",type:"string",description:"To define the content type what the REST service consumes (accept as input) such as application/xml or application/json. This option will override what may be configured on a parent level",title:"Consumes",required:!1,deprecated:!1},produces:{kind:"attribute",type:"string",description:"To define the content type what the REST service produces (uses for output) such as application/xml or application/json This option will override what may be configured on a parent level",title:"Produces",required:!1,deprecated:!1},bindingMode:{kind:"attribute",type:"object",defaultValue:"auto",enum:["auto","json","json_xml","off","xml"],description:"Sets the binding mode to use. This option will override what may be configured on a parent level The default value is auto",title:"Binding Mode",required:!1,deprecated:!1},skipBindingOnErrorCode:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to skip binding on output if there is a custom HTTP error code header. This allows to build custom error messages that do not bind to json / xml etc as success messages otherwise will do. This option will override what may be configured on a parent level",title:"Skip Binding On Error Code",required:!1,deprecated:!1},enableCORS:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to enable CORS headers in the HTTP response. This option will override what may be configured on a parent level The default value is false.",
title:"Enable C O R S",required:!1,deprecated:!1},type:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from input to POJO for the incoming data This option will override what may be configured on a parent level. The canonical name of the class of the input data. Append a to the end of the canonical name if you want the input to be an array type.",title:"Type",required:!1,deprecated:!1},outType:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from POJO to output for the outgoing data This option will override what may be configured on a parent level The canonical name of the class of the input data. Append a to the end of the canonical name if you want the input to be an array type.",title:"Out Type",required:!1,deprecated:!1},toOrRoute:{kind:"element",type:"object",description:"To route from this REST service to a Camel endpoint or an inlined route",title:"To Or Route",required:!0,deprecated:!1},routeId:{kind:"attribute",type:"string",description:"The route id this rest-dsl is using (read-only)",title:"Route Id",required:!1,deprecated:!1},apiDocs:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to include or exclude the VerbDefinition in API documentation. The default value is true.",title:"Api Docs",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},param:{type:"object",title:"Param",group:"rest",icon:"generic24.png",description:"To specify the rest operation parameters using Swagger.",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{name:{kind:"attribute",type:"string",description:"Sets the Swagger Parameter name.",title:"Name",required:!0,deprecated:!1},type:{kind:"attribute",type:"object",defaultValue:"path",enum:["body","formData","header","path","query"],description:"Sets the Swagger Parameter type.",title:"Type",required:!0,deprecated:!1},defaultValue:{kind:"attribute",type:"string",description:"Sets the Swagger Parameter default value.",title:"Default Value",required:!1,deprecated:!1},required:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Sets the Swagger Parameter required flag.",title:"Required",required:!1,deprecated:!1},collectionFormat:{kind:"attribute",type:"object",defaultValue:"csv",enum:["csv","multi","pipes","ssv","tsv"],description:"Sets the Swagger Parameter collection format.",title:"Collection Format",required:!1,deprecated:!1},arrayType:{kind:"attribute",type:"string",defaultValue:"string",description:"Sets the Swagger Parameter array type. Required if data type is array. Describes the type of items in the array.",title:"Array Type",required:!1,deprecated:!1},dataType:{kind:"attribute",type:"string",defaultValue:"string",description:"Sets the Swagger Parameter data type.",title:"Data Type",required:!1,deprecated:!1},value:{kind:"element",type:"array",description:"Sets the Swagger Parameter list of allowable values (enum).",title:"Value",required:!1,deprecated:!1},access:{kind:"attribute",type:"string",description:"Sets the Swagger Parameter paramAccess flag.",title:"Access",required:!1,deprecated:!1},description:{kind:"attribute",type:"string",description:"Sets the Swagger Parameter description.",title:"Description",required:!1,deprecated:!1}}},patch:{type:"object",title:"Patch",group:"rest",icon:"generic24.png",description:"Rest PATCH command",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{method:{kind:"attribute",type:"string",description:"The HTTP verb such as GET POST DELETE etc.",title:"Method",required:!1,deprecated:!1},uri:{kind:"attribute",type:"string",description:"Uri template of this REST service such as /id.",title:"Uri",required:!1,deprecated:!1},consumes:{kind:"attribute",type:"string",description:"To define the content type what the REST service consumes (accept as input) such as application/xml or application/json. This option will override what may be configured on a parent level",title:"Consumes",required:!1,deprecated:!1},produces:{kind:"attribute",type:"string",description:"To define the content type what the REST service produces (uses for output) such as application/xml or application/json This option will override what may be configured on a parent level",title:"Produces",required:!1,deprecated:!1},bindingMode:{kind:"attribute",type:"object",defaultValue:"auto",enum:["auto","json","json_xml","off","xml"],description:"Sets the binding mode to use. This option will override what may be configured on a parent level The default value is auto",title:"Binding Mode",required:!1,deprecated:!1},skipBindingOnErrorCode:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to skip binding on output if there is a custom HTTP error code header. This allows to build custom error messages that do not bind to json / xml etc as success messages otherwise will do. This option will override what may be configured on a parent level",title:"Skip Binding On Error Code",required:!1,deprecated:!1},enableCORS:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to enable CORS headers in the HTTP response. This option will override what may be configured on a parent level The default value is false.",title:"Enable C O R S",required:!1,deprecated:!1},type:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from input to POJO for the incoming data This option will override what may be configured on a parent level. The canonical name of the class of the input data. Append a to the end of the canonical name if you want the input to be an array type.",title:"Type",required:!1,deprecated:!1},outType:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from POJO to output for the outgoing data This option will override what may be configured on a parent level The canonical name of the class of the input data. Append a to the end of the canonical name if you want the input to be an array type.",title:"Out Type",required:!1,deprecated:!1},toOrRoute:{kind:"element",type:"object",description:"To route from this REST service to a Camel endpoint or an inlined route",title:"To Or Route",required:!0,deprecated:!1},routeId:{kind:"attribute",type:"string",description:"The route id this rest-dsl is using (read-only)",title:"Route Id",required:!1,deprecated:!1},apiDocs:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to include or exclude the VerbDefinition in API documentation. The default value is true.",title:"Api Docs",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},post:{type:"object",title:"Post",group:"rest",icon:"generic24.png",description:"Rest POST command",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{method:{kind:"attribute",type:"string",description:"The HTTP verb such as GET POST DELETE etc.",title:"Method",required:!1,deprecated:!1},uri:{kind:"attribute",type:"string",description:"Uri template of this REST service such as /id.",title:"Uri",required:!1,deprecated:!1},consumes:{kind:"attribute",type:"string",description:"To define the content type what the REST service consumes (accept as input) such as application/xml or application/json. This option will override what may be configured on a parent level",title:"Consumes",required:!1,deprecated:!1},produces:{kind:"attribute",type:"string",description:"To define the content type what the REST service produces (uses for output) such as application/xml or application/json This option will override what may be configured on a parent level",title:"Produces",required:!1,deprecated:!1},bindingMode:{kind:"attribute",type:"object",defaultValue:"auto",enum:["auto","json","json_xml","off","xml"],description:"Sets the binding mode to use. This option will override what may be configured on a parent level The default value is auto",title:"Binding Mode",required:!1,deprecated:!1},skipBindingOnErrorCode:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to skip binding on output if there is a custom HTTP error code header. This allows to build custom error messages that do not bind to json / xml etc as success messages otherwise will do. This option will override what may be configured on a parent level",title:"Skip Binding On Error Code",required:!1,deprecated:!1},enableCORS:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to enable CORS headers in the HTTP response. This option will override what may be configured on a parent level The default value is false.",title:"Enable C O R S",required:!1,deprecated:!1},type:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from input to POJO for the incoming data This option will override what may be configured on a parent level. The canonical name of the class of the input data. Append a to the end of the canonical name if you want the input to be an array type.",title:"Type",required:!1,deprecated:!1},outType:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from POJO to output for the outgoing data This option will override what may be configured on a parent level The canonical name of the class of the input data. Append a to the end of the canonical name if you want the input to be an array type.",title:"Out Type",required:!1,deprecated:!1},toOrRoute:{kind:"element",type:"object",description:"To route from this REST service to a Camel endpoint or an inlined route",title:"To Or Route",required:!0,deprecated:!1},routeId:{kind:"attribute",type:"string",description:"The route id this rest-dsl is using (read-only)",title:"Route Id",required:!1,deprecated:!1},apiDocs:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to include or exclude the VerbDefinition in API documentation. The default value is true.",title:"Api Docs",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},put:{type:"object",title:"Put",group:"rest",icon:"generic24.png",description:"Rest PUT command",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{method:{kind:"attribute",type:"string",description:"The HTTP verb such as GET POST DELETE etc.",title:"Method",required:!1,deprecated:!1},uri:{kind:"attribute",type:"string",description:"Uri template of this REST service such as /id.",title:"Uri",required:!1,deprecated:!1},consumes:{kind:"attribute",type:"string",description:"To define the content type what the REST service consumes (accept as input) such as application/xml or application/json. This option will override what may be configured on a parent level",title:"Consumes",required:!1,deprecated:!1},produces:{kind:"attribute",type:"string",description:"To define the content type what the REST service produces (uses for output) such as application/xml or application/json This option will override what may be configured on a parent level",title:"Produces",required:!1,deprecated:!1},bindingMode:{kind:"attribute",type:"object",defaultValue:"auto",enum:["auto","json","json_xml","off","xml"],description:"Sets the binding mode to use. This option will override what may be configured on a parent level The default value is auto",title:"Binding Mode",required:!1,deprecated:!1},skipBindingOnErrorCode:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to skip binding on output if there is a custom HTTP error code header. This allows to build custom error messages that do not bind to json / xml etc as success messages otherwise will do. This option will override what may be configured on a parent level",title:"Skip Binding On Error Code",required:!1,deprecated:!1},enableCORS:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to enable CORS headers in the HTTP response. This option will override what may be configured on a parent level The default value is false.",title:"Enable C O R S",required:!1,deprecated:!1},type:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from input to POJO for the incoming data This option will override what may be configured on a parent level. The canonical name of the class of the input data. Append a to the end of the canonical name if you want the input to be an array type.",title:"Type",required:!1,deprecated:!1},outType:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from POJO to output for the outgoing data This option will override what may be configured on a parent level The canonical name of the class of the input data. Append a to the end of the canonical name if you want the input to be an array type.",title:"Out Type",required:!1,deprecated:!1},toOrRoute:{kind:"element",type:"object",description:"To route from this REST service to a Camel endpoint or an inlined route",title:"To Or Route",required:!0,deprecated:!1},routeId:{kind:"attribute",type:"string",description:"The route id this rest-dsl is using (read-only)",title:"Route Id",required:!1,deprecated:!1},apiDocs:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to include or exclude the VerbDefinition in API documentation. The default value is true.",title:"Api Docs",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},responseHeader:{type:"object",title:"Response Header",group:"rest",icon:"generic24.png",description:"To specify the rest operation response headers using Swagger.",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{name:{kind:"attribute",type:"string",description:"Name of the parameter. This option is mandatory.",title:"Name",required:!0,deprecated:!1},collectionFormat:{kind:"attribute",type:"object",defaultValue:"csv",enum:["csv","multi","pipes","ssv","tsv"],description:"Sets the Swagger Parameter collection format.",title:"Collection Format",required:!1,deprecated:!1},arrayType:{kind:"attribute",type:"string",defaultValue:"string",description:"Sets the Swagger Parameter array type. Required if data type is array. Describes the type of items in the array.",title:"Array Type",required:!1,deprecated:!1},dataType:{kind:"attribute",type:"string",defaultValue:"string",description:"Sets the Swagger header data type.",title:"Data Type",required:!1,deprecated:!1},value:{kind:"element",type:"array",description:"Sets the Swagger Parameter list of allowable values.",title:"Value",required:!1,deprecated:!1},description:{kind:"attribute",type:"string",description:"Description of the parameter.",title:"Description",required:!1,deprecated:!1}}},responseMessage:{type:"object",title:"Response Message",group:"rest",icon:"generic24.png",description:"To specify the rest operation response messages using Swagger.",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{code:{kind:"attribute",type:"string",defaultValue:"200",description:"The response code such as a HTTP status code.",title:"Code",required:!1,deprecated:!1},message:{kind:"attribute",type:"string",description:"The response message (description)",title:"Message",required:!0,deprecated:!1},responseModel:{kind:"attribute",type:"string",description:"The response model",title:"Response Model",required:!1,deprecated:!1},header:{kind:"element",type:"array",description:"Adds a response header",title:"Header",required:!1,deprecated:!1}}},rest:{type:"object",title:"Rest",group:"rest",icon:"generic24.png",description:"Defines a rest service using the rest-dsl",acceptInput:"false",acceptOutput:"true",nextSiblingAddedAsChild:"false",properties:{path:{kind:"attribute",type:"string",description:"Path of the rest service such as /foo",title:"Path",required:!1,deprecated:!1},tag:{kind:"attribute",type:"string",description:"To configure a special tag for the operations within this rest definition.",title:"Tag",required:!1,deprecated:!1},consumes:{kind:"attribute",type:"string",description:"To define the content type what the REST service consumes (accept as input) such as application/xml or application/json. This option will override what may be configured on a parent level",title:"Consumes",required:!1,deprecated:!1},produces:{kind:"attribute",type:"string",description:"To define the content type what the REST service produces (uses for output) such as application/xml or application/json This option will override what may be configured on a parent level",title:"Produces",required:!1,deprecated:!1},bindingMode:{kind:"attribute",type:"object",defaultValue:"auto",enum:["auto","json","json_xml","off","xml"],description:"Sets the binding mode to use. This option will override what may be configured on a parent level The default value is auto",title:"Binding Mode",required:!1,deprecated:!1},skipBindingOnErrorCode:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to skip binding on output if there is a custom HTTP error code header. This allows to build custom error messages that do not bind to json / xml etc as success messages otherwise will do. This option will override what may be configured on a parent level",title:"Skip Binding On Error Code",required:!1,deprecated:!1},enableCORS:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to enable CORS headers in the HTTP response. This option will override what may be configured on a parent level The default value is false.",title:"Enable C O R S",required:!1,deprecated:!1},apiDocs:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to include or exclude the VerbDefinition in API documentation. This option will override what may be configured on a parent level The default value is true.",title:"Api Docs",required:!1,deprecated:!1},verbs:{kind:"element",type:"array",description:"The HTTP verbs this REST service accepts and uses",title:"Verbs",required:!0,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},restBinding:{type:"object",title:"Rest Binding",group:"rest",icon:"generic24.png",description:"To configure rest binding",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{consumes:{kind:"attribute",type:"string",description:"To define the content type what the REST service consumes (accept as input) such as application/xml or application/json",title:"Consumes",required:!1,deprecated:!1},produces:{kind:"attribute",type:"string",description:"To define the content type what the REST service produces (uses for output) such as application/xml or application/json",title:"Produces",required:!1,deprecated:!1},bindingMode:{kind:"attribute",type:"object",defaultValue:"off",enum:["auto","json","json_xml","off","xml"],description:"Sets the binding mode to use. The default value is off",title:"Binding Mode",required:!1,deprecated:!1},type:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from input to POJO for the incoming data The canonical name of the class of the input data. Append a to the end of the canonical name if you want the input to be an array type.",title:"Type",required:!1,deprecated:!1},outType:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from POJO to output for the outgoing data The canonical name of the class of the input data. Append a to the end of the canonical name if you want the input to be an array type.",title:"Out Type",required:!1,deprecated:!1},skipBindingOnErrorCode:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to skip binding on output if there is a custom HTTP error code header. This allows to build custom error messages that do not bind to json / xml etc as success messages otherwise will do.",title:"Skip Binding On Error Code",required:!1,deprecated:!1},enableCORS:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to enable CORS headers in the HTTP response. The default value is false.",title:"Enable C O R S",required:!1,deprecated:!1},component:{kind:"attribute",type:"string",description:"Sets the component name that this definition will apply to",title:"Component",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},restConfiguration:{type:"object",title:"Rest Configuration",group:"rest",icon:"generic24.png",description:"To configure rest",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{component:{kind:"attribute",type:"string",description:"The Camel Rest component to use for the REST transport (consumer) such as restlet spark-rest. If no component has been explicit configured then Camel will lookup if there is a Camel component that integrates with the Rest DSL or if a org.apache.camel.spi.RestConsumerFactory is registered in the registry. If either one is found then that is being used.",title:"Component",required:!1,deprecated:!1},apiComponent:{kind:"attribute",type:"string",defaultValue:"swagger",description:"The name of the Camel component to use as the REST API (such as swagger)",title:"Api Component",required:!1,deprecated:!1},producerComponent:{kind:"attribute",type:"string",description:"Sets the name of the Camel component to use as the REST producer",title:"Producer Component",required:!1,deprecated:!1},scheme:{kind:"attribute",type:"string",description:"The scheme to use for exposing the REST service. Usually http or https is supported. The default value is http",title:"Scheme",required:!1,deprecated:!1},host:{kind:"attribute",type:"string",description:"The hostname to use for exposing the REST service.",title:"Host",required:!1,deprecated:!1},apiHost:{kind:"attribute",type:"string",description:"To use an specific hostname for the API documentation (eg swagger) This can be used to override the generated host with this configured hostname",title:"Api Host",required:!1,deprecated:!1},port:{kind:"attribute",type:"string",description:"The port number to use for exposing the REST service. Notice if you use servlet component then the port number configured here does not apply as the port number in use is the actual port number the servlet component is using. eg if using Apache Tomcat its the tomcat http port if using Apache Karaf its the HTTP service in Karaf that uses port 8181 by default etc. Though in those situations setting the port number here allows tooling and JMX to know the port number so its recommended to set the port number to the number that the servlet engine uses.",title:"Port",required:!1,deprecated:!1},producerApiDoc:{kind:"attribute",type:"string",description:"Sets the location of the api document (swagger api) the REST producer will use to validate the REST uri and query parameters are valid accordingly to the api document. This requires adding camel-swagger-java to the classpath and any miss configuration will let Camel fail on startup and report the error(s). The location of the api document is loaded from classpath by default but you can use file: or http: to refer to resources to load from file or http url.",title:"Producer Api Doc",required:!1,deprecated:!1},contextPath:{kind:"attribute",type:"string",description:"Sets a leading context-path the REST services will be using. This can be used when using components such as camel-servlet where the deployed web application is deployed using a context-path. Or for components such as camel-jetty or camel-netty4-http that includes a HTTP server.",title:"Context Path",required:!1,deprecated:!1},apiContextPath:{kind:"attribute",type:"string",description:"Sets a leading API context-path the REST API services will be using. This can be used when using components such as camel-servlet where the deployed web application is deployed using a context-path.",title:"Api Context Path",required:!1,deprecated:!1},apiContextRouteId:{kind:"attribute",type:"string",description:"Sets the route id to use for the route that services the REST API. The route will by default use an auto assigned route id.",title:"Api Context Route Id",required:!1,deprecated:!1},apiContextIdPattern:{kind:"attribute",type:"string",description:"Sets an CamelContext id pattern to only allow Rest APIs from rest services within CamelContext's which name matches the pattern. The pattern name refers to the CamelContext name to match on the current CamelContext only. For any other value the pattern uses the rules from link org.apache.camel.util.EndpointHelpermatchPattern(String String)",title:"Api Context Id Pattern",required:!1,deprecated:!1},apiContextListing:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Sets whether listing of all available CamelContext's with REST services in the JVM is enabled. If enabled it allows to discover these contexts if false then only the current CamelContext is in use.",title:"Api Context Listing",required:!1,deprecated:!1},hostNameResolver:{kind:"attribute",type:"object",enum:["allLocalIp","localHostName","localIp"],description:"If no hostname has been explicit configured then this resolver is used to compute the hostname the REST service will be using.",title:"Host Name Resolver",required:!1,deprecated:!1},bindingMode:{kind:"attribute",type:"object",defaultValue:"off",enum:["auto","json","json_xml","off","xml"],description:"Sets the binding mode to use. The default value is off",title:"Binding Mode",required:!1,deprecated:!1},skipBindingOnErrorCode:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to skip binding on output if there is a custom HTTP error code header. This allows to build custom error messages that do not bind to json / xml etc as success messages otherwise will do.",title:"Skip Binding On Error Code",required:!1,deprecated:!1},enableCORS:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to enable CORS headers in the HTTP response. The default value is false.",title:"Enable C O R S",required:!1,deprecated:!1},jsonDataFormat:{kind:"attribute",type:"string",description:"Name of specific json data format to use. By default json-jackson will be used. Important: This option is only for setting a custom name of the data format not to refer to an existing data format instance.",title:"Json Data Format",required:!1,deprecated:!1},xmlDataFormat:{kind:"attribute",type:"string",description:"Name of specific XML data format to use. By default jaxb will be used. Important: This option is only for setting a custom name of the data format not to refer to an existing data format instance.",title:"Xml Data Format",required:!1,deprecated:!1},componentProperty:{kind:"element",type:"array",description:"Allows to configure as many additional properties for the rest component in use.",title:"Component Property",required:!1,deprecated:!1},endpointProperty:{kind:"element",type:"array",description:"Allows to configure as many additional properties for the rest endpoint in use.",title:"Endpoint Property",required:!1,deprecated:!1},consumerProperty:{kind:"element",type:"array",description:"Allows to configure as many additional properties for the rest consumer in use.",title:"Consumer Property",required:!1,deprecated:!1},dataFormatProperty:{kind:"element",type:"array",description:"Allows to configure as many additional properties for the data formats in use. For example set property prettyPrint to true to have json outputted in pretty mode. The properties can be prefixed to denote the option is only for either JSON or XML and for either the IN or the OUT. The prefixes are: json.in. json.out. xml.in. xml.out. For example a key with value xml.out.mustBeJAXBElement is only for the XML data format for the outgoing. A key without a prefix is a common key for all situations.",title:"Data Format Property",required:!1,deprecated:!1},apiProperty:{kind:"element",type:"array",description:"Allows to configure as many additional properties for the api documentation (swagger). For example set property api.title to my cool stuff",title:"Api Property",required:!1,deprecated:!1},corsHeaders:{kind:"element",type:"array",description:"Allows to configure custom CORS headers.",title:"Cors Headers",required:!1,deprecated:!1}}},restContext:{type:"object",title:"Rest Context",group:"spring,configuration,rest",icon:"generic24.png",description:"Configuration of REST services using rest-dsl using XML",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{rest:{kind:"element",type:"array",description:"Contains the rest services defined using the rest-dsl",title:"Rest",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},restContextRef:{type:"object",title:"Rest Context Ref",group:"configuration,rest",icon:"generic24.png",description:"To refer to an XML file with rest services defined using the rest-dsl",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{ref:{kind:"attribute",type:"string",description:"Reference to the rest-dsl",title:"Ref",required:!0,deprecated:!1}}},restProperty:{type:"object",title:"Rest Property",group:"rest",icon:"generic24.png",description:"A key value pair",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{key:{kind:"attribute",type:"string",description:"Property key",title:"Key",required:!0,deprecated:!1},value:{kind:"attribute",type:"string",description:"Property value",title:"Value",required:!0,deprecated:!1}}},rests:{type:"object",title:"Rests",group:"rest",icon:"generic24.png",description:"A series of rest services defined using the rest-dsl",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{rests:{kind:"element",type:"array",description:"Contains the rest services defined using the rest-dsl",title:"Rests",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}},verb:{type:"object",title:"Verb",group:"rest",icon:"generic24.png",description:"Rest command",acceptInput:"false",acceptOutput:"false",nextSiblingAddedAsChild:"false",properties:{method:{kind:"attribute",type:"string",description:"The HTTP verb such as GET POST DELETE etc.",title:"Method",required:!1,deprecated:!1},uri:{kind:"attribute",type:"string",description:"Uri template of this REST service such as /id.",title:"Uri",required:!1,deprecated:!1},consumes:{kind:"attribute",type:"string",description:"To define the content type what the REST service consumes (accept as input) such as application/xml or application/json. This option will override what may be configured on a parent level",title:"Consumes",
required:!1,deprecated:!1},produces:{kind:"attribute",type:"string",description:"To define the content type what the REST service produces (uses for output) such as application/xml or application/json This option will override what may be configured on a parent level",title:"Produces",required:!1,deprecated:!1},bindingMode:{kind:"attribute",type:"object",defaultValue:"auto",enum:["auto","json","json_xml","off","xml"],description:"Sets the binding mode to use. This option will override what may be configured on a parent level The default value is auto",title:"Binding Mode",required:!1,deprecated:!1},skipBindingOnErrorCode:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to skip binding on output if there is a custom HTTP error code header. This allows to build custom error messages that do not bind to json / xml etc as success messages otherwise will do. This option will override what may be configured on a parent level",title:"Skip Binding On Error Code",required:!1,deprecated:!1},enableCORS:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to enable CORS headers in the HTTP response. This option will override what may be configured on a parent level The default value is false.",title:"Enable C O R S",required:!1,deprecated:!1},type:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from input to POJO for the incoming data This option will override what may be configured on a parent level. The canonical name of the class of the input data. Append a to the end of the canonical name if you want the input to be an array type.",title:"Type",required:!1,deprecated:!1},outType:{kind:"attribute",type:"string",description:"Sets the class name to use for binding from POJO to output for the outgoing data This option will override what may be configured on a parent level The canonical name of the class of the input data. Append a to the end of the canonical name if you want the input to be an array type.",title:"Out Type",required:!1,deprecated:!1},toOrRoute:{kind:"element",type:"object",description:"To route from this REST service to a Camel endpoint or an inlined route",title:"To Or Route",required:!0,deprecated:!1},routeId:{kind:"attribute",type:"string",description:"The route id this rest-dsl is using (read-only)",title:"Route Id",required:!1,deprecated:!1},apiDocs:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to include or exclude the VerbDefinition in API documentation. The default value is true.",title:"Api Docs",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1},description:{kind:"element",type:"object",description:"Sets the description of this node",title:"Description",required:!1,deprecated:!1}}}},dataformats:{asn1:{type:"object",title:"ASN.1 File",group:"dataformat,transformation,file",icon:"generic24.png",description:"The ASN.1 data format is used for file transfer with telecommunications protocols.",properties:{usingIterator:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If the asn1 file has more then one entry the setting this option to true allows to work with the splitter EIP to split the data using an iterator in a streaming mode.",title:"Using Iterator",required:!1,deprecated:!1},clazzName:{kind:"attribute",type:"string",description:"Name of class to use when unmarshalling",title:"Clazz Name",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},avro:{type:"object",title:"Avro",group:"dataformat,transformation",icon:"generic24.png",description:"The Avro data format is used for serialization and deserialization of messages using Apache Avro binary dataformat.",properties:{instanceClassName:{kind:"attribute",type:"string",description:"Class name to use for marshal and unmarshalling",title:"Instance Class Name",required:!0,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},barcode:{type:"object",title:"Barcode",group:"dataformat,transformation",icon:"generic24.png",description:"The Barcode data format is used for creating barccode images (such as QR-Code)",properties:{width:{kind:"attribute",type:"integer",description:"Width of the barcode",title:"Width",required:!1,deprecated:!1},height:{kind:"attribute",type:"integer",description:"Height of the barcode",title:"Height",required:!1,deprecated:!1},imageType:{kind:"attribute",type:"string",description:"Image type of the barcode such as png",title:"Image Type",required:!1,deprecated:!1},barcodeFormat:{kind:"attribute",type:"string",description:"Barcode format such as QR-Code",title:"Barcode Format",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},base64:{type:"object",title:"Base64",group:"dataformat,transformation",icon:"generic24.png",description:"The Base64 data format is used for base64 encoding and decoding.",properties:{lineLength:{kind:"attribute",type:"integer",defaultValue:"76",description:"To specific a maximum line length for the encoded data. By default 76 is used.",title:"Line Length",required:!1,deprecated:!1},lineSeparator:{kind:"attribute",type:"string",description:"The line separators to use. Uses new line characters (CRLF) by default.",title:"Line Separator",required:!1,deprecated:!1},urlSafe:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Instead of emitting '' and '/' we emit '-' and '_' respectively. urlSafe is only applied to encode operations. Decoding seamlessly handles both modes. Is by default false.",title:"Url Safe",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},beanio:{type:"object",title:"BeanIO",group:"dataformat,transformation,csv",icon:"generic24.png",description:"The BeanIO data format is used for working with flat payloads (such as CSV delimited or fixed length formats).",properties:{mapping:{kind:"attribute",type:"string",description:"The BeanIO mapping file. Is by default loaded from the classpath. You can prefix with file: http: or classpath: to denote from where to load the mapping file.",title:"Mapping",required:!0,deprecated:!1},streamName:{kind:"attribute",type:"string",description:"The name of the stream to use.",title:"Stream Name",required:!0,deprecated:!1},ignoreUnidentifiedRecords:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to ignore unidentified records.",title:"Ignore Unidentified Records",required:!1,deprecated:!1},ignoreUnexpectedRecords:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to ignore unexpected records.",title:"Ignore Unexpected Records",required:!1,deprecated:!1},ignoreInvalidRecords:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to ignore invalid records.",title:"Ignore Invalid Records",required:!1,deprecated:!1},encoding:{kind:"attribute",type:"string",description:"The charset to use. Is by default the JVM platform default charset.",title:"Encoding",required:!1,deprecated:!1},beanReaderErrorHandlerType:{kind:"attribute",type:"string",description:"To use a custom org.apache.camel.dataformat.beanio.BeanIOErrorHandler as error handler while parsing. Configure the fully qualified class name of the error handler. Notice the options ignoreUnidentifiedRecords ignoreUnexpectedRecords and ignoreInvalidRecords may not be in use when you use a custom error handler.",title:"Bean Reader Error Handler Type",required:!1,deprecated:!1},unmarshalSingleObject:{kind:"attribute",type:"boolean",defaultValue:"false",description:"This options controls whether to unmarshal as a list of objects or as a single object only. The former is the default mode and the latter is only intended in special use-cases where beanio maps the Camel message to a single POJO bean.",title:"Unmarshal Single Object",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},bindy:{type:"object",title:"Bindy",group:"dataformat,transformation,csv",icon:"generic24.png",description:"The Bindy data format is used for working with flat payloads (such as CSV delimited fixed length formats or FIX messages).",properties:{type:{kind:"attribute",type:"object",enum:["Csv","Fixed","KeyValue"],description:"Whether to use csv fixed or key value pairs mode.",title:"Type",required:!0,deprecated:!1},classType:{kind:"attribute",type:"string",description:"Name of model class to use.",title:"Class Type",required:!1,deprecated:!1},locale:{kind:"attribute",type:"string",description:"To configure a default locale to use such as us for united states. To use the JVM platform default locale then use the name default",title:"Locale",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},boon:{type:"object",title:"Boon",group:"dataformat,transformation,json",icon:"generic24.png",description:"Boon data format is used for unmarshal a JSon payload to POJO or to marshal POJO back to JSon payload.",properties:{unmarshalTypeName:{kind:"attribute",type:"string",description:"Class name of the java type to use when unarmshalling",title:"Unmarshal Type Name",required:!0,deprecated:!1},useList:{kind:"attribute",type:"boolean",defaultValue:"false",description:"To unarmshal to a List of Map or a List of Pojo.",title:"Use List",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},castor:{type:"object",title:"Castor",group:"dataformat,transformation,xml",icon:"generic24.png",description:"Castor data format is used for unmarshal a XML payload to POJO or to marshal POJO back to XML payload.",properties:{mappingFile:{kind:"attribute",type:"string",description:"Path to a Castor mapping file to load from the classpath.",title:"Mapping File",required:!1,deprecated:!1},validation:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether validation is turned on or off. Is by default true.",title:"Validation",required:!1,deprecated:!1},encoding:{kind:"attribute",type:"string",defaultValue:"UTF-8",description:"Encoding to use when marshalling an Object to XML. Is by default UTF-8",title:"Encoding",required:!1,deprecated:!1},packages:{kind:"attribute",type:"array",description:"Add additional packages to Castor XmlContext",title:"Packages",required:!1,deprecated:!1},classes:{kind:"attribute",type:"array",description:"Add additional class names to Castor XmlContext",title:"Classes",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},crypto:{type:"object",title:"Crypto (Java Cryptographic Extension)",group:"dataformat,transformation,security",icon:"generic24.png",description:"Crypto data format is used for encrypting and decrypting of messages using Java Cryptographic Extension.",properties:{algorithm:{kind:"attribute",type:"string",defaultValue:"DES/CBC/PKCS5Padding",description:"The JCE algorithm name indicating the cryptographic algorithm that will be used. Is by default DES/CBC/PKCS5Padding.",title:"Algorithm",required:!1,deprecated:!1},cryptoProvider:{kind:"attribute",type:"string",description:"The name of the JCE Security Provider that should be used.",title:"Crypto Provider",required:!1,deprecated:!1},keyRef:{kind:"attribute",type:"string",description:"Refers to the secret key to lookup from the register to use.",title:"Key Ref",required:!1,deprecated:!1},initVectorRef:{kind:"attribute",type:"string",description:"Refers to a byte array containing the Initialization Vector that will be used to initialize the Cipher.",title:"Init Vector Ref",required:!1,deprecated:!1},algorithmParameterRef:{kind:"attribute",type:"string",description:"A JCE AlgorithmParameterSpec used to initialize the Cipher. Will lookup the type using the given name as a java.security.spec.AlgorithmParameterSpec type.",title:"Algorithm Parameter Ref",required:!1,deprecated:!1},buffersize:{kind:"attribute",type:"integer",description:"The size of the buffer used in the signature process.",title:"Buffersize",required:!1,deprecated:!1},macAlgorithm:{kind:"attribute",type:"string",defaultValue:"HmacSHA1",description:"The JCE algorithm name indicating the Message Authentication algorithm.",title:"Mac Algorithm",required:!1,deprecated:!1},shouldAppendHMAC:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Flag indicating that a Message Authentication Code should be calculated and appended to the encrypted data.",title:"Should Append H M A C",required:!1,deprecated:!1},inline:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Flag indicating that the configured IV should be inlined into the encrypted data stream. Is by default false.",title:"Inline",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},csv:{type:"object",title:"CSV",group:"dataformat,transformation,csv",icon:"generic24.png",description:"The CSV data format is used for handling CSV payloads.",properties:{formatRef:{kind:"attribute",type:"string",description:"The reference format to use it will be updated with the other format options the default value is CSVFormat.DEFAULT",title:"Format Ref",required:!1,deprecated:!1},formatName:{kind:"attribute",type:"string",enum:["DEFAULT","EXCEL","INFORMIX_UNLOAD","INFORMIX_UNLOAD_CSV","MYSQL","RFC4180"],description:"The name of the format to use the default value is CSVFormat.DEFAULT",title:"Format Name",required:!1,deprecated:!1},commentMarkerDisabled:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Disables the comment marker of the reference format.",title:"Comment Marker Disabled",required:!1,deprecated:!1},commentMarker:{kind:"attribute",type:"string",description:"Sets the comment marker of the reference format.",title:"Comment Marker",required:!1,deprecated:!1},delimiter:{kind:"attribute",type:"string",description:"Sets the delimiter to use. The default value is (comma)",title:"Delimiter",required:!1,deprecated:!1},escapeDisabled:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Use for disabling using escape character",title:"Escape Disabled",required:!1,deprecated:!1},escape:{kind:"attribute",type:"string",description:"Sets the escape character to use",title:"Escape",required:!1,deprecated:!1},headerDisabled:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Use for disabling headers",title:"Header Disabled",required:!1,deprecated:!1},header:{kind:"element",type:"array",description:"To configure the CSV headers",title:"Header",required:!1,deprecated:!1},allowMissingColumnNames:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to allow missing column names.",title:"Allow Missing Column Names",required:!1,deprecated:!1},ignoreEmptyLines:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to ignore empty lines.",title:"Ignore Empty Lines",required:!1,deprecated:!1},ignoreSurroundingSpaces:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to ignore surrounding spaces",title:"Ignore Surrounding Spaces",required:!1,deprecated:!1},nullStringDisabled:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Used to disable null strings",title:"Null String Disabled",required:!1,deprecated:!1},nullString:{kind:"attribute",type:"string",description:"Sets the null string",title:"Null String",required:!1,deprecated:!1},quoteDisabled:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Used to disable quotes",title:"Quote Disabled",required:!1,deprecated:!1},quote:{kind:"attribute",type:"string",description:"Sets the quote which by default is",title:"Quote",required:!1,deprecated:!1},recordSeparatorDisabled:{kind:"attribute",type:"string",description:"Used for disabling record separator",title:"Record Separator Disabled",required:!1,deprecated:!1},recordSeparator:{kind:"attribute",type:"string",description:"Sets the record separator (aka new line) which by default is new line characters (CRLF)",title:"Record Separator",required:!1,deprecated:!1},skipHeaderRecord:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to skip the header record in the output",title:"Skip Header Record",required:!1,deprecated:!1},quoteMode:{kind:"attribute",type:"string",description:"Sets the quote mode",title:"Quote Mode",required:!1,deprecated:!1},ignoreHeaderCase:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Sets whether or not to ignore case when accessing header names.",title:"Ignore Header Case",required:!1,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Sets whether or not to trim leading and trailing blanks.",title:"Trim",required:!1,deprecated:!1},trailingDelimiter:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Sets whether or not to add a trailing delimiter.",title:"Trailing Delimiter",required:!1,deprecated:!1},lazyLoad:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the unmarshalling should produce an iterator that reads the lines on the fly or if all the lines must be read at one.",title:"Lazy Load",required:!1,deprecated:!1},useMaps:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the unmarshalling should produce maps for the lines values instead of lists. It requires to have header (either defined or collected).",title:"Use Maps",required:!1,deprecated:!1},recordConverterRef:{kind:"attribute",type:"string",description:"Refers to a custom CsvRecordConverter to lookup from the registry to use.",title:"Record Converter Ref",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},customDataFormat:{type:"object",title:"Custom",group:"dataformat,transformation",icon:"customDataFormat24.png",description:"To use a custom data format implementation that does not come out of the box from Apache Camel.",properties:{ref:{kind:"attribute",type:"string",description:"Reference to the custom org.apache.camel.spi.DataFormat to lookup from the Camel registry.",title:"Ref",required:!0,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},dataFormats:{type:"object",title:"Data formats",group:"dataformat,transformation",icon:"generic24.png",description:"To configure data formats",properties:{dataFormats:{kind:"element",type:"array",description:"A list holding the configured data formats",title:"Data Formats",required:!0,deprecated:!1}}},flatpack:{type:"object",title:"Flatpack",group:"dataformat,transformation,csv",icon:"generic24.png",description:"The Flatpack data format is used for working with flat payloads (such as CSV delimited or fixed length formats).",properties:{definition:{kind:"attribute",type:"string",description:"The flatpack pzmap configuration file. Can be omitted in simpler situations but its preferred to use the pzmap.",title:"Definition",required:!1,deprecated:!1},fixed:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Delimited or fixed. Is by default false = delimited",title:"Fixed",required:!1,deprecated:!1},ignoreFirstRecord:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether the first line is ignored for delimited files (for the column headers). Is by default true.",title:"Ignore First Record",required:!1,deprecated:!1},textQualifier:{kind:"attribute",type:"string",description:"If the text is qualified with a character. Uses quote character by default.",title:"Text Qualifier",required:!1,deprecated:!1},delimiter:{kind:"attribute",type:"string",defaultValue:",",description:"The delimiter char (could be ; or similar)",title:"Delimiter",required:!1,deprecated:!1},allowShortLines:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Allows for lines to be shorter than expected and ignores the extra characters",title:"Allow Short Lines",required:!1,deprecated:!1},ignoreExtraColumns:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Allows for lines to be longer than expected and ignores the extra characters.",title:"Ignore Extra Columns",required:!1,deprecated:!1},parserFactoryRef:{kind:"attribute",type:"string",description:"References to a custom parser factory to lookup in the registry",title:"Parser Factory Ref",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},gzip:{type:"object",title:"GZip",group:"dataformat,transformation",icon:"generic24.png",description:"The GZip data format is a message compression and de-compression format (which works with the popular gzip/gunzip tools).",properties:{contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},hessian:{type:"object",title:"Hessian",group:"dataformat,transformation",icon:"generic24.png",description:"Hessian data format is used for marshalling and unmarshalling messages using Cauchos Hessian format.",properties:{contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},hl7:{type:"object",title:"HL7",group:"dataformat,transformation,hl7",icon:"generic24.png",description:"The HL7 data format can be used to marshal or unmarshal HL7 (Health Care) model objects.",properties:{validate:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to validate the HL7 message Is by default true.",title:"Validate",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},ical:{type:"object",title:"iCal",group:"dataformat,transformation",icon:"generic24.png",description:"The iCal dataformat is used for working with iCalendar messages.",properties:{validating:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to validate.",title:"Validating",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},jacksonxml:{type:"object",title:"JacksonXML",group:"dataformat,transformation,xml",icon:"generic24.png",description:"JacksonXML data format is used for unmarshal a XML payload to POJO or to marshal POJO back to XML payload.",properties:{xmlMapper:{kind:"attribute",type:"string",description:"Lookup and use the existing XmlMapper with the given id.",title:"Xml Mapper",required:!1,deprecated:!1},prettyPrint:{kind:"attribute",type:"boolean",defaultValue:"false",description:"To enable pretty printing output nicely formatted. Is by default false.",title:"Pretty Print",required:!1,deprecated:!1},unmarshalTypeName:{kind:"attribute",type:"string",description:"Class name of the java type to use when unarmshalling",title:"Unmarshal Type Name",required:!1,deprecated:!1},jsonView:{kind:"attribute",type:"string",description:"When marshalling a POJO to JSON you might want to exclude certain fields from the JSON output. With Jackson you can use JSON views to accomplish this. This option is to refer to the class which has JsonView annotations",title:"Json View",required:!1,deprecated:!1},include:{kind:"attribute",type:"string",description:"If you want to marshal a pojo to JSON and the pojo has some fields with null values. And you want to skip these null values you can set this option to NOT_NULL",title:"Include",required:!1,deprecated:!1},allowJmsType:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Used for JMS users to allow the JMSType header from the JMS spec to specify a FQN classname to use to unmarshal to.",title:"Allow Jms Type",required:!1,deprecated:!1},collectionTypeName:{kind:"attribute",type:"string",description:"Refers to a custom collection type to lookup in the registry to use. This option should rarely be used but allows to use different collection types than java.util.Collection based as default.",title:"Collection Type Name",required:!1,deprecated:!1},useList:{kind:"attribute",type:"boolean",defaultValue:"false",description:"To unarmshal to a List of Map or a List of Pojo.",title:"Use List",required:!1,deprecated:!1},enableJaxbAnnotationModule:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to enable the JAXB annotations module when using jackson. When enabled then JAXB annotations can be used by Jackson.",title:"Enable Jaxb Annotation Module",required:!1,deprecated:!1},moduleClassNames:{kind:"attribute",type:"string",description:"To use custom Jackson modules com.fasterxml.jackson.databind.Module specified as a String with FQN class names. Multiple classes can be separated by comma.",title:"Module Class Names",required:!1,deprecated:!1},moduleRefs:{kind:"attribute",type:"string",
description:"To use custom Jackson modules referred from the Camel registry. Multiple modules can be separated by comma.",title:"Module Refs",required:!1,deprecated:!1},enableFeatures:{kind:"attribute",type:"string",description:"Set of features to enable on the Jackson com.fasterxml.jackson.databind.ObjectMapper. The features should be a name that matches a enum from com.fasterxml.jackson.databind.SerializationFeature com.fasterxml.jackson.databind.DeserializationFeature or com.fasterxml.jackson.databind.MapperFeature Multiple features can be separated by comma",title:"Enable Features",required:!1,deprecated:!1},disableFeatures:{kind:"attribute",type:"string",description:"Set of features to disable on the Jackson com.fasterxml.jackson.databind.ObjectMapper. The features should be a name that matches a enum from com.fasterxml.jackson.databind.SerializationFeature com.fasterxml.jackson.databind.DeserializationFeature or com.fasterxml.jackson.databind.MapperFeature Multiple features can be separated by comma",title:"Disable Features",required:!1,deprecated:!1},allowUnmarshallType:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If enabled then Jackson is allowed to attempt to use the CamelJacksonUnmarshalType header during the unmarshalling. This should only be enabled when desired to be used.",title:"Allow Unmarshall Type",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},jaxb:{type:"object",title:"JAXB",group:"dataformat,transformation,xml",icon:"generic24.png",description:"JAXB data format uses the JAXB2 XML marshalling standard to unmarshal an XML payload into Java objects or to marshal Java objects into an XML payload.",properties:{contextPath:{kind:"attribute",type:"string",description:"Package name where your JAXB classes are located.",title:"Context Path",required:!0,deprecated:!1},schema:{kind:"attribute",type:"string",description:"To validate against an existing schema. Your can use the prefix classpath: file: or http: to specify how the resource should by resolved. You can separate multiple schema files by using the '' character.",title:"Schema",required:!1,deprecated:!1},prettyPrint:{kind:"attribute",type:"boolean",defaultValue:"false",description:"To enable pretty printing output nicely formatted. Is by default false.",title:"Pretty Print",required:!1,deprecated:!1},objectFactory:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to allow using ObjectFactory classes to create the POJO classes during marshalling. This only applies to POJO classes that has not been annotated with JAXB and providing jaxb.index descriptor files.",title:"Object Factory",required:!1,deprecated:!1},ignoreJAXBElement:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to ignore JAXBElement elements - only needed to be set to false in very special use-cases.",title:"Ignore J A X B Element",required:!1,deprecated:!1},mustBeJAXBElement:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether marhsalling must be java objects with JAXB annotations. And if not then it fails. This option can be set to false to relax that such as when the data is already in XML format.",title:"Must Be J A X B Element",required:!1,deprecated:!1},filterNonXmlChars:{kind:"attribute",type:"boolean",defaultValue:"false",description:"To ignore non xml characheters and replace them with an empty space.",title:"Filter Non Xml Chars",required:!1,deprecated:!1},encoding:{kind:"attribute",type:"string",description:"To overrule and use a specific encoding",title:"Encoding",required:!1,deprecated:!1},fragment:{kind:"attribute",type:"boolean",defaultValue:"false",description:"To turn on marshalling XML fragment trees. By default JAXB looks for XmlRootElement annotation on given class to operate on whole XML tree. This is useful but not always - sometimes generated code does not have XmlRootElement annotation sometimes you need unmarshall only part of tree. In that case you can use partial unmarshalling. To enable this behaviours you need set property partClass. Camel will pass this class to JAXB's unmarshaler.",title:"Fragment",required:!1,deprecated:!1},partClass:{kind:"attribute",type:"string",description:"Name of class used for fragment parsing. See more details at the fragment option.",title:"Part Class",required:!1,deprecated:!1},partNamespace:{kind:"attribute",type:"string",description:"XML namespace to use for fragment parsing. See more details at the fragment option.",title:"Part Namespace",required:!1,deprecated:!1},namespacePrefixRef:{kind:"attribute",type:"string",description:"When marshalling using JAXB or SOAP then the JAXB implementation will automatic assign namespace prefixes such as ns2 ns3 ns4 etc. To control this mapping Camel allows you to refer to a map which contains the desired mapping.",title:"Namespace Prefix Ref",required:!1,deprecated:!1},xmlStreamWriterWrapper:{kind:"attribute",type:"string",description:"To use a custom xml stream writer.",title:"Xml Stream Writer Wrapper",required:!1,deprecated:!1},schemaLocation:{kind:"attribute",type:"string",description:"To define the location of the schema",title:"Schema Location",required:!1,deprecated:!1},noNamespaceSchemaLocation:{kind:"attribute",type:"string",description:"To define the location of the namespaceless schema",title:"No Namespace Schema Location",required:!1,deprecated:!1},jaxbProviderProperties:{kind:"attribute",type:"string",description:"Refers to a custom java.util.Map to lookup in the registry containing custom JAXB provider properties to be used with the JAXB marshaller.",title:"Jaxb Provider Properties",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},jibx:{type:"object",title:"JiBX",group:"dataformat,transformation,xml",icon:"generic24.png",description:"JiBX data format is used for unmarshal a XML payload to POJO or to marshal POJO back to XML payload.",properties:{unmarshallClass:{kind:"attribute",type:"string",description:"Class name to use when unmarshalling from XML to Java.",title:"Unmarshall Class",required:!1,deprecated:!1},bindingName:{kind:"attribute",type:"string",description:"To use a custom binding factory",title:"Binding Name",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},json:{type:"object",title:"JSon",group:"dataformat,transformation,json",icon:"generic24.png",description:"JSon data format is used for unmarshal a JSon payload to POJO or to marshal POJO back to JSon payload.",properties:{objectMapper:{kind:"attribute",type:"string",description:"Lookup and use the existing ObjectMapper with the given id when using Jackson.",title:"Object Mapper",required:!1,deprecated:!1},prettyPrint:{kind:"attribute",type:"boolean",defaultValue:"false",description:"To enable pretty printing output nicely formatted. Is by default false.",title:"Pretty Print",required:!1,deprecated:!1},library:{kind:"attribute",type:"object",defaultValue:"XStream",enum:["Fastjson","Gson","Jackson","Johnzon","XStream"],description:"Which json library to use.",title:"Library",required:!1,deprecated:!1},unmarshalTypeName:{kind:"attribute",type:"string",description:"Class name of the java type to use when unarmshalling",title:"Unmarshal Type Name",required:!1,deprecated:!1},jsonView:{kind:"attribute",type:"string",description:"When marshalling a POJO to JSON you might want to exclude certain fields from the JSON output. With Jackson you can use JSON views to accomplish this. This option is to refer to the class which has JsonView annotations",title:"Json View",required:!1,deprecated:!1},include:{kind:"attribute",type:"string",description:"If you want to marshal a pojo to JSON and the pojo has some fields with null values. And you want to skip these null values you can set this option to NOT_NULL",title:"Include",required:!1,deprecated:!1},allowJmsType:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Used for JMS users to allow the JMSType header from the JMS spec to specify a FQN classname to use to unmarshal to.",title:"Allow Jms Type",required:!1,deprecated:!1},collectionTypeName:{kind:"attribute",type:"string",description:"Refers to a custom collection type to lookup in the registry to use. This option should rarely be used but allows to use different collection types than java.util.Collection based as default.",title:"Collection Type Name",required:!1,deprecated:!1},useList:{kind:"attribute",type:"boolean",defaultValue:"false",description:"To unarmshal to a List of Map or a List of Pojo.",title:"Use List",required:!1,deprecated:!1},enableJaxbAnnotationModule:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to enable the JAXB annotations module when using jackson. When enabled then JAXB annotations can be used by Jackson.",title:"Enable Jaxb Annotation Module",required:!1,deprecated:!1},moduleClassNames:{kind:"attribute",type:"string",description:"To use custom Jackson modules com.fasterxml.jackson.databind.Module specified as a String with FQN class names. Multiple classes can be separated by comma.",title:"Module Class Names",required:!1,deprecated:!1},moduleRefs:{kind:"attribute",type:"string",description:"To use custom Jackson modules referred from the Camel registry. Multiple modules can be separated by comma.",title:"Module Refs",required:!1,deprecated:!1},enableFeatures:{kind:"attribute",type:"string",description:"Set of features to enable on the Jackson com.fasterxml.jackson.databind.ObjectMapper. The features should be a name that matches a enum from com.fasterxml.jackson.databind.SerializationFeature com.fasterxml.jackson.databind.DeserializationFeature or com.fasterxml.jackson.databind.MapperFeature Multiple features can be separated by comma",title:"Enable Features",required:!1,deprecated:!1},disableFeatures:{kind:"attribute",type:"string",description:"Set of features to disable on the Jackson com.fasterxml.jackson.databind.ObjectMapper. The features should be a name that matches a enum from com.fasterxml.jackson.databind.SerializationFeature com.fasterxml.jackson.databind.DeserializationFeature or com.fasterxml.jackson.databind.MapperFeature Multiple features can be separated by comma",title:"Disable Features",required:!1,deprecated:!1},permissions:{kind:"attribute",type:"string",description:"Adds permissions that controls which Java packages and classes XStream is allowed to use during unmarshal from xml/json to Java beans. A permission must be configured either here or globally using a JVM system property. The permission can be specified in a syntax where a plus sign is allow and minus sign is deny. Wildcards is supported by using . as prefix. For example to allow com.foo and all subpackages then specfy com.foo.. Multiple permissions can be configured separated by comma such as com.foo.-com.foo.bar.MySecretBean. The following default permission is always included: -java.lang.java.util. unless its overridden by specifying a JVM system property with they key org.apache.camel.xstream.permissions.",title:"Permissions",required:!1,deprecated:!1},allowUnmarshallType:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If enabled then Jackson is allowed to attempt to use the CamelJacksonUnmarshalType header during the unmarshalling. This should only be enabled when desired to be used.",title:"Allow Unmarshall Type",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},lzf:{type:"object",title:"LZF Deflate Compression",group:"dataformat,transformation",icon:"generic24.png",description:"The LZF data format is a message compression and de-compression format (uses the LZF deflate algorithm).",properties:{usingParallelCompression:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Enable encoding (compress) using multiple processing cores.",title:"Using Parallel Compression",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},"mime-multipart":{type:"object",title:"MIME Multipart",group:"dataformat,transformation",icon:"generic24.png",description:"The MIME Multipart data format can marshal a Camel message with attachments into a Camel message having a MIME-Multipart message as message body (and no attachments) and vise-versa when unmarshalling.",properties:{multipartSubType:{kind:"attribute",type:"string",defaultValue:"mixed",description:"Specify the subtype of the MIME Multipart. Default is mixed.",title:"Multipart Sub Type",required:!1,deprecated:!1},multipartWithoutAttachment:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Defines whether a message without attachment is also marshaled into a MIME Multipart (with only one body part). Default is false.",title:"Multipart Without Attachment",required:!1,deprecated:!1},headersInline:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Defines whether the MIME-Multipart headers are part of the message body (true) or are set as Camel headers (false). Default is false.",title:"Headers Inline",required:!1,deprecated:!1},includeHeaders:{kind:"attribute",type:"string",description:"A regex that defines which Camel headers are also included as MIME headers into the MIME multipart. This will only work if headersInline is set to true. Default is to include no headers",title:"Include Headers",required:!1,deprecated:!1},binaryContent:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Defines whether the content of binary parts in the MIME multipart is binary (true) or Base-64 encoded (false) Default is false.",title:"Binary Content",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},pgp:{type:"object",title:"PGP",group:"dataformat,transformation,security",icon:"generic24.png",description:"PGP data format is used for encrypting and decrypting of messages using Java Cryptographic Extension and PGP.",properties:{keyUserid:{kind:"attribute",type:"string",description:"The user ID of the key in the PGP keyring used during encryption. Can also be only a part of a user ID. For example if the user ID is Test User then you can use the part Test User or to address the user ID.",title:"Key Userid",required:!1,deprecated:!1},signatureKeyUserid:{kind:"attribute",type:"string",description:"User ID of the key in the PGP keyring used for signing (during encryption) or signature verification (during decryption). During the signature verification process the specified User ID restricts the public keys from the public keyring which can be used for the verification. If no User ID is specified for the signature verficiation then any public key in the public keyring can be used for the verification. Can also be only a part of a user ID. For example if the user ID is Test User then you can use the part Test User or to address the User ID.",title:"Signature Key Userid",required:!1,deprecated:!1},password:{kind:"attribute",type:"string",description:"Password used when opening the private key (not used for encryption).",title:"Password",required:!1,deprecated:!1},signaturePassword:{kind:"attribute",type:"string",description:"Password used when opening the private key used for signing (during encryption).",title:"Signature Password",required:!1,deprecated:!1},keyFileName:{kind:"attribute",type:"string",description:"Filename of the keyring; must be accessible as a classpath resource (but you can specify a location in the file system by using the file: prefix).",title:"Key File Name",required:!1,deprecated:!1},signatureKeyFileName:{kind:"attribute",type:"string",description:"Filename of the keyring to use for signing (during encryption) or for signature verification (during decryption); must be accessible as a classpath resource (but you can specify a location in the file system by using the file: prefix).",title:"Signature Key File Name",required:!1,deprecated:!1},signatureKeyRing:{kind:"attribute",type:"string",description:"Keyring used for signing/verifying as byte array. You can not set the signatureKeyFileName and signatureKeyRing at the same time.",title:"Signature Key Ring",required:!1,deprecated:!1},armored:{kind:"attribute",type:"boolean",defaultValue:"false",description:"This option will cause PGP to base64 encode the encrypted text making it available for copy/paste etc.",title:"Armored",required:!1,deprecated:!1},integrity:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Adds an integrity check/sign into the encryption file. The default value is true.",title:"Integrity",required:!1,deprecated:!1},provider:{kind:"attribute",type:"string",description:"Java Cryptography Extension (JCE) provider default is Bouncy Castle (BC). Alternatively you can use for example the IAIK JCE provider; in this case the provider must be registered beforehand and the Bouncy Castle provider must not be registered beforehand. The Sun JCE provider does not work.",title:"Provider",required:!1,deprecated:!1},algorithm:{kind:"attribute",type:"integer",description:"Symmetric key encryption algorithm; possible values are defined in org.bouncycastle.bcpg.SymmetricKeyAlgorithmTags; for example 2 (= TRIPLE DES) 3 (= CAST5) 4 (= BLOWFISH) 6 (= DES) 7 (= AES_128). Only relevant for encrypting.",title:"Algorithm",required:!1,deprecated:!1},compressionAlgorithm:{kind:"attribute",type:"integer",description:"Compression algorithm; possible values are defined in org.bouncycastle.bcpg.CompressionAlgorithmTags; for example 0 (= UNCOMPRESSED) 1 (= ZIP) 2 (= ZLIB) 3 (= BZIP2). Only relevant for encrypting.",title:"Compression Algorithm",required:!1,deprecated:!1},hashAlgorithm:{kind:"attribute",type:"integer",description:"Signature hash algorithm; possible values are defined in org.bouncycastle.bcpg.HashAlgorithmTags; for example 2 (= SHA1) 8 (= SHA256) 9 (= SHA384) 10 (= SHA512) 11 (=SHA224). Only relevant for signing.",title:"Hash Algorithm",required:!1,deprecated:!1},signatureVerificationOption:{kind:"attribute",type:"string",description:"Controls the behavior for verifying the signature during unmarshaling. There are 4 values possible: optional: The PGP message may or may not contain signatures; if it does contain signatures then a signature verification is executed. required: The PGP message must contain at least one signature; if this is not the case an exception (PGPException) is thrown. A signature verification is executed. ignore: Contained signatures in the PGP message are ignored; no signature verification is executed. no_signature_allowed: The PGP message must not contain a signature; otherwise an exception (PGPException) is thrown.",title:"Signature Verification Option",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},protobuf:{type:"object",title:"Protobuf",group:"dataformat,transformation",icon:"generic24.png",description:"The Protobuf data format is used for serializing between Java objects and the Google Protobuf protocol.",properties:{instanceClass:{kind:"attribute",type:"string",description:"Name of class to use when unarmshalling",title:"Instance Class",required:!1,deprecated:!1},contentTypeFormat:{kind:"attribute",type:"string",defaultValue:"native",enum:["json","native"],description:"Defines a content type format in which protobuf message will be serialized/deserialized from(to) the Java been. The format can either be native or json for either native protobuf or json fields representation. The default value is native.",title:"Content Type Format",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},rss:{type:"object",title:"RSS",group:"dataformat,transformation",icon:"generic24.png",description:"RSS data format is used for working with RSS sync feed Java Objects and transforming to XML and vice-versa.",properties:{contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},secureXML:{type:"object",title:"XML Security",group:"dataformat,transformation,xml,security",icon:"generic24.png",description:"The XML Security data format facilitates encryption and decryption of XML payloads.",properties:{xmlCipherAlgorithm:{kind:"attribute",type:"string",defaultValue:"TRIPLEDES",description:"The cipher algorithm to be used for encryption/decryption of the XML message content. The available choices are: XMLCipher.TRIPLEDES XMLCipher.AES_128 XMLCipher.AES_128_GCM XMLCipher.AES_192 XMLCipher.AES_192_GCM XMLCipher.AES_256 XMLCipher.AES_256_GCM XMLCipher.SEED_128 XMLCipher.CAMELLIA_128 XMLCipher.CAMELLIA_192 XMLCipher.CAMELLIA_256 The default value is MLCipher.TRIPLEDES",title:"Xml Cipher Algorithm",required:!1,deprecated:!1},passPhrase:{kind:"attribute",type:"string",description:"A String used as passPhrase to encrypt/decrypt content. The passPhrase has to be provided. If no passPhrase is specified a default passPhrase is used. The passPhrase needs to be put together in conjunction with the appropriate encryption algorithm. For example using TRIPLEDES the passPhase can be a Only another 24 Byte key",title:"Pass Phrase",required:!1,deprecated:!1},secureTag:{kind:"attribute",type:"string",description:"The XPath reference to the XML Element selected for encryption/decryption. If no tag is specified the entire payload is encrypted/decrypted.",title:"Secure Tag",required:!1,deprecated:!1},secureTagContents:{kind:"attribute",type:"boolean",defaultValue:"false",description:"A boolean value to specify whether the XML Element is to be encrypted or the contents of the XML Element false = Element Level true = Element Content Level",title:"Secure Tag Contents",required:!1,deprecated:!1},keyCipherAlgorithm:{kind:"attribute",type:"string",defaultValue:"RSA_OAEP",description:"The cipher algorithm to be used for encryption/decryption of the asymmetric key. The available choices are: XMLCipher.RSA_v1dot5 XMLCipher.RSA_OAEP XMLCipher.RSA_OAEP_11 The default value is XMLCipher.RSA_OAEP",title:"Key Cipher Algorithm",required:!1,deprecated:!1},recipientKeyAlias:{kind:"attribute",type:"string",description:"The key alias to be used when retrieving the recipient's public or private key from a KeyStore when performing asymmetric key encryption or decryption.",title:"Recipient Key Alias",required:!1,deprecated:!1},keyOrTrustStoreParametersId:{kind:"attribute",type:"string",description:"Refers to a KeyStore instance to lookup in the registry which is used for configuration options for creating and loading a KeyStore instance that represents the sender's trustStore or recipient's keyStore.",title:"Key Or Trust Store Parameters Id",required:!1,deprecated:!1},keyPassword:{kind:"attribute",type:"string",description:"The password to be used for retrieving the private key from the KeyStore. This key is used for asymmetric decryption.",title:"Key Password",required:!1,deprecated:!1},digestAlgorithm:{kind:"attribute",type:"string",defaultValue:"SHA1",description:"The digest algorithm to use with the RSA OAEP algorithm. The available choices are: XMLCipher.SHA1 XMLCipher.SHA256 XMLCipher.SHA512 The default value is XMLCipher.SHA1",title:"Digest Algorithm",required:!1,deprecated:!1},mgfAlgorithm:{kind:"attribute",type:"string",defaultValue:"MGF1_SHA1",description:"The MGF Algorithm to use with the RSA OAEP algorithm. The available choices are: EncryptionConstants.MGF1_SHA1 EncryptionConstants.MGF1_SHA256 EncryptionConstants.MGF1_SHA512 The default value is EncryptionConstants.MGF1_SHA1",title:"Mgf Algorithm",required:!1,deprecated:!1},addKeyValueForEncryptedKey:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to add the public key used to encrypt the session key as a KeyValue in the EncryptedKey structure or not.",title:"Add Key Value For Encrypted Key",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},serialization:{type:"object",title:"Java Object Serialization",group:"dataformat,transformation,core",icon:"generic24.png",description:"Serialization is a data format which uses the standard Java Serialization mechanism to unmarshal a binary payload into Java objects or to marshal Java objects into a binary blob.",properties:{contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},soapjaxb:{type:"object",title:"SOAP",group:"dataformat,transformation,xml",icon:"generic24.png",description:"SOAP is a data format which uses JAXB2 and JAX-WS annotations to marshal and unmarshal SOAP payloads.",properties:{contextPath:{kind:"attribute",type:"string",description:"Package name where your JAXB classes are located.",title:"Context Path",required:!0,deprecated:!1},encoding:{kind:"attribute",type:"string",description:"To overrule and use a specific encoding",title:"Encoding",required:!1,deprecated:!1},elementNameStrategyRef:{kind:"attribute",type:"string",description:"Refers to an element strategy to lookup from the registry. An element name strategy is used for two purposes. The first is to find a xml element name for a given object and soap action when marshaling the object into a SOAP message. The second is to find an Exception class for a given soap fault name. The following three element strategy class name is provided out of the box. QNameStrategy - Uses a fixed qName that is configured on instantiation. Exception lookup is not supported TypeNameStrategy - Uses the name and namespace from the XMLType annotation of the given type. If no namespace is set then package-info is used. Exception lookup is not supported ServiceInterfaceStrategy - Uses information from a webservice interface to determine the type name and to find the exception class for a SOAP fault All three classes is located in the package name org.apache.camel.dataformat.soap.name If you have generated the web service stub code with cxf-codegen or a similar tool then you probably will want to use the ServiceInterfaceStrategy. In the case you have no annotated service interface you should use QNameStrategy or TypeNameStrategy.",title:"Element Name Strategy Ref",required:!1,deprecated:!1},version:{kind:"attribute",type:"string",defaultValue:"1.1",description:"SOAP version should either be 1.1 or 1.2. Is by default 1.1",title:"Version",required:!1,deprecated:!1},namespacePrefixRef:{kind:"attribute",type:"string",description:"When marshalling using JAXB or SOAP then the JAXB implementation will automatic assign namespace prefixes such as ns2 ns3 ns4 etc. To control this mapping Camel allows you to refer to a map which contains the desired mapping.",title:"Namespace Prefix Ref",required:!1,deprecated:!1},schema:{kind:"attribute",type:"string",description:"To validate against an existing schema. Your can use the prefix classpath: file: or http: to specify how the resource should by resolved. You can separate multiple schema files by using the '' character.",title:"Schema",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",
defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},string:{type:"object",title:"String Encoding",group:"dataformat,transformation,core",icon:"generic24.png",description:"String data format is a textual based format that supports character encoding.",properties:{charset:{kind:"attribute",type:"string",description:"Sets an encoding to use. Will by default use the JVM platform default charset.",title:"Charset",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},syslog:{type:"object",title:"Syslog",group:"dataformat,transformation,monitoring",icon:"generic24.png",description:"The Syslog dataformat is used for working with RFC3164 and RFC5424 messages (logging and monitoring).",properties:{contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},tarfile:{type:"object",title:"Tar File",group:"dataformat,transformation,file",icon:"generic24.png",description:"The Tar File data format is a message compression and de-compression format of tar files.",properties:{usingIterator:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If the tar file has more then one entry the setting this option to true allows to work with the splitter EIP to split the data using an iterator in a streaming mode.",title:"Using Iterator",required:!1,deprecated:!1},allowEmptyDirectory:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If the tar file has more then one entry setting this option to true allows to get the iterator even if the directory is empty",title:"Allow Empty Directory",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},thrift:{type:"object",title:"Thrift",group:"dataformat,transformation",icon:"generic24.png",description:"The Thrift data format is used for serialization and deserialization of messages using Apache Thrift binary dataformat.",properties:{instanceClass:{kind:"attribute",type:"string",description:"Name of class to use when unarmshalling",title:"Instance Class",required:!1,deprecated:!1},contentTypeFormat:{kind:"attribute",type:"string",defaultValue:"binary",enum:["binary","json","sjson"],description:"Defines a content type format in which thrift message will be serialized/deserialized from(to) the Java been. The format can either be native or json for either native binary thrift json or simple json fields representation. The default value is binary.",title:"Content Type Format",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},tidyMarkup:{type:"object",title:"TidyMarkup",group:"dataformat,transformation",icon:"generic24.png",description:"TidyMarkup data format is used for parsing HTML and return it as pretty well-formed HTML.",properties:{dataObjectType:{kind:"attribute",type:"string",defaultValue:"org.w3c.dom.Node",description:"What data type to unmarshal as can either be org.w3c.dom.Node or java.lang.String. Is by default org.w3c.dom.Node",title:"Data Object Type",required:!1,deprecated:!1},omitXmlDeclaration:{kind:"attribute",type:"boolean",defaultValue:"false",description:"When returning a String do we omit the XML declaration in the top.",title:"Omit Xml Declaration",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},typeFilter:{type:"object",title:"YAML Type Filter",group:"dataformat,transformation,yaml",icon:"generic24.png",description:"",properties:{value:{kind:"attribute",type:"string",description:"Value of type such as class name or regular expression",title:"Value",required:!1,deprecated:!1},type:{kind:"attribute",type:"object",enum:["regexp","type"],description:"Whether to filter by class type or regular expression",title:"Type",required:!1,deprecated:!1}}},"univocity-csv":{type:"object",title:"uniVocity CSV",group:"dataformat,transformation,csv",icon:"generic24.png",description:"The uniVocity CSV data format is used for working with CSV (Comma Separated Values) flat payloads.",properties:{quoteAllFields:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether or not all values must be quoted when writing them.",title:"Quote All Fields",required:!1,deprecated:!1},quote:{kind:"attribute",type:"string",defaultValue:'"',description:"The quote symbol.",title:"Quote",required:!1,deprecated:!1},quoteEscape:{kind:"attribute",type:"string",defaultValue:'"',description:"The quote escape symbol",title:"Quote Escape",required:!1,deprecated:!1},delimiter:{kind:"attribute",type:"string",defaultValue:",",description:"The delimiter of values",title:"Delimiter",required:!1,deprecated:!1},nullValue:{kind:"attribute",type:"string",description:"The string representation of a null value. The default value is null",title:"Null Value",required:!1,deprecated:!1},skipEmptyLines:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether or not the empty lines must be ignored. The default value is true",title:"Skip Empty Lines",required:!1,deprecated:!1},ignoreTrailingWhitespaces:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether or not the trailing white spaces must ignored. The default value is true",title:"Ignore Trailing Whitespaces",required:!1,deprecated:!1},ignoreLeadingWhitespaces:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether or not the leading white spaces must be ignored. The default value is true",title:"Ignore Leading Whitespaces",required:!1,deprecated:!1},headersDisabled:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether or not the headers are disabled. When defined this option explicitly sets the headers as null which indicates that there is no header. The default value is false",title:"Headers Disabled",required:!1,deprecated:!1},headerExtractionEnabled:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether or not the header must be read in the first line of the test document The default value is false",title:"Header Extraction Enabled",required:!1,deprecated:!1},numberOfRecordsToRead:{kind:"attribute",type:"integer",description:"The maximum number of record to read.",title:"Number Of Records To Read",required:!1,deprecated:!1},emptyValue:{kind:"attribute",type:"string",description:"The String representation of an empty value",title:"Empty Value",required:!1,deprecated:!1},lineSeparator:{kind:"attribute",type:"string",description:"The line separator of the files The default value is to use the JVM platform line separator",title:"Line Separator",required:!1,deprecated:!1},normalizedLineSeparator:{kind:"attribute",type:"string",defaultValue:"\n",description:"The normalized line separator of the files The default value is a new line character.",title:"Normalized Line Separator",required:!1,deprecated:!1},comment:{kind:"attribute",type:"string",defaultValue:"#",description:"The comment symbol. The default value is",title:"Comment",required:!1,deprecated:!1},lazyLoad:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the unmarshalling should produce an iterator that reads the lines on the fly or if all the lines must be read at one. The default value is false",title:"Lazy Load",required:!1,deprecated:!1},asMap:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the unmarshalling should produce maps for the lines values instead of lists. It requires to have header (either defined or collected). The default value is false",title:"As Map",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},"univocity-fixed":{type:"object",title:"uniVocity Fixed Length",group:"dataformat,transformation,csv",icon:"generic24.png",description:"The uniVocity Fixed Length data format is used for working with fixed length flat payloads.",properties:{skipTrailingCharsUntilNewline:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether or not the trailing characters until new line must be ignored. The default value is false",title:"Skip Trailing Chars Until Newline",required:!1,deprecated:!1},recordEndsOnNewline:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether or not the record ends on new line. The default value is false",title:"Record Ends On Newline",required:!1,deprecated:!1},padding:{kind:"attribute",type:"string",description:"The padding character. The default value is a space",title:"Padding",required:!1,deprecated:!1},nullValue:{kind:"attribute",type:"string",description:"The string representation of a null value. The default value is null",title:"Null Value",required:!1,deprecated:!1},skipEmptyLines:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether or not the empty lines must be ignored. The default value is true",title:"Skip Empty Lines",required:!1,deprecated:!1},ignoreTrailingWhitespaces:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether or not the trailing white spaces must ignored. The default value is true",title:"Ignore Trailing Whitespaces",required:!1,deprecated:!1},ignoreLeadingWhitespaces:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether or not the leading white spaces must be ignored. The default value is true",title:"Ignore Leading Whitespaces",required:!1,deprecated:!1},headersDisabled:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether or not the headers are disabled. When defined this option explicitly sets the headers as null which indicates that there is no header. The default value is false",title:"Headers Disabled",required:!1,deprecated:!1},headerExtractionEnabled:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether or not the header must be read in the first line of the test document The default value is false",title:"Header Extraction Enabled",required:!1,deprecated:!1},numberOfRecordsToRead:{kind:"attribute",type:"integer",description:"The maximum number of record to read.",title:"Number Of Records To Read",required:!1,deprecated:!1},emptyValue:{kind:"attribute",type:"string",description:"The String representation of an empty value",title:"Empty Value",required:!1,deprecated:!1},lineSeparator:{kind:"attribute",type:"string",description:"The line separator of the files The default value is to use the JVM platform line separator",title:"Line Separator",required:!1,deprecated:!1},normalizedLineSeparator:{kind:"attribute",type:"string",defaultValue:"\n",description:"The normalized line separator of the files The default value is a new line character.",title:"Normalized Line Separator",required:!1,deprecated:!1},comment:{kind:"attribute",type:"string",defaultValue:"#",description:"The comment symbol. The default value is",title:"Comment",required:!1,deprecated:!1},lazyLoad:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the unmarshalling should produce an iterator that reads the lines on the fly or if all the lines must be read at one. The default value is false",title:"Lazy Load",required:!1,deprecated:!1},asMap:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the unmarshalling should produce maps for the lines values instead of lists. It requires to have header (either defined or collected). The default value is false",title:"As Map",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},"univocity-header":{type:"object",title:"uniVocity Header",group:"dataformat,transformation,csv",icon:"generic24.png",description:"To configure headers for UniVocity data formats.",properties:{name:{kind:"value",type:"string",description:"Header name",title:"Name",required:!0,deprecated:!1},length:{kind:"attribute",type:"integer",description:"Header length",title:"Length",required:!1,deprecated:!1}}},"univocity-tsv":{type:"object",title:"uniVocity TSV",group:"dataformat,transformation,csv",icon:"generic24.png",description:"The uniVocity TSV data format is used for working with TSV (Tabular Separated Values) flat payloads.",properties:{escapeChar:{kind:"attribute",type:"string",defaultValue:"\\",description:"The escape character.",title:"Escape Char",required:!1,deprecated:!1},nullValue:{kind:"attribute",type:"string",description:"The string representation of a null value. The default value is null",title:"Null Value",required:!1,deprecated:!1},skipEmptyLines:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether or not the empty lines must be ignored. The default value is true",title:"Skip Empty Lines",required:!1,deprecated:!1},ignoreTrailingWhitespaces:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether or not the trailing white spaces must ignored. The default value is true",title:"Ignore Trailing Whitespaces",required:!1,deprecated:!1},ignoreLeadingWhitespaces:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether or not the leading white spaces must be ignored. The default value is true",title:"Ignore Leading Whitespaces",required:!1,deprecated:!1},headersDisabled:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether or not the headers are disabled. When defined this option explicitly sets the headers as null which indicates that there is no header. The default value is false",title:"Headers Disabled",required:!1,deprecated:!1},headerExtractionEnabled:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether or not the header must be read in the first line of the test document The default value is false",title:"Header Extraction Enabled",required:!1,deprecated:!1},numberOfRecordsToRead:{kind:"attribute",type:"integer",description:"The maximum number of record to read.",title:"Number Of Records To Read",required:!1,deprecated:!1},emptyValue:{kind:"attribute",type:"string",description:"The String representation of an empty value",title:"Empty Value",required:!1,deprecated:!1},lineSeparator:{kind:"attribute",type:"string",description:"The line separator of the files The default value is to use the JVM platform line separator",title:"Line Separator",required:!1,deprecated:!1},normalizedLineSeparator:{kind:"attribute",type:"string",defaultValue:"\n",description:"The normalized line separator of the files The default value is a new line character.",title:"Normalized Line Separator",required:!1,deprecated:!1},comment:{kind:"attribute",type:"string",defaultValue:"#",description:"The comment symbol. The default value is",title:"Comment",required:!1,deprecated:!1},lazyLoad:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the unmarshalling should produce an iterator that reads the lines on the fly or if all the lines must be read at one. The default value is false",title:"Lazy Load",required:!1,deprecated:!1},asMap:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the unmarshalling should produce maps for the lines values instead of lists. It requires to have header (either defined or collected). The default value is false",title:"As Map",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},xmlBeans:{type:"object",title:"XML Beans",group:"dataformat,transformation,xml",icon:"generic24.png",description:"XML Beans data format is used for unmarshal a XML payload to POJO or to marshal POJO back to XML payload.",properties:{prettyPrint:{kind:"attribute",type:"boolean",defaultValue:"false",description:"To enable pretty printing output nicely formatted. Is by default false.",title:"Pretty Print",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},xmljson:{type:"object",title:"XML JSon",group:"dataformat,transformation,xml,json",icon:"generic24.png",description:"XML JSon data format can convert from XML to JSON and vice-versa directly without stepping through intermediate POJOs.",properties:{encoding:{kind:"attribute",type:"string",description:"Sets the encoding. Used for unmarshalling (JSON to XML conversion).",title:"Encoding",required:!1,deprecated:!1},elementName:{kind:"attribute",type:"string",description:"Specifies the name of the XML elements representing each array element. Used for unmarshalling (JSON to XML conversion).",title:"Element Name",required:!1,deprecated:!1},arrayName:{kind:"attribute",type:"string",description:"Specifies the name of the top-level XML element. Used for unmarshalling (JSON to XML conversion). For example when converting 1 2 3 it will be output by default as 123. By setting this option or rootName you can alter the name of element 'a'.",title:"Array Name",required:!1,deprecated:!1},forceTopLevelObject:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Determines whether the resulting JSON will start off with a top-most element whose name matches the XML root element. Used for marshalling (XML to JSon conversion). If disabled XML string 12 turns into 'x: '1' 'y': '2' . Otherwise it turns into 'a': 'x: '1' 'y': '2' .",title:"Force Top Level Object",required:!1,deprecated:!1},namespaceLenient:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Flag to be tolerant to incomplete namespace prefixes. Used for unmarshalling (JSON to XML conversion). In most cases json-lib automatically changes this flag at runtime to match the processing.",title:"Namespace Lenient",required:!1,deprecated:!1},rootName:{kind:"attribute",type:"string",description:"Specifies the name of the top-level element. Used for unmarshalling (JSON to XML conversion). If not set json-lib will use arrayName or objectName (default value: 'o' at the current time it is not configurable in this data format). If set to 'root' the JSON string 'x': 'value1' 'y' : 'value2' would turn into value1value2 otherwise the 'root' element would be named 'o'.",title:"Root Name",required:!1,deprecated:!1},skipWhitespace:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Determines whether white spaces between XML elements will be regarded as text values or disregarded. Used for marshalling (XML to JSon conversion).",title:"Skip Whitespace",required:!1,deprecated:!1},trimSpaces:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Determines whether leading and trailing white spaces will be omitted from String values. Used for marshalling (XML to JSon conversion).",title:"Trim Spaces",required:!1,deprecated:!1},skipNamespaces:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Signals whether namespaces should be ignored. By default they will be added to the JSON output using xmlns elements. Used for marshalling (XML to JSon conversion).",title:"Skip Namespaces",required:!1,deprecated:!1},removeNamespacePrefixes:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Removes the namespace prefixes from XML qualified elements so that the resulting JSON string does not contain them. Used for marshalling (XML to JSon conversion).",title:"Remove Namespace Prefixes",required:!1,deprecated:!1},expandableProperties:{kind:"attribute",type:"array",description:"With expandable properties JSON array elements are converted to XML as a sequence of repetitive XML elements with the local name equal to the JSON key for example: number: 123 normally converted to: 123 (where e can be modified by setting elementName) would instead translate to 123 if number is set as an expandable property Used for unmarshalling (JSON to XML conversion).",title:"Expandable Properties",required:!1,deprecated:!1},typeHints:{kind:"attribute",type:"string",description:"Adds type hints to the resulting XML to aid conversion back to JSON. Used for unmarshalling (JSON to XML conversion).",title:"Type Hints",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},xmlrpc:{type:"object",title:"XML RPC",group:"dataformat,transformation,xml",icon:"generic24.png",description:"The XML RPC data format is used for working with the XML RPC protocol.",properties:{request:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to marshal/unmarshal request or response Is by default false",title:"Request",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},xstream:{type:"object",title:"XStream",group:"dataformat,transformation,xml,json",icon:"generic24.png",description:"XSTream data format is used for unmarshal a XML payload to POJO or to marshal POJO back to XML payload.",properties:{permissions:{kind:"attribute",type:"string",description:"Adds permissions that controls which Java packages and classes XStream is allowed to use during unmarshal from xml/json to Java beans. A permission must be configured either here or globally using a JVM system property. The permission can be specified in a syntax where a plus sign is allow and minus sign is deny. Wildcards is supported by using . as prefix. For example to allow com.foo and all subpackages then specfy com.foo.. Multiple permissions can be configured separated by comma such as com.foo.-com.foo.bar.MySecretBean. The following default permission is always included: -java.lang.java.util. unless its overridden by specifying a JVM system property with they key org.apache.camel.xstream.permissions.",title:"Permissions",required:!1,deprecated:!1},encoding:{kind:"attribute",type:"string",description:"Sets the encoding to use",title:"Encoding",required:!1,deprecated:!1},driver:{kind:"attribute",type:"string",description:"To use a custom XStream driver. The instance must be of type com.thoughtworks.xstream.io.HierarchicalStreamDriver",title:"Driver",required:!1,deprecated:!1},driverRef:{kind:"attribute",type:"string",description:"To refer to a custom XStream driver to lookup in the registry. The instance must be of type com.thoughtworks.xstream.io.HierarchicalStreamDriver",title:"Driver Ref",required:!1,deprecated:!1},mode:{kind:"attribute",type:"string",description:"Mode for dealing with duplicate references The possible values are: NO_REFERENCES ID_REFERENCES XPATH_RELATIVE_REFERENCES XPATH_ABSOLUTE_REFERENCES SINGLE_NODE_XPATH_RELATIVE_REFERENCES SINGLE_NODE_XPATH_ABSOLUTE_REFERENCES",title:"Mode",required:!1,deprecated:!1},converters:{kind:"element",type:"array",description:"List of class names for using custom XStream converters. The classes must be of type com.thoughtworks.xstream.converters.Converter",title:"Converters",required:!1,deprecated:!1},aliases:{kind:"element",type:"object",description:"Alias a Class to a shorter name to be used in XML elements.",title:"Aliases",required:!1,deprecated:!1},omitFields:{kind:"element",type:"object",description:"Prevents a field from being serialized. To omit a field you must always provide the declaring type and not necessarily the type that is converted.",title:"Omit Fields",required:!1,deprecated:!1},implicitCollections:{kind:"element",type:"object",description:"Adds a default implicit collection which is used for any unmapped XML tag.",title:"Implicit Collections",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},yaml:{type:"object",title:"YAML",group:"dataformat,transformation,yaml",icon:"generic24.png",description:"YAML is a data format to marshal and unmarshal Java objects to and from YAML.",properties:{library:{kind:"attribute",type:"object",defaultValue:"SnakeYAML",enum:["SnakeYAML"],description:"Which yaml library to use. By default it is SnakeYAML",title:"Library",required:!1,deprecated:!1},unmarshalTypeName:{kind:"attribute",type:"string",description:"Class name of the java type to use when unarmshalling",title:"Unmarshal Type Name",required:!1,deprecated:!1},constructor:{kind:"attribute",type:"string",description:"BaseConstructor to construct incoming documents.",title:"Constructor",required:!1,deprecated:!1},representer:{kind:"attribute",type:"string",description:"Representer to emit outgoing objects.",title:"Representer",required:!1,deprecated:!1},dumperOptions:{kind:"attribute",type:"string",description:"DumperOptions to configure outgoing objects.",title:"Dumper Options",required:!1,deprecated:!1},resolver:{kind:"attribute",type:"string",description:"Resolver to detect implicit type",title:"Resolver",required:!1,deprecated:!1},useApplicationContextClassLoader:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Use ApplicationContextClassLoader as custom ClassLoader",title:"Use Application Context Class Loader",required:!1,deprecated:!1},prettyFlow:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Force the emitter to produce a pretty YAML document when using the flow style.",title:"Pretty Flow",required:!1,deprecated:!1},allowAnyType:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Allow any class to be un-marshaled",title:"Allow Any Type",required:!1,deprecated:!1},typeFilter:{kind:"element",type:"array",description:"Set the types SnakeYAML is allowed to un-marshall",title:"Type Filter",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},zip:{type:"object",title:"Zip Deflate Compression",group:"dataformat,transformation",icon:"generic24.png",description:"Zip Deflate Compression data format is a message compression and de-compression format (not zip files).",properties:{compressionLevel:{kind:"attribute",type:"integer",defaultValue:"-1",description:"To specify a specific compression between 0-9. -1 is default compression 0 is no compression and 9 is best compression.",title:"Compression Level",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",
defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}},zipFile:{type:"object",title:"Zip File",group:"dataformat,transformation,file",icon:"generic24.png",description:"The Zip File data format is a message compression and de-compression format of zip files.",properties:{usingIterator:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If the zip file has more then one entry the setting this option to true allows to work with the splitter EIP to split the data using an iterator in a streaming mode.",title:"Using Iterator",required:!1,deprecated:!1},allowEmptyDirectory:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If the zip file has more then one entry setting this option to true allows to get the iterator even if the directory is empty",title:"Allow Empty Directory",required:!1,deprecated:!1},contentTypeHeader:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the data format should set the Content-Type header with the type from the data format if the data format is capable of doing so. For example application/xml for data formats marshalling to XML or application/json for data formats marshalling to JSon etc.",title:"Content Type Header",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the value of the id property.",title:"Id",required:!1,deprecated:!1}}}},languages:{constant:{type:"object",title:"Constant",group:"language,core",icon:"generic24.png",description:"To use a constant value in Camel expressions or predicates.",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},el:{type:"object",title:"EL",group:"language,script",icon:"generic24.png",description:"To use EL scripts in Camel expressions or predicates.",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},exchangeProperty:{type:"object",title:"ExchangeProperty",group:"language,core",icon:"generic24.png",description:"To use a Camel Exchange property in expressions or predicates.",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},expression:{type:"object",title:"Expression",group:"language",icon:"generic24.png",description:"A useful base class for an expression",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},groovy:{type:"object",title:"Groovy",group:"language,script",icon:"generic24.png",description:"To use Groovy scripts in Camel expressions or predicates.",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},header:{type:"object",title:"Header",group:"language,core",icon:"generic24.png",description:"To use a Camel Message header in expressions or predicates.",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},javaScript:{type:"object",title:"JavaScript",group:"language,script",icon:"generic24.png",description:"To use JavaScript in Camel expressions or predicates.",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},jsonpath:{type:"object",title:"JSonPath",group:"language,json",icon:"generic24.png",description:"To use JSonPath in Camel expressions or predicates.",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},resultType:{kind:"attribute",type:"string",description:"Sets the class name of the result type (type from output)",title:"Result Type",required:!1,deprecated:!1},suppressExceptions:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to suppress exceptions such as PathNotFoundException.",title:"Suppress Exceptions",required:!1,deprecated:!1},allowSimple:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to allow in inlined simple exceptions in the json path expression",title:"Allow Simple",required:!1,deprecated:!1},allowEasyPredicate:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to allow using the easy predicate parser to pre-parse predicates.",title:"Allow Easy Predicate",required:!1,deprecated:!1},writeAsString:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to write the output of each row/element as a JSon String value instead of a Map/POJO value.",title:"Write As String",required:!1,deprecated:!1},headerName:{kind:"attribute",type:"string",description:"Name of header to use as input instead of the message body",title:"Header Name",required:!1,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},jxpath:{type:"object",title:"JXPath",group:"language,java",icon:"generic24.png",description:"To use JXPath in Camel expressions or predicates.",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},lenient:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Allows to turn lenient on the JXPathContext. When turned on this allows the JXPath expression to evaluate against expressions and message bodies which may be invalid / missing data. This option is by default false",title:"Lenient",required:!1,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},language:{type:"object",title:"Language",group:"language,core",icon:"generic24.png",description:"To use the specified language in Camel expressions or predicates.",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},language:{kind:"attribute",type:"string",description:"The name of the language to use",title:"Language",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},method:{type:"object",title:"Bean method",group:"language,core,java",icon:"generic24.png",description:"To use a Java bean (aka method call) in Camel expressions or predicates.",properties:{bean:{kind:"attribute",type:"string",description:"Either a reference or a class name of the bean to use",title:"Bean",required:!1,deprecated:!0},ref:{kind:"attribute",type:"string",description:"Reference to bean to lookup in the registry",title:"Ref",required:!1,deprecated:!1},method:{kind:"attribute",type:"string",description:"Name of method to call",title:"Method",required:!1,deprecated:!1},beanType:{kind:"attribute",type:"string",description:"Class name of the bean to use",title:"Bean Type",required:!1,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},mvel:{type:"object",title:"MVEL",group:"language,java",icon:"generic24.png",description:"To use MVEL scripts in Camel expressions or predicates.",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},ognl:{type:"object",title:"OGNL",group:"language,java",icon:"generic24.png",description:"To use OGNL scripts in Camel expressions or predicates.",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},php:{type:"object",title:"PHP",group:"language,script",icon:"generic24.png",description:"To use PHP scripts in Camel expressions or predicates.",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},python:{type:"object",title:"Python",group:"language,script",icon:"generic24.png",description:"To use Python scripts in Camel expressions or predicates.",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},ref:{type:"object",title:"Ref",group:"language,core",icon:"generic24.png",description:"Reference to an existing Camel expression or predicate which is looked up from the Camel registry.",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},ruby:{type:"object",title:"Ruby",group:"language,script",icon:"generic24.png",description:"To use Ruby scripts in Camel expressions or predicates.",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},simple:{type:"object",title:"Simple",group:"language,core,java",icon:"generic24.png",description:"To use Camels built-in Simple language in Camel expressions or predicates.",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},resultType:{kind:"attribute",type:"string",description:"Sets the class name of the result type (type from output)",title:"Result Type",required:!1,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},spel:{type:"object",title:"SpEL",group:"language,spring",icon:"generic24.png",description:"To use Spring Expression Language (SpEL) in Camel expressions or predicates.",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},sql:{type:"object",title:"SQL",group:"language",icon:"generic24.png",description:"To use SQL (on Java beans) in Camel expressions or predicates.",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},terser:{type:"object",title:"HL7 Terser",group:"language,hl7",icon:"generic24.png",description:"To use HL7 terser scripts in Camel expressions or predicates.",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},tokenize:{type:"object",title:"Tokenize",group:"language,core",icon:"generic24.png",description:"To use Camel message body or header with a tokenizer in Camel expressions or predicates.",properties:{token:{kind:"attribute",type:"string",description:"The (start) token to use as tokenizer for example you can use the new line token. You can use simple language as the token to support dynamic tokens.",title:"Token",required:!0,deprecated:!1},endToken:{kind:"attribute",type:"string",description:"The end token to use as tokenizer if using start/end token pairs. You can use simple language as the token to support dynamic tokens.",title:"End Token",required:!1,deprecated:!1},inheritNamespaceTagName:{kind:"attribute",type:"string",description:"To inherit namespaces from a root/parent tag name when using XML You can use simple language as the tag name to support dynamic names.",title:"Inherit Namespace Tag Name",required:!1,deprecated:!1},headerName:{kind:"attribute",type:"string",description:"Name of header to tokenize instead of using the message body.",title:"Header Name",required:!1,deprecated:!1},regex:{kind:"attribute",type:"boolean",defaultValue:"false",description:"If the token is a regular expression pattern. The default value is false",title:"Regex",required:!1,deprecated:!1},xml:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether the input is XML messages. This option must be set to true if working with XML payloads.",title:"Xml",required:!1,deprecated:!1},includeTokens:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to include the tokens in the parts when using pairs The default value is false",title:"Include Tokens",required:!1,deprecated:!1},group:{kind:"attribute",type:"string",description:"To group N parts together for example to split big files into chunks of 1000 lines. You can use simple language as the group to support dynamic group sizes.",title:"Group",required:!1,deprecated:!1},skipFirst:{kind:"attribute",type:"boolean",defaultValue:"false",description:"To skip the very first element",title:"Skip First",required:!1,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},xpath:{type:"object",title:"XPath",group:"language,core,xml",icon:"generic24.png",description:"To use XPath (XML) in Camel expressions or predicates.",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},documentType:{kind:"attribute",type:"string",description:"Name of class for document type The default value is org.w3c.dom.Document",title:"Document Type",required:!1,deprecated:!1},resultType:{kind:"attribute",type:"string",defaultValue:"NODESET",enum:["BOOLEAN","NODE","NODESET","NUMBER","STRING"],description:"Sets the class name of the result type (type from output) The default result type is NodeSet",title:"Result Type",required:!1,deprecated:!1},saxon:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to use Saxon.",title:"Saxon",required:!1,deprecated:!1},factoryRef:{kind:"attribute",type:"string",description:"References to a custom XPathFactory to lookup in the registry",title:"Factory Ref",required:!1,deprecated:!1},objectModel:{kind:"attribute",type:"string",description:"The XPath object model to use",title:"Object Model",required:!1,deprecated:!1},logNamespaces:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to log namespaces which can assist during trouble shooting",title:"Log Namespaces",required:!1,deprecated:!1},headerName:{kind:"attribute",type:"string",description:"Name of header to use as input instead of the message body",title:"Header Name",required:!1,deprecated:!1},threadSafety:{kind:"attribute",type:"boolean",defaultValue:"false",description:"Whether to enable thread-safety for the returned result of the xpath expression. This applies to when using NODESET as the result type and the returned set has multiple elements. In this situation there can be thread-safety issues if you process the NODESET concurrently such as from a Camel Splitter EIP in parallel processing mode. This option prevents concurrency issues by doing defensive copies of the nodes. It is recommended to turn this option on if you are using camel-saxon or Saxon in your application. Saxon has thread-safety issues which can be prevented by turning this option on.",title:"Thread Safety",required:!1,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},xquery:{type:"object",title:"XQuery",group:"language,xml",icon:"generic24.png",description:"To use XQuery (XML) in Camel expressions or predicates.",properties:{expression:{kind:"value",type:"string",description:"The expression value in your chosen language syntax",title:"Expression",required:!0,deprecated:!1},type:{kind:"attribute",type:"string",description:"Sets the class name of the result type (type from output) The default result type is NodeSet",title:"Type",required:!1,deprecated:!1},headerName:{kind:"attribute",type:"string",description:"Name of header to use as input instead of the message body",title:"Header Name",required:!1,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}},xtokenize:{type:"object",title:"XML Tokenize",group:"language,core,xml",icon:"generic24.png",description:"To use Camel message body or header with a XML tokenizer in Camel expressions or predicates.",properties:{headerName:{kind:"attribute",type:"string",description:"Name of header to tokenize instead of using the message body.",title:"Header Name",required:!1,deprecated:!1},mode:{kind:"attribute",type:"string",description:"The extraction mode. The available extraction modes are: i - injecting the contextual namespace bindings into the extracted token (default) w - wrapping the extracted token in its ancestor context u - unwrapping the extracted token to its child content t - extracting the text content of the specified element",title:"Mode",required:!1,deprecated:!1},group:{kind:"attribute",type:"integer",description:"To group N parts together",title:"Group",required:!1,deprecated:!1},trim:{kind:"attribute",type:"boolean",defaultValue:"true",description:"Whether to trim the value to remove leading and trailing whitespaces and line breaks",title:"Trim",required:!1,deprecated:!1},id:{kind:"attribute",type:"string",description:"Sets the id of this node",title:"Id",required:!1,deprecated:!1}}}}},_jsonSchema={id:"http://json-schema.org/draft-04/schema#",$schema:"http://json-schema.org/draft-04/schema#",description:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},type:"object",properties:{id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},default:{},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0},maximum:{type:"number"},exclusiveMaximum:{type:"boolean",default:!1},minimum:{type:"number"},exclusiveMinimum:{type:"boolean",default:!1},maxLength:{$ref:"#/definitions/positiveInteger"},minLength:{$ref:"#/definitions/positiveIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{$ref:"#/definitions/positiveInteger"},minItems:{$ref:"#/definitions/positiveIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},maxProperties:{$ref:"#/definitions/positiveInteger"},minProperties:{$ref:"#/definitions/positiveIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},enum:{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},default:{}};(function(){function a(a){this.tokens=[],this.tokens.links={},this.options=a||h.defaults,this.rules=i.normal,this.options.gfm&&(this.options.tables?this.rules=i.tables:this.rules=i.gfm)}function b(a,b){if(this.options=b||h.defaults,this.links=a,this.rules=j.normal,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=j.breaks:this.rules=j.gfm:this.options.pedantic&&(this.rules=j.pedantic)}function c(a){this.tokens=[],this.token=null,this.options=a||h.defaults}function d(a,b){return a.replace(b?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function e(a,b){return a=a.source,b=b||"",function c(d,e){return d?(e=e.source||e,e=e.replace(/(^|[^\[])\^/g,"$1"),a=a.replace(d,e),c):new RegExp(a,b)}}function f(){}function g(a){for(var b,c,d=1;d<arguments.length;d++){b=arguments[d];for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}return a}function h(b,e){try{return e&&(e=g({},h.defaults,e)),c.parse(a.lex(b,e),e)}catch(a){if(a.message+="\nPlease report this to https://github.com/chjj/marked.",(e||h.defaults).silent)return"<p>An error occured:</p><pre>"+d(a.message+"",!0)+"</pre>";throw a}}var i={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:f,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:f,lheading:/^([^\n]+)\n *(=|-){3,} *\n*/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:f,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};i.bullet=/(?:[*+-]|\d+\.)/,i.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,i.item=e(i.item,"gm")(/bull/g,i.bullet)(),i.list=e(i.list)(/bull/g,i.bullet)("hr",/\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)(),i._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b",i.html=e(i.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,i._tag)(),i.paragraph=e(i.paragraph)("hr",i.hr)("heading",i.heading)("lheading",i.lheading)("blockquote",i.blockquote)("tag","<"+i._tag)("def",i.def)(),i.normal=g({},i),i.gfm=g({},i.normal,{fences:/^ *(`{3,}|~{3,}) *(\w+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),i.gfm.paragraph=e(i.paragraph)("(?!","(?!"+i.gfm.fences.source.replace("\\1","\\2")+"|")(),i.tables=g({},i.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),a.rules=i,a.lex=function(b,c){return new a(c).lex(b)},a.prototype.lex=function(a){return a=a.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(a,!0)},a.prototype.token=function(a,b){for(var c,d,e,f,g,h,j,k,l,a=a.replace(/^ +$/gm,"");a;)if((e=this.rules.newline.exec(a))&&(a=a.substring(e[0].length),e[0].length>1&&this.tokens.push({type:"space"})),e=this.rules.code.exec(a))a=a.substring(e[0].length),e=e[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?e:e.replace(/\n+$/,"")});else if(e=this.rules.fences.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"code",lang:e[2],text:e[3]});else if(e=this.rules.heading.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"heading",depth:e[1].length,text:e[2]});else if(b&&(e=this.rules.nptable.exec(a))){for(a=a.substring(e[0].length),h={type:"table",header:e[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:e[3].replace(/\n$/,"").split("\n")},k=0;k<h.align.length;k++)/^ *-+: *$/.test(h.align[k])?h.align[k]="right":/^ *:-+: *$/.test(h.align[k])?h.align[k]="center":/^ *:-+ *$/.test(h.align[k])?h.align[k]="left":h.align[k]=null;for(k=0;k<h.cells.length;k++)h.cells[k]=h.cells[k].split(/ *\| */);this.tokens.push(h)}else if(e=this.rules.lheading.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"heading",depth:"="===e[2]?1:2,text:e[1]});else if(e=this.rules.hr.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"hr"});else if(e=this.rules.blockquote.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"blockquote_start"}),e=e[0].replace(/^ *> ?/gm,""),this.token(e,b),this.tokens.push({type:"blockquote_end"});else if(e=this.rules.list.exec(a)){for(a=a.substring(e[0].length),this.tokens.push({type:"list_start",ordered:isFinite(e[2])}),e=e[0].match(this.rules.item),this.options.smartLists&&(f=i.bullet.exec(e[0])[0]),c=!1,l=e.length,k=0;k<l;k++)h=e[k],j=h.length,h=h.replace(/^ *([*+-]|\d+\.) +/,""),~h.indexOf("\n ")&&(j-=h.length,h=this.options.pedantic?h.replace(/^ {1,4}/gm,""):h.replace(new RegExp("^ {1,"+j+"}","gm"),"")),this.options.smartLists&&k!==l-1&&(g=i.bullet.exec(e[k+1])[0],f===g||"."===f[1]&&"."===g[1]||(a=e.slice(k+1).join("\n")+a,k=l-1)),d=c||/\n\n(?!\s*$)/.test(h),k!==l-1&&(c="\n"===h[h.length-1],d||(d=c)),this.tokens.push({type:d?"loose_item_start":"list_item_start"}),this.token(h,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})
}else if(e=this.rules.html.exec(a))a=a.substring(e[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===e[1],text:e[0]});else if(b&&(e=this.rules.def.exec(a)))a=a.substring(e[0].length),this.tokens.links[e[1].toLowerCase()]={href:e[2],title:e[3]};else if(b&&(e=this.rules.table.exec(a))){for(a=a.substring(e[0].length),h={type:"table",header:e[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:e[3].replace(/(?: *\| *)?\n$/,"").split("\n")},k=0;k<h.align.length;k++)/^ *-+: *$/.test(h.align[k])?h.align[k]="right":/^ *:-+: *$/.test(h.align[k])?h.align[k]="center":/^ *:-+ *$/.test(h.align[k])?h.align[k]="left":h.align[k]=null;for(k=0;k<h.cells.length;k++)h.cells[k]=h.cells[k].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(h)}else if(b&&(e=this.rules.paragraph.exec(a)))a=a.substring(e[0].length),this.tokens.push({type:"paragraph",text:"\n"===e[1][e[1].length-1]?e[1].slice(0,-1):e[1]});else if(e=this.rules.text.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"text",text:e[0]});else if(a)throw new Error("Infinite loop on byte: "+a.charCodeAt(0));return this.tokens};var j={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:f,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:f,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};j._inside=/(?:\[[^\]]*\]|[^\]]|\](?=[^\[]*\]))*/,j._href=/\s*<?([^\s]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,j.link=e(j.link)("inside",j._inside)("href",j._href)(),j.reflink=e(j.reflink)("inside",j._inside)(),j.normal=g({},j),j.pedantic=g({},j.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),j.gfm=g({},j.normal,{escape:e(j.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:e(j.text)("]|","~]|")("|","|https?://|")()}),j.breaks=g({},j.gfm,{br:e(j.br)("{2,}","*")(),text:e(j.gfm.text)("{2,}","*")()}),b.rules=j,b.output=function(a,c,d){return new b(c,d).output(a)},b.prototype.output=function(a){for(var b,c,e,f,g="";a;)if(f=this.rules.escape.exec(a))a=a.substring(f[0].length),g+=f[1];else if(f=this.rules.autolink.exec(a))a=a.substring(f[0].length),"@"===f[2]?(c=":"===f[1][6]?this.mangle(f[1].substring(7)):this.mangle(f[1]),e=this.mangle("mailto:")+c):(c=d(f[1]),e=c),g+='<a href="'+e+'">'+c+"</a>";else if(f=this.rules.url.exec(a))a=a.substring(f[0].length),c=d(f[1]),e=c,g+='<a href="'+e+'">'+c+"</a>";else if(f=this.rules.tag.exec(a))a=a.substring(f[0].length),g+=this.options.sanitize?d(f[0]):f[0];else if(f=this.rules.link.exec(a))a=a.substring(f[0].length),g+=this.outputLink(f,{href:f[2],title:f[3]});else if((f=this.rules.reflink.exec(a))||(f=this.rules.nolink.exec(a))){if(a=a.substring(f[0].length),b=(f[2]||f[1]).replace(/\s+/g," "),!(b=this.links[b.toLowerCase()])||!b.href){g+=f[0][0],a=f[0].substring(1)+a;continue}g+=this.outputLink(f,b)}else if(f=this.rules.strong.exec(a))a=a.substring(f[0].length),g+="<strong>"+this.output(f[2]||f[1])+"</strong>";else if(f=this.rules.em.exec(a))a=a.substring(f[0].length),g+="<em>"+this.output(f[2]||f[1])+"</em>";else if(f=this.rules.code.exec(a))a=a.substring(f[0].length),g+="<code>"+d(f[2],!0)+"</code>";else if(f=this.rules.br.exec(a))a=a.substring(f[0].length),g+="<br>";else if(f=this.rules.del.exec(a))a=a.substring(f[0].length),g+="<del>"+this.output(f[1])+"</del>";else if(f=this.rules.text.exec(a))a=a.substring(f[0].length),g+=d(f[0]);else if(a)throw new Error("Infinite loop on byte: "+a.charCodeAt(0));return g},b.prototype.outputLink=function(a,b){return"!"!==a[0][0]?'<a href="'+d(b.href)+'"'+(b.title?' title="'+d(b.title)+'"':"")+">"+this.output(a[1])+"</a>":'<img src="'+d(b.href)+'" alt="'+d(a[1])+'"'+(b.title?' title="'+d(b.title)+'"':"")+">"},b.prototype.mangle=function(a){for(var b,c="",d=a.length,e=0;e<d;e++)b=a.charCodeAt(e),Math.random()>.5&&(b="x"+b.toString(16)),c+="&#"+b+";";return c},c.parse=function(a,b){return new c(b).parse(a)},c.prototype.parse=function(a){this.inline=new b(a.links,this.options),this.tokens=a.reverse();for(var c="";this.next();)c+=this.tok();return c},c.prototype.next=function(){return this.token=this.tokens.pop()},c.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},c.prototype.parseText=function(){for(var a=this.token.text;"text"===this.peek().type;)a+="\n"+this.next().text;return this.inline.output(a)},c.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return"<hr>\n";case"heading":return"<h"+this.token.depth+">"+this.inline.output(this.token.text)+"</h"+this.token.depth+">\n";case"code":if(this.options.highlight){var a=this.options.highlight(this.token.text,this.token.lang);null!=a&&a!==this.token.text&&(this.token.escaped=!0,this.token.text=a)}return this.token.escaped||(this.token.text=d(this.token.text,!0)),"<pre><code"+(this.token.lang?' class="'+this.options.langPrefix+this.token.lang+'"':"")+">"+this.token.text+"</code></pre>\n";case"table":var b,c,e,f,g,h="";for(h+="<thead>\n<tr>\n",c=0;c<this.token.header.length;c++)b=this.inline.output(this.token.header[c]),h+=this.token.align[c]?'<th align="'+this.token.align[c]+'">'+b+"</th>\n":"<th>"+b+"</th>\n";for(h+="</tr>\n</thead>\n",h+="<tbody>\n",c=0;c<this.token.cells.length;c++){for(e=this.token.cells[c],h+="<tr>\n",g=0;g<e.length;g++)f=this.inline.output(e[g]),h+=this.token.align[g]?'<td align="'+this.token.align[g]+'">'+f+"</td>\n":"<td>"+f+"</td>\n";h+="</tr>\n"}return"<table>\n"+(h+="</tbody>\n")+"</table>\n";case"blockquote_start":for(var h="";"blockquote_end"!==this.next().type;)h+=this.tok();return"<blockquote>\n"+h+"</blockquote>\n";case"list_start":for(var i=this.token.ordered?"ol":"ul",h="";"list_end"!==this.next().type;)h+=this.tok();return"<"+i+">\n"+h+"</"+i+">\n";case"list_item_start":for(var h="";"list_item_end"!==this.next().type;)h+="text"===this.token.type?this.parseText():this.tok();return"<li>"+h+"</li>\n";case"loose_item_start":for(var h="";"list_item_end"!==this.next().type;)h+=this.tok();return"<li>"+h+"</li>\n";case"html":return this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);case"paragraph":return"<p>"+this.inline.output(this.token.text)+"</p>\n";case"text":return"<p>"+this.parseText()+"</p>\n"}},f.exec=f,h.options=h.setOptions=function(a){return g(h.defaults,a),h},h.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-"},h.Parser=c,h.parser=c.parse,h.Lexer=a,h.lexer=a.lex,h.InlineLexer=b,h.inlineLexer=b.output,h.parse=h,"object"==typeof exports?module.exports=h:"function"==typeof define&&define.amd?define(function(){return h}):this.marked=h}).call(function(){return this||("undefined"!=typeof window?window:global)}()),dmr_js(),function(){function a(){}function b(){}function d(){}function e(){}function g(){}function h(){}function j(){}function l(){}function m(){}function n(){}function o(){}function q(){}function r(){}function s(){}function t(){}function u(){}function v(){}function w(a){aq=a}function x(){td()}function y(){Hb()}function z(){new y}function A(){Bb(this)}function B(){Bb(this)}function C(){Ab(this)}function D(){Sd(this)}function E(){Ea(this)}function F(a){this.b=a}function G(a){this.b=a}function H(a){this.b=a}function I(a){this.b=a}function J(a){this.b=a}function K(a){this.b=a}function L(a){this.b=a}function M(a){this.b=a}function N(a){this.b=a}function O(a){this.d=a}function P(a){this.d=a}function Q(a){this.c=a}function R(a){this.c=a}function S(a){this.c=a}function T(a){this.b=a}function U(a){this.b=a}function V(a){this.b=a}function W(a){this.b=a}function X(a){return a}function Y(){throw new ca}function Z(){throw new ca}function $(){throw new ca}function _(){ag().r(this)}function aa(){_.call(this)}function ba(){_.call(this)}function ca(){_.call(this)}function da(){_.call(this)}function ea(){_.call(this)}function fa(){_.call(this)}function ga(){_.call(this)}function ha(){_.call(this)}function ia(a){kb.call(this,a)}function ja(a){kb.call(this,a)}function ka(a){ja.call(this,a)}function la(a){ia.call(this,a)}function ma(a){ia.call(this,a)}function na(a){ij.alert(a)}function oa(a){ia.call(this,a)}function pa(a){Dd.call(this,a)}function qa(a){ia.call(this,a)}function ra(a){Dd.call(this,a)}function sa(a){ia.call(this,a)}function ta(a){ia.call(this,a)}function ua(a){oa.call(this,a)}function va(a){ec(),this.c=a}function wa(a){return Ra(),a}function xa(){return ti(),_q}function ya(a){Zi(),$i(this,a)}function za(a){ia.call(this,a)}function Aa(a){Ta.call(this,a)}function Ba(a){fd.call(this,a)}function Ca(a){ia.call(this,a)}function Da(a){va.call(this,a)}function Ea(a){a.d=(ec(),Xq)}function Fa(a,b,c){a.d.T(b,c)}function Ga(a,b){a.length=b}function Ha(a,b){return!Fh(a,b)}function Ia(a,b){return!Eh(a,b)}function Ja(a){return isNaN(a)}function Ka(a){return new Op[a]}function La(a){return a.f*a.b[0]}function Ma(a,b){return a.d.O(b)}function Na(a){return a.l|a.m<<22}function Oa(){throw new ka(cl)}function Pa(){this.b=new Ba(1)}function Qa(){Qa=a,fq=new b}function Ra(){Ra=a,Ar=new Fd}function Sa(){Sa=a,yq={},zq={}}function Ta(a){this.c=a,this.b=a}function Ua(a,b){this.c=a,this.b=b}function Va(a,b){this.b=a,this.c=b}function Wa(a,b){this.b=a,this.c=b}function Xa(a,b){this.e=a,this.f=b}function Ya(a){Ea(this),this.d=a}function Za(a){kb.call(this,gn+a)}function $a(a,b){Ef.call(this,a,b)}function _a(a,b){Ra(),Fa(Ar,a,b)}function ab(a,b){return a.d.sb(b)}function bb(a){return Ug(a.d.rb())}function cb(a){return a.b<a.d.L()}function db(a){return Math.floor(a)}function eb(a){return pg((ag(),a))}function fb(a,b){return a.k[dk+b]}function gb(a){return Ra(),ef(Ar,a)}function hb(a){Zi(),wd.call(this,a)}function ib(a){fi(),pf.call(this,a)}function jb(a){Ab(this),Ga(this.b,a)}function kb(a){ag().r(this),this.i=a}function lb(a){ij.clearTimeout(a)}function mb(a,b,c){a.splice(b,c)}function nb(a,b,c,d){a.splice(b,c,d)}function ob(a,b,c,d){a.d.Ab(b,c,d)}function pb(a,b,c){Ra(),mf(Ar,a,b,c)}function qb(a,b){return Ra(),Ee(a,b)}function rb(a,b){return a.indexOf(b)}function sb(a){return parseInt(a)||-1}function tb(a){return null==a?null:a}function ub(a,b){return a.cM&&a.cM[b]}function vb(a,b){return parseInt(a,b)}function wb(a,b){return Math.pow(a,b)}function xb(a,b){return Si(a,b,!1)}function yb(a){return Md(a.l,a.m,a.h)}function zb(a){return Od(_r,Up,1,a,0)}function Ab(a){a.b=Od(Gr,Up,0,0,0)}function Bb(a){a.c=Af(),a.b=a.c.A()}function Cb(a){return a&&a.g?a.g:null}function Db(a){throw new Ca(zm+a+fo)}function Eb(a){throw new Ca(ym+a+Bj)}function Fb(a){if(a.b)throw new ga}function Gb(a,b){a.b&&(bd(b),Yd(b))}function Hb(){$q||($q=!0,ej())}function Ib(){Ib=a,or=tf((ti(),_q))}function Jb(a){Zi(),nf.call(this,a,0)}function Kb(a,b){(a<0||a>=b)&&pc(a,b)}function Lb(a,b){return a.c.x(a.b,b),a}function Mb(a,b){return a.c.y(a.b,b),a}function Nb(a,b){return Si(a,b,!0),nq}function Ob(a,b){return Ug(ab(a,pi(b)))}function Pb(a,b){return a.cM&&!!a.cM[b]}function Qb(a,b){return null!=a&&Pb(a,b)}function Rb(b){return b.tM==a||Pb(b,1)}function Sb(a){return a.$H||(a.$H=++cq)}function Tb(a){return typeof a==ap&&a>0}function Ub(a){return a>=55296&&a<=56319}function Vb(a){return a>=56320&&a<=57343}function Wb(a){return hd(a)?eb(re(a)):lj}function Xb(a,b){return a.charCodeAt(b)}function Yb(a,b){return a.lastIndexOf(b)}function Zb(a,b,c){return a.substr(b,c-b)}function $b(a){return null==a?null:a.name}function _b(a){de.call(this,a,null,null)}function ac(a){Zi(),nf.call(this,Gg(a),0)}function bc(a){this.d=a,this.c=a.b.c.b}function cc(){this.b=Od(as,Qp,-1,50,1)}function dc(){dc=a,sq=Od(Zr,Up,15,256,0)}function ec(){ec=a,Xq=new Da((ti(),nr))}function fc(a){return ti(),rf((Ib(),or),a)}function gc(a,b){return fh(a,(Ra(),Vf(b)))}function hc(a){return hd(a)?lc(re(a)):a+lj}function ic(a,b){return a==b||!!b&&b.b==a.b}function jc(a,b){return a==b||!!b&&b.b==a.b}function kc(a,b){return a==b||!!b&&a.b==b.b}function lc(a){return null==a?null:a.message}function mc(a,b,c){return a.apply(b,c)}function nc(a,b,c){return a.c.C(a.b,b,b,c),a}function oc(a,b,c){return a.lastIndexOf(b,c)}function pc(a,b){throw new sa(Sl+a+Mj+b)}function qc(a,b){for(p in b)a[p]=b[p]}function rc(a,b){xg(a,1),a.b[a.c++]=b?1:0}function sc(a,b){a[a.explicitLength++]=b}function tc(a,b,c){return Ge(xf(a),b,c),a}function uc(a,b){return Fb(a),a.d=new zd(b),a}function vc(a,b){return Fb(a),a.d=new Ad(b),a}function wc(a,b){return a.c.z(a.b,lj+li(b)),a}function xc(a,b){return Lh(a.b,a.c++,b),!0}function yc(a,b){var c;return c=a.f,a.f=b,c}function zc(a){var b=Op[a.d];return a=null,b}function Ac(){try{null.a()}catch(a){return a}}function Bc(){this.c=Af(),this.b=this.c.A()}function Cc(a,b,c){this.c=a,this.d=b,this.b=c}function Dc(a,b){return a==b||!!b&&Rd(a.b,b.b)}function Ec(a,b){return a==b||!!b&&Mg(a.b,b.b)}function Fc(a,b){return a==b||!!b&&kg(a.b,b.b)}function Gc(a,b){return a==b||!!b&&Dh(a.b,b.b)}function Hc(a,b){return a==b||!!b&&ld(b.b,a.b)}function Ic(a,b){return a==b||!!b&&Rd(a.b,b.b)}function Jc(a,b){return a==b||!!b&&a.b.eQ(b.b)}function Kc(a,b){return a==b||!!b&&b.b.eQ(a.b)}function Lc(a,b){return a==b||!!b&&b.d.eQ(a.d)}function Mc(a,b){return a.substr(b,a.length-b)}function Nc(a,b,c){return tc(a,b,(Ra(),Vf(c)))}function Oc(a,b,c){return Ge(a,b,(Ra(),Vf(c)))}function Pc(a){var b;return b=a,Rb(b)?b.cZ:Dr}function Qc(a){var b;return b=a.Q(),new Va(a,b)}function Rc(a){var b;return b=a.c.H(),new M(b)}function Sc(a,b){var c;return c=qe(b),sc(b,c),c}function Tc(a,b){ec(),Pe.call(this,new $a(a,b))}function Uc(a,b){ec(),Pe.call(this,new Ef(a,b))}function Vc(a){va.call(this,(ti(),jr)),this.b=a}function Wc(a){va.call(this,(ti(),cr)),this.b=a}function Xc(a){va.call(this,(ti(),hr)),this.b=a}function Yc(a){va.call(this,(ti(),mr)),this.b=a}function Zc(a,b,c){return Fb(a),a.d=new Uc(b,c),a}function $c(a,b){return!a&&(a=[]),a[a.length]=b,a}function _c(a,b){xg(a,1),a.b[a.c++]=~~(b<<24)>>24}function ad(a){a.b||(a.b=!0,a.d=a.d.Gb())}function bd(a){a.b.c=a.c,a.c.b=a.b,a.b=a.c=null}function cd(a,b){return null==a.b.T(b,a)}function dd(a,b){return Fb(a),a.d=(fe(),b?Zq:Yq),a}function ed(a,b,c){fi(),this.f=a,this.e=b,this.b=c}function fd(a){if(Sd(this),a<0)throw new oa(No)}function gd(a){return Qb(a,26)?new Aa(a):new Ta(a)}function hd(b){return null!=b&&b.tM!=a&&!Pb(b,1)}function id(a,b){return Md(a.l&b.l,a.m&b.m,a.h&b.h)}function jd(a,b){return Md(a.l|b.l,a.m|b.m,a.h|b.h)}function kd(a,b){return Md(a.l^b.l,a.m^b.m,a.h^b.h)}function ld(a,b){return a.l==b.l&&a.m==b.m&&a.h==b.h}function md(a,b){return a.l!=b.l||a.m!=b.m||a.h!=b.h}function nd(a){var b;return b=a,Rb(b)?b.hC():Sb(b)}function od(a){var b;return b=new E,b.d=a.d.yb(),b}function pd(a){var b;return b=new E,b.d=a.d.Kb(),b}function qd(a,b){return a.length>=b&&a.splice(0,b),a}function rd(){rd=a,gq=[],hq=[],$e(new l,gq,hq)}function sd(){sd=a,pq=new F(!1),qq=new F(!0)}function td(){td=a,Error.stackTraceLimit=128}function ud(){256==Aq&&(yq=zq,zq={},Aq=0),++Aq}function vd(a){return Qb(a,19)?a:new be(a)}function wd(a){if(!a)throw new fa;this.f=0,Td(this,a)}function xd(a){ec(),va.call(this,(ti(),br)),this.b=a}function yd(a){ec(),va.call(this,(ti(),dr)),this.b=a}function zd(a){ec(),va.call(this,(ti(),er)),this.b=a}function Ad(a){ec(),va.call(this,(ti(),gr)),this.b=a}function Bd(a){ec(),va.call(this,(ti(),ir)),this.b=a}function Cd(a){ec(),va.call(this,(ti(),lr)),this.b=a}function Dd(a){ag().r(this),this.i=a?Zd(a):null,this.f=a}function Ed(a,b,c){this.b=zn,this.e=a,this.c=b,this.d=c}function Fd(){this.d=new D,this.b=new D,this.c=new D}function Gd(){ec(),va.call(this,(ti(),hr)),this.b=new C}function Hd(){ec(),va.call(this,(ti(),jr)),this.b=new _f}function Id(a){var b;return b=new Pa,cd(b,a),new R(b)}function Jd(a,b){var c,d;d=a.d,c=d.c,_c(b,c.b),d.Mb(b)}function Kd(a,b){var c;return c=a,Rb(c)?c.eQ(b):c===b}function Ld(a,b){return tb(a)===tb(b)||null!=a&&Kd(a,b)}function Md(a,b,c){return hj=new n,hj.l=a,hj.m=b,hj.h=c,hj}function Nd(a,b,c,d,e,f){return Ra(),ei(Ar,a,b,c,d,e,f)}function Od(a,b,c,d,e){var f;return f=vh(e,d),me(a,b,c,f),f}function Pd(a,b){return a.c.z(a.b,String.fromCharCode(b)),a}function Qd(a,b){if(null!=a&&!ub(a,b))throw new ba;return a}function Rd(a,b){return!!Qb(b,1)&&String(a)==b}function Sd(a){a.e=[],a.k={},a.i=!1,a.f=null,a.j=0}function Td(a,b){a.d=b,a.b=sg(b),a.b<54&&(a.i=Ug(Tf(b)))}function Ud(a,b){ec();var c;for(c=0;c<b;++c)a.c.y(a.b,pj)}function Vd(a,b){var c;for(c=0;c<b.length;++c)b[c]=a.b[a.c++]}function Wd(a,b,c){var d;return d=b+c,Ff(a.length,b,d),Ue(a,b,d)}function Xd(a){var b;return b=new A,a.zb(b,0,!0),b.c.D(b.b)}function Yd(a){var b;b=a.d.c.c,a.c=b,a.b=a.d.c,b.b=a.d.c.c=a}function Zd(a){var b,c;return b=a.cZ.f,c=a.n(),null!=c?b+ek+c:b}function $d(a){var b;if(-1==(b=ze(a)))throw new ia(xl);return b}function _d(a){va.call(this,(ti(),hr)),this.b=new ee(a.b)}function ae(a){ec(),va.call(this,(ti(),ar)),this.b=new ya(Uf(a))}function be(a){_.call(this),this.c=a,this.b=lj,ag().p(this)}function ce(a,b){fi(),this.f=a,this.e=1,this.b=me(Fr,Qp,-1,[b])}function de(a,b,c){this.d=a,Xa.call(this,b,c),this.b=this.c=null}function ee(a){Ab(this),_e(this.b,0,0,a.M()),this.c=this.b.length}function fe(){fe=a,ec(),Zq=new Wc(!0),Yq=new Wc(!1)}function ge(a){return a.l+4194304*a.m+17592186044416*a.h}function he(a){return null==a?_o:hd(a)?$b(re(a)):Qb(a,1)?fn:Pc(a).f}function ie(a,b){return a==b||!!b&&Rd(b.b.b,a.b.b)&&Lc(b.b.c,a.b.c)}function je(a){if(a.c<0)throw new da;a.d.fb(a.c),a.b=a.c,a.c=-1}function ke(a,b){if(!b)throw new oa($o);return Fb(a),a.d=Xh(b),a}function le(a,b){var c,d;return c=a,d=vh(0,b),me(c.cZ,c.cM,c.qI,d),d}function me(a,b,c,d){return rd(),ye(d,gq,hq),d.cZ=a,d.cM=b,d.qI=c,d}function ne(a,b,c,d){var e;return e=Od(Fr,Qp,-1,b,1),wh(e,a,b,c,d),e}function oe(a,b){var c;return c=a.f,a.f=b,a.i||(a.i=!0,++a.j),c}function pe(a){var b;return b=a.f,a.f=null,a.i&&(a.i=!1,--a.j),b}function qe(a){var b=a.join(lj);return a.length=a.explicitLength=0,b}function re(b){if(null!=b&&(b.tM==a||Pb(b,1)))throw new ba;return b}function se(a,b){if(!b)throw new oa($o);return Fb(a),a.d=b.d.yb(),a}function te(a,b){var c;return c=new v,c.f=a+b,Tb(0)&&hh(0,c),c.c=2,c}function ue(a,b){var c;return c=new v,c.f=lj+a,Tb(b)&&hh(b,c),c.c=1,c}function ve(a,b){var c;for(c=a.e-1;c>=0&&a.b[c]==b[c];--c);return c<0}function we(a,b){var c;for(c=0;c<b;++c)Lh(a,c,new U(Qd(a[c],25)))}function xe(a,b,c){var d;for(xg(a,c),d=0;d<c;++d)a.b[a.c++]=b[d]}function ye(a,b,c){rd();for(var d=0,e=b.length;d<e;++d)a[b[d]]=c[d]}function ze(a){return a.c>=a.b.length?-1:255&a.b[a.c++]}function Ae(a){if(a.b>=a.d.L())throw new ha;return a.d.eb(a.c=a.b++)}function Be(a,b){return 0==b||0==a.f?a:b>0?yg(a,b):ji(a,-b)}function Ce(a,b){return 0==b||0==a.f?a:b>0?ji(a,b):yg(a,-b)}function De(a,b){var c=a[b],d=0;for(k in c)d=Math.max(d,k);return d}function Ee(a,b){var c=[a];for(i=0;i<b.length;i++)c.push(b[i]);return c}function Fe(a,b,c){var d;return Fb(a),d=new E,Qe(d,c),a.d=new Tc(b,d),a}function Ge(a,b,c){var d;return Fb(a),d=new E,fh(d,c),a.d=new Tc(b,d),a}function He(a,b,c,d){var e;return e=Od(Fr,Qp,-1,b+1,1),Bi(e,a,b,c,d),e}function Ie(a,b,c,d){return null==b&&(b=_o),a.c.x(a.b,b.substr(c,d-c)),a}function Je(a,b){var c,d;return c=a,d=c.slice(0,b),me(c.cZ,c.cM,c.qI,d),d}function Ke(a,b,c,d){var e;return e=new v,e.f=a+b,Tb(c)&&hh(c,e),e.e=d,e}function Le(a,b,c){for(;c<a.c;++c)if(Ld(b,a.b[c]))return c;return-1}function Me(a){if(a.c==a.d.b.c)throw new ha;return a.b=a.c,a.c=a.c.b,a.b}function Ne(a){for(;a.e>0&&0==a.b[--a.e];);0==a.b[a.e++]&&(a.f=0)}function Oe(a){a&&gf((Qa(),fq)),--bq,a&&-1!=eq&&(lb(eq),eq=-1)}function Pe(a){if(va.call(this,(ti(),kr)),!a)throw new oa(kp);this.b=a}function Qe(a,b){if(null==b)throw new oa($o);return Fb(a),a.d=new Cd(b),a}function Re(a,b){if(null==b)throw new oa($o);return Fb(a),a.d=new qf(b),a}function Se(a){var b;if(-1==(b=ze(a)))throw new ia(xl);return~~(b<<24)>>24}function Te(a,b){var c;return c=sf(a,b),0==c.length?(new d).s(b):qd(c,1)}function Ue(a,b,c){return a=a.slice(b,c),String.fromCharCode.apply(null,a)}function Ve(a){var b;return Ra(),null!=a&&hd(a)&&null!=(b=Cb(re(a)))?b:a}function We(a,b){var c;for(xg(a,b.length),c=0;c<b.length;++c)a.b[a.c++]=b[c]}function Xe(a,b){var c;return c=Qd(a.d.R(b),22),c?(Gb(a,c),c.f):null}function Ye(a,b,c){var d,e=a.k;return b=dk+b,b in e?d=e[b]:++a.j,e[b]=c,d}function Ze(a,b){var c,d=a.k;return b=dk+b,b in d&&(c=d[b],--a.j,delete d[b]),c}function $e(a,b,c){var d,e=0;for(var f in a)(d=a[f])&&(b[e]=f,c[e]=d,++e)}function _e(a,b,c,d){Array.prototype.splice.apply(a,[b,c].concat(d))}function af(a){return~~Math.max(Math.min(a,2147483647),-2147483648)}function bf(){return ij.setTimeout(function(){0!=bq&&(bq=0),eq=-1},10)}function cf(a){return function(){try{return xh(a,this,arguments)}catch(a){throw a}}}function df(a,b){return 0==b.f?Pq:0==a.f?Pq:(Nh(),ai(a,b))}function ef(a,b){var c;return null==b?null:(c=b[go],!c&&(c=cg(a,b)),c)}function ff(a){var b,c;if(a.b){c=null;do{b=a.b,a.b=null,c=yh(b,c)}while(a.b);a.b=c}}function gf(a){var b,c;if(a.c){c=null;do{b=a.c,a.c=null,c=yh(b,c)}while(a.c);a.c=c}}function hf(a){var b,c;for(b=Od(as,Qp,-1,a.c,1),c=0;c<a.c;++c)b[c]=a.b[c];return b}function jf(a,b,c){var d;return Fb(a),d=new E,Fb(d),d.d=new zd(c),a.d=new Tc(b,d),a}function kf(a,b,c){var d;return Fb(a),d=new E,Fb(d),d.d=new Ad(c),a.d=new Tc(b,d),a}function lf(a,b,c,d,e){var f;return f=new v,f.f=a+b,Tb(c)&&hh(c,f),f.c=e?8:0,f.e=d,f}function mf(a,b,c,d){var e,f;f=d?a.c:a.b,e=re(f.R(b)),e?qc(e,c):e=c,f.T(b,e)}function nf(a,b){this.f=b,this.b=Fg(a),this.b<54?this.i=Ug(a):this.d=Eg(a)}function of(a,b){if(a.f)throw new qa(Yk);if(b==a)throw new oa(Wm);return a.f=b,a}function pf(a){if(null==a)throw new fa;if(0==a.length)throw new ua(Jn);mi(this,a)}function qf(a){if(ec(),va.call(this,(ti(),fr)),null==a)throw new oa(Co);this.b=a}function rf(a,b){var c;if(c=a[dk+b])return c;if(null==b)throw new fa;throw new ca}function sf(a,b){var c,d,e;for(e=a.t(b),c=0,d=e.length;c<d;++c)e[c]=a.q(e[c]);return e}function tf(a){var b,c,d,e;for(b={},d=0,e=a.length;d<e;++d)c=a[d],b[dk+c.c]=c;return b}function uf(a){var b,c,d,e;return b=$d(a),c=$d(a),d=$d(a),e=$d(a),b<<24|c<<16|d<<8|e}function vf(a,b){var c,d;for(xg(a,8),c=Ri(b),d=0;d<8;++d)a.b[a.c++]=~~(c[d]<<24)>>24}function wf(a,b,c){var d;return Fb(a),d=new E,Fb(d),d.d=(fe(),c?Zq:Yq),a.d=new Tc(b,d),a}function xf(a){var b;return Fb(a),(b=a.d)==(ec(),Xq)?(a.d=new Gd).gb():b.gb()}function yf(a,b){var c;return c=a.d,c==(ec(),Xq)?(Fb(a),(a.d=new Gd).Bb(b)):c.Bb(b)}function zf(a,b){var c;return(c=a.d)==(ec(),Xq)?(Fb(a),(a.d=new Hd).Cb(b)):c.Cb(b)}function Af(){switch(mq){case 1:case 2:case 3:return new j}return new h}function Bf(a){var b,c,d;return b=4194303&a,c=~~a>>22&4194303,d=a<0?1048575:0,Md(b,c,d)}function Cf(a){var b,c;if(0==a)return 32;for(c=0,b=1;0==(b&a);b<<=1)++c;return c}function Df(a,b){return null!=b&&(a==b||a.toLowerCase()==b.toLowerCase())}function Ef(a,b){if(null==a)throw new oa(Zo);if(!b)throw new oa(tp);this.b=a,this.c=od(b)}function Ff(a,b,c){if(b<0)throw new Za(b);if(c<b)throw new Za(c-b);if(c>a)throw new Za(c)}function Gf(a,b){if(Rd(xn,b))return bi(a);if(Rd(Ol,b)||Rd(Pl,b))return qg(a);throw new ka(b+xj)}function Hf(a,b){var c,d;return c=a.d.R(b),d=b.e,null==c&&d&&d!=Cr?Hf(a,d):re(c)}function If(a,b){for(var c;a.Z();)if(c=a.$(),null==b?null==c:Kd(b,c))return a;return null}function Jf(a){var b;if(-2==a.c){if(0==a.f)b=-1;else for(b=0;0==a.b[b];++b);a.c=b}return a.c}function Kf(a){var b,c,d;if(null==a)return 0;for(b=1,c=0,d=a.length;c<d;++c)b=31*b+a[c]|0;return b}function Lf(a){var b,c;return c=Zh(a.h),32==c?(b=Zh(a.m),32==b?Zh(a.l)+32:b+20-10):c-12}function Mf(a){var b;this.d=a,b=new C,a.i&&xc(b,new L(a)),Zf(a,b),Kg(a,b),this.b=new O(b)}function Nf(a){ec();var b,c;va.call(this,(ti(),kr)),c=new E,b=Uf(a),aj(c,a),this.b=new $a(b,c)}function Of(a){cj();var b;b=null;try{b=ig(a,a.length)}catch(a){if(a=vd(a),!Qb(a,4))throw a}return b}function Pf(a,b,c,d,e){var f;return f=gi(a,b),c&&ug(f),e&&(a=ch(a,b),nq=d?eg(a):Md(a.l,a.m,a.h)),f}function Qf(a,b,c,d){var e;return e=new v,e.f=a+b,Tb(0!=c?-c:0)&&hh(0!=c?-c:0,e),e.c=4,e.e=Cr,e.b=d,e}function Rf(a,b,c){var d,e,f;for(d=0,e=0;e<c;++e)f=b[e],a[e]=f<<1|d,d=~~f>>>31;0!=d&&(a[c]=d)}function Sf(a,b){var c;return Ra(),c=b&&b[0]&&(typeof b[0]==bp||typeof b[0]==Fo)?b[0]:null,eh(c,a)}function Tf(a){var b;return b=a.e>1?jd(Qh(Gg(a.b[1]),32),id(Gg(a.b[0]),Mp)):id(Gg(a.b[0]),Mp),Ui(Gg(a.f),b)}function Uf(a){var b,c,d,e;for(d=$d(a),e=$d(a),b=d<<8|e,c=new A;b>0;)b-=Ni(a,c);return c.c.D(c.b)}function Vf(a){var b,c,d;for(c=a.length,d=Od(as,Qp,-1,c,1),b=0;b<c;++b)d[b]=~~(af(a[b])<<24)>>24;return d}function Wf(a){var b,c,d,e,f;for(b=a.b,e=b.length,c=4<e?4:e,f=0,d=0;d<c;++d)f<<=8,f|=255&b[e-c+d];return f}function Xf(a){var b,c,d;for(c=Od(Lr,Up,18,a.length,0),d=0,b=a.length;d<b;++d){if(!a[d])throw new fa;c[d]=a[d]}}function Yf(a){var b=Kq;return!b&&(b=Kq=/^[+-]?\d*$/i),b.test(a)?parseInt(a,10):Number.NaN}function Zf(a,b){var c=a.k;for(var d in c)if(58==d.charCodeAt(0)){var e=new Ua(a,d.substring(1));b.I(e)}}function $f(a){if(Zi(),!isFinite(a)||isNaN(a))throw new ua(Ul);$i(this,a.toPrecision(20))}function _f(){Sd(this),this.c=new _b(this),this.d=new D,this.c.c=this.c,this.c.b=this.c}function ag(){switch(mq){case 0:return new e;case 4:return new g;case 5:return new x}return new d}function bg(a){return fi(),a<0?-1!=a?new Wg(-1,-a):Lq:a<=10?Nq[af(a)]:new Wg(1,a)}function cg(a,b){var c,d;return 0!=(4&Pc(b).c)?[]:(c=Hf(a,Pc(b)),d=c&&typeof c==Fo?new c(b):b,b[go]=d,d)}function dg(a){var b,c;return a>-129&&a<128?(b=a+128,c=(dc(),sq)[b],!c&&(c=sq[b]=new J(a)),c):new J(a)}function eg(a){var b,c,d;return b=1+~a.l&4194303,c=~a.m+(0==b?1:0)&4194303,d=~a.h+(0==b&&0==c?1:0)&1048575,Md(b,c,d)}function fg(a){Sa();var b=dk+a,c=zq[b];return null!=c?c:(c=yq[b],null==c&&(c=Kh(a)),ud(),zq[b]=c)}function gg(a){return a>=48&&a<58?a-48:a>=97&&a<97?a-97+10:a>=65&&a<65?a-65+10:-1}function hg(a){var b;if(0!=a.d)return a.d;for(b=0;b<a.b.length;++b)a.d=33*a.d+(-1&a.b[b]);return a.d=a.d*a.f,a.d}function ig(a,b){var c;c=vi(a,b);try{return Oa()}catch(a){if(a=vd(a),Qb(a,6))return Ti(c,c.length);throw a}}function jg(a,b){var c=a.k;for(var d in c)if(58==d.charCodeAt(0)){var e=c[d];if(a.X(b,e))return!0}return!1}function kg(a,b){var c;return a===b||!!Qb(b,21)&&(c=Qd(b,21),a.f==c.f&&a.e==c.e&&ve(a,c.b))}function lg(a,b,c,d,e){0!=b&&0!=d&&(1==b?e[d]=Zg(e,c,d,a[0]):1==d?e[b]=Zg(e,a,b,c[0]):Yh(a,c,e,b,d))}function mg(a,b,c){var d;for(d=c-1;d>=0&&a[d]==b[d];--d);return d<0?0:Ha(id(Gg(a[d]),Mp),id(Gg(b[d]),Mp))?-1:1}function ng(){ng=a,iq=Md(4194303,4194303,524287),jq=Md(0,0,524288),kq=Gg(1),Gg(2),lq=Gg(0)}function og(a,b,c,d){if(fj=b,gj=c,mq=d,a)try{Br(Bg)()}catch(c){a(b)}else Br(Bg)()}function pg(a){var b=lj;try{for(var c in a)if(c!=Yo&&c!=Vo&&c!=pp)try{b+=nj+c+ek+a[c]}catch(a){}}catch(a){}return b}function qg(a){var b,c,d;for(d=a.length,b=Od(as,Qp,-1,d,1),c=0;c<d;++c)b[c]=~~((255&a.charCodeAt(c))<<24)>>24;return b}function rg(a){var b,c,d,e,f;for(b=a.b,e=b.length,c=8<e?8:e,f=Bp,d=0;d<c;++d)f=Qh(f,8),f=jd(f,Gg(255&b[e-c+d]));return f}function sg(a){var b,c;return 0==a.f?0:(b=a.e<<5,c=a.b[a.e-1],a.f<0&&Jf(a)==a.e-1&&(c=~~(c-1)),b-=Zh(c))}function tg(a){var b,c,d;return a<Uq.length?Uq[a]:(c=~~a>>5,b=31&a,d=Od(Fr,Qp,-1,c+1,1),d[c]=1<<b,new ed(1,c+1,d))}function ug(a){var b,c,d;b=1+~a.l&4194303,c=~a.m+(0==b?1:0)&4194303,d=~a.h+(0==b&&0==c?1:0)&1048575,a.l=b,a.m=c,a.h=d}function vg(a,b){var c,d,e;return c=a.l+b.l,d=a.m+b.m+(~~c>>22),e=a.h+b.h+(~~d>>22),Md(4194303&c,4194303&d,1048575&e)}function wg(a,b){var c,d,e;return c=a.l-b.l,d=a.m-b.m+(~~c>>22),e=a.h-b.h+(~~d>>22),Md(4194303&c,4194303&d,1048575&e)}function xg(a,b){var c,d;if(a.c+b>=a.b.length){for(c=Od(as,Qp,-1,a.b.length+b,1),d=0;d<a.b.length;++d)c[d]=a.b[d];a.b=c}}function yg(a,b){var c,d,e,f;return c=~~b>>5,b&=31,e=a.e+c+(0==b?0:1),d=Od(Fr,Qp,-1,e,1),zh(d,a.b,c,b),f=new ed(a.f,e,d),Ne(f),f}function zg(a,b,c){var d,e;for(d=id(Gg(c),Mp),e=0;md(d,Bp)&&e<b;++e)d=vg(d,id(Gg(a[e]),Mp)),a[e]=Na(d),d=gi(d,32);return Na(d)}function Ag(){var a,b,c;b=Qd(Yg(),3),b.G()&&(a=b.E(),c=b.F(),Rd(a,c)||ij.alert(yl+a+Gj+c+Hj))}function Bg(){!!kj&&$g(xo),Ag(),!!kj&&$g(vo),gh(),!!kj&&$g(fp),!!kj&&$g(gp),w(new m),Ra(),new z}function Cg(a){if(fi(),0==a.length)throw new ua(Jn);a[0]<0?(this.f=-1,Ji(this,a)):(this.f=1,Wh(this,a)),Ne(this)}function Dg(a){fi(),0==a.length?(this.f=0,this.e=1,this.b=me(Fr,Qp,-1,[0])):(this.f=1,this.e=a.length,this.b=a,Ne(this))}function Eg(a){return fi(),Ha(a,Bp)?md(a,Ap)?new Vg(-1,eg(a)):Lq:Ia(a,Fp)?Nq[Na(a)]:new Vg(1,a)}function Fg(a){var b;return Ha(a,Bp)&&(a=Md(4194303&~a.l,4194303&~a.m,1048575&~a.h)),64-(b=Na(gi(a,32)),0!=b?Zh(b):Zh(Na(a))+32)}function Gg(a){var b,c;return a>-129&&a<128?(b=a+128,null==oq&&(oq=Od(Nr,Up,2,256,0)),c=oq[b],!c&&(c=oq[b]=Bf(a)),c):Bf(a)}function Hg(){var a;return 0!=bq&&(a=(new Date).getTime())-dq>2e3&&(dq=a,eq=bf()),0==bq++&&(ff((Qa(),fq)),!0)}function Ig(a,b,c){var d=a.e[c];if(d)for(var e=0,f=d.length;e<f;++e){var g=d[e],h=g.ab();if(a.X(b,h))return!0}return!1}function Jg(a,b,c){var d=a.e[c];if(d)for(var e=0,f=d.length;e<f;++e){var g=d[e],h=g.ab();if(a.X(b,h))return g.bb()}return null}function Kg(a,b){var c=a.e;for(var d in c){var e=parseInt(d,10);if(d==e)for(var f=c[e],g=0,h=f.length;g<h;++g)b.I(f[g])}}function Lg(a,b){return 524288==a.h&&0==a.m&&0==a.l?(b&&(nq=Md(0,0,0)),yb((ng(),kq))):(b&&(nq=Md(a.l,a.m,a.h)),Md(0,0,0))}function Mg(a,b){var c;return a===b||!!Qb(b,20)&&(c=Qd(b,20),c.f==a.f&&(a.b<54?c.i==a.i:kg(a.d,c.d)))}function Ng(a,b,c){var d,e,f;return e=Qd(a.d.R(b),22),e?(f=e.f,yc(e,c),Gb(a,e),f):(d=new de(a,b,c),a.d.T(b,d),Yd(d),null)}function Og(a,b,c){var d,e;return d=Xb(a,b++),d>=55296&&d<=56319&&b<c&&Vb(e=a.charCodeAt(b))?65536+((1023&d)<<10)+(1023&e):d}function Pg(a){var b,c;c=new E;try{aj(c,new W((cj(),Qg(a))))}catch(a){throw a=vd(a),Qb(a,4)?(b=a,new pa(b)):a}return c}function Qg(a){cj();var b;if(null==a)throw new ta(Vl);try{b=Gf(a,wn)}catch(c){if(c=vd(c),!Qb(c,6))throw c;b=bi(a)}return b=Fi(b,b.length)}function Rg(a){return 0==a.length||a[0]>oj&&a[a.length-1]>oj?a:a.replace(/^(\s*)/,lj).replace(/\s*$/,lj)}function Sg(a){ec();var b,c,d,e;for(va.call(this,(ti(),hr)),b=uf(a),d=new C,c=0;c<b;++c)e=new E,aj(e,a),Lh(d.b,d.c++,e);this.b=d}function Tg(a){ec();var b,c,d,e,f;for(va.call(this,(ti(),jr)),b=uf(a),e=new _f,c=0;c<b;++c)d=Uf(a),f=new E,aj(f,a),Ng(e,d,f);this.b=e}function Ug(a){return ld(a,(ng(),jq))?-0x8000000000000000:Fh(a,lq)?a.l+4194304*a.m+17592186044416*a.h:-ge(eg(a))}function Vg(a,b){this.f=a,ld(id(b,yp),Bp)?(this.e=1,this.b=me(Fr,Qp,-1,[Na(b)])):(this.e=2,this.b=me(Fr,Qp,-1,[Na(b),Na(gi(b,32))]))}function Wg(a,b){this.f=a,b<4294967296?(this.e=1,this.b=me(Fr,Qp,-1,[~~b])):(this.e=2,this.b=me(Fr,Qp,-1,[~~(b%4294967296),~~(b/4294967296)]))}function Xg(a,b){var c=a[b],d=null==c?_o:typeof c;return d==bp&&(Object.prototype.toString.call(c)==Un||typeof c.length==ap)?io:d}function Yg(){switch(mq){case 1:return new q;case 2:return new r;case 3:return new s;case 4:return new t;case 5:return new u}return new o}function Zg(a,b,c,d){Nh();var e,f;for(e=Bp,f=0;f<c;++f)e=vg(Ui(id(Gg(b[f]),Mp),id(Gg(d),Mp)),id(Gg(Na(e)),Mp)),a[f]=Na(e),e=Rh(e,32);return Na(e)}function $g(a){return kj({moduleName:fj,sessionId:$sessionId,subSystem:mp,evtGroup:Wo,millis:(new Date).getTime(),type:cp,className:a})}function _g(a){var b,c,d;return Fh(a,Bp)?(c=xb(a,Kp),d=Nb(a,Kp)):(b=Rh(a,1),c=xb(b,Jp),d=Nb(b,Jp),d=vg(Qh(d,1),id(a,Cp))),jd(Qh(d,32),id(c,Mp))}function ah(a,b){var c,d,e;for(e=new _f,d=a.b.Q().H();d.Z();)c=Qd(d.$(),25),Ng(e,Qd(c.ab(),1),b?pd(Qd(c.bb(),36)):od(Qd(c.bb(),36)));return new Vc(e)}function bh(a,b,c){var d,e,f;for(e=a.Q().H();e.Z();)if(d=Qd(e.$(),25),f=d.ab(),null==b?null==f:Kd(b,f))return c&&(d=new Xa(d.ab(),d.bb()),e._()),d;return null}
function ch(a,b){var c,d,e;return b<=22?(c=a.l&(1<<b)-1,d=e=0):b<=44?(c=a.l,d=a.m&(1<<b-22)-1,e=0):(c=a.l,d=a.m,e=a.h&(1<<b-44)-1),Md(c,d,e)}function dh(a){return 0==a.f||0==a.b&&-1!=a.i?(!a.d&&(a.d=bg(a.i)),a.d):a.f<0?df((!a.d&&(a.d=bg(a.i)),a.d),Ei(-a.f)):Ci((!a.d&&(a.d=bg(a.i)),a.d),Ei(a.f))}function eh(a,b){var c;if(Cr==b)return!0;if(ds==b&&Qb(a,42))return!0;if(null!=a)for(c=Pc(a);c&&c!=Cr;c=c.e)if(c==b)return!0;return!1}function fh(a,b){var c,d;if(null==b)throw new oa($o);for(Fb(a),c=Od(as,Qp,-1,b.length,1),d=0;d<b.length;++d)c[d]=b[d];return a.d=new yd(0==b.length?b:c),a}function gh(){var a,b,c;for(b=jj.compatMode,a=me(_r,Up,1,[Wk]),c=0;c<a.length;++c)if(Rd(a[c],b))return;1==a.length&&Rd(Wk,a[0])&&Rd(Jk,b)}function hh(a,b){var c;if(b.d=a,2==a)c=String.prototype;else{if(!(a>0))return;var d=zc(b);if(!d)return d=Op[a]=function(){},void(d.cZ=b);c=d.prototype}c.cZ=b}function ih(a,b){xg(a,4),a.b[a.c++]=~~(~~b>>>24<<24)>>24,a.b[a.c++]=~~((~~b>>>16&255)<<24)>>24,a.b[a.c++]=~~((~~b>>>8&255)<<24)>>24,a.b[a.c++]=~~((255&b)<<24)>>24}function jh(a,b,c){a.c.z(a.b,vp),c?Ud((a.c.z(a.b,mj),a),b+1):a.c.z(a.b,oj),Mb(a,Qi(Ik)),a.c.y(a.b,qj),c?Ud((a.c.z(a.b,mj),a),b):a.c.z(a.b,oj),a.c.z(a.b,wp)}function kh(a,b){Nh();var c,d;for(fi(),d=Mq,c=a;b>1;b>>=1)0!=(1&b)&&(d=df(d,c)),c=1==c.e?df(c,c):new Dg(yi(c.b,c.e,Od(Fr,Qp,-1,c.e<<1,1)));return d=df(d,c)}function lh(){lh=a,tq=me(Sr,Qp,-1,[48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122])}function mh(a){var b;if(b=rq,!b&&(b=rq=/^\s*[+-]?(NaN|Infinity|((\d+\.?\d*)|(\.\d+))([eE][+-]?\d+)?[dDfF]?)\s*$/),!b.test(a))throw new ua(Jl+a+yj);return parseFloat(a)}function nh(a){var b,c,d;if(b=Od(Sr,Qp,-1,8,1),lh(),c=tq,d=7,a>=0)for(;a>15;)b[d--]=c[15&a],a>>=4;else for(;d>0;)b[d--]=c[15&a],a>>=4;return b[d]=c[15&a],Ue(b,d,8)}function oh(a,b){var c,d,e;return!((e=a.h-b.h)<0)&&(c=a.l-b.l,d=a.m-b.m+(~~c>>22),!((e+=~~d>>22)<0)&&(a.l=4194303&c,a.m=4194303&d,a.h=1048575&e,!0))}function ph(a){var b,c,d,e;for(e=Ii(a,Xn,0),d=ij,b=0,c=e.length-1;b<c;++b)Rd(e[b],ro)||(d[e[b]]||(d[e[b]]={}),d=null!=d?d[e[b]]:null);return null!=d?d[e[b]]:null}function qh(a,b,c){if(a<0||a>1114111)throw new ca;return a>=65536?(b[c++]=55296+(~~(a-65536)>>10&1023)&65535,b[c]=56320+(a-65536&1023)&65535,2):(b[c]=65535&a,1)}function rh(a){var b,c,d,e;for(d=new Bc,b=null,d.c.y(d.b,Kn),c=a.H();c.Z();)null!=b?d.c.y(d.b,b):b=Lj,e=c.$(),d.c.y(d.b,e===a?Dj:lj+e);return d.c.y(d.b,fo),d.c.D(d.b)}function sh(a){var b;return 0!=a.c?a.c:a.b<54?(b=pi(a.i),a.c=Na(id(b,Ap)),a.c=33*a.c+Na(id(gi(b,32),Ap)),a.c=17*a.c+af(a.f),a.c):(a.c=17*hg(a.d)+af(a.f),a.c)}function th(a,b,c){if(c<0)for(;c<0;)--b,Vb(a.charCodeAt(b))&&Ub(a.charCodeAt(b-1))&&--b,++c;else for(;c>0;)Ub(a.charCodeAt(b))&&Vb(a.charCodeAt(b+1))&&++b,++b,--c;return b}function uh(a){var b,c,d;return d=lj,a=Rg(a),b=a.indexOf(Cj),c=0==a.indexOf(Fo)?8:0,-1==b&&(b=rb(a,Ih(64)),c=0==a.indexOf(Go)?9:0),-1!=b&&(d=Rg(a.substr(c,b-c))),d.length>0?d:ho}function vh(a,b){var c=new Array(b);if(3==a)for(var d=0;d<b;++d){var e=new Object;e.l=e.m=e.h=0,c[d]=e}else if(a>0)for(var e=[null,0,!1][a],d=0;d<b;++d)c[d]=e;return c}function wh(a,b,c,d,e){var f,g;for(f=Bp,g=0;g<e;++g)f=vg(f,wg(id(Gg(b[g]),Mp),id(Gg(d[g]),Mp))),a[g]=Na(f),f=gi(f,32);for(;g<c;++g)f=vg(f,id(Gg(b[g]),Mp)),a[g]=Na(f),f=gi(f,32)}function xh(a,b,c){var d,e;d=Hg();try{if(!aq)return mc(a,b,c);try{return mc(a,b,c)}catch(a){if(a=vd(a),Qb(a,19))return e=a,void na(yn+e.n());throw a}}finally{Oe(d)}}function yh(a,b){var c,d,e,f;for(d=0,e=a.length;d<e;++d){f=a[d];try{f[1]?f[0].Lc()&&(b=$c(b,f)):f[0].Lc()}catch(a){if(a=vd(a),!Qb(a,19))throw a;c=a,!!aq&&na(yn+c.n())}}return b}function zh(a,b,c,d){var e,f;if(0==d)Li(b,0,a,c,a.length-c);else for(f=32-d,a[a.length-1]=0,e=a.length-1;e>c;--e)a[e]|=~~b[e-c-1]>>>f,a[e-1]=b[e-c-1]<<d;for(e=0;e<c;++e)a[e]=0}function Ah(a,b){var c=a.e;for(var d in c){var e=parseInt(d,10);if(d==e)for(var f=c[e],g=0,h=f.length;g<h;++g){var i=f[g],j=i.bb();if(a.X(b,j))return!0}}return!1}function Bh(a,b,c){var d=a.e[c];if(d)for(var e=0,f=d.length;e<f;++e){var g=d[e],h=g.ab();if(a.X(b,h))return 1==d.length?delete a.e[c]:d.splice(e,1),--a.j,g.bb()}return null}function Ch(){Ch=a,ec(),pr=new Yc((ti(),cr)),qr=new Yc(dr),rr=new Yc(ar),sr=new Yc(er),tr=new Yc(gr),vr=new Yc(ir),ur=new Yc(hr),wr=new Yc(jr),xr=new Yc(lr),yr=new Yc(mr),zr=new Yc(nr)}function Dh(a,b){var c;if(tb(a)===tb(b))return!0;if(null==a||null==b)return!1;if(a.length!=b.length)return!1;for(c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0}function Eh(a,b){var c,d;return c=~~a.h>>19,d=~~b.h>>19,0==c?0!=d||a.h>b.h||a.h==b.h&&a.m>b.m||a.h==b.h&&a.m==b.m&&a.l>b.l:!(0==d||a.h<b.h||a.h==b.h&&a.m<b.m||a.h==b.h&&a.m==b.m&&a.l<=b.l)}function Fh(a,b){var c,d;return c=~~a.h>>19,d=~~b.h>>19,0==c?0!=d||a.h>b.h||a.h==b.h&&a.m>b.m||a.h==b.h&&a.m==b.m&&a.l>=b.l:!(0==d||a.h<b.h||a.h==b.h&&a.m<b.m||a.h==b.h&&a.m==b.m&&a.l<b.l)}function Gh(a){var b,c;return a>-0x800000000000&&a<0x800000000000?0==a?0:(b=a<0,b&&(a=-a),c=af(db(Math.log(a)/.6931471805599453)),(!b||a!=Math.pow(2,c))&&++c,c):Fg(pi(a))}function Hh(a,b){var c;if(b<0)throw new la(xm);if(0==b)return Mq;if(1==b||kg(a,Mq)||kg(a,Pq))return a;if(!Th(a,0)){for(c=1;!Th(a,c);)++c;return df(tg(c*b),Hh(Ce(a,c),b))}return kh(a,b)}function Ih(a){var b,c;return a>=65536?(b=55296+(~~(a-65536)>>10&1023)&65535,c=56320+(a-65536&1023)&65535,String.fromCharCode(b)+String.fromCharCode(c)):String.fromCharCode(65535&a)}function Jh(a,b,c,d,e){var f,g,h;for(f=!0,g=0;g<d;++g)f&=0==c[g];if(0==e)Li(c,d,a,0,b);else{for(h=32-e,f&=c[g]<<h==0,g=0;g<b-1;++g)a[g]=~~c[g+d]>>>e|c[g+d+1]<<h;a[g]=~~c[g+d]>>>e,++g}return f}function Kh(a){var b,c,d,e;for(b=0,d=a.length,e=d-4,c=0;c<e;)b=a.charCodeAt(c+3)+31*(a.charCodeAt(c+2)+31*(a.charCodeAt(c+1)+31*(a.charCodeAt(c)+31*b)))|0,c+=4;for(;c<d;)b=31*b+Xb(a,c++);return 0|b}function Lh(b,c,d){if(null!=d){if(b.qI>0&&!ub(d,b.qI))throw new aa;if(-1==b.qI&&(d.tM==a||Pb(d,1)))throw new aa;if(b.qI<-1&&(d.tM==a||Pb(d,1))&&!ub(d,-b.qI))throw new aa}return b[c]=d}function Mh(a,b,c,d){var e=a.e[d];if(e)for(var f=0,g=e.length;f<g;++f){var h=e[f],i=h.ab();if(a.X(b,i)){var j=h.bb();return h.cb(c),j}}else e=a.e[d]=[];var h=new Xa(b,c);return e.push(h),++a.j,null}function Nh(){Nh=a;var b,c;for(Sq=Od(vs,Up,21,32,0),Tq=Od(vs,Up,21,32,0),b=Cp,c=0;c<=18;++c)Sq[c]=Eg(b),Tq[c]=Eg(Qh(b,c)),b=Ui(b,Ep);for(;c<Tq.length;++c)Sq[c]=df(Sq[c-1],Sq[1]),Tq[c]=df(Tq[c-1],(fi(),Oq))}function Oh(a,b){var c=[];for(i=0;i<a-1;i++)c.push(b[i]);var d=b.length,e=a-1;if(d>=a&&Object.prototype.toString.apply(b[e])===Un)c.push(b[e]);else{var f=[];for(i=e;i<d;i++)f.push(b[i]);c.push(f)}return c}function Ph(a){var b,c,d,e;for(e=a.length,b=new B,b.c.z(b.b,yj),d=0;d<e;d=th(a,d,1))c=a.charCodeAt(d),34==c||92==c?Pd((b.c.z(b.b,Vn),b),c):b.c.z(b.b,String.fromCharCode(c));return b.c.z(b.b,yj),b.c.D(b.b)}function Qh(a,b){var c,d,e;return b&=63,b<22?(c=a.l<<b,d=a.m<<b|~~a.l>>22-b,e=a.h<<b|~~a.m>>22-b):b<44?(c=0,d=a.l<<b-22,e=a.m<<b-22|~~a.l>>44-b):(c=0,d=0,e=a.l<<b-44),Md(4194303&c,4194303&d,1048575&e)}function Rh(a,b){var c,d,e,f;return b&=63,c=1048575&a.h,b<22?(f=~~c>>>b,e=~~a.m>>b|c<<22-b,d=~~a.l>>b|a.m<<22-b):b<44?(f=0,e=~~c>>>b-22,d=~~a.m>>b-22|a.h<<44-b):(f=0,e=0,d=~~c>>>b-44),Md(4194303&d,4194303&e,1048575&f)}function Sh(a,b,c){var d=Op[a];d&&!d.cZ?hj=d.prototype:(!d&&(d=Op[a]=function(){}),hj=d.prototype=b<0?{}:Ka(b),hj.cM=c);for(var e=3;e<arguments.length;++e)arguments[e].prototype=hj;d.cZ&&(hj.cZ=d.cZ,d.cZ=null)}function Th(a,b){var c,d,e;if(0==b)return 0!=(1&a.b[0]);if(b<0)throw new la(wm);if((e=~~b>>5)>=a.e)return a.f<0;if(c=a.b[e],b=1<<(31&b),a.f<0){if(d=Jf(a),e<d)return!1;c=d==e?-c:~c}return 0!=(c&b)}function Uh(a){return a.f<=-32||a.f>(a.e>0?a.e:db(.3010299956639812*(a.b-1))+1)?0:La(0==a.f||0==a.b&&-1!=a.i?(!a.d&&(a.d=bg(a.i)),a.d):a.f<0?df((!a.d&&(a.d=bg(a.i)),a.d),Ei(-a.f)):Ci((!a.d&&(a.d=bg(a.i)),a.d),Ei(a.f)))}function Vh(a){return a.f<=-64||a.f>(a.e>0?a.e:db(.3010299956639812*(a.b-1))+1)?Bp:Tf(0==a.f||0==a.b&&-1!=a.i?(!a.d&&(a.d=bg(a.i)),a.d):a.f<0?df((!a.d&&(a.d=bg(a.i)),a.d),Ei(-a.f)):Ci((!a.d&&(a.d=bg(a.i)),a.d),Ei(a.f)))}function Wh(a,b){var c,d,e,f;for(c=b.length,d=3&c,a.e=(~~c>>2)+(0==d?0:1),a.b=Od(Fr,Qp,-1,a.e,1),e=0;c>d;)a.b[e++]=255&b[--c]|(255&b[--c])<<8|(255&b[--c])<<16|(255&b[--c])<<24;for(f=0;f<c;++f)a.b[e]=a.b[e]<<8|255&b[f]}function Xh(a){switch(Ch(),a.d){case 8:return vr;case 6:return tr;case 2:return pr;case 11:return xr;case 4:return sr;case 0:return rr;case 3:return qr;case 7:return ur;case 12:return yr;case 9:return wr;default:return zr}}function Yh(a,b,c,d,e){var f,g,h,i;if(tb(a)===tb(b)&&d==e)return void yi(a,d,c);for(h=0;h<d;++h){for(g=Bp,f=a[h],i=0;i<e;++i)g=vg(vg(Ui(id(Gg(f),Mp),id(Gg(b[i]),Mp)),id(Gg(c[h+i]),Mp)),id(Gg(Na(g)),Mp)),c[h+i]=Na(g),g=Rh(g,32);c[h+e]=Na(g)}}function Zh(a){var b,c,d;return a<0?0:0==a?32:(d=-(~~a>>16),b=~~d>>16&16,c=16-b,a=~~a>>b,d=a-256,b=~~d>>16&8,c+=b,a<<=b,d=a-4096,b=~~d>>16&4,c+=b,a<<=b,d=a-16384,b=~~d>>16&2,c+=b,a<<=b,d=~~a>>14,b=d&~(~~d>>1),c+2-b)}function $h(a,b,c,d,e){var f,g,h,i,j,k,l,m,n;for(l=re(b.R(c))[d][e.length],h=null,m=null,f=null,g=0,i=l?l.length:0;g<i;++g)if(k=l[g],Hi(k,e)){h=k[0],m=k[1],f=k[2];break}return h?(e=f?f(a,e):e,n=h.apply(a,e),j=[m?m(n):n],j):null}function _h(a,b,c,d,e){var f,g,h;for(f=Bp,g=Bp,h=0;h<d;++h)Nh(),f=vg(Ui(id(Gg(c[h]),Mp),id(Gg(e),Mp)),id(Gg(Na(f)),Mp)),g=vg(wg(id(Gg(a[b+h]),Mp),id(f,Mp)),g),a[b+h]=Na(g),g=gi(g,32),f=Rh(f,32);return g=vg(wg(id(Gg(a[b+d]),Mp),f),g),a[b+d]=Na(g),Na(gi(g,32))}function ai(a,b){Nh();var c,d,e,f,g,h,i,j,k;return b.e>a.e&&(h=a,a=b,b=h),b.e<63?hi(a,b):(g=(-2&a.e)<<4,j=Ce(a,g),k=Ce(b,g),d=Di(a,Be(j,g)),e=Di(b,Be(k,g)),i=ai(j,k),c=ai(d,e),f=ai(Di(j,d),Di(e,k)),f=Oi(Oi(f,i),c),f=Be(f,g),i=Be(i,g<<1),Oi(Oi(i,f),c))}function bi(a){var b,c,d,e,f,g;for(f=a.length,b=0,e=0;e<f;)d=Og(a,e,a.length),e+=d>=65536?2:1,d<128?++b:d<2048?b+=2:d<65536?b+=3:d<2097152?b+=4:d<67108864&&(b+=5);for(c=Od(as,Qp,-1,b,1),g=0,e=0;e<f;)d=Og(a,e,a.length),e+=d>=65536?2:1,g+=Wi(c,g,d);return c}function ci(a){var b,c,d;return 0!=((c=a.l)&c-1)?-1:0!=((d=a.m)&d-1)?-1:(b=a.h,0!=(b&b-1)?-1:0==b&&0==d&&0==c?-1:0==b&&0==d&&0!=c?Cf(c):0==b&&0!=d&&0==c?Cf(d)+22:0!=b&&0==d&&0==c?Cf(b)+44:-1)}function di(a,b,c,d){var e,f,g,h;for(h=d&&a.b.L()>1,g=gd(a.b),f=new H(g.c.H()),b.c.z(b.b,Kn),h&&Ud((b.c.z(b.b,mj),b),c+1);f.b.Z();)e=Qd(f.b.$(),36),e.d.zb(b,h?c+1:c,d),f.b.Z()&&(h?Ud((b.c.y(b.b,Kj),b),c+1):b.c.z(b.b,Jj));h&&Ud((b.c.z(b.b,mj),b),c),b.c.z(b.b,fo)}function ei(a,b,c,d,e,f,g){var h,i,j,k,l;if(i=f?a.c:a.b,g){for(k=De(re(i.R(c)),d),j=k;j>=1;--j)if(h=Oh(j,e),l=$h(b,i,c,d,h),l||(h=Ee(b,h),l=$h(b,i,c,d,h)),l)return l}else if(l=$h(b,i,c,d,e),l||(e=Ee(b,e),l=$h(b,i,c,d,e)),l)return l;throw new ia(Xk+d+dk+e.length+mj)}function fi(){fi=a;var b;for(Mq=new ce(1,1),Oq=new ce(1,10),Pq=new ce(0,0),Lq=new ce(-1,1),Nq=me(vs,Up,21,[Pq,Mq,new ce(1,2),new ce(1,3),new ce(1,4),new ce(1,5),new ce(1,6),new ce(1,7),new ce(1,8),new ce(1,9),Oq]),Uq=Od(vs,Up,21,32,0),b=0;b<Uq.length;++b)Uq[b]=Eg(Qh(Cp,b))}function gi(a,b){var c,d,e,f,g;return b&=63,c=a.h,d=0!=(524288&c),d&&(c|=-1048576),b<22?(g=~~c>>b,f=~~a.m>>b|c<<22-b,e=~~a.l>>b|a.m<<22-b):b<44?(g=d?1048575:0,f=~~c>>b-22,e=~~a.m>>b-22|c<<44-b):(g=d?1048575:0,f=d?4194303:0,e=~~c>>b-44),Md(4194303&e,4194303&f,1048575&g)}function hi(a,b){var c,d,e,f,g,h,i,j,k,l,m;return d=a.e,f=b.e,h=d+f,i=a.f!=b.f?-1:1,2==h?(k=Ui(id(Gg(a.b[0]),Mp),id(Gg(b.b[0]),Mp)),m=Na(k),l=Na(Rh(k,32)),0==l?new ce(i,m):new ed(i,2,me(Fr,Qp,-1,[m,l]))):(c=a.b,e=b.b,g=Od(Fr,Qp,-1,h,1),lg(c,d,e,f,g),j=new ed(i,h,g),Ne(j),j)}function ii(a){var b,c,d,e;if(null==a)throw new ua(_o);for(c=a.length,d=c>0&&45==a.charCodeAt(0)?1:0,b=d;b<c;++b)if(-1==gg(a.charCodeAt(b)))throw new ua(Jl+a+yj);if(e=parseInt(a,10),isNaN(e))throw new ua(Jl+a+yj);if(e<-2147483648||e>2147483647)throw new ua(Jl+a+yj);return e}function ji(a,b){var c,d,e,f,g;if(d=~~b>>5,b&=31,d>=a.e)return a.f<0?(fi(),Lq):(fi(),Pq);if(f=a.e-d,e=Od(Fr,Qp,-1,f+1,1),Jh(e,f,a.b,d,b),a.f<0){for(c=0;c<d&&0==a.b[c];++c);if(c<d||b>0&&a.b[c]<<32-b!=0){for(c=0;c<f&&-1==e[c];++c)e[c]=0;c==f&&++f,++e[c]}}return g=new ed(a.f,f,e),Ne(g),g}function ki(a,b,c,d){var e,f,g,h;for(b.c.z(b.b,vp),g=d&&a.b.L()>1,g&&Ud((b.c.z(b.b,mj),b),c+1),f=a.b.Q().H();f.Z();)e=Qd(f.$(),25),Mb(b,Ph(Qd(e.ab(),1))),h=Qd(e.bb(),36),b.c.y(b.b,rj),h.d.zb(b,g?c+1:c,d),f.Z()&&(g?Ud((b.c.y(b.b,Kj),b),c+1):b.c.z(b.b,Jj));g&&Ud((b.c.z(b.b,mj),b),c),b.c.z(b.b,wp)}function li(a){var b,c,d,e,f;if(0==a.l&&0==a.m&&0==a.h)return Sj;if(524288==a.h&&0==a.m&&0==a.l)return Pj;if(~~a.h>>19!=0)return Oj+li(eg(a));for(c=a,d=lj;0!=c.l||0!=c.m||0!=c.h;){if(e=Gg(1e9),c=Si(c,e,!0),b=lj+Na(nq),0!=c.l||0!=c.m||0!=c.h)for(f=9-b.length;f>0;--f)b=Sj+b;d=b+d}return d}function mi(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;for(m=b.length,i=m,45==b.charCodeAt(0)?(k=-1,l=1,--m):(k=1,l=0),f=(Pi(),Rq)[10],e=~~(m/f),p=m%f,0!=p&&++e,h=Od(Fr,Qp,-1,e,1),c=Qq[8],g=0,n=l+(0==p?f:p),o=l;o<i;o=n,n+=f)d=ii(b.substr(o,n-o)),Nh(),j=Zg(h,h,g,c),j+=zg(h,g,d),h[g++]=j;a.f=k,a.e=g,a.b=h,Ne(a)}function ni(a,b){var c,d,e,f,g,h,i,j,k,l;for(l=Od(Lr,Up,18,b.length,0),f=0,g=l.length;f<g;++f)k=Ii(b[f],ik,0),i=-1,c=-1,e=zn,2==k.length&&null!=k[1]&&(j=k[1],h=Yb(j,Ih(58)),d=oc(j,Ih(58),h-1),e=j.substr(0,d-0),-1!=h&&-1!=d&&(i=sb(j.substr(d+1,h-(d+1))),c=sb(Mc(j,h+1)))),l[f]=new Ed(k[0],e+hk+c,a.v(i<0?-1:i));Xf(l)}function oi(a,b){var c,d,e,f,g;return d=id(Gg(b),Mp),Fh(a,Bp)?(f=Si(a,d,!1),g=Nb(a,d)):(c=Rh(a,1),e=Gg(~~b>>>1),f=Si(c,e,!1),g=Nb(c,e),g=vg(Qh(g,1),id(a,Cp)),0!=(1&b)&&(Eh(f,g)?Ia(wg(f,g),d)?(g=vg(g,wg(d,f)),f=wg(f,Cp)):(g=vg(g,wg(Qh(d,1),f)),f=wg(f,Dp)):g=wg(g,f))),jd(Qh(g,32),id(f,Mp))}function pi(a){var b,c,d,e,f;return isNaN(a)?(ng(),lq):a<-0x8000000000000000?(ng(),jq):a>=0x8000000000000000?(ng(),iq):(e=!1,a<0&&(e=!0,a=-a),d=0,a>=17592186044416&&(d=af(a/17592186044416),a-=17592186044416*d),c=0,a>=4194304&&(c=af(a/4194304),a-=4194304*c),b=af(a),f=Md(b,c,d),e&&ug(f),f)}function qi(a,b,c,d){var e,f,g;for(b.c.y(b.b,oo),d?(b.c.z(b.b,mj),Ud(b,c+1)):b.c.z(b.b,oj),f=0,g=a.b.length;f<g;++f)e=a.b[f],e>=0&&e<16?Mb((b.c.y(b.b,bk),b),nh(255&e)):Mb((b.c.y(b.b,ak),b),nh(255&e)),f!=g-1&&(d&&7==(7&f)?Ud((b.c.y(b.b,Kj),b),c+1):b.c.y(b.b,Lj));d?Ud((b.c.z(b.b,mj),b),c):b.c.z(b.b,oj),b.c.z(b.b,wp)}function ri(a){switch(ti(),a){case 74:return ir;case 73:return gr;case 90:return cr;case 115:return lr;case 68:return er;case 100:return ar;case 105:return br;case 98:return dr;case 108:return hr;case 116:return mr;case 111:return jr;case 112:return kr;case 101:return fr;case 117:return nr;default:throw new oa(_l+String.fromCharCode(a)+Aj)}}function si(a,b){xg(a,8),a.b[a.c++]=~~(Na(Rh(b,56))<<24)>>24,a.b[a.c++]=~~(Na(id(Rh(b,48),Ip))<<24)>>24,a.b[a.c++]=~~(Na(id(Rh(b,40),Ip))<<24)>>24,a.b[a.c++]=~~(Na(id(Rh(b,32),Ip))<<24)>>24,a.b[a.c++]=~~(Na(id(Rh(b,24),Ip))<<24)>>24,a.b[a.c++]=~~(Na(id(Rh(b,16),Ip))<<24)>>24,a.b[a.c++]=~~(Na(id(Rh(b,8),Ip))<<24)>>24,a.b[a.c++]=~~(Na(id(b,Ip))<<24)>>24}function ti(){ti=a,ar=new Cc(Ek,0,100),br=new Cc(Fk,1,105),cr=new Cc(Gk,2,90),dr=new Cc(Hk,3,98),er=new Cc(pl,4,68),fr=new Cc(zl,5,101),gr=new Cc(Ml,6,73),hr=new Cc(dm,7,108),ir=new Cc(em,8,74),jr=new Cc(Gm,9,111),kr=new Cc(Km,10,112),lr=new Cc(Rm,11,115),mr=new Cc(rn,12,116),nr=new Cc(vn,13,117),_q=me(xs,Up,37,[ar,br,cr,dr,er,fr,gr,hr,ir,jr,kr,lr,mr,nr])}function ui(){ui=a;var b;for(uq=me(Fr,Qp,-1,[-1,-1,30,19,15,13,11,11,10,9,9,8,8,8,8,7,7,7,7,7,7,7,6,6,6,6,6,6,6,6,6,6,6,6,6,6,5]),vq=Od(Fr,Qp,-1,37,1),wq=me(Fr,Qp,-1,[-1,-1,63,40,32,28,25,23,21,20,19,19,18,18,17,17,16,16,16,15,15,15,15,14,14,14,14,14,14,13,13,13,13,13,13,13,13]),xq=Od(Ur,Qp,-1,37,3),b=2;b<=36;++b)vq[b]=af(wb(b,uq[b])),xq[b]=xb(Np,Gg(vq[b]))}function vi(a,b){var c,d,e,f,g,h,i;if(null==a)throw new ta(al);if(b<0)throw new oa($k+b);if(b>a.length)throw new oa(X(_k,me(Gr,Up,0,[dg(0),dg(b),dg(a.length)])));for(e=4*~~(b/3)+(b%3>0?4:0),i=Od(as,Qp,-1,e,1),c=0,d=0,g=b-2,h=0;c<g;c+=3,d+=4)zi(a,c,3,i,d),h+=4;return c<b&&(zi(a,c,b-c,i,d),d+=4),d<=i.length-1?(f=Od(as,Qp,-1,d,1),Li(i,0,f,0,d),f):i}function wi(a,b,c,d){var e,f,g,h,i,j,k;for(j=Bp,f=id(Gg(d),Mp),h=c-1;h>=0;--h)k=jd(Qh(j,32),id(Gg(b[h]),Mp)),Fh(k,Bp)?(i=Si(k,f,!1),j=Nb(k,f)):(e=Rh(k,1),g=Gg(~~d>>>1),i=Si(e,g,!1),j=Nb(e,g),j=vg(Qh(j,1),id(k,Cp)),0!=(1&d)&&(Eh(i,j)?Ia(wg(i,j),f)?(j=vg(j,wg(f,i)),i=wg(i,Cp)):(j=vg(j,wg(Qh(f,1),i)),i=wg(i,Dp)):j=wg(j,i))),a[h]=Na(id(i,Mp));return Na(j)}function xi(a,b,c,d,e,f){var g,h,i,j,k,l;for(i=Lf(b)-Lf(a),g=Qh(b,i),h=Md(0,0,0);i>=0&&(!oh(a,g)||(i<22?h.l|=1<<i:i<44?h.m|=1<<i-22:h.h|=1<<i-44,0!=a.l||0!=a.m||0!=a.h));)j=g.m,k=g.h,l=g.l,g.h=~~k>>>1,g.m=~~j>>>1|(1&k)<<21,g.l=~~l>>>1|(1&j)<<21,--i;return c&&ug(h),f&&(d?(nq=eg(a),e&&(nq=wg(nq,(ng(),kq)))):nq=Md(a.l,a.m,a.h)),h}function yi(a,b,c){var d,e,f,g;for(e=0;e<b;++e){for(d=Bp,g=e+1;g<b;++g)d=vg(vg(Ui(id(Gg(a[e]),Mp),id(Gg(a[g]),Mp)),id(Gg(c[e+g]),Mp)),id(Gg(Na(d)),Mp)),c[e+g]=Na(d),d=Rh(d,32);c[e+b]=Na(d)}for(Rf(c,c,b<<1),d=Bp,e=0,f=0;e<b;++e,++f)d=vg(vg(Ui(id(Gg(a[e]),Mp),id(Gg(a[e]),Mp)),id(Gg(c[f]),Mp)),id(Gg(Na(d)),Mp)),c[f]=Na(d),d=Rh(d,32),++f,d=vg(d,id(Gg(c[f]),Mp)),c[f]=Na(d),d=Rh(d,32);return c}function zi(a,b,c,d,e){var f,g;switch(f=Vq,g=(c>0?~~(a[b]<<24)>>>8:0)|(c>1?~~(a[b+1]<<24)>>>16:0)|(c>2?~~(a[b+2]<<24)>>>24:0),c){case 3:return d[e]=f[~~g>>>18],d[e+1]=f[~~g>>>12&63],d[e+2]=f[~~g>>>6&63],d[e+3]=f[63&g],d;case 2:return d[e]=f[~~g>>>18],d[e+1]=f[~~g>>>12&63],d[e+2]=f[~~g>>>6&63],d[e+3]=61,d;case 1:return d[e]=f[~~g>>>18],d[e+1]=f[~~g>>>12&63],d[e+2]=61,d[e+3]=61,d;default:return d}}function Ai(a,b){var c,d,e,f,g;for(g=b.length,d=Od(as,Qp,-1,3*g,1),c=0,f=0;f<g;++f)e=b.charCodeAt(f),e>0&&e<=127?d[c++]=~~(e<<24)>>24:e<=2047?(d[c++]=~~((192|31&~~e>>6)<<24)>>24,d[c++]=~~((128|63&e)<<24)>>24):(d[c++]=~~((224|15&~~e>>12)<<24)>>24,d[c++]=~~((128|63&~~e>>6)<<24)>>24,d[c++]=~~((128|63&e)<<24)>>24);xg(a,2),a.b[a.c++]=~~(~~c>>>8<<24)>>24,a.b[a.c++]=~~((255&c)<<24)>>24,xe(a,d,c)}function Bi(a,b,c,d,e){var f,g;if(f=vg(id(Gg(b[0]),Mp),id(Gg(d[0]),Mp)),a[0]=Na(f),f=gi(f,32),c>=e){for(g=1;g<e;++g)f=vg(f,vg(id(Gg(b[g]),Mp),id(Gg(d[g]),Mp))),a[g]=Na(f),f=gi(f,32);for(;g<c;++g)f=vg(f,id(Gg(b[g]),Mp)),a[g]=Na(f),f=gi(f,32)}else{for(g=1;g<c;++g)f=vg(f,vg(id(Gg(b[g]),Mp),id(Gg(d[g]),Mp))),a[g]=Na(f),f=gi(f,32);for(;g<e;++g)f=vg(f,id(Gg(d[g]),Mp)),a[g]=Na(f),f=gi(f,32)}md(f,Bp)&&(a[g]=Na(f))}function Ci(a,b){var c,d,e,f,g,h,i,j,k,l;if(0==b.f)throw new la(Qk);return e=b.f,1==b.e&&1==b.b[0]?b.f>0?a:0==a.f?a:new ed(-a.f,a.e,a.b):(k=a.f,j=a.e,d=b.e,j+d==2?(l=xb(id(Gg(a.b[0]),Mp),id(Gg(b.b[0]),Mp)),k!=e&&(l=eg(l)),Eg(l)):0==(c=j!=d?j>d?1:-1:mg(a.b,b.b,j))?k==e?Mq:Lq:-1==c?Pq:(g=j-d+1,f=Od(Fr,Qp,-1,g,1),h=k==e?1:-1,1==d?wi(f,a.b,j,b.b[0]):Yi(f,g,a.b,j,b.b,d),i=new ed(h,g,f),Ne(i),i))}function Di(a,b){var c,d,e,f,g,h,i,j,k,l;if(g=a.f,0==(i=b.f))return a;if(0==g)return 0==b.f?b:new ed(-b.f,b.e,b.b);if(f=a.e,h=b.e,f+h==2)return c=id(Gg(a.b[0]),Mp),d=id(Gg(b.b[0]),Mp),g<0&&(c=eg(c)),i<0&&(d=eg(d)),Eg(wg(c,d));if(-1==(e=f!=h?f>h?1:-1:mg(a.b,b.b,f)))l=-i,k=g==i?ne(b.b,h,a.b,f):He(b.b,h,a.b,f);else if(l=g,g==i){if(0==e)return fi(),Pq;k=ne(a.b,f,b.b,h)}else k=He(a.b,f,b.b,h);return j=new ed(l,k.length,k),Ne(j),j}function Ei(a){Nh();var b,c,d,e;if(b=af(a),a<Tq.length)return Tq[b];if(a<=50)return Hh((fi(),Oq),b);if(a<=1e3)return Be(Hh(Sq[1],b),b);if(a>1e6)throw new la(jp);if(a<=2147483647)return Be(Hh(Sq[1],b),b);for(d=Hh(Sq[1],2147483647),e=d,c=pi(a-2147483647),b=af(a%2147483647);Eh(c,Lp);)e=df(e,d),c=wg(c,Lp);for(e=df(e,Hh(Sq[1],b)),e=Be(e,2147483647),c=pi(a-2147483647);Eh(c,Lp);)e=Be(e,2147483647),c=wg(c,Lp);return e=Be(e,b)}function Fi(a,b){var c,d,e,f,g,h,i,j,k;if(null==a)throw new ta(Zk);if(b>a.length)throw new oa(X(Ym,me(Gr,Up,0,[dg(a.length),dg(0),dg(b)])));if(0==b)return Od(as,Qp,-1,0,1);if(b<4)throw new oa(Lk+b);for(c=Wq,g=~~(3*b/4),i=Od(as,Qp,-1,g,1),j=0,d=Od(as,Qp,-1,4,1),e=0,f=0;f<b;++f){if(!((k=c[255&a[f]])>=-5))throw new ja(Kk+(255&a[f]));if(k>=-1&&(d[e++]=a[f],e>3&&(j+=Vi(d,i,j),e=0,61==a[f])))break}return h=Od(as,Qp,-1,j,1),Li(i,0,h,0,j),h}function Gi(a){var b,c,d,e,f;return null!=a.j?a.j:a.b<32?(a.j=bj(pi(a.i),af(a.f)),a.j):(e=dj((!a.d&&(a.d=bg(a.i)),a.d),0),0==a.f?e:(b=(!a.d&&(a.d=bg(a.i)),a.d).f<0?2:1,c=e.length,d=-a.f+c-b,f=new A,f.c.y(f.b,e),a.f>0&&d>=-6?d>=0?nc(f,c-af(a.f),Qj):(f.c.C(f.b,b-1,b-1,Tj),nc(f,b+1,Wd(Cq,0,-af(d)-1))):(c-b>=1&&(f.c.C(f.b,b,b,Qj),++c),f.c.C(f.b,c,c,wl),d>0&&nc(f,++c,Ij),nc(f,++c,lj+li(pi(d)))),a.j=f.c.D(f.b),a.j))}function Hi(a,b){var c,d,e,f,g,h,i,j,k;for(e=0,j=b.length;e<j;++e)if(i=a[e+3],c=Xg(b,e),!(Rd(c,i)||Rd(np,i)&&Rd(_o,c)))if(g=Rd(ap,c),f=Rd(mo,c),Cr!==i){if(h=g||f,!h&&null!=i&&Pc(i)==Vr){if(null==(k=b[e])||eh(k,Qd(i,9)))continue;if(hd(k)&&null!=(d=Cb(re(k)))&&eh(d,Qd(i,9))){b[e]=d;continue}}if(!Rd(bp,i)||g||f)return!1}else g&&(b[e]=new I(b[e])),f&&(b[e]=(sd(),b[e]?qq:pq));return!0}function Ii(a,b,c){for(var d=new RegExp(b,Ho),e=[],f=0,g=a,h=null;;){var i=d.exec(g);if(null==i||g==lj||f==c-1&&c>0){e[f]=g;break}e[f]=g.substring(0,i.index),g=g.substring(i.index+i[0].length,g.length),d.lastIndex=0,h==g&&(e[f]=g.substring(0,1),g=g.substring(1)),h=g,f++}if(0==c&&a.length>0){for(var j=e.length;j>0&&e[j-1]==lj;)--j;j<e.length&&e.splice(j,e.length-j)}for(var k=zb(e.length),l=0;l<e.length;++l)k[l]=e[l];return k}function Ji(a,b){var c,d,e,f;for(c=b.length,d=3&c,a.e=(~~c>>2)+(0==d?0:1),a.b=Od(Fr,Qp,-1,a.e,1),e=0,a.b[a.e-1]=-1;c>d;){if(a.b[e]=255&b[--c]|(255&b[--c])<<8|(255&b[--c])<<16|(255&b[--c])<<24,0!=a.b[e]){for(a.b[e]=-a.b[e],a.c=e,++e;c>d;)a.b[e]=255&b[--c]|(255&b[--c])<<8|(255&b[--c])<<16|(255&b[--c])<<24,a.b[e]=~a.b[e],++e;break}++e}if(0!=d)if(-2!=a.c){for(f=0;f<c;++f)a.b[e]=a.b[e]<<8|255&b[f];a.b[e]=~a.b[e]}else{for(f=0;f<c;++f)a.b[e]=a.b[e]<<8|255&b[f];a.b[e]=-a.b[e]}}function Ki(){for(var a=11,b=52,c=arguments,d=[],e=c.length;e;e-=1)for(var f=c[e-1],g=8;g;g-=1)d.push(f%2?1:0),f=~~f>>1;d.reverse();var h=d.join(lj),i=(1<<a-1)-1,j=parseInt(h.substring(0,1),2)?-1:1,k=parseInt(h.substring(1,1+a),2),l=parseInt(h.substring(1+a),2);return k===(1<<a)-1?0!==l?NaN:j*(1/0):k>0?j*Math.pow(2,k-i)*(1+l/Math.pow(2,b)):0!==l?j*Math.pow(2,-(i-1))*(l/Math.pow(2,b)):0*j}function Li(a,b,c,d,e){var f,g,h,i,j,k,l,m,n;if(null==a||null==c)throw new fa;if(m=Pc(a),i=c.cZ,0==(4&m.c)||0==(4&i.c))throw new ma(um);if(l=m.b,g=i.b,!(0!=(1&l.c)?l==g:0==(1&g.c)))throw new ma(Bk);if(n=a.length,j=c.length,b<0||d<0||e<0||b+e>n||d+e>j)throw new ea;if(0!=(1&l.c)&&0==(4&l.c)||m==i)Array.prototype.splice.apply(c,[d,e].concat(a.slice(b,b+e)));else if(k=Qd(a,17),f=Qd(c,17),a===c&&b<d)for(b+=e,h=d+e;h-- >d;)Lh(f,h,k[--b]);else for(h=d+e;d<h;)Lh(f,d++,k[b++])}function Mi(a){var b,c,d,e,f,g,h,i,j,k,l;if(0==a.f)return me(as,Qp,-1,[0]);if(b=sg(a),l=Jf(a),e=1+(~~b>>3),c=Od(as,Qp,-1,e,1),h=0,d=4,e-(a.e<<2)==1?(c[0]=~~((a.f<0?-1:0)<<24)>>24,j=4,++h):(i=3&e,j=0==i?4:i),g=l,e-=l<<2,a.f<0){for(f=-a.b[l],++g,g==a.e&&(d=j),k=0;k<d;++k,f>>=8)c[--e]=~~(f<<24)>>24;for(;e>h;)for(f=~a.b[g],++g,g==a.e&&(d=j),k=0;k<d;++k,f>>=8)c[--e]=~~(f<<24)>>24}else for(;e>h;)for(f=a.b[g],++g,g==a.e&&(d=j),k=0;k<d;++k,f>>=8)c[--e]=~~(f<<24)>>24;return c}function Ni(a,b){var c,d,e;return c=$d(a),c<128?(Pd(b,65535&c),1):c<192?(b.c.z(b.b,gk),1):c<224?(d=$d(a),128!=(192&d)?(b.c.z(b.b,gk),Pd(b,65535&d)):b.c.z(b.b,String.fromCharCode(65535&((31&c)<<6|63&d))),2):c<240?128!=(192&(d=$d(a)))?(b.c.z(b.b,gk),Pd(b,65535&d),2):(e=$d(a),128!=(192&e)?(Pd((b.c.z(b.b,gk),b),63),Pd(b,65535&e)):b.c.z(b.b,String.fromCharCode(65535&((15&c)<<12|(63&d)<<6|63&e))),3):(b.c.z(b.b,gk),1)}function Oi(a,b){var c,d,e,f,g,h,i,j,k,l,m,n;if(g=a.f,i=b.f,0==g)return b;if(0==i)return a;if(f=a.e,h=b.e,f+h==2)return c=id(Gg(a.b[0]),Mp),d=id(Gg(b.b[0]),Mp),g==i?(j=vg(c,d),n=Na(j),m=Na(Rh(j,32)),0==m?new ce(g,n):new ed(g,2,me(Fr,Qp,-1,[n,m]))):Eg(g<0?wg(d,c):wg(c,d));if(g==i)l=g,k=f>=h?He(a.b,f,b.b,h):He(b.b,h,a.b,f);else{if(0==(e=f!=h?f>h?1:-1:mg(a.b,b.b,f)))return fi(),Pq;1==e?(l=g,k=ne(a.b,f,b.b,h)):(l=i,k=ne(b.b,h,a.b,f))}return j=new ed(l,k.length,k),Ne(j),j}function Pi(){Pi=a,Qq=me(Fr,Qp,-1,[-2147483648,1162261467,1073741824,1220703125,362797056,1977326743,1073741824,387420489,1e9,214358881,429981696,815730721,1475789056,170859375,268435456,410338673,612220032,893871739,128e7,1801088541,113379904,148035889,191102976,244140625,308915776,387420489,481890304,594823321,729e6,887503681,1073741824,1291467969,1544804416,1838265625,60466176]),Rq=me(Fr,Qp,-1,[-1,-1,31,19,15,13,11,11,10,9,9,8,8,8,8,7,7,7,7,7,7,7,6,6,6,6,6,6,6,6,6,6,6,6,6,6,5])}function Qi(a){ec();var b,c,d,e,f,g;for(g=a.length,b=new B,b.c.z(b.b,yj),e=0;e<g;e=th(a,e,1))switch(c=a.charCodeAt(e)){case 34:b.c.y(b.b,Wn);break;case 92:b.c.y(b.b,Zn);break;case 8:b.c.y(b.b,$n);break;case 12:b.c.y(b.b,_n);break;case 10:b.c.y(b.b,ao);break;case 13:b.c.y(b.b,bo);break;case 9:b.c.y(b.b,co);break;case 47:b.c.y(b.b,Yn);break;default:if(c>=0&&c<=31||c>=127&&c<=159||c>=8192&&c<=8447){for(d=nh(c),b.c.y(b.b,eo),f=0;f<4-d.length;++f)b.c.z(b.b,Sj);Mb(b,d.toUpperCase())}else b.c.z(b.b,String.fromCharCode(c))}return b.c.z(b.b,yj),b.c.D(b.b)}function Ri(a){var b,d,e=(1<<f-1)-1;if(isNaN(a))d=(1<<e)-1,e=1,b=0;else if(1/0===a||-1/0===a)d=(1<<e)-1,e=0,b=0>a?1:0;else if(0===a)e=d=0,b=-1/0==1/a?1:0;else if(b=0>a,(a=Math.abs(a))>=Math.pow(2,1-e)){var g=Math.min(Math.floor(Math.log(a)/Math.LN2),e);d=g+e,e=a*Math.pow(2,c-g)-Math.pow(2,c)}else d=0,e=a/Math.pow(2,1-e-c);for(a=[];c;c-=1)a.push(e%2?1:0),e=Math.floor(e/2);for(c=f;c;c-=1)a.push(d%2?1:0),d=Math.floor(d/2);for(a.push(b?1:0),a.reverse(),f=a.join(lj),b=[];f.length;)b.push(parseInt(f.substring(0,8),2)),f=f.substring(8);return b}function Si(a,b,c){var d,e,f,g,h,i;if(0==b.l&&0==b.m&&0==b.h)throw new la(yo);if(0==a.l&&0==a.m&&0==a.h)return c&&(nq=Md(0,0,0)),Md(0,0,0);if(524288==b.h&&0==b.m&&0==b.l)return Lg(a,c);if(i=!1,~~b.h>>19!=0&&(b=eg(b),i=!0),g=ci(b),f=!1,e=!1,d=!1,524288==a.h&&0==a.m&&0==a.l){if(e=!0,f=!0,-1!=g)return h=gi(a,g),i&&ug(h),c&&(nq=Md(0,0,0)),h;a=yb((ng(),iq)),d=!0,i=!i}else~~a.h>>19!=0&&(f=!0,a=eg(a),d=!0,i=!i);return-1!=g?Pf(a,g,i,f,c):Fh(a,b)?xi(d?a:Md(a.l,a.m,a.h),b,i,f,e,c):(c&&(nq=f?eg(a):Md(a.l,a.m,a.h)),Md(0,0,0))}function Ti(a,b){var c,d,e,f,g,h,i;for(e=0,h=0;h<b;){if(++e,128==(192&(d=a[h])))throw new oa(Zl);if(0==(128&d))++h;else if(192==(224&d))h+=2;else if(224==(240&d))h+=3;else{if(240!=(248&d))throw new oa(Zl);h+=4}if(h>b)throw new sa(Zl)}for(f=Od(Sr,Qp,-1,e,1),i=0,g=0,h=0;h<b;){for(d=a[h++],0==(128&d)?(g=1,d&=127):192==(224&d)?(g=2,d&=31):224==(240&d)?(g=3,d&=15):240==(248&d)?(g=4,d&=7):248==(252&d)&&(g=5,d&=3);--g>0;){if(128!=(192&(c=a[h++])))throw new oa($l+(h-1)+Nj+nh(c));d=d<<6|63&c}i+=qh(d,f,i)}return String.fromCharCode.apply(null,f)}function Ui(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;return c=8191&a.l,d=~~a.l>>13|(15&a.m)<<9,e=~~a.m>>4&8191,f=~~a.m>>17|(255&a.h)<<5,g=~~(1048320&a.h)>>8,h=8191&b.l,i=~~b.l>>13|(15&b.m)<<9,j=~~b.m>>4&8191,k=~~b.m>>17|(255&b.h)<<5,l=~~(1048320&b.h)>>8,y=c*h,z=d*h,A=e*h,B=f*h,C=g*h,0!=i&&(z+=c*i,A+=d*i,B+=e*i,C+=f*i),0!=j&&(A+=c*j,B+=d*j,C+=e*j),0!=k&&(B+=c*k,C+=d*k),0!=l&&(C+=c*l),n=4194303&y,o=(511&z)<<13,m=n+o,q=~~y>>22,r=~~z>>9,s=(262143&A)<<4,t=(31&B)<<17,p=q+r+s+t,v=~~A>>18,w=~~B>>5,x=(4095&C)<<8,u=v+w+x,p+=~~m>>22,m&=4194303,u+=~~p>>22,p&=4194303,u&=1048575,Md(m,p,u)}function Vi(a,b,c){var d,e;if(null==a)throw new ta(Xm);if(null==b)throw new ta(sl);if(3>=a.length)throw new oa(X(Zm,me(Gr,Up,0,[dg(a.length),dg(0)])));if(c<0||c+2>=b.length)throw new oa(X(tl,me(Gr,Up,0,[dg(b.length),dg(c)])));return d=Wq,61==a[2]?(e=(255&d[a[0]])<<18|(255&d[a[1]])<<12,b[c]=~~(~~e>>>16<<24)>>24,1):61==a[3]?(e=(255&d[a[0]])<<18|(255&d[a[1]])<<12|(255&d[a[2]])<<6,b[c]=~~(~~e>>>16<<24)>>24,b[c+1]=~~(~~e>>>8<<24)>>24,2):(e=(255&d[a[0]])<<18|(255&d[a[1]])<<12|(255&d[a[2]])<<6|255&d[a[3]],b[c]=~~(~~e>>16<<24)>>24,b[c+1]=~~(~~e>>8<<24)>>24,b[c+2]=~~(e<<24)>>24,3)}function Wi(a,b,c){if(c<128)return a[b]=~~((127&c)<<24)>>24,1;if(c<2048)return a[b++]=~~((~~c>>6&31|192)<<24)>>24,a[b]=~~((63&c|128)<<24)>>24,2;if(c<65536)return a[b++]=~~((~~c>>12&15|224)<<24)>>24,a[b++]=~~((~~c>>6&63|128)<<24)>>24,a[b]=~~((63&c|128)<<24)>>24,3;if(c<2097152)return a[b++]=~~((~~c>>18&7|240)<<24)>>24,a[b++]=~~((~~c>>12&63|128)<<24)>>24,a[b++]=~~((~~c>>6&63|128)<<24)>>24,a[b]=~~((63&c|128)<<24)>>24,4;if(c<67108864)return a[b++]=~~((~~c>>24&3|248)<<24)>>24,a[b++]=~~((~~c>>18&63|128)<<24)>>24,a[b++]=~~((~~c>>12&63|128)<<24)>>24,a[b++]=~~((~~c>>6&63|128)<<24)>>24,a[b]=~~((63&c|128)<<24)>>24,5;throw new oa(bl+c)}function Xi(a){var b,c,d,e,f,g,h,i,j,k,l;if(null==a)throw new ua(_o);if(j=a,f=a.length,i=f>0&&45==a.charCodeAt(0),i&&(a=Mc(a,1),--f),0==f)throw new ua(Jl+j+yj);for(;a.length>0&&48==a.charCodeAt(0);)a=Mc(a,1),--f;if(f>(ui(),wq)[10])throw new ua(Jl+j+yj);for(e=0;e<f;++e)if(!((b=a.charCodeAt(e))>=48&&b<58||b>=97&&b<97||b>=65&&b<65))throw new ua(Jl+j+yj);for(l=Bp,g=uq[10],k=Gg(vq[10]),h=eg(xq[10]),c=!0,d=f%g,d>0&&(l=Gg(-vb(a.substr(0,d-0),10)),a=Mc(a,d),f-=d,c=!1);f>=g;){if(d=vb(a.substr(0,g-0),10),a=Mc(a,g),f-=g,c)c=!1;else{if(!Fh(l,h))throw new ua(a);l=Ui(l,k)}l=wg(l,Gg(d))}if(Eh(l,Bp))throw new ua(Jl+j+yj);if(!i&&(l=eg(l),Ha(l,Bp)))throw new ua(Jl+j+yj);return l}function Yi(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;for(p=Od(Fr,Qp,-1,d+1,1),q=Od(Fr,Qp,-1,f+1,1),h=Zh(e[f-1]),0!=h?(zh(q,e,0,h),zh(p,c,0,h)):(Li(c,0,p,0,d),Li(e,0,q,0,f)),i=q[f-1],k=b-1,l=d;k>=0;){if(p[l]==i)j=-1;else if(r=vg(Qh(id(Gg(p[l]),Mp),32),id(Gg(p[l-1]),Mp)),u=oi(r,i),j=Na(u),t=Na(gi(u,32)),0!=j){s=!1,++j;do{if(--j,s)break;n=Ui(id(Gg(j),Mp),id(Gg(q[f-2]),Mp)),v=vg(Qh(Gg(t),32),id(Gg(p[l-2]),Mp)),o=vg(id(Gg(t),Mp),id(Gg(i),Mp)),Zh(Na(Rh(o,32)))<32?s=!0:t=Na(o)}while(Eh(kd(n,xp),kd(v,xp)))}if(0!=j&&0!=_h(p,l-f,q,f,j))for(--j,g=Bp,m=0;m<f;++m)g=vg(g,vg(id(Gg(p[l-f+m]),Mp),id(Gg(q[m]),Mp))),p[l-f+m]=Na(g),g=Rh(g,32);null!=a&&(a[k]=j),--l,--k}return 0!=h?(Jh(q,f,p,0,h),q):(Li(p,0,q,0,f),p)}function Zi(){Zi=a;var b,c;for(Hq=new nf(Cp,0),new nf(Fp,0),Iq=new nf(Bp,0),Bq=Od(ts,Up,20,11,0),Cq=Od(Sr,Qp,-1,100,1),Dq=me(Xr,Qp,-1,[1,5,25,125,625,3125,15625,78125,390625,1953125,9765625,48828125,244140625,1220703125,6103515625,30517578125,152587890625,762939453125,3814697265625,19073486328125,95367431640625,476837158203125,0x878678326eac9]),Eq=Od(Fr,Qp,-1,Dq.length,1),Fq=me(Xr,Qp,-1,[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13,1e14,1e15,1e16]),Gq=Od(Fr,Qp,-1,Fq.length,1),Jq=Od(ts,Up,20,11,0),b=0;b<Jq.length;++b)Bq[b]=new nf(Gg(b),0),Jq[b]=new nf(Bp,b),Cq[b]=48;for(;b<Cq.length;++b)Cq[b]=48;for(c=0;c<Eq.length;++c)Eq[c]=Gh(Dq[c]);for(c=0;c<Gq.length;++c)Gq[c]=Gh(Fq[c]);Nh()}function $i(a,b){var c,d,e,f,g,h,i,j;if(c=0,g=0,f=b.length,j=new B(b.length),0<f&&43==b.charCodeAt(0)&&(++g,++c,g<f&&(43==b.charCodeAt(g)||45==b.charCodeAt(g))))throw new ua(Jl+b+yj);for(;g<f&&46!=b.charCodeAt(g)&&101!=b.charCodeAt(g)&&69!=b.charCodeAt(g);)++g;if(Ie(j,b,c,g),g<f&&46==b.charCodeAt(g)){for(++g,c=g;g<f&&101!=b.charCodeAt(g)&&69!=b.charCodeAt(g);)++g;a.f=g-c,Ie(j,b,c,g)}else a.f=0;if(g<f&&(101==b.charCodeAt(g)||69==b.charCodeAt(g))&&(++g,c=g,g<f&&43==b.charCodeAt(g)&&++g<f&&45!=b.charCodeAt(g)&&++c,h=b.substr(c,f-c),a.f=a.f-ii(h),a.f!=af(a.f)))throw new ua(Sm);if(i=j.c.D(j.b),i.length<16){if(a.i=Yf(i),Ja(a.i))throw new ua(Jl+b+yj);a.b=Gh(a.i)}else Td(a,new ib(i));for(a.e=j.c.B(j.b),e=0;e<j.c.B(j.b)&&(45==(d=Xb(j.c.D(j.b),e))||48==d);++e)--a.e;0==a.e&&(a.e=1)}function _i(a){var b,c,d,e,f,g,h,i;for(b=new A,e=a.length,i=0,h=-1,g=-1,d=0;d<e;d=th(a,d,1))switch(c=a.charCodeAt(d),i){case 0:switch(c){case 36:i=1;continue;default:b.c.z(b.b,String.fromCharCode(c));continue}case 1:switch(c){case 36:b.c.z(b.b,zj),i=0;continue;case 123:h=d+1,g=h,i=2;continue;default:Pd((b.c.z(b.b,zj),b),c),i=0;continue}case 2:switch(c){case 58:case 125:case 44:if(f=Rg(a.substr(g,d-g)),Rd(Rj,f)){b.c.z(b.b,Rj),i=125==c?0:3;continue}if(Rd(dk,f)){b.c.z(b.b,Rj),i=125==c?0:3;continue}if(44==c){g=d+1;continue}if(58==c){h=d+1,i=4;continue}Mb(b,a.substr(h-2,d+1-(h-2))),i=0;continue;default:continue}case 3:125==c&&(i=0);continue;case 4:125==c&&(i=0,Mb(b,a.substr(h,d-h)));continue;default:throw new da}switch(i){case 1:b.c.z(b.b,zj);break;case 4:case 2:Mb(b,Mc(a,h-2))}return b.c.D(b.b)}function aj(a,b){
var c,d,e,f,g,h;Fb(a);try{switch(f=ri(255&Se(b)),f.d){case 13:return void(a.d=(ec(),Xq));case 0:return void(a.d=new ae(b));case 1:return c=Od(as,Qp,-1,uf(b),1),Vd(b,c),void(a.d=new xd(new Cg(c)));case 2:return void(a.d=(fe(),0!=Se(b)?Zq:Yq));case 3:return c=Od(as,Qp,-1,uf(b),1),Vd(b,c),void new yd(c);case 4:return void(a.d=new zd((g=Od(as,Qp,-1,8,1),Vd(b,g),Ki())));case 5:return void(a.d=new qf(Uf(b)));case 6:return void(a.d=new Ad(uf(b)));case 7:return void(a.d=new Sg(b));case 8:return void(a.d=new Bd((h=Od(as,Qp,-1,8,1),Vd(b,h),vg(vg(vg(vg(vg(vg(vg(Qh(Gg(h[0]),56),Qh(Gg(255&h[1]),48)),Qh(Gg(255&h[2]),40)),Qh(Gg(255&h[3]),32)),Qh(Gg(255&h[4]),24)),Gg((255&h[5])<<16)),Gg((255&h[6])<<8)),Gg(255&h[7])))));case 9:return void(a.d=new Tg(b));case 10:return void(a.d=new Nf(b));case 11:return void(a.d=new Cd(Uf(b)));case 12:return void(a.d=Xh(ri(255&Se(b))));default:throw new qa(am+f)}}catch(a){throw a=vd(a),Qb(a,13)?(d=a,e=new qa(d.i),of(e,d.f),e):a}}function bj(a,b){Pi();var c,d,e,f,g,h,i,j,k,l;if(g=Ha(a,Bp),g&&(a=eg(a)),ld(a,Bp))switch(b){case 0:return Sj;case 1:return Uj;case 2:return Vj;case 3:return Wj;case 4:return Xj;case 5:return Yj;case 6:return Zj;default:return j=new A,b<0?j.c.y(j.b,_j):j.c.y(j.b,$j),j.c.y(j.b,-2147483648==b?ck:lj+-b),j.c.D(j.b)}i=Od(Sr,Qp,-1,19,1),c=18,l=a;do{h=l,l=xb(l,Fp),i[--c]=65535&Na(vg(Hp,wg(h,Ui(l,Fp))))}while(md(l,Bp));if(d=wg(wg(wg(Gp,Gg(c)),Gg(b)),Cp),0==b)return g&&(i[--c]=45),Wd(i,c,18-c);if(b>0&&Fh(d,zp)){if(Fh(d,Bp)){for(e=c+Na(d),f=17;f>=e;--f)i[f+1]=i[f];return i[++e]=46,g&&(i[--c]=45),Wd(i,c,18-c+1)}for(f=2;Ha(Gg(f),vg(eg(d),Cp));++f)i[--c]=48;return i[--c]=46,i[--c]=48,g&&(i[--c]=45),Wd(i,c,18-c)}return k=c+1,j=new B,g&&j.c.z(j.b,Oj),18-k>=1?(Pd(j,i[c]),j.c.z(j.b,Qj),j.c.z(j.b,Wd(i,c+1,18-c-1))):j.c.z(j.b,Wd(i,c,18-c)),j.c.z(j.b,wl),Eh(d,Bp)&&j.c.z(j.b,Ij),j.c.y(j.b,lj+li(d)),j.c.D(j.b)}function cj(){cj=a,Vq=me(as,Qp,-1,[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47]),Wq=me(as,Qp,-1,[-9,-9,-9,-9,-9,-9,-9,-9,-9,-5,-5,-9,-9,-5,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-5,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,62,-9,-9,-9,63,52,53,54,55,56,57,58,59,60,61,-9,-9,-9,-1,-9,-9,-9,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-9,-9,-9,-9,-9,-9,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9,-9])}function dj(a,b){Pi();var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,C;if(v=a.f,m=a.e,e=a.b,0==v)switch(b){case 0:return Sj;case 1:return Uj;case 2:return Vj;case 3:return Wj;case 4:return Xj;case 5:return Yj;case 6:return Zj;default:return t=new A,b<0?t.c.y(t.b,_j):t.c.y(t.b,$j),t.c.w(t.b,-b),t.c.D(t.b)}if(r=10*m+1+7,s=Od(Sr,Qp,-1,r+1,1),c=r,1==m)if((g=e[0])<0){C=id(Gg(g),Mp);do{n=C,C=xb(C,Fp),s[--c]=48+Na(wg(n,Ui(C,Fp)))&65535}while(md(C,Bp))}else{C=g;do{n=C,C=~~(C/10),s[--c]=n-10*C+48&65535}while(0!=C)}else{x=Od(Fr,Qp,-1,m,1),z=m,Li(e,0,x,0,m);a:for(;;){for(u=Bp,i=z-1;i>=0;--i)y=vg(Qh(u,32),id(Gg(x[i]),Mp)),p=_g(y),x[i]=Na(p),u=Gg(Na(gi(p,32)));q=Na(u),o=c;do{s[--c]=48+q%10&65535}while(0!=(q=~~(q/10))&&0!=c);for(d=9-o+c,h=0;h<d&&c>0;++h)s[--c]=48;for(k=z-1;0==x[k];--k)if(0==k)break a;z=k+1}for(;48==s[c];)++c}if(l=v<0,f=r-c-b-1,0==b)return l&&(s[--c]=45),Wd(s,c,r-c);if(b>0&&f>=-6){if(f>=0){for(j=c+f,k=r-1;k>=j;--k)s[k+1]=s[k];return s[++j]=46,l&&(s[--c]=45),Wd(s,c,r-c+1)}for(k=2;k<1-f;++k)s[--c]=48;return s[--c]=46,s[--c]=48,l&&(s[--c]=45),Wd(s,c,r-c)}return w=c+1,t=new B,l&&t.c.z(t.b,Oj),r-w>=1?(Pd(t,s[c]),t.c.z(t.b,Qj),t.c.z(t.b,Wd(s,c+1,r-c-1))):t.c.z(t.b,Wd(s,c,r-c)),t.c.z(t.b,wl),f>0&&t.c.z(t.b,Ij),t.c.y(t.b,lj+f),t.c.D(t.b)}function ej(){var a,b=(Ra(),ph(zo));if(ij.dmr.ModelNode=Br(function(){var a,b=this;return Sf(qs,arguments)?a=arguments[0]:0==arguments.length&&(a=new E),b.g=a,a[go]=b,b}),a=ij.dmr.ModelNode.prototype=new Object,a._add=Br(function(){return gb(this.g.Nb())}),a.add=Br(function(a){return gb(this.g.Qb(a))}),a.addBoolean=Br(function(a){return gb(this.g.Xb(a))}),a.addDouble=Br(function(a){return gb(this.g.Ob(a))}),a.addEmptyList=Br(function(){return gb(this.g.Yb())}),a.addEmptyObject=Br(function(){return gb(this.g.Zb())}),a.addExpression=Br(function(a){return gb(this.g.$b(a))}),a.addInt=Br(function(a){return gb(this.g.Pb(a))}),a.addModelNode=Br(function(a){return gb(this.g.Wb(a.g))}),a.addProp=Br(function(a,b){return gb(this.g.Tb(a,b))}),a.addPropBoolean=Br(function(a,b){return gb(this.g.Vb(a,b))}),a.addPropByte=Br(function(a,b){return gb(Nc(this.g,a,b))}),a.addPropDouble=Br(function(a,b){return gb(this.g.Rb(a,b))}),a.addPropInt=Br(function(a,b){return gb(this.g.Sb(a,b))}),a.addPropModelNode=Br(function(a,b){return gb(this.g.Ub(a,b.g))}),a.asBigDecimal=Br(function(){return this.g.hb()}),a.asBigInteger=Br(function(){return this.g.ib()}),a.asBoolean=Br(function(a){return Nd(this.g,qs,8,arguments,!1,!1)[0]}),a.asBytes=Br(function(){return wa(this.g.lb())}),a.asDouble=Br(function(a){return Nd(this.g,qs,1,arguments,!1,!1)[0]}),a.asInt=Br(function(a){return Nd(this.g,qs,0,arguments,!1,!1)[0]}),a.asList=Br(function(){return this.g.qb()}),a.asLong=Br(function(a){return Nd(this.g,qs,7,arguments,!1,!1)[0]}),a.asObject=Br(function(){return gb(this.g.tb())}),a.asProperty=Br(function(){return this.g.ub()}),a.asPropertyList=Br(function(){return this.g.vb()}),a.asString=Br(function(){return this.g.wb()}),a.asType=Br(function(){return this.g.xb()}),a.clear=Br(function(){return gb(this.g._b())}),a.clone=Br(function(){return gb(this.g.ac())}),a.equals=Br(function(a){return Nd(this.g,qs,5,arguments,!1,!1)[0]}),ij.dmr.ModelNode.fromBase64=Br(function(a){return gb(Pg(a))}),a.get=Br(function(a){return Nd(this.g,qs,4,arguments,!1,!1)[0]}),a.getFailureDescription=Br(function(){return this.g.ec()}),a.getTag=Br(function(a){return this.g.fc(a)}),a.getType=Br(function(){return this.g.gc()}),a.has=Br(function(a){return this.g.Eb(a)}),a.hasDefined=Br(function(a){return this.g.hc(a)}),a.hasDefinedKey=Br(function(a){return this.g.ic(a)}),a.hasKey=Br(function(a){return this.g.Fb(a)}),a.hashCode=Br(function(){return this.g.hC()}),a.isDefined=Br(function(){return this.g.jc()}),a.isFailure=Br(function(){return this.g.kc()}),a.keys=Br(function(){return this.g.lc()}),a.protect=Br(function(){this.g.mc()}),a.readExternal=Br(function(a){this.g.nc(Ve(a))}),a.remove=Br(function(a){return gb(this.g.oc(a))}),a.require=Br(function(a){return Nd(this.g,qs,6,arguments,!1,!1)[0]}),a.resolve=Br(function(){return gb(this.g.rc())}),a.set=Br(function(a){return gb(this.g.uc(a))}),a.setBoolean=Br(function(a){return gb(this.g.Dc(a))}),a.setByteArray=Br(function(a){return gb(gc(this.g,a))}),a.setDouble=Br(function(a){return gb(this.g.sc(a))}),a.setEmptyList=Br(function(){return gb(this.g.Ec())}),a.setEmptyObject=Br(function(){return gb(this.g.Fc())}),a.setExpression=Br(function(a,b){return Nd(this.g,qs,9,arguments,!1,!1)[0]}),a.setInt=Br(function(a){return gb(this.g.tc(a))}),a.setModelNode=Br(function(a){return gb(this.g.Bc(a.g))}),a.setProp=Br(function(a,b){return gb(this.g.xc(a,b))}),a.setPropBoolean=Br(function(a,b){return gb(this.g.Ac(a,b))}),a.setPropByteArray=Br(function(a,b){return gb(Oc(this.g,a,b))}),a.setPropDouble=Br(function(a,b){return gb(this.g.vc(a,b))}),a.setPropInt=Br(function(a,b){return gb(this.g.wc(a,b))}),a.setPropModelNode=Br(function(a,b){return gb(this.g.yc(a,b.g))}),a.setPropType=Br(function(a,b){return gb(this.g.zc(a,Ve(b)))}),a.setTag=Br(function(a,b){Nd(this.g,qs,3,arguments,!1,!1)[0]}),a.setType=Br(function(a){return gb(this.g.Cc(Ve(a)))}),a.toBase64String=Br(function(){return this.g.Jc()}),a.toJSONString=Br(function(a){return Nd(this.g,qs,2,arguments,!1,!1)[0]}),a.toString=Br(function(){return this.g.tS()}),a.writeExternal=Br(function(a){this.g.Mb(Ve(a))}),pb(qs,{0:{0:[[function(){return this.ob.apply(this,arguments)},null,void 0]],1:[[function(){return this.pb.apply(this,arguments)},null,void 0,ap]]},1:{0:[[function(){return this.mb.apply(this,arguments)},null,void 0]],1:[[function(){return this.nb.apply(this,arguments)},null,void 0,ap]]},2:{0:[[function(){return this.Kc.apply(this,arguments)},null,void 0]],1:[[function(){return this.Lb.apply(this,arguments)},null,void 0,mo]]},3:{2:[[function(){return this.Ic.apply(this,arguments)},null,void 0,np,Cr]]},4:{1:[[function(){return this.dc.apply(this,arguments)},gb,void 0,np],[function(){return this.cc.apply(this,arguments)},gb,void 0,ap]]},5:{1:[[function(){return this.eQ.apply(this,arguments)},null,void 0,Cr],[function(){return this.bc.apply(this,arguments)},null,void 0,qs]]},6:{1:[[function(){return this.qc.apply(this,arguments)},gb,void 0,np],[function(){return this.pc.apply(this,arguments)},gb,void 0,ap]]},7:{0:[[bb,null,qb]],1:[[Ob,null,qb,ap]]},8:{0:[[function(){return this.jb.apply(this,arguments)},null,void 0]],1:[[function(){return this.kb.apply(this,arguments)},null,void 0,mo]]},9:{1:[[function(){return this.Gc.apply(this,arguments)},gb,void 0,np]],2:[[function(){return this.Hc.apply(this,arguments)},gb,void 0,np,np]]}},!1),_a(qs,ij.dmr.ModelNode),b)for(p in b)void 0===ij.dmr.ModelNode[p]&&(ij.dmr.ModelNode[p]=b[p])}var fj,gj,hj,ij=window,jj=ij.document,kj=ij.__gwtStatsEvent?function(a){ij.__gwtStatsEvent(a)}:null,lj="",mj="\n",nj="\n ",oj=" ",pj="    ",qj=" : ",rj=" => ",sj=" B",tj=" C",uj=" D",vj=" I",wj=" J",xj=" is not supported",yj='"',zj="$",Aj="'",Bj="' exists",Cj="(",Dj="(this Collection)",Ej=")",Fj=") ",Gj=") does not match the runtime user.agent value (",Hj="). Expect more errors.\n",Ij="+",Jj=",",Kj=",\n",Lj=", ",Mj=", Size: ",Nj=", byte=",Oj="-",Pj="-9223372036854775808",Qj=".",Rj="/",Sj="0",Tj="0.",Uj="0.0",Vj="0.00",Wj="0.000",Xj="0.0000",Yj="0.00000",Zj="0.000000",$j="0E",_j="0E+",ak="0x",bk="0x0",ck="2147483648",dk=":",ek=": ",fk="=",gk="?",hk="@",ik="@@",jk="AbstractCollection",kk="AbstractHashMap",lk="AbstractHashMap$EntrySet",mk="AbstractHashMap$EntrySetIterator",nk="AbstractHashMap$MapEntryNull",ok="AbstractHashMap$MapEntryString",pk="AbstractList",qk="AbstractList$IteratorImpl",rk="AbstractMap",sk="AbstractMap$1",tk="AbstractMap$1$1",uk="AbstractMap$2",vk="AbstractMap$2$1",wk="AbstractMapEntry",xk="AbstractSet",yk="Add not supported on this collection",zk="Add not supported on this list",Ak="ArithmeticException",Bk="Array types must match",Ck="ArrayList",Dk="ArrayStoreException",Ek="BIG_DECIMAL",Fk="BIG_INTEGER",Gk="BOOLEAN",Hk="BYTES",Ik="BYTES_VALUE",Jk="BackCompat",Kk="Bad Base64 input character decimal: ",Lk="Base64-encoded string must have at least four characters, but length specified was ",Mk="BigDecimal",Nk="BigDecimal;",Ok="BigDecimalModelValue",Pk="BigInteger",Qk="BigInteger divide by zero",Rk="BigInteger;",Sk="BigIntegerModelValue",Tk="Boolean",Uk="BooleanModelValue",Vk="BytesModelValue",Wk="CSS1Compat",Xk="Can't find exported method for given arguments: ",Yk="Can't overwrite cause",Zk="Cannot decode null source array.",$k="Cannot have length offset: ",_k="Cannot have offset of %d and length of %d with array of length %d",al="Cannot serialize a null array.",bl="Character out of range: ",cl="Charset US-ASCII not supported",dl="Class",el="ClassCastException",fl="Collections$SingletonList",gl="Collections$UnmodifiableCollection",hl="Collections$UnmodifiableCollectionIterator",il="Collections$UnmodifiableList",jl="Collections$UnmodifiableMap",kl="Collections$UnmodifiableMap$UnmodifiableEntrySet",ll="Collections$UnmodifiableMap$UnmodifiableEntrySet$1",ml="Collections$UnmodifiableMap$UnmodifiableEntrySet$UnmodifiableEntry",nl="Collections$UnmodifiableRandomAccessList",ol="Collections$UnmodifiableSet",pl="DOUBLE",ql="DataInput",rl="DataOutput",sl="Destination array was null.",tl="Destination array with length %d cannot have offset of %d and still store three bytes.",ul="Double",vl="DoubleModelValue",wl="E",xl="EOF",yl="ERROR: Possible problem with your *.gwt.xml module file.\nThe compile time user.agent value (",zl="EXPRESSION",Al="EXPRESSION_VALUE",Bl="Enum",Cl="Exception",Dl="Export$1",El="ExportAllExporterImpl",Fl="Exportable",Gl="ExporterBaseActual",Hl="ExporterBaseImpl",Il="ExpressionValue",Jl='For input string: "',Kl="HashMap",Ll="HashSet",Ml="INT",Nl="IOException",Ol="ISO-8859-1",Pl="ISO-LATIN-1",Ql="IllegalArgumentException",Rl="IllegalStateException",Sl="Index: ",Tl="IndexOutOfBoundsException",Ul="Infinite or NaN",Vl="Input string was null.",Wl="IntModelValue",Xl="Integer",Yl="Integer;",Zl="Invalid UTF8 sequence",$l="Invalid UTF8 sequence at ",_l="Invalid type character '",am="Invalid type read: ",bm="JavaScriptException",cm="JavaScriptObject$",dm="LIST",em="LONG",fm="LinkedHashMap",gm="LinkedHashMap$ChainEntry",hm="LinkedHashMap$EntrySet",im="LinkedHashMap$EntrySet$EntryIterator",jm="ListModelValue",km="LongLibBase$LongEmul",lm="LongLibBase$LongEmul;",mm="LongModelValue",nm="MapEntryImpl",om="ModelNode",pm="ModelNodeExporterImpl",qm="ModelType",rm="ModelType;",sm="ModelValue",tm="ModelValue$1",um="Must be array types",vm="Must call next() before remove().",wm="Negative bit address",xm="Negative exponent",ym="No child '",zm="No child exists at index [",Am="No current entry",Bm="No failure-description provided",Cm="NoSuchElementException",Dm="NullPointerException",Em="Number",Fm="NumberFormatException",Gm="OBJECT",Hm="Object",Im="Object;",Jm="ObjectModelValue",Km="PROPERTY",Lm="PROPERTY_VALUE",Mm="Property",Nm="PropertyModelValue",Om="Put not supported on this map",Pm="Remove not supported on this list",Qm="RuntimeException",Rm="STRING",Sm="Scale out of range.",Tm="Scheduler",Um="SchedulerImpl",Vm="SeedUtil",Wm="Self-causation not permitted",Xm="Source array was null.",Ym="Source array with length %d cannot have offset of %d and process %d bytes.",Zm="Source array with length %d cannot have offset of %d and still process four bytes.",$m="StackTraceCreator$Collector",_m="StackTraceCreator$CollectorChrome",an="StackTraceCreator$CollectorChromeNoSourceMap",bn="StackTraceCreator$CollectorMoz",cn="StackTraceCreator$CollectorOpera",dn="StackTraceElement",en="StackTraceElement;",fn="String",gn="String index out of range: ",hn="String;",jn="StringBuffer",kn="StringBufferImpl",ln="StringBufferImplAppend",mn="StringBufferImplArray",nn="StringBufferImplArrayBase",on="StringBuilder",pn="StringIndexOutOfBoundsException",qn="StringModelValue",rn="TYPE",sn="TYPE_MODEL_VALUE",tn="Throwable",un="TypeModelValue",vn="UNDEFINED",wn="US-ASCII",xn="UTF-8",yn="Uncaught DMR exception: ",zn="Unknown",An="Unknown Source",Bn="UnsupportedEncodingException",Cn="UnsupportedOperationException",Dn="UserAgentAsserter_UserAgentPropertyImplGecko1_8",En="UserAgentAsserter_UserAgentPropertyImplIe6",Fn="UserAgentAsserter_UserAgentPropertyImplIe8",Gn="UserAgentAsserter_UserAgentPropertyImplIe9",Hn="UserAgentAsserter_UserAgentPropertyImplOpera",In="UserAgentAsserter_UserAgentPropertyImplSafari",Jn="Zero length BigInteger",Kn="[",Ln="[B",Mn="[C",Nn="[D",On="[I",Pn="[J",Qn="[Lcom.google.gwt.lang.",Rn="[Ljava.lang.",Sn="[Ljava.math.",Tn="[Lorg.jboss.dmr.client.",Un="[object Array]",Vn="\\",Wn='\\"',Xn="\\.",Yn="\\/",Zn="\\\\",$n="\\b",_n="\\f",ao="\\n",bo="\\r",co="\\t",eo="\\u",fo="]",go="__gwtex_wrap",ho="anonymous",io="array",jo="at ",ko="big decimal ",lo="big integer ",mo="boolean",no="byte",oo="bytes {",po="char",qo="class ",ro="client",so="com.google.gwt.core.client.",to="com.google.gwt.core.client.impl.",uo="com.google.gwt.lang.",vo="com.google.gwt.user.client.DocumentModeAsserter",wo="com.google.gwt.useragent.client.",xo="com.google.gwt.useragent.client.UserAgentAsserter",yo="divide by zero",zo="dmr.ModelNode",Ao="double",Bo="expression ",Co="expressionString is null",Do="failure-description",Eo="false",Fo="function",Go="function ",Ho="g",Io="gecko",Jo="gecko1_8",Ko="ie6",Lo="ie8",Mo="ie9",No="initial capacity was negative or load factor was non-positive",Oo="int",Po="interface ",Qo="java.io.",Ro="java.lang.",So="java.math.",To="java.util.",Uo="long",Vo="message",Wo="moduleStartup",Xo="msie",Yo="name",Zo="name is null",$o="newValue is null",_o="null",ap="number",bp="object",cp="onModuleLoadStart",dp="opera",ep="org.jboss.dmr.client.",fp="org.jboss.dmr.client.Bootstrap",gp="org.jboss.dmr.client.Export",hp="org.timepedia.exporter.client.",ip="outcome",jp="power of ten too big",kp="property is null",lp="safari",mp="startup",np="string",op="success",pp="toString",qp="true",rp="undefined",sp="unknown",tp="value is null",up="webkit",vp="{",wp="}",xp={l:0,m:0,h:524288},yp={l:0,m:4193280,h:1048575},zp={l:4194298,m:4194303,h:1048575},Ap={l:4194303,m:4194303,h:1048575},Bp={l:0,m:0,h:0},Cp={l:1,m:0,h:0},Dp={l:2,m:0,h:0},Ep={l:5,m:0,h:0},Fp={l:10,m:0,h:0},Gp={l:18,m:0,h:0},Hp={l:48,m:0,h:0},Ip={l:255,m:0,h:0},Jp={l:877824,m:119,h:0},Kp={l:1755648,m:238,h:0},Lp={l:4194303,m:511,h:0},Mp={l:4194303,m:1023,h:0},Np={l:4194303,m:4194303,h:524287},Op={},Pp={8:1},Qp={5:1},Rp={5:1,13:1,19:1},Sp={5:1,19:1},Tp={5:1,14:1,19:1},Up={5:1,17:1},Vp={},Wp={3:1},Xp={25:1},Yp={5:1,24:1},Zp={23:1},$p={24:1},_p={27:1};Sh(1,-1,Vp),hj.eQ=function(a){return this===a},hj.gC=function(){return this.cZ},hj.hC=function(){return Sb(this)},hj.tS=function(){return this.cZ.f+hk+nh(this.hC())},hj.toString=function(){return this.tS()},hj.tM=a;var aq=null;Sh(8,1,Sp),hj.n=function(){return this.i},hj.tS=function(){return Zd(this)},hj.f=null,hj.i=null,Sh(7,8,Sp),Sh(6,7,Sp,ia),Sh(5,6,Sp,be),hj.n=function(){return null==this.d&&(this.e=he(this.c),this.b=this.b+ek+hc(this.c),this.d=Cj+this.e+Fj+Wb(this.c)+this.b),this.d},hj.b=lj,hj.c=null,hj.d=null,hj.e=null,Sh(14,1,{});var bq=0,cq=0,dq=0,eq=-1;Sh(16,14,{},b),hj.b=null,hj.c=null;var fq;Sh(19,1,{},d),hj.o=function(){for(var a={},b=[],c=arguments.callee.caller.caller;c;){var d=this.q(c.toString());b.push(d);var e=dk+d,f=a[e];if(f){var g,h;for(g=0,h=f.length;g<h;g++)if(f[g]===c)return b}(f||(a[e]=[])).push(c),c=c.caller}return b},hj.p=function(a){var b,c,d,e;for(d=this.s(hd(a.c)?re(a.c):null),e=Od(Lr,Up,18,d.length,0),b=0,c=e.length;b<c;++b)e[b]=new Ed(d[b],null,-1);Xf(e)},hj.q=function(a){return uh(a)},hj.r=function(a){var b,c,d,e;for(d=ag().o(),e=Od(Lr,Up,18,d.length,0),b=0,c=e.length;b<c;++b)e[b]=new Ed(d[b],null,-1);Xf(e)},hj.s=function(a){return[]},Sh(21,19,{},e),hj.o=function(){return qd(this.s(Ac()),this.u())},hj.t=function(a){return a&&a.stack?a.stack.split(mj):[]},hj.s=function(a){return sf(this,a)},hj.u=function(){return 2},Sh(20,21,{}),hj.o=function(){var a;return a=qd(Te(this,Ac()),3),0==a.length&&(a=qd((new d).o(),1)),a},hj.p=function(a){var b;b=Te(this,hd(a.c)?re(a.c):null),ni(this,b)},hj.q=function(a){var b,c,d,e;return 0==a.length?ho:(e=Rg(a),0==e.indexOf(jo)&&(e=Mc(e,3)),c=e.indexOf(Kn),-1!=c&&(e=Rg(e.substr(0,c-0))+Rg(Mc(e,e.indexOf(fo,c)+1))),c=e.indexOf(Cj),-1==c?(c=e.indexOf(hk),-1==c?(d=e,e=lj):(d=Rg(Mc(e,c+1)),e=Rg(e.substr(0,c-0)))):(b=e.indexOf(Ej,c),d=e.substr(c+1,b-(c+1)),e=Rg(e.substr(0,c-0))),c=rb(e,Ih(46)),-1!=c&&(e=Mc(e,c+1)),(e.length>0?e:ho)+ik+d)},hj.r=function(a){var b;b=ag().o(),ni(this,b)},hj.s=function(a){return Te(this,a)},hj.v=function(a){return a},hj.u=function(){return 3},Sh(22,20,{},x),hj.v=function(a){return-1},Sh(23,21,{},g),hj.q=function(a){return 0==a.length?ho:a},hj.t=function(a){var b,c,d,e,f;for(f=a&&a.message?a.message.split(mj):[],b=0,c=0,e=f.length;c<e;++b,c+=2)d=f[c].lastIndexOf(Go),f[b]=-1==d?lj:Rg(Mc(f[c],d+9));return f.length=b,f},hj.u=function(){return 3},Sh(24,1,{}),Sh(25,24,{},h),hj.w=function(a,b){this.b+=b},hj.x=function(a,b){this.b+=b},hj.y=function(a,b){this.b+=b},hj.z=function(a,b){this.b+=b},hj.A=function(){return null},hj.B=function(a){return this.b.length},hj.C=function(a,b,c,d){this.b=Zb(this.b,0,b)+d+Mc(this.b,c)},hj.D=function(a){return this.b},hj.b=lj,Sh(27,24,{}),hj.w=function(a,b){a[a.explicitLength++]=b},hj.x=function(a,b){sc(a,lj+b)},hj.y=function(a,b){a[a.explicitLength++]=null==b?_o:b},hj.z=function(a,b){sc(a,b)},hj.A=function(){var a=[];return a.explicitLength=0,a},hj.B=function(a){return Sc(this,a).length},hj.C=function(a,b,c,d){var e;e=qe(a),sc(a,e.substr(0,b-0)),a[a.explicitLength++]=null==d?_o:d,sc(a,Mc(e,c))},hj.D=function(a){return Sc(this,a)},Sh(26,27,{},j),Sh(30,1,{},l),hj.qI=0;var gq,hq,iq,jq,kq,lq,mq=-1,nq=null,oq=null;Sh(40,1,{2:1},n),Sh(47,1,Wp,o),hj.E=function(){return Jo},hj.F=function(){var a=navigator.userAgent.toLowerCase(),b=function(a){return 1e3*parseInt(a[1])+parseInt(a[2])};return function(){return-1!=a.indexOf(dp)}()?dp:function(){return-1!=a.indexOf(up)}()?lp:function(){return-1!=a.indexOf(Xo)&&jj.documentMode>=9}()?Mo:function(){return-1!=a.indexOf(Xo)&&jj.documentMode>=8}()?Lo:function(){var c=/msie ([0-9]+)\.([0-9]+)/.exec(a);if(c&&3==c.length)return b(c)>=6e3}()?Ko:function(){return-1!=a.indexOf(Io)}()?Jo:sp},hj.G=function(){return!0},Sh(48,1,Wp,q),hj.E=function(){return Ko},hj.F=function(){var a=navigator.userAgent.toLowerCase(),b=function(a){return 1e3*parseInt(a[1])+parseInt(a[2])};return function(){return-1!=a.indexOf(dp)}()?dp:function(){return-1!=a.indexOf(up)}()?lp:function(){return-1!=a.indexOf(Xo)&&jj.documentMode>=9}()?Mo:function(){return-1!=a.indexOf(Xo)&&jj.documentMode>=8}()?Lo:function(){var c=/msie ([0-9]+)\.([0-9]+)/.exec(a);if(c&&3==c.length)return b(c)>=6e3}()?Ko:function(){return-1!=a.indexOf(Io)}()?Jo:sp},hj.G=function(){return!0},Sh(49,1,Wp,r),hj.E=function(){return Lo},hj.F=function(){var a=navigator.userAgent.toLowerCase(),b=function(a){return 1e3*parseInt(a[1])+parseInt(a[2])};return function(){return-1!=a.indexOf(dp)}()?dp:function(){return-1!=a.indexOf(up)}()?lp:function(){return-1!=a.indexOf(Xo)&&jj.documentMode>=9}()?Mo:function(){return-1!=a.indexOf(Xo)&&jj.documentMode>=8}()?Lo:function(){var c=/msie ([0-9]+)\.([0-9]+)/.exec(a);if(c&&3==c.length)return b(c)>=6e3}()?Ko:function(){return-1!=a.indexOf(Io)}()?Jo:sp},hj.G=function(){return!0},Sh(50,1,Wp,s),hj.E=function(){return Mo},hj.F=function(){var a=navigator.userAgent.toLowerCase(),b=function(a){return 1e3*parseInt(a[1])+parseInt(a[2])};return function(){return-1!=a.indexOf(dp)}()?dp:function(){return-1!=a.indexOf(up)}()?lp:function(){return-1!=a.indexOf(Xo)&&jj.documentMode>=9}()?Mo:function(){return-1!=a.indexOf(Xo)&&jj.documentMode>=8}()?Lo:function(){var c=/msie ([0-9]+)\.([0-9]+)/.exec(a);if(c&&3==c.length)return b(c)>=6e3}()?Ko:function(){return-1!=a.indexOf(Io)}()?Jo:sp},hj.G=function(){return!0},Sh(51,1,Wp,t),hj.E=function(){return dp},hj.F=function(){var a=navigator.userAgent.toLowerCase(),b=function(a){return 1e3*parseInt(a[1])+parseInt(a[2])};return function(){return-1!=a.indexOf(dp)}()?dp:function(){return-1!=a.indexOf(up)}()?lp:function(){return-1!=a.indexOf(Xo)&&jj.documentMode>=9}()?Mo:function(){return-1!=a.indexOf(Xo)&&jj.documentMode>=8}()?Lo:function(){var c=/msie ([0-9]+)\.([0-9]+)/.exec(a);if(c&&3==c.length)return b(c)>=6e3}()?Ko:function(){return-1!=a.indexOf(Io)}()?Jo:sp},hj.G=function(){return!0},Sh(52,1,Wp,u),hj.E=function(){return lp},hj.F=function(){var a=navigator.userAgent.toLowerCase(),b=function(a){return 1e3*parseInt(a[1])+parseInt(a[2])};return function(){return-1!=a.indexOf(dp)}()?dp:function(){return-1!=a.indexOf(up)}()?lp:function(){return-1!=a.indexOf(Xo)&&jj.documentMode>=9}()?Mo:function(){return-1!=a.indexOf(Xo)&&jj.documentMode>=8}()?Lo:function(){var c=/msie ([0-9]+)\.([0-9]+)/.exec(a);if(c&&3==c.length)return b(c)>=6e3}()?Ko:function(){return-1!=a.indexOf(Io)}()?Jo:sp},hj.G=function(){return!0},Sh(53,7,{4:1,5:1,19:1},ja),Sh(54,53,{4:1,5:1,6:1,19:1},ka),Sh(55,6,Sp,la),Sh(56,6,Sp,aa,ma),Sh(57,1,{5:1,7:1,10:1},F),hj.eQ=function(a){return Qb(a,7)&&Qd(a,7).b==this.b},hj.hC=function(){return this.b?1231:1237},hj.tS=function(){return this.b?qp:Eo},hj.b=!1;var pq,qq;Sh(59,1,{9:1},v),hj.tS=function(){return(0!=(2&this.c)?Po:0!=(1&this.c)?lj:qo)+this.f},hj.b=null,hj.c=0,hj.d=0,hj.e=null,hj.f=null,Sh(60,6,Sp,ba),Sh(62,1,{5:1,16:1});var rq=null;Sh(61,62,{5:1,10:1,11:1,16:1},I),hj.eQ=function(a){return Qb(a,11)&&Qd(a,11).b==this.b},hj.hC=function(){return af(this.b)},hj.tS=function(){return lj+this.b},hj.b=0,Sh(63,1,{5:1,10:1,12:1}),hj.eQ=function(a){return this===a},hj.hC=function(){return Sb(this)},hj.tS=function(){return this.c},hj.c=null,hj.d=0,Sh(64,6,Rp,ca,oa,pa),Sh(65,6,Sp,da,qa,ra),Sh(66,6,Tp,ea,sa),Sh(67,62,{5:1,10:1,15:1,16:1},J),hj.eQ=function(a){return Qb(a,15)&&Qd(a,15).b==this.b},hj.hC=function(){return this.b},hj.tS=function(){return lj+this.b},hj.b=0;var sq;Sh(71,6,Sp,fa,ta);var tq,uq,vq,wq,xq;Sh(74,64,Rp,ua),Sh(75,1,{5:1,18:1},Ed),hj.tS=function(){return this.b+Qj+this.e+Cj+(null!=this.c?this.c:An)+(this.d>=0?dk+this.d:lj)+Ej},hj.b=null,hj.c=null,hj.d=0,hj.e=null,hj=String.prototype,hj.cM={1:1,5:1,8:1,10:1},hj.eQ=function(a){return Rd(this,a)},hj.hC=function(){return fg(this)},hj.tS=hj.toString;var yq,zq,Aq=0;Sh(77,1,Pp,Bc),hj.tS=function(){return this.c.D(this.b)},Sh(78,1,Pp,A,B),hj.tS=function(){return this.c.D(this.b)},Sh(79,66,Tp,Za),Sh(81,6,Sp,ga,za),Sh(82,62,{5:1,10:1,16:1,20:1},$f,ac,Jb,nf,ya,hb),hj.eQ=function(a){return Mg(this,a)},hj.hC=function(){return sh(this)},hj.tS=function(){return Gi(this)},hj.b=0,hj.c=0,hj.d=null,hj.e=0,hj.f=0,hj.i=0,hj.j=null;var Bq,Cq,Dq,Eq,Fq,Gq,Hq,Iq,Jq,Kq=null;Sh(83,62,{5:1,10:1,16:1,21:1},Wg,ce,ed,Vg,Dg,ib,Cg),hj.eQ=function(a){return kg(this,a)},hj.hC=function(){return hg(this)},hj.tS=function(){return dj(this,0)},hj.b=null,hj.c=-2,hj.d=0,hj.e=0,hj.f=0;var Lq,Mq,Nq,Oq,Pq,Qq,Rq,Sq,Tq,Uq=null;Sh(89,1,{}),hj.I=function(a){throw new za(yk)},hj.J=function(a){return!!If(this.H(),a)},hj.K=function(){return 0==this.L()},hj.M=function(){return this.N(Od(Gr,Up,0,this.L(),0))},hj.N=function(a){var b,c,d;for(d=this.L(),a.length<d&&(a=le(a,d)),c=this.H(),b=0;b<d;++b)Lh(a,b,c.$());return a.length>d&&Lh(a,d,null),a},hj.tS=function(){return rh(this)},Sh(91,1,$p),hj.O=function(a){return!!bh(this,a,!1)},hj.P=function(a){var b,c,d;for(c=this.Q().H();c.Z();)if(b=Qd(c.$(),25),d=b.bb(),null==a?null==d:Kd(a,d))return!0;return!1},hj.eQ=function(a){var b,c,d,e,f;if(a===this)return!0;if(!Qb(a,24))return!1;if(e=Qd(a,24),this.L()!=e.L())return!1;for(c=e.Q().H();c.Z();){if(b=Qd(c.$(),25),d=b.ab(),f=b.bb(),!this.O(d))return!1;if(!Ld(f,this.R(d)))return!1}return!0},hj.R=function(a){var b;return b=bh(this,a,!1),b?b.bb():null},hj.hC=function(){var a,b,c;for(c=0,b=this.Q().H();b.Z();)a=Qd(b.$(),25),c+=a.hC(),c=~~c;return c},hj.K=function(){return 0==this.L()},hj.S=function(){return Qc(this)},hj.T=function(a,b){throw new za(Om)},hj.U=function(a){var b;return b=bh(this,a,!0),b?b.bb():null},hj.L=function(){return this.Q().L()},hj.tS=function(){var a,b,c,d;for(d=vp,a=!1,c=this.Q().H();c.Z();)b=Qd(c.$(),25),a?d+=Lj:a=!0,d+=lj+b.ab(),d+=fk,d+=lj+b.bb();return d+wp},hj.V=function(){var a;return a=this.Q(),new Wa(this,a)},Sh(90,91,$p),hj.O=function(a){return null==a?this.i:Qb(a,1)?dk+Qd(a,1)in this.k:Ig(this,a,this.Y(a))},hj.P=function(a){return!(!this.i||!this.W(this.f,a))||(!!jg(this,a)||!!Ah(this,a))},hj.Q=function(){return new K(this)},hj.X=function(a,b){return this.W(a,b)},hj.R=function(a){return null==a?this.f:Qb(a,1)?fb(this,Qd(a,1)):Jg(this,a,this.Y(a))},hj.T=function(a,b){return null==a?oe(this,b):Qb(a,1)?Ye(this,Qd(a,1),b):Mh(this,a,b,this.Y(a))},hj.U=function(a){return null==a?pe(this):Qb(a,1)?Ze(this,Qd(a,1)):Bh(this,a,this.Y(a))},hj.L=function(){return this.j},hj.e=null,hj.f=null,hj.i=!1,hj.j=0,hj.k=null,Sh(93,89,_p),hj.eQ=function(a){var b,c,d;if(a===this)return!0;if(!Qb(a,27))return!1;if(c=Qd(a,27),c.L()!=this.L())return!1;for(b=c.H();b.Z();)if(d=b.$(),!this.J(d))return!1;return!0},hj.hC=function(){var a,b,c;for(a=0,b=this.H();b.Z();)null!=(c=b.$())&&(a+=nd(c),a=~~a);return a},Sh(92,93,_p,K),hj.J=function(a){var b,c,d;return!(!Qb(a,25)||(b=Qd(a,25),c=b.ab(),!this.b.O(c)))&&(d=this.b.R(c),this.b.W(b.bb(),d))},hj.H=function(){return new Mf(this.b)},hj.L=function(){return this.b.L()},hj.b=null,Sh(94,1,{},Mf),hj.Z=function(){return cb(this.b)},hj.$=function(){return this.c=Qd(Ae(this.b),25)},hj._=function(){if(!this.c)throw new qa(vm);je(this.b),this.d.U(this.c.ab()),this.c=null},hj.b=null,hj.c=null,hj.d=null,Sh(96,1,Xp),hj.eQ=function(a){var b;return!!(Qb(a,25)&&(b=Qd(a,25),Ld(this.ab(),b.ab())&&Ld(this.bb(),b.bb())))},hj.hC=function(){var a,b;return a=0,b=0,null!=this.ab()&&(a=nd(this.ab())),null!=this.bb()&&(b=nd(this.bb())),a^b},hj.tS=function(){return this.ab()+fk+this.bb()},Sh(95,96,Xp,L),hj.ab=function(){return null},hj.bb=function(){return this.b.f},hj.cb=function(a){return oe(this.b,a)},hj.b=null,Sh(97,96,Xp,Ua),hj.ab=function(){return this.b},hj.bb=function(){return fb(this.c,this.b)},hj.cb=function(a){return Ye(this.c,this.b,a)},hj.b=null,hj.c=null,Sh(98,89,Zp),hj.db=function(a,b){throw new za(zk)},hj.I=function(a){return this.db(this.L(),a),!0},hj.eQ=function(a){var b,c,d,e,f;if(a===this)return!0;if(!Qb(a,23))return!1;if(f=Qd(a,23),this.L()!=f.L())return!1;for(d=new O(this),e=f.H();d.b<d.d.L();)if(b=Ae(d),c=e.$(),!(null==b?null==c:Kd(b,c)))return!1;return!0},hj.hC=function(){var a,b,c;for(b=1,a=new O(this);a.b<a.d.L();)c=Ae(a),b=31*b+(null==c?0:nd(c)),b=~~b;return b},hj.H=function(){return new O(this)},hj.fb=function(a){throw new za(Pm)},Sh(99,1,{},O),hj.Z=function(){return cb(this)},hj.$=function(){return Ae(this)},hj._=function(){je(this)},hj.b=0,hj.c=-1,hj.d=null,Sh(100,93,_p,Va),hj.J=function(a){return this.b.O(a)},hj.H=function(){return Rc(this)},hj.L=function(){return this.c.L()},hj.b=null,hj.c=null,Sh(101,1,{},M),hj.Z=function(){return this.b.Z()},hj.$=function(){var a;return a=Qd(this.b.$(),25),a.ab()},hj._=function(){this.b._()},hj.b=null,Sh(102,89,{},Wa),hj.J=function(a){return this.b.P(a)},hj.H=function(){var a;return a=this.c.H(),new N(a)},hj.L=function(){return this.c.L()},hj.b=null,hj.c=null,Sh(103,1,{},N),hj.Z=function(){return this.b.Z()},hj.$=function(){return Qd(this.b.$(),25).bb()},hj._=function(){this.b._()},hj.b=null,Sh(104,98,{5:1,23:1,26:1},C,jb,ee),hj.db=function(a,b){(a<0||a>this.c)&&pc(a,this.c),nb(this.b,a,0,b),++this.c},hj.I=function(a){return xc(this,a)},hj.J=function(a){return-1!=Le(this,a,0)},hj.eb=function(a){return Kb(a,this.c),this.b[a]},hj.K=function(){return 0==this.c},hj.fb=function(a){var b;return Kb(a,this.c),b=this.b[a],mb(this.b,a,1),--this.c,b},hj.L=function(){return this.c},hj.M=function(){return Je(this.b,this.c)},hj.N=function(a){var b;for(a.length<this.c&&(a=le(a,this.c)),b=0;b<this.c;++b)Lh(a,b,this.b[b]);return a.length>this.c&&Lh(a,this.c,null),a},hj.c=0,Sh(107,98,{5:1,23:1},G),hj.J=function(a){return Ld(this.b,a)},hj.eb=function(a){if(0==a)return this.b;throw new ea},hj.L=function(){return 1},hj.b=null,Sh(108,1,{},Q),hj.I=function(a){throw new ga},hj.H=function(){return new H(this.c.H())},hj.L=function(){return this.c.L()},hj.M=function(){return this.c.M()},hj.tS=function(){return this.c.tS()},hj.c=null,Sh(109,1,{},H),hj.Z=function(){return this.b.Z()},hj.$=function(){return this.b.$()},hj._=function(){throw new ga},hj.b=null,Sh(110,108,Zp,Ta),hj.eQ=function(a){return this.b.eQ(a)},hj.eb=function(a){return this.b.eb(a)},hj.hC=function(){return this.b.hC()},hj.K=function(){return this.b.K()},hj.b=null,Sh(111,1,$p,P),hj.O=function(a){return this.d.O(a)},hj.Q=function(){return!this.b&&(this.b=new S(this.d.Q())),this.b},hj.eQ=function(a){return this.d.eQ(a)},hj.R=function(a){return this.d.R(a)},hj.hC=function(){return this.d.hC()},hj.K=function(){return this.d.K()},hj.S=function(){return!this.c&&(this.c=new R(this.d.S())),this.c},hj.T=function(a,b){throw new ga},hj.U=function(a){throw new ga},hj.L=function(){return this.d.L()},hj.tS=function(){return this.d.tS()},hj.V=function(){return!this.e&&(this.e=new Q(this.d.V())),this.e},hj.b=null,hj.c=null,hj.d=null,hj.e=null,Sh(113,108,_p,R),
hj.eQ=function(a){return this.c.eQ(a)},hj.hC=function(){return this.c.hC()},Sh(112,113,_p,S),hj.H=function(){var a;return a=this.c.H(),new T(a)},hj.M=function(){var a;return a=this.c.M(),we(a,a.length),a},Sh(114,1,{},T),hj.Z=function(){return this.b.Z()},hj.$=function(){return new U(Qd(this.b.$(),25))},hj._=function(){throw new ga},hj.b=null,Sh(115,1,Xp,U),hj.eQ=function(a){return this.b.eQ(a)},hj.ab=function(){return this.b.ab()},hj.bb=function(){return this.b.bb()},hj.hC=function(){return this.b.hC()},hj.cb=function(a){throw new ga},hj.tS=function(){return this.b.tS()},hj.b=null,Sh(116,110,{23:1,26:1},Aa),Sh(117,90,Yp,D,Ba),hj.W=function(a,b){return tb(a)===tb(b)||null!=a&&Kd(a,b)},hj.Y=function(a){return~~nd(a)},Sh(118,93,{5:1,27:1},Pa),hj.I=function(a){return cd(this,a)},hj.J=function(a){return this.b.O(a)},hj.K=function(){return 0==this.b.L()},hj.H=function(){return Rc(Qc(this.b))},hj.L=function(){return this.b.L()},hj.tS=function(){return rh(Qc(this.b))},hj.b=null,Sh(119,117,Yp,_f),hj.O=function(a){return this.d.O(a)},hj.P=function(a){var b;for(b=this.c.b;b!=this.c;){if(Ld(b.f,a))return!0;b=b.b}return!1},hj.Q=function(){return new V(this)},hj.R=function(a){return Xe(this,a)},hj.T=function(a,b){return Ng(this,a,b)},hj.U=function(a){var b;return b=Qd(this.d.U(a),22),b?(bd(b),b.f):null},hj.L=function(){return this.d.L()},hj.b=!1,Sh(121,96,Xp,Xa),hj.ab=function(){return this.e},hj.bb=function(){return this.f},hj.cb=function(a){return yc(this,a)},hj.e=null,hj.f=null,Sh(120,121,{22:1,25:1},_b,de),hj.b=null,hj.c=null;hj.d=null,Sh(122,93,_p,V),hj.J=function(a){var b,c,d;return!!Qb(a,25)&&(b=Qd(a,25),c=b.ab(),!!Ma(this.b,c)&&(d=Xe(this.b,c),Ld(b.bb(),d)))},hj.H=function(){return new bc(this)},hj.L=function(){return this.b.d.L()},hj.b=null,Sh(123,1,{},bc),hj.Z=function(){return this.c!=this.d.b.c},hj.$=function(){return Me(this)},hj._=function(){if(!this.b)throw new qa(Am);bd(this.b),this.d.b.d.U(this.b.e),this.b=null},hj.b=null,hj.c=null,hj.d=null,Sh(124,6,Sp,ha,Ca);var Vq,Wq;Sh(128,1,{}),hj.gb=function(){throw new ca},hj.hb=function(){throw new ca},hj.ib=function(){throw new ca},hj.jb=function(){throw new ca},hj.kb=function(a){throw new ca},hj.lb=function(){throw new ca},hj.mb=function(){throw new ca},hj.nb=function(a){throw new ca},hj.ob=function(){throw new ca},hj.pb=function(a){throw new ca},hj.qb=function(){throw new ca},hj.rb=function(){throw new ca},hj.sb=function(a){throw new ca},hj.tb=function(){throw new ca},hj.ub=function(){return Y()},hj.vb=function(){throw new ca},hj.xb=function(){throw new ca},hj.yb=function(){return this},hj.zb=function(a,b,c){Mb(a,this.wb())},hj.Ab=function(a,b,c){Mb(a,this.wb())},hj.Bb=function(a){return Z()},hj.Cb=function(a){return $()},hj.Db=function(){throw new ca},hj.Eb=function(a){return!1},hj.Fb=function(a){return!1},hj.Gb=function(){return this},hj.Hb=function(a){throw new ca},hj.Ib=function(a){return Db(a)},hj.Jb=function(a){return Eb(a)},hj.Kb=function(){return this.yb()},hj.Lb=function(a){var b;return b=new A,this.Ab(b,0,!a),b.c.D(b.b)},hj.tS=function(){return Xd(this)},hj.Mb=function(a){},hj.c=null;var Xq;Sh(127,128,{28:1},ae),hj.hb=function(){return this.b},hj.ib=function(){return dh(this.b)},hj.jb=function(){return!Mg(this.b,(Zi(),Iq))},hj.kb=function(a){return!Mg(this.b,(Zi(),Iq))},hj.mb=function(){return mh(Gi(this.b))},hj.nb=function(a){return mh(Gi(this.b))},hj.ob=function(){return Uh(this.b)},hj.pb=function(a){return Uh(this.b)},hj.rb=function(){return Vh(this.b)},hj.sb=function(a){return Vh(this.b)},hj.wb=function(){return Gi(this.b)},hj.eQ=function(a){return Qb(a,28)&&Ec(this,Qd(a,28))},hj.zb=function(a,b,c){Lb((a.c.y(a.b,ko),a),this.b)},hj.hC=function(){return sh(this.b)},hj.Mb=function(a){var b;b=this.b,Ai(a,Gi(b))},hj.b=null,Sh(129,128,{29:1},xd),hj.hb=function(){return new hb(this.b)},hj.ib=function(){return this.b},hj.jb=function(){return!kg(this.b,(fi(),Pq))},hj.kb=function(a){return!kg(this.b,(fi(),Pq))},hj.mb=function(){return mh(dj(this.b,0))},hj.nb=function(a){return mh(dj(this.b,0))},hj.ob=function(){return La(this.b)},hj.pb=function(a){return La(this.b)},hj.rb=function(){return Tf(this.b)},hj.sb=function(a){return Tf(this.b)},hj.wb=function(){return dj(this.b,0)},hj.eQ=function(a){return Qb(a,29)&&Fc(this,Qd(a,29))},hj.zb=function(a,b,c){Lb((a.c.y(a.b,lo),a),this.b)},hj.hC=function(){return hg(this.b)},hj.Mb=function(a){We(a,Mi(this.b))},hj.b=null,Sh(130,128,{},Wc),hj.hb=function(){return this.b?(Zi(),Hq):(Zi(),Iq)},hj.ib=function(){return this.b?(fi(),Mq):(fi(),Pq)},hj.jb=function(){return this.b},hj.kb=function(a){return this.b},hj.lb=function(){return this.b?me(as,Qp,-1,[1]):me(as,Qp,-1,[0])},hj.mb=function(){return this.b?1:0},hj.nb=function(a){return this.b?1:0},hj.ob=function(){return this.b?1:0},hj.pb=function(a){return this.b?1:0},hj.rb=function(){return Gg(this.b?1:0)},hj.sb=function(a){return Gg(this.b?1:0)},hj.wb=function(){return sd(),lj+this.b},hj.eQ=function(a){return a===this},hj.hC=function(){return(sd(),this.b?qq:pq).b?1231:1237},hj.Mb=function(a){rc(a,this.b)},hj.b=!1;var Yq,Zq;Sh(131,128,{30:1},yd),hj.hb=function(){return new hb(new Cg(this.b))},hj.ib=function(){return new Cg(this.b)},hj.lb=function(){var a,b;for(a=Od(as,Qp,-1,this.b.length,1),b=0;b<this.b.length;++b)a[b]=this.b[b];return a},hj.mb=function(){throw new ca},hj.nb=function(a){throw new ca},hj.ob=function(){return Wf(this)},hj.pb=function(a){return Wf(this)},hj.rb=function(){return rg(this)},hj.sb=function(a){return rg(this)},hj.wb=function(){var a;return a=new B,qi(this,a,0,!1),a.c.D(a.b)},hj.eQ=function(a){return Qb(a,30)&&Gc(this,Qd(a,30))},hj.zb=function(a,b,c){qi(this,a,b,c)},hj.Ab=function(a,b,c){jh(a,b,c)},hj.hC=function(){return Kf(this.b)+71},hj.Lb=function(a){var b;return b=new B,jh(b,0,!a),b.c.D(b.b)},hj.Mb=function(a){We(a,this.b)},hj.b=null,Sh(132,1,{},W),hj.b=null,hj.c=0,Sh(133,1,{},cc),hj.b=null,hj.c=0,Sh(134,128,{31:1},zd),hj.hb=function(){return new $f(this.b)},hj.ib=function(){return Eg(pi(this.b))},hj.jb=function(){return 0!=this.b},hj.kb=function(a){return 0!=this.b},hj.lb=function(){throw new ca},hj.mb=function(){return this.b},hj.nb=function(a){return this.b},hj.ob=function(){return af(this.b)},hj.pb=function(a){return af(this.b)},hj.rb=function(){return pi(this.b)},hj.sb=function(a){return pi(this.b)},hj.wb=function(){return lj+this.b},hj.eQ=function(a){return Qb(a,31)&&ic(this,Qd(a,31))},hj.hC=function(){return af(new I(this.b).b)},hj.Mb=function(a){vf(a,this.b)},hj.b=0,Sh(135,1,{},m),Sh(136,128,{32:1},qf),hj.wb=function(){return this.b},hj.eQ=function(a){return Qb(a,32)&&Dc(this,Qd(a,32))},hj.zb=function(a,b,c){Mb((a.c.y(a.b,Bo),a),Ph(this.b))},hj.Ab=function(a,b,c){a.c.z(a.b,vp),c?Ud((a.c.z(a.b,mj),a),b+1):a.c.z(a.b,oj),Mb(a,Qi(Al)),a.c.y(a.b,qj),Mb(a,Qi(this.b)),c?Ud((a.c.z(a.b,mj),a),b):a.c.z(a.b,oj),a.c.z(a.b,wp)},hj.hC=function(){return fg(this.b)},hj.Kb=function(){return new Cd(_i(this.b))},hj.Mb=function(a){Ai(a,this.b)},hj.b=null,Sh(138,128,{33:1},Ad),hj.hb=function(){return new ac(this.b)},hj.ib=function(){return Eg(Gg(this.b))},hj.jb=function(){return 0!=this.b},hj.kb=function(a){return 0!=this.b},hj.lb=function(){var a;return a=Od(as,Qp,-1,4,1),a[0]=~~(~~this.b>>>24<<24)>>24,a[1]=~~(~~this.b>>>16<<24)>>24,a[2]=~~(~~this.b>>>8<<24)>>24,a[3]=~~(this.b<<24)>>24,a},hj.mb=function(){return this.b},hj.nb=function(a){return this.b},hj.ob=function(){return this.b},hj.pb=function(a){return this.b},hj.rb=function(){return Gg(this.b)},hj.sb=function(a){return Gg(this.b)},hj.wb=function(){return lj+this.b},hj.eQ=function(a){return Qb(a,33)&&kc(this,Qd(a,33))},hj.hC=function(){return this.b},hj.Mb=function(a){ih(a,this.b)},hj.b=0,Sh(139,128,{34:1},Gd,Xc,Sg,_d),hj.gb=function(){var a;return a=new E,this.b.I(a),a},hj.jb=function(){return!this.b.K()},hj.kb=function(a){return!this.b.K()},hj.ob=function(){return this.b.L()},hj.pb=function(a){return this.b.L()},hj.qb=function(){return gd(this.b)},hj.rb=function(){return Gg(this.b.L())},hj.sb=function(a){return Gg(this.b.L())},hj.tb=function(){var a,b,c,d,e;for(c=new E,a=this.b.H();a.Z();)b=Qd(a.$(),36),b.d.c==(ti(),kr)?(d=b.d.ub(),se(zf(c,d.b),d.c)):a.Z()&&(e=Qd(a.$(),36),se(zf(c,b.d.wb()),e));return c},hj.ub=function(){return 2==this.b.L()?new $a(Qd(this.b.eb(0),36).d.wb(),Qd(this.b.eb(1),36)):Y()},hj.vb=function(){var a,b,c,d;for(c=new C,a=this.b.H();a.Z();)b=Qd(a.$(),36),b.d.c==(ti(),kr)?xc(c,b.d.ub()):a.Z()&&(d=Qd(a.$(),36),xc(c,new $a(b.d.wb(),d)));return c},hj.wb=function(){var a;return a=new A,di(this,a,0,!1),a.c.D(a.b)},hj.yb=function(){return new _d(this)},hj.eQ=function(a){return Qb(a,34)&&Jc(this,Qd(a,34))},hj.zb=function(a,b,c){di(this,a,b,c)},hj.Ab=function(a,b,c){var d,e,f,g;for(g=c&&this.b.L()>1,f=gd(this.b),e=new H(f.c.H()),a.c.z(a.b,Kn),g&&Ud((a.c.z(a.b,mj),a),b+1);e.b.Z();)d=Qd(e.b.$(),36),d.d.Ab(a,g?b+1:b,c),e.b.Z()&&(g?Ud((a.c.y(a.b,Kj),a),b+1):a.c.z(a.b,Jj));g&&Ud((a.c.z(a.b,mj),a),b),a.c.z(a.b,fo)},hj.Bb=function(a){var b,c,d;if(c=this.b,(d=c.L())<=a)for(b=0;b<a-d+1;++b)c.I(new E);return Qd(c.eb(a),36)},hj.Eb=function(a){return 0<=a&&a<this.b.L()},hj.hC=function(){return this.b.hC()},hj.Gb=function(){var a,b,c;for(a=this.b,c=a.H();c.Z();)b=Qd(c.$(),36),ad(b);return a.cZ==Bs?new Xc(Qb(a,26)?new Aa(a):new Ta(a)):this},hj.Ib=function(a){try{return Qd(this.b.eb(a),36)}catch(b){if(b=vd(b),Qb(b,14))return Db(a);throw b}},hj.Kb=function(){var a,b,c;for(a=new jb(this.b.L()),c=this.b.H();c.Z();)b=Qd(c.$(),36),xc(a,pd(b));return new Xc(a)},hj.Mb=function(a){var b,c,d,e;for(b=this.b,e=b.L(),ih(a,e),d=b.H();d.Z();)c=Qd(d.$(),36),Jd(c,a)},hj.b=null,Sh(140,128,{35:1},Bd),hj.hb=function(){return new Jb(this.b)},hj.ib=function(){return Eg(this.b)},hj.jb=function(){return md(this.b,Bp)},hj.kb=function(a){return md(this.b,Bp)},hj.lb=function(){var a;return a=Od(as,Qp,-1,8,1),a[0]=~~(Na(Rh(this.b,56))<<24)>>24,a[1]=~~(Na(Rh(this.b,48))<<24)>>24,a[2]=~~(Na(Rh(this.b,40))<<24)>>24,a[3]=~~(Na(Rh(this.b,32))<<24)>>24,a[4]=~~(Na(Rh(this.b,24))<<24)>>24,a[5]=~~(Na(Rh(this.b,16))<<24)>>24,a[6]=~~(Na(Rh(this.b,8))<<24)>>24,a[7]=~~(Na(this.b)<<24)>>24,a},hj.mb=function(){return Ug(this.b)},hj.nb=function(a){return Ug(this.b)},hj.ob=function(){return Na(this.b)},hj.pb=function(a){return Na(this.b)},hj.rb=function(){return this.b},hj.sb=function(a){return this.b},hj.wb=function(){return lj+li(this.b)},hj.eQ=function(a){return Qb(a,35)&&Hc(this,Qd(a,35))},hj.zb=function(a,b,c){Pd(wc(a,this.b),76)},hj.hC=function(){return Na(this.b)},hj.Mb=function(a){si(a,this.b)},hj.b=Bp,Sh(141,1,{36:1,42:1},E,Ya),hj.Nb=function(){return xf(this)},hj.Ob=function(a){return uc(xf(this),a),this},hj.Pb=function(a){return vc(xf(this),a),this},hj.Qb=function(a){return Qe(xf(this),a),this},hj.Rb=function(a,b){return jf(xf(this),a,b),this},hj.Sb=function(a,b){return kf(xf(this),a,b),this},hj.Tb=function(a,b){return Fe(xf(this),a,b),this},hj.Ub=function(a,b){return Zc(xf(this),a,b),this},hj.Vb=function(a,b){return wf(xf(this),a,b),this},hj.Wb=function(a){return se(xf(this),a),this},hj.Xb=function(a){return dd(xf(this),a),this},hj.Yb=function(){var a;return a=xf(this),Fb(a),a.d=new Gd,a},hj.Zb=function(){var a;return a=xf(this),Fb(a),a.d=new Hd,a},hj.$b=function(a){return Re(xf(this),a),this},hj.hb=function(){return this.d.hb()},hj.ib=function(){return this.d.ib()},hj.jb=function(){return this.d.jb()},hj.kb=function(a){return this.d.kb(a)},hj.lb=function(){return this.d.lb()},hj.mb=function(){return this.d.mb()},hj.nb=function(a){return this.d.nb(a)},hj.ob=function(){return this.d.ob()},hj.pb=function(a){return this.d.pb(a)},hj.qb=function(){return this.d.qb()},hj.tb=function(){return this.d.tb()},hj.ub=function(){return this.d.ub()},hj.vb=function(){return this.d.vb()},hj.wb=function(){return this.d.wb()},hj.xb=function(){return this.d.xb()},hj._b=function(){return Fb(this),this.d=(ec(),Xq),this},hj.ac=function(){return od(this)},hj.eQ=function(a){return Qb(a,36)&&Lc(this,Qd(a,36))},hj.bc=function(a){return Lc(this,a)},hj.cc=function(a){return yf(this,a)},hj.dc=function(a){return zf(this,a)},hj.ec=function(){return this.d.Fb(Do)&&zf(this,Do).d.c!=(ti(),nr)?zf(this,Do).d.wb():Bm},hj.fc=function(a){return this.c?this.c.R(a):null},hj.gc=function(){return this.d.c},hj.Eb=function(a){return this.d.Eb(a)},hj.Fb=function(a){return this.d.Fb(a)},hj.hc=function(a){return this.d.Eb(a)&&yf(this,a).d.c!=(ti(),nr)},hj.ic=function(a){return this.d.Fb(a)&&zf(this,a).d.c!=(ti(),nr)},hj.hC=function(){return this.d.hC()},hj.jc=function(){return this.d.c!=(ti(),nr)},hj.kc=function(){return this.d.Fb(ip)&&zf(this,ip).d.c!=(ti(),nr)&&!Rd(zf(this,ip).d.wb(),op)},hj.lc=function(){return this.d.Db()},hj.mc=function(){ad(this)},hj.nc=function(a){aj(this,a)},hj.oc=function(a){return this.d.Hb(a)},hj.pc=function(a){return this.d.Ib(a)},hj.qc=function(a){return this.d.Jb(a)},hj.rc=function(){return pd(this)},hj.sc=function(a){return uc(this,a)},hj.tc=function(a){return vc(this,a)},hj.uc=function(a){return Qe(this,a)},hj.vc=function(a,b){return jf(this,a,b)},hj.wc=function(a,b){return kf(this,a,b)},hj.xc=function(a,b){return Fe(this,a,b)},hj.yc=function(a,b){return Zc(this,a,b)},hj.zc=function(a,b){var c;return Fb(this),c=new E,ke(c,b),this.d=new Tc(a,c),this},hj.Ac=function(a,b){return wf(this,a,b)},hj.Bc=function(a){return se(this,a)},hj.Cc=function(a){return ke(this,a)},hj.Dc=function(a){return dd(this,a)},hj.Ec=function(){return Fb(this),this.d=new Gd,this},hj.Fc=function(){return Fb(this),this.d=new Hd,this},hj.Gc=function(a){return Re(this,a)},hj.Hc=function(a,b){var c;return Fb(this),c=new E,Re(c,b),this.d=new Tc(a,c),this},hj.Ic=function(a,b){!this.c&&(this.c=new Ba(2)),this.c.T(a,b)},hj.Jc=function(){var a,b;b=new cc;try{Jd(this,b)}catch(b){throw b=vd(b),Qb(b,4)?(a=b,new ra(a)):b}return Of(hf(b))},hj.Kc=function(){return this.d.Lb(!1)},hj.Lb=function(a){return this.d.Lb(a)},hj.tS=function(){return Xd(this.d)},hj.Mb=function(a){Jd(this,a)},hj.b=!1,hj.c=null,Sh(142,1,{},y);var $q=!1;Sh(143,63,{5:1,10:1,12:1,37:1},Cc),hj.b=0;var _q,ar,br,cr,dr,er,fr,gr,hr,ir,jr,kr,lr,mr,nr,or;Sh(145,128,{},Da),hj.kb=function(a){return a},hj.nb=function(a){return a},hj.pb=function(a){return a},hj.sb=function(a){return a},hj.wb=function(){return rp},hj.eQ=function(a){return a===this},hj.Ab=function(a,b,c){a.c.y(a.b,_o)},hj.hC=function(){return 7113},Sh(146,128,{38:1},Hd,Vc,Tg),hj.jb=function(){return!this.b.K()},hj.kb=function(a){return!this.b.K()},hj.ob=function(){return this.b.L()},hj.pb=function(a){return this.b.L()},hj.qb=function(){var a,b,c,d;for(d=new C,b=this.b.Q().H();b.Z();)a=Qd(b.$(),25),c=new E,Zc(c,Qd(a.ab(),1),Qd(a.bb(),36)),Lh(d.b,d.c++,c);return d},hj.rb=function(){return Gg(this.b.L())},hj.sb=function(a){return Gg(this.b.L())},hj.tb=function(){return new Ya(ah(this,!1))},hj.ub=function(){var a;return 1==this.b.L()?(a=Qd(this.b.Q().H().$(),25),new $a(Qd(a.ab(),1),Qd(a.bb(),36))):Y()},hj.vb=function(){var a,b,c;for(c=new C,b=this.b.Q().H();b.Z();)a=Qd(b.$(),25),xc(c,new $a(Qd(a.ab(),1),Qd(a.bb(),36)));return c},hj.wb=function(){var a;return a=new A,ki(this,a,0,!1),a.c.D(a.b)},hj.yb=function(){return ah(this,!1)},hj.eQ=function(a){return Qb(a,38)&&Kc(this,Qd(a,38))},hj.zb=function(a,b,c){ki(this,a,b,c)},hj.Ab=function(a,b,c){var d,e,f,g;for(a.c.z(a.b,vp),f=c&&this.b.L()>1,f&&Ud((a.c.z(a.b,mj),a),b+1),e=this.b.Q().H();e.Z();)d=Qd(e.$(),25),Mb(a,Ph(Qd(d.ab(),1))),a.c.y(a.b,qj),g=Qd(d.bb(),36),g.d.Ab(a,f?b+1:b,c),e.Z()&&(f?Ud((a.c.y(a.b,Kj),a),b+1):a.c.y(a.b,Lj));f&&Ud((a.c.z(a.b,mj),a),b),a.c.z(a.b,wp)},hj.Cb=function(a){var b,c;return null==a?null:(c=Qd(this.b.R(a),36))?c:(b=new E,this.b.T(a,b),b)},hj.Db=function(){return this.b.S()},hj.Fb=function(a){return this.b.O(a)},hj.hC=function(){return this.b.hC()},hj.Gb=function(){var a,b,c;for(a=this.b,c=a.V().H();c.Z();)b=Qd(c.$(),36),ad(b);return a.cZ==Cs?new Vc(new P(a)):this},hj.Hb=function(a){return null==a?null:Qd(this.b.U(a),36)},hj.Jb=function(a){return Qd(this.b.R(a),36)||Eb(a)},hj.Kb=function(){return ah(this,!0)},hj.Mb=function(a){var b,c,d,e;for(d=this.b,e=d.L(),ih(a,e),c=d.Q().H();c.Z();)b=Qd(c.$(),25),Ai(a,Qd(b.ab(),1)),Jd(Qd(b.bb(),36),a)},hj.b=null,Sh(147,1,{},$a,Ef),hj.b=null,hj.c=null,Sh(148,128,{39:1},Tc,Uc,Nf),hj.qb=function(){return new G(new Ya(this))},hj.tb=function(){var a;return a=new E,se(zf(a,this.b.b),this.b.c),a},hj.ub=function(){return this.b},hj.vb=function(){return new G(this.b)},hj.wb=function(){return Cj+Ph(this.b.b)+rj+this.b.c+Ej},hj.yb=function(){return new Tc(this.b.b,this.b.c)},hj.eQ=function(a){return Qb(a,39)&&ie(this,Qd(a,39))},hj.Ab=function(a,b,c){a.c.z(a.b,vp),c?Ud((a.c.z(a.b,mj),a),b+1):a.c.z(a.b,oj),Mb(a,Qi(Lm)),a.c.y(a.b,qj),a.c.z(a.b,vp),c?Ud((a.c.z(a.b,mj),a),b+1+1):a.c.z(a.b,oj),Mb(a,Qi(this.b.b)),a.c.y(a.b,qj),ob(this.b.c,a,b+1+1,c),c?Ud((a.c.z(a.b,mj),a),b+1):a.c.z(a.b,oj),a.c.z(a.b,wp),c?Ud((a.c.z(a.b,mj),a),b):a.c.z(a.b,oj),a.c.z(a.b,wp)},hj.Bb=function(a){return 0==a?this.b.c:Z()},hj.Cb=function(a){return Rd(this.b.b,a)?this.b.c:$()},hj.Db=function(){return Id(this.b.b)},hj.Fb=function(a){return Rd(a,this.b.b)},hj.hC=function(){return 31*fg(this.b.b)+this.b.c.d.hC()},hj.Gb=function(){return ad(this.b.c),this},hj.Jb=function(a){return Rd(this.b.b,a)?this.b.c:Eb(a)},hj.Kb=function(){return new Tc(this.b.b,pd(this.b.c))},hj.Mb=function(a){Ai(a,this.b.b),Jd(this.b.c,a)},hj.b=null,Sh(149,128,{40:1},Cd),hj.hb=function(){return new ya(this.b)},hj.ib=function(){return new ib(this.b)},hj.jb=function(){return sd(),Df(qp,this.b)},hj.kb=function(a){return sd(),Df(qp,this.b)},hj.lb=function(){try{return Gf(this.b,xn)}catch(a){if(a=vd(a),Qb(a,6))return bi(this.b);throw a}},hj.mb=function(){return mh(this.b)},hj.nb=function(a){return mh(this.b)},hj.ob=function(){return ii(this.b)},hj.pb=function(a){return ii(this.b)},hj.rb=function(){return Xi(this.b)},hj.sb=function(a){return Xi(this.b)},hj.wb=function(){return this.b},hj.xb=function(){return fc(this.b)},hj.eQ=function(a){return Qb(a,40)&&Ic(this,Qd(a,40))},hj.zb=function(a,b,c){Mb(a,Ph(this.b))},hj.Ab=function(a,b,c){Mb(a,Qi(this.b))},hj.hC=function(){return fg(this.b)},hj.Mb=function(a){Ai(a,this.b)},hj.b=null,Sh(150,128,{41:1},Yc),hj.jb=function(){return this.b!=(ti(),nr)},hj.kb=function(a){return this.b!=(ti(),nr)},hj.wb=function(){return this.b.c},hj.xb=function(){return this.b},hj.eQ=function(a){return Qb(a,41)&&jc(this,Qd(a,41))},hj.Ab=function(a,b,c){a.c.z(a.b,vp),c?Ud((a.c.z(a.b,mj),a),b+1):a.c.z(a.b,oj),Mb(a,Qi(sn)),a.c.y(a.b,qj),Mb(a,Qi(this.b.c)),c?Ud((a.c.z(a.b,mj),a),b):a.c.z(a.b,oj),a.c.z(a.b,wp)},hj.hC=function(){return Sb(this.b)},hj.Mb=function(a){_c(a,this.b.b)},hj.b=null;var pr,qr,rr,sr,tr,ur,vr,wr,xr,yr,zr;Sh(151,1,{},z),Sh(153,1,{}),Sh(152,153,{},Fd);var Ar,Br=cf,Cr=Ke(Ro,Hm,1,null),Dr=Ke(so,cm,9,Cr),Er=ue(Oo,vj),Fr=Qf(lj,On,163,Er),Gr=Qf(Rn,Im,161,Cr),Hr=Ke(Ro,tn,8,Cr),Ir=Ke(Ro,Cl,7,Hr),Jr=Ke(Ro,Qm,6,Ir),Kr=Ke(Ro,dn,75,Cr),Lr=Qf(Rn,en,164,Kr),Mr=Ke(uo,km,40,Cr),Nr=Qf(Qn,lm,165,Mr),Or=(Ke(uo,Vm,41,Cr),Ke(Ro,Bl,63,Cr)),Pr=(Ke(Ro,Tk,57,Cr),ue(no,sj)),Qr=Ke(Ro,Em,62,Cr),Rr=ue(po,tj),Sr=Qf(lj,Mn,166,Rr),Tr=ue(Uo,wj),Ur=Qf(lj,Pn,167,Tr),Vr=Ke(Ro,dl,59,Cr),Wr=ue(Ao,uj),Xr=Qf(lj,Nn,168,Wr),Yr=(Ke(Ro,ul,61,Qr),Ke(Ro,Xl,67,Qr)),Zr=Qf(Rn,Yl,169,Yr),$r=Ke(Ro,fn,2,Cr),_r=Qf(Rn,hn,162,$r),as=Qf(lj,Ln,157,Pr),bs=(Ke(ep,Dl,135,Cr),Ke(Ro,el,60,Jr),Ke(Ro,on,78,Cr),Ke(Ro,Dk,56,Jr),Ke(so,bm,5,Jr),Ke(wo,En,48,Cr),Ke(wo,Fn,49,Cr),Ke(wo,Dn,47,Cr),Ke(wo,Gn,50,Cr),Ke(wo,Hn,51,Cr),Ke(wo,In,52,Cr),Ke(Ro,Ak,55,Jr),Ke(to,kn,24,Cr)),cs=Ke(hp,Hl,153,Cr),ds=(Ke(hp,Gl,152,cs),te(hp,Fl)),es=(Ke(hp,El,151,Cr),Ke(to,$m,19,Cr)),fs=Ke(to,bn,21,es),gs=Ke(to,_m,20,fs),hs=(Ke(to,an,22,gs),Ke(to,cn,23,fs),Ke(to,nn,27,bs)),is=(Ke(to,mn,26,hs),Ke(to,ln,25,bs),Ke(so,Tm,14,Cr)),js=(Ke(to,Um,16,is),Ke(To,rk,91,Cr)),ks=Ke(To,kk,90,js),ls=Ke(To,jk,89,Cr),ms=Ke(To,xk,93,ls),ns=(Ke(To,lk,92,ms),Ke(To,mk,94,Cr),Ke(To,wk,96,Cr)),os=(Ke(To,nk,95,ns),Ke(To,ok,97,ns),Ke(To,sk,100,ms),Ke(To,tk,101,Cr),Ke(To,uk,102,ls),Ke(To,vk,103,Cr),Ke(Ro,Dm,71,Jr),Ke(Ro,Ql,64,Jr)),ps=Ke(To,Kl,117,ks),qs=(Ke(ep,pm,142,Cr),Ke(ep,om,141,Cr)),rs=Ke(To,nm,121,ns),ss=Ke(So,Mk,82,Qr),ts=Qf(Sn,Nk,170,ss),us=Ke(So,Pk,83,Qr),vs=Qf(Sn,Rk,171,us),ws=(Ke(ep,Mm,147,Cr),lf(ep,qm,143,Or,xa)),xs=Qf(Tn,rm,172,ws),ys=(Ke(ep,ql,132,Cr),Ke(Qo,Nl,53,Ir)),zs=(Ke(To,Cm,124,Jr),Ke(ep,rl,133,Cr),Ke(Ro,jn,77,Cr),Ke(ep,sm,128,Cr)),As=(Ke(ep,tm,145,zs),Ke(ep,jm,139,zs),Ke(To,pk,98,ls)),Bs=Ke(To,Ck,104,As),Cs=(Ke(Ro,Rl,65,Jr),Ke(ep,Ok,127,zs),Ke(ep,Sk,129,zs),Ke(ep,Uk,130,zs),Ke(ep,Vk,131,zs),Ke(ep,vl,134,zs),Ke(ep,Il,136,zs),Ke(ep,Wl,138,zs),Ke(ep,mm,140,zs),Ke(ep,Jm,146,zs),Ke(To,fm,119,ps)),Ds=(Ke(ep,Nm,148,zs),Ke(ep,qn,149,zs),Ke(ep,un,150,zs),Ke(To,qk,99,Cr),Ke(Ro,Cn,81,Jr),Ke(Ro,Fm,74,os),Ke(To,gm,120,rs),Ke(To,hm,122,ms),Ke(To,im,123,Cr),Ke(To,fl,107,As),Ke(To,gl,108,Cr)),Es=Ke(To,il,110,Ds),Fs=(Ke(To,jl,111,Cr),Ke(To,ol,113,Ds)),Gs=(Ke(To,kl,112,Fs),Ke(To,ml,115,Cr),Ke(To,nl,116,Es),Ke(To,hl,109,Cr),Ke(To,ll,114,Cr),Ke(Ro,Tl,66,Jr));Ke(Qo,Bn,54,ys),Ke(To,Ll,118,ms),Ke(Ro,pn,79,Gs);dmr_js&&dmr_js.onScriptLoad(og)}(),function(a){"use strict";function b(a){return a.replace(/,/g,".").replace(/[^0-9\.]/g,"")}function c(a){return parseFloat(b(a))>=10}var d,e={bridge:null,version:"0.0.0",disabled:null,outdated:null,ready:null},f={},g=0,h={},i=0,j={},k=null,l=null,m=function(){var a,b,c,d,e="ZeroClipboard.swf";if(document.currentScript&&(d=document.currentScript.src));else{var f=document.getElementsByTagName("script");if("readyState"in f[0])for(a=f.length;a--&&("interactive"!==f[a].readyState||!(d=f[a].src)););else if("loading"===document.readyState)d=f[f.length-1].src;else{for(a=f.length;a--;){if(!(c=f[a].src)){b=null;break}if(c=c.split("#")[0].split("?")[0],c=c.slice(0,c.lastIndexOf("/")+1),null==b)b=c;else if(b!==c){b=null;break}}null!==b&&(d=b)}}return d&&(d=d.split("#")[0].split("?")[0],e=d.slice(0,d.lastIndexOf("/")+1)+e),e}(),n=function(){var a=/\-([a-z])/g,b=function(a,b){return b.toUpperCase()};return function(c){return c.replace(a,b)}}(),o=function(b,c){var d,e;return a.getComputedStyle?d=a.getComputedStyle(b,null).getPropertyValue(c):(e=n(c),d=b.currentStyle?b.currentStyle[e]:b.style[e]),"cursor"!==c||d&&"auto"!==d||"a"!==b.tagName.toLowerCase()?d:"pointer"},p=function(b){b||(b=a.event);var c;this!==a?c=this:b.target?c=b.target:b.srcElement&&(c=b.srcElement),K.activate(c)},q=function(a,b,c){a&&1===a.nodeType&&(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c))},r=function(a,b,c){a&&1===a.nodeType&&(a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c))},s=function(a,b){if(!a||1!==a.nodeType)return a;if(a.classList)return a.classList.contains(b)||a.classList.add(b),a;if(b&&"string"==typeof b){var c=(b||"").split(/\s+/);if(1===a.nodeType)if(a.className){for(var d=" "+a.className+" ",e=a.className,f=0,g=c.length;g>f;f++)d.indexOf(" "+c[f]+" ")<0&&(e+=" "+c[f]);a.className=e.replace(/^\s+|\s+$/g,"")}else a.className=b}return a},t=function(a,b){if(!a||1!==a.nodeType)return a;if(a.classList)return a.classList.contains(b)&&a.classList.remove(b),a;if(b&&"string"==typeof b||void 0===b){var c=(b||"").split(/\s+/);if(1===a.nodeType&&a.className)if(b){for(var d=(" "+a.className+" ").replace(/[\n\t]/g," "),e=0,f=c.length;f>e;e++)d=d.replace(" "+c[e]+" "," ");a.className=d.replace(/^\s+|\s+$/g,"")}else a.className=""}return a},u=function(){var a,b,c,d=1;return"function"==typeof document.body.getBoundingClientRect&&(a=document.body.getBoundingClientRect(),b=a.right-a.left,c=document.body.offsetWidth,d=Math.round(b/c*100)/100),d},v=function(b,c){var d={left:0,top:0,width:0,height:0,zIndex:B(c)-1};if(b.getBoundingClientRect){var e,f,g,h=b.getBoundingClientRect();"pageXOffset"in a&&"pageYOffset"in a?(e=a.pageXOffset,f=a.pageYOffset):(g=u(),e=Math.round(document.documentElement.scrollLeft/g),f=Math.round(document.documentElement.scrollTop/g));var i=document.documentElement.clientLeft||0,j=document.documentElement.clientTop||0;d.left=h.left+e-i,d.top=h.top+f-j,d.width="width"in h?h.width:h.right-h.left,d.height="height"in h?h.height:h.bottom-h.top}return d},w=function(a,b){return null==b||b&&!0===b.cacheBust&&!0===b.useNoCache?(-1===a.indexOf("?")?"?":"&")+"noCache="+(new Date).getTime():""},x=function(b){var c,d,e,f=[],g=[],h=[];if(b.trustedOrigins&&("string"==typeof b.trustedOrigins?g.push(b.trustedOrigins):"object"==typeof b.trustedOrigins&&"length"in b.trustedOrigins&&(g=g.concat(b.trustedOrigins))),b.trustedDomains&&("string"==typeof b.trustedDomains?g.push(b.trustedDomains):"object"==typeof b.trustedDomains&&"length"in b.trustedDomains&&(g=g.concat(b.trustedDomains))),g.length)for(c=0,d=g.length;d>c;c++)if(g.hasOwnProperty(c)&&g[c]&&"string"==typeof g[c]){if(!(e=E(g[c])))continue;if("*"===e){h=[e];break}h.push.apply(h,[e,"//"+e,a.location.protocol+"//"+e])}return h.length&&f.push("trustedOrigins="+encodeURIComponent(h.join(","))),"string"==typeof b.jsModuleId&&b.jsModuleId&&f.push("jsModuleId="+encodeURIComponent(b.jsModuleId)),f.join("&")},y=function(a,b,c){if("function"==typeof b.indexOf)return b.indexOf(a,c);var d,e=b.length;for(void 0===c?c=0:0>c&&(c=e+c),d=c;e>d;d++)if(b.hasOwnProperty(d)&&b[d]===a)return d;return-1},z=function(a){if("string"==typeof a)throw new TypeError("ZeroClipboard doesn't accept query strings.");return a.length?a:[a]},A=function(b,c,d,e){e?a.setTimeout(function(){b.apply(c,d)},0):b.apply(c,d)},B=function(a){var b,c;return a&&("number"==typeof a&&a>0?b=a:"string"==typeof a&&(c=parseInt(a,10))&&!isNaN(c)&&c>0&&(b=c)),b||("number"==typeof N.zIndex&&N.zIndex>0?b=N.zIndex:"string"==typeof N.zIndex&&(c=parseInt(N.zIndex,10))&&!isNaN(c)&&c>0&&(b=c)),b||0},C=function(a,b){if(a&&!1!==b&&"undefined"!=typeof console&&console&&(console.warn||console.log)){var c="`"+a+"` is deprecated. See docs for more info:\n    https://github.com/zeroclipboard/zeroclipboard/blob/master/docs/instructions.md#deprecations";console.warn?console.warn(c):console.log(c)}},D=function(){var a,b,c,d,e,f=arguments[0]||{};for(a=1,b=arguments.length;b>a;a++)if(null!=(c=arguments[a]))for(d in c)if(c.hasOwnProperty(d)){if(f[d],e=c[d],f===e)continue;void 0!==e&&(f[d]=e)}return f},E=function(a){if(null==a||""===a)return null;if(""===(a=a.replace(/^\s+|\s+$/g,"")))return null;var b=a.indexOf("//");a=-1===b?a:a.slice(b+2);var c=a.indexOf("/");return a=-1===c?a:-1===b||0===c?null:a.slice(0,c),a&&".swf"===a.slice(-4).toLowerCase()?null:a||null},F=function(){var a=function(a,b){var c,d,e;if(null!=a&&"*"!==b[0]&&("string"==typeof a&&(a=[a]),"object"==typeof a&&"length"in a))for(c=0,d=a.length;d>c;c++)if(a.hasOwnProperty(c)&&(e=E(a[c]))){if("*"===e){b.length=0,b.push("*");break}-1===y(e,b)&&b.push(e)}},b={always:"always",samedomain:"sameDomain",never:"never"};return function(c,d){var e,f=d.allowScriptAccess;if("string"==typeof f&&(e=f.toLowerCase())&&/^always|samedomain|never$/.test(e))return b[e];var g=E(d.moviePath);null===g&&(g=c);var h=[];a(d.trustedOrigins,h),a(d.trustedDomains,h);var i=h.length;if(i>0){if(1===i&&"*"===h[0])return"always";if(-1!==y(c,h))return 1===i&&c===g?"sameDomain":"always"}return"never"}}(),G=function(a){if(null==a)return[];if(Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},H=function(a){if(a)for(var b in a)a.hasOwnProperty(b)&&delete a[b];return a},I=function(){try{return document.activeElement}catch(a){}return null},J=function(){var a=!1;if("boolean"==typeof e.disabled)a=!1===e.disabled;else{if("function"==typeof ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(a=!0)}catch(a){}!a&&navigator.mimeTypes["application/x-shockwave-flash"]&&(a=!0)}return a},K=function(a,b){return this instanceof K?(this.id=""+g++,h[this.id]={instance:this,elements:[],handlers:{}},a&&this.clip(a),void 0!==b&&(C("new ZeroClipboard(elements, options)",N.debug),K.config(b)),this.options=K.config(),"boolean"!=typeof e.disabled&&(e.disabled=!J()),void(!1===e.disabled&&!0!==e.outdated&&null===e.bridge&&(e.outdated=!1,e.ready=!1,O()))):new K(a,b)};K.prototype.setText=function(a){return a&&""!==a&&(f["text/plain"]=a,!0===e.ready&&e.bridge&&"function"==typeof e.bridge.setText?e.bridge.setText(a):e.ready=!1),this},K.prototype.setSize=function(a,b){return!0===e.ready&&e.bridge&&"function"==typeof e.bridge.setSize?e.bridge.setSize(a,b):e.ready=!1,this};var L=function(a){!0===e.ready&&e.bridge&&"function"==typeof e.bridge.setHandCursor?e.bridge.setHandCursor(a):e.ready=!1};K.prototype.destroy=function(){this.unclip(),this.off(),delete h[this.id]};var M=function(){var a,b,c,d=[],e=G(h);for(a=0,b=e.length;b>a;a++)(c=h[e[a]].instance)&&c instanceof K&&d.push(c);return d};K.version="1.3.5";var N={swfPath:m,trustedDomains:a.location.host?[a.location.host]:[],cacheBust:!0,forceHandCursor:!1,zIndex:999999999,debug:!0,title:null,autoActivate:!0};K.config=function(a){if("object"==typeof a&&null!==a&&D(N,a),"string"!=typeof a||!a){var b={};for(var c in N)N.hasOwnProperty(c)&&(b[c]="object"==typeof N[c]&&null!==N[c]?"length"in N[c]?N[c].slice(0):D({},N[c]):N[c]);return b}if(N.hasOwnProperty(a))return N[a]},K.destroy=function(){K.deactivate();for(var a in h)if(h.hasOwnProperty(a)&&h[a]){var b=h[a].instance;b&&"function"==typeof b.destroy&&b.destroy()}var c=P(e.bridge);c&&c.parentNode&&(c.parentNode.removeChild(c),e.ready=null,e.bridge=null)},K.activate=function(a){d&&(t(d,N.hoverClass),t(d,N.activeClass)),d=a,s(a,N.hoverClass),Q();var b=N.title||a.getAttribute("title");if(b){var c=P(e.bridge);c&&c.setAttribute("title",b)}var f=!0===N.forceHandCursor||"pointer"===o(a,"cursor");L(f)},K.deactivate=function(){var a=P(e.bridge);a&&(a.style.left="0px",a.style.top="-9999px",a.removeAttribute("title")),d&&(t(d,N.hoverClass),t(d,N.activeClass),d=null)};var O=function(){var b,c,d=document.getElementById("global-zeroclipboard-html-bridge");if(!d){var f=K.config();f.jsModuleId="string"==typeof k&&k||"string"==typeof l&&l||null;var g=F(a.location.host,N),h=x(f),i=N.moviePath+w(N.moviePath,N),j='      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="global-zeroclipboard-flash-bridge" width="100%" height="100%">         <param name="movie" value="'+i+'"/>         <param name="allowScriptAccess" value="'+g+'"/>         <param name="scale" value="exactfit"/>         <param name="loop" value="false"/>         <param name="menu" value="false"/>         <param name="quality" value="best" />         <param name="bgcolor" value="#ffffff"/>         <param name="wmode" value="transparent"/>         <param name="flashvars" value="'+h+'"/>         <embed src="'+i+'"           loop="false" menu="false"           quality="best" bgcolor="#ffffff"           width="100%" height="100%"           name="global-zeroclipboard-flash-bridge"           allowScriptAccess="'+g+'"           allowFullScreen="false"           type="application/x-shockwave-flash"           wmode="transparent"           pluginspage="http://www.macromedia.com/go/getflashplayer"           flashvars="'+h+'"           scale="exactfit">         </embed>       </object>';d=document.createElement("div"),d.id="global-zeroclipboard-html-bridge",d.setAttribute("class","global-zeroclipboard-container"),d.style.position="absolute",d.style.left="0px",d.style.top="-9999px",d.style.width="15px",d.style.height="15px",d.style.zIndex=""+B(N.zIndex),document.body.appendChild(d),d.innerHTML=j}b=document["global-zeroclipboard-flash-bridge"],b&&(c=b.length)&&(b=b[c-1]),e.bridge=b||d.children[0].lastElementChild},P=function(a){for(var b=/^OBJECT|EMBED$/,c=a&&a.parentNode;c&&b.test(c.nodeName)&&c.parentNode;)c=c.parentNode;return c||null},Q=function(){if(d){var a=v(d,N.zIndex),b=P(e.bridge);b&&(b.style.top=a.top+"px",b.style.left=a.left+"px",b.style.width=a.width+"px",b.style.height=a.height+"px",b.style.zIndex=a.zIndex+1),!0===e.ready&&e.bridge&&"function"==typeof e.bridge.setSize?e.bridge.setSize(a.width,a.height):e.ready=!1}return this};K.prototype.on=function(a,b){var c,d,f,g={},i=h[this.id]&&h[this.id].handlers
;if("string"==typeof a&&a)f=a.toLowerCase().split(/\s+/);else if("object"==typeof a&&a&&void 0===b)for(c in a)a.hasOwnProperty(c)&&"string"==typeof c&&c&&"function"==typeof a[c]&&this.on(c,a[c]);if(f&&f.length){for(c=0,d=f.length;d>c;c++)a=f[c].replace(/^on/,""),g[a]=!0,i[a]||(i[a]=[]),i[a].push(b);g.noflash&&e.disabled&&T.call(this,"noflash",{}),g.wrongflash&&e.outdated&&T.call(this,"wrongflash",{flashVersion:e.version}),g.load&&e.ready&&T.call(this,"load",{flashVersion:e.version})}return this},K.prototype.off=function(a,b){var c,d,e,f,g,i=h[this.id]&&h[this.id].handlers;if(0===arguments.length)f=G(i);else if("string"==typeof a&&a)f=a.split(/\s+/);else if("object"==typeof a&&a&&void 0===b)for(c in a)a.hasOwnProperty(c)&&"string"==typeof c&&c&&"function"==typeof a[c]&&this.off(c,a[c]);if(f&&f.length)for(c=0,d=f.length;d>c;c++)if(a=f[c].toLowerCase().replace(/^on/,""),(g=i[a])&&g.length)if(b)for(e=y(b,g);-1!==e;)g.splice(e,1),e=y(b,g,e);else i[a].length=0;return this},K.prototype.handlers=function(a){var b,c=null,d=h[this.id]&&h[this.id].handlers;if(d){if("string"==typeof a&&a)return d[a]?d[a].slice(0):null;c={};for(b in d)d.hasOwnProperty(b)&&d[b]&&(c[b]=d[b].slice(0))}return c};var R=function(b,c,d,e){var f=h[this.id]&&h[this.id].handlers[b];if(f&&f.length){var g,i,j,k=c||this;for(g=0,i=f.length;i>g;g++)j=f[g],c=k,"string"==typeof j&&"function"==typeof a[j]&&(j=a[j]),"object"==typeof j&&j&&"function"==typeof j.handleEvent&&(c=j,j=j.handleEvent),"function"==typeof j&&A(j,c,d,e)}return this};K.prototype.clip=function(a){a=z(a);for(var b=0;b<a.length;b++)if(a.hasOwnProperty(b)&&a[b]&&1===a[b].nodeType){a[b].zcClippingId?-1===y(this.id,j[a[b].zcClippingId])&&j[a[b].zcClippingId].push(this.id):(a[b].zcClippingId="zcClippingId_"+i++,j[a[b].zcClippingId]=[this.id],!0===N.autoActivate&&q(a[b],"mouseover",p));var c=h[this.id].elements;-1===y(a[b],c)&&c.push(a[b])}return this},K.prototype.unclip=function(a){var b=h[this.id];if(b){var c,d=b.elements;a=void 0===a?d.slice(0):z(a);for(var e=a.length;e--;)if(a.hasOwnProperty(e)&&a[e]&&1===a[e].nodeType){for(c=0;-1!==(c=y(a[e],d,c));)d.splice(c,1);var f=j[a[e].zcClippingId];if(f){for(c=0;-1!==(c=y(this.id,f,c));)f.splice(c,1);0===f.length&&(!0===N.autoActivate&&r(a[e],"mouseover",p),delete a[e].zcClippingId)}}}return this},K.prototype.elements=function(){var a=h[this.id];return a&&a.elements?a.elements.slice(0):[]};var S=function(a){var b,c,d,e,f,g=[];if(a&&1===a.nodeType&&(b=a.zcClippingId)&&j.hasOwnProperty(b)&&(c=j[b])&&c.length)for(d=0,e=c.length;e>d;d++)(f=h[c[d]].instance)&&f instanceof K&&g.push(f);return g};N.hoverClass="zeroclipboard-is-hover",N.activeClass="zeroclipboard-is-active",N.trustedOrigins=null,N.allowScriptAccess=null,N.useNoCache=!0,N.moviePath="ZeroClipboard.swf",K.detectFlashSupport=function(){return C("ZeroClipboard.detectFlashSupport",N.debug),J()},K.dispatch=function(a,b){if("string"==typeof a&&a){var c=a.toLowerCase().replace(/^on/,"");if(c)for(var e=d&&!0===N.autoActivate?S(d):M(),f=0,g=e.length;g>f;f++)T.call(e[f],c,b)}},K.prototype.setHandCursor=function(a){return C("ZeroClipboard.prototype.setHandCursor",N.debug),a="boolean"==typeof a?a:!!a,L(a),N.forceHandCursor=a,this},K.prototype.reposition=function(){return C("ZeroClipboard.prototype.reposition",N.debug),Q()},K.prototype.receiveEvent=function(a,b){if(C("ZeroClipboard.prototype.receiveEvent",N.debug),"string"==typeof a&&a){var c=a.toLowerCase().replace(/^on/,"");c&&T.call(this,c,b)}},K.prototype.setCurrent=function(a){return C("ZeroClipboard.prototype.setCurrent",N.debug),K.activate(a),this},K.prototype.resetBridge=function(){return C("ZeroClipboard.prototype.resetBridge",N.debug),K.deactivate(),this},K.prototype.setTitle=function(a){if(C("ZeroClipboard.prototype.setTitle",N.debug),a=a||N.title||d&&d.getAttribute("title")){var b=P(e.bridge);b&&b.setAttribute("title",a)}return this},K.setDefaults=function(a){C("ZeroClipboard.setDefaults",N.debug),K.config(a)},K.prototype.addEventListener=function(a,b){return C("ZeroClipboard.prototype.addEventListener",N.debug),this.on(a,b)},K.prototype.removeEventListener=function(a,b){return C("ZeroClipboard.prototype.removeEventListener",N.debug),this.off(a,b)},K.prototype.ready=function(){return C("ZeroClipboard.prototype.ready",N.debug),!0===e.ready};var T=function(a,g){a=a.toLowerCase().replace(/^on/,"");var h=g&&g.flashVersion&&b(g.flashVersion)||null,i=d,j=!0;switch(a){case"load":if(h){if(!c(h))return void T.call(this,"onWrongFlash",{flashVersion:h});e.outdated=!1,e.ready=!0,e.version=h}break;case"wrongflash":h&&!c(h)&&(e.outdated=!0,e.ready=!1,e.version=h);break;case"mouseover":s(i,N.hoverClass);break;case"mouseout":!0===N.autoActivate&&K.deactivate();break;case"mousedown":s(i,N.activeClass);break;case"mouseup":t(i,N.activeClass);break;case"datarequested":if(i){var k=i.getAttribute("data-clipboard-target"),l=k?document.getElementById(k):null;if(l){var m=l.value||l.textContent||l.innerText;m&&this.setText(m)}else{var n=i.getAttribute("data-clipboard-text");n&&this.setText(n)}}j=!1;break;case"complete":H(f),i&&i!==I()&&i.focus&&i.focus()}var o=i,p=[this,g];return R.call(this,a,o,p,j)};"function"==typeof define&&define.amd?define(["require","exports","module"],function(a,b,c){return k=c&&c.id||null,K}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports&&"function"==typeof a.require?(l=module.id||null,module.exports=K):a.ZeroClipboard=K}(function(){return this}()),function(a,b){"function"==typeof define&&define.amd?define("angular-file-upload",["angular"],function(a){return b(a)}):b(a)}("undefined"==typeof angular?null:angular,function(a){var b=a.module("angularFileUpload",[]);return b.value("fileUploaderOptions",{url:"/",alias:"file",headers:{},queue:[],progress:0,autoUpload:!1,removeAfterUpload:!1,method:"POST",filters:[],formData:[],queueLimit:Number.MAX_VALUE,withCredentials:!1}).factory("FileUploader",["fileUploaderOptions","$rootScope","$http","$window","$compile",function(b,c,d,e,f){function g(c){var d=a.copy(b);a.extend(this,d,c,{isUploading:!1,_nextIndex:0,_failFilterIndex:-1,_directives:{select:[],drop:[],over:[]}}),this.filters.unshift({name:"queueLimit",fn:this._queueLimitFilter}),this.filters.unshift({name:"folder",fn:this._folderFilter})}function h(a){var b=a;this.lastModifiedDate=null,this.size=null,this.type="like/"+b.slice(b.lastIndexOf(".")+1).toLowerCase(),this.name=b.slice(b.lastIndexOf("/")+b.lastIndexOf("\\")+2)}function i(b,c,d,e){c=b._getFileOrFileLikeObject(c),a.extend(this,{url:b.url,alias:b.alias,headers:a.copy(b.headers),formData:a.copy(b.formData),removeAfterUpload:b.removeAfterUpload,withCredentials:b.withCredentials,method:b.method},d,{uploader:b,file:a.copy(c),isReady:!1,isUploading:!1,isUploaded:!1,isSuccess:!1,isCancel:!1,isError:!1,progress:0,index:null,_file:c}),e&&(this._input=a.element(e),this._replaceNode(this._input))}function j(b){a.extend(this,b),this.uploader._directives[this.prop].push(this),this._saveLinks(),this.bind()}function k(){k.super_.apply(this,arguments),this.uploader.isHTML5||this.element.removeAttr("multiple"),this.element.prop("value",null)}function l(){l.super_.apply(this,arguments)}function m(){m.super_.apply(this,arguments)}return g.prototype.isHTML5=!(!e.File||!e.FormData),g.prototype.addToQueue=function(b,c,d){var e=a.isElement(b)?[b]:b,f=this._getFilters(d),h=this.queue.length,i=[];a.forEach(e,function(a){var b=this._getFileOrFileLikeObject(a);if(this._isValidFile(b,f,c)){var d=this.isFile(b)?null:a,e=new g.FileItem(this,b,c,d);i.push(e),this.queue.push(e),this._onAfterAddingFile(e)}else{var h=this.filters[this._failFilterIndex];this._onWhenAddingFileFailed(b,h,c)}},this),this.queue.length!==h&&(this._onAfterAddingAll(i),this.progress=this._getTotalProgress()),this._render(),this.autoUpload&&this.uploadAll()},g.prototype.removeFromQueue=function(a){var b=this.getIndexOfItem(a),c=this.queue[b];c.isUploading&&c.cancel(),this.queue.splice(b,1),c._destroy(),this.progress=this._getTotalProgress()},g.prototype.clearQueue=function(){for(;this.queue.length;)this.queue[0].remove();this.progress=0},g.prototype.uploadItem=function(a){var b=this.getIndexOfItem(a),c=this.queue[b],d=this.isHTML5?"_xhrTransport":"_iframeTransport";c._prepareToUploading(),this.isUploading||(this.isUploading=!0,this[d](c))},g.prototype.cancelItem=function(a){var b=this.getIndexOfItem(a),c=this.queue[b],d=this.isHTML5?"_xhr":"_form";c&&c.isUploading&&c[d].abort()},g.prototype.uploadAll=function(){var b=this.getNotUploadedItems().filter(function(a){return!a.isUploading});b.length&&(a.forEach(b,function(a){a._prepareToUploading()}),b[0].upload())},g.prototype.cancelAll=function(){var b=this.getNotUploadedItems();a.forEach(b,function(a){a.cancel()})},g.prototype.isFile=function(a){var b=e.File;return b&&a instanceof b},g.prototype.isFileLikeObject=function(a){return a instanceof g.FileLikeObject},g.prototype.getIndexOfItem=function(b){return a.isNumber(b)?b:this.queue.indexOf(b)},g.prototype.getNotUploadedItems=function(){return this.queue.filter(function(a){return!a.isUploaded})},g.prototype.getReadyItems=function(){return this.queue.filter(function(a){return a.isReady&&!a.isUploading}).sort(function(a,b){return a.index-b.index})},g.prototype.destroy=function(){a.forEach(this._directives,function(b){a.forEach(this._directives[b],function(a){a.destroy()},this)},this)},g.prototype.onAfterAddingAll=function(){},g.prototype.onAfterAddingFile=function(){},g.prototype.onWhenAddingFileFailed=function(){},g.prototype.onBeforeUploadItem=function(){},g.prototype.onProgressItem=function(){},g.prototype.onProgressAll=function(){},g.prototype.onSuccessItem=function(){},g.prototype.onErrorItem=function(){},g.prototype.onCancelItem=function(){},g.prototype.onCompleteItem=function(){},g.prototype.onCompleteAll=function(){},g.prototype._getTotalProgress=function(a){if(this.removeAfterUpload)return a||0;var b=this.getNotUploadedItems().length,c=b?this.queue.length-b:this.queue.length,d=100/this.queue.length,e=(a||0)*d/100;return Math.round(c*d+e)},g.prototype._getFilters=function(b){if(a.isUndefined(b))return this.filters;if(a.isArray(b))return b;var c=b.split(/\s*,/);return this.filters.filter(function(a){return-1!==c.indexOf(a.name)},this)},g.prototype._render=function(){c.$$phase||c.$apply()},g.prototype._folderFilter=function(a){return!(!a.size&&!a.type)},g.prototype._queueLimitFilter=function(){return this.queue.length<this.queueLimit},g.prototype._isValidFile=function(a,b,c){return this._failFilterIndex=-1,!b.length||b.every(function(b){return this._failFilterIndex++,b.fn.call(this,a,c)},this)},g.prototype._getFileOrFileLikeObject=function(a){return this.isFile(a)||this.isFileLikeObject(a)?a:new g.FileLikeObject(a.value)},g.prototype._isSuccessCode=function(a){return a>=200&&300>a||304===a},g.prototype._transformResponse=function(b){return a.forEach(d.defaults.transformResponse,function(a){b=a(b)}),b},g.prototype._parseHeaders=function(b){function c(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")}function d(a){return a.toLowerCase()}var e,f,g,h={};return b?(a.forEach(b.split("\n"),function(a){g=a.indexOf(":"),e=d(c(a.substr(0,g))),f=c(a.substr(g+1)),e&&(h[e]=h[e]?h[e]+", "+f:f)}),h):h},g.prototype._xhrTransport=function(b){var c=b._xhr=new XMLHttpRequest,d=new FormData,e=this;e._onBeforeUploadItem(b),a.forEach(b.formData,function(b){a.forEach(b,function(a,b){d.append(b,a)})}),d.append(b.alias,b._file),c.upload.onprogress=function(a){var c=Math.round(a.lengthComputable?100*a.loaded/a.total:0);e._onProgressItem(b,c)},c.onload=function(){var a=e._parseHeaders(c.getAllResponseHeaders()),d=e._transformResponse(c.response),f=e._isSuccessCode(c.status)?"Success":"Error";e["_on"+f+"Item"](b,d,c.status,a),e._onCompleteItem(b,d,c.status,a)},c.onerror=function(){var a=e._parseHeaders(c.getAllResponseHeaders()),d=e._transformResponse(c.response);e._onErrorItem(b,d,c.status,a),e._onCompleteItem(b,d,c.status,a)},c.onabort=function(){var a=e._parseHeaders(c.getAllResponseHeaders()),d=e._transformResponse(c.response);e._onCancelItem(b,d,c.status,a),e._onCompleteItem(b,d,c.status,a)},c.open(b.method,b.url,!0),c.withCredentials=b.withCredentials,a.forEach(b.headers,function(a,b){c.setRequestHeader(b,a)}),c.send(d),this._render()},g.prototype._iframeTransport=function(b){var c=a.element('<form style="display: none;" />'),d=a.element('<iframe name="iframeTransport'+Date.now()+'">'),e=b._input,f=this;b._form&&b._form.replaceWith(e),b._form=c,f._onBeforeUploadItem(b),e.prop("name",b.alias),a.forEach(b.formData,function(b){a.forEach(b,function(b,d){c.append(a.element('<input type="hidden" name="'+d+'" value="'+b+'" />'))})}),c.prop({action:b.url,method:"POST",target:d.prop("name"),enctype:"multipart/form-data",encoding:"multipart/form-data"}),d.bind("load",function(){try{var a=d[0].contentDocument.body.innerHTML}catch(a){}var c={response:a,status:200,dummy:!0},e=f._transformResponse(c.response),g={};f._onSuccessItem(b,e,c.status,g),f._onCompleteItem(b,e,c.status,g)}),c.abort=function(){var a,g={status:0,dummy:!0},h={};d.unbind("load").prop("src","javascript:false;"),c.replaceWith(e),f._onCancelItem(b,a,g.status,h),f._onCompleteItem(b,a,g.status,h)},e.after(c),c.append(e).append(d),c[0].submit(),this._render()},g.prototype._onWhenAddingFileFailed=function(a,b,c){this.onWhenAddingFileFailed(a,b,c)},g.prototype._onAfterAddingFile=function(a){this.onAfterAddingFile(a)},g.prototype._onAfterAddingAll=function(a){this.onAfterAddingAll(a)},g.prototype._onBeforeUploadItem=function(a){a._onBeforeUpload(),this.onBeforeUploadItem(a)},g.prototype._onProgressItem=function(a,b){var c=this._getTotalProgress(b);this.progress=c,a._onProgress(b),this.onProgressItem(a,b),this.onProgressAll(c),this._render()},g.prototype._onSuccessItem=function(a,b,c,d){a._onSuccess(b,c,d),this.onSuccessItem(a,b,c,d)},g.prototype._onErrorItem=function(a,b,c,d){a._onError(b,c,d),this.onErrorItem(a,b,c,d)},g.prototype._onCancelItem=function(a,b,c,d){a._onCancel(b,c,d),this.onCancelItem(a,b,c,d)},g.prototype._onCompleteItem=function(b,c,d,e){b._onComplete(c,d,e),this.onCompleteItem(b,c,d,e);var f=this.getReadyItems()[0];return this.isUploading=!1,a.isDefined(f)?void f.upload():(this.onCompleteAll(),this.progress=this._getTotalProgress(),void this._render())},g.isFile=g.prototype.isFile,g.isFileLikeObject=g.prototype.isFileLikeObject,g.isHTML5=g.prototype.isHTML5,g.inherit=function(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.super_=b},g.FileLikeObject=h,g.FileItem=i,g.FileDirective=j,g.FileSelect=k,g.FileDrop=l,g.FileOver=m,i.prototype.upload=function(){this.uploader.uploadItem(this)},i.prototype.cancel=function(){this.uploader.cancelItem(this)},i.prototype.remove=function(){this.uploader.removeFromQueue(this)},i.prototype.onBeforeUpload=function(){},i.prototype.onProgress=function(){},i.prototype.onSuccess=function(){},i.prototype.onError=function(){},i.prototype.onCancel=function(){},i.prototype.onComplete=function(){},i.prototype._onBeforeUpload=function(){this.isReady=!0,this.isUploading=!0,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.onBeforeUpload()},i.prototype._onProgress=function(a){this.progress=a,this.onProgress(a)},i.prototype._onSuccess=function(a,b,c){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!0,this.isCancel=!1,this.isError=!1,this.progress=100,this.index=null,this.onSuccess(a,b,c)},i.prototype._onError=function(a,b,c){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!1,this.isCancel=!1,this.isError=!0,this.progress=0,this.index=null,this.onError(a,b,c)},i.prototype._onCancel=function(a,b,c){this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!0,this.isError=!1,this.progress=0,this.index=null,this.onCancel(a,b,c)},i.prototype._onComplete=function(a,b,c){this.onComplete(a,b,c),this.removeAfterUpload&&this.remove()},i.prototype._destroy=function(){this._input&&this._input.remove(),this._form&&this._form.remove(),delete this._form,delete this._input},i.prototype._prepareToUploading=function(){this.index=this.index||++this.uploader._nextIndex,this.isReady=!0},i.prototype._replaceNode=function(a){var b=f(a.clone())(a.scope());b.prop("value",null),a.css("display","none"),a.after(b)},j.prototype.events={},j.prototype.bind=function(){for(var a in this.events){var b=this.events[a];this.element.bind(a,this[b])}},j.prototype.unbind=function(){for(var a in this.events)this.element.unbind(a,this.events[a])},j.prototype.destroy=function(){var a=this.uploader._directives[this.prop].indexOf(this);this.uploader._directives[this.prop].splice(a,1),this.unbind()},j.prototype._saveLinks=function(){for(var a in this.events){var b=this.events[a];this[b]=this[b].bind(this)}},g.inherit(k,j),k.prototype.events={$destroy:"destroy",change:"onChange"},k.prototype.prop="select",k.prototype.getOptions=function(){},k.prototype.getFilters=function(){},k.prototype.isEmptyAfterSelection=function(){return!!this.element.attr("multiple")},k.prototype.onChange=function(){var a=this.uploader.isHTML5?this.element[0].files:this.element[0],b=this.getOptions(),c=this.getFilters();this.uploader.isHTML5||this.destroy(),this.uploader.addToQueue(a,b,c),this.isEmptyAfterSelection()&&this.element.prop("value",null)},g.inherit(l,j),l.prototype.events={$destroy:"destroy",drop:"onDrop",dragover:"onDragOver",dragleave:"onDragLeave"},l.prototype.prop="drop",l.prototype.getOptions=function(){},l.prototype.getFilters=function(){},l.prototype.onDrop=function(b){var c=this._getTransfer(b);if(c){var d=this.getOptions(),e=this.getFilters();this._preventAndStop(b),a.forEach(this.uploader._directives.over,this._removeOverClass,this),this.uploader.addToQueue(c.files,d,e)}},l.prototype.onDragOver=function(b){var c=this._getTransfer(b);this._haveFiles(c.types)&&(c.dropEffect="copy",this._preventAndStop(b),a.forEach(this.uploader._directives.over,this._addOverClass,this))},l.prototype.onDragLeave=function(b){b.target===this.element[0]&&(this._preventAndStop(b),a.forEach(this.uploader._directives.over,this._removeOverClass,this))},l.prototype._getTransfer=function(a){return a.dataTransfer?a.dataTransfer:a.originalEvent.dataTransfer},l.prototype._preventAndStop=function(a){a.preventDefault(),a.stopPropagation()},l.prototype._haveFiles=function(a){return!!a&&(a.indexOf?-1!==a.indexOf("Files"):!!a.contains&&a.contains("Files"))},l.prototype._addOverClass=function(a){a.addOverClass()},l.prototype._removeOverClass=function(a){a.removeOverClass()},g.inherit(m,j),m.prototype.events={$destroy:"destroy"},m.prototype.prop="over",m.prototype.overClass="nv-file-over",m.prototype.addOverClass=function(){this.element.addClass(this.getOverClass())},m.prototype.removeOverClass=function(){this.element.removeClass(this.getOverClass())},m.prototype.getOverClass=function(){return this.overClass},g}]).directive("nvFileSelect",["$parse","FileUploader",function(a,b){return{link:function(c,d,e){var f=c.$eval(e.uploader);if(!(f instanceof b))throw new TypeError('"Uploader" must be an instance of FileUploader');var g=new b.FileSelect({uploader:f,element:d});g.getOptions=a(e.options).bind(g,c),g.getFilters=function(){return e.filters}}}}]).directive("nvFileDrop",["$parse","FileUploader",function(a,b){return{link:function(c,d,e){var f=c.$eval(e.uploader);if(!(f instanceof b))throw new TypeError('"Uploader" must be an instance of FileUploader');if(f.isHTML5){var g=new b.FileDrop({uploader:f,element:d});g.getOptions=a(e.options).bind(g,c),g.getFilters=function(){return e.filters}}}}}]).directive("nvFileOver",["FileUploader",function(a){return{link:function(b,c,d){var e=b.$eval(d.uploader);if(!(e instanceof a))throw new TypeError('"Uploader" must be an instance of FileUploader');new a.FileOver({uploader:e,element:c}).getOverClass=function(){return d.overClass||this.overClass}}}}]),b}),function(a,b,c){function d(a,b,c,d,e,f,g){this.divId=a,this.className=b,this.metricName=c,this.max=d,this.title=e,this.type=f,this.subTitle=g,this.getMax=function(a){return this.max},this.getMetricNode=function(a,b,c){return c[f][a+"."+b]?c[f][a+"."+b]:null},this.getSubTitle=function(){return null!=this.subTitle?this.subTitle:this.title}}function e(a,b){return(a/b*100).toFixed(0)}function f(a,b){return isNaN(b)&&(b=1),isNaN(a)?b:a.toFixed(b)}function g(a){return a.charAt(0).toUpperCase()+a.slice(1)}function h(a,b,c,e,f,g,h,i){var j=new d(a,b,c,e,f,"timers",g);return j.getMeterInfo=function(){var a=this.divId+" div.timerGraph td.meterGraph",b=new d(a,this.className,this.metricName,this.max,"Frequency","timers",null);return b.getMetricNode=function(a,b,c){return c.timers[a+"."+b]?c.timers[a+"."+b]:null},b.eventType=g,b},j.getTimerStatsDivId=function(){return"#"+this.divId+" div.timerGraph td.timerStatsGraph"},j.getTimerHistogramDivId=function(){return"#"+this.divId+" div.timerGraph td.timerHistogram"},j.durationMax=h,j.isNested=i,j}function i(a){var c=b("#"+a.divId),d="<div class='metricsWatcher counter counterGraph'><div class='heading3'>"+a.title+"</div><div class='progress'><div class='progress-bar' style='width: 0%;'></div></div></div>";c.html(d)}function j(a,c){var d=a.getMetricNode(a.className,a.metricName,c),f=e(d.count,a.getMax(c));b("#"+a.divId+" div.progress div.progress-bar").css("width",f+"%"),b("#"+a.divId+" div.progress div.progress-bar").html(d.count+"/"+a.getMax(c))}function k(a){var c=b("#"+a.divId),d=a.isNested?" nested":"",e="<div class='metricsWatcher timer timerGraph"+d+" col-md-12'><fieldset><legend>"+(a.isNested?"<div class='heading1'>":"<div class='heading1 btn-link' data-toggle='collapse' data-target='#"+a.divId+"Collapse'>")+a.title+"</div></legend><div class='timerContainer col-md-12"+(a.isNested?"":"collapse")+"' id='"+a.divId+"Collapse'><table><tr><td class='meterGraph col-md-4'></td><td class='timerStatsGraph col-md-4'></td><td class='timerHistogram col-md-4'></td></tr></table></div></fieldset>";c.html(e),t(a.getMeterInfo()),l(a),m(a)}function l(a){var c="<div class='heading3'>Duration</div><div class='timeUnit'></div><div class='metricGraph'><table class='progressTable'>"+u("Min","min")+u("Mean","mean")+u("Max","max")+u("Std&nbsp;Dev","stddev")+"</table></div>";b(a.getTimerStatsDivId()).html(c)}function m(a){var c="<div class='heading3'> "+(a.isNested?"Histogram":a.getSubTitle())+"</div><p>Percentiles</p><div class='metricGraph'><table class='progressTable'>"+u("99.9%","p999")+u("99%","p99")+u("98%","p98")+u("95%","p95")+u("75%","p75")+u("50%","p50")+"</table></div>";b(a.getTimerHistogramDivId()).html(c)}function n(a,b){v(a.getMeterInfo(),b),o(a,b),q(a,b)}function o(a,c){var d=a.getMetricNode(a.className,a.metricName,c);if(d){b(a.getTimerStatsDivId()+" div.timeUnit").html(g(d.duration_units)),p(a.getTimerStatsDivId(),d,"min",a.durationMax),p(a.getTimerStatsDivId(),d,"mean",a.durationMax),p(a.getTimerStatsDivId(),d,"max",a.durationMax),p(a.getTimerStatsDivId(),d,"stddev",a.durationMax)}}function p(a,c,d,g){b(a+" tr."+d+" td.progressValue").html(f(c[d])),b(a+" tr."+d+" td.progressBar div.progress div.progress-bar").css("width",e(c[d],g)+"%")}function q(a,b){var c=a.getMetricNode(a.className,a.metricName,b);c&&(p(a.getTimerHistogramDivId(),c,"p999",a.durationMax),p(a.getTimerHistogramDivId(),c,"p99",a.durationMax),p(a.getTimerHistogramDivId(),c,"p98",a.durationMax),p(a.getTimerHistogramDivId(),c,"p95",a.durationMax),p(a.getTimerHistogramDivId(),c,"p75",a.durationMax),p(a.getTimerHistogramDivId(),c,"p50",a.durationMax))}function r(a){var c=b("#"+a.divId),d="<div class='metricsWatcher histogram histogramContainer'><div class='heading1 btn-link col-md-12' data-toggle='collapse' data-target='#"+a.divId+"Collapse'> "+(a.isNested?"Histogram":a.title)+"</div><div class='collapse' id='"+a.divId+"Collapse'><table><tr><td class='col-md-4'>Count</td><td class='col-md-4'>Min</td><td class='col-md-4'>Max<td class='col-md-4'>Mean</td></tr><tr><td class='countVal'></td><td class='minVal'></td><td class='meanVal'></td><td class='maxVal'></td></tr></table><p>Percentiles</p><table class='progressTable'>"+u("99.9%","p999")+u("99%","p99")+u("98%","p98")+u("95%","p95")+u("75%","p75")+u("50%","p50")+"</table></div></div>";c.html(d)}function s(a,c){var d=a.getMetricNode(a.className,a.metricName,c);b("#"+a.divId+" td.countVal").html(f(d.count,0)),b("#"+a.divId+" td.minVal").html(f(d.min,0)),b("#"+a.divId+" td.maxVal").html(f(d.max,0)),b("#"+a.divId+" td.meanVal").html(f(d.mean,0)),x(a,d,"p999","p999",a.max),x(a,d,"p99","p99",a.max),x(a,d,"p98","p98",a.max),x(a,d,"p95","p95",a.max),x(a,d,"p75","p75",a.max),x(a,d,"p50","p50",a.max)}function t(a){var c=b("#"+a.divId),d="<div class='metricsWatcher metric metricGraph'><div class='heading3'>"+a.title+"</div><div class='counterVal'></div><table class='progressTable'>"+u("1&nbsp;min","onemin")+u("5&nbsp;min","fivemin")+u("15&nbsp;min","fifteenmin")+u("Mean","mean")+"</table></div>";c.html(d)}function u(a,b){return"<tr class='"+b+"'><td class='progressLabel'>"+a+"</td><td class='progressBar'><div class='progress'><div class='progress-bar' style='width: 0%;'></div></div></td><td class='progressValue'>0</td></tr>"}function v(a,b){var c=a.getMetricNode(a.className,a.metricName,b);c&&w(a,c)}function w(a,c){b("#"+a.divId+" div.counterVal").html(c.rate_units+" ("+c.count+" total)");var d=Math.max(c.mean_rate,c.m1_rate,c.m5_rate,c.m15_rate);x(a,c,"mean_rate","mean",d),x(a,c,"m1_rate","onemin",d),x(a,c,"m5_rate","fivemin",d),x(a,c,"m15_rate","fifteenmin",d)}function x(a,b,c,d){x(a,b,c,d,a.max)}function x(a,c,d,g,h){b("#"+a.divId+" tr."+g+" td.progressValue").html(f(c[d])),b("#"+a.divId+" tr."+g+" td.progressBar div.progress div.progress-bar").css("width",e(c[d],h)+"%")}function y(a){var c=b("#"+a.divId),d="<div class='metricsWatcher metric metricGraph'><div class='heading3'>"+a.title+"</span><div class='gaugeDataVal'></div></div>";c.html(d)}function z(a,b){var c=a.getMetricNode(a.className,a.metricName,b);c&&A(a,c)}function A(a,c){b("#"+a.divId+" div.gaugeDataVal").html(c.value)}function B(a,c,d){var e=b("#"+a),f="<div class='metricsWatcher metric metricGraph nested'><fieldset><legend><div class='heading1'>"+c+"</div></legend><div class='gaugeTableContainer'><table class='gaugeTable'></table></div></fieldset></div>";e.html(f)}function C(a,c,d){for(var e=b("#"+a+" table"),f="",g=c.length,h=0;h<g;h++){var i=c[h];f+="<tr><td><h5>"+i.title+"</h5></td><td><h4>"+i.getMetricNode(i.className,i.metricName,d).value+"</h4></td></tr>"}e.html(f)}function D(a){var c=b("#"+a.divId),d="<div class='metricsWatcher cache cacheGraph col-md-12'><fieldset><legend><div class='heading1'>"+a.title+"</div></legend><div class='cacheContainer col-md-12'>\t<div class='row'>\t\t<div class='col-md-3'><div id='"+a.divId+"Statistics'></div></div>\t\t<div class='col-md-9'>\t\t\t<div id='"+a.divId+"gettimer'></div>\t\t\t<div id='"+a.divId+"puttimer'></div>\t\t</div>\t</div></div></fieldset></div>";c.html(d);for(var e=a.components.gauges.length,f=0;f<e;f++)y(a.components.gauges[f]);k(a.getTimer),k(a.putTimer),B(a.divId+"Statistics","Statistics",a.components.gauges)}function E(a,c){for(var d=a.components.gauges.length,e=0;e<d;e++){var f=a.components.gauges[e],g=f.getMetricNode(a.className,f.metricName,c);if(g){b("#"+f.divId+" div.metricGraph div.gaugeDataVal").html(g.value)}}n(a.getTimer,c),n(a.putTimer,c),C(a.divId+"Statistics",a.components.gauges,c)}function F(a){var c=b("#"+a.divId),d="<div class='metricsWatcher jvm metricGraph col-md-12'><fieldset><legend><div  class='heading1 btn-link' data-toggle='collapse' data-target='#"+a.divId+"Collapse'>"+a.title+"</div></legend><div class='jvmContainer col-md-12 collapse' id='"+a.divId+"Collapse'>\t<div id='"+a.divId+"Vm'></div></div></fieldset></div>";c.html(d)}function G(a,c){
var d=b("#"+a.divId+"Vm"),e=c.gauges,g="<div class='row'><div class='col-md-3'><table class='jvmTable'><caption>Memory</caption><tr><td><h5>Total Init</h5></td><td>"+e["jvm.memory.total.init"].value+"</td></tr><tr><td><h5>Total Used</h5></td><td>"+e["jvm.memory.total.used"].value+"</td></tr><tr><td><h5>Total Max</h5></td><td>"+e["jvm.memory.total.max"].value+"</td></tr><tr><td><h5>Total Committed</h5></td><td>"+e["jvm.memory.total.committed"].value+"</td></tr><tr><td><h5>Heap Init</h5></td><td>"+e["jvm.memory.heap.init"].value+"</td></tr><tr><td><h5>Heap Used</h5></td><td>"+e["jvm.memory.heap.used"].value+"</td></tr><tr><td><h5>Heap Max</h5></td><td>"+e["jvm.memory.heap.max"].value+"</td></tr><tr><td><h5>Heap Committed</h5></td><td>"+e["jvm.memory.heap.committed"].value+"</td></tr><tr><td><h5>Non Heap Init</h5></td><td>"+e["jvm.memory.non-heap.init"].value+"</td></tr><tr><td><h5>Non Heap Used</h5></td><td>"+e["jvm.memory.non-heap.used"].value+"</td></tr><tr><td><h5>Non Heap Max</h5></td><td>"+e["jvm.memory.non-heap.max"].value+"</td></tr><tr><td><h5>Non Heap Committed</h5></td><td>"+e["jvm.memory.non-heap.committed"].value+"</td></tr></table></div><div class='col-md-3'><table class='jvmTable'><caption>Memory Usage</caption><tr><td><h5>Heap Usage</h5></td><td>"+(100*e["jvm.memory.heap.usage"].value).toFixed(2)+"</td></tr><tr><td><h5>Non Heap Usage</h5></td><td>"+(100*e["jvm.memory.non-heap.usage"].value).toFixed(2)+"</td></tr>"+(e["jvm.memory.pools.JIT-code-cache.usage"]?"<tr><td><h5>JIT Code Cache Usage</h5></td><td>"+(100*e["jvm.memory.pools.JIT-code-cache.usage"].value).toFixed(2)+"</td></tr>":"")+(e["jvm.memory.pools.Code-Cache.usage"]?"<tr><td><h5>JIT Code Cache Usage</h5></td><td>"+(100*e["jvm.memory.pools.Code-Cache.usage"].value).toFixed(2)+"</td></tr>":"")+(e["jvm.memory.pools.JIT-data-cache.usage"]?"<tr><td><h5>JIT Data Cache Usage</h5></td><td>"+(100*e["jvm.memory.pools.JIT-data-cache.usage"].value).toFixed(2)+"</td></tr>":"")+(e["jvm.memory.pools.Java-heap.usage"]?"<tr><td><h5>Java Heap Usage</h5></td><td>"+(100*e["jvm.memory.pools.Java-heap.usage"].value).toFixed(2)+"</td></tr>":"")+(e["jvm.memory.pools.class-storage.usage"]?"<tr><td><h5>Class Storage Usage</h5></td><td>"+(100*e["jvm.memory.pools.class-storage.usage"].value).toFixed(2)+"</td></tr>":"")+(e["jvm.memory.pools.Perm-Gen.usage"]?"<tr><td><h5>Perm Gen Usage</h5></td><td>"+(100*e["jvm.memory.pools.Perm-Gen.usage"].value).toFixed(2)+"</td></tr>":"")+(e["jvm.memory.pools.Tenured-Gen.usage"]?"<tr><td><h5>Tenured Gen Usage</h5></td><td>"+(100*e["jvm.memory.pools.Tenured-Gen.usage"].value).toFixed(2)+"</td></tr>":"")+(e["jvm.memory.pools.miscellaneous-non-heap-storage.usage"]?"<tr><td><h5>Misc Non Heap Storage Usage</h5></td><td>"+(100*e["jvm.memory.pools.miscellaneous-non-heap-storage.usage"].value).toFixed(2)+"</td></tr>":"")+(e["jvm.memory.pools.Survivor-Space.usage"]?"<tr><td><h5>Survivor Space Usage</h5></td><td>"+(100*e["jvm.memory.pools.Survivor-Space.usage"].value).toFixed(2)+"</td></tr>":"")+(e["jvm.memory.pools.Eden-Space.usage"]?"<tr><td><h5>Eden Space Usage</h5></td><td>"+(100*e["jvm.memory.pools.Eden-Space.usage"].value).toFixed(2)+"</td></tr>":"")+"</table></div><div class='col-md-3'><table class='jvmTable'><caption>Garbage Collection</caption><tr><td><h5>PS Mark Sweep Runs</h5></td><td>"+e["jvm.gc.MarkSweepCompact.count"].value+"</td></tr><tr><td><h5>PS Mark Sweep Time</h5></td><td>"+e["jvm.gc.MarkSweepCompact.time"].value+"</td></tr><tr><td><h5>GC Copy Runs</h5></td><td>"+e["jvm.gc.Copy.count"].value+"</td></tr><tr><td><h5>GC Copy Time</h5></td><td>"+e["jvm.gc.Copy.time"].value+"</td></tr></table></div><div class='col-md-3'><table class='jvmTable'><caption>Threads</caption><tr><td><h5>FD Usage</h5></td><td>"+f(e["jvm.fd.usage"].value,2)+"</td></tr><tr><td><h5>Daemon Threads</h5></td><td>"+e["jvm.thread-states.daemon.count"].value+"</td></tr><tr><td><h5>Threads</h5></td><td>"+e["jvm.thread-states.count"].value+"</td></tr><tr><td><h5>Deadlocks</h5></td><td>"+e["jvm.thread-states.deadlocks"].value+"</td></tr></table><table class='jvmTable'><caption>Thread States</caption><tr><td><h5>Terminated</h5></td><td>"+e["jvm.thread-states.terminated.count"].value+"</td></tr><tr><td><h5>Timed Waiting</h5></td><td>"+e["jvm.thread-states.timed_waiting.count"].value+"</td></tr><tr><td><h5>Blocked</h5></td><td>"+e["jvm.thread-states.blocked.count"].value+"</td></tr><tr><td><h5>Waiting</h5></td><td>"+e["jvm.thread-states.waiting.count"].value+"</td></tr><tr><td><h5>Runnable</h5></td><td>"+e["jvm.thread-states.runnable.count"].value+"</td></tr><tr><td><h5>New</h5></td><td>"+e["jvm.thread-states.new.count"].value+"</td></tr></table></div></div>";d.html(g)}function H(a){var c=b("#"+a.divId),d="<div class='metricsWatcher web metricGraph col-md-12'><fieldset><legend><div class='heading1 btn-link' data-toggle='collapse' data-target='#"+a.divId+"Collapse'>"+a.title+"</div></legend><div class='webContainer col-md-12' id='"+a.divId+"Collapse'>\t<div id='"+a.divId+"Web'></div><table><tr><td colspan='4' class='requestsGraph col-md-12'></td></tr><tr><td class='activeRequestsGraph col-md-3'></td><td class='responseCodesOkGraph col-md-3'></td><td class='responseCodesCreatedGraph col-md-3'></td><td class='responseCodesOtherGraph col-md-3'></td></tr><tr><td class='responseCodesBadRequestGraph col-md-3'></td><td class='responseCodesNoContentGraph col-md-3'></td><td class='responseCodesNotFoundGraph col-md-3'></td><td class='responseCodesServerErrorGraph col-md-3'></td></tr></table></div></fieldset></div>";c.html(d),k(a.components.requestsInfo),i(a.components.activeRequestsInfo);for(var e=a.components.meters.length,f=0;f<e;f++)t(a.components.meters[f])}function I(a,b){n(a.components.requestsInfo,b),j(a.components.activeRequestsInfo,b);for(var c=a.components.meters.length,d=0;d<c;d++)v(a.components.meters[d],b)}function J(a){var c=b("#"+a.divId),d="<div class='metricsWatcher log4j metricGraph col-md-12'><fieldset><legend><div class='heading1 btn-link' data-toggle='collapse' data-target='#"+a.divId+"Collapse'>"+a.title+"</div></legend><div class='log4jContainer col-md-12' id='"+a.divId+"Collapse'>\t<div id='"+a.divId+"Log4j'></div><table><tr><td colspan='4' class='col-md-12'></td></tr><tr><td class='all col-md-3'></td><td class='fatal col-md-3'></td><td class='error col-md-3'></td><td class='warn col-md-3'></td></tr><tr><td class='info col-md-3'></td><td class='debug col-md-3'></td><td class='trace col-md-3'></td></tr></table></div></fieldset></div>";c.html(d);for(var e=a.components.meters.length,f=0;f<e;f++)t(a.components.meters[f])}function K(a,b){for(var c=a.components.meters.length,d=0;d<c;d++)v(a.components.meters[d],b)}a.addGauge=function(a,b,c,e){var f=new d(a,b,c,null,e,"gauges",null);L.push(f)},a.addMeter=function(a,b,e,f,g,h){h==c&&(h="Calls");var i=new d(a,b,e,f,g,"meters",h);i.eventType=h,L.push(i)},a.addCounter=function(a,b,c,e,f){var g=new d(a,b,c,e,f,"counters",null);L.push(g)},a.addHistogram=function(a,b,c,e,f){var g=new d(a,b,c,e||1,f,"histograms",null);L.push(g)},a.addLinkedCounter=function(a,b,c,e,f,g){var h=new d(a,b,c,null,g,"counters",null);h||(h=new d(a,b,c,null,g,"timers",null)),h.maxClassName=e,h.maxMetricName=f,h.getMax=function(a){return this.getMetricNode(this.maxClassName,this.maxMetricName,a).count},h.getMetricNode=function(a,b,c){var d=c.counters[a+"."+b]?c.counters[a+"."+b]:null;return d||(c.timers[a+"."+b]?c.timers[a+"."+b]:null)},L.push(h)},a.addTimer=function(a,b,c,d,e,f,g){var i=h(a,b,c,d,e,f,g,!1);L.push(i)},a.addCache=function(a,b,c){var e=new d(a,b,null,null,c,"caches",null);e.components={gauges:[new d(null,b,"hits",null,"Hits","gauges",null),new d(null,b,"misses",null,"Misses","gauges",null),new d(null,b,"objects",null,"Objects","gauges",null),new d(null,b,"eviction-count",null,"Eviction Count","gauges",null),new d(null,b,"in-memory-hits",null,"In Memory Hits","gauges",null),new d(null,b,"in-memory-misses",null,"In Memory Misses","gauges",null),new d(null,b,"in-memory-objects",null,"In Memory Objects","gauges",null),new d(null,b,"off-heap-hits",null,"Off Heap Hits","gauges",null),new d(null,b,"off-heap-misses",null,"Off Heap Misses","gauges",null),new d(null,b,"off-heap-objects",null,"Off Heap Objects","gauges",null),new d(null,b,"on-disk-hits",null,"On Disk Hits","gauges",null),new d(null,b,"on-disk-misses",null,"On Disk Misses","gauges",null),new d(null,b,"on-disk-objects",null,"On Disk Objects","gauges",null),new d(null,b,"mean-get-time",null,"Mean Get Time","gauges",null),new d(null,b,"mean-search-time",null,"Mean Search Time","gauges",null),new d(null,b,"searches-per-second",null,"Searches Per Sec","gauges",null),new d(null,b,"writer-queue-size",null,"Writer Queue Size","gauges",null),new d(null,b,"accuracy",null,"Accuracy","gauges",null)]},e.getTimer=h(a+"gettimer",b,"gets",5,"Get","get",1,!0),e.putTimer=h(a+"puttimer",b,"puts",5,"Put","put",1,!0),L.push(e)},a.addJvm=function(a,b,c){var e=new d(a,b,null,null,c,"jvms",null);L.push(e)},a.addWeb=function(a,b,c){var e=new d(a,b,null,null,c,"webs",null);e.components={meters:[new d(a+" td.responseCodesOkGraph",b,"responseCodes.ok",10,"OK Responses","meters",null),new d(a+" td.responseCodesBadRequestGraph",b,"responseCodes.badRequest",10,"Bad Requests","meters",null),new d(a+" td.responseCodesCreatedGraph",b,"responseCodes.created",10,"Created Responses","meters",null),new d(a+" td.responseCodesNoContentGraph",b,"responseCodes.noContent",10,"No Content Responses","meters",null),new d(a+" td.responseCodesNotFoundGraph",b,"responseCodes.notFound",10,"Not Found Responses","meters",null),new d(a+" td.responseCodesOtherGraph",b,"responseCodes.other",10,"Other Responses","meters",null),new d(a+" td.responseCodesServerErrorGraph",b,"responseCodes.serverError",10,"Server Error Responses","meters",null)],activeRequestsInfo:new d(a+" td.activeRequestsGraph",b,"activeRequests",10,"Active Requests","counters",null),requestsInfo:h(a+" td.requestsGraph",b,"requests",100,"Requests","requests",100,!0)},L.push(e)},a.addLog4j=function(a,b,c){var e=new d(a,b,null,null,c,"log4js",null);e.components={meters:[new d(a+" td.all",b,"all",100,"all","meters",null),new d(a+" td.fatal",b,"fatal",100,"fatal","meters",null),new d(a+" td.error",b,"error",100,"error","meters",null),new d(a+" td.warn",b,"warn",100,"warn","meters",null),new d(a+" td.info",b,"info",100,"info","meters",null),new d(a+" td.debug",b,"debug",100,"debug","meters",null),new d(a+" td.trace",b,"trace",100,"trace","meters",null)]},L.push(e)},a.initGraphs=function(){for(var a=0;a<L.length;a++)"gauges"==L[a].type?y(L[a]):"meters"==L[a].type?t(L[a]):"counters"==L[a].type||"linkedTimerCounters"==L[a].type?i(L[a]):"histograms"==L[a].type?r(L[a]):"timers"==L[a].type?k(L[a]):"caches"==L[a].type?D(L[a]):"jvms"==L[a].type?F(L[a]):"webs"==L[a].type?H(L[a]):"log4js"==L[a].type?J(L[a]):alert("Unknown meter info type: "+L[a].type)},a.updateGraphs=function(a){for(var b=0;b<L.length;b++)"gauges"==L[b].type?z(L[b],a):"meters"==L[b].type?v(L[b],a):"counters"==L[b].type||"linkedTimerCounters"==L[b].type?j(L[b],a):"histograms"==L[b].type?s(L[b],a):"timers"==L[b].type?n(L[b],a):"caches"==L[b].type?E(L[b],a):"jvms"==L[b].type?G(L[b],a):"webs"==L[b].type?I(L[b],a):"log4js"==L[b].type?K(L[b],a):alert("Unknown meter info type: "+L[b].type)};var L=[]}(window.metricsWatcher=window.metricsWatcher||{},jQuery);var ActiveMQ;!function(a){function b(a,c,d){if(!a)return null;var e=null;if(angular.forEach(c,function(b){a.title===b&&(e=a)}),null===e)if(d){var f=a.parent;f&&(e=b(f,c,d))}else angular.forEach(a.children,function(a){angular.forEach(c,function(b){a.title===b&&(e=a)})});return e}function c(a,c){var d=a.selection;return d?b(d,["Queues","Queue"],c):null}function d(a,b){var d=c(a,b);return d?d.children.map(function(a){return a.title}):[]}function e(a,c){var d=a.selection;return d?b(d,["Topics","Topic"],c):null}function f(a,b){var c=e(a,b);return c?c.children.map(function(a){return a.title}):[]}function g(a,b,c){c.gridOptions.selectAll(!1);var d=Core.pathGet(a,["rowIndex"]),e=Core.pathGet(a,["entity",b]);c.rowIndex=d;var f=c.gridOptions.selectedItems;f.splice(0,f.length),d>=0&&d<c.messages.length?(c.row=c.messages.find(function(a){return a[b]===e}),c.row&&f.push(c.row)):c.row=null}function h(a){a.selectRowIndex=function(b){a.rowIndex=b;var c=a.gridOptions.selectedItems;c.splice(0,c.length),b>=0&&b<a.messages.length?(a.row=a.messages[b],a.row&&c.push(a.row)):a.row=null},a.$watch("showMessageDetails",function(){a.showMessageDetails||(a.row=null,a.gridOptions.selectedItems.splice(0,a.gridOptions.selectedItems.length))})}function i(b,c,d){var e=null,f=b.selection;if(f&&a.isBroker(b,d)&&f.objectName)return f.objectName;var g=f.folderNames,h=f?f.parent:null;return f&&h&&c&&g&&g.length>1&&(e=h.objectName,!e&&h&&(e=h.parent.objectName),e||(e=g[0]+":BrokerName="+g[1]+",Type=Broker")),e}a.log=Logger.get("activemq"),a.jmxDomain="org.apache.activemq",a.getSelectionQueuesFolder=c,a.retrieveQueueNames=d,a.getSelectionTopicsFolder=e,a.retrieveTopicNames=f,a.selectCurrentMessage=g,a.decorate=h,a.getBrokerMBean=i}(ActiveMQ||(ActiveMQ={}));var StringHelpers;!function(a){function b(a){return!!angular.isString(a)&&e.test(a)}function c(a){return angular.isString(a)?a.chars().map(function(a){return"*"}).join(""):null}function d(b){if(!b)return"{ null }";var c=[];return angular.forEach(b,function(b,e){var f=b;"password"===(""+e).toLowerCase()?f=a.obfusicate(b):angular.isObject(f)&&(f=d(f)),c.push(e+": "+f)}),"{ "+c.join(", ")+" }"}var e=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:/i;a.isDate=b,a.obfusicate=c,a.toString=d}(StringHelpers||(StringHelpers={}));var Core;!function(a){function b(a){var b={scheme:"http",host:null,port:null,path:null,useProxy:!0,jolokiaUrl:null,userName:null,password:null,view:null,name:null},c=a||{};return angular.extend(b,c)}function c(a){return b(a)}a.createConnectToServerOptions=b,a.createConnectOptions=c}(Core||(Core={}));var UrlHelpers;!function(a){function b(a){return a.startsWith("#")?a.last(a.length-1):a}function c(a){return a.has("?")?a.split("?")[0]:a}function d(a,d){var e=c(a);return d.endsWith("/")&&d.startsWith("/")?e.has(d):d.startsWith("/")?b(e).startsWith(d):e.endsWith(d)}function e(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var c=[],d=a.length-1;return a.forEach(function(a,b){Core.isBlank(a)||(0!==b&&"/"===a.first(1)&&(a=a.slice(1)),b!==d&&"/"===a.last(1)&&(a=a.slice(0,a.length-1)),Core.isBlank(a)||c.push(a))}),c.join("/")}function f(a,b){if(a&&a.startsWith("proxy/"))return h.debug("Jolokia URL is proxied, applying proxy to: ",b),e("proxy",b);var c=window.location.origin;return b&&b.startsWith("http")&&!b.startsWith(c)?(h.debug("Url doesn't match page origin: ",c," applying proxy to: ",b),e("proxy",b)):(h.debug("No need to proxy: ",b),b)}function g(a){return a.startsWith("proxy")?a.replace(/:/g,"\\:"):a.replace(/:([^\/])/,"\\:$1")}var h=Logger.get("UrlHelpers");a.noHash=b,a.extractPath=c,a.contextActive=d,a.join=e,a.parseQueryString=hawtioPluginLoader.parseQueryString,a.maybeProxy=f,a.escapeColons=g}(UrlHelpers||(UrlHelpers={}));var Core;!function(a){function b(){M=null}function c(a){return a&&a.startsWith&&a.startsWith("/")&&(M||(M=$("base").attr("href")||"",M.endsWith&&M.endsWith("/")&&(M=M.substring(0,M.length-1))),M&&!a.startsWith(M))?M+a:a}function d(){return window.location}function e(){return N=[a.url("jolokia"),"/jolokia"]}function f(a,b){return a&&b&&a.startsWith(b)?a.substring(b.length):a}function g(a,b){return a&&b&&a.endsWith(b)?a.substring(0,a.length-b.length):a}function h(){var b=a.getLocalStorage();try{var c=angular.fromJson(b[a.connectionSettingsKey]);return c||{}}catch(c){return delete b[a.connectionSettingsKey],{}}}function i(b){Logger.get("Core").debug("Saving connection map: ",StringHelpers.toString(b)),localStorage[a.connectionSettingsKey]=angular.toJson(b)}function j(b,c){return void 0===c&&(c=a.getLocalStorage()),b?a.loadConnectionMap()[b]:null}function k(b){if(a.ConnectionName)return a.ConnectionName;var c=void 0;return"con"in window?(c=window.con,Logger.get("Core").debug("Found connection name from window: ",c)):(c=b.con,angular.isArray(c)&&(c=c[0]),c?(c=c.unescapeURL(),Logger.get("Core").debug("Found connection name from URL: ",c)):Logger.get("Core").debug("No connection name found, using direct connection to JVM")),a.ConnectionName=c,c}function l(a){Logger.get("Core").debug("Connect to server, options: ",StringHelpers.toString(a));var b=null;return a.jolokiaUrl&&(b=a.jolokiaUrl),null===b&&(b=a.scheme||"http",b+="://"+(a.host||"localhost"),a.port&&(b+=":"+a.port),a.path&&(b=UrlHelpers.join(b,a.path))),b=UrlHelpers.join("proxy",b),Logger.get("Core").debug("Using URL: ",b),b}function m(){var b=hawtioPluginLoader.parseQueryString();if(b.localMode)return Logger.get("Core").debug("local mode so not using jolokia URL"),N=[],null;var c=null,d=a.getConnectionNameParameter(b);if(d){var e=a.getConnectOptions(d);e?(c=l(e),Logger.get("Core").debug("Using jolokia URI: ",c," from local storage")):Logger.get("Core").debug("Connection parameter found but no stored connections under name: ",d)}if(!c){var f={username:"public",password:"biscuit"},g=q();"userDetails"in window?f=window.userDetails:"userDetails"in g&&(f=angular.fromJson(g.userDetails)),c=N.find(function(a){var b=$.ajax(a,{async:!1,username:f.username,password:f.password});return 200===b.status||401===b.status||403===b.status}),Logger.get("Core").debug("Using jolokia URI: ",c," via discovery")}return c}function n(){var a=$(window).height(),b=$("#main-nav").height(),c=a-b;$("#main").css("min-height",c+"px")}function o(){var a=!1;try{a=!!(chrome&&chrome.app&&chrome.extension)}catch(b){a=!1}return a}function p(a){if("createStyleSheet"in document)document.createStyleSheet(a);else{var b=$("<link>");$("head").append(b),b.attr({rel:"stylesheet",type:"text/css",href:a})}}function q(){return window.localStorage||function(){return O}()}function r(a){return angular.isArray(a)?a:[a]}function s(a,b){if(void 0===b&&(b=!1),!angular.isDefined(a)||!a)return b;if(a.constructor===Boolean)return a;if(angular.isString(a))switch(a.toLowerCase()){case"true":case"1":case"yes":return!0;default:return!1}if(angular.isNumber(a))return 0!==a;throw new Error("Can't convert value "+a+" to boolean")}function t(a){return angular.isNumber(a)?w(a):angular.toJson(a,!0)}function u(a){return""+a}function v(a,b){if(void 0===b&&(b="integer"),angular.isString(a))try{return parseInt(a)}catch(c){console.log("Failed to parse "+b+" with text '"+a+"'")}else if(angular.isNumber(a))return a;return null}function w(a){return""+a}function x(a,b){if(void 0===b&&(b="float"),angular.isString(a))try{return parseFloat(a)}catch(c){console.log("Failed to parse "+b+" with text '"+a+"'")}else if(angular.isNumber(a))return a;return null}function y(a,b){var c=angular.isArray(b)?b:(b||"").split("."),d=a;return angular.forEach(c,function(a){if(!d)return null;try{d=d[a]}catch(a){return null}}),d}function z(a,b,c){var d=angular.isArray(b)?b:(b||"").split("."),e=a,f=d.length-1;return angular.forEach(d,function(a,b){var d=e[a];(b>=f||!angular.isObject(d))&&(d=b<f?{}:c,e[a]=d),e=d}),e}function A(b){b.$$phase||b.$root.$$phase?setTimeout(function(){a.$apply(b)},50):b.$apply()}function B(b,c){void 0===c&&(c=50),setTimeout(function(){a.$apply(b)},c)}function C(a){a.$$phase||a.$root.$$phase||a.$apply()}function D(a){a.$$phase||a.$root.$$phase||a.$digest()}function E(a,b){var c=a;return angular.forEach(b,function(a){if(c){var b=$(c).children(a);b&&b.length||($("<"+a+"></"+a+">").appendTo(c),b=$(c).children(a)),c=b}}),c}function F(a){return angular.forEach(P,function(b,c){var d=new RegExp(b,"g");a=a.replace(d,c)}),a=a.replace(/&gt;/g,">")}function G(a){if(angular.isString(a)){for(var b="",c=0;c<a.length;c++){var d=a.charAt(c),d=P[d]||d;b+=d}return b}return a}function H(a){return void 0===a||null===a||!!angular.isString(a)&&a.isBlank()}function I(a,b,c){void 0===c&&(c=null),null===c&&(c={}),"error"!==a&&"warning"!==a||angular.isDefined(c.onclick)||(c.onclick=window.showLogPanel),toastr[a](b,"",c)}function J(){toastr.clear()}function K(a){if(a){for(;a.endsWith('"')||a.endsWith("'");)a=a.substring(0,a.length-1);for(;a.startsWith('"')||a.startsWith("'");)a=a.substring(1,a.length)}return a}function L(a){if(a){var b=a+"";try{b=b.underscore()}catch(a){}try{b=b.humanize()}catch(a){}return K(b)}return a}a.injector=null;var M=null;a.connectionSettingsKey="jvmConnect",a._resetUrlPrefix=b,a.url=c,a.windowLocation=d,String.prototype.unescapeHTML=function(){var a=document.createElement("textarea");return a.innerHTML=this,a.value},Object.keys||(console.debug("Creating hawt.io version of Object.keys()"),Object.keys=function(a){var b,c=[];for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&c.push(b);return c}),a._resetJolokiaUrls=e;var N=a._resetJolokiaUrls();a.trimLeading=f,a.trimTrailing=g,a.loadConnectionMap=h,a.saveConnectionMap=i,a.getConnectOptions=j,a.ConnectionName=null,a.getConnectionNameParameter=k,a.createServerConnectionUrl=l,a.getJolokiaUrl=m,a.adjustHeight=n,a.isChromeApp=o,a.addCSS=p;var O={};a.getLocalStorage=q,a.asArray=r,a.parseBooleanValue=s,a.toString=t,a.booleanToString=u,a.parseIntValue=v,a.numberToString=w,a.parseFloatValue=x,a.pathGet=y,a.pathSet=z,a.$applyNowOrLater=A,a.$applyLater=B,a.$apply=C,a.$digest=D,a.getOrCreateElements=E;var P={"#":"&#35;","'":"&#39;","<":"&lt;",">":"&gt;",'"':"&quot;"};a.unescapeHtml=F,a.escapeHtml=G,a.isBlank=H,a.notification=I,a.clearNotifications=J,a.trimQuotes=K,a.humanizeValue=L}(Core||(Core={}));var ControllerHelpers;!function(a){function b(a){return function(b,c){return b===c&&b in a?a[b]:""}}function c(a){return function(b){return b in a?a[b]:""}}function d(a,b,c,d,e,f,g){function h(){return j(b.search()[d]||e)}c in a||(a[c]=e);var i=f||Core.doNothing,j=g||Core.doNothing,k=h();Core.pathSet(a,c,k),a.$watch(c,function(a,c){a!==c&&(void 0!==a&&null!==a?b.search(d,i(a)):b.search(d,""))})}function e(a,b,c,d){void 0===d&&(d=["nid"]);var e=angular.copy(c.search());b.$on("$routeUpdate",function(){var b=c.search(),f=[];angular.forEach(d,function(a){b[a]!==e[a]&&f.push(a)}),f.length&&a.reload()})}Logger.get("ControllerHelpers");a.createClassSelector=b,a.createValueClassSelector=c,a.bindModelToSearchParam=d,a.reloadWhenParametersChange=e}(ControllerHelpers||(ControllerHelpers={}));var UI;!function(a){a.colors=["#5484ED","#A4BDFC","#46D6DB","#7AE7BF","#51B749","#FBD75B","#FFB878","#FF887C","#DC2127","#DBADFF","#E1E1E1"]}(UI||(UI={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},Core;!function(a){var b=function(){function a(a){this.title=a,this.key=null,this.typeName=null,this.children=[],this.folderNames=[],this.domain=null,this.objectName=null,this.map={},this.entries={},this.addClass=null,this.parent=null,this.isLazy=!1,this.icon=null,this.tooltip=null,this.entity=null,this.version=null,this.mbean=null,this.expand=!1,this.addClass=escapeTreeCssStyles(a)}return a.prototype.get=function(a){return this.map[a]},a.prototype.isFolder=function(){return this.children.length>0},a.prototype.navigate=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var c=this;return a.forEach(function(a){c&&(c=c.get(a))}),c},a.prototype.hasEntry=function(a,b){var c=this.entries;if(c){var d=c[a];return d&&b===d}return!1},a.prototype.parentHasEntry=function(a,b){return!!this.parent&&this.parent.hasEntry(a,b)},a.prototype.ancestorHasEntry=function(a,b){for(var c=this.parent;c;){if(c.hasEntry(a,b))return!0;c=c.parent}return!1},a.prototype.ancestorHasType=function(a){for(var b=this.parent;b;){if(a===b.typeName)return!0;b=b.parent}return!1},a.prototype.getOrElse=function(b,c){void 0===c&&(c=new a(b));var d=this.map[b];return d||(d=c,this.map[b]=d,this.children.push(d),d.parent=this),d},a.prototype.sortChildren=function(a){var b=this.children;b&&(this.children=b.sortBy("title"),a&&angular.forEach(b,function(b){return b.sortChildren(a)}))},a.prototype.moveChild=function(a){a&&a.parent!==this&&(a.detach(),a.parent=this,this.children.push(a))},a.prototype.insertBefore=function(a,b){a.detach(),a.parent=this;var c=_.indexOf(this.children,b);c>=0&&this.children.splice(c,0,a)},a.prototype.insertAfter=function(a,b){a.detach(),a.parent=this;var c=_.indexOf(this.children,b);c>=0&&this.children.splice(c+1,0,a)},a.prototype.detach=function(){var a=this.parent;if(a){var b=a.children;if(b){var c=b.indexOf(this);c<0?a.children=a.children.remove({key:this.key}):b.splice(c,1)}this.parent=null}},a.prototype.findDescendant=function(a){if(a(this))return this;var b=null;return angular.forEach(this.children,function(c){b||(b=c.findDescendant(a))}),b},a.prototype.findAncestor=function(a){return a(this)?this:null!=this.parent?this.parent.findAncestor(a):null},a}();a.Folder=b}(Core||(Core={}));var Folder=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(Core.Folder),Core;!function(a){var b=Logger.get("Core"),c=function(){function a(){this.tasks={},this.tasksExecuted=!1,this._onComplete=null}return a.prototype.addTask=function(a,b){this.tasks[a]=b,this.tasksExecuted&&this.executeTask(a,b)},a.prototype.executeTask=function(a,c){if(angular.isFunction(c)){b.debug("Executing task : ",a);try{c()}catch(c){b.debug("Failed to execute task: ",a," error: ",c)}}},a.prototype.onComplete=function(a){this._onComplete=a},a.prototype.execute=function(){var a=this;this.tasksExecuted||(angular.forEach(this.tasks,function(b,c){a.executeTask(c,b)}),this.tasksExecuted=!0,angular.isFunction(this._onComplete)&&this._onComplete())},a.prototype.reset=function(){this.tasksExecuted=!1},a}();a.TasksImpl=c;var d=function(a){function c(){var b=this;a.call(this),this.tasks={},this.onComplete(function(){b.reset()})}return __extends(c,a),c.prototype.addTask=function(a,b){this.tasks[a]=b},c.prototype.execute=function(){for(var a=this,c=[],d=0;d<arguments.length;d++)c[d-0]=arguments[d];if(!this.tasksExecuted){var e=c;Object.keys(this.tasks).forEach(function(c){var d=a.tasks[c];if(angular.isFunction(d)){b.debug("Executing task: ",c," with parameters: ",e);try{d.apply(d,e)}catch(a){b.debug("Failed to execute task: ",c," error: ",a)}}}),this.tasksExecuted=!0,angular.isFunction(this._onComplete)&&this._onComplete()}},c}(c);a.ParameterizedTasksImpl=d;var e=function(a){function c(){a.apply(this,arguments)}return __extends(c,a),c.prototype.executeConditionalTask=function(a,c){if(angular.isFunction(c)){b.debug("Executing task : ",a);try{return c()}catch(c){return b.debug("Failed to execute conditional task: ",a," error: ",c),!1}}},c.prototype.execute=function(){var a=this;if(!this.tasksExecuted){var b=!0;angular.forEach(this.tasks,function(c,d){b=b&&a.executeConditionalTask(d,c)}),this.tasksExecuted=!0,angular.isFunction(this._onComplete)&&b&&this._onComplete()}},c}(c);a.ConditionalTasksImpl=e,a.postLoginTasks=new a.TasksImpl,a.preLogoutTasks=new a.TasksImpl,a.postLogoutTasks=new a.ConditionalTasksImpl}(Core||(Core={}));var Core;!function(a){function b(a,b){return b&&0!==b.length?a+"("+b.map(function(a){return angular.isString(a)&&(a=angular.fromJson(a)),a.type}).join(",")+")":a+"()"}a.operationToString=b}(Core||(Core={}));var Jmx;!function(a){function b(a,b){var c=a.jmxTreeLazyLoadRegistry[b.domain],d=null;return c&&c.length&&angular.forEach(c,function(a){d||(d=a(b))}),d}function c(a,b){Core.lazyLoaders||(Core.lazyLoaders={});var c=Core.lazyLoaders[a];c||(c=[],Core.lazyLoaders[a]=c),c.push(b)}function d(a,b){if(Core.lazyLoaders){var c=Core.lazyLoaders[a];c&&c.remove(b)}}function e(a,b,c){var d=l[b];d||(d=[],l[b]=d),d.push(c)}function f(a,b){void 0===b&&(b="app/jmx/html/attributeToolBar.html");var c=null,d=a?a.domain:null;if(d){var e=l[d];if(e)for(var f in e){var g=e[f];if(c=g(a))break}}return c||b}function g(a,b,c){void 0===c&&(c=!1),h(a,b,null,c)}function h(a,b,c,d){void 0===d&&(d=!1);var e=b.dynatree("getTree");if(e){var f=null,g=a.search().nid;if(g)try{f=e.activateKey(g)}catch(a){}if(f)f.expand(!0);else if(!b.dynatree("getActiveNode")){var h=b.dynatree("getRoot"),i=h?h.getChildren():null;if(i&&i.length){var j=i[0];if(j.expand(!0),c){var k=c(j);k&&(j=k)}d&&(j.expand(),j.activate())}}}}function i(a){var b={};return angular.forEach(a,function(a){var c=a.typeName;c&&(b[c]=a)}),Object.keys(b)}function j(a){var b={"<":"&lt;",">":"&gt;"};if(!angular.isString(a))return a;for(var c="",d=0;d<a.length;d++){var e=a.charAt(d);c+=b[e]||e}return c}function k(b,c,d,e,f,g,h){void 0===g&&(g=!1),void 0===h&&(h=null),e.length&&(h||(h=function(a){var c=a.data;d.updateSelectionNode(c),Core.$apply(b)}),d.treeElement=e,e.dynatree({onActivate:h,onLazyRead:function(b){var c=b.data,e=null;if(c&&(e=a.findLazyLoadingFunction(d,c)),e){console.log("Lazy loading folder "+c.title);var f=c.children;e(d,c,function(){b.setLazyNodeStatus(DTNodeStatus_Ok);var a=c.children;a!==f&&(b.removeChildren(),angular.forEach(a,function(a){b.addChild(a)}))})}else b.setLazyNodeStatus(DTNodeStatus_Ok)},onExpand:function(a,b){if(b.data.expand=a,b.data.isFolder()){var c=b.data.children[0].parent;c&&(c.expand=a)}},onClick:function(a,b){if(b.metaKey){b.preventDefault();var d=c.absUrl();if(a&&a.data){var e=a.data.key;if(e){var f=c.search();f.nid=e;var g=d.indexOf("?");g<=0?d+="?":d=d.substring(0,g+1),d+=$.param(f)}}return window.open(d,"_blank"),window.focus(),!1}return!0},persist:!1,debugLevel:0,children:f}),g&&d.redrawTree())}a.log=Logger.get("JMX");var l={};a.findLazyLoadingFunction=b,a.registerLazyLoadHandler=c,a.unregisterLazyLoadHandler=d,a.addAttributeToolBar=e,a.getAttributeToolBar=f,a.updateTreeSelectionFromURL=g,a.updateTreeSelectionFromURLAndAutoSelect=h,a.getUniqueTypeNames=i,a.escapeTagOnly=j,a.enableTree=k}(Jmx||(Jmx={}));var Core;!function(a){var b=Logger.get("Core"),c=function(){function c(b,c,d,e,f,g,h,i,j){this.jolokia=b,this.jolokiaStatus=c,this.jmxTreeLazyLoadRegistry=d,this.$location=e,this.$compile=f,this.$templateCache=g,this.localStorage=h,this.$rootScope=i,this.userDetails=j,this.operationCounter=0,this.tree=new a.Folder("MBeans"),this.mbeanTypesToDomain={},this.mbeanServicesToDomain={},this.attributeColumnDefs={},this.onClickRowHandlers={},this.treePostProcessors=[],this.topLevelTabs=[],this.subLevelTabs=[],this.keyToNodeMap={},this.pluginRegisterHandle=null,this.pluginUpdateCounter=null,this.treeWatchRegisterHandle=null,this.treeWatcherCounter=null,this.treeElement=null,this.mapData={},"autoRefresh"in h||(h.autoRefresh=!0),"updateRate"in h||(h.updateRate=5e3)}return c.prototype.createChildWorkspace=function(a){var b=new c(this.jolokia,this.jolokiaStatus,this.jmxTreeLazyLoadRegistry,this.$location,this.$compile,this.$templateCache,this.localStorage,this.$rootScope,this.userDetails);return angular.forEach(this,function(a,c){return b[c]=a}),b.$location=a,b},c.prototype.getLocalStorage=function(a){return this.localStorage[a]},c.prototype.setLocalStorage=function(a,b){this.localStorage[a]=b},c.prototype.jolokiaList=function(b,c){if(this.jolokiaStatus.listMethod!=a.LIST_WITH_RBAC)return this.jolokia.list(null,onSuccess(b,c));c.maxDepth=9;var d=this.jolokia.execute(this.jolokiaStatus.listMBean,"list()",onSuccess(b,c));return d?this.unwindResponseWithRBACCache(d):void 0},c.prototype.loadTree=function(){var a={ignoreErrors:!0},b=this.jolokiaList(null,a);b&&(this.jolokiaStatus.xhr=null),this.populateTree({value:b})},c.prototype.addTreePostProcessor=function(a,b,c){void 0===b&&(b=0),void 0===c&&(c="unnamed");var d={processor:a,priority:b,name:c};this.treePostProcessors.push(d);var e=this.tree;e&&a(e)},c.prototype.removeTreePostProcessors=function(a){this.treePostProcessors.remove(function(b){return b.name==a})},c.prototype.maybeMonitorPlugins=function(){this.treeContainsDomainAndProperties("hawtio",{type:"Registry"})?null===this.pluginRegisterHandle&&(this.pluginRegisterHandle=this.jolokia.register(angular.bind(this,this.maybeUpdatePlugins),{type:"read",mbean:"hawtio:type=Registry",attribute:"UpdateCounter"
})):null!==this.pluginRegisterHandle&&(this.jolokia.unregister(this.pluginRegisterHandle),this.pluginRegisterHandle=null,this.pluginUpdateCounter=null),this.treeContainsDomainAndProperties("hawtio",{type:"TreeWatcher"})&&null===this.treeWatchRegisterHandle&&(this.treeWatchRegisterHandle=this.jolokia.register(angular.bind(this,this.maybeReloadTree),{type:"read",mbean:"hawtio:type=TreeWatcher",attribute:"Counter"}))},c.prototype.maybeUpdatePlugins=function(b){if(null===this.pluginUpdateCounter)return void(this.pluginUpdateCounter=b.value);this.pluginUpdateCounter!==b.value&&a.parseBooleanValue(localStorage.autoRefresh)&&window.location.reload()},c.prototype.maybeReloadTree=function(a){function b(a){var b={value:d.unwindResponseWithRBACCache(a)};d.populateTree(b)}var c=a.value;if(null===this.treeWatcherCounter)return void(this.treeWatcherCounter=c);if(this.treeWatcherCounter!==c){this.treeWatcherCounter=c;var d=this;this.jolokiaList(b,{ignoreErrors:!0,maxDepth:8})}},c.prototype.unwindResponseWithRBACCache=function(a){if(a.domains&&a.cache){for(var b in a.domains){var c=(escapeDots(b),a.domains[b]);for(var d in c)angular.isString(c[d])&&(c[d]=a.cache[""+c[d]])}return a.domains}return a},c.prototype.folderGetOrElse=function(a,c){if(a)try{return a.getOrElse(c)}catch(d){b.warn("Failed to find value "+c+" on folder "+a)}return null},c.prototype.populateTree=function(c){b.debug("JMX tree has been loaded, data: ",c.value);var d="root",e="-";this.mbeanTypesToDomain={},this.mbeanServicesToDomain={},this.keyToNodeMap={};var f=new a.Folder("MBeans");f.key=d;var g=c.value;for(var h in g){var i=escapeDots(h),j=g[h];h=Jmx.escapeTagOnly(h);for(var k in j){b.debug("JMX tree mbean name: "+k);var l={},m=this.folderGetOrElse(f,h);m.domain=h,m.key||(m.key=d+e+h);var n=[h];m.folderNames=n,n=n.clone();var o=k.split(","),p=[],q=null,r=null;o.forEach(function(a){var b=a.indexOf("="),c=[];b>0?(c[0]=a.substr(0,b),c[1]=a.substr(b+1)):c[0]=a;var d=c[0],e=Jmx.escapeTagOnly(c[1]||d);l[d]=e;var f=!1,g=d.toLowerCase();"type"===g&&(q=e,m.map[e]&&(f=!0)),"service"===g&&(r=e),f?p.splice(0,0,e):p.push(e)});var s=function(a,b){a.domain=h,a.key||(a.key=d+e+n.join(e)),this.keyToNodeMap[a.key]=a,a.folderNames=n.clone();var c="",f=a.entries,g=Object.keys(f).filter(function(a){return a.toLowerCase().indexOf("type")>=0});if(g.length)angular.forEach(g,function(b){var d=f[b];a.ancestorHasEntry(b,d)||(c+=" "+i+e+d)});else{var j=n.last();j===b&&(j+="-folder"),j&&(c+=" "+i+e+j)}return a.addClass=escapeTreeCssStyles(c),a},t=p.pop(),u=this;p.forEach(function(a){(m=u.folderGetOrElse(m,a))&&(n.push(a),angular.bind(u,s,m,a)())});var v=d+e+n.join(e)+e+t,w=h+":"+k;if(m){if(m=this.folderGetOrElse(m,t)){m.entries=l,m.key=v,angular.bind(this,s,m,t)(),m.title=a.trimQuotes(t),m.objectName=w,m.mbean=j[k],m.typeName=q;var x=function(a,b){var c=a[b];c||(c={},a[b]=c);var d=c[h];if(d){var e=null;angular.isArray(d)?e=d:(e=[d],c[h]=e),e.push(m)}else c[h]=m};r&&angular.bind(this,x,this.mbeanServicesToDomain,r)(),q&&angular.bind(this,x,this.mbeanTypesToDomain,q)()}}else b.info("No folder found for lastPath: "+t)}}f.sortChildren(!0),this.enableLazyLoading(f),this.tree=f;var y=this.treePostProcessors.clone();y.sort(function(a,b){return a.priority-b.priority}),angular.forEach(y,function(a){return a.processor(f)}),this.maybeMonitorPlugins();var z=this.$rootScope;z&&z.$broadcast("jmxTreeUpdated")},c.prototype.enableLazyLoading=function(a){var b=this,c=a.children;if(c&&c.length)angular.forEach(c,function(a){b.enableLazyLoading(a)});else{Jmx.findLazyLoadingFunction(this,a)&&(a.isLazy=!0)}},c.prototype.hash=function(){var b=this.$location.search(),c=a.hashToString(b);return c?"?"+c:""},c.prototype.getActiveTab=function(){var a=this;return this.topLevelTabs.find(function(b){return angular.isDefined(b.isActive)?b.isActive(a):a.isLinkActive(b.href())})},c.prototype.getStrippedPathName=function(){var b=a.trimLeading(this.$location.path()||"/","#");return b=a.trimLeading(b,"/")},c.prototype.linkContains=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];var c=this.getStrippedPathName();return a.all(function(a){return c.has(a)})},c.prototype.isLinkActive=function(b){var c=this.getStrippedPathName(),d=a.trimLeading(b,"#");d=a.trimLeading(d,"/");var e=d.indexOf("?");return e>=0&&(d=d.substring(0,e)),c.length?c.startsWith(d):d===c},c.prototype.isLinkPrefixActive=function(b){var c=this.getStrippedPathName(),d=a.trimLeading(b,"#");d=a.trimLeading(d,"/");var e=d.indexOf("?");return e>=0&&(d=d.substring(0,e)),c.startsWith(d)},c.prototype.isTopTabActive=function(a){var b=this.$location.search().tab;return angular.isString(b)?b.startsWith(a):this.isLinkActive(a)},c.prototype.getSelectedMBeanName=function(){var a=this.selection;return a?a.objectName:null},c.prototype.validSelection=function(a){var c=this,d=function(b){var c=b.href;if(c){var d=c();if(d)return d.startsWith("#/")&&(d=d.substring(2)),d===a}return!1},e=this.subLevelTabs.find(d);if(e||(e=this.topLevelTabs.find(d)),e){var f=e.isValid;return!angular.isDefined(f)||f(c)}return b.info("Could not find tab for "+a),!1},c.prototype.removeAndSelectParentNode=function(){var a=this.selection;if(a){var b=a.parent;if(b){var c=b.children.indexOf(a);c<0&&(c=b.children.findIndex(function(b){return b.key===a.key})),c>=0&&b.children.splice(c,1),this.updateSelectionNode(b)}}},c.prototype.selectParentNode=function(){var a=this.selection;if(a){var b=a.parent;b&&this.updateSelectionNode(b)}},c.prototype.selectionViewConfigKey=function(){return this.selectionConfigKey("view/")},c.prototype.selectionConfigKey=function(a){void 0===a&&(a="");var b=null,c=this.selection;if(c){b=a+c.domain;var d=c.typeName;d||(d=c.title),b+="/"+d,c.isFolder()&&(b+="/folder")}return b},c.prototype.moveIfViewInvalid=function(){var c=this,d=a.trimLeading(this.$location.path(),"/");if(this.selection){var e=this.selectionViewConfigKey();if(this.validSelection(d))return this.setLocalStorage(e,d),!1;b.info("the uri '"+d+"' is not valid for this selection");var f=this.getLocalStorage(e);return f&&this.validSelection(f)||(f=null,angular.forEach(this.subLevelTabs,function(a){var b=a.isValid;!f&&a.href&&angular.isDefined(b)&&b(c)&&(f=a.href())})),f||(f="#/jmx/help"),b.info("moving the URL to be "+f),f.startsWith("#")&&(f=f.substring(1)),this.$location.path(f),!0}return!1},c.prototype.updateSelectionNode=function(a){var b=this.selection;this.selection=a;var c=null;a&&(c=a.key);var d=this.$location,e=d.search();if(c&&(e.nid=c),d.search(e),b&&(c=this.selectionViewConfigKey())){var f=this.getLocalStorage(c);f&&this.$location.path(f)}},c.prototype.redrawTree=function(){var a=this.treeElement;if(a&&angular.isDefined(a.dynatree)&&angular.isFunction(a.dynatree)){var b=a.dynatree("getTree");if(angular.isDefined(b))try{b.reload()}catch(a){}}},c.prototype.expandSelection=function(a){var b=this.treeElement;if(b&&angular.isDefined(b.dynatree)&&angular.isFunction(b.dynatree)){var c=b.dynatree("getActiveNode");angular.isDefined(c)&&c.expand(a)}},c.prototype.matchesProperties=function(a,b){if(!a)return!1;for(var c in b){var d=b[c];if(!d||a[c]!==d)return!1}return!0},c.prototype.hasInvokeRightsForName=function(c){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];var f=!0;if(c){var g=a.parseMBean(c);if(g){var h=this.findMBeanWithProperties(g.domain,g.attributes);if(h)return this.hasInvokeRights.apply(this,[h].concat(d));b.debug("Failed to find mbean folder with name "+c)}else b.debug("Failed to parse mbean name "+c)}return f},c.prototype.hasInvokeRights=function(a){for(var c=this,d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];var f=!0;if(a){var g=a,h=g.mbean;if(h&&(angular.isDefined(h.canInvoke)&&(f=h.canInvoke),f&&d&&d.length>0)){var i=h.opByString,j=h.op;i&&j&&d.forEach(function(a){if(f){var d=null;if(!(d=a.endsWith(")")?i[a]:j[a]))return void b.debug("Could not find method:",a," to check permissions, skipping");f=c.resolveCanInvoke(d)}})}}return f},c.prototype.resolveCanInvoke=function(a){if(!angular.isArray(a))return!angular.isDefined(a.canInvoke)||a.canInvoke;var b=a.find(function(a){return angular.isDefined(a.canInvoke)&&!a.canInvoke});return!angular.isDefined(b)},c.prototype.treeContainsDomainAndProperties=function(a,b){var c=this;void 0===b&&(b=null);var d=this,e=d.tree;if(e){var f=e.get(a);if(f){if(b){var g=f.children||[],h=function(d){return!!c.matchesProperties(d.entries,b)||!!(d.domain===a&&d.children&&d.children.length>0)&&d.children.some(h)};return g.some(h)}return!0}}return!1},c.prototype.matches=function(a,b,c){if(a){var d=a.entries;if(b){if(!d)return!1;for(var e in b){var f=b[e];if(!f||d[e]!==f)return!1}}return!c||d&&Object.keys(d).length===c}return!1},c.prototype.hasDomainAndProperties=function(a,b,c){void 0===b&&(b=null),void 0===c&&(c=null);var d=this.selection;return!!d&&(this.matches(d,b,c)&&d.domain===a)},c.prototype.findMBeanWithProperties=function(a,b,c){void 0===b&&(b=null),void 0===c&&(c=null);var d=this.tree;return d?this.findChildMBeanWithProperties(d.get(a),b,c):null},c.prototype.findChildMBeanWithProperties=function(a,b,c){var d=this;void 0===b&&(b=null),void 0===c&&(c=null);var e=this;if(a){var f=a.children;if(f){var g=f.find(function(a){return d.matches(a,b,c)});return g||f.map(function(a){return e.findChildMBeanWithProperties(a,b,c)}).find(function(a){return a})}}return null},c.prototype.selectionHasDomainAndLastFolderName=function(a,b){function c(a){return(a||"").toLowerCase()===d}var d=(b||"").toLowerCase(),e=this.selection;if(e&&a===e.domain){var f=e.folderNames;if(f){return(c(f.last())||c(e.title))&&e.isFolder()&&!e.objectName}}return!1},c.prototype.selectionHasDomain=function(a){var b=this.selection;return!!b&&a===b.domain},c.prototype.selectionHasDomainAndType=function(a,b){var c=this.selection;return!!c&&(a===c.domain&&b===c.typeName)},c.prototype.hasMBeans=function(){var a=!1,b=this.tree;if(b){var c=b.children;angular.isArray(c)&&c.length>0&&(a=!0)}return a},c.prototype.hasFabricMBean=function(){return this.hasDomainAndProperties("io.fabric8",{type:"Fabric"})},c.prototype.isFabricFolder=function(){return this.hasDomainAndProperties("io.fabric8")},c.prototype.isCamelContext=function(a){return this.hasDomainAndProperties(a,{type:"context"})},c.prototype.isCamelFolder=function(a){return this.hasDomainAndProperties(a)},c.prototype.isComponentsFolder=function(a){return this.selectionHasDomainAndLastFolderName(a,"components")},c.prototype.isComponent=function(a){return this.hasDomainAndProperties(a,{type:"components"})},c.prototype.isEndpointsFolder=function(a){return this.selectionHasDomainAndLastFolderName(a,"endpoints")},c.prototype.isEndpoint=function(a){return this.hasDomainAndProperties(a,{type:"endpoints"})},c.prototype.isDataFormatsFolder=function(a){return this.selectionHasDomainAndLastFolderName(a,"dataformats")},c.prototype.isDataFormat=function(a){return this.hasDomainAndProperties(a,{type:"dataformats"})},c.prototype.isRoutesFolder=function(a){return this.selectionHasDomainAndLastFolderName(a,"routes")},c.prototype.isRoute=function(a){return this.hasDomainAndProperties(a,{type:"routes"})},c.prototype.isOsgiFolder=function(){return this.hasDomainAndProperties("osgi.core")},c.prototype.isKarafFolder=function(){return this.hasDomainAndProperties("org.apache.karaf")},c.prototype.isOsgiCompendiumFolder=function(){return this.hasDomainAndProperties("osgi.compendium")},c}();a.Workspace=c}(Core||(Core={}));var Workspace=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(Core.Workspace),Core;!function(a){a.log=Logger.get("Core"),a.lazyLoaders={}}(Core||(Core={}));var numberTypeNames={byte:!0,short:!0,int:!0,long:!0,float:!0,double:!0,"java.lang.byte":!0,"java.lang.short":!0,"java.lang.integer":!0,"java.lang.long":!0,"java.lang.float":!0,"java.lang.double":!0},Core;!function(a){function b(b){return a.isBlank(b)?b:b.startsWith("#")?b.substring(1):b}function c(a){var b={},c=a.split(":");if(c.length>1){b.domain=c.first(),c=c.exclude(c.first()),c=c.join(":"),b.attributes={};c.split(",").forEach(function(a){var c=a.split("="),d=c.first().trim();c=c.exclude(c.first()),b.attributes[d]=c.join("=").trim()})}return b}function d(){a.log.debug("Executing post login tasks"),a.postLoginTasks.execute()}function e(b){a.log.debug("Executing pre logout tasks"),a.preLogoutTasks.onComplete(b),a.preLogoutTasks.execute()}function f(b){a.log.debug("Executing post logout tasks"),a.postLogoutTasks.onComplete(b),a.postLogoutTasks.execute()}function g(b,c){var d=b.request({type:"list",path:escapeMBeanPath(c.listMBean)},{});d&&200==d.status&&d.value&&angular.isObject(d.value.op)?c.listMethod=a.LIST_WITH_RBAC:c.listMethod=a.LIST_CANT_DETERMINE}function h(b,c,d,e,f,g){if(void 0===f&&(f=null),void 0===g&&(g=null),b){a.executePreLogoutTasks(function(){$.ajax("auth/logout/",{type:"POST",success:function(){if(d.jvmConnect&&"undefined"!=d.jvmConnect){var b=angular.fromJson(d.jvmConnect);_.each(b,function(a){delete a.userName,delete a.password}),d.setItem("jvmConnect",angular.toJson(b))}d.removeItem("activemqUserName"),d.removeItem("activemqPassword"),a.executePostLogoutTasks(function(){a.log.debug("Executing logout callback after successfully executed postLogoutTasks"),c.username=null,c.password=null,c.loginDetails=null,c.rememberMe=!1,c.remoteJolokiaUserDetails=null,delete d.userDetails,f&&angular.isFunction(f)&&f(),a.$apply(e)})},error:function(b,f,h){if(d.jvmConnect&&"undefined"!=d.jvmConnect){var i=angular.fromJson(d.jvmConnect);_.each(i,function(a){delete a.userName,delete a.password}),d.setItem("jvmConnect",angular.toJson(i))}d.removeItem("activemqUserName"),d.removeItem("activemqPassword"),a.executePostLogoutTasks(function(){switch(c.username=null,c.password=null,c.loginDetails=null,c.rememberMe=!1,c.remoteJolokiaUserDetails=null,delete d.userDetails,b.status){case 401:case 403:a.log.debug("Failed to log out, ",h);break;case 0:break;default:a.log.debug("Failed to log out, ",h)}g&&angular.isFunction(g)&&g(),a.$apply(e)})}})})}}function i(b,c,d){void 0===d&&(d=null);var e=angular.copy(b.search());d&&angular.forEach(d,function(a){return delete e[a]});var f=a.hashToString(e);if(f){c+=(c.indexOf("?")>=0?"&":"?")+f}return c}function j(a){var b=[];return angular.forEach(a,function(a,c){b.push(c+"="+encodeURIComponent(a))}),b.join("&")}function k(a){var b={};if(a){var c=decodeURI(a),d=c.split("&");angular.forEach(d,function(a){var c=a.split("="),d=c[0],e=c[1]||d;b[d]=e})}return b}function l(b,c,arguments,d,e){var f={responseJson:"",success:function(a){var b=angular.toJson(a.value);f.responseJson!==b&&(f.responseJson=b,d(a))}};return angular.extend(f,e),a.register(b,c,arguments,onSuccess(void 0,f))}function m(a){return a in localStorage||(localStorage[a]=angular.toJson({})),angular.fromJson(localStorage[a])}function n(arguments){return StringHelpers.toString(arguments)}function o(b){if(!("type"in b))return null;var c=b.type;switch(c.toLowerCase()){case"exec":c+=":"+b.mbean+":"+b.operation;var d=n(b.arguments);a.isBlank(d)||(c+=":"+d);break;case"read":c+=":"+b.mbean+":"+b.attribute;break;default:return null}return c}function p(arguments){return angular.isArray(arguments)?arguments.map(function(a){return o(a)}).join(":"):o(arguments)}function q(){return null===va&&(va={},a.log.debug("Created response history",va)),va}function r(a){var b=null,c=null;return angular.forEach(a,function(a,d){a&&a.timestamp?(null===b||a.timestamp<b)&&(b=a.timestamp,c=d):(b=0,c=d)}),c}function s(arguments,b){var c=q(),d=p(arguments);if(null===d)return void a.log.debug("key for arguments is null, not caching: ",StringHelpers.toString(arguments));var e=Object.extended(c).keys();if(e.length>=a.MAX_RESPONSE_CACHE_SIZE){a.log.debug("Cache limit (",a.MAX_RESPONSE_CACHE_SIZE,") met or  exceeded (",e.length,"), trimming oldest response");var f=r(c);null!==f?(a.log.debug("Deleting key: ",f),delete c[f]):(a.log.debug("Got null key, could be a cache problem, wiping cache"),e.forEach(function(b){a.log.debug("Deleting key: ",b),delete c[b]}))}c[d]=b}function t(b,arguments,c){var d=q(),e=p(arguments);if(null===e)return void b.request(arguments,c);if(e in d&&"success"in c){var f=d[e];setTimeout(function(){c.success(f)},10)}else a.log.debug("Unable to find existing response for key: ",e),b.request(arguments,c)}function u(a,b,arguments,c){if(!b.$$destroyed){angular.isDefined(b.$jhandle)&&angular.isArray(b.$jhandle)||(b.$jhandle=[]),angular.isDefined(b.$on)&&b.$on("$destroy",function(c){v(a,b)});var d=null;if("success"in c){var e=c.success,f=arguments;c.success=function(a){s(f,a),e(a)}}if(angular.isArray(arguments)){if(arguments.length>=1){var f=[c];angular.forEach(arguments,function(a){return f.push(a)});var g=a.register;d=g.apply(a,f),b.$jhandle.push(d),t(a,arguments,c)}}else d=a.register(c,arguments),b.$jhandle.push(d),t(a,arguments,c);return function(){null!==d&&(b.$jhandle.remove(d),a.unregister(d))}}}function v(a,b){angular.isDefined(b.$jhandle)&&(b.$jhandle.forEach(function(b){a.unregister(b)}),delete b.$jhandle)}function w(b,c){void 0===c&&(c={});var d=a.pathGet(b,["request","operation"])||"unknown",e=c.silent;b.stacktrace;e||x(b)?a.log.debug("Operation ",d," failed due to: ",b.error):a.log.warn("Operation ",d," failed due to: ",b.error)}function x(a){var b=function(a){return a.indexOf("InstanceNotFoundException")>=0||a.indexOf("AttributeNotFoundException")>=0||a.indexOf("IllegalArgumentException: No operation")>=0};return a.stacktrace&&b(a.stacktrace)||a.error&&b(a.error)}function y(b){if(b.stacktrace){var c=a.pathGet(b,["request","operation"])||"unknown";a.log.info("Operation ",c," failed due to: ",b.error)}}function z(a){try{return(new XMLSerializer).serializeToString(a)}catch(b){try{return a.xml}catch(a){console.log("WARNING: XMLSerializer not supported")}}return!1}function A(a){return a&&3===a.nodeType}function B(a,b){void 0===b&&(b="");var c=b;if(a){var d=a.lastIndexOf(".");d>0&&(c=a.substring(d+1,a.length).toLowerCase())}return c}function C(){var a=new Date,b=1e3*a.getTime()+a.getUTCMilliseconds(),c=Math.floor(65536*(1+Math.random()));return b.toString(16)+c.toString(16)}function D(a){if(a){var b=a.match(wa);if(b&&b.length>4){var c=b[1],d=b[2],e=b[4];if(angular.isDefined(e))return[parseInt(c),parseInt(d),parseInt(e)];if(angular.isDefined(d))return[parseInt(c),parseInt(d)];if(angular.isDefined(c))return[parseInt(c)]}}return null}function E(a,b){return void 0===b&&(b=4),(a||"").split(".").map(function(a){var c=a.length;return c>=b?a:a.padLeft(" ",b-c)}).join(".")}function F(a,b){var c=(new Date).getTime(),d=b(),e=(new Date).getTime()-c;return console.log(a+" "+e),d}function G(a,b){if(a&&!b)return 1;if(!a&&b)return-1;if(a===b)return 0;for(var c=0;c<a.length;c++){var d=a[c];if(c>=b.length)return 1;var e=b[c];if(!angular.isDefined(d))return-1;if(!angular.isDefined(e))return 1;if(d>e)return 1;if(d<e)return-1}return 0}function H(a){if(angular.isArray(a)){var b=a.length;if(b){if(1===b)return H(a[0]);var c="<ul>";return angular.forEach(a,function(a){c+="<li>"+H(a)+"</li>"}),c+"</ul>"}return""}if(angular.isObject(a)){var c="<table>";return angular.forEach(a,function(a,b){c+="<tr><td>"+b+"</td><td>"+H(a)+"</td></tr>"}),c+"</table>"}if(angular.isString(a)){var d=["http://","https://","file://","mailto:"],e=a;return angular.forEach(d,function(b){e.startsWith(b)&&(e="<a href='"+a+"'>"+a+"</a>")}),e}return a}function I(a){if(a=a.trim(),a.startsWith("[")&&a.endsWith("]")||a.startsWith("{")&&a.endsWith("}"))try{return JSON.parse(a)}catch(a){}return null}function J(a,b){return a+" "+(1===a?b:b.pluralize())}function K(a){var b={};if(a){var c=a.indexOf(":");if(c>0){var d=a.substring(c+1),e=d.split(",");angular.forEach(e,function(a){var c=a.split("="),d=c[0],e=c[1]||d;b[d]=e})}}return b}function L(a,b){a.attr("title",b.getTitleWithSeparator(" "))}function M(a,b,c){a.attr("title",b.getTitleWithSeparator(" ")+" "+c)}function N(a,b,c){if(a){var d=a.mbeanTypesToDomain||{},e=d[c]||{},f=e[b];return angular.isArray(f)&&f.length?f[0]:f}return null}function O(b,c,d){var e=a.getMBeanTypeFolder(b,c,d);return a.pathGet(e,["objectName"])}function P(a){return a?a.replace(/(\/|\.)/g,"_"):a}function Q(a,b){angular.forEach(a,function(a){var c=a.children;angular.isArray(c)&&c.length>0?Q(c,b):b(a)})}function R(a){var b=a.split("#");if(0===b.length)return a;var c=b[1];if(b.length>1){b.last(b.length-2).forEach(function(a){c=c+"#"+a})}return c}function S(a){return T(a.username,a.password)}function T(a,b){var c=a+":"+b;return"Basic "+(c=c.encodeBase64())}function U(b){if(a.isBlank(b))return null;var c=b.match(xa);if(null===c)return null;var d=c[1],e=c[3],f=c[4],g=null;g=a.isBlank(f)?b.split(e):b.split(f);var h=a.parseIntValue(f),i=g[1];return i&&i.startsWith("/")&&(i=i.slice(1,i.length)),{scheme:d,host:e,port:h,path:i}}function V(){var a=document;return Math.max(Math.max(a.body.scrollHeight,a.documentElement.scrollHeight),Math.max(a.body.offsetHeight,a.documentElement.offsetHeight),Math.max(a.body.clientHeight,a.documentElement.clientHeight))}function W(b){if(a.isChromeApp())return b;var c=window.location.host;if(!b.startsWith("http://"+c+"/")&&!b.startsWith("https://"+c+"/")){var d=b.indexOf("://");d>0&&(b=b.substring(d+3)),b=b.replace(":","/"),b=a.trimLeading(b,"/"),b=a.trimTrailing(b,"/"),b=a.url("/proxy/"+b)}return b}function X(){a.injector||(a.injector=angular.element(document.documentElement).injector())}function Y(b){return a.isBlank(b.recentConnections)&&a.clearConnections(),angular.fromJson(b.recentConnections)}function Z(a,b){var c=Y(a);c=c.add(b).unique().first(5),a.recentConnections=angular.toJson(c)}function aa(a,b){var c=Y(a);c=c.exclude(function(a){return a===b}),a.recentConnections=angular.toJson(c)}function ba(){localStorage.recentConnections="[]"}function ca(b){var c=a.loadConnectionMap(),d=Object.clone(b);delete d.userName,delete d.password,c[b.name]=d,a.saveConnectionMap(c)}function da(b,c){if(a.log.debug("Connecting with options: ",StringHelpers.toString(c)),Z(b,c.name),!("userName"in c)){var d=a.injector.get("userDetails");c.userName=d.username,c.password=d.password}ca(c);var e=a.injector.get("$window"),f=(c.view||"#/welcome")+"?con="+c.name;f=f.replace(/\?/g,"&"),f=f.replace(/&/,"?");var g=e.open(f);g.con=c.name,e.passUserDetails={username:c.userName,password:c.password,loginDetails:{}},ea(g)}function ea(b){var c=a.injector.get("keycloakContext");if(c.enabled){var d={token:c.keycloak.token,refreshToken:c.keycloak.refreshToken};b.keycloakToken=d}}function fa(b,c,d){angular.isUndefined(c)&&(c=b.scheme());var e=b.host(),f=b.absUrl(),g=f.indexOf("url=");if(g>0){f=f.substr(g+4);var h=decodeURIComponent(f);if(h&&(g=h.indexOf("/proxy/"))>0){h=h.substr(g+7),g=h.indexOf("://"),g>0&&(h=h.substr(g+3));var i=h.split("/");if(i.length>=1&&(e=i[0]),angular.isUndefined(d)&&i.length>=2){var j=a.parseIntValue(i[1],"port number");j&&(d=j)}}}angular.isUndefined(d)&&(d=b.port());var k=c+"://"+e;return 80!=d&&(k+=":"+d),k}function ga(a){return a.url().indexOf("/hawtio/proxy/")>0}function ha(a){return a}function ia(a,b,c){var d={url:a,username:b,password:c,canonicalNaming:!1,ignoreErrors:!0,mimeType:"application/json"};return new Jolokia(d)}function ja(a,b){var c=0,d=null;return function(){var e=Date.now();return c<e&&(c=e+b,d=a()),d}}function ka(b,c){void 0===c&&(c="JSON");var d=null;try{d=angular.fromJson(b)}catch(d){a.log.info("Failed to parse "+c+" from: "+b+". "+d)}return d}function la(b){return!0===b?'<i class="icon-check"></i>':!1===b?'<i class="icon-check-empty"></i>':a.humanizeValue(b)}function ma(a,b){var c,d=(a||"").split("?");c=d&&d.length>0?d[1]:"";for(var e=c.split("&"),f=0;f<e.length;f++){var g=e[f].split("=");if(decodeURIComponent(g[0])==b)return decodeURIComponent(g[1])}return null}function na(b,c,d,e,f,g,h,i){void 0===f&&(f=null),void 0===g&&(g=null),void 0===h&&(h=null),void 0===i&&(i=null);var j={xhr:null,listMethod:c.listMethod,listMBean:c.listMBean},k=a.lazyLoaders,l=new a.Workspace(b,j,k,d,g,h,e,f,i);return a.log.info("Loading the profile using jolokia: "+b),l.loadTree(),l}function oa(a){if(!angular.isNumber(a))return"XXX";var b=a/1e3,c=Math.floor(b/31536e3);if(c)return J(c,"year");var d=Math.floor((b%=31536e3)/86400);if(d)return J(d,"day");var e=Math.floor((b%=86400)/3600);if(e)return J(e,"hour");var f=Math.floor((b%=3600)/60);return f?J(f,"minute"):(b=Math.floor(b%60),b?J(b,"second"):a+" ms")}function pa(a,b,c){if(!a.any(function(a){a.name})){var d="";d=c.useProxy?"/hawtio/proxy/":"//",d+=c.host+":"+c.port+"/"+c.path,a.push({name:b,regex:d.escapeURL(!0),color:UI.colors.sample()}),sa(a)}}function qa(){var a=[];try{a=angular.fromJson(localStorage.regexs)}catch(a){delete localStorage.regexs}return a}function ra(b){var c=a.getRegexs(),d=function(a){return a.name===b};c.any(d)&&(c=c.exclude(d),a.writeRegexs(c))}function sa(a){localStorage.regexs=angular.toJson(a)}function ta(a){if(a){a=a.replace(new RegExp("(.*://.*:)(.*)(@)","i"),"$1xxxxxx$3")}return a}function ua(a,b){if(angular.isUndefined(a)||angular.isUndefined(b))return!0;if(null==a||null==b)return!0;if(a=a.toString().trim().toLowerCase(),b=b.toString().trim().toLowerCase(),0===a.length||0===b.length)return!0;var c=b.split(",");return c=c.filter(function(a){return a.length>0}).map(function(a){return a.trim()}),c.some(function(b){return a.indexOf(b)>-1})}a.toPath=b,a.parseMBean=c,a.executePostLoginTasks=d,a.executePreLogoutTasks=e,a.executePostLogoutTasks=f,a.checkJolokiaOptimization=g,a.logout=h,a.createHref=i,a.hashToString=j,a.stringToHash=k,a.registerForChanges=l;var va=null;a.getOrInitObjectFromLocalStorage=m,a.getResponseHistory=q,a.MAX_RESPONSE_CACHE_SIZE=20,a.register=u,a.unregister=v,a.defaultJolokiaErrorHandler=w,a.isIgnorableException=x,a.logJolokiaStackTrace=y,a.xmlNodeToString=z,a.isTextNode=A,a.fileExtension=B,a.getUUID=C;var wa=/[^\d]*(\d+)\.(\d+)(\.(\d+))?.*/;a.parseVersionNumbers=D,a.versionToSortableString=E,a.time=F,a.compareVersionNumberArrays=G,a.valueToHtml=H,a.tryParseJson=I,a.maybePlural=J,a.objectNameProperties=K,a.setPageTitle=L,a.setPageTitleWithTab=M,a.getMBeanTypeFolder=N,a.getMBeanTypeObjectName=O,a.toSafeDomID=P,a.forEachLeafFolder=Q,a.extractHashURL=R,a.authHeaderValue=S,a.getBasicAuthHeader=T;var xa=new RegExp("^(https?)://(([^:/?#]*)(?::([0-9]+))?)");a.parseUrl=U,a.getDocHeight=V,a.useProxyIfExternal=W,a.checkInjectorLoaded=X,a.getRecentConnections=Y,a.addRecentConnection=Z,a.removeRecentConnection=aa,a.clearConnections=ba,a.saveConnection=ca,a.connectToServer=da,a.extractTargetUrl=fa,a.isProxyUrl=ga,a.doNothing=ha,a.bindModelToSearchParam=ControllerHelpers.bindModelToSearchParam,a.reloadWhenParametersChange=ControllerHelpers.reloadWhenParametersChange,a.createJolokia=ia,a.throttled=ja,a.parseJsonText=ka,a.humanizeValueHtml=la,a.getQueryParameterValue=ma,a.createRemoteWorkspace=na,a.humanizeMilliseconds=oa,a.storeConnectionRegex=pa,a.getRegexs=qa,a.removeRegex=ra,a.writeRegexs=sa,a.maskPassword=ta,a.matchFilterIgnoreCase=ua}(Core||(Core={}));var IDE;!function(a){function b(a){return Core.getMBeanTypeObjectName(a,"hawtio","IdeFacade")}function c(a,b){return"false"!==b.openInIDEA}function d(a,b,c,d){void 0===d&&(d=null);var f=null;return e(c.line)&&(c.line=null),e(c.column)&&(c.column=null),a&&(f=b.execute(a,"ideOpen",c.fileName,c.className,c.line,c.column,onSuccess(d))),f}function e(a){return!a||isNaN(a)}a.getIdeMBean=b,a.isOpenInIdeaSupported=c,a.ideaOpenAndNavigate=d}(IDE||(IDE={}));var IDE;!function(a){var b=Logger.get("IDE"),c=function(){function c(a,b,c){var d=this;this.localStorage=a,this.workspace=b,this.jolokia=c,this.restrict="E",this.replace=!0,this.transclude=!1,this.scope={fileName:"@",className:"@",line:"@",column:"@"},this.link=function(a,b,c){return d.doLink(a,b,c)}}return c.prototype.doLink=function(c,d,e){var f=this.workspace,g=this.jolokia,h=a.getIdeMBean(f),i=c.fileName;if(h&&i&&a.isOpenInIdeaSupported(f,localStorage)){var j=$('<button class="btn btn-mini"><img src="app/ide/img/intellijidea.png" width="16" height="16"></button>');j.on("click",function(){b.info("Attempting to open source file for: "+c.className),a.ideaOpenAndNavigate(h,g,c,function(a){b.info("open file request completed.")})}),d.append(j)}},c}();a.OpenInIdeDirective=c}(IDE||(IDE={}));var IDE;!function(a){var b="ide";a._module=angular.module(b,["bootstrap","hawtioCore"]),a._module.directive("hawtioOpenIde",["localStorage","workspace","jolokia",function(b,c,d){return new a.OpenInIdeDirective(b,c,d)}]),a._module.run(["helpRegistry",function(a){a.addDevDoc("IDE","app/ide/doc/developer.md")}]),hawtioPluginLoader.addModule(b)}(IDE||(IDE={}));var Core;!function(a){var b=function(){function a(){this.titleElements=[]}return a.prototype.addTitleElement=function(a){this.titleElements.push(a)},a.prototype.getTitle=function(){return this.getTitleExcluding([]," ")},a.prototype.getTitleWithSeparator=function(a){return this.getTitleExcluding([],a)},a.prototype.getTitleExcluding=function(a,b){return this.getTitleArrayExcluding(a).join(b)},a.prototype.getTitleArrayExcluding=function(a){return this.titleElements.map(function(a){var b="";return a&&null===(b=a())?"":b}).exclude(a).exclude("")},a}();a.PageTitle=b}(Core||(Core={}));var Core;!function(a){a.pluginName="hawtioCore",a.templatePath="app/core/html/",a.jolokiaUrl=a.getJolokiaUrl(),Logger.get("Core").debug("jolokiaUrl "+a.jolokiaUrl),a._module=angular.module(a.pluginName,["bootstrap","ngResource","ui","ui.bootstrap.dialog","hawtio-ui"]),a._module.config(["$locationProvider","$routeProvider","$dialogProvider",function(b,c,d){b.html5Mode(!0),d.options({backdropFade:!0,dialogFade:!0}),c.when("/help",{redirectTo:"/help/index"}).when("/login",{templateUrl:a.templatePath+"login.html"}).when("/welcome",{templateUrl:a.templatePath+"welcome.html"}).when("/about",{templateUrl:a.templatePath+"about.html"}).when("/help/:topic/",{templateUrl:a.templatePath+"help.html"}).when("/help/:topic/:subtopic",{templateUrl:a.templatePath+"help.html"})}]),a._module.constant("layoutTree",a.templatePath+"layoutTree.html"),a._module.constant("layoutFull",a.templatePath+"layoutFull.html"),a._module.filter("valueToHtml",function(){return a.valueToHtml}),a._module.filter("humanize",function(){return a.humanizeValue}),a._module.filter("humanizeMs",function(){return a.humanizeMilliseconds}),a._module.filter("maskPassword",function(){return a.maskPassword}),a._module.run(["$rootScope","$routeParams","jolokia","workspace","localStorage","viewRegistry","layoutFull","helpRegistry","pageTitle","branding","toastr","metricsWatcher","userDetails","preferencesRegistry","postLoginTasks","preLogoutTasks","$location","ConnectOptions","locationChangeStartTasks","keycloakPostLoginTasks","$http","$route",function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){a.checkInjectorLoaded(),p.addTask("ResetPreLogoutTasks",function(){a.checkInjectorLoaded(),q.reset()}),p.addTask("ResetPostLogoutTasks",function(){a.checkInjectorLoaded(),a.postLogoutTasks.reset()}),u.bootstrapIfNeeded(),q.addTask("ResetPostLoginTasks",function(){a.checkInjectorLoaded(),p.reset()}),b.lineCount=lineCount,b.params=c,b.is=function(a,b){return angular["is"+a](b)},b.empty=function(a){return $.isEmptyObject(a)},b.$on("UpdateRate",function(a,b){d.stop(),b>0&&d.start(b),Logger.get("Core").debug("Set update rate to: ",b)}),b.$emit("UpdateRate",f.updateRate),b.$on("$locationChangeStart",function(a,b,c){t.execute(a,b,c)}),t.addTask("ConParam",function(b,c,d){if(a.injector){var e=a.injector.get("$location"),f=a.injector.get("ConnectOptions");if(f.name&&c){var g=e.search();g.con||(a.log.debug("Lost connection parameter (",f.name,") from query params: ",g," resetting"),g.con=f.name,e.search(g))}}}),t.addTask("UpdateSession",function(){a.log.debug("Updating session expiry"),v({method:"post",url:"refresh"}).success(function(b){a.log.debug("Updated session, response: ",b)}).error(function(){a.log.debug("Failed to update session expiry")}),a.log.debug("Made request")}),b.log=function(a){console.log(a)},b.alert=function(a){alert(a)},g.fullscreen=h,g.notree=h,g.help=h,g.welcome=h,g.preferences=h,g.about=h,g.login=h,g.ui=h,
i.addUserDoc("index","app/core/doc/overview.md"),i.addUserDoc("preferences","app/core/doc/preferences.md"),i.addSubTopic("index","faq","app/core/doc/FAQ.md"),i.addSubTopic("index","changes","app/core/doc/CHANGES.md"),i.addSubTopic("index","developer","app/core/doc/developer.md"),i.addDevDoc("Core","app/core/doc/coreDeveloper.md"),i.addDevDoc("UI","#/ui/developerPage"),i.addDevDoc("datatable","app/datatable/doc/developer.md"),i.addDevDoc("Force Graph","app/forcegraph/doc/developer.md"),o.addTab("Core","app/core/html/corePreferences.html"),o.addTab("Plugins","app/core/html/pluginPreferences.html"),o.addTab("Console Logging","app/core/html/loggingPreferences.html"),o.addTab("Editor","app/ui/html/editorPreferences.html"),o.addTab("JMX","app/core/html/jmxPreferences.html"),o.addTab("Jolokia","app/core/html/jolokiaPreferences.html"),o.addTab("Reset","app/core/html/resetPreferences.html"),l.options={closeButton:!0,showMethod:"slideDown",hideMethod:"slideUp"};var x={level:null,message:null,action:a.throttled(function(){"WARN"===x.level&&a.notification("warning",x.message),"ERROR"===x.level&&a.notification("error",x.message)},500)};window.logInterceptors.push(function(a,b){x.level=a,x.message=b,x.action()}),setTimeout(function(){a.checkInjectorLoaded(),$("#main-body").fadeIn(2e3).after(function(){Logger.get("Core").info(k.appName+" started"),a.$apply(b),$(window).trigger("resize"),w.reload()})},500),setInterval(function(){var b=a.pathGet($,["cache"]);if(b){var c=[];angular.forEach(b,function(b,d){function e(a){return a.$parent?e(a.$parent):{destroyed:a.$$destroyed,$scope:a}}function f(a){if(a.$parent&&(f(a.$parent),a.$parent=null),a){try{a.$destroy()}catch(a){}a.$$destroyed=!0}}var g=a.pathGet(b,["data"]),h=a.pathGet(b,["data","$scope"]),i=a.pathGet(b,["handle"]);if(!h&&i&&i.elem&&i.elem!==document&&!$.contains(document.documentElement,i.elem)&&Logger.get("jquery-cache-prune").debug("Cache item with handle that isn't in the document, key: ",d,"value: ",b," element: ",i.elem),h){var j=e(h);j.destroyed&&(Logger.get("jquery-cache-prune").debug("Parent of $scope in cache item destroyed: ",j.$scope),f(h))}if(h&&h.$$destroyed)return Logger.get("jquery-cache-prune").debug("Pruning cache item with destroyed scope: ",d,"value: ",b," data: ",g," $scope: ",h),void c.push(d)}),angular.forEach(c,function(a){delete b[a]}),Logger.get("jquery-cache-prune").debug("Number of cache items after pruning: ",_.keys(b).length," number of items removed: ",c.length)}},1e4)}])}(Core||(Core={})),hawtioPluginLoader.addUrl("plugin"),hawtioPluginLoader.addModule(Core.pluginName),hawtioPluginLoader.addModule("angularFileUpload"),hawtioPluginLoader.registerPreBootstrapTask(function(a){$.support.cors=!0,a()}),hawtioPluginLoader.registerPreBootstrapTask(function(a){$("a[title]").tooltip({selector:"",delay:{show:1e3,hide:100}}),a()}),hawtioPluginLoader.registerPreBootstrapTask(function(a){Core.adjustHeight(),$(window).resize(Core.adjustHeight),a()}),hawtioPluginLoader.registerPreBootstrapTask(function(a){Core._module&&Core.isChromeApp()&&Core._module.config(["$compileProvider",function(a){a.urlSanitizationWhitelist(/^\s*(https?|ftp|mailto|chrome-extension):/)}]),a()});var Core;!function(a){var b=function(){function b(a){this.$rootScope=a,this.discoverableDocTypes={user:"help.md"},this.topicNameMappings={activemq:"ActiveMQ",camel:"Camel",jboss:"JBoss",jclouds:"jclouds",jmx:"JMX",jvm:"Connect",log:"Logs",openejb:"OpenEJB"},this.subTopicNameMappings={user:"For Users",developer:"For Developers",faq:"FAQ"},this.pluginNameMappings={hawtioCore:"core","hawtio-branding":"branding",forceGraph:"forcegraph","hawtio-ui":"ui","hawtio-forms":"forms",elasticjs:"elasticsearch"},this.ignoredPlugins=["core","branding","datatable","forcegraph","forms","perspective","tree","ui"],this.topics={}}return b.prototype.addUserDoc=function(a,b,c){void 0===c&&(c=null),this.addSubTopic(a,"user",b,c)},b.prototype.addDevDoc=function(a,b,c){void 0===c&&(c=null),this.addSubTopic(a,"developer",b,c)},b.prototype.addSubTopic=function(a,b,c,d){void 0===d&&(d=null),this.getOrCreateTopic(a,d)[b]=c},b.prototype.getOrCreateTopic=function(a,b){return void 0===b&&(b=null),angular.isDefined(this.topics[a])||(null===b&&(b=function(){return!0}),this.topics[a]={isValid:b},this.$rootScope.$broadcast("hawtioNewHelpTopic")),this.topics[a]},b.prototype.mapTopicName=function(a){return angular.isDefined(this.topicNameMappings[a])?this.topicNameMappings[a]:a.capitalize()},b.prototype.mapSubTopicName=function(a){return angular.isDefined(this.subTopicNameMappings[a])?this.subTopicNameMappings[a]:a.capitalize()},b.prototype.getTopics=function(){var b={};return angular.forEach(this.topics,function(c,d){c.isValid()?(a.log.debug(d," is available"),b[d]=angular.fromJson(angular.toJson(c))):a.log.debug(d," is not available")}),b},b.prototype.disableAutodiscover=function(a){this.ignoredPlugins.push(a)},b.prototype.discoverHelpFiles=function(a){var b=this;console.log("Ignored plugins: ",b.ignoredPlugins),a.forEach(function(a){var c=b.pluginNameMappings[a];angular.isDefined(c)||(c=a),b.ignoredPlugins.any(function(a){return a===c})||angular.forEach(b.discoverableDocTypes,function(d,e){if(!angular.isDefined(b[c])||!angular.isDefined(b[c][e])){var f="app/"+c+"/doc/"+d;console.log("checking: ",f),$.ajax(f,{type:"HEAD",statusCode:{200:function(){b.getOrCreateTopic(a)[e]=f}}})}})})},b}();a.HelpRegistry=b}(Core||(Core={}));var Core;!function(a){var b=function(){function a(){this.tabs={}}return a.prototype.addTab=function(a,b,c){void 0===c&&(c=void 0),c||(c=function(){return!0}),this.tabs[a]={template:b,isValid:c}},a.prototype.getTab=function(a){return this.tabs[a]},a.prototype.getTabs=function(){var a={};return angular.forEach(this.tabs,function(b,c){b.isValid()&&(a[c]=b)}),a},a}();a.PreferencesRegistry=b}(Core||(Core={}));var ActiveMQ;!function(a){function b(a){var b=null,c=a.selection;return c&&(b=c.findAncestor(function(a){var b=a.entries;return!!b&&("type"in b&&"Broker"===b.type&&"brokerName"in b&&!("destinationName"in b)&&!("destinationType"in b))})),b}function c(a,b){return a.hasDomainAndProperties(b,{destinationType:"Queue"},4)||a.selectionHasDomainAndType(b,"Queue")}function d(a,b){return a.hasDomainAndProperties(b,{destinationType:"Topic"},4)||a.selectionHasDomainAndType(b,"Topic")}function e(a,b){return a.selectionHasDomainAndLastFolderName(b,"Queue")}function f(a,b){return a.selectionHasDomainAndLastFolderName(b,"Topic")}function g(a,b){return a.hasDomainAndProperties(b,{service:"JobScheduler"},4)}function h(a,b){if(a.selectionHasDomainAndType(b,"Broker")){var c=Core.pathGet(a,["selection"]),d=Core.pathGet(a,["selection","parent"]);return!(d&&(d.ancestorHasType("Broker")||c.ancestorHasType("Broker")))}return!1}a.pluginName="activemq",a._module=angular.module(a.pluginName,["bootstrap","ngResource","ui.bootstrap.dialog","hawtioCore","camel","hawtio-ui"]),a._module.config(["$routeProvider",function(a){a.when("/activemq/browseQueue",{templateUrl:"app/activemq/html/browseQueue.html"}).when("/activemq/diagram",{templateUrl:"app/activemq/html/brokerDiagram.html",reloadOnSearch:!1}).when("/activemq/createDestination",{templateUrl:"app/activemq/html/createDestination.html"}).when("/activemq/createQueue",{templateUrl:"app/activemq/html/createQueue.html"}).when("/activemq/createTopic",{templateUrl:"app/activemq/html/createTopic.html"}).when("/activemq/deleteQueue",{templateUrl:"app/activemq/html/deleteQueue.html"}).when("/activemq/deleteTopic",{templateUrl:"app/activemq/html/deleteTopic.html"}).when("/activemq/sendMessage",{templateUrl:"app/camel/html/sendMessage.html"}).when("/activemq/durableSubscribers",{templateUrl:"app/activemq/html/durableSubscribers.html"}).when("/activemq/jobs",{templateUrl:"app/activemq/html/jobs.html"}).when("/activemq/queues",{templateUrl:"app/activemq/html/destinations.html"}).when("/activemq/topics",{templateUrl:"app/activemq/html/destinations.html",controller:"topicsController"})}]),a._module.controller("topicsController",["$scope",function(a){a.destinationType="topic"}]),a._module.run(["$location","workspace","viewRegistry","helpRegistry","preferencesRegistry","localStorage",function(i,j,k,l,m,n){function o(a){var b=a.get(q);p(b),b&&angular.forEach(b.children,function(a){angular.forEach(a.children,function(a){var b=a.children;if(b){var c=["Topic","Queue"];angular.forEach(c,function(a){var c=b.findIndex(function(b){return b.title===a});if(c>0){var d=b[c];b.splice(c,1),b.splice(0,0,d)}})}})})}function p(a){if(a){var b=a.parent,c=a.entries;if(b&&!b.typeName&&c){var d=c.endpoint;"Consumer"!==d&&"Producer"!==d||(b.typeName=d);c.connectorName&&!a.icon&&(a.icon=Core.url("/img/icons/activemq/connector.png"))}angular.forEach(a.children,function(a){return p(a)})}}var q=n.activemqJmxDomain||"org.apache.activemq";k.activemq="app/activemq/html/layoutActiveMQTree.html",l.addUserDoc("activemq","app/activemq/doc/help.md",function(){return j.treeContainsDomainAndProperties(q)}),m.addTab("ActiveMQ","app/activemq/html/preferences.html",function(){return j.treeContainsDomainAndProperties(q)}),j.addTreePostProcessor(o);var r=j.onClickRowHandlers,s=function(a){var b=a.entity.Name,c=$("#activemqtree");if(0===c.length&&(c=$("#jmxtree")),0!=c.length){var d=c.dynatree("getActiveNode"),e=d.getChildren();for(var f in e)if(e[f]&&e[f].data.title===b){e[f].expand(!0),e[f].activate();break}}};r[a.jmxDomain+"/Queue/folder"]=s,r[a.jmxDomain+"/Topic/folder"]=s;var t=j.attributeColumnDefs;t[a.jmxDomain+"/Broker/folder"]=[{field:"BrokerName",displayName:"Name",width:"**"},{field:"TotalProducerCount",displayName:"Producer #"},{field:"TotalConsumerCount",displayName:"Consumer #"},{field:"StorePercentUsage",displayName:"Store %"},{field:"TempPercentUsage",displayName:"Temp %"},{field:"MemoryPercentUsage",displayName:"Memory %"},{field:"TotalEnqueueCount",displayName:"Enqueue #"},{field:"TotalDequeueCount",displayName:"Dequeue #"}],t[a.jmxDomain+"/Queue/folder"]=[{field:"Name",displayName:"Name",width:"***"},{field:"QueueSize",displayName:"Queue Size"},{field:"ProducerCount",displayName:"Producer #"},{field:"ConsumerCount",displayName:"Consumer #"},{field:"EnqueueCount",displayName:"Enqueue #"},{field:"DequeueCount",displayName:"Dequeue #"},{field:"MemoryPercentUsage",displayName:"Memory %"},{field:"DispatchCount",displayName:"Dispatch #",visible:!1}],t[a.jmxDomain+"/Topic/folder"]=[{field:"Name",displayName:"Name",width:"****"},{field:"ProducerCount",displayName:"Producer #"},{field:"ConsumerCount",displayName:"Consumer #"},{field:"EnqueueCount",displayName:"Enqueue #"},{field:"DequeueCount",displayName:"Dequeue #"},{field:"MemoryPercentUsage",displayName:"Memory %"},{field:"DispatchCount",displayName:"Dispatch #",visible:!1}],t[a.jmxDomain+"/Consumer/folder"]=[{field:"ConnectionId",displayName:"Name",width:"**"},{field:"PrefetchSize",displayName:"Prefetch Size"},{field:"Priority",displayName:"Priority"},{field:"DispatchedQueueSize",displayName:"Dispatched Queue #"},{field:"SlowConsumer",displayName:"Slow ?"},{field:"Retroactive",displayName:"Retroactive"},{field:"Selector",displayName:"Selector"}],t[a.jmxDomain+"/networkConnectors/folder"]=[{field:"Name",displayName:"Name",width:"**"},{field:"UserName",displayName:"User Name"},{field:"PrefetchSize",displayName:"Prefetch Size"},{field:"ConduitSubscriptions",displayName:"Conduit Subscriptions?"},{field:"Duplex",displayName:"Duplex"},{field:"DynamicOnly",displayName:"Dynamic Only"}],t[a.jmxDomain+"/PersistenceAdapter/folder"]=[{field:"IndexDirectory",displayName:"Index Directory",width:"**"},{field:"LogDirectory",displayName:"Log Directory",width:"**"}],j.topLevelTabs.push({id:"activemq",content:"ActiveMQ",title:"Manage your ActiveMQ message brokers",isValid:function(a){return a.treeContainsDomainAndProperties(q)},href:function(){return"#/jmx/attributes?tab=activemq"},isActive:function(){return j.isTopTabActive("activemq")}}),j.subLevelTabs.push({content:'<i class="icon-envelope"></i> Browse',title:"Browse the messages on the queue",isValid:function(a){return c(a,q)&&a.hasInvokeRights(a.selection,"browse()")},href:function(){return"#/activemq/browseQueue"}}),j.subLevelTabs.push({content:'<i class="icon-pencil"></i> Send',title:"Send a message to this destination",isValid:function(a){return(c(a,q)||d(a,q))&&a.hasInvokeRights(a.selection,"sendTextMessage(java.util.Map,java.lang.String,java.lang.String,java.lang.String)")},href:function(){return"#/activemq/sendMessage"}}),j.subLevelTabs.push({content:'<i class="icon-picture"></i> Diagram',title:"View a diagram of the producers, destinations and consumers",isValid:function(a){return a.isTopTabActive("activemq")||a.selectionHasDomain(q)},href:function(){return"#/activemq/diagram"}}),j.subLevelTabs.push({content:'<i class="icon-plus"></i> Create',title:"Create a new destination",isValid:function(a){return h(a,q)&&a.hasInvokeRights(b(a),"addQueue","addTopic")},href:function(){return"#/activemq/createDestination"}}),j.subLevelTabs.push({content:'<i class="icon-plus"></i> Create',title:"Create a new queue",isValid:function(a){return e(a,q)&&a.hasInvokeRights(b(a),"addQueue")},href:function(){return"#/activemq/createQueue"}}),j.subLevelTabs.push({content:'<i class="icon-plus"></i> Create',title:"Create a new topic",isValid:function(a){return f(a,q)&&a.hasInvokeRights(b(a),"addQueue")},href:function(){return"#/activemq/createTopic"}}),j.subLevelTabs.push({content:'<i class="icon-remove"></i> Delete Topic',title:"Delete this topic",isValid:function(a){return d(a,q)&&a.hasInvokeRights(b(a),"removeTopic")},href:function(){return"#/activemq/deleteTopic"}}),j.subLevelTabs.push({content:'<i class="icon-remove"></i> Delete',title:"Delete or purge this queue",isValid:function(a){return c(a,q)&&a.hasInvokeRights(b(a),"removeQueue")},href:function(){return"#/activemq/deleteQueue"}}),j.subLevelTabs.push({content:'<i class="icon-list"></i> Durable Subscribers',title:"Manage durable subscribers",isValid:function(a){return h(a,q)},href:function(){return"#/activemq/durableSubscribers"}}),j.subLevelTabs.push({content:'<i class="icon-list"></i> Jobs',title:"Manage jobs",isValid:function(a){return g(a,q)},href:function(){return"#/activemq/jobs"}}),j.subLevelTabs.push({content:'<i class="icon-list"></i> Queues',title:"View Queues",isValid:function(a){return h(a,q)},href:function(){return"#/activemq/queues"}}),j.subLevelTabs.push({content:'<i class="icon-list"></i> Topics',title:"View Topics",isValid:function(a){return h(a,q)},href:function(){return"#/activemq/topics"}})}]),hawtioPluginLoader.addModule(a.pluginName),a.getBroker=b,a.isQueue=c,a.isTopic=d,a.isQueuesFolder=e,a.isTopicsFolder=f,a.isJobScheduler=g,a.isBroker=h}(ActiveMQ||(ActiveMQ={}));var Fabric;!function(a){function b(){return{hostName:null,port:null,username:null,password:null,maximumContainerCount:null,tags:[],path:null,passPhrase:null,privateKeyFile:null,preferredAddress:null}}function c(){return{hosts:[],defaultPath:null,defaultPort:null,defaultUsername:null,defaultPassword:null,fallbackRepositories:[],defaultPassPhrase:null,defaultPrivateKeyFile:null}}function d(){return{hostName:null,port:null,username:null,password:null,maximumContainerCount:null,tags:[],path:null,passPhrase:null,privateKeyFile:null,preferredAddress:null}}function e(){return{hosts:[]}}a.createSshHostConfiguration=b,a.createSshConfiguration=c,a.createDockerHostConfiguration=d,a.createDockerConfiguration=e}(Fabric||(Fabric={}));var Fabric;!function(a){a.log=Logger.get("Fabric"),a.jmxDomain="io.fabric8",a.managerMBean=a.jmxDomain+":type=Fabric",a.clusterManagerMBean=a.jmxDomain+":type=ClusterServiceManager",a.clusterBootstrapManagerMBean=a.jmxDomain+":type=ClusterBootstrapManager",a.openShiftFabricMBean=a.jmxDomain+":type=OpenShift",a.mqManagerMBean=a.jmxDomain+":type=MQManager",a.healthMBean=a.jmxDomain+":service=Health",a.schemaLookupDomain="hawtio",a.schemaLookupType="SchemaLookup",a.schemaLookupMBean=a.schemaLookupDomain+":type="+a.schemaLookupType,a.useDirectoriesInGit=!0,a.fabricTopLevel="fabric/profiles/",a.profileSuffix=".profile",a.jolokiaWebAppGroupId=a.jmxDomain+".fabric-jolokia",a.currentContainerId="",a.currentContainer={},a.DEFAULT_REST_API="/api/fabric8"}(Fabric||(Fabric={}));var Fabric;!function(a){function b(b,c,arguments,d,e){void 0===e&&(e=Core.defaultJolokiaErrorHandler),c.request({type:"exec",mbean:a.managerMBean,operation:b,arguments:arguments},{method:"POST",success:d,error:e})}function c(a,c,d,e,f,g,h,i){void 0===i&&(i=Core.defaultJolokiaErrorHandler),b("applyPatches(java.util.List,java.lang.String,java.lang.String,java.lang.String,java.lang.String)",a,[c,d,e,f,g],h,i)}function d(a,c,d,e,f,g){void 0===g&&(g=Core.defaultJolokiaErrorHandler),b("setContainerProperty(java.lang.String, java.lang.String, java.lang.Object)",a,[c,d,e],f,g)}function e(a,c,d,e,f,g){void 0===g&&(g=Core.defaultJolokiaErrorHandler),b("deleteConfigurationFile(java.lang.String, java.lang.String, java.lang.String)",a,[c,d,e],f,g)}function f(a,c,d,e,f,g){void 0===g&&(g=Core.defaultJolokiaErrorHandler),b("deleteConfigurationFiles(java.lang.String, java.util.List, java.util.List)",a,[c,d,e],f,g)}function g(a,c,d,e,f,g){void 0===g&&(g=Core.defaultJolokiaErrorHandler),b("setConfigurationFile(java.lang.String, java.lang.String, java.lang.String, java.lang.String)",a,[c,d,e,""],f,g)}function h(a,c,d,e,f,g,h){void 0===h&&(h=Core.defaultJolokiaErrorHandler),b("setConfigurationFile(java.lang.String, java.lang.String, java.lang.String, java.lang.String)",a,[c,d,e,f],g,h)}function i(a,c,d,e,f){void 0===f&&(f=Core.defaultJolokiaErrorHandler),b("addProfilesToContainer(java.lang.String, java.util.List)",a,[c,d],e,f)}function j(a,c,d,e,f){void 0===f&&(f=Core.defaultJolokiaErrorHandler),b("removeProfilesFromContainer(java.lang.String, java.util.List)",a,[c,d],e,f)}function k(a,c,d,e,f,g){void 0===g&&(g=Core.defaultJolokiaErrorHandler),b("applyProfilesToContainers(java.lang.String, java.util.List, java.util.List)",a,[c,d,e],f,g)}function l(a,c,d,e,f){void 0===f&&(f=Core.defaultJolokiaErrorHandler),b("applyVersionToContainers(java.lang.String, java.util.List)",a,[c,d],e,f)}function m(a,c,d,e,f,g){void 0===g&&(g=Core.defaultJolokiaErrorHandler),b("changeProfileParents(java.lang.String, java.lang.String, java.util.List)",a,[c,d,e],f,g)}function n(a,c,d,e,f,g){void 0===g&&(g=Core.defaultJolokiaErrorHandler),b("createProfile(java.lang.String, java.lang.String, java.util.List)",a,[c,d,e],f,g)}function o(a,c,d,e,f,g,h){void 0===h&&(h=Core.defaultJolokiaErrorHandler),b("copyProfile(java.lang.String, java.lang.String, java.lang.String, boolean)",a,[c,d,e,f],g,h)}function p(a,c,d,e,f){void 0===f&&(f=Core.defaultJolokiaErrorHandler),b("createVersion(java.lang.String, java.lang.String)",a,[c,d],e,f)}function q(a,c,d,e){void 0===e&&(e=Core.defaultJolokiaErrorHandler),b("createVersion(java.lang.String)",a,[c],d,e)}function r(a,c,d){void 0===d&&(d=Core.defaultJolokiaErrorHandler),b("createVersion()",a,[],c,d)}function s(a,c,d,e){void 0===e&&(e=Core.defaultJolokiaErrorHandler),b("deleteVersion(java.lang.String)",a,[c],d,e)}function t(b){return b.execute(a.managerMBean,"versionIds",{method:"GET"})}function u(b,c,d){return b.execute(a.managerMBean,"containerIdsForProfile",c,d,{method:"POST"})}function v(b,c,d,e){return b.execute(a.managerMBean,"containerIdsForProfiles(java.lang.String, java.util.List, boolean)",c,d,e,{method:"POST"})}function w(b){return b.execute(a.managerMBean,"containerIds",{method:"POST"})}function x(b,c,d,e){return b.execute(a.managerMBean,"getProfile(java.lang.String, java.lang.String, boolean)",c,d,e,{method:"GET"})}function y(a,c,d,e,f){void 0===f&&(f=Core.defaultJolokiaErrorHandler),b("deleteProfile(java.lang.String, java.lang.String)",a,[c,d],e,f)}function z(a,c,d,e,f,g){void 0===g&&(g=Core.defaultJolokiaErrorHandler),b("profileWebAppURL",a,[c,d,e],f,g)}function A(a,c,d){void 0===d&&(d=Core.defaultJolokiaErrorHandler),b("restApiUrl",a,[],c,d)}function B(a,c,d,e){void 0===e&&(e=Core.defaultJolokiaErrorHandler),b("stopContainer(java.lang.String)",a,[c],d,e)}function C(a,c,d,e){void 0===e&&(e=Core.defaultJolokiaErrorHandler),b("destroyContainer(java.lang.String)",a,[c],d,e)}function D(a,c,d,e){void 0===e&&(e=Core.defaultJolokiaErrorHandler),b("startContainer(java.lang.String)",a,[c],d,e)}function E(a,c,d,e,f){void 0===f&&(f=Core.defaultJolokiaErrorHandler),b("containerWebAppURL",a,[c,d],e,f)}function F(a,c){b("defaultVersion",a,[],function(a){c(a.value.id)})}a.doAction=b,a.applyPatches=c,a.setContainerProperty=d,a.deleteConfigFile=e,a.deleteConfigFiles=f,a.newConfigFile=g,a.saveConfigFile=h,a.addProfilesToContainer=i,a.removeProfilesFromContainer=j,a.applyProfiles=k,a.migrateContainers=l,a.changeProfileParents=m,a.createProfile=n,a.copyProfile=o,a.createVersionWithParentAndId=p,a.createVersionWithId=q,a.createVersion=r,a.deleteVersion=s,a.getVersionIds=t,a.getContainerIdsForProfile=u,a.getContainerIdsForProfiles=v,a.getContainerIds=w,a.getProfile=x,a.deleteProfile=y,a.profileWebAppURL=z,a.restApiUrl=A,a.stopContainer=B,a.destroyContainer=C,a.startContainer=D,a.containerWebAppURL=E,a.getDefaultVersionIdAsync=F}(Fabric||(Fabric={}));var Fabric;!function(a){function b(b,c){return b.dialog({resolve:c,templateUrl:"app/fabric/html/newLocation.html",controller:["$scope","dialog","jolokia","selectedContainers","callbacks",function(b,c,d,e,f){b.newLocationName="",b.close=function(g){c.close(),g&&e.each(function(c){a.setContainerProperty(d,c.id,"location",b.newLocationName,f.successs,f.error)})}}]})}function c(b){var c="createVersion";return c in h||(h[c]=b.dialog({templateUrl:"app/fabric/html/createVersionDialog.html",controller:["$scope","dialog","jolokia","$location",function(b,c,d,e){b.name="",b.close=function(f){c.close(),f&&a.doCreateVersion(b,d,e,b.name)}}]})),h[c]}function d(b){var c="deleteVersion";return c in h||(h[c]=b.dialog({templateUrl:"app/fabric/html/selectVersionDialog.html",controller:["$scope","dialog","jolokia","$location","$rootScope",function(b,c,d,e,f){b.excludes=[],b.$watch("selectedVersion.id",function(a,c){a&&(b.excludes.find(function(b){return b===a})?(b.warning="This version is in use and cannot be deleted.",b.invalid=!0):!0===b.selectedVersion.defaultVersion?(b.warning="This version is set default and cannot be deleted.",b.invalid=!0):(b.warning="This operation cannot be undone!",b.invalid=!1))}),a.getVersionsInUse(d,function(a){b.excludes=a,Core.$apply(b)}),b.invalid=!1,b.title="Delete Version",b.text="Select the version to delete:",b.warning="This operation cannot be undone!",b.action="Delete",b.cancel="Cancel",b.close=function(g){if(c.close(),g){var h=b.selectedVersion.id;a.deleteVersion(d,h,function(){f.$broadcast("wikiBranchesUpdated"),a.getDefaultVersionIdAsync(d,function(c){a.viewVersion(c,e,b),Core.$apply(b)})},function(c){a.log.debug("Failed to delete version ",h," due to ",c.error),a.log.debug("Stack trace: ",c.stacktrace),Core.$apply(b)})}}}]})),h[c]}function e(b){var c="changeDefault";return c in h||(h[c]=b.dialog({templateUrl:"app/fabric/html/selectVersionDialog.html",controller:["$scope","dialog","jolokia","$location",function(b,c,d,e){b.title="Change Default Version",b.text="Change the default version to:",b.action="Change",b.cancel="Cancel",b.close=function(e){if(c.close(),e){var f=b.selectedVersion.id;a.setDefaultVersion(d,f,function(){Core.notification("success","Set default version to "+f),Core.$apply(b)})}}}]})),h[c]}function f(a){var b="patchVersion";return b in h||(h[b]=a.dialog({templateUrl:"app/fabric/html/selectVersionDialog.html",controller:["$scope","dialog","jolokia","$location",function(a,b,c,d){a.title="Patch Version",a.text="Select the version to patch:",a.action="Continue",a.cancel="Cancel",a.close=function(c){b.close(),c&&(d.url("/fabric/patching").search({versionId:a.selectedVersion.id}),Core.$apply(a))}}]})),h[b]}function g(b,g,h){b.addExtension({title:"Create Version",valid:function(){return a.isFMCContainer(h)},action:function(){c(g).open()},objectName:a.managerMBean,methodName:"createVersion"}),b.addExtension({title:"Delete Version",valid:function(){return a.isFMCContainer(h)},action:function(){d(g).open()},objectName:a.managerMBean,methodName:"deleteVersion"}),b.addExtension({title:"Change Default",valid:function(){return a.isFMCContainer(h)},action:function(){e(g).open()},objectName:a.managerMBean,methodName:"setDefaultVersion"}),b.addExtension({title:"Patch Version",valid:function(){return a.isFMCContainer(h)&&!a.hasOpenShiftFabric(h)},action:function(){f(g).open()},objectName:a.managerMBean,methodName:"applyPatches",argumentTypes:"java.util.List,java.lang.String,java.lang.String,java.lang.String,java.lang.String"})}var h={};a.getCreateLocationDialog=b,a.getVersionCreateDialog=c,a.getVersionDeleteDialog=d,a.getChangeDefaultVersionDialog=e,a.getVersionPatchDialog=f,a.addWikiBranchMenuExtensions=g}(Fabric||(Fabric={}));var CodeEditor;!function(a){function b(a){var b="text";if(a){b="javascript";var c=a.toString().trimLeft().trimRight();c&&"<"===c.first()&&">"===c.last()&&(b="xml")}return b}function c(a){if(a){var b=a.lineCount(),c={line:0,ch:0},d={line:b-1,ch:a.getLine(b-1).length};a.autoFormatRange(c,d),a.setSelection(c,c)}}function d(b){return void 0===b&&(b={}),b.extraKeys=b.extraKeys||{},function(a){"object"!=typeof(a=a||{name:"text"})&&(a={name:a}),"javascript"===a.name&&angular.extend(a,{json:!0})}(b.mode),function(a){var b=CodeMirror.newFoldFunction(CodeMirror.braceRangeFinder),c=CodeMirror.newFoldFunction(CodeMirror.tagRangeFinder),d=function(a,d){var e=a.getOption("mode"),f=e.name;e&&f&&("javascript"===f?b(a,d):("xml"===f||f.startsWith("html"))&&c(a,d))};a.onGutterClick=d,a.extraKeys=angular.extend(a.extraKeys,{"Ctrl-Q":function(a){d(a,a.getCursor().line)}})}(b),b.readOnly||(b.matchBrackets=!0),angular.extend(b,a.GlobalCodeMirrorOptions),b}a.GlobalCodeMirrorOptions={theme:"default",tabSize:4,lineNumbers:!0,indentWithTabs:!0,lineWrapping:!0,autoCloseTags:!0},a.detectTextFormat=b,a.autoFormatEditor=c,a.createEditorSettings=d}(CodeEditor||(CodeEditor={}));var UI;!function(a){function b(a,c){return c in a?a:a.$parent?b(a.$parent,c):null}function c(a,b,c){if(a in b){var d=b[a];if(d&&!d.isBlank())return d}return c}function d(a,b,c,d,e){void 0===e&&(e=null),b.$observe(c,function(b){angular.isDefined(b)?a[c]=b:a[c]=d,angular.isDefined(e)&&e&&e(a[c])})}function e(){if(!angular.isDefined(a.scrollBarWidth)){var b=document.createElement("div");b.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',b=b.firstChild,document.body.appendChild(b),a.scrollBarWidth=b.offsetWidth-b.clientWidth,document.body.removeChild(b)}return a.scrollBarWidth}a.log=Logger.get("UI"),a.scrollBarWidth=null,a.findParentWith=b,a.getIfSet=c,a.observe=d,a.getScrollbarWidth=e}(UI||(UI={}));var UI;!function(a){a.pluginName="hawtio-ui",a.templatePath="app/ui/html/",a._module=angular.module(a.pluginName,["bootstrap","ngResource","ui","ui.bootstrap"]),a._module.config(["$routeProvider",function(b){b.when("/ui/developerPage",{templateUrl:a.templatePath+"developerPage.html",reloadOnSearch:!1})}]),a._module.factory("UI",function(){return a}),a._module.factory("marked",function(){return marked.setOptions({gfm:!0,tables:!0,breaks:!1,pedantic:!0,sanitize:!1,smartLists:!0,langPrefix:"language-"}),marked}),a._module.directive("compile",["$compile",function(a){return function(b,c,d){b.$watch(function(a){return a.$eval(d.compile)},function(d){c.html(d),a(c.contents())(b)})}}]),a._module.controller("CodeEditor.PreferencesController",["$scope","localStorage","$templateCache",function(a,b,c){a.exampleText=c.get("exampleText"),a.codeMirrorEx=c.get("codeMirrorExTemplate"),a.javascript="javascript",a.preferences=CodeEditor.GlobalCodeMirrorOptions,a.$watch("preferences",function(c,d){c!==d&&(a.codeMirrorEx+=" ",b.CodeMirrorOptions=angular.toJson(angular.extend(CodeEditor.GlobalCodeMirrorOptions,a.preferences)))},!0)}]),a._module.run(["localStorage",function(a){var b=a.CodeMirrorOptions;b&&(b=angular.fromJson(b),CodeEditor.GlobalCodeMirrorOptions=angular.extend(CodeEditor.GlobalCodeMirrorOptions,b))}]),hawtioPluginLoader.addModule(a.pluginName)}(UI||(UI={}));var UI;!function(a){function b(b){return{restrict:"A",replace:!0,templateUrl:a.templatePath+"dropDown.html",scope:{config:"=hawtioDropDown"},controller:["$scope","$element","$attrs",function(a,b,c){a.config||(a.config={}),"open"in a.config||(a.config.open=!1),a.action=function(b,c){if("items"in b&&!("action"in b))b.open=!b.open,c.preventDefault(),c.stopPropagation();else if("action"in b){var d=b.action;angular.isFunction(d)?d():angular.isString(d)&&a.$parent.$eval(d,{config:b,$event:c})}},a.$watch("config.items",function(b,c){b!==c&&(a.menuStyle=a.menuStyle+" ")},!0),a.submenu=function(a){return a&&a.submenu?"sub-menu":""},a.icon=function(a){return a&&!Core.isBlank(a.icon)?a.icon:"icon-spacer"},a.open=function(a){return a&&!a.open?"":"open"}}],link:function(a,c,d){a.menuStyle=b.get("withsubmenus.html"),"processSubmenus"in d&&(Core.parseBooleanValue(d.processSubmenus)||(a.menuStyle=b.get("withoutsubmenus.html")))}}}a.hawtioDropDown=b,a._module.directive("hawtioDropDown",["$templateCache",a.hawtioDropDown])}(UI||(UI={}));var ContainerHelpers;!function(a){function b(b){var c=b.map(function(b){return Core.isBlank(b.location)?a.NO_LOCATION:b.location});return c.push(a.NO_LOCATION),c=c.unique().sortBy(""),c=c.exclude(function(a){return Core.isBlank(a)})}function c(a,b){return Fabric.getCreateLocationDialog(b,{selectedContainers:function(){return a.selectedContainers},callbacks:function(){return{success:function(b){Core.$apply(a)},error:function(b){Core.$apply(a)}}}})}function d(b,c,d){var e={icon:"icon-location-arrow",title:"Set Location",items:[]},f=[];return d.forEach(function(d){f.push({title:d,action:function(){b.selectedContainers.forEach(function(e){var f=d;f===a.NO_LOCATION&&(f=""),Fabric.setContainerProperty(c,e.id,"location",f,function(){Core.$apply(b)},function(){Core.$apply(b)})})}})}),f.push({title:"New...",action:function(){b.createLocationDialog.open()}}),e.items=f,e}function e(a){return!!a&&(!Core.isBlank(Fabric.currentContainerId)&&(angular.isObject(a)?a.id===Fabric.currentContainerId:!!angular.isString(a)&&a===Fabric.currentContainerId))}function f(a){return!!a&&(!Core.isBlank(a.jolokiaUrl)&&!!Core.parseBooleanValue(a.alive))}function g(a){var b="Alive";return a.alive?b+=" - "+Core.humanizeValue(a.provisionResult):b="Not Running",b}function h(a){if(a){switch(a.provisionResult){case"success":return a.alive?"green icon-play-circle":"orange icon-off";case"downloading":return"icon-download-alt";case"installing":return"icon-hdd";case"analyzing":case"finalizing":return"icon-refresh icon-spin";case"resolving":return"icon-sitemap";case"error":return"red icon-warning-sign"}if(!a.alive)return"orange icon-off"}return"icon-refresh icon-spin"}function i(a,b){a.path("/fabric/container/"+b.id)}function j(a,b,c,d){void 0===d&&(d=null),Fabric.destroyContainer(b,c,function(){d&&d(),Core.$apply(a)})}function k(a,b,c){a.fabricVerboseNotifications&&Core.notification("info","Starting "+c),Fabric.startContainer(b,c,function(){Core.$apply(a)})}function l(a,b,c){a.fabricVerboseNotifications&&Core.notification("info","Stopping "+c),Fabric.stopContainer(b,c,function(){Core.$apply(a)})}function m(a,b,c){c.forEach(function(c){return l(a,b,c.id)})}function n(a,b,c){c.forEach(function(c){return k(a,b,c.id)})}function o(a){return a.length>0&&a.all(function(a){var b=!1;if(!a.alive)switch(b=!0,a.provisionResult){case"downloading":case"installing":case"analyzing":case"finalizing":case"resolving":b=!1}return b})}function p(a){return a.length>0&&a.any(function(a){return!0===a.alive})}function q(a,b){return void 0===b&&(b=!0),a.length>0&&a.every(function(a){return a.alive===b})}function r(a,b,c){a.containerHelpersAdded||(a.containerHelpersAdded=!0,a.isCurrentContainer=e,a.canConnect=f,a.getStatusTitle=g,a.showContainer=function(a){i(b,a)},a.statusIcon=h,a.everySelectionAlive=function(b){
return q(a.selectedContainers,b)},a.allSelectionsStartable=function(){return o(a.selectedContainers)},a.anySelectionStoppable=function(){return p(a.selectedContainers)},a.startContainer=function(b){k(a,c,b)},a.stopContainer=function(b){l(a,c,b)},a.startSelectedContainers=function(){n(a,c,a.selectedContainers)},a.stopSelectedContainers=function(){m(a,c,a.selectedContainers)})}a.NO_LOCATION="No Location",a.extractLocations=b,a.getCreateLocationDialog=c,a.buildLocationMenu=d,a.isCurrentContainer=e,a.canConnect=f,a.statusTitle=g,a.statusIcon=h,a.gotoContainer=i,a.doDeleteContainer=j,a.doStartContainer=k,a.doStopContainer=l,a.stopContainers=m,a.startContainers=n,a.allStartable=o,a.anyStoppable=p,a.allAlive=q,a.decorate=r}(ContainerHelpers||(ContainerHelpers={}));var Fabric;!function(a){function b(a){var b;switch(a){case"child":b=[];break;case"ssh":case"jclouds":b=["localip","localhostname","publicip","publichostname","manualip"];break;case"openshift":case"docker":b=[]}return b}function c(a,b){switch(Core.pathSet(b,["properties","name","required"],!0),Core.pathSet(b,["properties","name","input-attributes","ng-pattern"],"/^[a-z0-9_-]*$/"),delete b.properties.metadataMap,delete b.properties.zookeeperUrl,delete b.properties.zookeeperPassword,delete b.properties.globalResolver,delete b.properties.zooKeeperServerPort,delete b.properties.zooKeeperServerConnectionPort,delete b.properties.agentEnabled,delete b.properties.autoImportEnabled,delete b.properties.importPath,delete b.properties.users,delete b.properties.systemProperties,["zooKeeperServerInitLimit","zooKeeperServerTickTime","zooKeeperServerSyncLimit","zooKeeperServerDataDir","waitForProvision","ensembleStart","migrationTimeout","dataStoreProperties"].forEach(function(a){Core.pathSet(b,["properties",a,"control-attributes","ng-show"],"entity.ensembleServer")}),Core.pathSet(b,["properties","providerType","type"],"hidden"),Core.pathSet(b,["properties","profiles","type"],"hidden"),Core.pathSet(b,["properties","version","type"],"hidden"),Core.pathSet(b.properties,["name","label"],"Container Name"),Core.pathSet(b.properties,["name","container-name-available"],"true"),Core.pathSet(b.properties,["name","tooltip"],"Name of the container to create (or prefix of the container name if you create multiple containers)"),Core.pathSet(b.properties,["number","label"],"Number of containers"),Core.pathSet(b.properties,["number","tooltip"],"The number of containers to create; when set higher than 1 a number will be appended to each container name. Max value: 99"),Core.pathSet(b.properties,["number","input-attributes","min"],"1"),Core.pathSet(b.properties,["number","input-attributes","max"],"99"),Core.pathSet(b.properties,["number","input-attributes","ng-pattern"],"/^[1-9][0-9]?$/"),Core.pathSet(b.properties,["number","required"],!0),Core.pathSet(b.properties,["login","input-attributes","autofill"],"true"),Core.pathSet(b.properties,["password","input-attributes","autofill"],"true"),Core.pathSet(b.properties,["jmxUser","input-attributes","autofill"],"true"),Core.pathSet(b.properties,["jmxUser","tooltip"],"The username for connecting to the container using JMX"),Core.pathSet(b.properties,["jmxPassword","input-attributes","autofill"],"true"),Core.pathSet(b.properties,["jmxPassword","tooltip"],"The password for connecting to the container using JMX"),Core.pathSet(b.properties,["resolver","input-element"],"select"),Core.pathSet(b.properties,["resolver","input-attributes","ng-options"],"r for r in resolvers"),a){case"child":delete b.properties.manualIp,delete b.properties.preferredAddress,delete b.properties.resolver,delete b.properties.ensembleServer,delete b.properties.proxyUri,delete b.properties.adminAccess,delete b.properties.minimumPort,delete b.properties.maximumPort,b.properties.jmxPassword.type="password",Core.pathSet(b.properties,["parent","label"],"Parent Container"),Core.pathSet(b.properties,["parent","tooltip"],"The name of the parent container used to create the child container"),Core.pathSet(b.properties,["parent","input-element"],"select"),Core.pathSet(b.properties,["parent","input-attributes","ng-options"],"c for c in child.rootContainers"),d(b,["jmxUser","jmxPassword","parent"],"required",!0),b.tabs={Common:["name","parent","jmxUser","jmxPassword","number"],Advanced:["*"]};break;case"ssh":delete b.properties.jmxUser,delete b.properties.jmxPassword,delete b.properties.parent,d(b,["host"],"required",!0),Core.pathSet(b.properties,["password","type"],"password"),b.tabs={Common:["name","host","port","username","password","privateKeyFile","passPhrase"],Advanced:["*"]};break;case"jclouds":delete b.properties.jmxUser,delete b.properties.jmxPassword,delete b.properties.parent,b.tabs={Common:["name","owner","credential","providerName","imageId","hardwareId","locationId","number","instanceType"],Advanced:["*"]};break;case"openshift":delete b.properties.jmxUser,delete b.properties.jmxPassword,delete b.properties.parent,delete b.properties.manualIp,delete b.properties.preferredAddress,delete b.properties.ensembleServer,delete b.properties.proxyUri,delete b.properties.adminAccess,delete b.properties.path,delete b.properties.bindAddress,delete b.properties.hostNameContext,delete b.properties.resolver,Core.pathSet(b.properties,["resolver","default"],"publichostname"),Core.pathSet(b.properties,["serverUrl","label"],"OpenShift Broker"),Core.pathSet(b.properties,["serverUrl","tooltip"],"The OpenShift broker host name of the cloud to create the container inside. This is either the URL for your local OpenShift Enterprise installation, or its the public OpenShift online URL: openshift.redhat.com"),Core.pathSet(b.properties,["login","label"],"OpenShift Login"),Core.pathSet(b.properties,["login","tooltip"],"Your personal login to the OpenShift portal"),Core.pathSet(b.properties,["login","input-attributes","autofill"],"true"),Core.pathSet(b.properties,["password","label"],"OpenShift Password"),Core.pathSet(b.properties,["password","tooltip"],"Your personal password on the OpenShift portal"),Core.pathSet(b.properties,["password","type"],"password"),Core.pathSet(b.properties,["name","input-attributes","ng-pattern"],"/^[a-z0-9]*$/"),Core.pathSet(b.properties,["tryLogin","type"],"string"),Core.pathSet(b.properties,["tryLogin","input-attributes","ng-model"],"openShift.tryLogin"),Core.pathSet(b.properties,["tryLogin","label"],"Authenticate"),Core.pathSet(b.properties,["tryLogin","tooltip"],"Authenticate with the OpenShift Broker using your login and password"),Core.pathSet(b.properties,["tryLogin","formTemplate"],'<a ng-click="openShift.login()" ng-disabled="!entity.login || !entity.password || !entity.serverUrl" title="Test you entered the correct OpenShift Broker, login and password" class="btn btn-primary">Login to OpenShift</a><div class="alert" ng-show="openShift.loginFailed" title="Are you sure you correctly entered the OpenShift Broker, login and password correctly?">Login failed</div>'),Core.pathSet(b.properties,["domain","label"],"OpenShift Domain"),Core.pathSet(b.properties,["domain","tooltip"],"What is your unique domain name used for applications you create on OpenShift. Often this is your own user name or group name"),Core.pathSet(b.properties,["domain","input-element"],"select"),Core.pathSet(b.properties,["domain","input-attributes","ng-options"],"c for c in openShift.domains"),Core.pathSet(b.properties,["gearProfile","tooltip"],"Which kind of gear to create"),Core.pathSet(b.properties,["gearProfile","input-element"],"select"),Core.pathSet(b.properties,["gearProfile","input-attributes","ng-options"],"c for c in openShift.gearProfiles"),d(b,["serverUrl","login","password","domain"],"required",!0),b.tabs={Common:["name","serverUrl","login","password","tryLogin","domain","gearProfile","number"],Advanced:["environmentalVariables","jvmOpts","*"]};break;case"docker":case"kubernetes":delete b.properties.jmxUser,delete b.properties.jmxPassword,delete b.properties.parent,delete b.properties.manualIp,delete b.properties.preferredAddress,delete b.properties.resolver,delete b.properties.ensembleServer,delete b.properties.proxyUri,delete b.properties.adminAccess,delete b.properties.path,delete b.properties.bindAddress,delete b.properties.hostNameContext,b.tabs={Common:["name","number"],Advanced:["environmentalVariables","jvmOpts","*"]}}return b}function d(a,b,c,d){b.each(function(b){Core.pathSet(a,["properties",b,c],d)})}a.getResolvers=b,a.customizeSchema=c}(Fabric||(Fabric={}));var Git;!function(a){function b(b,c,e){var f=d(b);return f&&c?new a.JolokiaGit(f,c,e,b.userDetails):null}function c(a){return null!==d(a)}function d(b){return Core.getMBeanTypeObjectName(b,a.jmxDomain,a.mbeanType)}function e(b){return Core.getMBeanTypeFolder(b,a.jmxDomain,a.mbeanType)}function f(a){var b=e(a);return b&&"fabric"===b.entries.repo}a.createGitRepository=b,a.jmxDomain="hawtio",a.mbeanType="GitFacade",a.hasGit=c,a.getGitMBean=d,a.getGitMBeanFolder=e,a.isGitMBeanFabric=f}(Git||(Git={}));var UI;!function(a){function b(a){return Core.injector.get("$dialog").dialog({resolve:{options:function(){return a}},templateUrl:"app/ui/html/multiItemConfirmActionDialog.html",controller:["$scope","dialog","options",function(a,b,c){a.options=c,a.close=function(a){b.close(),c.onClose(a)}}]})}var c=function(){function a(){this.show=!1,this.options={backdropFade:!0,dialogFade:!0}}return a.prototype.open=function(){this.show=!0},a.prototype.close=function(){this.show=!1,this.removeBackdropFadeDiv(),setTimeout(this.removeBackdropFadeDiv,100)},a.prototype.removeBackdropFadeDiv=function(){$("div.modal-backdrop").remove()},a}();a.Dialog=c,a.multiItemConfirmActionDialog=b}(UI||(UI={}));var Git;!function(a){var b=function(){function a(a,b,c,d,e){void 0===e&&(e="master"),this.mbean=a,this.jolokia=b,this.localStorage=c,this.userDetails=d,this.branch=e}return a.prototype.getRepositoryLabel=function(a,b){return this.jolokia.request({type:"read",mbean:this.mbean,attribute:["RepositoryLabel"]},onSuccess(function(b){a(b.value.RepositoryLabel)},{error:b}))},a.prototype.exists=function(a,b,c){var d;return d=angular.isDefined(c)&&c?this.jolokia.execute(this.mbean,"exists",a,b,onSuccess(c)):this.jolokia.execute(this.mbean,"exists",a,b),!(!angular.isDefined(d)||!d)},a.prototype.read=function(a,b,c){return this.jolokia.execute(this.mbean,"read",a,b,onSuccess(c))},a.prototype.write=function(a,b,c,d,e){var f=this.getUserName(),g=this.getUserEmail();return this.jolokia.execute(this.mbean,"write",a,b,c,f,g,d,onSuccess(e))},a.prototype.writeBase64=function(a,b,c,d,e){var f=this.getUserName(),g=this.getUserEmail();return this.jolokia.execute(this.mbean,"writeBase64",a,b,c,f,g,d,onSuccess(e))},a.prototype.createDirectory=function(a,b,c,d){var e=this.getUserName(),f=this.getUserEmail();return this.jolokia.execute(this.mbean,"createDirectory",a,b,c,e,f,onSuccess(d))},a.prototype.revertTo=function(a,b,c,d,e){var f=this.getUserName(),g=this.getUserEmail();return this.jolokia.execute(this.mbean,"revertTo",a,b,c,d,f,g,onSuccess(e))},a.prototype.rename=function(a,b,c,d,e){var f=this.getUserName(),g=this.getUserEmail();return this.jolokia.execute(this.mbean,"rename",a,b,c,d,f,g,onSuccess(e))},a.prototype.remove=function(a,b,c,d){var e=this.getUserName(),f=this.getUserEmail();return this.jolokia.execute(this.mbean,"remove",a,b,c,e,f,onSuccess(d))},a.prototype.completePath=function(a,b,c,d){return this.jolokia.execute(this.mbean,"completePath",a,b,c,onSuccess(d))},a.prototype.history=function(a,b,c,d,e){return this.jolokia.execute(this.mbean,"history",a,b,c,d,onSuccess(e))},a.prototype.commitTree=function(a,b){return this.jolokia.execute(this.mbean,"getCommitTree",a,onSuccess(b))},a.prototype.commitInfo=function(a,b){return this.jolokia.execute(this.mbean,"getCommitInfo",a,onSuccess(b))},a.prototype.diff=function(a,b,c,d){return this.jolokia.execute(this.mbean,"diff",a,b,c,onSuccess(d))},a.prototype.getContent=function(a,b,c){return this.jolokia.execute(this.mbean,"getContent",a,b,onSuccess(c))},a.prototype.readJsonChildContent=function(a,b,c,d){return this.jolokia.execute(this.mbean,"readJsonChildContent",this.branch,a,b,c,onSuccess(d))},a.prototype.branches=function(a){return this.jolokia.execute(this.mbean,"branches",onSuccess(a))},a.prototype.getUserName=function(){return this.localStorage.gitUserName||this.userDetails.username||"anonymous"},a.prototype.getUserEmail=function(){return this.localStorage.gitUserEmail||"anonymous@gmail.com"},a}();a.JolokiaGit=b}(Git||(Git={}));var Wiki;!function(a){function b(a,b,c){return null!==Git.createGitRepository(a,b,c)}function c(b,c,d){var e=Core.trimLeading(b,"#");c(function(){a.log.debug("About to navigate to: "+e),d.url(e)},100)}function d(b){var c=b.branch,d=Core.trimLeading(a.startLink(c),"#");return a.customWikiViewPages.map(function(a){return d+a})}function e(b,c){var d=new Folder("New Documents");return f(b,c,d,a.documentTemplates),d}function f(a,b,c,d){angular.forEach(d,function(d){if(!d.fabricOnly||Fabric.hasFabric(a)){if(d.generated){if(d.generated.mbean){if(!a.treeContainsDomainAndProperties.apply(a,d.generated.mbean))return}d.generated.init&&d.generated.init(a,b)}var e=d.label||i,g=new Folder(e);g.parent=c,g.entity=d;var h=d.addClass;h&&(g.addClass=h);var i=d.exemplar,j=c.key||"";g.key=j?j+"_"+i:i;var k=d.icon;k&&(g.icon=Core.url(k));var l=d.tooltip||d.description||"";g.tooltip=l,d.folder&&(g.isFolder=function(){return!0}),c.children.push(g);var m=d.children;m&&f(a,b,g,m)}})}function g(a){var b="#/wiki";return a&&(b+="/branch/"+a),b}function h(a){return!(!a||!(a.endsWith("index.md")||a.endsWith("index.html")||a.endsWith("index")))}function i(a,b,c,d){void 0===d&&(d=null);var e=null,f=g(a);if(b){e=f+(h(b)?"/book/":"/view/")+m(Core.trimLeading(b,"/"))}else{e="#"+c.path().replace(/(edit|create)/,"view")}return d&&b&&b.endsWith(d)?e:(d&&(e.endsWith("/")||(e+="/"),e+=d),e)}function j(a,b,c,d){return void 0===d&&(d=null),i(a,b,c,d)}function k(b,c,d){var e=null;switch(a.fileFormat(c)){case"image":break;default:var f=g(b);e=c?f+"/edit/"+m(c):"#"+d.path().replace(/(view|create)/,"edit")}return e}function l(a,b,c,d){var e=c.path(),f=g(a),h="";h=b?f+"/create/"+m(b):"#"+e.replace(/(view|edit|formTable)/,"create");var i=h.lastIndexOf("/");return i>0&&!d.children&&!e.startsWith("/wiki/formTable")&&(h=h.substring(0,i+1)),h}function m(a){return a.split("/").map(encodeURIComponent).join("/")}function n(a){return a.split("/").map(decodeURIComponent).join("/")}function o(a,b){var c=B(a),d=null;return b||(b=Core.injector.get("fileExtensionTypeRegistry")),angular.forEach(b,function(a,b){a.indexOf(c)>=0&&(d=b)}),d}function p(a){if(a){var b=a.lastIndexOf("/");if(b>0)return a.substring(b+1)}return a}function q(a){if(a){var b=a.lastIndexOf("/");if(b>0)return a.substring(0,b)}return""}function r(b){return b&&angular.forEach(a.hideExtensions,function(a){b.endsWith(a)&&(b=b.substring(0,b.length-a.length))}),b}function s(a,b){var c=t(a,b);c=Core.url("/"+c);var d=Core.getConnectionNameParameter(location.search);if(d){var e=Core.getConnectOptions(d);e&&(e.path=c,c=Core.createServerConnectionUrl(e))}return c}function t(a,b){return a=a||"master",b=b||"/",UrlHelpers.join("git/"+a,b)}function u(a,b){return a=a||"master",b=b||"/",UrlHelpers.join(a,b)}function v(b){var c=b.name,d=b.path,e=b.branch,f=b.directory,g=b.xmlNamespaces,h=b.iconUrl,i=b.entity;i&&(c=c||i.name,d=d||i.path,e=e||i.branch,f=f||i.directory,g=g||i.xmlNamespaces,h=h||i.iconUrl),e=e||"master";var j=null,k=null,l=B(c);if(g&&g.length&&(g.any(function(b){return a.camelNamespaces.any(b)})?k="img/icons/camel.svg":g.any(function(b){return a.dozerNamespaces.any(b)})?k="img/icons/dozer/dozer.gif":g.any(function(b){return a.activemqNamespaces.any(b)})?k="img/icons/messagebroker.svg":a.log.debug("file "+c+" has namespaces "+g)),(h||l&&["png","svg","jpg","gif"].indexOf(l)>=0)&&(j=null,h?k=Fabric.toIconURL(null,h):(k=a.relativeURL(e,d),k=Fabric.toIconURL(null,k))),!k)if(f)switch(l){case"profile":j="icon-book";break;default:j="icon-folder-close"}else switch(l){case"json":case"xml":j="icon-file-text";break;case"md":j="icon-file-text-alt";break;default:j="icon-file-alt"}return k?"<img src='"+Core.url(k)+"'>":"<i class='"+j+"'></i>"}function w(a){var b=a.getProperty("name"),c=B(b);return a.getProperty("directory")?"icon-folder-close":"xml"===c?"icon-cog":"md"===c?"icon-file-text-alt":"icon-file-alt"}function x(b,c,d){b.pageId=a.pageId(c,d);var e=c.branch;"default-version"==e&&(e=b.defaultVersion),b.branch=e||d.search().branch,b.objectId=c.objectId,b.startLink=a.startLink(b.branch),b.historyLink=g(b.branch)+"/history/"+(b.pageId||"")}function y(a,b,c,d){if(void 0===d&&(d=!1),d){c.branches=Fabric.getVersionIds(a);var e=Fabric.getDefaultVersionId(a);c.branch||(c.branch=e),c.branches=c.branches.sortBy(function(a){return Core.versionToSortableString(a)},!0),Core.$apply(c)}else b.branches(function(a){c.branches=a.sortBy(function(a){return Core.versionToSortableString(a)},!0),!c.branch&&c.branches.find(function(a){return"master"===a})&&(c.branch="master"),Core.$apply(c)})}function z(a,b){var c=a.page;if(!c){for(var d=0;d<100;d++){var e=a["path"+d];if(!angular.isDefined(e))break;c?c+="/"+e:c=e}return c||"/"}return c||(c=A(b.path())),c}function A(a){var b="/wiki/";if(a&&a.startsWith(b)){var c=a.indexOf("/",b.length+1);if(c>0)return a.substring(c+1,a.length)}return null}function B(a){return a.indexOf("#")>0&&(a=a.substring(0,a.indexOf("#"))),Core.fileExtension(a,"markdown")}function C(a){console.log("Completed operation with status: "+JSON.stringify(a))}function D(a){if(a)try{return JSON.parse(a)}catch(a){Core.notification("error","Failed to parse JSON: "+a)}return null}function E(b,c,d,e){var f=e?"."+e:"",g=c.path(),h=g,i=g.lastIndexOf("/");if(i>0){g.substring(i+1).indexOf(".")>=0&&(h=g.substring(0,i))}if(d.startsWith("../")){var j=d.split("/"),k=h.split("/"),l=j.filter(function(a){return".."===a});return j=j.last(j.length-l.length),k=k.first(k.length-l.length),"#"+k.join("/")+"/"+j.join("/")+f+c.hash()}return d.startsWith("/")?a.branchLink(b.branch,d+f,c)+f:a.excludeAdjustmentPrefixes.any(function(a){return d.startsWith(a)})?null:"#"+h+"/"+d+f+c.hash()}a.log=Logger.get("Wiki"),a.camelNamespaces=["http://camel.apache.org/schema/spring","http://camel.apache.org/schema/blueprint"],a.springNamespaces=["http://www.springframework.org/schema/beans"],a.droolsNamespaces=["http://drools.org/schema/drools-spring"],a.dozerNamespaces=["http://dozer.sourceforge.net"],a.activemqNamespaces=["http://activemq.apache.org/schema/core"],a.excludeAdjustmentPrefixes=["http://","https://","#"],function(a){a[a.List=0]="List",a[a.Icon=1]="Icon"}(a.ViewMode||(a.ViewMode={}));a.ViewMode;a.customWikiViewPages=["/formTable","/camel/diagram","/camel/canvas","/camel/properties","/dozer/mappings"],a.hideExtensions=[".profile"];var F=/^[a-zA-Z0-9._-]*$/,G="Name must be: letters, numbers, and . _ or - characters",H=/^[a-z0-9._-]*$/;a.documentTemplates=[{label:"Folder",tooltip:"Create a new folder to contain documents",folder:!0,icon:"/img/icons/wiki/folder.gif",exemplar:"myfolder",regex:H,invalid:"Name must be: lower-case letters, numbers, and . _ or - characters"},{label:"Fabric8 Profile",tooltip:"Create a new empty fabric profile. Using a hyphen ('-') will create a folder heirarchy, for example 'my-awesome-profile' will be available via the path 'my/awesome/profile'.",profile:!0,addClass:"icon-book green",exemplar:"user-profile",regex:F,invalid:G,fabricOnly:!0},{label:"Properties File",tooltip:"A properties file typically used to configure Java classes",exemplar:"properties-file.properties",regex:F,invalid:G,extension:".properties"},{label:"JSON File",tooltip:"A file containing JSON data",exemplar:"document.json",regex:F,invalid:G,extension:".json"},{label:"Key Store File",tooltip:"Creates a keystore (database) of cryptographic keys, X.509 certificate chains, and trusted certificates.",exemplar:"keystore.jks",regex:F,invalid:G,extension:".jks",generated:{mbean:["hawtio",{type:"KeystoreService"}],init:function(a,b){a.jolokia.request({type:"read",mbean:"hawtio:type=KeystoreService",attribute:"SecurityProviderInfo"},{success:function(a){b.securityProviderInfo=a.value,Core.$apply(b)},error:function(a){console.log("Could not find the supported security algorithms: ",a.error),Core.$apply(b)}})},generate:function(a){var b=JSON.stringify(a.form);a.workspace.jolokia.request({type:"exec",mbean:"hawtio:type=KeystoreService",operation:"createKeyStoreViaJSON(java.lang.String)",arguments:[b]},{method:"POST",success:function(b){a.success(b.value)},error:function(b){a.error(b.error)}})},form:function(a,b){return{storeType:b.securityProviderInfo.supportedKeyStoreTypes[0],createPrivateKey:!1,keyLength:4096,keyAlgorithm:b.securityProviderInfo.supportedKeyAlgorithms[0],keyValidity:365}},schema:{description:"Keystore Settings",type:"java.lang.String",properties:{storePassword:{description:"Keystore password.",type:"password","input-attributes":{required:"","ng-minlength":6}},storeType:{description:"The type of store to create",type:"java.lang.String","input-element":"select","input-attributes":{"ng-options":"v for v in securityProviderInfo.supportedKeyStoreTypes"}},createPrivateKey:{description:"Should we generate a self-signed private key?",type:"boolean"},keyCommonName:{description:"The common name of the key, typically set to the hostname of the server",type:"java.lang.String","control-group-attributes":{"ng-show":"formData.createPrivateKey"}},keyLength:{description:"The length of the cryptographic key",type:"Long","control-group-attributes":{"ng-show":"formData.createPrivateKey"}},keyAlgorithm:{description:"The key algorithm",type:"java.lang.String","input-element":"select","input-attributes":{"ng-options":"v for v in securityProviderInfo.supportedKeyAlgorithms"},"control-group-attributes":{"ng-show":"formData.createPrivateKey"}},keyValidity:{description:"The number of days the key will be valid for",type:"Long","control-group-attributes":{"ng-show":"formData.createPrivateKey"}},keyPassword:{description:"Password to the private key",type:"password","control-group-attributes":{"ng-show":"formData.createPrivateKey"}}}}}},{label:"Markdown Document",tooltip:"A basic markup document using the Markdown wiki markup, particularly useful for ReadMe files in directories",exemplar:"ReadMe.md",regex:F,invalid:G,extension:".md"},{label:"Text Document",tooltip:"A plain text file",exemplar:"document.txt",regex:F,invalid:G,extension:".txt"},{label:"HTML Document",tooltip:"A HTML document you can edit directly using the HTML markup",exemplar:"document.html",regex:F,invalid:G,extension:".html"},{label:"XML Document",tooltip:"An empty XML document",exemplar:"document.xml",regex:F,invalid:G,extension:".xml"},{label:"Integration Flows",tooltip:"Camel routes for defining your integration flows",children:[{label:"Camel XML document",tooltip:"A vanilla Camel XML document for integration flows",icon:"/img/icons/camel.svg",exemplar:"camel.xml",regex:F,invalid:G,extension:".xml"},{label:"Camel OSGi Blueprint XML document",tooltip:"A vanilla Camel XML document for integration flows when using OSGi Blueprint",icon:"/img/icons/camel.svg",exemplar:"camel-blueprint.xml",regex:F,invalid:G,extension:".xml"},{label:"Camel Spring XML document",tooltip:"A vanilla Camel XML document for integration flows when using the Spring framework",icon:"/img/icons/camel.svg",exemplar:"camel-spring.xml",regex:F,invalid:G,extension:".xml"}]},{label:"Data Mapping Document",tooltip:"Dozer based configuration of mapping documents",icon:"/img/icons/dozer/dozer.gif",exemplar:"dozer-mapping.xml",regex:F,invalid:G,extension:".xml"}],a.isWikiEnabled=b,a.goToLink=c,a.customViewLinks=d,a.createWizardTree=e,a.addCreateWizardFolders=f,a.startLink=g,a.isIndexPage=h,a.viewLink=i,a.branchLink=j,a.editLink=k,a.createLink=l,a.encodePath=m,a.decodePath=n,a.fileFormat=o,a.fileName=p,a.fileParent=q,a.hideFileNameExtensions=r,a.gitRestURL=s,a.gitRelativeURL=t,a.relativeURL=u,a.fileIconHtml=v,a.iconClass=w,a.initScope=x,a.loadBranches=y,a.pageId=z,a.pageIdFromURI=A,a.fileExtension=B,a.onComplete=C,a.parseJson=D,a.adjustHref=E}(Wiki||(Wiki={}));var Fabric;!function(a){var b=function(){function a(){this.icons={}}return a.prototype.addIcons=function(a,b){for(var c=this,d=[],e=2;e<arguments.length;e++)d[e-2]=arguments[e];this.addIcon(a,b),d&&angular.isArray(d)&&d.forEach(function(b){c.addIcon(a,b)})},a.prototype.addIcon=function(a,b){this.icons[b]=a},a.prototype.getIcons=function(a){var b=this,c=[];return a&&angular.isArray(a)&&a.forEach(function(a){b.icons[a]&&c.push(b.icons[a])}),c.unique()},a.prototype.getIcon=function(a){return this.icons[a]},a}();a.IconRegistry=b,a.javaIcon={title:"Java",type:"img",src:"img/icons/java.svg"},a.serviceIconRegistry=new b,a.serviceIconRegistry.addIcons({title:"Kubernetes",type:"img",src:"img/icons/kubernetes.svg"},"io.kubernetes"),a.serviceIconRegistry.addIcons({title:"Fabric8",type:"img",src:"img/icons/fabric8_icon.svg"},"io.fabric8","org.fusesource.fabric"),a.serviceIconRegistry.addIcons({title:"hawtio",type:"img",src:"img/hawtio_icon.svg"},"hawtio"),a.serviceIconRegistry.addIcons({title:"Apache ActiveMQ",type:"img",src:"img/icons/messagebroker.svg"},"org.apache.activemq"),a.serviceIconRegistry.addIcons({title:"Apache Camel",type:"img",src:"img/icons/camel.svg"},"org.apache.camel"),a.serviceIconRegistry.addIcons({title:"Apache CXF",type:"icon",src:"icon-puzzle-piece"},"org.apache.cxf"),a.serviceIconRegistry.addIcons({title:"Apache Karaf",type:"icon",src:"icon-beaker"},"org.apache.karaf"),a.serviceIconRegistry.addIcons({title:"Apache Zookeeper",type:"icon",src:"icon-group"},"org.apache.zookeeper"),a.serviceIconRegistry.addIcons({title:"Jetty",type:"img",src:"img/icons/jetty.svg"},"org.eclipse.jetty.server"),a.serviceIconRegistry.addIcons({title:"Apache Tomcat",type:"img",src:"img/icons/tomcat.svg"},"Catalina","Tomcat"),a.serviceIconRegistry.addIcons({title:"WildFly",type:"img",src:"img/icons/wildfly.svg"},"jboss","wildfly"),a.serviceIconRegistry.addIcons({title:"Apache Cassandra",type:"img",src:"img/icons/cassandra.svg",class:"girthy"},"org.apache.cassandra.db","org.apache.cassandra.metrics","org.apache.cassandra.net","org.apache.cassandra.request"),a.containerIconRegistry=new b,a.containerIconRegistry.addIcons({title:"Apache Karaf",type:"icon",src:"icon-beaker"},"karaf"),a.containerIconRegistry.addIcons({title:"Apache Cassandra",type:"img",src:"img/icons/cassandra.svg",class:"girthy"},"Cassandra"),a.containerIconRegistry.addIcons({title:"Apache Tomcat",type:"img",src:"img/icons/tomcat.svg"},"Tomcat"),a.containerIconRegistry.addIcons({title:"Apache TomEE",type:"img",src:"img/icons/tomcat.svg"},"TomEE"),a.containerIconRegistry.addIcons({title:"Jetty",type:"img",src:"img/icons/jetty.svg"},"Jetty"),a.containerIconRegistry.addIcons({title:"Kubernetes",type:"img",src:"img/icons/kubernetes.svg"},"kubelet"),a.containerIconRegistry.addIcons({title:"WildFly",type:"img",src:"img/icons/wildfly.svg"},"WildFly"),a.containerIconRegistry.addIcons(a.javaIcon,"java")}(Fabric||(Fabric={}));var Core;!function(a){var b=Logger.get("Keycloak"),c=function(a){$.ajax("keycloak/enabled",{type:"GET",success:function(c){if(b.debug("Got response for check if keycloak is enabled: ",c),!0===c||"true"===c)d(a);else{var f=e(!1);a(f)}},error:function(c,d,f){b.debug("Failed to retrieve if keycloak is enabled.: ",f);var g=e(!1);a(g)}})},d=function(a){$.ajax("keycloak/client-config",{type:"GET",success:function(d){b.debug("Got response for check auth-server-url: ",d);var e=d["auth-server-url"],f=e+"/js/keycloak.js";b.debug("Will download keycloak.js from URL ",f),c(f,a)},error:function(c,d,f){b.debug("Failed to retrieve keycloak.js.: ",f);var g=e(!1);a(g)}});var c=function(a,c){var d=document.createElement("script");d.type="text/javascript",d.src=a,d.onload=function(){var a=e(!0);c(a)},d.onerror=function(){b.error("Not able to load keycloak.js from: "+a)},document.getElementsByTagName("body")[0].appendChild(d)}},e=function(b){var c=b?new Keycloak("keycloak/client-config"):null,d={enabled:b,keycloak:c};return a._module.factory("keycloakContext",function(){return d}),d},f=function(c,d){if(c.enabled){b.debug("Keycloak authentication required. Initializing Keycloak");var e,f=c.keycloak;"keycloakToken"in window?(e=window.keycloakToken,b.debug("Initialize keycloak with token passed from different window")):e={onLoad:"login-required"},f.init(e).success(function(){var a=f.tokenParsed.preferred_username;b.debug("Keycloak authenticated with Subject "+a+". Validating subject matches"),g(a,function(){b.debug("validateSubjectMatches finished! Continue next task"),h(f,d)})}).error(function(){b.warn("Keycloak authentication failed!"),a.notification("error","Failed to log in to Keycloak")})}else b.debug("Keycloak authentication not required. Skip Keycloak bootstrap"),d()},g=function(a,c){var d="keycloak/validate-subject-matches?keycloakUser="+encodeURIComponent(a);$.ajax(d,{type:"GET",success:function(a){b.debug("Got response for validate subject matches: ",a),c()},error:function(a,d,e){b.debug("Failed to validate subject matches: ",e),c()}})},h=function(c,d){c.token&&""!=c.token?(b.debug("Keycloak authentication token found! Attach it to JQuery requests"),$.ajaxSetup({beforeSend:function(d,e){if(!c.authenticated||c.isTokenExpired(10))return b.debug("Skipped request "+e.url+" for now."),c.updateToken(10).success(function(a){a&&b.debug("Keycloak token refreshed. Set new value to userDetails"),b.debug("Re-sending request after successfully update keycloak token: "+e.url),$.ajax(e)}).error(function(){b.warn("Failed to refresh keycloak token!"),c.logout()}),!1;d.setRequestHeader("Authorization",a.getBasicAuthHeader(c.tokenParsed.preferred_username,c.token))}}),$.ajax("user",{type:"GET",success:function(e){if(b.debug("Got response from user's details: ",e),e&&null!=e)d();else{var f={timeOut:"60000",onclick:function(){c.logout()}};a.notification("error","Unauthorized User<br />Click here to Logout",f)}},error:function(b,c,d){a.notification("error","Failed to log in, "+d)}})):a.notification("error","Keycloak auth token not found.")};hawtioPluginLoader.registerPreBootstrapTask(function(a){b.debug("Prebootstrap task executed"),c(function(b){f(b,a)})}),a._module.factory("keycloakPostLoginTasks",["$rootScope","userDetails","jolokiaUrl","localStorage","keycloakContext","postLogoutTasks",function(c,d,e,f,g,h){return{bootstrapIfNeeded:function(){if(g.enabled){b.debug("keycloakPostLoginTasks triggered");var i=g.keycloak;h.addTask("KeycloakLogout",function(){return i.authenticated?(b.debug("postLogoutTask: Going to trigger keycloak logout"),i.logout(),!1):(b.debug("postLogoutTask: Keycloak not authenticated. Skip calling keycloak logout"),!0)}),i.onAuthLogout=function(){b.debug("keycloakAuth.onAuthLogout triggered!"),a.logout(e,d,f,c)}}}}}])}(Core||(Core={}));var Core;!function(a){a._module.controller("Core.LoginController",["$scope","jolokia","jolokiaStatus","userDetails","jolokiaUrl","workspace","localStorage","branding","keycloakContext","postLoginTasks","postLogoutTasks",function(a,c,d,e,f,g,h,i,j,k,l){c.stop(),a.keycloakEnabled=j.enabled,a.keycloakEnabled||b(a,c,d,e,f,g,h,i,k)}]);var b=function(b,c,d,e,f,g,h,i,j){if(b.userDetails=e,b.entity={username:"",password:""},b.backstretch=$.backstretch(i.loginBg),b.rememberMe=!1,"userDetails"in h){b.rememberMe=!0;var k=angular.fromJson(h.userDetails);b.entity.username=k.username,b.entity.password=k.password}b.branding=i,b.$on("$routeChangeStart",function(){b.backstretch&&b.backstretch.destroy()}),b.doLogin=function(){if(f){""!=b.entity.username.trim()&&$.ajax("auth/login/",{type:"POST",success:function(f){e.username=b.entity.username,e.password=b.entity.password,e.loginDetails=f,b.rememberMe?h.userDetails=angular.toJson(e):delete h.userDetails,a.checkJolokiaOptimization(c,d),c.start(),g.loadTree(),a.executePostLoginTasks(),a.$apply(b)},error:function(c,d,e){switch(c.status){case 401:case 403:default:a.notification("error","Failed to log in, "+e)}a.$apply(b)},beforeSend:function(c){
c.setRequestHeader("Authorization",a.getBasicAuthHeader(b.entity.username,b.entity.password))}})}}}}(Core||(Core={}));var Fabric;!function(a){function b(b){return b.treeContainsDomainAndProperties(a.jmxDomain,{type:"Fabric"})}function c(a){return d(a)}function d(b){return b.treeContainsDomainAndProperties(a.jmxDomain,{type:"ClusterBootstrapManager"})}function e(b){return b.treeContainsDomainAndProperties(a.jmxDomain,{type:"ClusterServiceManager"})}function f(b){return b.treeContainsDomainAndProperties(a.jmxDomain,{type:"ZooKeeper"})}function g(b){return b.treeContainsDomainAndProperties(a.jmxDomain,{type:"OpenShift"})}function h(b){return b.treeContainsDomainAndProperties(a.jmxDomain,{type:"MQManager"})}function i(b){return b.treeContainsDomainAndProperties(a.schemaLookupDomain,{type:a.schemaLookupType})}function j(a){return a.treeContainsDomainAndProperties(Git.jmxDomain,{type:Git.mbeanType})}function k(b){var c=a.hasFabric(b),d=a.hasSchemaMBean(b),e=a.hasGitMBean(b);return c&&d&&e}function l(a){return b(a)&&(e(a)||d(a)||f(a))}function m(b,c,d,e){if(!b.fabricInitialized){b.fabricInitialized=!0,ContainerHelpers.decorate(b,c,d),b.gotoProfile=function(b,f){a.gotoProfile(e,d,e.localStorage,c,b,f)},b.refreshProfile=function(c,e){a.log.debug("Refreshing profile: "+e+"/"+c),c&&e&&d.request({type:"exec",mbean:a.managerMBean,operation:"refreshProfile",arguments:[c,e]},{method:"POST",success:function(){Core.notification("success","Triggered refresh of profile "+e+"/"+c),Core.$apply(b)},error:function(d){a.log.warn("Failed to trigger refresh for profile "+e+"/"+c+" due to: ",d.error),a.log.info("Stack trace: ",d.stacktrace),Core.$apply(b)}})},b.getVersionsToExclude=function(){if(!b.selectedContainers||0===b.selectedContainers.length)return[];var a=b.selectedContainers.map(function(a){return a.versionId});return a=a.unique(),a.length>1?[]:a},b.hasFabricWiki=function(){return Git.isGitMBeanFabric(e)},b.createRequiredContainers=function(a){var b=a.id,d={};b&&(d.profileIds=b);var e=a.versionId||a.version;e&&(d.versionId=e);var f=a.requirements;if(f){var g=f.minimumInstances;if(g){var h=g-(a.count||0);h>1&&(d.number=h)}}c.url("/fabric/containers/createContainer").search(d)},b.createContainer=function(){var a=null,b=S(d);angular.forEach(["openshift","docker","jclouds"],function(c){!a&&b[c]&&(a=c)}),a||(a="child"),c.url("/fabric/containers/createContainer").search("tab",a)},b.createChildContainer=function(a){a.root&&a.alive&&c.url("/fabric/containers/createContainer").search({tab:"child",parentId:a.id})},b.showProfile=function(f){var g=f.versionId||f.version||b.activeVersionId;a.gotoProfile(e,d,localStorage,c,g,f)},b.getSelectedClass=function(a){var b=[];return a.selected&&b.push("selected"),angular.isDefined(a.root)&&!1===a.root&&b.push("child-container"),b.join(" ")},b.isEnsembleContainer=function(a){return!!angular.isArray(b.ensembleContainerIds)&&b.ensembleContainerIds.any(a)},b.connect={dialog:new UI.Dialog,saveCredentials:!1,userName:null,password:null,container:null,view:null,onOK:function(){var a=b.connect.userName,c=b.connect.password,d=Core.injector.get("userDetails");d.password||(d.password=c);var e=b.connect.container;b.connect.saveCredentials&&(b.connect.saveCredentials=!1,a&&(localStorage["fabric.userName"]=a),c&&(localStorage["fabric.password"]=c));var f=Core.createConnectOptions({jolokiaUrl:e.jolokiaUrl,userName:a,password:c,useProxy:!0,view:b.connect.view,name:e.id});Core.connectToServer(localStorage,f),b.connect.container={},setTimeout(function(){b.connect.dialog.close(),Core.$apply(b)},100)}},b.doConnect=function(a,c){if(b.canConnect(a)){var d=Core.injector.get("userDetails");b.connect.userName=d.remoteJolokiaUserDetails&&d.remoteJolokiaUserDetails.username?d.remoteJolokiaUserDetails.username:d.username,b.connect.password=d.remoteJolokiaUserDetails&&d.remoteJolokiaUserDetails.password?d.remoteJolokiaUserDetails.password:d.password,b.connect.container=a,b.connect.view=c||"#/openlogs";var e=localStorage.fabricAlwaysPrompt;e&&"false"!==e||!b.connect.userName||!b.connect.password?b.connect.dialog.open():b.connect.onOK()}},b.deletePending={},b.deleteContainer=function(){b.selectedContainers.all(function(a){return!b.deletePending[a.id]})&&b.confirmDeleteDialog.open()},b.mayDelete=function(){return b.selectedContainers.length>0&&b.selectedContainers.all(function(a){return!(b.deletePending[a.id]||a.root&&a.ensembleServer)})},b.confirmDeleteDialog={dialog:new UI.Dialog,onOk:function(){b.confirmDeleteDialog.dialog.close(),angular.isDefined(b.containerId)?(b.deletePending[b.containerId]=!0,Core.unregister(d,b),c.path("/fabric/containers"),ContainerHelpers.doDeleteContainer(b,d,b.containerId,function(){delete b.deletePending[b.containerId]})):angular.isDefined(b.selectedContainers)?b.selectedContainers.each(function(a){b.deletePending[a.id]=!0,ContainerHelpers.doDeleteContainer(b,d,a.id,function(){delete b.deletePending[a.id]})}):a.log.info("Asked to delete containers but no containerId or selectedContainers attributes available")},open:function(){b.confirmDeleteDialog.dialog.open()},close:function(){b.confirmDeleteDialog.dialog.close()}},b.$watch("selectedContainers",function(a,c){if(a!==c){var d=b.selectedContainers.length;b.versionTitle="Migrate "+Core.maybePlural(d,"Container")+" to:"}}),b.onVersionChange=function(c){var e=[];if(angular.isDefined(b.selectedContainers))e=b.selectedContainers.map(function(a){return a.id});else{if(!angular.isDefined(b.row))return;e=[b.row.id]}a.log.info("Setting version to "+c+" on containers: "+e),a.migrateContainers(d,c,e,function(){Core.notification("success","Initiated container migration to version <strong>"+c+"</strong>, changes make take some time to complete"),Core.$apply(b)},function(c){Core.notification("error","Failed to migrate container "+c.error),a.log.error("Failed to migrate containers due to ",c.error),a.log.info("Stack trace: ",c.stacktrace),Core.$apply(b)})};var f=e.localStorage.fabricVerboseNotifications;b.fabricVerboseNotifications=f&&"false"!==f}}function n(a,b,c){var d="/wiki/branch/"+a+"/view/fabric/profiles",e=b.path(),f=c.branch||c.$parent.branch;e.startsWith("/wiki/branch/")&&f?(e=e.replace("/branch/"+f,"/branch/"+a),b.path(e)):b.path(d)}function o(b,c,d,e){var f=function(a){var c=a.value.id;Core.notification("success","Created version <strong>"+c+"</strong>, switching to this new version");var e=b.$root||b.$rootScope||b;e&&e.$broadcast("wikiBranchesUpdated"),n(c,d,b),Core.$apply(b)},g=function(c){a.log.error("Failed to create version due to :",c.error),a.log.info("stack trace: ",c.stacktrace),Core.$apply(b)};Core.isBlank(e)?a.createVersion(c,f,g):a.createVersionWithId(c,e,f,g)}function p(a,b){return(a||[]).sortBy(function(a){var b=parseFloat(a.id);return NaN===b&&(b=a.id),b},b)}function q(b){var c=null;if(angular.isDefined(b)&&b.has(a.fabricTopLevel)&&b!==a.fabricTopLevel){var d=b.remove(a.fabricTopLevel);if(a.useDirectoriesInGit||!d.has("/")){var e=d.indexOf(a.profileSuffix+"/"),f=d.endsWith(a.profileSuffix);(!a.useDirectoriesInGit||f||e>0)&&(a.useDirectoriesInGit&&(f?d=Core.trimTrailing(d,a.profileSuffix):e>0&&(d=d.substring(0,e)),d=d.replace(/\//g,"-")),c=d)}}return c}function r(b){return b?b.replace(/-/g,"/")+a.profileSuffix:null}function s(b,c,d,e,f){return Wiki.isWikiEnabled(b,c,d)?"/wiki/branch/"+e+"/view/fabric/profiles/"+a.profilePath(f):"/fabric/profile/"+e+"/"+f}function t(a,b,c){return b&&-1!=b||(b=Number.MAX_VALUE),a||(a=0),c?a<=c&&c<=b?"badge-success":"badge-warning":"badge-important"}function u(a,b,c,d,e,f){var g="";g=angular.isString(f)?s(a,b,c,e,f):s(a,b,c,e,f.id),Core.isBlank(g)||d.url(g)}function v(a){Core.injector.get("$location").path(UrlHelpers.join("/fabric/container",a))}function w(a,b){if(!angular.isDefined(a))return b[0];var c=b.findIndex(function(b){return b.id===a.id});return-1!==c?b[c]:b[0]}function x(a,b,c,d,e){}function y(a){return a.search().cv||"1.0"}function z(b,c,d,e){void 0===e&&(e=void 0),d&&!d.restApiUrl&&(d.restApiUrl=a.DEFAULT_REST_API),a.restApiUrl(b,function(b){var f=b.value||a.DEFAULT_REST_API;if(a.isFMCContainer(c)){try{var g=new URI(f),h=g.pathname();h&&(f=h,b.value=f)}catch(a){}var i=Core.getConnectionNameParameter(location.search);if(i){var j=Core.getConnectOptions(i);j&&(j.path=f,f=Core.createServerConnectionUrl(j))}}d&&(d.restApiUrl=f,a.log.info("got REST API: "+d.restApiUrl),Core.$apply(d)),e&&e(b)})}function A(a,b){if(!b)return b;var c=b.split("/"),d="";c.each(function(a){if(d+="/",/\.profile$/.test(a)){var b=a.substr(0,a.length-8);d+=b.replace("-","/")+".profile"}else d+=a}),b=d.substr(1);var e=Core.getConnectionNameParameter(location.search);if(e){var f=Core.getConnectOptions(e);f&&!/^proxy\/http/.test(b)&&(f.path=/^\//.test(b)?b:Core.url("/git/")+b,b=Core.createServerConnectionUrl(f),b.endsWith("jolokia")&&(b=b.replace("jolokia",f.path)))}else b=/^\//.test(b)?b:Core.url("/git/")+b;return b}function B(b,c){a.doAction("containers(java.util.List, java.util.List)",b,[["versionId"],[]],function(a){var b=a.value.map(function(a){return a.versionId}).unique();c(b)},function(b){a.log.debug("Failed to get versions in use: ",b),a.log.debug("Stack Trace: ",b.stacktrace)})}function C(b,c){var d=null;if(b){var e=b.value;e?(e=Core.useProxyIfExternal(e),d=a.createJolokia(e)):b.error&&(a.log.debug("Failed to fetch remote jolokia URL: ",b.error),a.log.debug("Stack trace: ",b.stacktrace)),c&&c(d)}return d}function D(b,c,d,e){function f(a){return C(a,e)}return c&&d?a.profileWebAppURL(b,a.jolokiaWebAppGroupId,c,d,f,f):(e(null),null)}function E(b,c,d){function e(a){return C(a,d)}return a.containerWebAppURL(b,a.jolokiaWebAppGroupId,c,e,e)}function F(b){var c=[];return angular.isDefined(b)&&angular.isDefined(b.jmxDomains)&&angular.isArray(b.jmxDomains)&&b.alive&&(c=a.serviceIconRegistry.getIcons(b.jmxDomains)),c}function G(b){var c=b.type;b.metadata&&b.metadata.containerType&&(c=b.metadata.containerType);var d=a.containerIconRegistry.getIcon(c);return d||a.javaIcon}function H(a,b,c){var d=a.find(function(a){return a.id===b});d&&c(d)}function I(a){return(J(a)||{}).id||"1.0"}function J(b){return b.execute(a.managerMBean,"defaultVersion()")}function K(b,c,d){b.setAttribute(a.managerMBean,"DefaultVersion",c,onSuccess(function(a){d()}))}function L(a,b,c){var d={};return angular.forEach(c,function(c){var e=c.profileIds;e&&angular.forEach(e,function(a){var b=d[a];b||(b=[],d[a]=b),b.push(c)}),b.profileMap=d,c.link=N(a,c.id),c.profileLinks=O(a,c.versionId,e);var f=c.versionId,g=Core.url("#/fabric/profiles?v="+f),h="<a href='"+g+"'>"+f+"</a>";c.versionHref=g,c.versionLink=h;var i=c.id||"",j="container "+i+" ",k="red-dot.png";!1===c.managed?k="spacer.gif":c.alive?c.provisionPending?k="pending.gif":"success"===c.provisionStatus&&(k="green-dot.png"):k="gray-dot.png",k="img/dots/"+k,c.statusImageHref=k,c.link="<img src='"+k+"' title='"+j+"'/> "+(c.link||i)}),c}function M(a){var b=a;return angular.isArray(a)||(b=[a]),b}function N(a,b){var c="";return angular.forEach(M(b),function(b,d){var e="";c.length>0&&(e=" "),c+=e+"<a href='"+Core.url("#/fabric/container/"+b+a.hash())+"'>"+b+"</a>"}),c}function O(a,b,c){var d="";return angular.forEach(M(c),function(c,e){var f="";d.length>0&&(f=" "),d+=f+"<a href='"+Core.url("#/fabric/profile/"+b+"/"+c+a.hash())+"'>"+c+"</a>"}),d}function P(a,b,c){return angular.forEach(c,function(c){var d=c.id;c.link=O(a,b,d),c.parentLinks=O(a,b,c.parentIds);var e=Core.url("#/fabric/containers?p="+d),f=c.containerCount,g="";f&&(g="<a href='"+e+"'>"+f+"</a>"),c.containersCountLink=g,c.containersHref=e}),c}function Q(b){var c=b.findMBeanWithProperties(a.jmxDomain,{type:"ZooKeeper"});return Core.pathGet(c,"objectName")}function R(b){var c=Core.injector.get("userDetails");return a.log.info("Logging into remote jolokia "+b+" using user details: "+StringHelpers.toString(c)),Core.createJolokia(b,c.username,c.password)}function S(b){var c=b.execute(a.managerMBean,"registeredValidProviders()"),d={};return angular.forEach(c,function(a,b){d[b]={id:b,className:a}}),d}function T(b,c,d,e){d.execute(a.schemaLookupMBean,"getSchemaForClass(java.lang.String)",c,{method:"POST",success:function(c){e(a.customizeSchema(b,angular.fromJson(c)))}})}function U(b,c,d,e){d.execute(a.schemaLookupMBean,"getSchemaForClass(java.lang.String)",c,{method:"POST",success:function(a){e(angular.fromJson(a))}})}function V(b,c){var d=b.getAttribute(a.managerMBean,"CurrentContainerName",{method:"POST"});return b.execute(a.managerMBean,"getContainer(java.lang.String, java.util.List)",d,c,{method:"POST"})}function W(b,c,d){return b.execute(a.managerMBean,"getContainer(java.lang.String, java.util.List)",c,d,{method:"POST"})}function X(b){var c=["id","root"];return b.execute(a.managerMBean,"containers(java.util.List)",c,{method:"POST"}).filter(function(a){return a.root}).map(function(a){return a.id})}function Y(b,c,d){return void 0===d&&(d=null),b.execute(a.managerMBean,"containers(java.util.List)",c,onSuccess(d))}function Z(b,c,d,e,f,h,i){if(void 0===h&&(h=null),void 0===i&&(i=null),g(b)&&d&&e&&f){var j=onSuccess(h,{error:i});return c.execute(a.openShiftFabricMBean,"getDomains",d,e,f,j)}return h&&h([]),[]}function $(b,c,d,e,f,h){return void 0===h&&(h=null),g(b)&&d&&e&&f?c.execute(a.openShiftFabricMBean,"getGearProfiles",d,e,f,onSuccess(h)):(h&&h([]),[])}function _(b,c,d){var e=[];return c&&(e=b.execute(a.managerMBean,"getProfiles(java.lang.String, java.util.List)",c,["id","hidden","abstract"],{method:"POST"})),e=e.filter(function(a){return d.some(function(b){return a.id===b})}),e=e.filter(function(a){return!a.abstract&&!a.hidden}),e.map(function(a){return a.id})}function aa(b,c,d,e){return b.execute(a.managerMBean,"getProfile(java.lang.String, java.lang.String, java.util.List)",c,d,e,{method:"POST"})}function ba(b,c,d,e,f){function g(a){return a?a.decodeBase64():null}void 0===f&&(f=null);var h=f?function(a){f(g(a))}:null,i=b.execute(a.managerMBean,"getConfigurationFile(java.lang.String, java.lang.String, java.lang.String)",c,d,e,onSuccess(h));return f?i:g(i)}function ca(b,c,d,e,f,g){var h=a.profileLink(b,c,d,e,f);return h+="/io.fabric8.mq.fabric.server-"+g+".properties"}function da(a,b,c){void 0===c&&(c=null);var d="#/jmx/attributes?tab=activemq";c&&(d+="&"+c),a.doConnect(b,d)}function ea(a){return angular.forEach(a,function(b,c){""===b&&delete a[c]}),a}a.OpenShiftCredentials={username:null,password:null},a.fabricCreated=b,a.canBootstrapFabric=c,a.hasClusterBootstrapManager=d,a.hasClusterServiceManager=e,a.hasZooKeeper=f,a.hasOpenShiftFabric=g,a.hasMQManager=h,a.hasSchemaMBean=i,a.hasGitMBean=j,a.isFMCContainer=k,a.hasFabric=l,a.initScope=m,a.viewVersion=n,a.doCreateVersion=o,a.sortVersions=p,a.pagePathToProfileId=q,a.profilePath=r,a.profileLink=s,a.containerCountBadgeStyle=t,a.gotoProfile=u,a.gotoContainer=v,a.setSelect=w,a.urlResolvers=["http:","ftp:","mvn:"],a.completeUri=x,a.getActiveVersion=y,a.loadRestApi=z,a.toIconURL=A,a.getVersionsInUse=B,a.profileJolokia=D,a.containerJolokia=E,a.getServiceList=F,a.getTypeIcon=G,a.usingProfile=H,a.getDefaultVersionId=I,a.getDefaultVersion=J,a.setDefaultVersion=K,a.defaultContainerValues=L,a.toCollection=M,a.containerLinks=N,a.profileLinks=O,a.defaultProfileValues=P,a.getZooKeeperFacadeMBean=Q,a.statusTitle=ContainerHelpers.statusTitle,a.statusIcon=ContainerHelpers.statusIcon,a.createJolokia=R,a.registeredProviders=S,a.getSchema=T,a.getDtoSchema=U,a.getCurrentContainer=V,a.getContainerFields=W,a.getRootContainers=X,a.getContainersFields=Y,a.getOpenShiftDomains=Z,a.getOpenShiftGearProfiles=$,a.filterProfiles=_,a.getProfileData=aa,a.getConfigFile=ba,a.brokerConfigLink=ca,a.connectToBroker=da,a.sanitizeJson=ea}(Fabric||(Fabric={}));var ForceGraph;!function(a){var b=function(){function a(){this.nodes={},this.links=[],this.linkTypes={}}return a.prototype.addNode=function(a){this.nodes[a.id]||(this.nodes[a.id]=a)},a.prototype.getNode=function(a){return this.nodes[a]},a.prototype.hasLinks=function(a){var b=this,c=!1;return this.links.forEach(function(d){d.source.id!=a&&d.target.id!=a||(c=c||null!=b.nodes[d.source.id]&&null!=b.nodes[d.target.id])}),c},a.prototype.addLink=function(a,b,c){null!=this.nodes[a]&&null!=this.nodes[b]&&(this.links.push({source:this.nodes[a],target:this.nodes[b],type:c}),this.linkTypes[c]||(this.linkTypes[c]={used:!0}))},a.prototype.nodeIndex=function(a,b){var c=-1,d=0;for(d=0;d<b.length;d++){if(b[d].id==a){c=d;break}}return c},a.prototype.filterNodes=function(a){var b={},c=[];d3.values(this.nodes).forEach(function(c){a(c)&&(b[c.id]=c)}),this.links.forEach(function(a){b[a.source.id]&&b[a.target.id]&&c.push(a)}),this.nodes=b,this.links=c},a.prototype.buildGraph=function(){var a=this,b=[],c=d3.keys(this.linkTypes),d=[];return d3.values(this.nodes).forEach(function(a){(null==a.includeInGraph||a.includeInGraph)&&(a.includeInGraph=!0,b.push(a))}),this.links.forEach(function(c){null!=a.nodes[c.source.id]&&null!=a.nodes[c.target.id]&&a.nodes[c.source.id].includeInGraph&&a.nodes[c.target.id].includeInGraph&&d.push({source:a.nodeIndex(c.source.id,b),target:a.nodeIndex(c.target.id,b),type:c.type})}),{nodes:b,links:d,linktypes:c}},a}();a.GraphBuilder=b}(ForceGraph||(ForceGraph={}));var ActiveMQ;!function(a){a._module.controller("ActiveMQ.BrokerDiagramController",["$scope","$compile","$location","localStorage","jolokia","workspace","$routeParams",function(b,c,d,e,f,g,h){function i(c,d,e){if(void 0===e&&(e=null),E&&c.jolokia!==f)Fabric.connectToBroker(b,c,e);else{var g="/jmx/attributes?tab=activemq";e||d&&(e="nid=root-"+D+"-Broker-"+d),e&&(g+="&"+e),a.log.info("Opening view "+g);var h=Core.url("/#"+g);window.open(h,"_destination"),window.focus()}}function j(){var a=b.selectedNodeJolokia;a&&a!==f&&a.stop()}function k(a){return(a.DestinationTemporary?"Temporary ":"")+(a.DestinationTopic?"Topic":"Queue")}function l(a){var d=[];if(a){var h=a.value||{};b.selectedNodeAttributes=h;var i=b.selectedNode||{},j=i.brokerContainer||{},l=i.type,n=i.brokerName,o=i.container||j.container,p=(i.group||j.group,i.jolokiaUrl||j.jolokiaUrl,i.profile||j.profile),q=i.version||j.version,r=l&&l.startsWith("broker"),s=I.concat(J[l]||[]),t=L[l];angular.forEach(h,function(a,b){if(t?t.indexOf(b)>=0:s.indexOf(b)<0){var c=Core.humanizeValueHtml(a);d.push({key:Core.humanizeValue(b),value:c})}}),d=d.sortBy("key");var u=null;if(n){var v='<a target="broker" ng-click="connectToBroker()"><img title="Apache ActiveMQ" src="img/icons/messagebroker.svg"> '+n+"</a>";if(q&&p){var w=Fabric.brokerConfigLink(g,f,e,q,p,n);w&&(v+=' <a title="configuration settings" target="brokerConfig" href="'+w+'"><i class="icon-tasks"></i></a>')}var x=c(v)(b);u={key:"Broker",value:x},r||d.splice(0,0,u)}o&&d.splice(0,0,{key:"Container",value:c('<div fabric-container-link="'+i.container+'"></div>')(b)});var y=h.DestinationName||i.destinationName;if(y&&"queue"!==l&&"topic"!==l){var z=k(h),x=m(y,z);d.splice(0,0,{key:z,value:x})}var A=i.typeLabel,B=i.name||i.id||i.objectName;if(A){var C;"queue"!==l&&"topic"!==l||(C=m(B,l));var D={key:A,value:C||B};r&&u&&(D=u),d.splice(0,0,D)}}b.selectedNodeProperties=d,Core.$apply(b)}function m(a,d){return void 0===d&&(d="queue"),c('<a target="destination" title="'+a+'" ng-click="connectToDestination()">'+a+"</a>")(b)}function n(a){if(a){var c=angular.toJson(a.value);if(b.responseJson===c)return;b.responseJson=c,b.brokers=a.value,r()}}function o(){var a=b.activeContainers||{};b.activeContainers={},angular.forEach(b.brokers,function(c){c.validContainer=c.alive&&c.master&&"success"===c.provisionStatus,B(c);var d=c.group,e=c.profile,f=c.brokerName,g=c.container,h=c.version||"1.0",i=x("group",d,c,function(){return{typeLabel:"Broker Group",popup:{title:"Broker Group: "+d,content:"<p>"+d+"</p>"}}}),j=x("profile",e,c,function(){return{typeLabel:"Profile",popup:{title:"Profile: "+e,content:"<p>"+e+"</p>"}}}),k=null;g&&(k=x("container",g,c,function(){return{containerId:g,typeLabel:"Container",popup:{title:"Container: "+g,content:"<p>"+g+" version: "+h+"</p>"}}}));var l=c.master,m=w(l,f,d,g,k,c);if(k&&k.validContainer){var n=k.containerId;b.activeContainers[n]=k,delete a[n]}b.viewSettings.group?b.viewSettings.profile?(y(i,j,"group"),y(j,m,"broker")):y(i,m,"group"):b.viewSettings.profile&&y(j,m,"broker"),k&&((l||b.viewSettings.slave)&&b.viewSettings.container?(y(m,k,"container"),k.destinationLinkNode=k):k.destinationLinkNode=m)}),q()}function p(){var c={jolokia:f},d="local";b.activeContainers={containerId:c},b.viewSettings.broker?f.search(D+":type=Broker,brokerName=*",onSuccess(function(b){angular.forEach(b,function(b){var e=Core.parseMBean(b);if(e){var f=e.attributes;if(a.log.info("Got broker: "+b+" on container: "+d+" properties: "+angular.toJson(f,!0)),f){var g=!0,h=f.brokerName||"unknown",i="";w(g,h,i,d,c,f)}}}),q()})):q()}function q(){angular.forEach(b.activeContainers,function(a,b){var c=a.jolokia;c?u(c,a,b):Fabric.containerJolokia(f,b,function(c){return u(c,a,b)})}),b.graph=H.buildGraph(),Core.$apply(b)}function r(){H=new ForceGraph.GraphBuilder,E?o():p()}function s(a){return a?"<p></p>broker: "+a+"</p>":""}function t(c,d){if(c){var e=g.selection;if(e&&e.domain===D){var f=e.entries.destinationType;if(f&&("Queue"===f&&"topic"===d||"Topic"===f&&"queue"===d))return!1;var h=e.entries.destinationName;if(h&&h!==c)return!1}return a.log.info("selection: "+e),!b.searchFilter||c.indexOf(b.searchFilter)>=0}return!1}function u(c,d,e){function f(e){var f=e.destType,g=e.brokerName,h=e.destinationName;if(!t(h,f))return null;if(!("topic"===f?b.viewSettings.topic:b.viewSettings.queue))return null;var i=x(f,h,e,function(){var b=e.destinationType||"Queue",f="";g&&(h.startsWith("ActiveMQ.Advisory.TempQueue_ActiveMQ.Advisory.TempTopic")||(f=D+":type=Broker,brokerName="+g+",destinationType="+b+",destinationName="+h));var i={typeLabel:b,brokerContainer:d,objectName:f,jolokia:c,popup:{title:b+": "+h,content:s(e.brokerName)}};return g||c.search(D+":destinationType="+b+",destinationName="+h+",*",onSuccess(function(b){a.log.info("Found destination mbean: "+b),b&&b.length&&(i.objectName=b[0])})),i});return i&&b.viewSettings.broker&&g&&z(A(g),i.id,"destination"),i}if(c){d.jolokia=c;var g=d.brokerName;g&&b.viewSettings.network&&b.viewSettings.broker&&c.request({type:"read",mbean:D+":connector=networkConnectors,*"},onSuccess(function(a){angular.forEach(a.value,function(a,b){var c=Core.parseMBean(b);c.attributes;if(a){C(a);var d=a.RemoteBrokerName;d&&z(A(g),A(d),"network")}}),v()})),b.viewSettings.consumer&&c.search(D+":endpoint=Consumer,*",onSuccess(function(a){angular.forEach(a,function(a){var b=Core.parseMBean(a);if(b){var e=b.attributes;if(e){C(e);var g=e.consumerId;if(g){var h=f(e);if(h){y(d.destinationLinkNode,h,"destination");y(h,x("consumer",g,e,function(){return{typeLabel:"Consumer",brokerContainer:d,objectName:a,jolokia:c,popup:{title:"Consumer: "+g,content:"<p>client: "+(e.clientId||"")+"</p> "+s(e.brokerName)}}}),"consumer")}}}}}),v()})),b.viewSettings.producer&&c.search(D+":endpoint=Producer,*",onSuccess(function(a){angular.forEach(a,function(a){var b=Core.parseMBean(a);if(b){var e=b.attributes;if(e){C(e);var g=e.producerId;if(g){var h=f(e);if(h){y(d.destinationLinkNode,h,"destination");y(x("producer",g,e,function(){return{typeLabel:"Producer",brokerContainer:d,objectName:a,jolokia:c,popup:{title:"Producer: "+g,content:"<p>client: "+(e.clientId||"")+"</p> "+s(e.brokerName)}}}),h,"producer")}v()}}}}),v()})),b.viewSettings.producer&&c.request({type:"read",mbean:D+":endpoint=dynamicProducer,*"},onSuccess(function(a){angular.forEach(a.value,function(a,b){var e=Core.parseMBean(b),g=e.attributes,h={};angular.forEach(g,function(a,b){h[b]=a}),angular.forEach(a,function(a,b){h[b]=a}),C(h),h.destinationName=h.DestinationName;var i=h.producerId||h.ProducerId;(h.DestinationTemporary||h.DestinationTopc)&&(h.destType="topic");var j=f(h);if(i&&j){y(d.destinationLinkNode,j,"destination");y(x("producer",i,h,function(){return{typeLabel:"Producer (Dynamic)",brokerContainer:d,objectName:b,jolokia:c,popup:{title:"Producer (Dynamic): "+i,content:"<p>client: "+(h.ClientId||"")+"</p> "+s(h.brokerName)}}}),j,"producer")}}),v()}))}}function v(){b.graph=H.buildGraph(),Core.$apply(b)}function w(c,d,e,f,g,h){var i=null;return(c?b.viewSettings.broker:b.viewSettings.slave)&&(i=x("broker",d+(c?"":":slave"),h,function(){return{type:c?"broker":"brokerSlave",typeLabel:c?"Broker":"Slave Broker",popup:{title:(c?"Master":"Slave")+" Broker: "+d,content:"<p>Container: "+f+"</p> <p>Group: "+e+"</p>"}}}),c&&(i.objectName||(i.objectName=D+":type=Broker,brokerName="+d,a.log.info("Guessed broker mbean: "+i.objectName)),!i.brokerContainer&&g&&(i.brokerContainer=g))),i}function x(a,c,d,e){var f=null;if(c){var g=a+":"+c;if(!(f=H.getNode(g))){var h=e();if(f=angular.copy(d),angular.forEach(h,function(a,b){return f[b]=a}),f.id=g,f.type||(f.type=a),f.name||(f.name=c),f){var i=b.shapeSize[a];i&&!f.size&&(f.size=i),f.summary||(f.summary=f.popup||""),b.viewSettings.popup||delete f.popup,b.viewSettings.label||delete f.name;var j=b.viewSettings[a];!j&&angular.isDefined(j)||H.addNode(f)}}}return f}function y(a,b,c){a&&b&&z(a.id,b.id,c)}function z(a,b,c){a&&b&&H.addLink(a,b,c)}function A(a){return a?"broker:"+a:null}function B(a){a.mbeanType=a.type,delete a.type}function C(a){B(a);var b=a.destinationType||"Queue",c=b.toLowerCase();a.isQueue=!c.startsWith("t"),a.destType=c}Fabric.initScope(b,d,f,g),b.workspace=g;var D=e.activemqJmxDomain||"org.apache.activemq",E=Fabric.isFMCContainer(g);b.isFmc=E,E&&(b.version=h.versionId,"default-version"==b.version&&(b.version=Fabric.getDefaultVersionId(f)),b.selectedVersion={id:b.version}),b.selectedNode=null;var F={panel:!0,popup:!1,label:!0,group:!1,profile:!1,slave:!1,broker:E,network:!0,container:!1,queue:!0,topic:!0,consumer:!0,producer:!0};b.viewSettings={},b.shapeSize={broker:20,queue:14,topic:14};var G=Core.throttled(r,1e3),H=new ForceGraph.GraphBuilder;Core.bindModelToSearchParam(b,d,"searchFilter","q",""),angular.forEach(F,function(a,c){function e(){var b=d.search()[g]||a;return"false"!==b&&b}var f="viewSettings."+c,g=c,h=e();Core.pathSet(b,f,h),b.$watch(f,function(){var a=Core.pathGet(b,f);a!==e()&&(a!==F[c]?(a||(a="false"),d.search(g,a)):d.search(g,null));G()})}),b.connectToBroker=function(){var a=b.selectedNode;if(a){i(a.brokerContainer||a,a.brokerName)}},b.connectToDestination=function(){var a=b.selectedNode;if(a){var c=a.brokerContainer||a,d=a.brokerName,e=a.destinationType||a.typeLabel,f=a.destinationName,g=null;d&&e&&f&&(g="nid=root-"+D+"-Broker-"+d+"-"+e+"-"+f),i(c,d,g)}},b.$on("$destroy",function(a){j()}),b.$watch("selectedNode",function(c,d){b.unregisterFn&&(b.unregisterFn(),b.unregisterFn=null);var g=b.selectedNode;if(g){var h=g.objectName,i=g.brokerContainer||{},k=g.jolokia||i.jolokia||f;if(k!==b.selectedNodeJolokia&&(j(),b.selectedNodeJolokia=k,k!==f)){var m=Core.parseIntValue(e.updateRate||"2000","update rate");m&&k.start(m)}var n={value:g.panelProperties||{}};h&&k?(a.log.debug("reading ",h," on remote container"),b.unregisterFn=Core.register(k,b,{type:"read",mbean:h},onSuccess(l,{error:function(a){l(n),Core.defaultJolokiaErrorHandler(a)}}))):(a.log.debug("no mbean or jolokia available, using dummy response"),l(n))}});var I=["Broker","BrokerId","BrokerName","Connection","DestinationName","DestinationQueue","DestinationTemporary","DestinationTopic"],J={producer:["Producer","ProducerId"],queue:["Name","MessageGroups","MessageGroupType","Subscriptions"],topic:["Name","Subscriptions"],broker:["DataDirectory","DurableTopicSubscriptions","DynamicDestinationProducers","InactiveDurableToppicSubscribers"]},K=["AverageMessageSize","BrokerId","JobSchedulerStorePercentUsage","Slave","MemoryPercentUsage","StorePercentUsage","TempPercentUsage"],L={broker:K,brokerSlave:K};if(b.$watch("searchFilter",function(a,b){G()}),E){var M=null;b.$watch("selectedVersion.id",function(a,c){Core.isBlank(a)||(M&&M(),M=Core.register(f,b,{type:"exec",mbean:Fabric.mqManagerMBean,operation:"loadBrokerStatus(java.lang.String)",arguments:[a]},onSuccess(n)))})}else b.$watch("workspace.tree",function(){G()}),b.$on("jmxTreeUpdated",function(){G()})}])}(ActiveMQ||(ActiveMQ={}));var ActiveMQ;!function(a){a.BrowseQueueController=a._module.controller("ActiveMQ.BrowseQueueController",["$scope","workspace","jolokia","localStorage","$location","activeMQMessage","$timeout","$routeParams",function(b,c,d,e,f,g,h,i){function j(d){if(z.debug("populateTable"),0===b.queueNames.length){var e=a.retrieveQueueNames(c,!0),f=c.selection.title;b.queueNames=e.filter(function(a){return a!==f})}var g=d.value;angular.isArray(g)?b.allMessages=g:(b.allMessages=[],angular.forEach(g,function(a,c){b.allMessages.push(a)})),angular.forEach(b.allMessages,function(a){a.headerHtml=l(a),a.bodyText=k(a)}),s(b.gridOptions.filterOptions.filterText),Core.$apply(b)}function k(a){if(a.Text){var b=a.Text,c=""+b.length;return a.textMode="text ("+c+" chars)",b}if(a.BodyPreview){var b,d=Core.parseIntValue(e.activemqBrowseBytesMessages||"1","browse bytes messages");if(a.textMode="bytes (turned off)",99!=d){var f=[],g=[];a.BodyPreview.forEach(function(a){if(1!==d&&2!==d||g.push(String.fromCharCode(a)),1===d||4===d){var b=a.toString(16);1===b.length&&(b="0"+b),f.push(b)}else{var b=a.toString(10);f.push(b)}});var h=f.join(" "),i=g.join("");if(1===d||2===d){var j=a.BodyPreview.length,c=""+g.length;b="bytes:\n"+h+"\n\ntext:\n"+i,a.textMode="bytes ("+j+" bytes) and text ("+c+" chars)"}else{var j=a.BodyPreview.length;b=h,a.textMode="bytes ("+j+" bytes)"}}return b}return a.textMode="unsupported","Unsupported message body type which cannot be displayed by hawtio"}function l(a){function b(a,b){return a>b?1:a<b?-1:0}function c(a){var b=e[a];null===b&&(b=""),k.push('<tr><td class="propertyName"><span class="green">Header</span> - '+a+'</td><td class="property-value">'+b+"</td></tr>")}function d(a){var b=f[a];null===b&&(b=""),k.push('<tr><td class="propertyName">'+a+'</td><td class="property-value">'+b+"</td></tr>")}var e=m(a),f=n(a),g=Object.extended(e).keys(),h=Object.extended(f).keys().sort(b),i=g.filter(function(a){return a.startsWith("JMS")}).sort(b),j=g.subtract(i,h).sort(b),k=[];return i.forEach(c),j.forEach(c),h.forEach(d),k.join("\n")}function m(a){var b={};return angular.forEach(a,function(a,c){B.any(c)||C.any(c)||(b[Core.escapeHtml(c)]=Core.escapeHtml(a))}),b}function n(a){var b={};return angular.forEach(a,function(a,c){!B.any(c)&&C.any(c)&&angular.forEach(a,function(a,d){b['<span class="green">'+c.replace("Properties"," Property")+"</span> - "+Core.escapeHtml(d)]=Core.escapeHtml(a)})}),b}function o(){var e;if(b.queueName){b.showButtons=!1,b.dlq=!1;var g=a.getBrokerMBean(c,d,A);d.request({type:"exec",mbean:g,operation:"browseQueue(java.lang.String)",arguments:[b.queueName]},onSuccess(j,{error:function(a){b.queueName=null,b.showButtons=!0,Core.$apply(b),o()}})),b.queueName=null}else{if(c.selection)e=c.selection.objectName;else{var h=f.search().nid;e=c.keyToNodeMap[h].objectName}e&&(b.dlq=!1,d.getAttribute(e,"DLQ",onSuccess(p,{silent:!0})),d.request({type:"exec",mbean:e,operation:"browse()"},onSuccess(j)))}}function p(a){b.dlq=a,Core.$apply(b)}function q(){}function r(){y(),Core.notification("success",b.message),setTimeout(o,50),Core.$apply(b)}function s(a){t(w(a))}function t(a){a&&0!==a.length?(z.debug("Filtering conditions:",a),b.messages=b.allMessages.filter(function(b){z.debug("Message:",b);var c=!0;return $.each(a,function(a,d){c=d.column?c&&b[d.column]&&d.regex.test(b[d.column])||b.StringProperties&&b.StringProperties[d.column]&&d.regex.test(b.StringProperties[d.column]):c&&u(b,d.regex)}),c})):b.messages=b.allMessages}function u(a,b){for(var c=["JMSDestination","JMSDeliveryMode","JMSExpiration","JMSPriority","JMSMessageID","JMSTimestamp","JMSCorrelationID","JMSReplyTo","JMSType","JMSRedelivered"],d=0;d<c.length;d++){var e=c[d];if(a[e]&&b.test(a[e]))return!0}if(a.StringProperties)for(var f in a.StringProperties)if(b.test(a.StringProperties[f]))return!0;return!(!a.bodyText||!b.test(a.bodyText))}function v(a,b){try{return new RegExp(a,b)}catch(b){
return new RegExp(a.replace(/(\^|\$|\(|\)|<|>|\[|\]|\{|\}|\\|\||\.|\*|\+|\?)/g,"\\$1"))}}function w(a){var b,c=[];if(b=$.trim(a)){for(var d=b.split(";"),e=0;e<d.length;e++){var f=d[e].split(":");if(f.length>1){var g=$.trim(f[0]),h=$.trim(f[1]);g&&h&&c.push({column:g,columnDisplay:g.replace(/\s+/g,"").toLowerCase(),regex:v(h,"i")})}else{var i=$.trim(f[0]);i&&c.push({column:"",regex:v(i,"i")})}}return c}}function x(a,c){b.gridOptions.$gridScope.allSelected=void 0===c?a.config.selectedItems.length==b.messages.length:c}function y(){b.gridOptions.selectedItems.length=0,b.gridOptions.$gridScope.allSelected=!1}var z=Logger.get("ActiveMQ"),A=e.activemqJmxDomain||"org.apache.activemq";b.queueNames=[],b.queueName=i.queueName,b.searchText="",b.workspace=c,b.allMessages=[],b.messages=[],b.headers={},b.mode="text",b.showButtons=!0,b.deleteDialog=!1,b.moveDialog=!1,b.gridOptions={selectedItems:[],data:"messages",displayFooter:!1,showFilter:!1,showColumnMenu:!0,enableColumnResize:!0,enableColumnReordering:!0,enableHighlighting:!0,filterOptions:{filterText:"",useExternalFilter:!0},selectWithCheckboxOnly:!0,showSelectionCheckbox:!0,maintainColumnRatios:!1,columnDefs:[{field:"JMSMessageID",displayName:"Message ID",cellTemplate:'<div class="ngCellText"><a ng-click="openMessageDialog(row)">{{row.entity.JMSMessageID}}</a></div>',width:"34%"},{field:"JMSType",displayName:"Type",width:"10%"},{field:"JMSPriority",displayName:"Priority",width:"7%"},{field:"JMSTimestamp",displayName:"Timestamp",width:"19%"},{field:"JMSExpiration",displayName:"Expires",width:"10%"},{field:"JMSReplyTo",displayName:"Reply To",width:"10%"},{field:"JMSCorrelationID",displayName:"Correlation ID",width:"10%"}],afterSelectionChange:x},b.showMessageDetails=!1;var B=["PropertiesText","BodyPreview","Text"],C=["BooleanProperties","ByteProperties","ShortProperties","IntProperties","LongProperties","FloatProperties","DoubleProperties","StringProperties"];b.$watch("workspace.selection",function(){setTimeout(o,50)}),b.$watch("gridOptions.filterOptions.filterText",function(a){s(a)}),b.openMessageDialog=function(c){a.selectCurrentMessage(c,"JMSMessageID",b),b.row&&(b.mode=CodeEditor.detectTextFormat(b.row.Text),b.showMessageDetails=!0)},b.refresh=function(){b.gridOptions.selectedItems.length=0,setTimeout(o,50)},a.decorate(b),b.moveMessages=function(){var a=c.selection,e=a.objectName;if(e&&a&&b.queueName){var f=b.gridOptions.selectedItems;b.message="Moved "+Core.maybePlural(f.length,"message")+" to "+b.queueName;angular.forEach(f,function(a,c){var g=a.JMSMessageID;if(g){var h=c+1<f.length?q:r;d.execute(e,"moveMessageTo(java.lang.String, java.lang.String)",g,b.queueName,onSuccess(h))}})}},b.resendMessage=function(){var a=c.selection;if(a.objectName&&a){var d=b.gridOptions.selectedItems;g.message=d[0],f.path("activemq/sendMessage")}},b.deleteMessages=function(){var a=c.selection,e=a.objectName;if(e&&a){var f=b.gridOptions.selectedItems;b.message="Deleted "+Core.maybePlural(f.length,"message");angular.forEach(f,function(a,b){var c=a.JMSMessageID;if(c){var g=b+1<f.length?q:r;d.execute(e,"removeMessage(java.lang.String)",c,onSuccess(g))}})}},b.retryMessages=function(){var a=c.selection,e=a.objectName;if(e&&a){var f=b.gridOptions.selectedItems;b.message="Retry "+Core.maybePlural(f.length,"message");angular.forEach(f,function(a,b){var c=a.JMSMessageID;if(c){var g=b+1<f.length?q:r;d.execute(e,"retryMessage(java.lang.String)",c,onSuccess(g))}})}}}])}(ActiveMQ||(ActiveMQ={}));var ActiveMQ;!function(a){a._module.controller("ActiveMQ.DestinationController",["$scope","workspace","jolokia","localStorage",function(b,c,d,e){function f(){b.destinationTypeName=b.queueType?"Queue":"Topic"}function g(){b.destinationName="",b.workspace.operationCounter+=1,Core.$apply(b),Core.notification("success",b.message),b.workspace.loadTree()}function h(){c.removeAndSelectParentNode(),b.workspace.operationCounter+=1,Core.$apply(b),Core.notification("success",b.message),b.workspace.loadTree()}function i(a){return-1==a.indexOf(":")}function j(b,d){var e=!1,f=d?a.retrieveQueueNames(c,!1):a.retrieveTopicNames(c,!1);return angular.forEach(f,function(a){b===a&&(e=!0)}),e}var k=e.activemqJmxDomain||"org.apache.activemq";b.workspace=c,b.message="",b.queueType="true",b.createDialog=!1,b.deleteDialog=!1,b.purgeDialog=!1,f(),b.$watch("queueType",function(){f()}),b.$watch("workspace.selection",function(){c.moveIfViewInvalid()}),b.validateAndCreateDestination=function(a,c){return i(a)?j(a,c)?void Core.notification("error","The "+(c?"queue":"topic")+' "'+a+'" already exists'):void b.createDestination(a,c):void(b.createDialog=!0)},b.createDestination=function(e,f){var h=a.getBrokerMBean(c,d,k);if(e=Core.escapeHtml(e),h){var i;f?(i="addQueue(java.lang.String)",b.message="Created queue "+e):(i="addTopic(java.lang.String)",b.message="Created topic "+e),h?d.execute(h,i,e,onSuccess(g)):Core.notification("error","Could not find the Broker MBean!")}},b.deleteDestination=function(){var e=a.getBrokerMBean(c,d,k),f=c.selection,g=f.entries;if(e&&f&&d&&g){var i,j=(f.domain,g.Destination||g.destinationName||f.title),l="Topic"!==(g.Type||g.destinationType);l?(i="removeQueue(java.lang.String)",b.message="Deleted queue "+j):(i="removeTopic(java.lang.String)",b.message="Deleted topic "+j),-1!=j.indexOf("_")&&(j=d.getAttribute(c.getSelectedMBeanName(),"Name",onSuccess(null))),d.execute(e,i,j,onSuccess(h))}},b.purgeDestination=function(){var a=c.getSelectedMBeanName(),e=c.selection,f=e.entries;if(a&&e&&d&&f){var h=f.Destination||f.destinationName||e.title;b.message="Purged queue "+h,h=h.unescapeHTML(),d.execute(a,"purge()",onSuccess(g))}},b.name=function(){var a=c.selection;return a?a.title:null}}])}(ActiveMQ||(ActiveMQ={}));var ActiveMQ;!function(a){a._module.controller("ActiveMQ.QueuesController",["$scope","workspace","jolokia","localStorage",function(b,c,d,e){function f(){Core.notification("error","The feature is not available in this broker version!"),b.workspace.selectParentNode()}function g(a){var c=JSON.parse(a.value);b.destinations=[],angular.forEach(c.data,function(a,c){b.destinations.push(a)}),b.totalServerItems=c.count,1==i&&(b.gridOptions.pagingOptions.currentPage=1,i=!1),Core.$apply(b)}var h=e.activemqJmxDomain||"org.apache.activemq";b.workspace=c,b.destinationType,b.destinations=[],b.totalServerItems=0,b.pagingOptions={pageSizes:[50,100,200],pageSize:100,currentPage:1},b.destinationFilter={name:"",filter:"",sortColumn:"",sortOrder:""},b.destinationFilterOptions=[{id:"noConsumer",name:"No Consumer"}],b.destinationFilter,b.sortOptions={fields:["name"],directions:["asc"]};var i=!1,j=[],k=[{field:"inFlightCount",displayName:"In-flight Count",visible:!1},{field:"expiredCount",displayName:"Expired Count",visible:!1},{field:"memoryPercentUsage",displayName:"Memory Percent Usage [%]",visible:!1},{field:"memoryLimit",displayName:"Memory Limit",visible:!1},{field:"memoryUsageByteCount",displayName:"Memory Usage Byte Count",visible:!1},{field:"memoryUsagePortion",displayName:"Memory Usage Portion",visible:!1},{field:"forwardCount",displayName:"Forward Count",visible:!1},{field:"maxAuditDepth",displayName:"Max Audit Depth",visible:!1},{field:"maxEnqueueTime",displayName:"Max Enqueue Time",visible:!1},{field:"maxMessageSize",displayName:"Max Message Size",visible:!1},{field:"maxPageSize",displayName:"Max Page Size",visible:!1},{field:"maxProducersToAudit",displayName:"Max Producers To Audit",visible:!1},{field:"messagesCached",displayName:"Messages Cached",visible:!1},{field:"minEnqueueTime",displayName:"Min Enqueue Time",visible:!1},{field:"minMessageSize",displayName:"Min Message Size",visible:!1},{field:"options",displayName:"Options",visible:!1},{field:"storeMessageSize",displayName:"Store Message Size",visible:!1},{field:"totalBlockedTime",displayName:"Totel Blocked Time",visible:!1},{field:"dlq",displayName:"DLQ?",visible:!1},{field:"enableAudit",displayName:"Audit Enabled?",visible:!1},{field:"prioritizedMessages",displayName:"Prioritized Messages?",visible:!1},{field:"producerFlowControl",displayName:"Producer Flow Control?",visible:!1},{field:"useCache",displayName:"Use Cache?",visible:!1}];"topic"==b.destinationType?(b.destinationFilterOptions.push({id:"nonAdvisory",name:"No Advisory Topics"}),b.destinationFilterPlaceholder="Filter Topic Names...",j=[{field:"name",displayName:"Name",width:"*"},{field:"producerCount",displayName:"Producer Count",width:"10%"},{field:"consumerCount",displayName:"Consumer Count",width:"10%"},{field:"enqueueCount",displayName:"Enqueue Count",width:"10%"},{field:"dequeueCount",displayName:"Dequeue Count",width:"10%"},{field:"dispatchCount",displayName:"Dispatch Count",width:"10%"}],j=j.concat(k)):(b.destinationFilterOptions.push({id:"empty",name:"Only Empty"}),b.destinationFilterOptions.push({id:"nonEmpty",name:"Only Non-Empty"}),b.destinationFilterPlaceholder="Filter Queue Names...",j=[{field:"name",displayName:"Name",width:"*",cellTemplate:'<div class="ngCellText"><a href="#/activemq/browseQueue?tab=activemq&queueName={{row.entity.name}}">{{row.entity.name}}</a></div>'},{field:"queueSize",displayName:"Queue Size",width:"10%"},{field:"producerCount",displayName:"Producer Count",width:"10%"},{field:"consumerCount",displayName:"Consumer Count",width:"10%"},{field:"enqueueCount",displayName:"Enqueue Count",width:"10%"},{field:"dequeueCount",displayName:"Dequeue Count",width:"10%"},{field:"dispatchCount",displayName:"Dispatch Count",width:"10%"}],j=j.concat(k)),b.gridOptions={selectedItems:[],data:"destinations",showFooter:!0,showFilter:!0,showColumnMenu:!0,enableCellSelection:!1,enableHighlighting:!0,enableColumnResize:!0,enableColumnReordering:!0,selectWithCheckboxOnly:!1,showSelectionCheckbox:!1,multiSelect:!1,displaySelectionCheckbox:!1,pagingOptions:b.pagingOptions,filterOptions:{filterText:"",useExternalFilter:!0},enablePaging:!0,totalServerItems:"totalServerItems",maintainColumnRatios:!1,columnDefs:j,enableFiltering:!0,useExternalFiltering:!0,sortInfo:b.sortOptions,useExternalSorting:!0},b.refresh=function(){i=!0,b.loadTable()},b.loadTable=function(){b.destinationFilter.name=b.gridOptions.filterOptions.filterText,b.destinationFilter.sortColumn=b.sortOptions.fields[0],b.destinationFilter.sortOrder=b.sortOptions.directions[0];var e=a.getBrokerMBean(c,d,h);if(e){var i="queryQueues(java.lang.String, int, int)";"topic"==b.destinationType&&(i="queryTopics(java.lang.String, int, int)"),d.request({type:"exec",mbean:e,operation:i,arguments:[JSON.stringify(b.destinationFilter),b.pagingOptions.currentPage,b.pagingOptions.pageSize]},onSuccess(g,{error:f}))}},b.$watch("sortOptions",function(a,c){a!==c&&b.loadTable()},!0),b.$watch("pagingOptions",function(a,c){parseInt(a.currentPage)&&a!==c&&a.currentPage!==c.currentPage&&b.loadTable()},!0)}])}(ActiveMQ||(ActiveMQ={}));var ActiveMQ;!function(a){a._module.controller("ActiveMQ.DurableSubscriberController",["$scope","workspace","jolokia","localStorage",function(b,c,d,e){function f(){var e=a.getBrokerMBean(c,d,h);e&&(b.durableSubscribers=[],d.request({type:"read",mbean:e,attribute:["DurableTopicSubscribers"]},onSuccess(function(a){return g(a,"DurableTopicSubscribers","Active")})),d.request({type:"read",mbean:e,attribute:["InactiveDurableTopicSubscribers"]},onSuccess(function(a){return g(a,"InactiveDurableTopicSubscribers","Offline")})))}function g(c,d,e){var f=c.value;a.log.debug("Got data: ",f),b.durableSubscribers.push.apply(b.durableSubscribers,f[d].map(function(a){var b=a.objectName,c=Core.objectNameProperties(b);return"objectName"in a||("canonicalName"in a&&(b=a.canonicalName),c=Object.extended(a.keyPropertyList).clone()),c._id=b,c.status=e,c})),Core.$apply(b)}var h=e.activemqJmxDomain||"org.apache.activemq";b.workspace=c,b.refresh=f,b.durableSubscribers=[],b.tempData=[],b.createSubscriberDialog=new UI.Dialog,b.deleteSubscriberDialog=new UI.Dialog,b.showSubscriberDialog=new UI.Dialog,b.topicName="",b.clientId="",b.subscriberName="",b.subSelector="",b.gridOptions={selectedItems:[],data:"durableSubscribers",displayFooter:!1,showFilter:!1,showColumnMenu:!0,enableCellSelection:!1,enableColumnResize:!0,enableColumnReordering:!0,selectWithCheckboxOnly:!1,showSelectionCheckbox:!1,multiSelect:!1,displaySelectionCheckbox:!1,filterOptions:{filterText:""},maintainColumnRatios:!1,columnDefs:[{field:"destinationName",displayName:"Topic",width:"30%"},{field:"clientId",displayName:"Client ID",width:"30%"},{field:"consumerId",displayName:"Consumer ID",cellTemplate:'<div class="ngCellText"><span ng-hide="row.entity.status != \'Offline\'">{{row.entity.consumerId}}</span><a ng-show="row.entity.status != \'Offline\'" ng-click="openSubscriberDialog(row)">{{row.entity.consumerId}}</a></div>',width:"30%"},{field:"status",displayName:"Status",width:"10%"}]},b.doCreateSubscriber=function(e,g,i,j){b.createSubscriberDialog.close(),b.clientId=e,b.subscriberName=g,b.topicName=i,b.subSelector=j,Core.isBlank(b.subSelector)&&(b.subSelector=null);var k=a.getBrokerMBean(c,d,h);k?d.execute(k,"createDurableSubscriber(java.lang.String, java.lang.String, java.lang.String, java.lang.String)",b.clientId,b.subscriberName,b.topicName,b.subSelector,onSuccess(function(){Core.notification("success","Created durable subscriber "+e),b.clientId="",b.subscriberName="",b.topicName="",b.subSelector="",f()})):Core.notification("error","Could not find the Broker MBean!")},b.deleteSubscribers=function(){var a=b.gridOptions.selectedItems[0]._id;d.execute(a,"destroy()",onSuccess(function(){b.showSubscriberDialog.close(),Core.notification("success","Deleted durable subscriber"),f(),b.gridOptions.selectedItems.splice(0,b.gridOptions.selectedItems.length)}))},b.openSubscriberDialog=function(a){d.request({type:"read",mbean:a.entity._id},onSuccess(function(c){b.showSubscriberDialog.subscriber=c.value,b.showSubscriberDialog.subscriber.Status=a.entity.status,console.log("Subscriber is now "+b.showSubscriberDialog.subscriber),Core.$apply(b),setTimeout(function(){b.showSubscriberDialog.open(),Core.$apply(b)},100)}))},b.topicNames=function(b){return a.retrieveTopicNames(c,!1)},b.$watch("workspace.selection",function(){c.moveIfViewInvalid()||setTimeout(f,50)})}])}(ActiveMQ||(ActiveMQ={}));var ActiveMQ;!function(a){a._module.controller("ActiveMQ.JobSchedulerController",["$scope","workspace","jolokia",function(a,b,c){function d(){var d=b.selection;if(d){var f=d.objectName;f&&c.request({type:"read",mbean:f,attribute:"AllJobs"},onSuccess(e))}Core.$apply(a)}function e(b){var c=b.value;angular.isArray(c)?a.jobs=c:(a.jobs=[],angular.forEach(c,function(b,c){a.jobs.push(b)})),Core.$apply(a)}function f(){}function g(){a.gridOptions.selectedItems.splice(0),Core.notification("success",a.message),setTimeout(d,50)}a.workspace=b,a.refresh=d,a.jobs=[],a.deleteJobsDialog=new UI.Dialog,a.gridOptions={selectedItems:[],data:"jobs",displayFooter:!1,showFilter:!1,showColumnMenu:!0,enableColumnResize:!0,enableColumnReordering:!0,filterOptions:{filterText:""},selectWithCheckboxOnly:!0,showSelectionCheckbox:!0,maintainColumnRatios:!1,columnDefs:[{field:"jobId",displayName:"Job ID",width:"25%"},{field:"cronEntry",displayName:"Cron Entry",width:"10%"},{field:"delay",displayName:"Delay",width:"5%"},{field:"repeat",displayName:"repeat",width:"5%"},{field:"period",displayName:"period",width:"5%"},{field:"start",displayName:"Start",width:"25%"},{field:"next",displayName:"Next",width:"25%"}]},a.$watch("workspace.selection",function(){b.moveIfViewInvalid()||setTimeout(d,50)}),a.deleteJobs=function(){var d=b.selection,e=d.objectName;if(e&&d){var h=a.gridOptions.selectedItems;a.message="Deleted "+Core.maybePlural(h.length,"job");angular.forEach(h,function(a,b){var d=a.jobId;if(d){var i=b+1<h.length?f:g;c.execute(e,"removeJob(java.lang.String)",d,onSuccess(i))}})}}}])}(ActiveMQ||(ActiveMQ={}));var JUnit;!function(a){function b(a){return d(a)&&c(a)}function c(a){return Core.getMBeanTypeObjectName(a,"hawtio","JUnitFacade")}function d(a){return Core.getMBeanTypeObjectName(a,"hawtio","Introspector")}a.log=Logger.get("JUnit"),a.isJUnitPluginEnabled=b,a.getJUnitMBean=c,a.getIntrospectorMBean=d}(JUnit||(JUnit={}));var JUnit;!function(a){var b="junit";a._module=angular.module(b,["bootstrap","ngResource","ngGrid","datatable","hawtioCore"]),a._module.config(["$routeProvider",function(a){a.when("/junit/tests",{templateUrl:"app/junit/html/tests.html",reloadOnSearch:!1})}]),a._module.factory("inProgressStatus",function(){return{jhandle:null,data:null,result:null,alertClass:"success"}}),a._module.run(["$location","workspace","jolokia","viewRegistry","layoutFull","helpRegistry",function(b,c,d,e,f,g){e.junit="app/junit/html/layoutJUnitTree.html",g.addUserDoc("junit","app/junit/doc/help.md",function(){return a.isJUnitPluginEnabled(c)}),c.topLevelTabs.push({id:"junit",content:"JUnit",title:"View and run test cases in this process",isValid:function(b){return a.isJUnitPluginEnabled(b)},href:function(){return"#/junit/tests"}})}]),hawtioPluginLoader.addModule(b)}(JUnit||(JUnit={}));var Insight;!function(a){function b(a){return a.treeContainsDomainAndProperties("io.fabric8.insight",{type:"Elasticsearch"})}function c(a){return a.treeContainsDomainAndProperties("hawtio",{type:"plugin",name:"hawtio-kibana"})}function d(a){return a.treeContainsDomainAndProperties("hawtio",{type:"plugin",name:"hawtio-eshead"})}function e(a){var b=a.findMBeanWithProperties("io.fabric8.insight",{type:"MetricsCollector"});return b||(b=a.findMBeanWithProperties("org.fusesource.insight",{type:"MetricsCollector"})),b?b.objectName:null}function f(a,b,c,d){var e=[];for(var g in a.properties){var h=a.properties[g];"long"===h.type||"double"===h.type?e.push({title:g,field:c+g,type:b,hasHost:d}):h.properties&&e.push({title:g,isFolder:!0,children:f(h,b,c+g+".",d)})}return e}function g(a,b,c,d){var e=$(c),f=e.width()-80,g=cubism.context().serverDelay(1e3*i("1m")).clientDelay(a.updateRate).step(1e3*i(a.timespan)).size(f),j=d3.select(e[0]);j.html(""),j.selectAll(".axis").data(["top","bottom"]).enter().append("div").attr("class",function(a){return a+" axis"}).each(function(a){d3.select(this).call(g.axis().ticks(12).orient(a))}),j.append("div").attr("class","rule").call(g.rule()),g.on("focus",function(a){j.selectAll(".value").style("right",null===a?null:g.size()-a+"px")}),b.forEach(function(a){j.call(function(b){b.append("div").data([h(g,a,d)]).attr("class","horizon").call(g.horizon())})})}function h(a,b,c){return a.metric(function(a,d,e,f){var g,h=[],a=+a,d=+d,i={range:{timestamp:{from:new Date(a).toISOString(),to:new Date(d).toISOString()}}};g=b.query?{fquery:{query:{filtered:{query:{query_string:{query:b.query}},filter:i}}}}:i;var j={size:0,facets:{histo:{date_histogram:{value_field:b.field,key_field:"timestamp",interval:e+"ms"},facet_filter:g}}},k={type:"exec",mbean:"org.elasticsearch:service=restjmx",operation:"exec",arguments:["POST","/_all/"+b.type+"/_search",JSON.stringify(j)]};c.request(k,{success:function(c){var g={};jQuery.parseJSON(c.value).facets.histo.entries.forEach(function(a){g[a.time]=a.max});var i=0;for(void 0!==b.meta&&("trends-up"===b.meta.type||"peak"===b.meta.type?i=1:"trends-down"===b.meta.type&&(i=-1));a<d;){var j=0;if(0!==i){if(void 0!==g[a-e]){var k=(g[a]-g[a-e])*i;j=k>0?k:0}}else void 0!==g[a]&&(j=g[a]);h.push(j),a+=e}f(null,h)}})},b.name)}function i(a){var b=a.match(/(\d+)([Mwdhms])/);switch(b[2]){case"M":return 2592e3*b[1];case"w":return 604800*b[1];case"d":return 86400*b[1];case"h":return 3600*b[1];case"m":return 60*b[1];case"s":return b[1]}}a.managerMBean="io.fabric8:type=Fabric",a.allContainers={id:"-- all --"},a.hasInsight=b,a.hasKibana=c,a.hasEsHead=d,a.getInsightMetricsCollectorMBean=e,a.getChildren=f,a.createCharts=g}(Insight||(Insight={}));var Site;!function(a){function b(){return a.sitePluginEnabled}a.sitePluginEnabled=!1,a.isSiteNavBarValid=b}(Site||(Site={}));var Perspective;!function(a){a.containerPerspectiveEnabled=!0,a.metadata={fabric:{icon:{title:"Fabric8",type:"img",src:"img/icons/fabric8_icon.svg"},label:"Fabric",isValid:function(a){return Fabric.isFMCContainer(a)},lastPage:"#/fabric/containers",topLevelTabs:{includes:[{id:"kubernetes"},{id:"fabric.containers"},{id:"fabric.profiles"},{href:"#/wiki/branch/"},{href:"#/fabric"},{id:"fabric.requirements"},{href:"#/wiki/profile"},{href:"#/docker"},{href:"#/dashboard"},{href:"#/health"}]}},container:{icon:{title:"Java",type:"img",src:"img/icons/java.svg"},label:"Container",lastPage:"#/logs",isValid:function(a){return a&&a.tree&&a.tree.children&&a.tree.children.length},topLevelTabs:{excludes:[{href:"#/fabric"},{href:"#/kubernetes"},{id:"fabric.profiles"},{id:"fabric.containers"},{id:"fabric.requirements"},{id:"fabric.kubernetes"},{href:"#/insight"},{href:"#/camin"},{id:"insight-camel"},{id:"insight-logs"},{id:"dashboard",onCondition:function(a){return Fabric.isFMCContainer(a)}},{id:"health",onCondition:function(a){return Fabric.isFMCContainer(a)}},{id:"wiki"}]}},limited:{label:"Limited",lastPage:"#/logs",isValid:function(a){return!1},topLevelTabs:{includes:[{href:"#/jmx"},{href:"#/camel"},{href:"#/activemq"},{href:"#/jetty"},{href:"#/logs"}]}},website:{label:"WebSite",isValid:function(a){return Site.sitePluginEnabled&&Site.isSiteNavBarValid()},lastPage:"#/site/doc/index.md",topLevelTabs:{includes:[{content:"Get Started",title:"How to get started using hawtio",href:function(){return"#/site/doc/GetStarted.md"},isValid:function(){return Site.isSiteNavBarValid()}},{content:"FAQ",title:"Frequently Asked Questions",href:function(){return"#/site/FAQ.md"},isValid:function(){return Site.isSiteNavBarValid()}},{content:"User Guide",title:"All the docs on using hawtio",href:function(){return"#/site/book/doc/index.md"},isValid:function(){return Site.isSiteNavBarValid()}},{content:"Community",title:"Come on in and join our community!",href:function(){return"#/site/doc/Community.html"},isValid:function(){return Site.isSiteNavBarValid()}},{content:"Developers",title:"Resources for developers if you want to hack on hawtio or provide your own plugins",href:function(){return"#/site/doc/developers/index.md"},isValid:function(){return Site.isSiteNavBarValid()}},{content:"github",title:"Hawtio's source code and issue tracker",href:function(){return"https://github.com/hawtio/hawtio"},isValid:function(){return Site.isSiteNavBarValid()}}]}}}}(Perspective||(Perspective={}));var Perspective;!function(a){function b(b,c,d,e){var f=b.search()[a.perspectiveSearchId];return f||(f=a.choosePerspective(b,c,d,e)),f}function c(b,c,d,e){var f=[];return angular.forEach(a.metadata,function(a,b){m(c,a.isValid)&&(a.label||(a.label=b),a.title||(a.title=a.label),a.id=b,f.push(a))}),f}function d(b){var c;return angular.forEach(a.metadata,function(a,d){d===b&&(c=a)}),c}function e(b,c){var d=b.topLevelTabs.sortBy(function(a){return a.content}),e=c?a.metadata[c]:null,g=e,h=[];if(e){var i=e.topLevelTabs,j=f(i.includes,b),k=f(i.excludes,b);g&&(k=k.filter(function(d){var e=g.topLevelTabs.excludes.find(function(a){var b=a.id;return b&&b===d.id});if(null!=e&&angular.isFunction(e.onCondition)){return!!e.onCondition(b)&&(a.log.debug("Plugin "+d.id+" excluded in perspective "+c),!0)}return!0})),h=i.includes?j:d,h=h.subtract(k)}else h=d;return h}function f(a,b){function c(a,b){if(b){var c=a.content;c&&(b=angular.copy(b),b.content=c),d.push(b)}}var d=[];return angular.forEach(a,function(a){var d=a.href,e=a.id,f=a.rhref;if(d){var g=d;angular.isFunction(d)&&(g=d());var h=b.topLevelTabs.find(function(a){var b=a.href();return b&&b.startsWith(g)});h||e||!a.content||(h=a),c(a,h)}else if(e){var h=b.topLevelTabs.find(function(a){var b=a.id;return b&&b===e});c(a,h)}else if(f){var h=b.topLevelTabs.find(function(a){var b=a.href();return b&&b.match(f)});c(a,h)}}),d}function g(a,b){return b.filter(function(b){return b.href()&&m(a,b.isValid)})}function h(a,b){return b.filter(function(b){return b.href()&&m(a,b.isActive)})}function i(c,d,e,f){var g=b(c,d,e,f),h=Core.configuredPluginsForPerspectiveId(g,d,e,f),i=Core.filterTopLevelTabs(g,d,h);return i=a.filterOnlyValidTopLevelTabs(d,i)}function j(b,c,d,e){var f,g=b.url();return Fabric.isFMCContainer(c)&&(g.startsWith("/perspective/defaultPage")||g.startsWith("/login")||g.startsWith("/welcome")||g.startsWith("/index")||g.startsWith("/fabric")||g.startsWith("/profiles")||g.startsWith("/dashboard")||g.startsWith("/health")||g.startsWith("/wiki")&&g.has("/fabric/profiles")||g.startsWith("/wiki")&&g.has("/editFeatures"))&&(f="fabric"),f=f||a.defaultPerspective||"container"}function k(c,d,e,f){if(JUnit.isJUnitPluginEnabled(d))return a.log.info("JUnit detected"),"/junit/tests";var g=Core.isProxyUrl(c),h=Core.isChromeApp();if(!g&&!h&&l(f))return"/welcome";var i=a.defaultPageLocation;if(!i&&c&&d){var j=b(c,d,e,f),k=Core.getDefaultPlugin(j,d,e,f),m=a.topLevelTabsForPerspectiveId(d,j);m=a.filterOnlyValidTopLevelTabs(d,m);var n;k?m.forEach(function(a){a.id===k.id&&(n=a)}):n=m[0],n&&(i=Core.trimLeading(n.href(),"#"))}return i||"/help/index"}function l(a){var b=a.showWelcomePage;return!angular.isString(b)||"true"===b}function m(a,b){return!b||b(a)}a.log=Logger.get("Perspective"),a.perspectiveSearchId="p",a.defaultPerspective=null,a.defaultPageLocation=null,a.currentPerspectiveId=b,a.getPerspectives=c,a.getPerspectiveById=d,a.topLevelTabsForPerspectiveId=e,a.filterOnlyValidTopLevelTabs=g,a.filterOnlyActiveTopLevelTabs=h,a.getTopLevelTabsForPerspective=i,a.choosePerspective=j,a.defaultPage=k,a.shouldShowWelcomePage=l}(Perspective||(Perspective={}));var Core;!function(a){function b(b,c){var d=null;return angular.isDefined(b)&&(d=a.parseJsonText(b,"localStorage for "+c)),d}function c(c,e,f,h){var i=Perspective.topLevelTabsForPerspectiveId(e,c);if(i&&i.length>0){i=i.filter(function(a){var b=void 0;return angular.isFunction(a.href)?b=a.href():angular.isString(a.href)&&(b=a.href),b&&g(e,a.isValid,c)});var j="plugins-"+c,k=b(h[j],j);k?(k=k.filter(function(a){return i.some(function(b){return b.id===a.id})}),i.forEach(function(b){k.some(function(a){return a.id===b.id})||(a.log.info("Discovered new plugin in JVM since loading configuration: "+b.id),k.push({id:b.id,index:-1,displayName:b.content,enabled:!0,isDefault:!1}))})):k=i}return d(k)}function d(a){var b=[];return a&&a.forEach(function(a,c){var d;d=angular.isUndefined(a.displayName)?a.content:a.displayName;var e;e=!!angular.isUndefined(a.enabled)||a.enabled;var f;f=!angular.isUndefined(a.isDefault)&&a.isDefault,b.push({id:a.id,index:c,displayName:d,enabled:e,isDefault:f})}),b}function e(a,b,c){var d=Perspective.topLevelTabsForPerspectiveId(b,a);if("website"===a)return d;var e=[];return c.forEach(function(a){if(a.enabled){var b=a.id,c=null;b&&(c=d.find(function(a){return a.id===b})),c&&e.push(c)}}),e}function f(b,c,d){angular.forEach(d,function(d,e){b[e]=d.value;var f=d.converter,g=d.formatter;if(g||(g=function(a){return a}),f||(f=function(a){return a}),e in c){var h=f(c[e]);a.log.debug("from local storage, setting ",e," to ",h),b[e]=h}else{var h=d.value;a.log.debug("from default, setting ",e," to ",h),c[e]=h}var i=d.override;i||(i=function(b,f){if(b!==f){angular.isFunction(d.pre)&&d.pre(b);var h=g(b);a.log.debug("to local storage, setting ",e," to ",h),c[e]=h,angular.isFunction(d.post)&&d.post(b)}}),d.compareAsObject?b.$watch(e,i,!0):b.$watch(e,i)})}function g(a,b,c){return!b||b(a,c)}function h(b,c,d,e){var f=a.configuredPluginsForPerspectiveId(b,c,d,e),g=null;return f.forEach(function(a){a.isDefault&&(g=a)}),g}a.parsePreferencesJson=b,a.configuredPluginsForPerspectiveId=c,a.safeTabsToPlugins=d,a.filterTopLevelTabs=e,a.initPreferenceScope=f,a.isValidFunction=g,a.getDefaultPlugin=h}(Core||(Core={}));var ActiveMQ;!function(a){a._module.controller("ActiveMQ.PreferencesController",["$scope","localStorage","userDetails","$rootScope",function(a,b,c,d){Core.initPreferenceScope(a,b,{activemqUserName:{value:c.username},activemqPassword:{value:c.password},activemqBrowseBytesMessages:{value:1,converter:parseInt,formatter:function(a){return""+a}},activemqFilterAdvisoryTopics:{value:!1,converter:Core.parseBooleanValue,post:function(a){d.$broadcast("jmxTreeUpdated")}}})}])}(ActiveMQ||(ActiveMQ={}));var Tree;!function(a){function b(a){d(a,!0)}function c(a){d(a,!1)}function d(a,b){$(a).dynatree("getRoot").visit(function(a){a.expand(b)})}function e(b){if(b){angular.isArray(b)&&b.forEach(function(b){a.sanitize(b)});var c=b.title;c&&(b.title=c.unescapeHTML(!0).escapeHTML()),b.children&&a.sanitize(b.children)}}a.pluginName="tree",a.log=Logger.get("Tree"),a.expandAll=b,a.contractAll=c,a.sanitize=e,a._module=angular.module(a.pluginName,["bootstrap","ngResource","hawtioCore"]),a._module.directive("hawtioTree",["workspace","$timeout","$location",function(b,c,d){return function(e,f,g){function h(a){var b=null,c=g[a];return c&&(b=Core.pathGet(e,c),angular.isFunction(b)||(b=null)),b}function i(){Core.$applyNowOrLater(e)}function j(c){if(u=c,u&&a.sanitize(u),u&&!m){var h=$(f),j=Core.asArray(u);"true"===g.hideroot&&(j=u.children);var k={clickFolderMode:3,onActivate:function(a){var c=a.data;o?o(c,a):b.updateSelectionNode(c),Core.$apply(e)},onClick:function(a,b){if(b.metaKey){b.preventDefault();var c=d.absUrl();if(a&&a.data){var e=a.data.key;if(e){var f=d.search();f[s]=e;var g=c.indexOf("?");g<=0?c+="?":c=c.substring(0,g+1),c+=$.param(f)}}return window.open(c,"_blank"),window.focus(),!1}return!0},persist:!1,debugLevel:0,children:j,dnd:{onDragStart:p||function(a){return console.log("onDragStart!"),!0},onDragEnter:q||function(a,b){return console.log("onDragEnter!"),!0},onDrop:r||function(a,b,c){return console.log("onDrop!"),b.move(a,c),!0}}};r||q||p||delete k.dnd,m=h.dynatree(k);var l=!1,n=g.activatenodes;if(n){var t=e[n],u=h.dynatree("getTree");t&&u&&angular.forEach(Core.asArray(t),function(a){u.activateKey(a),l=!0})}var v=h.dynatree("getRoot");if(v){var w=g.onroot;if(w){var x=e[w];x&&x(v)}if(!l){var j=v.getChildren();if(j&&j.length){var y=j[0];y.expand(!0),y.activate(!0)}}}}i()}function k(){n=c(function(){i()},300)}var l=null,m=null,n=null,o=h("onselect"),p=h("ondragstart"),q=h("ondragenter"),r=h("ondrop"),l=g.hawtioTree,s=l;e.$watch(l,j),e.$on("hawtio.tree."+l,function(a){j(Core.pathGet(e,l))}),f.bind("$destroy",function(){c.cancel(n)}),k()}}]),a._module.run(["helpRegistry",function(b){b.addDevDoc(a.pluginName,"app/tree/doc/developer.md")}]),hawtioPluginLoader.addModule(a.pluginName)}(Tree||(Tree={}));var ActiveMQ;!function(a){a._module.controller("ActiveMQ.TreeHeaderController",["$scope",function(a){a.expandAll=function(){Tree.expandAll("#activemqtree")},a.contractAll=function(){Tree.contractAll("#activemqtree")}}]),a._module.controller("ActiveMQ.TreeController",["$scope","$location","workspace","localStorage",function(b,c,d,e){function f(){a.log.debug("workspace tree has changed, lets reload the activemq tree");var f=[],i=d.tree;if(i){var j=h,k=i.get(j);if(k&&(f=k.children),f.length){var l=f[0];if(!l.typeName&&l.children.length<4){var m=[];angular.forEach(f,function(a){m=m.concat(a.children)}),f=m}}f.forEach(function(a){var b=a.children;if(b){var c=b.findIndex(function(a){return"Topic"===a.title});if(c>0){var f=b[c],g="ActiveMQ-allTopics-"+a.title,h=f.children.clone();d.mapData[g]=h;if(Core.parseBooleanValue(e.activemqFilterAdvisoryTopics)){if(f&&f.children){var i=f.children.filter(function(a){return!a.title.startsWith("ActiveMQ.Advisory")});f.children=i}}else h&&(f.children=h)}}});var n=$("#activemqtree");Jmx.enableTree(b,c,d,n,f,!0),setTimeout(g,50)}}function g(){Jmx.updateTreeSelectionFromURLAndAutoSelect(c,$("#activemqtree"),function(a){if(null==a.getChildren())return null;var b=a.getChildren()[0];return b&&"Queue"===b.data.title?(a=b,a.expand(!0),a):void 0},!0)}var h=e.activemqJmxDomain||"org.apache.activemq";b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(g,50)}),b.$watch("workspace.tree",function(){f()}),b.$on("jmxTreeUpdated",function(){f()})}])}(ActiveMQ||(ActiveMQ={}));var API;!function(a){function b(b,c){if(b){a.log.info("Loading XML: "+b);var d={type:"GET",url:b,beforeSend:function(a){a.setRequestHeader("Authorization",null)},dataType:"xml",contextType:"text/xml",success:c,error:function(c,d,e){
a.log.error("Failed to query XML for: "+b+" status:"+d+" error: "+e)}};$.ajax(d)}}function c(b){var c=null;try{c=JSON.parse(b)}catch(c){a.log.info("Failed to parse JSON "+c),a.log.info("JSON: "+b)}return c}function d(b,c,d){function e(a,b){a&&(a.hide=!1,angular.forEach(a.resource,function(a){e(a,b)}),angular.forEach(a.method||a.operations,function(a){a.expanded=b}))}function f(a,b){for(var c=a[b],d=a.$$childHead;d&&!c;)c=f(d,b),d=d.$$nextSibling;return c}var g=c.search();b.container=g.container,b.objectName=g.objectName,b.showHide=function(a){a&&(a.hide=!a.hide)},b.showOperations=function(a){e(a,!1)},b.expandOperations=function(a){e(a,!0)},b.autoFormat=function(a){a||(a=f(b,"codeMirror")),a&&setTimeout(function(){CodeEditor.autoFormatEditor(a)},50)},b.container&&b.objectName?Fabric.containerJolokia(d,b.container,function(c){b.remoteJolokia=c,c?a.loadJsonSchema(c,b.objectName,function(a){b.jsonSchema=a,Core.$apply(b)}):a.log.info("No Remote Jolokia!")}):a.log.info("No container or objectName"),a.log.info("container: "+b.container+" objectName: "+b.objectName+" url: "+b.url)}function e(a,b,d){function e(a){var b={};if(a){var e=a;e&&(b=c(e))}d(b)}if(b)return a.execute(b,"getJSONSchema",onSuccess(e));var f={};return d(f),f}function f(b){var c=b.documentElement,d={};return a.convertWadlToJson(c,d)}function g(b,c){return void 0===c&&(c={}),a.convertXmlToJson(b,c,n)}function h(a){var b=[],c=null,d=Core.pathGet(a,["resources",0]);return d&&(c=d.base,angular.forEach(d.resource,function(a){var c=a.path,d=[];angular.forEach(a.method,function(a){var b=(a.name,[]),c=[];d.push({method:a.name,summary:a.summary,notes:a.notes,nickname:a.nickname,type:a.type,parameters:c,produces:["application/json"],responseMessages:b})}),b.push({path:c,operations:d})})),{apiVersion:"1.0",swaggerVersion:"1.2",basePath:c,resourcePath:null,produces:["application/json"],apis:b}}function i(a,b){return b?b.localName:null}function j(a,b,c){var d=c.elementToPropertyName||i,e=c.attributeToPropertyName||i;return angular.forEach(a.childNodes,function(e){if(1===e.nodeType){var f=d(a,e);if(f){var g=b[f]||[];angular.isArray(g)||(g=[g]);var h={};j(e,h,c),g.push(h),b[f]=g}}}),angular.forEach(a.attributes,function(c){var d=e(a,c);if(d){var f=c.nodeValue;b[d]=f}}),b}function k(a){var b=[];return angular.forEach(a,function(a){a&&(angular.isArray(a)?b=b.concat(a):b.push(a))}),b}function l(a){var b=a.objectName;if(b){var c=Core.objectNameProperties(b);c&&angular.forEach(c,function(b,c){a[c]||(a[c]=b)})}return null}function m(a,b,c,d){void 0===d&&(d="");var e=[];angular.forEach(b,function(a,b){function d(b){return angular.forEach(["podId","port","objectName"],function(c){var d=a[c];d&&(b+="&"+c+"="+encodeURIComponent(d))}),b}function f(a){return a?i+a:null}function g(a){return a?Core.useProxyIfExternal(a):a}a.path;if(a.url){l(a),a.serviceName=Core.trimQuotes(a.service)||a.containerName;var h=a.podId,i="";if(h){var j=a.port||8080;i=c+h+"/"+j}var k=g(a.swaggerUrl)||f(a.swaggerPath),m=g(a.wadlUrl)||f(a.wadlPath),n=g(a.wsdlUrl)||f(a.wsdlPath);k&&(a.apidocsHref=d("/hawtio-swagger/index.html?baseUri="+k)),m&&(a.wadlHref=d("#/api/wadl?wadl="+encodeURIComponent(m))),n&&(a.wsdlHref=d("#/api/wsdl?wsdl="+encodeURIComponent(n)))}e.push(a)}),a.apis=e,a.initDone=!0}a.log=Logger.get("API"),a.wadlNamespace="http://schemas.xmlsoap.org/wsdl/",a.loadXml=b;var n={};a.parseJson=c,a.initScope=d,a.loadJsonSchema=e,a.onWadlXmlLoaded=f,a.convertWadlToJson=g,a.convertWadlJsonToSwagger=h,a.convertXmlToJson=j,a.concatArrays=k,a.processApiData=m}(API||(API={}));var API;!function(a){a.pluginName="api",a.templatePath="app/"+a.pluginName+"/html/",a._module=angular.module(a.pluginName,["bootstrap","hawtioCore","hawtio-ui"]),a._module.config(["$routeProvider",function(a){a.when("/api/wsdl",{templateUrl:"app/api/html/wsdl.html"}).when("/api/wadl",{templateUrl:"app/api/html/wadl.html"})}]),a._module.run(["$location","workspace","viewRegistry","layoutFull","helpRegistry","ServiceRegistry",function(a,b,c,d,e,f){c.api=d,b.topLevelTabs.push({id:"apis.index",content:"APIs",title:"View the available APIs inside this fabric",isValid:function(a){return Service.hasService(f,"api-registry")},href:function(){return"#/api/services"},isActive:function(a){return a.isLinkActive("api/")}})}]),hawtioPluginLoader.addModule(a.pluginName)}(API||(API={}));var API;!function(a){a._module.controller("API.WadlViewController",["$scope","$location","$http","jolokia",function(b,c,d,e){function f(a){return g(a("content-type"))}function g(a){if(a){if(a.endsWith("xml"))return"xml";if(a.endsWith("html"))return"html";if(a.endsWith("json"))return"json"}return null}function h(){var a=b.apidocs,c=b.jsonSchema;a&&i(c,a.resources,b.parentUri)}function i(b,c,d){void 0===d&&(d=null),angular.forEach(c,function(c){var e=c.base;if(e){if(d&&e){var f=e.indexOf("/");f>0&&(e=d+e.substring(f))}}else e=d;var g=c.path;e&&g&&(e.endsWith("/")||g.startsWith("/")||(e+="/"),e+=g,c.fullPath=e);var h=c.resource;h&&i(b,h,e),angular.forEach(a.concatArrays([c.method,c.operation]),function(c){var d=c.request;if(d){d.count(function(a){return a.representation})||delete c.request}angular.forEach(a.concatArrays([c.request,c.response]),function(a){var c=a.element,d=a.representation;if(d){var e=d.map(function(a){return a.mediaType});a.mediaTypes=e,e&&e.length&&(a.contentType=e[0])}angular.forEach(d,function(a){c||(c=a.element),j(b,a)}),c&&(a.element=c)})})})}function j(a,b){var c=a?a.definitions:null;if(c&&b){var d=b.mediaType;d&&(b.dataMode=g(d));var e=b.element;if(e){var f=e.indexOf(":");f>=0&&(e=e.substring(f+1));var h="."+e,i=null;angular.forEach(c,function(a,c){i||c!==e&&!c.endsWith(h)||(i=a,b.schema=i,b.typeName=e,b.javaClass=c)})}}}function k(c){b.apidocs=a.onWadlXmlLoaded(c),Core.$apply(b)}a.initScope(b,c,e);var l=c.search();b.url=l.wadl,b.podId=l.podId,b.port=l.port,b.$watch("apidocs",h),b.$watch("jsonSchema",h),a.loadXml(b.url,k),b.tryInvoke=function(c,e,g){var h=!0;if(e){var i=e.fullPath||c+"/"+e.path;if(i){if(b.podId){var j=i.indexOf("://");if(j>0){var k=i.substring(j+3),j=k.indexOf("/");j>0&&(i="/hawtio/pod/"+b.podId+(b.port?"/"+b.port:"")+k.substring(j),h=!1)}}angular.forEach(e.param,function(b){var c=b.name;if(c){var d=b.value;(angular.isUndefined(d)||null===d)&&(d=""),d=d.toString(),a.log.debug("replacing "+c+" with '"+d+"'"),i=i.replace(new RegExp("{"+c+"}","g"),d)}});var l=h?Core.useProxyIfExternal(i):i;a.log.info("Lets invoke resource: "+l);var m=g.name||"GET";g.invoke={url:l,running:!0};var n={method:m,url:l,headers:{}};"POST"!==m&&"PUT"!==m||angular.forEach(g.request,function(a){n.data||(n.data=a.value),n.headers["Content-Type"]||(n.headers["Content-Type"]=a.contentType)}),a.log.info("About to make request: "+angular.toJson(n)),d(n).success(function(c,d,e,h){a.log.info("Worked!"+c),g.invoke={url:l,realUrl:i,success:!0,data:c,dataMode:f(e),status:d,headers:e(),config:h},Core.$apply(b)}).error(function(c,d,e,h){a.log.info("Failed: "+d),g.invoke={url:l,realUrl:i,data:c,dataMode:f(e),status:d,headers:e(),config:h},Core.$apply(b)})}}}}])}(API||(API={}));var API;!function(a){a._module.controller("API.WsdlViewController",["$scope","$location","jolokia",function(b,c,d){function e(){var a=b.services,c=b.jsonSchema;a&&c&&(i.info("We have services and jsonSchema!"),f(c,a))}function f(b,c){angular.forEach(c,function(c){angular.forEach(c.operations,function(c){angular.forEach(a.concatArrays([c.inputs,c.outputs]),function(a){g(b,a)})})})}function g(a,b){var c=a?a.definitions:null;if(c&&b){var d=b.name;if(d){var e=c[d];e&&(angular.isArray(e)&&e.length>0&&(e=e[0]),i.info("Found def "+angular.toJson(e)+" for name "+d),b.schema=e)}}}function h(a){b.services=[];var c=a.documentElement,d=c?c.getAttribute("targetNamespace"):null,e=c?c.getAttribute("name"):null,f=a.getElementsByTagNameNS(j,"portType");a.getElementsByTagNameNS(j,"service"),a.getElementsByTagNameNS(j,"binding");angular.forEach(f,function(a){var c={name:e,targetNamespace:d,portName:a.getAttribute("name")||"Unknown",operations:[]};b.services.push(c);var f=a.getElementsByTagNameNS(j,"operation");angular.forEach(f,function(a){function b(a){var b=[];return angular.forEach(a,function(a){var c=a.getAttribute("name");c&&b.push({name:c})}),b}var d=a.getElementsByTagNameNS(j,"input"),e=a.getElementsByTagNameNS(j,"output"),f={name:a.getAttribute("name")||"Unknown",inputs:b(d),outputs:b(e)};c.operations.push(f)})}),Core.$apply(b)}var i=Logger.get("API");a.initScope(b,c,d);var j="http://schemas.xmlsoap.org/wsdl/";b.url=c.search().wsdl,a.loadXml(b.url,h),b.$watch("services",e),b.$watch("jsonSchema",e)}])}(API||(API={}));var Apm;!function(a){a.log=Logger.get("Apm"),a.jmxDomain="io.fabric8.apmagent",a.agentMBean=a.jmxDomain+":type=apmAgent"}(Apm||(Apm={}));var Apm;!function(a){a.pluginName="apm",a._module=angular.module(a.pluginName,["bootstrap","ui.bootstrap","ui.bootstrap.dialog","ui.bootstrap.tabs","ui.bootstrap.typeahead","ngResource","hawtioCore","hawtio-ui"]),a._module.config(["$routeProvider",function(a){}]),a._module.run(["workspace","jolokia","viewRegistry","layoutFull","helpRegistry","preferencesRegistry",function(b,c,d,e,f,g){function h(b){var c=b.get(a.jmxDomain);c&&angular.forEach(c.children,function(a){"ThreadContextMetrics"===a.title&&angular.forEach(a.children,function(a){a.typeName||(a.typeName="ThreadContextMetrics")})})}d.apm="app/apm/html/layoutApmTree.html",f.addUserDoc("apm","app/apm/doc/help.md",function(){return b.treeContainsDomainAndProperties(a.jmxDomain)});var i=b.attributeColumnDefs;i[a.jmxDomain+"/MethodMetrics/folder"]=[{field:"Name",displayName:"Name"},{field:"Count",displayName:"Count"}],i[a.jmxDomain+"/ThreadContextMetrics/folder"]=[{field:"Name",displayName:"Name"},{field:"ThreadName",displayName:"Thread"},{field:"Count",displayName:"Count"}],b.addTreePostProcessor(h)}]),hawtioPluginLoader.addModule(a.pluginName)}(Apm||(Apm={}));var Forms;!function(a){function b(a,b){a&&b&&angular.forEach(b.properties,function(b,c){var d=b.default;d&&!a[c]&&(console.log("===== defaulting value "+d+" into entity["+c+"]"),a[c]=d)})}function c(a,b){if(a&&b){var c=f(a,b);if(c){var d=c.type;d&&(a=d)}}return a}function d(a,b,c){for(var d=f(a,b);d;){var e=Core.pathGet(d,["extends","type"]);if(!e)return!1;if(c===e)return!0;d=f(e,b)}return!1}function e(a){return a?a.replace(/-/g,"_"):a}function f(a,b){if(b){var c=b.definitions;if(c){var d=c[a];if(d){var e=d.fullSchema;if(e)return e;var g=Core.pathGet(d,["extends","type"]);if(g)return e=angular.copy(d),e.properties=e.properties||{},angular.isArray(g)||(g=[g]),angular.forEach(g,function(a){if(angular.isString(a)){var c=f(a,b),d=Core.pathGet(c,["properties"]);d&&angular.forEach(d,function(a,b){e.properties[b]=a})}}),d.fullSchema=e,e}return d}}return null}function g(a,b){var c=null;if(a&&b){if(c=a.items){var d=c.type;if(d){var e=f(d,b);if(e)return e}}var g=a.additionalProperties;if(g&&"#"===g.$ref)return b}return c}function h(a){var b=Core.pathGet(a,"type");return b&&"object"===b}function i(a,b){var c=Core.pathGet(a,"kind");return c&&b===c}function j(a,b){if(a){var d=c(a.type,b);if(d&&("object"===d||"array"===d))return!0}return!1}function k(a,b,c){return angular.isDefined(b)&&(a=angular.extend(a,b)),angular.extend(a,c)}function l(a,b,c){var d=angular.element('<div class="'+a.controlgroupclass+'"></div>');if(angular.isDefined(b.description)&&d.attr("title",b.description),a.properties&&a.properties[c]){var e=a.properties[c];e&&"control-attributes"in e&&angular.forEach(e["control-attributes"],function(a,b){d.attr(b,a)})}return d}function m(a,b,c,d){return void 0===d&&(d=!1),d?angular.element('<label class="strong '+a.labelclass+'">'+c+": </label>"):angular.element('<label class="'+a.labelclass+'">'+c+": </label>")}function n(a){return angular.element('<div class="'+a.controlclass+'"></div>')}function o(a,b,c,d){void 0===d&&(d=null);var e=Core.pathGet(a.data,["properties",c,"help"]);Core.isBlank(e)&&(e=Core.pathGet(a.data,["properties",c,"description"])),Core.isBlank(e)&&angular.isDefined(d)&&(e=Core.pathGet(d,["help"]),Core.isBlank(e)&&(e=Core.pathGet(d,["description"])));var f=a.showhelp||"true";return Core.isBlank(e)?angular.element('<span class="help-block"></span>'):angular.element('<span class="help-block" ng-show="'+f+'">'+e+"</span>")}a.log=Logger.get("Forms"),a.defaultValues=b,a.resolveTypeNameAlias=c,a.isJsonType=d,a.safeIdentifier=e,a.lookupDefinition=f,a.findArrayItemsSchema=g,a.isObjectType=h,a.isKind=i,a.isArrayOrNestedObject=j,a.configure=k,a.getControlGroup=l,a.getLabel=m,a.getControlDiv=n,a.getHelpSpan=o}(Forms||(Forms={}));var Camel;!function(a){function b(b){var c=a.getEndpointConfig(b,null),e=Core.pathGet(c,["icon"]);if(!e){var f=d(b);e=Core.pathGet(f,["endpointIcon"])}return e||a.endpointIcon}function c(b,c){var d=a.endpointConfigurations[b];return d||(d={},a.endpointConfigurations[b]=d),d.label||(d.label=b),d.icon||(d.icon=Core.pathGet(c,["endpointIcon"])||a.endpointIcon),d.category||(d.category=c),d}function d(b){return a.endpointToCategory[b]||a.endpointCategories.core}function e(){var a=_apacheCamelModel,b=a.definitions;return b&&angular.forEach(g,function(a,c){var d=b[c];d&&(d.tabs||(d.tabs=a))}),a}function f(b,c,d,e,f){function g(c){b.componentNames=c,a.log.info("onComponents: "+c),b.hasComponentNames=!!b.componentNames,Core.$apply(b)}function h(a){if(a)try{var c=JSON.parse(a),d=b.selectedComponentName;i(d,c),b.endpointSchema=c,b.schema.definitions[d]=c,b.loadedEndpointSchema=d,Core.$apply(b)}catch(b){console.log("Failed to parse JSON "+b),console.log("JSON: "+a)}}function i(b,c){console.log("======== configuring schema for "+b);var d=a.endpointForms[b];d&&c&&d.tabs&&(c.tabs=d.tabs)}function j(){var f=b.profileWorkspace;if(!f){var g=b.jolokia;g&&(f=Core.createRemoteWorkspace(g,e.jolokiaStatus,c,d),b.profileWorkspace=f)}var h=d.camelJmxDomain||"org.apache.camel";f||(a.log.info("No profileWorkspace found so defaulting it to workspace for now"),f=e);var i,j,k=b.selectedComponentName;angular.isDefined(b.camelSelectionDetails)&&(i=b.camelSelectionDetails.selectedCamelContextId,j=b.camelSelectionDetails.selectedRouteId),console.log("==== componentName "+k+" selectedCamelContextId: "+i+" selectedRouteId: "+j);var l=a.camelContextMBeansById(f,h);if(i){var m=Core.pathGet(l,[i,"mbean"]);if(m)return m}if(j){var n=a.camelContextMBeansByRouteId(f,h),m=Core.pathGet(n,[j,"mbean"]);if(m)return m}if(k){var n=a.camelContextMBeansByComponentName(f,h),m=Core.pathGet(n,[k,"mbean"]);if(m)return m}var o=null;return angular.forEach(l,function(a,b){var c=a.mbean;!o&&c&&(o=c)}),o}b.selectedComponentName=null,b.endpointParameters={},b.endpointPath="",b.schema={definitions:{}},b.jolokia=f;var k=b.branch,l=Fabric.pagePathToProfileId(b.pageId);l&&k&&Fabric.profileJolokia(f,l,k,function(c){c||(a.log.info("No container is running for profile "+l+" and version "+k+" so using current container for endpoint completion"),c=f),b.jolokia=c,b.profileWorkspace=null,b.loadEndpointNames()});var m={silent:!0};b.$watch("workspace.selection",function(){b.loadEndpointNames()}),b.$watch("selectedComponentName",function(){b.selectedComponentName!==b.loadedComponentName&&(b.endpointParameters={},b.loadEndpointSchema(b.selectedComponentName),b.loadedComponentName=b.selectedComponentName)}),b.endpointCompletions=function(a){var c=null,d=j(),e=b.selectedComponentName,f={};return d&&e&&a&&(c=b.jolokia.execute(d,"completeEndpointPath",e,f,a,onSuccess(null,m))),c||[]},b.loadEndpointNames=function(){b.componentNames=null;var a=j();a?b.jolokia.execute(a,"findComponentNames",onSuccess(g,{silent:!0})):console.log("WARNING: No camel context mbean so cannot load component names")},b.loadEndpointSchema=function(a){var c=j();c&&a&&a!==b.loadedEndpointSchema&&(b.selectedComponentName=a,b.jolokia.execute(c,"componentParameterJsonSchema",a,onSuccess(h,m)))}}a.endpointCategories={bigdata:{label:"Big Data",endpoints:["hdfs","hbase","lucene","solr"],endpointIcon:"/img/icons/camel/endpointRepository24.png"},database:{label:"Database",endpoints:["couchdb","elasticsearch","hbase","jdbc","jpa","hibernate","mongodb","mybatis","sql"],endpointIcon:"/img/icons/camel/endpointRepository24.png"},cloud:{label:"Cloud",endpoints:["aws-cw","aws-ddb","aws-sdb","aws-ses","aws-sns","aws-sqs","aws-s3","gauth","ghhtp","glogin","gtask","jclouds"]},core:{label:"Core",endpoints:["bean","direct","seda"]},messaging:{label:"Messaging",endpoints:["jms","activemq","amqp","cometd","cometds","mqtt","netty","vertx","websocket"],endpointIcon:"/img/icons/camel/endpointQueue24.png"},mobile:{label:"Mobile",endpoints:["apns"]},sass:{label:"SaaS",endpoints:["salesforce","sap-netweaver"]},social:{label:"Social",endpoints:["atom","facebook","irc","ircs","rss","smpp","twitter","weather"]},storage:{label:"Storage",endpointIcon:"/img/icons/camel/endpointFolder24.png",endpoints:["file","ftp","sftp","scp","jsch"]},template:{label:"Templating",endpoints:["freemarker","velocity","xquery","xslt","scalate","string-template"]}},a.endpointToCategory={},a.endpointIcon="/img/icons/camel/endpoint24.png",a.endpointConfigurations={activemq:{icon:"/img/icons/camel/endpoints/activemq24.png"},atom:{icon:"/img/icons/camel/endpoints/atom24.png"},bean:{icon:"/img/icons/camel/endpoints/bean24.png"},cxf:{icon:"/img/icons/camel/endpoints/cxf24.png"},cxfrs:{icon:"/img/icons/camel/endpoints/cxfrs24.png"},ejb:{icon:"/img/icons/camel/endpoints/ejb24.png"},facebook:{icon:"/img/icons/camel/endpoints/facebook24.jpg"},file:{icon:"/img/icons/camel/endpoints/file24.png"},ftp:{icon:"/img/icons/camel/endpoints/ftp24.png"},ftps:{icon:"/img/icons/camel/endpoints/ftps24.png"},imap:{icon:"/img/icons/camel/endpoints/imap24.png"},imaps:{icon:"/img/icons/camel/endpoints/imaps24.png"},jdbc:{icon:"/img/icons/camel/endpoints/jdbc24.png"},jms:{icon:"/img/icons/camel/endpoints/jms24.png"},language:{icon:"/img/icons/camel/endpoints/language24.png"},linkedin:{icon:"/img/icons/camel/endpoints/linkedin24.png"},log:{icon:"/img/icons/camel/endpoints/log24.png"},mqtt:{icon:"/img/icons/camel/endpoints/mqtt24.png"},pop3:{icon:"/img/icons/camel/endpoints/pop324.png"},pop3s:{icon:"/img/icons/camel/endpoints/pop3s24.png"},quartz:{icon:"/img/icons/camel/endpoints/quartz24.png"},quartz2:{icon:"/img/icons/camel/endpoints/quartz224.png"},rss:{icon:"/img/icons/camel/endpoints/rss24.png"},salesforce:{icon:"/img/icons/camel/endpoints/salesForce24.png"},sap:{icon:"/img/icons/camel/endpoints/SAP24.png"},"sap-netweaver":{icon:"/img/icons/camel/endpoints/SAPNetweaver24.jpg"},servlet:{icon:"/img/icons/camel/endpoints/servlet24.png"},sftp:{icon:"/img/icons/camel/endpoints/sftp24.png"},smtp:{icon:"/img/icons/camel/endpoints/smtp24.png"},smtps:{icon:"/img/icons/camel/endpoints/smtps24.png"},snmp:{icon:"/img/icons/camel/endpoints/snmp24.png"},sql:{icon:"/img/icons/camel/endpoints/sql24.png"},timer:{icon:"/img/icons/camel/endpoints/timer24.png"},twitter:{icon:"/img/icons/camel/endpoints/twitter24.png"},weather:{icon:"/img/icons/camel/endpoints/weather24.jpg"},xslt:{icon:"/img/icons/camel/endpoints/xslt24.jpg"}},a.endpointForms={file:{tabs:{Options:["*"]}},activemq:{tabs:{Connection:["clientId","transacted","transactedInOut","transactionName","transactionTimeout"],Producer:["timeToLive","priority","allowNullBody","pubSubNoLocal","preserveMessageQos"],Consumer:["concurrentConsumers","acknowledgementModeName","selector","receiveTimeout"],Reply:["replyToDestination","replyToDeliveryPersistent","replyToCacheLevelName","replyToDestinationSelectorName"],Options:["*"]}}},a.endpointForms.jms=a.endpointForms.activemq,angular.forEach(a.endpointCategories,function(b,c){b.id=c,angular.forEach(b.endpoints,function(c){a.endpointToCategory[c]=b})});var g={route:{Overview:["id","description"],Advanced:["*"]}};a.getEndpointIcon=b,a.getEndpointConfig=c,a.getEndpointCategory=d,a.getConfiguredCamelModel=e,a.initEndpointChooserScope=f}(Camel||(Camel={}));var Camel;!function(a){function b(a,b,c,d,e){function f(a){var b=null,c=a?a.value:null;if(c){var e=$.parseXML(c),f=$(e).find("route[id='"+g+"']");f&&f.length&&(b=f[0])}d(b)}var g=V(a,c),h=H(a,c,e)||G(a,e);h&&g?b.request({type:"exec",mbean:h,operation:"dumpRoutesAsXml()"},onSuccess(f,{error:f})):(g||console.log("No selectedRouteId when trying to lazy load the route!"),d(null))}function c(a){var b=null;if(a&&!(b=a.getAttribute("uri"))){var c=a.getAttribute("ref");if(c){var d=a.getAttribute("method");b=d?c+"."+d+"()":"ref:"+c}}return b}function d(b,c){void 0===c&&(c={});var d=b.camelNodeData;if(!d){var e=b.routeXmlNode;e&&(d=a.getRouteNodeJSON(e)),d||(d=c),b.camelNodeData=d}return d}function e(b,c){if(void 0===c&&(c={}),b){angular.forEach(b.attributes,function(a){c[a.name]=a.value});var d=b.localName;"route"!==d&&"routes"!==d&&"camelContext"!==d&&"rests"!==d&&$(b).children("*").each(function(b,d){var f=d.localName;if(a.camelLanguageSettings(f))c.expression={language:f,expression:d.textContent};else if(!o(f)){var g=e(d);g&&(g.expression&&(g=g.expression),"completionSize"===f?f="completionSizeExpression":"completionTimeout"===f&&(f="completionTimeoutExpression"),c[f]=g)}})}return c}function f(a,b){return void 0===b&&(b="  "),a+b}function g(a,b,c){function d(b,c,f){if(void 0===f&&(f=!1),angular.isArray(b))$(a).children(c).remove(),angular.forEach(b,function(a){d(a,c,!0)});else if(angular.isObject(b)){var h=null;if("expression"===c){var i=b.language;i&&(c=i,h=b.expression,b=angular.copy(b),delete b.expression,delete b.language)}var j=$(a).children(c),k=null;if(!f&&j&&j.length)k=j[0];else{var l=a.ownerDocument||document;a.appendChild(l.createTextNode("\n"+e)),k=l.createElementNS(a.namespaceURI,c),h&&k.appendChild(l.createTextNode(h)),a.appendChild(k)}g(k,b,e),h&&j.text(h)}else if(b)if(c.startsWith("_"));else{var m=b.toString();a.setAttribute(c,m)}else a.removeAttribute(c)}if(a){var e=f(c);angular.forEach(b,function(a,b){return d(a,b,!1)})}}function h(a){var b=null;if(a){var c=a.localName;b=c?n(c):a}if(b){var d=b.icon||"generic24.png";return Core.url("/img/icons/camel/"+d)}return null}function i(a){var b=a.selection;if(b&&b.objectName&&b.typeName&&"endpoints"===b.typeName){var c=Core.parseMBean(b.objectName);if(!c)return null;var d=c.attributes;if(!d)return null;if(!("name"in d))return null;var e=d.name;return e=e.replace("\\?","?"),e.startsWith('"')&&(e=e.last(e.length-1)),e.endsWith('"')&&(e=e.first(e.length-1)),e}return null}function j(a){if(angular.isString(a)){var b=a.replace("?","\\?");return b=b.replace(/\:(\/[^\/])/,"://$1"),b=b.replace(/\:([^\/])/,"://$1")}return a}function k(b,c){return{uri:a.getSelectedEndpointName(b),mbean:a.getSelectionCamelContextMBean(b,c)}}function l(a,b){var c=a.selection;return c&&b===c.domain?c.routeXmlNode:null}function m(a,b){var c=a.selection;c&&b===c.domain&&delete c.routeXmlNode}function n(a){return angular.isObject(a)?a:Forms.lookupDefinition(a,_apacheCamelModel)}function o(a){return null!=Forms.lookupDefinition(a,_apacheCamelModel)}function p(a){var b=n(a);return b?b.nextSiblingAddedAsChild||!1:null}function q(a){var b=n(a);return b?b.acceptInput||!1:null}function r(a){var b=n(a);return b?b.acceptOutput||!1:null}function s(a){return _apacheCamelModel.languages[a]}function t(a){return!(!s(a)&&"expression"!==a)}function u(a,b,c){var d=a;angular.isString(a)&&(d=$.parseXML(a));var e="camelContext",f=new Folder(e);f.addClass="org-apache-camel-context",f.domain=c,f.typeName="context",f.key=Core.toSafeDomID(b);var g=$(d).find("camelContext");return g&&g.length||(g=$(d).find("routes")),g&&g.length&&(f.xmlDocument=d,f.routeXmlNode=g,$(g).children("route").each(function(a,b){var d=b.getAttribute("id");d||(d="route"+a,b.setAttribute("id",d));var e=new Folder(d);e.addClass="org-apache-camel-route",e.typeName="routes",e.domain=c,e.key=f.key+"_"+Core.toSafeDomID(d),e.parent=f;var g=n("route");if(g){var i=h(g);e.tooltip=g.tooltip||g.description||d,e.icon=i}f.children.push(e),v(e,b,c)})),f}function v(a,b,c){a.children=[],a.routeXmlNode=b,b.setAttribute("_cid",a.key),$(b).children("*").each(function(b,d){w(a,d,c)})}function w(a,b,c){var d=b.localName;if(d){var e=n(d);if(e){var f=h(e),g=new Folder(d);g.domain=c,g.typeName="routeNode",F(g,b,e),g.parent=a,g.folderNames=a.folderNames;for(var i=b.getAttribute("id")||d,j=a.key+"_"+Core.toSafeDomID(i),k=1,l=!0;l;){var m=j+k;a.children.some({key:m})?k+=1:(l=!1,j=m)}return g.key=j,g.icon=f,g.routeXmlNode=b,a.children||(a.children=[]),a.children.push(g),v(g,b,c),g}}return null}function x(a,b){var c=a?a.tree:null;return c?c.get(b):null}function y(a,b,c){var d=null,e=x(a,c);return e&&b&&angular.forEach(e.children,function(a){d||b!==a.title||(d=a)}),d}function z(a,b,c){var d=y(a,b,c);if(d){var e=d.navigate("context");if(e&&e.children&&e.children.length){return e.children[0].objectName}}return null}function A(a){var b=null,c=a.selection;if(c){var d=c.entries;if(d){var e=d.context,f=d.name,g=d.type;if("endpoints"===g)return B(e,f);if("routes"===g)return C(e,f)}}return b}function B(a,b){var c=null;return a&&b&&(c="#/camel/endpoint/browse/"+a+"/"+b),c}function C(a,b){var c=null;return a&&b&&(c="#/camel/route/diagram/"+a+"/"+b),c}function D(a){var b=Core.pathGet(a,["routeXmlNode","localName"]);return"from"===b||"to"===b?"endpoint":b}function E(b,c,d){void 0===d&&(d=a.increaseIndent(""));var e=b.data||b,f=0,g=D(e);if(e){if(!c){c=document.createElement(g);var h=a.getRouteFolderJSON(e);h&&a.setRouteNodeJSON(c,h,d)}var i=c.ownerDocument||document,j=c.namespaceURI,k="route"!==g,l=a.increaseIndent(d);angular.forEach(b.children||b.getChildren(),function(b){var d=b.data||b,e=a.getFolderCamelNodeId(d),g=a.getRouteFolderJSON(d);if(e&&g){if("endpoint"===e&&(k?e="to":(e="from",k=!0)),"expression"===e){var h=g.language;h&&(e=h,!0)}c.appendChild(i.createTextNode("\n"+l));var m=i.createElementNS(j,e);a.setRouteNodeJSON(m,g,l),c.appendChild(m),f+=1,E(b,m,l)}}),f&&c.appendChild(i.createTextNode("\n"+d))}return c}function F(b,d,e){var f=d.localName,g=d.getAttribute("id"),h=e.title||f,i=e.tooltip||e.description||h;if(g)h=g;else{var j=c(d);if(j){h=j;var k=j.split("?");k&&k.length>1&&(h=k[0]),i+=" "+j}else{var l=$(d).children("*");if(l&&l.length){var m=l[0],n=m.localName,o=null;a.isCamelLanguage(n)&&((o=m.textContent)||(o=m.getAttribute("expression"))),o&&(h+=" "+o,i+=" "+n+" expression")}}}return b.title=h,b.tooltip=i,h}function G(a,b){if(a){var c=S(a,b),d=a.selection,e=a.tree;if(e&&d){var f=d.domain;if(f&&c){var g=e.navigate(f,c,"context");if(g&&g.children){var h=g.children.first();if(h.title){return f+":context="+c+',type=context,name="'+h.title+'"'}}}}}return null}function H(a,b,c){if(b.entries&&"routes"===b.entries.type){var d=a.tree.navigate(c,b.entries.context,"context");if(d&&d.children){var e=d.children.first();if(e.objectName)return e.objectName}}return null}function I(a,b){if(a){var c=S(a,b),d=a.selection,e=a.tree;if(e&&d){var f=d.domain;if(f&&c)return e.navigate(f,c,"endpoints")}}return null}function J(a,b){if(a){var c=S(a,b),d=a.selection,e=a.tree;if(e&&d){var f=d.domain;if(f&&c){var g=e.navigate(f,c,"tracer");if(g&&g.children){var h=g.children.find(function(a){return a.title.startsWith("BacklogTracer")});if(h)return h.objectName}var i=e.navigate(f,c,"fabric");if(i&&i.children){var h=i.children.first();return h.objectName}}}}return null}function K(a,b){if(a){var c=S(a,b),d=a.selection,e=a.tree;if(e&&d){var f=d.domain;if(f&&c){var g=e.navigate(f,c,"tracer");if(g&&g.children){var h=g.children.find(function(a){return a.title.startsWith("BacklogDebugger")});if(h)return h.objectName}}}}return null}function L(a,b){if(a){var c=S(a,b),d=a.selection,e=a.tree;if(e&&d){var f=d.domain;if(f&&c){var g=e.navigate(f,c,"services");if(g&&g.children){var h=g.children.find(function(a){return a.title.startsWith("DefaultTypeConverter")});if(h)return h.objectName}}}}return null}function M(a,b){if(a){var c=S(a,b),d=a.selection,e=a.tree;if(e&&d){var f=d.domain;if(f&&c){var g=e.navigate(f,c,"services");if(g&&g.children){var h=g.children.find(function(a){return a.title.startsWith("DefaultRestRegistry")});if(h)return h.objectName}}}}return null}function N(a,b){if(a){var c=S(a,b),d=a.selection,e=a.tree;if(e&&d){var f=d.domain;if(f&&c){var g=e.navigate(f,c,"services");if(g&&g.children){var h=g.children.find(function(a){return a.title.startsWith("DefaultRuntimeEndpointRegistry")});if(h)return h.objectName}}}}return null}function O(a,b){if(a){var c=S(a,b),d=a.selection,e=a.tree;if(e&&d){var f=d.domain;if(f&&c){var g=e.navigate(f,c,"services");if(g&&g.children){var h=g.children.find(function(a){return a.title.startsWith("MetricsRegistryService")});if(h)return h.objectName}}}}return null}function P(a,b){if(a){var c=S(a,b),d=a.selection,e=a.tree;if(e&&d){var f=d.domain;if(f&&c){var g=e.navigate(f,c,"services");if(g&&g.children){var h=g.children.find(function(a){return a.title.startsWith("MetricsMessageHistoryService")});if(h)return h.objectName}}}}return null}function Q(a,b){if(a){var c=S(a,b),d=a.selection,e=a.tree;if(e&&d){var f=d.domain;if(f&&c){var g=e.navigate(f,c,"services");if(g&&g.children){var h=g.children.find(function(a){return a.title.startsWith("DefaultInflightRepository")});if(h)return h.objectName}}}}return null}function R(a,b){if(a){var c=S(a,b),d=a.selection,e=a.tree;if(e&&d){var f=d.domain;if(f&&c){var g=e.navigate(f,c,"services");if(g&&g.children){var h=g.children.find(function(a){return a.title.startsWith("DefaultAsyncProcessorAwaitManager")});if(h)return h.objectName}}}}return null}function S(a,b){var c=a.selection;if(c&&(c=c.findAncestor(function(a){return"context"===a.title||"Camel Contexts"===a.title||null!=a.parent&&a.parent.title===b}))){var d,e=a.tree,f=c.folderNames,g=c.children;e&&(f&&f.length>1?d=f[1]:g&&g.length>0&&g[0].entries&&(d=g[0].entries.context))}return d}function T(a,b){var c=(a.State||"").toLowerCase();return angular.isArray(b)?b.any(function(a){return c.startsWith(a)}):c.startsWith(b)}function U(a){if(a)switch(a.toLowerCase()){case"started":return"green icon-play-circle";case"suspended":return"icon-pause"}return"orange icon-off"}function V(a,b){void 0===b&&(b=null);var c=b||a.selection,d=null;if(c&&c&&c.entries){var e=c.entries.type,f=c.entries.name;"routes"===e&&f&&(d=Core.trimQuotes(f))}return d}function W(a,b,c){if(a){var d=S(a,c),e=a.selection,f=a.tree;if(f&&e){var g=e.domain;if(g&&d){var h=f.navigate(g,d,"routes");if(h&&h.children){var i=h.children.find(function(a){return a.title===b});if(i)return i.objectName}}}}return null}function X(a,b,c){if(a){var d=S(a,c),e=a.selection,f=a.tree;if(f&&e){var g=e.domain;if(g&&d){var h=f.navigate(g,d,"context");if(h&&h.children){var i=h.children.first();if(i.version)return i.version;if(i.title){var j=i.title,k=g+":context="+d+',type=context,name="'+j+'"',l=b.getAttribute(k,"CamelVersion",onSuccess(null));return i.version=l,l}}}}}return null}function Y(a){var b=$(a),c=b.children("uid").text(),d=b.children("timestamp").text(),e={headers:{},headerTypes:{},id:null,uid:c,timestamp:d,headerHtml:""},f=b.children("message")[0];f||(f=a);var g=$(f),h=g.find("header"),i="";h.each(function(a,b){var c=b.getAttribute("key"),d=b.getAttribute("type"),f=b.textContent;c&&(f&&(e.headers[c]=f),d&&(e.headerTypes[c]=d),i+="<tr><td class='property-name'>"+c+"</td><td class='property-value'>"+Z(d)+"</td><td class='property-value'>"+(f||"")+"</td></tr>")}),e.headerHtml=i;var j=e.headers.breadcrumbId;if(!j){var k=["MessageID","ID","Path","Name"];angular.forEach(k,function(a){j||angular.forEach(e.headers,function(b,c){!j&&c.endsWith(a)&&(j=b)})}),angular.forEach(e.headers,function(a,b){j||(j=a)})}e.id=j;var l=g.children("body")[0];if(l){var m=l.textContent,n=l.getAttribute("type");e.body=m,e.bodyType=Z(n)}return e}function Z(a){return a?a.startsWith("java.lang")?a.substr(10):a:""}function _(){return{selectedItems:[],data:"messages",displayFooter:!1,showFilter:!1,showColumnMenu:!0,enableColumnResize:!0,enableColumnReordering:!0,filterOptions:{filterText:""},selectWithCheckboxOnly:!0,showSelectionCheckbox:!0,maintainColumnRatios:!1,columnDefs:[{field:"id",displayName:"ID",cellTemplate:'<div class="ngCellText"><a ng-click="openMessageDialog(row)">{{row.entity.id}}</a></div>'}]}}
function aa(b,c,d,e,f,g){var h=$(c).find("route"),i=g/h.length,j=0;h.each(function(c,g){var h=g.getAttribute("id");d&&h&&d!==h||(a.addRouteXmlChildren(b,g,e,f,null,j,0),j+=i)})}function ba(b,c,d,e,f,g){var h=$(c).find("route"),i=f/h.length,j=0;h.each(function(c,f){var h=f.getAttribute("id"),k=g(h);a.log.debug("Is route "+h+" selected "+k+" to show in route diagram"),k&&(a.addRouteXmlChildren(b,f,d,e,null,j,0),j+=i)})}function ca(b,d,e,f,g,i,j,k){void 0===k&&(k=null);var l=150,m=i,o=j+l,p=d.getAttribute("id"),q=[],r=d.localName;return $(d).children().each(function(d,i){var j=e.length,s=i.localName;"from"!==s||g||(g=j);var t=n(s),u=null;if(t){var v=t.title||s,w=c(i);w&&(v+=" "+w.split("?")[0]);var x=t.tooltip||t.description||v;w&&(x+=" "+w);var y=i.getAttribute("id"),z=v;if(y){i.getAttribute("customId");b.camelIgnoreIdForLabel?z="id: "+y:v=y}var A=b.camelMaximumLabelWidth||a.defaultMaximumLabelWidth;v.length>A&&(z=v+"\n\n"+z,v=v.substring(0,A)+"..");var B=h(t);if(("from"===s||"to"===s)&&w){var C=w.indexOf(":");if(C>0){var D=w.substring(0,C);if(D){var E=a.getEndpointIcon(D);E&&(B=Core.url(E))}}}var F=i.getAttribute("_cid")||i.getAttribute("id");u={name:H,label:v,labelSummary:z,group:1,id:j,elementId:y,x:m,"y:":o,imageUrl:B,cid:F,tooltip:x,type:s,uri:w},p&&(u.rid=p,b.routeNodes||(b.routeNodes={}),b.routeNodes[p]=u),F||(F=s+(e.length+1)),F&&(u.cid=F,b.nodes||(b.nodes={}),b.nodes[F]=u),p=null,e.push(u),null!==g&&g!==j&&(0===q.length||"choice"===r?f.push({source:g,target:j,value:1}):(q.forEach(function(a){f.push({source:a,target:j,value:1})}),q.length=0))}else{var G=a.camelLanguageSettings(s);if(G&&k){var H=G.name||s,I=i.textContent;I?(k.tooltip=k.label+" "+H+" "+I,k.label+=": "+da(i,I,!0)):k.label+=": "+da(i,H,!1)}}var J=ca(b,i,e,f,j,m,o,u);"choice"===r?(q=q.concat(J),m+=l):"choice"===s?(q=J,o+=l):(q=[e.length-1],o+=l)}),q}function da(a,b,c){switch(a.localName){case"method":c||(a.getAttribute("bean")?b+=" "+a.getAttribute("bean"):a.getAttribute("ref")?b+=" "+a.getAttribute("ref"):a.getAttribute("beanType")&&(b+=" "+a.getAttribute("beanType"))),a.getAttribute("method")&&(b+=" "+a.getAttribute("method"))}return b}function ea(a){var b=a.height();if(b<300){console.log("browse thinks the height is only "+b+" so calculating offset from doc height");var c=a.offset();if(b=$(document).height()-5,c){var d=c.top;d&&(b-=d)}}return b}function fa(a,b){if(void 0===b&&(b={}),a){var c=a.key;c&&(b[c]=a),angular.forEach(a.children,function(a){return fa(a,b)})}return b}function ga(b){var c=b&&b.data?b.data:b;if(!c)return null;var d=c.xmlDocument,e=c.routeXmlNode;if(e&&e.length){for(var f=e[0],g=f.childNodes,h=[],i=0;i<g.length;i++){var j=g[i];"route"===j.localName&&parent&&h.push(i)}for(;h.length;){for(var k=h.pop(),l=k+1;;){var j=f.childNodes[l];if(!Core.isTextNode(j))break;f.removeChild(j)}k<f.childNodes.length&&f.removeChild(f.childNodes[k]);for(var i=k-1;i>=0;i--){var j=f.childNodes[i];if(!Core.isTextNode(j))break;f.removeChild(j)}}a.createFolderXmlTree(b,e[0])}return d}function ha(a,b){var c={},d=a.tree;if(d){var e=d.navigate(b);e&&angular.forEach(e.children,function(a){var b=a.navigate("context");if(b&&b.children&&b.children.length){var d=b.children[0],e=Core.pathGet(d,["entries","name"])||d.key;e&&(c[e]={folder:d,mbean:d.objectName})}})}return c}function ia(a,b){return ka(a,"components",b)}function ja(a,b){return ka(a,"routes",b)}function ka(a,b,c){var d={},e=a.tree;if(e){var f=e.navigate(c);f&&angular.forEach(f.children,function(a){var c=a.navigate("context"),e=a.navigate(b);if(c&&e&&c.children&&c.children.length){var f=c.children[0],g=f.objectName;if(g){var h={folder:f,mbean:g};angular.forEach(e.children,function(a){var b=a.title;b&&(d[b]=h)})}}})}return d}function la(a,b){var c={},d=a.tree;if(d){var e=d.navigate(b);e&&angular.forEach(e.children,function(a){var b=a.navigate("processors");b&&b.children&&b.children.length&&angular.forEach(b.children,function(a){var d=a.title;if(d){var e={folder:b,key:a.key};c[d]=e}})})}return c}function ma(a){var b=a.camelShowInflightCounter;return Core.parseBooleanValue(b,!0)}function na(a){var b=a.camelIgnoreIdForLabel;return Core.parseBooleanValue(b)}function oa(b){var c=b.camelMaximumLabelWidth;return angular.isString(c)&&(c=parseInt(c)),c||(c=a.defaultMaximumLabelWidth),c}function pa(b){var c=b.camelMaximumTraceOrDebugBodyLength;return angular.isString(c)&&(c=parseInt(c)),c||(c=a.defaultCamelMaximumTraceOrDebugBodyLength),c}function qa(b){var c=b.camelTraceOrDebugIncludeStreams;return Core.parseBooleanValue(c,a.defaultCamelTraceOrDebugIncludeStreams)}function ra(b){var c=b.camelRouteMetricMaxSeconds;return angular.isString(c)&&(c=parseInt(c)),c||(c=a.defaultCamelRouteMetricMaxSeconds),c}function sa(b){var c=b.camelHideOptionDocumentation;return Core.parseBooleanValue(c,a.defaultHideOptionDocumentation)}function ta(b){var c=b.camelHideOptionDefaultValue;return Core.parseBooleanValue(c,a.defaultHideOptionDefaultValue)}function ua(b){var c=b.camelHideOptionUnusedValue;return Core.parseBooleanValue(c,a.defaultHideOptionUnusedValue)}function va(a,b){a.attr("class","node"),a.filter(function(a){if(a){var c=a.cid,d=a.rid,e=a.type,f=a.elementId;return"from"===e?b===d:f?b===f:c?b===c:b===d}return null}).attr("class","node selected")}function wa(a,b,c,d,e){var f=X(c,d,e);if(f){console.log("Camel version "+f),f+="camel-";var g=Core.parseVersionNumbers(f);return Core.compareVersionNumberArrays(g,[a,b])>=0}return!1}a.log=Logger.get("Camel"),a.defaultMaximumLabelWidth=34,a.defaultCamelMaximumTraceOrDebugBodyLength=5e3,a.defaultCamelTraceOrDebugIncludeStreams=!0,a.defaultCamelRouteMetricMaxSeconds=10,a.defaultHideOptionDocumentation=!1,a.defaultHideOptionDefaultValue=!1,a.defaultHideOptionUnusedValue=!1,a.processRouteXml=b,a.getRouteNodeUri=c,a.getRouteFolderJSON=d,a.getRouteNodeJSON=e,a.increaseIndent=f,a.setRouteNodeJSON=g,a.getRouteNodeIcon=h,a.getSelectedEndpointName=i,a.escapeEndpointUriNameForJmx=j,a.getContextAndTargetEndpoint=k,a.getSelectedRouteNode=l,a.clearSelectedRouteNode=m,a.getCamelSchema=n,a.isCamelPattern=o,a.isNextSiblingAddedAsChild=p,a.acceptInput=q,a.acceptOutput=r,a.camelLanguageSettings=s,a.isCamelLanguage=t,a.loadCamelTree=u,a.addRouteChildren=v,a.addRouteChild=w,a.getRootCamelFolder=x,a.getCamelContextFolder=y,a.getCamelContextMBean=z,a.linkToFullScreenView=A,a.linkToBrowseEndpointFullScreen=B,a.linkToRouteDiagramFullScreen=C,a.getFolderCamelNodeId=D,a.createFolderXmlTree=E,a.updateRouteNodeLabelAndTooltip=F,a.getSelectionCamelContextMBean=G,a.getExpandingFolderCamelContextMBean=H,a.getSelectionCamelContextEndpoints=I,a.getSelectionCamelTraceMBean=J,a.getSelectionCamelDebugMBean=K,a.getSelectionCamelTypeConverter=L,a.getSelectionCamelRestRegistry=M,a.getSelectionCamelEndpointRuntimeRegistry=N,a.getSelectionCamelRouteMetrics=O,a.getSelectionCamelMessageHistoryMetrics=P,a.getSelectionCamelInflightRepository=Q,a.getSelectionCamelBlockedExchanges=R,a.getContextId=S,a.isState=T,a.iconClass=U,a.getSelectedRouteId=V,a.getSelectionRouteMBean=W,a.getCamelVersion=X,a.createMessageFromXml=Y,a.humanizeJavaType=Z,a.createBrowseGridOptions=_,a.loadRouteXmlNodes=aa,a.loadSelectedRouteXmlNodes=ba,a.addRouteXmlChildren=ca,a.getCanvasHeight=ea,a.addFoldersToIndex=fa,a.generateXmlFromFolder=ga,a.camelContextMBeansById=ha,a.camelContextMBeansByComponentName=ia,a.camelContextMBeansByRouteId=ja,a.camelProcessorMBeansById=la,a.showInflightCounter=ma,a.ignoreIdForLabel=na,a.maximumLabelWidth=oa,a.maximumTraceOrDebugBodyLength=pa,a.traceOrDebugIncludeStreams=qa,a.routeMetricMaxSeconds=ra,a.hideOptionDocumentation=sa,a.hideOptionDefaultValue=ta,a.hideOptionUnusedValue=ua,a.highlightSelectedNode=va,a.isCamelVersionEQGT=wa}(Camel||(Camel={}));var Camel;!function(a){var b=Jmx;a.pluginName="camel";var c="app/camel/html/attributeToolBarRoutes.html",d="app/camel/html/attributeToolBarContext.html";a._module=angular.module(a.pluginName,["bootstrap","ui.bootstrap","ui.bootstrap.dialog","ui.bootstrap.tabs","ui.bootstrap.typeahead","ngResource","hawtioCore","hawtio-ui"]),a._module.config(["$routeProvider",function(a){a.when("/camel/browseEndpoint",{templateUrl:"app/camel/html/browseEndpoint.html"}).when("/camel/endpoint/browse/:contextId/*endpointPath",{templateUrl:"app/camel/html/browseEndpoint.html"}).when("/camel/createEndpoint",{templateUrl:"app/camel/html/createEndpoint.html"}).when("/camel/route/diagram/:contextId/:routeId",{templateUrl:"app/camel/html/routes.html"}).when("/camel/routes",{templateUrl:"app/camel/html/routes.html"}).when("/camel/fabricDiagram",{templateUrl:"app/camel/html/fabricDiagram.html",reloadOnSearch:!1}).when("/camel/typeConverter",{templateUrl:"app/camel/html/typeConverter.html",reloadOnSearch:!1}).when("/camel/restRegistry",{templateUrl:"app/camel/html/restRegistry.html",reloadOnSearch:!1}).when("/camel/endpointRuntimeRegistry",{templateUrl:"app/camel/html/endpointRuntimeRegistry.html",reloadOnSearch:!1}).when("/camel/routeMetrics",{templateUrl:"app/camel/html/routeMetrics.html",reloadOnSearch:!1}).when("/camel/historyMetrics",{templateUrl:"app/camel/html/messageHistoryMetrics.html",reloadOnSearch:!1}).when("/camel/inflight",{templateUrl:"app/camel/html/inflight.html",reloadOnSearch:!1}).when("/camel/blocked",{templateUrl:"app/camel/html/blocked.html",reloadOnSearch:!1}).when("/camel/sendMessage",{templateUrl:"app/camel/html/sendMessage.html",reloadOnSearch:!1}).when("/camel/source",{templateUrl:"app/camel/html/source.html"}).when("/camel/traceRoute",{templateUrl:"app/camel/html/traceRoute.html"}).when("/camel/debugRoute",{templateUrl:"app/camel/html/debug.html"}).when("/camel/profileRoute",{templateUrl:"app/camel/html/profileRoute.html"}).when("/camel/properties",{templateUrl:"app/camel/html/properties.html"}).when("/camel/propertiesComponent",{templateUrl:"app/camel/html/propertiesComponent.html"}).when("/camel/propertiesDataFormat",{templateUrl:"app/camel/html/propertiesDataFormat.html"}).when("/camel/propertiesEndpoint",{templateUrl:"app/camel/html/propertiesEndpoint.html"})}]),a._module.factory("tracerStatus",function(){return{jhandle:null,messages:[]}}),a._module.filter("camelIconClass",function(){return a.iconClass}),a._module.factory("activeMQMessage",function(){return{message:null}}),a._module.run(["workspace","jolokia","viewRegistry","layoutFull","helpRegistry","preferencesRegistry","localStorage",function(b,e,f,g,h,i,j){function k(a){var b=$("#cameltree");if(0===b.length&&(b=$("#jmxtree")),0!=b.length){var c=b.dynatree("getActiveNode"),d=c.getChildren();for(var e in d)if(d[e]&&d[e].data.title===a){d[e].expand(!0),d[e].activate();break}}}var l=j.camelJmxDomain||"org.apache.camel";f["camel/endpoint/"]=g,f["camel/route/"]=g,f["camel/fabricDiagram"]=g,f.camel="app/camel/html/layoutCamelTree.html",h.addUserDoc("camel","app/camel/doc/help.md",function(){return b.treeContainsDomainAndProperties(l)}),i.addTab("Camel","app/camel/html/preferences.html",function(){return b.treeContainsDomainAndProperties(l)}),Jmx.addAttributeToolBar(a.pluginName,l,function(a){var b=a.typeName;if(b){if(b.startsWith("context"))return d;if(b.startsWith("route"))return c}var e=a.folderNames;if(e&&a.domain===l){var f=e.last();if("routes"===f)return c;if("context"===f)return d}return null});var m="State",n='<div class="ngCellText pagination-centered" title="{{row.getProperty(col.field)}}"><i class="{{row.getProperty(\''+m+"') | camelIconClass}}\"></i></div>",o={field:m,displayName:m,cellTemplate:n,width:56,minWidth:56,maxWidth:56,resizable:!1,defaultSort:!1},p=b.onClickRowHandlers;p[l+"/context/folder"]=function(a){k(a.entity.CamelId)},p[l+"/routes/folder"]=function(a){k(a.entity.RouteId)},p[l+"/endpoints/folder"]=function(a){var b=a.entity.EndpointUri;b=b.replace("?","\\?"),k(b)},p[l+"/components/folder"]=function(a){k(a.entity.ComponentName)};var q=b.attributeColumnDefs;q[l+"/context/folder"]=[o,{field:"CamelId",displayName:"Context"},{field:"Uptime",displayName:"Uptime",visible:!1},{field:"CamelVersion",displayName:"Version",visible:!1},{field:"ExchangesCompleted",displayName:"Completed #"},{field:"ExchangesFailed",displayName:"Failed #"},{field:"FailuresHandled",displayName:"Failed Handled #"},{field:"ExchangesTotal",displayName:"Total #",visible:!1},{field:"InflightExchanges",displayName:"Inflight #"},{field:"MeanProcessingTime",displayName:"Mean Time"},{field:"MinProcessingTime",displayName:"Min Time"},{field:"MaxProcessingTime",displayName:"Max Time"},{field:"TotalProcessingTime",displayName:"Total Time",visible:!1},{field:"LastProcessingTime",displayName:"Last Time",visible:!1},{field:"LastExchangeCompletedTimestamp",displayName:"Last completed",visible:!1},{field:"LastExchangeFailedTimestamp",displayName:"Last failed",visible:!1},{field:"Redeliveries",displayName:"Redelivery #",visible:!1},{field:"ExternalRedeliveries",displayName:"External Redelivery #",visible:!1}],q[l+"/routes/folder"]=[o,{field:"CamelId",displayName:"Context"},{field:"RouteId",displayName:"Route"},{field:"Uptime",displayName:"Uptime",visible:!1},{field:"ExchangesCompleted",displayName:"Completed #"},{field:"ExchangesFailed",displayName:"Failed #"},{field:"FailuresHandled",displayName:"Failed Handled #"},{field:"ExchangesTotal",displayName:"Total #",visible:!1},{field:"InflightExchanges",displayName:"Inflight #"},{field:"MeanProcessingTime",displayName:"Mean Time"},{field:"MinProcessingTime",displayName:"Min Time"},{field:"MaxProcessingTime",displayName:"Max Time"},{field:"TotalProcessingTime",displayName:"Total Time",visible:!1},{field:"DeltaProcessingTime",displayName:"Delta Time",visible:!1},{field:"LastProcessingTime",displayName:"Last Time",visible:!1},{field:"LastExchangeCompletedTimestamp",displayName:"Last completed",visible:!1},{field:"LastExchangeFailedTimestamp",displayName:"Last failed",visible:!1},{field:"Redeliveries",displayName:"Redelivery #",visible:!1},{field:"ExternalRedeliveries",displayName:"External Redelivery #",visible:!1}],q[l+"/processors/folder"]=[o,{field:"CamelId",displayName:"Context"},{field:"RouteId",displayName:"Route"},{field:"ProcessorId",displayName:"Processor"},{field:"ExchangesCompleted",displayName:"Completed #"},{field:"ExchangesFailed",displayName:"Failed #"},{field:"FailuresHandled",displayName:"Failed Handled #"},{field:"ExchangesTotal",displayName:"Total #",visible:!1},{field:"InflightExchanges",displayName:"Inflight #"},{field:"MeanProcessingTime",displayName:"Mean Time"},{field:"MinProcessingTime",displayName:"Min Time"},{field:"MaxProcessingTime",displayName:"Max Time"},{field:"TotalProcessingTime",displayName:"Total Time",visible:!1},{field:"LastProcessingTime",displayName:"Last Time",visible:!1},{field:"LastExchangeCompletedTimestamp",displayName:"Last completed",visible:!1},{field:"LastExchangeFailedTimestamp",displayName:"Last failed",visible:!1},{field:"Redeliveries",displayName:"Redelivery #",visible:!1},{field:"ExternalRedeliveries",displayName:"External Redelivery #",visible:!1}],q[l+"/components/folder"]=[o,{field:"CamelId",displayName:"Context"},{field:"ComponentName",displayName:"Name"}],q[l+"/consumers/folder"]=[o,{field:"CamelId",displayName:"Context"},{field:"RouteId",displayName:"Route"},{field:"EndpointUri",displayName:"Endpoint URI",width:"**"},{field:"Suspended",displayName:"Suspended",resizable:!1},{field:"InflightExchanges",displayName:"Inflight #"}],q[l+"/services/folder"]=[o,{field:"CamelId",displayName:"Context"},{field:"RouteId",displayName:"Route"},{field:"Suspended",displayName:"Suspended",resizable:!1},{field:"SupportsSuspended",displayName:"Can Suspend",resizable:!1}],q[l+"/endpoints/folder"]=[o,{field:"CamelId",displayName:"Context"},{field:"EndpointUri",displayName:"Endpoint URI",width:"***"},{field:"Singleton",displayName:"Singleton",resizable:!1}],q[l+"/threadpools/folder"]=[{field:"Id",displayName:"Id",width:"**"},{field:"ActiveCount",displayName:"Active #"},{field:"PoolSize",displayName:"Pool Size"},{field:"CorePoolSize",displayName:"Core Pool Size"},{field:"TaskQueueSize",displayName:"Task Queue Size"},{field:"TaskCount",displayName:"Task #"},{field:"CompletedTaskCount",displayName:"Completed Task #"}],q[l+"/errorhandlers/folder"]=[{field:"CamelId",displayName:"Context"},{field:"DeadLetterChannel",displayName:"Dead Letter"},{field:"DeadLetterChannelEndpointUri",displayName:"Endpoint URI",width:"**",resizable:!0},{field:"MaximumRedeliveries",displayName:"Max Redeliveries"},{field:"RedeliveryDelay",displayName:"Redelivery Delay"},{field:"MaximumRedeliveryDelay",displayName:"Max Redeliveries Delay"}],b.topLevelTabs.push({id:"camel",content:"Camel",title:"Manage your Apache Camel applications",isValid:function(a){return a.treeContainsDomainAndProperties(l)},href:function(){return"#/jmx/attributes?tab=camel"},isActive:function(a){return a.isTopTabActive("camel")}}),b.subLevelTabs.push({content:'<i class="icon-picture"></i> Route Diagram',title:"View a diagram of the Camel routes",isValid:function(b){return b.isTopTabActive("camel")&&!b.isComponentsFolder(l)&&!b.isEndpointsFolder(l)&&!b.isDataFormatsFolder(l)&&(b.isRoute(l)||b.isRoutesFolder(l))&&b.hasInvokeRightsForName(a.getSelectionCamelContextMBean(b,l),"dumpRoutesAsXml")},href:function(){return"#/camel/routes"},index:-2}),b.subLevelTabs.push({content:'<i class=" icon-file-alt"></i> Source',title:"View the source of the Camel routes",isValid:function(b){return b.isTopTabActive("camel")&&!b.isComponentsFolder(l)&&!b.isEndpointsFolder(l)&&!b.isDataFormatsFolder(l)&&(b.isRoute(l)||b.isRoutesFolder(l))&&b.hasInvokeRightsForName(a.getSelectionCamelContextMBean(b,l),"dumpRoutesAsXml")},href:function(){return"#/camel/source"}}),b.subLevelTabs.push({content:'<i class="icon-bar-chart"></i> Route Metrics',title:"View the Camel route metrics",isValid:function(b){return b.isTopTabActive("camel")&&!b.isComponentsFolder(l)&&!b.isEndpointsFolder(l)&&!b.isDataFormatsFolder(l)&&(b.isRoute(l)||b.isRoutesFolder(l))&&a.isCamelVersionEQGT(2,14,b,e,l)&&b.hasInvokeRightsForName(a.getSelectionCamelRouteMetrics(b,l),"dumpStatisticsAsJson")},href:function(){return"#/camel/routeMetrics"}}),b.subLevelTabs.push({content:'<i class="icon-bar-chart"></i> Message Metrics',title:"View the Camel message history metrics",isValid:function(b){return b.isTopTabActive("camel")&&!b.isComponentsFolder(l)&&!b.isEndpointsFolder(l)&&!b.isDataFormatsFolder(l)&&(b.isRoute(l)||b.isRoutesFolder(l))&&a.isCamelVersionEQGT(2,17,b,e,l)&&b.hasInvokeRightsForName(a.getSelectionCamelMessageHistoryMetrics(b,l),"dumpStatisticsAsJson")},href:function(){return"#/camel/historyMetrics"}}),b.subLevelTabs.push({content:'<i class="icon-list"></i> Inflight',title:"View the Camel inflight exchanges",isValid:function(b){return b.isTopTabActive("camel")&&!b.isComponentsFolder(l)&&!b.isEndpointsFolder(l)&&!b.isDataFormatsFolder(l)&&(b.isRoute(l)||b.isRoutesFolder(l))&&a.isCamelVersionEQGT(2,15,b,e,l)&&b.hasInvokeRightsForName(a.getSelectionCamelInflightRepository(b,l),"browse")},href:function(){return"#/camel/inflight"}}),b.subLevelTabs.push({content:'<i class="icon-list"></i> Blocked',title:"View the Camel blocked exchanges",isValid:function(b){return b.isTopTabActive("camel")&&!b.isComponentsFolder(l)&&!b.isEndpointsFolder(l)&&!b.isDataFormatsFolder(l)&&(b.isRoute(l)||b.isRoutesFolder(l))&&a.isCamelVersionEQGT(2,15,b,e,l)&&b.hasInvokeRightsForName(a.getSelectionCamelBlockedExchanges(b,l),"browse")},href:function(){return"#/camel/blocked"}}),b.subLevelTabs.push({content:'<i class="icon-list"></i> Endpoints (in/out)',title:"List all the incoming and outgoing endpoints in the context",isValid:function(b){return!b.isComponentsFolder(l)&&!b.isComponent(l)&&!b.isEndpointsFolder(l)&&!b.isEndpoint(l)&&!b.isDataFormatsFolder(l)&&!b.isDataFormat(l)&&(b.isCamelContext(l)||b.isRoutesFolder(l))&&a.isCamelVersionEQGT(2,16,b,e,l)&&a.getSelectionCamelEndpointRuntimeRegistry(b,l)&&b.hasInvokeRightsForName(a.getSelectionCamelEndpointRuntimeRegistry(b,l),"endpointStatistics")},href:function(){return"#/camel/endpointRuntimeRegistry"}}),b.subLevelTabs.push({content:'<i class=" icon-edit"></i> Properties',title:"View the pattern properties",isValid:function(b){return a.getSelectedRouteNode(b,l)},href:function(){return"#/camel/properties"}}),b.subLevelTabs.push({content:'<i class="icon-list"></i> Rest',title:"List all the REST services registered in the context",isValid:function(b){return b.isTopTabActive("camel")&&!a.getSelectedRouteNode(b,l)&&!b.isComponentsFolder(l)&&!b.isComponent(l)&&!b.isEndpointsFolder(l)&&!b.isEndpoint(l)&&!b.isDataFormatsFolder(l)&&!b.isDataFormat(l)&&!b.isRoute(l)&&a.isCamelVersionEQGT(2,14,b,e,l)&&b.hasInvokeRightsForName(a.getSelectionCamelRestRegistry(b,l),"listRestServices")},href:function(){return"#/camel/restRegistry"}}),b.subLevelTabs.push({content:'<i class="icon-list"></i> Type Converters',title:"List all the type converters registered in the context",isValid:function(b){return b.isTopTabActive("camel")&&!a.getSelectedRouteNode(b,l)&&!b.isComponentsFolder(l)&&!b.isEndpointsFolder(l)&&!b.isDataFormatsFolder(l)&&(b.isRoute(l)||b.isRoutesFolder(l)||b.isCamelContext(l))&&a.isCamelVersionEQGT(2,13,b,e,l)&&b.hasInvokeRightsForName(a.getSelectionCamelTypeConverter(b,l),"listTypeConverters")},href:function(){return"#/camel/typeConverter"}}),b.subLevelTabs.push({content:'<i class="icon-envelope"></i> Browse',title:"Browse the messages on the endpoint",isValid:function(a){return a.isEndpoint(l)&&a.hasInvokeRights(a.selection,"browseAllMessagesAsXml")},href:function(){return"#/camel/browseEndpoint"}}),b.subLevelTabs.push({content:'<i class="icon-list"></i> Properties',title:"Show the component properties",isValid:function(b){return b.isComponent(l)&&a.isCamelVersionEQGT(2,15,b,e,l)&&b.hasInvokeRights(b.selection,"explainComponentJson")},href:function(){return"#/camel/propertiesComponent"}}),b.subLevelTabs.push({content:'<i class="icon-list"></i> Properties',title:"Show the endpoint properties",isValid:function(b){return b.isEndpoint(l)&&a.isCamelVersionEQGT(2,15,b,e,l)&&b.hasInvokeRights(b.selection,"explainEndpointJson")},href:function(){return"#/camel/propertiesEndpoint"}}),b.subLevelTabs.push({content:'<i class="icon-list"></i> Properties',title:"Show the dataformat properties",isValid:function(b){return b.isDataFormat(l)&&a.isCamelVersionEQGT(2,16,b,e,l)&&b.hasInvokeRights(b.selection,"explainDataFormatJson")},href:function(){return"#/camel/propertiesDataFormat"}}),b.subLevelTabs.push({content:'<i class="icon-stethoscope"></i> Debug',title:"Debug the Camel route",isValid:function(b){return b.isTopTabActive("camel")&&b.isRoute(l)&&a.getSelectionCamelDebugMBean(b,l)&&b.hasInvokeRightsForName(a.getSelectionCamelDebugMBean(b,l),"getBreakpoints")},href:function(){return"#/camel/debugRoute"}}),b.subLevelTabs.push({content:'<i class="icon-envelope"></i> Trace',title:"Trace the messages flowing through the Camel route",isValid:function(b){return b.isTopTabActive("camel")&&b.isRoute(l)&&a.getSelectionCamelTraceMBean(b,l)&&b.hasInvokeRightsForName(a.getSelectionCamelTraceMBean(b,l),"dumpAllTracedMessagesAsXml")},href:function(){return"#/camel/traceRoute"}}),b.subLevelTabs.push({content:'<i class="icon-bar-chart"></i> Profile',title:"Profile the messages flowing through the Camel route",isValid:function(b){return b.isTopTabActive("camel")&&b.isRoute(l)&&a.getSelectionCamelTraceMBean(b,l)&&b.hasInvokeRightsForName(a.getSelectionCamelTraceMBean(b,l),"dumpAllTracedMessagesAsXml")},href:function(){return"#/camel/profileRoute"}}),b.subLevelTabs.push({content:'<i class="icon-pencil"></i> Send',title:"Send a message to this endpoint",isValid:function(a){return a.isTopTabActive("camel")&&a.isEndpoint(l)&&a.hasInvokeRights(a.selection,a.selection.domain===l?"sendBodyAndHeaders":"sendTextMessage")},href:function(){return"#/camel/sendMessage"}}),b.subLevelTabs.push({content:'<i class="icon-plus"></i> Endpoint',title:"Create a new endpoint",isValid:function(a){return a.isTopTabActive("camel")&&a.isEndpointsFolder(l)&&a.hasInvokeRights(a.selection,"createEndpoint")},href:function(){return"#/camel/createEndpoint"}})}]),hawtioPluginLoader.addModule(a.pluginName),hawtioPluginLoader.registerPreBootstrapTask(function(c){b.registerLazyLoadHandler(self.localStorage.camelJmxDomain,function(b){return self.localStorage.camelJmxDomain===b.domain&&"routes"===b.typeName?function(b,c,d){"routes"===c.typeName?a.processRouteXml(b,b.jolokia,c,function(e){e&&a.addRouteChildren(c,e,b.localStorage.camelJmxDomain),d()},b.localStorage.camelJmxDomain):d()}:null}),c()})}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.AttributesToolBarController",["$scope","workspace","jolokia","localStorage",function(b,c,d,e){function f(){var b=a.getSelectedRouteId(c);if(b||(b=a.getSelectedRouteId(c,c.selection.parent)),!b){var d=c.selection.children;d&&d.length>0&&(b=a.getSelectedRouteId(c,d[0]))}return a.getSelectionRouteMBean(c,b,g)}var g=e.camelJmxDomain||"org.apache.camel";b.camelContextMBean=a.getSelectionCamelContextMBean(c,g),b.routeMBean=f(),b.deleteDialog=!1,b.start=function(){b.invokeSelectedMBeans(function(b){return a.isState(b,"suspend")?"resume()":"start()"})},b.pause=function(){b.invokeSelectedMBeans("suspend()")},b.stop=function(){b.invokeSelectedMBeans("stop()",function(){c.removeAndSelectParentNode(),Core.$apply(b)})},b.delete=function(){b.invokeSelectedMBeans("remove()",function(){b.workspace&&(b.workspace.operationCounter+=1),Core.$apply(b)})},b.anySelectionHasState=function(c){var d=b.selectedItems||[];return d.length&&d.any(function(b){return a.isState(b,c)})},b.everySelectionHasState=function(c){var d=b.selectedItems||[];return d.length&&d.every(function(b){return a.isState(b,c)})}}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.BlockedExchangesController",["$scope","$location","workspace","jolokia","localStorage",function(b,c,d,e,f){function g(){Core.notification("success","Thread unblocked")}function h(a){var c=a.value;if(c){var d=[];for(var e in c){var f=c[e];d.push({exchangeId:f.exchangeId,routeId:f.routeId,nodeId:f.nodeId,duration:f.duration,threadId:f.id,threadName:f.name})}d=d.sortBy("exchangeId"),b.data=d,b.selectedMBean=a.request.mbean}else b.data=[];b.initDone="true",Core.$apply(b)}function i(){k.info("Loading blocked exchanges data...");var c=a.getSelectedRouteId(d);null!=c&&(b.gridOptions.filterOptions.filterText=c);var f=a.getSelectionCamelBlockedExchanges(d,j);if(f){var g={type:"exec",mbean:f,operation:"browse()"};e.request(g,onSuccess(h)),scopeStoreJolokiaHandle(b,e,e.register(onSuccess(h),g))}}var j=f.camelJmxDomain||"org.apache.camel",k=Logger.get("Camel");b.workspace=d,b.data=[],b.initDone=!1,b.mbeanAttributes={};var l=[{field:"exchangeId",displayName:"Exchange Id",cellFilter:null,width:"*",resizable:!0},{field:"routeId",displayName:"Route Id",cellFilter:null,width:"*",resizable:!0},{field:"nodeId",displayName:"Node Id",cellFilter:null,width:"*",resizable:!0},{field:"duration",displayName:"Duration (ms)",cellFilter:null,width:"*",resizable:!0},{field:"threadId",displayName:"Thread id",cellFilter:null,width:"*",resizable:!0},{field:"threadName",displayName:"Thread name",cellFilter:null,width:"*",resizable:!0}];b.gridOptions={data:"data",displayFooter:!0,displaySelectionCheckbox:!0,multiSelect:!1,canSelectRows:!0,enableSorting:!0,columnDefs:l,selectedItems:[],filterOptions:{filterText:""}},b.doUnblock=function(){var c=a.getSelectionCamelBlockedExchanges(d,j),f=b.gridOptions.selectedItems;if(c&&f&&1===f.length){var h=f[0].exchangeId,i=f[0].threadId,l=f[0].threadName;k.info("Unblocking thread ("+i+"/"+l+") for exchangeId: "+h),e.execute(c,"interrupt(java.lang.String)",h,onSuccess(g))}},i()}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.BreadcrumbBarController",["$scope","$routeParams","workspace","jolokia","localStorage",function(b,c,d,e,f){function g(c){var e=[],f=a.getRootCamelFolder(d,c);return f&&angular.forEach(f.children,function(a){var d=a.title;if(d&&d!==b.contextId){var f=d,g=j(d,i(),c);e.push({name:f,tooltip:"Camel Context",link:g})}}),e}function h(a,b){var c=[];return angular.forEach(["endpoints","routes"],function(d){if(d&&d!==i()){var e=j(a,d,b);c.push({name:d,tooltip:"Entity inside a Camel Context",link:e})}}),c}function i(){return Core.pathGet(b,["breadcrumbs","childEntity"])||q}function j(b,c,d){var e=k(b,c,d);return e.length>0?e[0].link:a.linkToBrowseEndpointFullScreen(b,"noEndpoints")}function k(a,b,c){return"endpoints"===b?l(a,c):m(a,c)}function l(b,c){var e=[],f=a.getCamelContextFolder(d,b,c);if(f){var g=(f.children||[]).find(function(a){return"endpoints"===a.title});g&&angular.forEach(g.children,function(c){var d=c?c.entries:null;if(d){var f=d.name;if(f){var g=o(f),h=a.linkToBrowseEndpointFullScreen(b,f);e.push({contextId:b,path:f,name:g,tooltip:"Endpoint",link:h})}}})}return e}function m(b,c){var e=[],f=a.getCamelContextFolder(d,b,c);if(f){var g=(f.children||[]).find(function(a){return"routes"===a.title});g&&angular.forEach(g.children,function(c){var d=c?c.entries:null;if(d){var f=d.name;if(f){var g=o(f),h=a.linkToRouteDiagramFullScreen(b,f);e.push({contextId:b,path:f,name:g,tooltip:"Camel Route",link:h})}}})}return e}function n(a){var c=null;if(b.contextId){var e=null,f=null;b.endpointPath?(f="browseEndpoint",e=d.findMBeanWithProperties(a,{context:b.contextId,type:"endpoints",name:b.endpointPath})):b.routeId&&(f="routes",e=d.findMBeanWithProperties(a,{context:b.contextId,type:"routes",name:b.routeId}));var g=e?e.key:null;g&&f&&(c="#/camel/"+f+"?tab=camel&nid="+g)}return c}function o(a){return a?Core.trimQuotes(a):a}b.workspace=d;var p=f.camelJmxDomain||"org.apache.camel";null!=c&&(b.contextId=c.contextId,b.endpointPath=c.endpointPath,b.endpointName=o(b.endpointPath),b.routeId=c.routeId),b.treeViewLink=n(p);var q=b.endpointPath?"endpoints":"routes",r={endpoints:"Camel Endpoint",routes:"Camel Route"};b.breadcrumbs=[{name:b.contextId,items:g(p),tooltip:"Camel Context"},{name:q,items:h(b.contextId,p),tooltip:"Entity inside a Camel Context"},{name:b.endpointName||o(b.routeId),items:k(b.contextId,i(),p),tooltip:r[q]}]}])}(Camel||(Camel={}));var Camel;!function(a){a.BrowseEndpointController=a._module.controller("Camel.BrowseEndpointController",["$scope","$routeParams","workspace","jolokia","localStorage",function(b,c,d,e,f){function g(){}function h(){b.messageDialog&&b.messageDialog.close(),b.gridOptions.selectedItems.splice(0),Core.notification("success",b.message),setTimeout(i,50)}function i(c){var f=null;if(b.contextId&&b.endpointPath){var g=d.findMBeanWithProperties(c,{context:b.contextId,type:"endpoints",name:b.endpointPath});g&&(f=g.objectName)}if(f||(f=d.getSelectedMBeanName()),f){a.log.info("MBean: "+f);var h=onSuccess(j);e.execute(f,"browseAllMessagesAsXml(java.lang.Boolean)",!0,h)}}function j(c){var d=[];if(angular.isString(c)){var e=$.parseXML(c);$(e).find("message").each(function(b,c){var e=a.createMessageFromXml(c);d.push(e)})}b.messages=d,Core.$apply(b)}var k=f.camelJmxDomain||"org.apache.camel";b.workspace=d,b.forwardDialog=new UI.Dialog,b.showMessageDetails=!1,b.mode="text",b.gridOptions=a.createBrowseGridOptions(),b.contextId=c.contextId,b.endpointPath=c.endpointPath,b.isJmxTab=!c.contextId||!c.endpointPath,b.$watch("workspace.selection",function(){b.isJmxTab&&d.moveIfViewInvalid()||i(k)}),b.openMessageDialog=function(a){ActiveMQ.selectCurrentMessage(a,"id",b),b.row&&(b.mode=CodeEditor.detectTextFormat(b.row.body),b.showMessageDetails=!0)},ActiveMQ.decorate(b),b.forwardMessagesAndCloseForwardDialog=function(){var c=a.getSelectionCamelContextMBean(d,k),f=b.gridOptions.selectedItems,i=b.endpointUri;c&&i&&f&&f.length&&(e.execute(c,"createEndpoint(java.lang.String)",i,onSuccess(g)),b.message="Forwarded "+Core.maybePlural(f.length,"message to "+i),angular.forEach(f,function(a,b){var d=b+1<f.length?g:h,j=a.body,k=a.headers;e.execute(c,"sendBodyAndHeaders(java.lang.String, java.lang.Object, java.util.Map)",i,j,k,onSuccess(d))})),b.forwardDialog.close()},b.endpointUris=function(){var b=a.getSelectionCamelContextEndpoints(d,k)
;return b?b.children.map(function(a){return a.title}):[]},b.refresh=i}])}(Camel||(Camel={}));var Camel;!function(a){a.camelHeaderSchema={definitions:{headers:{properties:{CamelAuthentication:{type:"java.lang.String"},CamelAuthenticationFailurePolicyId:{type:"java.lang.String"},CamelAcceptContentType:{type:"java.lang.String"},CamelAggregatedSize:{type:"java.lang.String"},CamelAggregatedTimeout:{type:"java.lang.String"},CamelAggregatedCompletedBy:{type:"java.lang.String"},CamelAggregatedCorrelationKey:{type:"java.lang.String"},CamelAggregationStrategy:{type:"java.lang.String"},CamelAggregationCompleteAllGroups:{type:"java.lang.String"},CamelAggregationCompleteAllGroupsInclusive:{type:"java.lang.String"},CamelAsyncWait:{type:"java.lang.String"},CamelBatchIndex:{type:"java.lang.String"},CamelBatchSize:{type:"java.lang.String"},CamelBatchComplete:{type:"java.lang.String"},CamelBeanMethodName:{type:"java.lang.String"},CamelBeanMultiParameterArray:{type:"java.lang.String"},CamelBinding:{type:"java.lang.String"},breadcrumbId:{type:"java.lang.String"},CamelCharsetName:{type:"java.lang.String"},CamelCreatedTimestamp:{type:"java.lang.String"},"Content-Encoding":{type:"java.lang.String"},"Content-Length":{type:"java.lang.String"},"Content-Type":{type:"java.lang.String"},CamelCorrelationId:{type:"java.lang.String"},CamelDataSetIndex:{type:"java.lang.String"},"org.apache.camel.default.charset":{type:"java.lang.String"},CamelDestinationOverrideUrl:{type:"java.lang.String"},CamelDisableHttpStreamCache:{type:"java.lang.String"},CamelDuplicateMessage:{type:"java.lang.String"},CamelExceptionCaught:{type:"java.lang.String"},CamelExceptionHandled:{type:"java.lang.String"},CamelEvaluateExpressionResult:{type:"java.lang.String"},CamelErrorHandlerHandled:{type:"java.lang.String"},CamelExternalRedelivered:{type:"java.lang.String"},CamelFailureHandled:{type:"java.lang.String"},CamelFailureEndpoint:{type:"java.lang.String"},CamelFailureRouteId:{type:"java.lang.String"},CamelFilterNonXmlChars:{type:"java.lang.String"},CamelFileLocalWorkPath:{type:"java.lang.String"},CamelFileName:{type:"java.lang.String"},CamelFileNameOnly:{type:"java.lang.String"},CamelFileNameProduced:{type:"java.lang.String"},CamelFileNameConsumed:{type:"java.lang.String"},CamelFilePath:{type:"java.lang.String"},CamelFileParent:{type:"java.lang.String"},CamelFileLastModified:{type:"java.lang.String"},CamelFileLength:{type:"java.lang.String"},CamelFilterMatched:{type:"java.lang.String"},CamelFileLockFileAcquired:{type:"java.lang.String"},CamelFileLockFileName:{type:"java.lang.String"},CamelGroupedExchange:{type:"java.lang.String"},CamelHttpBaseUri:{type:"java.lang.String"},CamelHttpCharacterEncoding:{type:"java.lang.String"},CamelHttpMethod:{type:"java.lang.String"},CamelHttpPath:{type:"java.lang.String"},CamelHttpProtocolVersion:{type:"java.lang.String"},CamelHttpQuery:{type:"java.lang.String"},CamelHttpResponseCode:{type:"java.lang.String"},CamelHttpUri:{type:"java.lang.String"},CamelHttpUrl:{type:"java.lang.String"},CamelHttpChunked:{type:"java.lang.String"},CamelHttpServletRequest:{type:"java.lang.String"},CamelHttpServletResponse:{type:"java.lang.String"},CamelInterceptedEndpoint:{type:"java.lang.String"},CamelInterceptSendToEndpointWhenMatched:{type:"java.lang.String"},CamelLanguageScript:{type:"java.lang.String"},CamelLogDebugBodyMaxChars:{type:"java.lang.String"},CamelLogDebugStreams:{type:"java.lang.String"},CamelLoopIndex:{type:"java.lang.String"},CamelLoopSize:{type:"java.lang.String"},CamelMaximumCachePoolSize:{type:"java.lang.String"},CamelMaximumEndpointCacheSize:{type:"java.lang.String"},CamelMessageHistory:{type:"java.lang.String"},CamelMulticastIndex:{type:"java.lang.String"},CamelMulticastComplete:{type:"java.lang.String"},CamelNotifyEvent:{type:"java.lang.String"},CamelOnCompletion:{type:"java.lang.String"},CamelOverruleFileName:{type:"java.lang.String"},CamelParentUnitOfWork:{type:"java.lang.String"},CamelRecipientListEndpoint:{type:"java.lang.String"},CamelReceivedTimestamp:{type:"java.lang.String"},CamelRedelivered:{type:"java.lang.String"},CamelRedeliveryCounter:{type:"java.lang.String"},CamelRedeliveryMaxCounter:{type:"java.lang.String"},CamelRedeliveryExhausted:{type:"java.lang.String"},CamelRedeliveryDelay:{type:"java.lang.String"},CamelRollbackOnly:{type:"java.lang.String"},CamelRollbackOnlyLast:{type:"java.lang.String"},CamelRouteStop:{type:"java.lang.String"},CamelSoapAction:{type:"java.lang.String"},CamelSkipGzipEncoding:{type:"java.lang.String"},CamelSlipEndpoint:{type:"java.lang.String"},CamelSplitIndex:{type:"java.lang.String"},CamelSplitComplete:{type:"java.lang.String"},CamelSplitSize:{type:"java.lang.String"},CamelTimerCounter:{type:"java.lang.String"},CamelTimerFiredTime:{type:"java.lang.String"},CamelTimerName:{type:"java.lang.String"},CamelTimerPeriod:{type:"java.lang.String"},CamelTimerTime:{type:"java.lang.String"},CamelToEndpoint:{type:"java.lang.String"},CamelTraceEvent:{type:"java.lang.String"},CamelTraceEventNodeId:{type:"java.lang.String"},CamelTraceEventTimestamp:{type:"java.lang.String"},CamelTraceEventExchange:{type:"java.lang.String"},"Transfer-Encoding":{type:"java.lang.String"},CamelUnitOfWorkExhausted:{type:"java.lang.String"},CamelUnitOfWorkProcessSync:{type:"java.lang.String"},CamelXsltFileName:{type:"java.lang.String"}}}}}}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.DebugRouteController",["$scope","$element","workspace","jolokia","localStorage",function(b,c,d,e,f){function g(){var b=o();if(b){var c=u();a.highlightSelectedNode(c,b)}}function h(){b.debugging=!1;var c=a.getSelectionCamelDebugMBean(d,y);c&&(b.debugging=e.getAttribute(c,"Enabled",onSuccess(null)),b.debugging?(e.execute(c,"getBreakpoints",onSuccess(q)),b.graphView="app/camel/html/routes.html",b.tableView="app/camel/html/browseMessages.html",Core.register(e,b,{type:"exec",mbean:c,operation:"getDebugCounter"},onSuccess(i))):(b.graphView=null,b.tableView=null))}function i(a){var c=a.value;c&&c!==b.breakpointCounter&&(b.breakpointCounter=c,j())}function j(){var b=a.getSelectionCamelDebugMBean(d,y);b&&(console.log("getting suspended breakpoints!"),e.execute(b,"getSuspendedBreakpointNodeIds",onSuccess(k)))}function k(c){var f=a.getSelectionCamelDebugMBean(d,y);b.suspendedBreakpoints=c,b.stopped=c&&c.length;var g=o();f&&g&&(e.execute(f,"dumpTracedMessagesAsXml",g,onSuccess(l)),b.selectedDiagramNodeId=g),v(),Core.$apply(b)}function l(c){if(console.log("onMessage! "),b.messages=[],c){var d=c;if(angular.isString(d)){var e=$.parseXML(d),f=$(e).find("fabricTracerEventMessage");f&&f.length||(f=$(e).find("backlogTracerEventMessage")),f.each(function(c,d){var e=a.createMessageFromXml(d),f=$(d).find("toNode").text();f&&(e.toNode=f),b.messages.push(e)})}}else console.log("WARNING: dumpTracedMessagesAsXml() returned no results!");m(),console.log("has messages "+b.messages.length+" selected row "+b.row+" index "+b.rowIndex),Core.$apply(b),v()}function m(){b.selectRowIndex(b.rowIndex),!b.row&&b.messageDialog.show&&(b.row={headers:{},body:""})}function n(){b.messages=[],b.suspendedBreakpoints=[],b.stopped=!1,m(),Core.$apply(b),v()}function o(){var a=null,c=b.suspendedBreakpoints;return c&&c.length&&(a=c[0],c.length>1&&p(b.selectedDiagramNodeId)&&(a=b.selectedDiagramNodeId)),a}function p(a){return t(b.suspendedBreakpoints,a)}function q(a){b.breakpoints=a,s();var c=u();c.length&&v(c),Core.$apply(b)}function r(a){return t(b.breakpoints,a)}function s(){b.hasBreakpoint=r(b.selectedDiagramNodeId)}function t(a,b){return b&&a&&a.some(b)}function u(){return d3.select("svg").selectAll("g .node")}function v(a){void 0===a&&(a=u()),a.each(function(a){var b=a.cid,c=d3.select(this),d=c.selectAll("image.breakpoint"),e=p(b);if(r(b)||e){var f=e?A:z;d.length&&d[0].length?d.attr("xlink:href",function(a){return f}):c.append("image").attr("xlink:href",function(a){return f}).attr("class","breakpoint").attr("x",-12).attr("y",-20).attr("height",24).attr("width",24)}else d.remove()})}function w(a){h(),Core.$apply(b)}function x(b){var c=a.getSelectionCamelDebugMBean(d,y);if(c){var g=b?"enableDebugger":"disableDebugger",h=a.maximumTraceOrDebugBodyLength(f),i=a.traceOrDebugIncludeStreams(f);e.setAttribute(c,"BodyMaxChars",h),e.setAttribute(c,"BodyIncludeStreams",i),e.setAttribute(c,"BodyIncludeFiles",i),e.execute(c,g,onSuccess(w))}}b.workspace=d;var y=f.camelJmxDomain||"org.apache.camel";b.ignoreRouteXmlNode=!0,b.startDebugging=function(){x(!0)},b.stopDebugging=function(){x(!1)},b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(h,50)}),b.$on("camel.diagram.selectedNodeId",function(a,c){b.selectedDiagramNodeId=c,s()}),b.$on("camel.diagram.layoutComplete",function(a,d){v(),$(c).find("g.node").dblclick(function(a){var c=this.getAttribute("data-cid");b.toggleBreakpoint(c)})}),b.$watch("workspace.selection",function(){d.moveIfViewInvalid()||h()}),b.toggleBreakpoint=function(b){var c=a.getSelectionCamelDebugMBean(d,y);if(c&&b){var f=r(b)?"removeBreakpoint":"addBreakpoint";e.execute(c,f,b,onSuccess(w))}},b.addBreakpoint=function(){var c=a.getSelectionCamelDebugMBean(d,y);c&&b.selectedDiagramNodeId&&e.execute(c,"addBreakpoint",b.selectedDiagramNodeId,onSuccess(w))},b.removeBreakpoint=function(){var c=a.getSelectionCamelDebugMBean(d,y);c&&b.selectedDiagramNodeId&&e.execute(c,"removeBreakpoint",b.selectedDiagramNodeId,onSuccess(w))},b.resume=function(){var b=a.getSelectionCamelDebugMBean(d,y);b&&e.execute(b,"resumeAll",onSuccess(n))},b.suspend=function(){var b=a.getSelectionCamelDebugMBean(d,y);b&&e.execute(b,"suspendAll",onSuccess(n))},b.step=function(){var b=a.getSelectionCamelDebugMBean(d,y),c=o();b&&c&&e.execute(b,"stepBreakpoint(java.lang.String)",c,onSuccess(n))},b.messages=[],b.mode="text",b.messageDialog=new UI.Dialog,b.gridOptions=a.createBrowseGridOptions(),b.gridOptions.selectWithCheckboxOnly=!1,b.gridOptions.showSelectionCheckbox=!1,b.gridOptions.multiSelect=!1,b.gridOptions.afterSelectionChange=g,b.gridOptions.columnDefs.push({field:"toNode",displayName:"To Node"}),b.openMessageDialog=function(a){var c=Core.pathGet(a,["rowIndex"]);if(b.selectRowIndex(c),b.row){var d=b.row.body;b.mode=angular.isString(d)?CodeEditor.detectTextFormat(d):"text",b.messageDialog.open()}},b.selectRowIndex=function(a){b.rowIndex=a;var c=b.gridOptions.selectedItems;c.splice(0,c.length),a>=0&&a<b.messages.length?(b.row=b.messages[a],b.row&&c.push(b.row)):b.row=null,g()};var z=Core.url("/app/camel/img/breakpoint.gif"),A=Core.url("/app/camel/img/breakpoint-suspended.gif")}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.EndpointController",["$scope","$location","localStorage","workspace","jolokia",function(b,c,d,e,f){function g(a){b.endpointName="",b.workspace.operationCounter+=1,Core.$apply(b),a&&!0===a?Core.notification("success","Creating endpoint "+b.message):Core.notification("error","Failed to create endpoint "+b.message)}function h(){if(e.selection){var a=Core.pathGet(e,["selection","parent"]);a&&b.workspace.updateSelectionNode(a)}b.workspace.operationCounter+=1,Core.$apply(b),Core.notification("success",b.message)}a.initEndpointChooserScope(b,c,d,e,f);var i=d.camelJmxDomain||"org.apache.camel";b.workspace=e,b.message="",b.createEndpoint=function(c){var d=e.jolokia;if(d){var f=a.getSelectionCamelContextMBean(e,i);if(f){b.message=c;d.execute(f,"createEndpoint(java.lang.String)",c,onSuccess(g))}else Core.notification("error","Could not find the CamelContext MBean!")}},b.createEndpointFromData=function(){if(b.selectedComponentName&&b.endpointPath){var a=b.selectedComponentName+"://"+b.endpointPath;console.log("Have endpoint data "+JSON.stringify(b.endpointParameters));var c="";angular.forEach(b.endpointParameters,function(a,b){c+=(c?"&":"")+b+"="+a}),c&&(a+="?"+c),b.createEndpoint(a)}},b.deleteEndpoint=function(){var a=e.jolokia,c=e.selection,d=c.entries;if(c&&a&&d){var f=c.domain,g=d.BrokerName,i=d.Destination,j="Topic"!==d.Type;if(f&&g){var k=f+":BrokerName="+g+",Type=Broker";b.message="Deleting "+(j?"queue":"topic")+" "+i;a.execute(k,"removeEndpoint(java.lang.String)",i,onSuccess(h))}}}}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.EndpointRuntimeRegistryController",["$scope","$location","workspace","jolokia","localStorage",function(b,c,d,e,f){function g(a){var c=a.value;if(c){var d=[];for(var e in c){var f=c[e];d.push({url:f.url,routeId:f.routeId,direction:f.direction,static:f.static,dynamic:f.dynamic,hits:f.hits})}d=d.sortBy("url"),b.data=d,b.selectedMBean=a.request.mbean}else b.selectedMBean="true";Core.$apply(b)}function h(){console.log("Loading EndpointRuntimeRegistry data...");var b=a.getSelectionCamelEndpointRuntimeRegistry(d,i);b&&e.request({type:"exec",mbean:b,operation:"endpointStatistics"},onSuccess(g))}var i=f.camelJmxDomain||"org.apache.camel";b.workspace=d,b.data=[],b.selectedMBean=null,b.mbeanAttributes={};var j=[{field:"url",displayName:"Url",cellFilter:null,width:"500",resizable:!0},{field:"routeId",displayName:"Route Id",cellFilter:null,width:"*",resizable:!0},{field:"direction",displayName:"Direction",cellFilter:null,width:"*",resizable:!0},{field:"static",displayName:"Static",cellFilter:null,width:"*",resizable:!0},{field:"dynamic",displayName:"Dynamic",cellFilter:null,width:"*",resizable:!0},{field:"hits",displayName:"Hits",cellFilter:null,width:"*",resizable:!0}];b.gridOptions={data:"data",displayFooter:!0,displaySelectionCheckbox:!1,canSelectRows:!1,enableSorting:!0,columnDefs:j,selectedItems:[],filterOptions:{filterText:""}},h()}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.FabricDiagramController",["$scope","$compile","$location","localStorage","jolokia","workspace",function(b,c,d,e,f,g){function h(a,c,d){void 0===d&&(d="#/jmx/attributes?tab=camel");var e=d;c&&(e+=c),b.doConnect(a,e)}function i(){var a=b.selectedNodeJolokia;a&&a!==f&&a.stop()}function j(a){var d=[];if(a){var e=a.value||{};b.selectedNodeAttributes=e;var f=b.selectedNode||{},g=f.container||{},h=f.type,i=(f.brokerName,g.id),j=(f.group||g.group,f.jolokiaUrl||g.jolokiaUrl,f.profile||g.profile,f.version||g.version,h&&h.startsWith("broker"),y.concat(z[h]||[])),l=A[h];angular.forEach(e,function(a,b){if(l?l.indexOf(b)>=0:j.indexOf(b)<0){var c=Core.humanizeValueHtml(a);d.push({key:Core.humanizeValue(b),value:c})}}),d=d.sortBy("key"),i&&v&&d.splice(0,0,{key:"Container",value:c('<div fabric-container-link="'+f.container.id+'"></div>')(b)});var m=f.typeLabel,n=f.name||f.id||f.objectName;if(m){var o=n;"queue"!==h&&"topic"!==h||(o=k(n,h));var p={key:m,value:o};d.splice(0,0,p)}}b.selectedNodeProperties=d,Core.$apply(b)}function k(a,d){return void 0===d&&(d="queue"),c('<a target="destination" title="'+a+'" ng-click="connectToEndpoint()">'+a+"</a>")(b)}function l(){var a={jolokia:f};b.activeContainers={local:a},n(),b.containerCount=1}function m(a){if(a){var c=angular.toJson(a);if(b.responseJson===c)return;b.responseJson=c;b.activeContainers;b.activeContainers=(a||{}).filter(function(a){return a.jmxDomains.any(u)}),b.containerCount=b.activeContainers.length,n()}else b.containerCount=0}function n(){x=new ForceGraph.GraphBuilder,angular.forEach(b.activeContainers,function(a,b){var c=a.jolokia;if(!c){var d=a.jolokiaUrl;if(d){var e=Core.useProxyIfExternal(d);c=Fabric.createJolokia(e)}}c?p(c,a):Fabric.containerJolokia(f,b,function(b){return p(b,a)})}),Core.$apply(b)}function o(a){return!!a&&(!b.searchFilter||a.toLowerCase().indexOf(b.searchFilter.toLowerCase())>=0)}function p(c,d){function e(e,f,g,i,l,m){void 0===i&&(i=null),void 0===l&&(l=null),void 0===m&&(m=null),e||(e=u+":context="+l+',type=routes,name="'+i+'"');var n=Core.parseMBean(e),p=n.attributes,l=p.context;i||(i=Core.trimQuotes(p.name)),p.routeId=i,p.mbean=e,p.container=d,p.type="route";var q=null;if(i&&o(l)){if(q=r("route",j+i,p,function(){return{name:i,typeLabel:"Route",container:d,objectName:e,jolokia:c,popup:{title:"Route: "+i,content:"<p>context: "+l+"</p>"}}}),g){var t=f.EndpointUri;if(t&&q){var v=null,w=a.escapeEndpointUriNameForJmx(t),x=[t,w];angular.forEach(x,function(a){v||(v=k[a])}),v||angular.forEach(x,function(a){if(!v){var b=a.lastIndexOf("?");if(b>0){var c=a.substring(0,b);v=k[c]}}}),s(q,v,"consumer")}}b.viewSettings.route&&b.viewSettings.context&&(m||(m=h(l)),s(m,q,"route"))}return q}function f(b,e,f){void 0===e&&(e=null),void 0===f&&(f=null),b||(b=u+":context="+f+',type=endpoints,name="'+a.escapeEndpointUriNameForJmx(e)+'"');var g=Core.parseMBean(b),h=g.attributes,f=h.context;e||(e=Core.trimQuotes(h.name)),h.uri=e,h.mbean=b,h.container=d,h.contextId=f;var i=null;return e&&o(f)&&(i=r("endpoint",j+e,h,function(){return{name:e,typeLabel:"Endpoint",container:d,objectName:b,jolokia:c,popup:{title:"Endpoint: "+e,content:"<p>context: "+f+"</p>"}}}))&&(k[e]=i),i}function g(){b.viewSettings.route&&c.request({type:"read",mbean:u+":type=routes,*",attribute:["EndpointUri"]},onSuccess(function(a){angular.forEach(a.value,function(a,b){e(b,a,!0)}),q()})),b.viewSettings.endpoint&&c.search(u+":type=endpoints,*",onSuccess(function(a){angular.forEach(a,function(a){var b=f(a);s(h(null,a),b,"endpoint")}),q()}))}function h(h,i){void 0===i&&(i=null);var k=null;if(o(h)){if(i||(i=u+":context="+h+',type=context,name="'+h+'"'),!h&&i){var m=Core.parseMBean(i),n=m.attributes;h=n.context}var p={contextId:h};b.viewSettings.context&&(k=r("context",j+h,p,function(){return{name:h,typeLabel:"CamelContext",container:d,objectName:i,jolokia:c,popup:{title:"CamelContext: "+h,content:""}}})),c.execute(i,"createRouteStaticEndpointJson",onSuccess(function(b){if(angular.isString(b)){var c=b,d=null;try{d=JSON.parse(c)}catch(e){c=Core.trimTrailing(c.trim(),"}");try{d=JSON.parse(c)}catch(c){a.log.debug("Ignored invalid json: "+e+" from text: "+b)}}}d&&(angular.forEach(d.routes,function(a,b){angular.forEach(a.inputs,function(c){var d=c.uri;if(d){var g=e(null,{},!1,b,h,k),i=f(null,d,h),j=g;s(i,g,"endpoint"),angular.forEach(a.outputs,function(a){var b=a.uri;if(b){var c=f(null,b,h);s(j,c,"endpoint"),j=c}})}})}),a.log.info("Updating graph model!"),q())},{error:function(a){l||(l=!0,g())}}))}return k}if(c){d.jolokia=c;var i=d.id||"local",j=i+":",k={},l=!1;c.search(u+":type=context,*",onSuccess(function(a){angular.forEach(a,function(a){var b=Core.parseMBean(a),c=b.attributes,d=c.context;Core.trimQuotes(c.name);h(d,a)})}))}}function q(){b.graph=x.buildGraph(),Core.$apply(b)}function r(a,c,d,e){var f=null;if(c){var g=a+":"+c;if(!(f=x.getNode(g))){var h=e();if(f=angular.copy(d),angular.forEach(h,function(a,b){return f[b]=a}),f.id=g,f.type||(f.type=a),f.name||(f.name=c),f){var i=b.shapeSize[a];i&&!f.size&&(f.size=i),f.summary||(f.summary=f.popup||""),b.viewSettings.popup||delete f.popup,b.viewSettings.label||delete f.name;var j=b.viewSettings[a];!j&&angular.isDefined(j)||x.addNode(f)}}}return f}function s(a,b,c){a&&b&&t(a.id,b.id,c)}function t(a,b,c){a&&b&&x.addLink(a,b,c)}var u=e.camelJmxDomain||"org.apache.camel";b.workspace=g,Fabric.initScope(b,d,f,g);var v=Fabric.isFMCContainer(g);b.isFmc=v,b.selectedNode=null;var w={panel:!0,popup:!1,label:!0,container:!1,endpoint:!0,route:!0,context:!1,consumer:!0,producer:!0};b.viewSettings={},b.shapeSize={context:12,route:10,endpoint:7};var x=new ForceGraph.GraphBuilder;Core.bindModelToSearchParam(b,d,"searchFilter","q",""),angular.forEach(w,function(a,c){function e(){var b=d.search()[g]||a;return"false"!==b&&b}var f="viewSettings."+c,g=c,h=e();Core.pathSet(b,f,h),b.$watch(f,function(){var a=Core.pathGet(b,f);a!==e()&&(a!==w[c]?(a||(a="false"),d.search(g,a)):d.search(g,null));n()})}),b.connectToContext=function(){var a=b.selectedNode;if(a){h(a.container||a,null)}},b.connectToEndpoint=function(){var a=b.selectedNode;if(a){h(a.container||a,null)}},b.$on("$destroy",function(a){i()}),b.$watch("selectedNode",function(a,c){b.unregisterFn&&(b.unregisterFn(),b.unregisterFn=null);var d=b.selectedNode;if(d){var g=d.objectName,h=d.container||{},k=d.jolokia||h.jolokia||f;if(k!==b.selectedNodeJolokia&&(i(),b.selectedNodeJolokia=k,k!==f)){var l=Core.parseIntValue(e.updateRate||"2000","update rate");l&&k.start(l)}var m={value:d.panelProperties||{}};g&&k?b.unregisterFn=Core.register(k,b,{type:"read",mbean:g},onSuccess(j,{error:function(a){j(m),Core.defaultJolokiaErrorHandler(a)}})):j(m)}});var y=["CamelId","CamelManagementName"],z={context:["ApplicationContextClassName","CamelId","ClassResolver","ManagementName","PackageScanClassResolver","Properties"],endpoint:["Camel","Endpoint"],route:["Description"]},A={broker:[]};if(b.$watch("searchFilter",function(a,b){n()}),v){b.versionId=Fabric.getDefaultVersionId(f);var B=["id","alive","parentId","profileIds","versionId","provisionResult","jolokiaUrl","jmxDomains"];Fabric.getContainersFields(f,B,m)}else b.$watch("workspace.tree",function(){l()}),b.$on("jmxTreeUpdated",function(){l()})}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.MessageHistoryMetricsController",["$scope","$location","workspace","jolokia","metricsWatcher","localStorage",function(b,c,d,e,f,g){function h(a){var c=a.value;if(c){var d=JSON.parse(c);if(!b.initDone){var e=d.timers,g=0;if(null!=e){for(var h in e){var i=h,j=i.lastIndexOf("."),l=i.substr(0,j),m=i.substr(j+1),n=l.substr(l.indexOf(".")+1);n=n.substr(0,n.indexOf("."));var o=l.substr(l.lastIndexOf(".")+1),p=(e[h],"timer-"+g);b.metricDivs.push({id:p,routeId:n,nodeId:o}),g++,k.info("Added timer: "+p+" ("+l+"."+m+") for route: "+n+" node: "+o+" with max seconds: "+b.maxSeconds),f.addTimer(p,l,m,b.maxSeconds,o,"Histogram",1e3*b.maxSeconds)}k.info("Pre-init graphs"),Core.$apply(b)}k.info("Init graphs"),f.initGraphs()}b.initDone=!0,k.debug("Updating graphs: "+d),f.updateGraphs(d)}b.initDone=!0,Core.$apply(b)}function i(){k.info("Loading RouteMetrics data...");var c=a.getSelectedRouteId(d);null!=c&&(b.filterText=c);var f=a.getSelectionCamelMessageHistoryMetrics(d,j);if(f){var g={type:"exec",mbean:f,operation:"dumpStatisticsAsJson"};scopeStoreJolokiaHandle(b,e,e.register(h,g))}else b.initDone=!0,Core.$apply(b)}var j=g.camelJmxDomain||"org.apache.camel",k=Logger.get("Camel");b.workspace=d,b.maxSeconds=a.routeMetricMaxSeconds(g),b.filterText=null,b.initDone=!1,b.metricDivs=[],b.filterByRoute=function(a){k.debug("Filter by route/node "+a);var c=Core.matchFilterIgnoreCase(a.routeId,b.filterText);return c||(c=Core.matchFilterIgnoreCase(a.nodeId,b.filterText)),c?"":"display: none;"},b.onResponse=function(a){i()},b.$watch("workspace.tree",function(){setTimeout(i,50)})}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.InflightController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(a){var c=a.value;if(c){var d=[];for(var e in c){var f=c[e];d.push({exchangeId:f.exchangeId,routeId:f.routeId,nodeId:f.nodeId,duration:f.duration,elapsed:f.elapsed})}d=d.sortBy("exchangeId"),b.data=d,b.selectedMBean=a.request.mbean}else b.data=[];b.initDone="true",Core.$apply(b)}function g(){i.info("Loading inflight data...");var c=a.getSelectedRouteId(d);null!=c&&(b.gridOptions.filterOptions.filterText=c);var g=a.getSelectionCamelInflightRepository(d,h);if(g){var j={type:"exec",mbean:g,operation:"browse()"};e.request(j,onSuccess(f)),scopeStoreJolokiaHandle(b,e,e.register(onSuccess(f),j))}}var h=localStorage.camelJmxDomain||"org.apache.camel",i=Logger.get("Camel");b.workspace=d,b.data=[],b.initDone=!1,b.mbeanAttributes={};var j=[{field:"exchangeId",displayName:"Exchange Id",cellFilter:null,width:"*",resizable:!0},{field:"routeId",displayName:"Route Id",cellFilter:null,width:"*",resizable:!0},{field:"nodeId",displayName:"Node Id",cellFilter:null,width:"*",resizable:!0},{field:"duration",displayName:"Duration (ms)",cellFilter:null,width:"*",resizable:!0},{field:"elapsed",displayName:"Elapsed (ms)",cellFilter:null,width:"*",resizable:!0}];b.gridOptions={data:"data",displayFooter:!0,displaySelectionCheckbox:!1,canSelectRows:!1,enableSorting:!0,columnDefs:j,selectedItems:[],filterOptions:{filterText:""}},g()}])}(Camel||(Camel={}));var Camel;!function(a){a.jmsHeaderSchema={definitions:{headers:{properties:{JMSCorrelationID:{type:"java.lang.String"},JMSDeliveryMode:{type:"string",enum:["PERSISTENT","NON_PERSISTENT"]},JMSDestination:{type:"javax.jms.Destination"},JMSExpiration:{type:"long"},JMSPriority:{type:"int"},JMSReplyTo:{type:"javax.jms.Destination"},JMSType:{type:"java.lang.String"},JMSXGroupId:{type:"java.lang.String"},AMQ_SCHEDULED_CRON:{type:"java.lang.String"},AMQ_SCHEDULED_DELAY:{type:"java.lang.String"},AMQ_SCHEDULED_PERIOD:{type:"java.lang.String"},AMQ_SCHEDULED_REPEAT:{type:"java.lang.String"}}},"javax.jms.Destination":{type:"java.lang.String"}}}}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.PreferencesController",["$scope","localStorage",function(b,c){Core.initPreferenceScope(b,c,{camelIgnoreIdForLabel:{value:!1,converter:Core.parseBooleanValue,post:function(a){b.$emit("ignoreIdForLabel",a)}},camelShowInflightCounter:{value:!0,converter:Core.parseBooleanValue},camelMaximumLabelWidth:{value:a.defaultMaximumLabelWidth,converter:parseInt},camelMaximumTraceOrDebugBodyLength:{value:a.defaultCamelMaximumTraceOrDebugBodyLength,converter:parseInt},camelTraceOrDebugIncludeStreams:{value:a.defaultCamelTraceOrDebugIncludeStreams,converter:Core.parseBooleanValue},camelRouteMetricMaxSeconds:{value:a.defaultCamelRouteMetricMaxSeconds,converter:parseInt},camelHideOptionDocumentation:{value:a.defaultHideOptionDocumentation,converter:Core.parseBooleanValue,post:function(a){b.$emit("hideOptionDocumentation",a)}},camelHideOptionDefaultValue:{value:a.defaultHideOptionDefaultValue,converter:Core.parseBooleanValue,post:function(a){b.$emit("hideOptionDefaultValue",a)}},camelHideOptionUnusedValue:{value:a.defaultHideOptionUnusedValue,converter:Core.parseBooleanValue,post:function(a){b.$emit("hideOptionUnusedValue",a)}}})}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.ProfileRouteController",["$scope","$location","workspace","jolokia","localStorage",function(b,c,d,e,f){function g(){console.log("initializing id and icons"),b.icons={};var c=Core.pathGet(d.selection,["routeXmlNode"]);if(c){var e={img:"",index:0};e.index=-1,e.img="<img src='img/icons/camel/camel_route.png'>",b.icons[b.selectedRouteId]=e,$(c).find("*").each(function(c,d){var e=d.getAttribute("id");if(e){var f={img:"",index:0};f.index=c;var g=a.getRouteNodeIcon(d);f.img=g?"<img src='"+g+"'>":"",b.icons[e]=f}})}}function h(){console.log("Loading Camel route profile data..."),b.selectedRouteId=a.getSelectedRouteId(d);var c=a.getSelectionRouteMBean(d,b.selectedRouteId,i);console.log("Selected route is "+b.selectedRouteId),g(),console.log("Initialized icons, with "+b.icons.length+" icons");var f={type:"exec",mbean:c,operation:"dumpRouteStatsAsXml(boolean,boolean)",arguments:[!1,!0]};scopeStoreJolokiaHandle(b,e,e.register(k,f))}var i=f.camelJmxDomain||"org.apache.camel";b.workspace=d,b.data=[],b.icons={},b.selectedRouteId="";var j=[{field:"id",displayName:"Id",cellTemplate:'<div class="ngCellText" ng-bind-html-unsafe="rowIcon(row.entity.id)"></div>',cellFilter:null,width:"**",resizable:!0},{field:"count",displayName:"Count",cellFilter:null,width:"*",resizable:!0},{field:"last",displayName:"Last",cellFilter:null,width:"*",resizable:!0},{field:"delta",displayName:"Delta",cellFilter:null,width:"*",resizable:!0},{field:"mean",displayName:"Mean",cellFilter:null,width:"*",resizable:!0},{field:"min",displayName:"Min",cellFilter:null,width:"*",resizable:!0},{field:"max",displayName:"Max",cellFilter:null,width:"*",resizable:!0},{field:"total",displayName:"Total",cellFilter:null,width:"*",resizable:!0},{field:"self",displayName:"Self",cellFilter:null,width:"*",resizable:!0}];b.rowIcon=function(a){var c=b.icons[a];return c?c.img+" "+a:a},b.gridOptions={data:"data",displayFooter:!0,displaySelectionCheckbox:!1,canSelectRows:!1,enableSorting:!1,columnDefs:j,filterOptions:{filterText:""}};var k=function(a){var c=[],d=a.value;if(angular.isString(d)){var e=$.parseXML(d);$(e).find("routeStat").each(function(a,b){var d={id:{},count:{},last:{},delta:{},mean:{},min:{},max:{},total:{},self:{}};d.id=b.getAttribute("id");var e=0;e+=+b.getAttribute("exchangesCompleted"),e+=+b.getAttribute("exchangesFailed"),d.count=e,d.last=b.getAttribute("lastProcessingTime");var f=b.getAttribute("deltaProcessingTime");d.delta=f||0,d.mean=b.getAttribute("meanProcessingTime"),d.min=b.getAttribute("minProcessingTime"),d.max=b.getAttribute("maxProcessingTime"),d.total=b.getAttribute("totalProcessingTime"),d.self=b.getAttribute("selfProcessingTime"),c.push(d)});$(e).find("processorStat").each(function(a,b){var d={id:{},count:{},last:{},delta:{},mean:{},min:{},max:{},total:{},self:{}};d.id=b.getAttribute("id");var e=0;e+=+b.getAttribute("exchangesCompleted"),e+=+b.getAttribute("exchangesFailed"),d.count=e,d.last=b.getAttribute("lastProcessingTime");var f=b.getAttribute("deltaProcessingTime");d.delta=f||0,d.mean=b.getAttribute("meanProcessingTime"),d.min=b.getAttribute("minProcessingTime"),d.max=b.getAttribute("maxProcessingTime");var g=b.getAttribute("accumulatedProcessingTime");d.total=g||"0",d.self=b.getAttribute("totalProcessingTime"),c.push(d)})}b.data=c,Core.$apply(b)};b.onResponse=function(a){h()},b.$watch("workspace.tree",function(){setTimeout(h,50)})}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.PropertiesController",["$scope","$rootScope","workspace","localStorage",function(b,c,d,e){function f(a){var c=Core.pathGet(b.model,["properties",a,"defaultValue"]);if(angular.isDefined(c)){var d=Core.pathGet(b.nodeData,a);if(angular.isDefined(d)){return 0===d.toString().localeCompare(c)}}return!1}function g(a){var c=Core.pathGet(b.nodeData,a);return!angular.isUndefined(c)&&!Core.isBlank(c)&&(!angular.isString(c)||!Core.isBlank(c))}function h(){var c=a.getSelectedRouteNode(d,j);if(null!=c&&(b.model=a.getCamelSchema(c.nodeName),b.model)){i.enabledFor(Logger.DEBUG)&&(i.debug("Properties - data: "+JSON.stringify(b.nodeData,null,"  ")),i.debug("Properties - schema: "+JSON.stringify(b.model,null,"  ")));var e=[];b.model.group&&(e=b.model.group.split(",")),b.labels=e,b.nodeData=a.getRouteNodeJSON(c),b.icon=a.getRouteNodeIcon(c),b.viewTemplate="app/camel/html/nodePropertiesView.html",Core.$apply(b)}}var i=Logger.get("Camel"),j=e.camelJmxDomain||"org.apache.camel";b.workspace=d,b.hideHelp=a.hideOptionDocumentation(e),b.hideUnused=a.hideOptionUnusedValue(e),b.hideDefault=a.hideOptionDefaultValue(e),b.viewTemplate=null,b.schema=_apacheCamelModel,b.model=null,b.labels=[],b.nodeData=null,b.icon=null,b.$watch("hideHelp",function(a,b){a!==b&&h()}),c.$on("hideOptionDocumentation",function(a,c){b.hideHelp=c}),b.$watch("hideUnused",function(a,b){a!==b&&h()}),c.$on("hideOptionUnusedValue",function(a,c){b.hideUnused=c}),b.$watch("hideDefault",function(a,b){a!==b&&h()}),c.$on("hideOptionDefaultValue",function(a,c){b.hideDefault=c}),b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(h,50)}),b.$watch("workspace.selection",function(){!d.isRoutesFolder(j)&&d.moveIfViewInvalid()||h()}),b.showEntity=function(a){return(!b.hideDefault||!f(a))&&!(b.hideUnused&&!g(a))}}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.PropertiesComponentController",["$scope","workspace","localStorage","jolokia",function(b,c,d,e){function f(a){var c=Core.pathGet(b.model,["properties",a,"defaultValue"]);if(angular.isDefined(c)){var d=Core.pathGet(b.nodeData,a);if(angular.isDefined(d)){return 0===d.toString().localeCompare(c)}}return!1}function g(a){var c=Core.pathGet(b.nodeData,a);return!angular.isUndefined(c)&&!Core.isBlank(c)&&(!angular.isString(c)||!Core.isBlank(c))}function h(){var d=a.getSelectionCamelContextMBean(c,k),f=null;if(f||(f=c.getSelectedMBeanName()),f&&d){var g=e.request({type:"read",mbean:f,attribute:["ComponentName"]}),h=g.value.ComponentName;if(h){b.componentName=h,j.info("Calling explainComponentJson for name: "+h);var l={type:"exec",mbean:d,operation:"explainComponentJson(java.lang.String,boolean)",arguments:[h,!0]};e.request(l,onSuccess(i))}}}function i(c){j.debug("Populate data "+c)
;var d=c.value;if(d){b.model=JSON.parse(d),b.model.title=b.componentName,b.model.description=b.model.component.description,b.icon=Core.url("/img/icons/camel/endpoint24.png"),b.nodeData={};var e={};e=a.buildTabsFromProperties(e,b.model.componentProperties),b.model.tabs=e,b.model.properties=b.model.componentProperties,angular.forEach(b.model.componentProperties,function(a,c){var d=a.value||a.defaultValue;angular.isDefined(d)&&null!==d&&(b.nodeData[c]=d),delete a.label});var f=[];b.model.component.label&&(f=b.model.component.label.split(",")),b.labels=f,b.viewTemplate="app/camel/html/nodePropertiesView.html",Core.$apply(b)}}var j=Logger.get("Camel"),k=d.camelJmxDomain||"org.apache.camel";b.workspace=c,b.hideHelp=a.hideOptionDocumentation(d),b.hideUnused=a.hideOptionUnusedValue(d),b.hideDefault=a.hideOptionDefaultValue(d),b.viewTemplate=null,b.schema=null,b.model=null,b.labels=[],b.nodeData=null,b.icon=null,b.componentName=null,b.$watch("hideHelp",function(a,b){a!==b&&h()}),b.$watch("hideUnused",function(a,b){a!==b&&h()}),b.$watch("hideDefault",function(a,b){a!==b&&h()}),b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(h,50)}),b.$watch("workspace.selection",function(){c.moveIfViewInvalid()||h()}),b.showEntity=function(a){return(!b.hideDefault||!f(a))&&!(b.hideUnused&&!g(a))}}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.PropertiesDataFormatController",["$scope","workspace","localStorage","jolokia",function(b,c,d,e){function f(a){var c=Core.pathGet(b.model,["properties",a,"defaultValue"]);if(angular.isDefined(c)){var d=Core.pathGet(b.nodeData,a);if(angular.isDefined(d)){return 0===d.toString().localeCompare(c)}}return!1}function g(a){var c=Core.pathGet(b.nodeData,a);return!angular.isUndefined(c)&&!Core.isBlank(c)&&(!angular.isString(c)||!Core.isBlank(c))}function h(){var a=null;if(a||(a=c.getSelectedMBeanName()),a){j.info("Calling informationJson");var b={type:"exec",mbean:a,operation:"informationJson"};e.request(b,onSuccess(i))}}function i(c){j.debug("Populate data "+c);var d=c.value;if(d){b.model=JSON.parse(d),b.model.title=b.model.dataformat.title+" ("+b.model.dataformat.name+")",b.model.description=b.model.dataformat.description,b.icon=Core.url("/img/icons/camel/marshal24.png"),b.nodeData={};var e={};e=a.buildTabsFromProperties(e,b.model.properties),b.model.tabs=e,angular.forEach(b.model.properties,function(a,c){var d=a.value||a.defaultValue;angular.isDefined(d)&&null!==d&&(b.nodeData[c]=d),delete a.label}),delete b.model.properties.id;var f=[];b.model.dataformat.label&&(f=b.model.dataformat.label.split(",")),b.labels=f,b.viewTemplate="app/camel/html/nodePropertiesView.html",Core.$apply(b)}}var j=Logger.get("Camel");b.workspace=c,b.hideHelp=a.hideOptionDocumentation(d),b.hideUnused=a.hideOptionUnusedValue(d),b.hideDefault=a.hideOptionDefaultValue(d),b.viewTemplate=null,b.schema=null,b.model=null,b.labels=[],b.nodeData=null,b.icon=null,b.dataFormatName=null,b.$watch("hideHelp",function(a,b){a!==b&&h()}),b.$watch("hideUnused",function(a,b){a!==b&&h()}),b.$watch("hideDefault",function(a,b){a!==b&&h()}),b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(h,50)}),b.$watch("workspace.selection",function(){c.moveIfViewInvalid()||h()}),b.showEntity=function(a){return(!b.hideDefault||!f(a))&&!(b.hideUnused&&!g(a))}}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.PropertiesEndpointController",["$scope","workspace","localStorage","jolokia",function(b,c,d,e){function f(a){var c=Core.pathGet(b.model,["properties",a,"defaultValue"]);if(angular.isDefined(c)){var d=Core.pathGet(b.nodeData,a);if(angular.isDefined(d)){return 0===d.toString().localeCompare(c)}}return!1}function g(a){var c=Core.pathGet(b.nodeData,a);return!angular.isUndefined(c)&&!Core.isBlank(c)&&(!angular.isString(c)||!Core.isBlank(c))}function h(){var d=a.getSelectionCamelContextMBean(c,j),f=null;if(b.contextId&&b.endpointPath){var g=c.findMBeanWithProperties(j,{context:b.contextId,type:"endpoints",name:b.endpointPath});g&&(f=g.objectName)}if(f||(f=c.getSelectedMBeanName()),f&&d){var h=e.request({type:"read",mbean:f,attribute:["EndpointUri"]}),l=h.value.EndpointUri;if(l){b.endpointUrl=l,k.info("Calling explainEndpointJson for url: "+l);var m={type:"exec",mbean:d,operation:"explainEndpointJson(java.lang.String,boolean)",arguments:[l,!0]};e.request(m,onSuccess(i))}}}function i(c){k.debug("Populate data "+c);var d=c.value;if(d){b.model=JSON.parse(d),b.model.title=b.endpointUrl,b.model.description=b.model.component.description,b.icon=Core.url("/img/icons/camel/endpoint24.png"),b.nodeData={};var e={};e=a.buildTabsFromProperties(e,b.model.properties),b.model.tabs=e,delete b.model.componentProperties,angular.forEach(b.model.properties,function(a,c){var d=a.value||a.defaultValue;angular.isDefined(d)&&null!==d&&(b.nodeData[c]=d),delete a.label});var f=[];b.model.component.label&&(f=b.model.component.label.split(",")),b.labels=f,b.viewTemplate="app/camel/html/nodePropertiesView.html",Core.$apply(b)}}var j=d.camelJmxDomain||"org.apache.camel",k=Logger.get("Camel");b.workspace=c,b.hideHelp=a.hideOptionDocumentation(d),b.hideUnused=a.hideOptionUnusedValue(d),b.hideDefault=a.hideOptionDefaultValue(d),b.viewTemplate=null,b.schema=null,b.model=null,b.labels=[],b.nodeData=null,b.icon=null,b.endpointUrl=null,b.$watch("hideHelp",function(a,b){a!==b&&h()}),b.$watch("hideUnused",function(a,b){a!==b&&h()}),b.$watch("hideDefault",function(a,b){a!==b&&h()}),b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(h,50)}),b.$watch("workspace.selection",function(){c.moveIfViewInvalid()||h()}),b.showEntity=function(a){return(!b.hideDefault||!f(a))&&!(b.hideUnused&&!g(a))}}])}(Camel||(Camel={}));var Camel;!function(a){function b(a,b){var c=a;return angular.forEach(b,function(b,d){var e=b.group||"options";if(angular.isDefined(e)&&null!==e){var f=a[e]||[];-1===f.indexOf(d)&&f.push(d),c[e]=f}}),c}a.log=Logger.get("Camel"),a.buildTabsFromProperties=b}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.RestServiceController",["$scope","$location","workspace","jolokia","localStorage",function(b,c,d,e,f){function g(a){var c=a.value;if(c){var d=[];for(var e in c){var f=c[e];for(var g in f){var h=f[g];d.push({url:h.url,baseUrl:h.baseUrl,basePath:h.basePath,uriTemplate:h.uriTemplate,method:h.method,consumes:h.consumes,produces:h.produces,inType:h.inType,outType:h.outType,state:h.state,routeId:h.routeId,description:h.description})}}d=d.sortBy("url"),b.data=d,b.selectedMBean=a.request.mbean}else b.selectedMBean="true";Core.$apply(b)}function h(){console.log("Loading RestRegistry data...");var b=a.getSelectionCamelRestRegistry(d,i);b&&e.request({type:"exec",mbean:b,operation:"listRestServices"},onSuccess(g))}var i=f.camelJmxDomain||"org.apache.camel";b.workspace=d,b.data=[],b.selectedMBean=null,b.mbeanAttributes={};var j=[{field:"url",displayName:"Absolute Url",cellFilter:null,width:"*",resizable:!0},{field:"baseUrl",displayName:"Base Url",cellFilter:null,width:"*",resizable:!0},{field:"basePath",displayName:"Base Path",cellFilter:null,width:"*",resizable:!0},{field:"uriTemplate",displayName:"Uri Template",cellFilter:null,width:"*",resizable:!0},{field:"method",displayName:"Method",cellFilter:null,width:"*",resizable:!0},{field:"consumes",displayName:"Consumes",cellFilter:null,width:"*",resizable:!0},{field:"produces",displayName:"Produces",cellFilter:null,width:"*",resizable:!0},{field:"inType",displayName:"Input Type",cellFilter:null,width:"*",resizable:!0},{field:"outType",displayName:"Output Type",cellFilter:null,width:"*",resizable:!0},{field:"state",displayName:"State",cellFilter:null,width:"*",resizable:!0},{field:"routeId",displayName:"Route Id",cellFilter:null,width:"*",resizable:!0},{field:"description",displayName:"Description",cellFilter:null,width:"*",resizable:!0}];b.gridOptions={data:"data",displayFooter:!0,displaySelectionCheckbox:!1,canSelectRows:!1,enableSorting:!0,columnDefs:j,selectedItems:[],filterOptions:{filterText:""}},b.renderIcon=function(b){return a.iconClass(b)},h()}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.RouteMetricsController",["$scope","$location","workspace","jolokia","metricsWatcher","localStorage",function(b,c,d,e,f,g){function h(a){var c=a.value;if(c){var d=JSON.parse(c);if(!b.initDone){var e=d.timers,g=0;if(null!=e){for(var h in e){var i=h,j=i.lastIndexOf("."),l=i.substr(0,j),m=i.substr(j+1),n=i.indexOf(":")||i.indexOf("."),o=i.substr(n+1);j=o.lastIndexOf("."),j>0&&(o=o.substr(0,j));var p=(e[h],"timer-"+g);b.metricDivs.push({id:p,routeId:o}),g++,k.info("Added timer: "+p+" ("+l+"."+m+") for route: "+o+" with max seconds: "+b.maxSeconds),f.addTimer(p,l,m,b.maxSeconds,o,"Histogram",1e3*b.maxSeconds)}k.info("Pre-init graphs"),Core.$apply(b)}k.info("Init graphs"),f.initGraphs()}b.initDone=!0,k.debug("Updating graphs: "+d),f.updateGraphs(d)}b.initDone=!0,Core.$apply(b)}function i(){k.info("Loading RouteMetrics data...");var c=a.getSelectedRouteId(d);null!=c&&(b.filterText=c);var f=a.getSelectionCamelRouteMetrics(d,j);if(f){var g={type:"exec",mbean:f,operation:"dumpStatisticsAsJson"};scopeStoreJolokiaHandle(b,e,e.register(h,g))}else b.initDone=!0,Core.$apply(b)}var j=g.camelJmxDomain||"org.apache.camel",k=Logger.get("Camel");b.workspace=d,b.maxSeconds=a.routeMetricMaxSeconds(g),b.filterText=null,b.initDone=!1,b.metricDivs=[],b.filterByRoute=function(a){return k.debug("Filter by route "+a),Core.matchFilterIgnoreCase(a.routeId,b.filterText)?"":"display: none;"},b.onResponse=function(a){i()},b.$watch("workspace.tree",function(){setTimeout(i,50)})}])}(Camel||(Camel={}));var Core;!function(a){function b(a,b,c,d){a.graphForce&&a.graphForce.stop(),d||(d=$("#canvas")[0]);var e=$(d);if(e.children("svg").remove(),b.length){var f=e.parent().width(),g=e.parent().height();if(g<100){var h=e.offset();g=$(document).height()-5,h&&(g-=h.top)}var i=d3.select(e[0]).append("svg").attr("width",f).attr("height",g),j=d3.layout.force().distance(100).charge(-1200).linkDistance(50).size([f,g]);a.graphForce=j,i.append("svg:defs").selectAll("marker").data(["from"]).enter().append("svg:marker").attr("id",String).attr("viewBox","0 -5 10 10").attr("refX",25).attr("refY",-1.5).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5"),j.nodes(b).links(c).start();var k=i.selectAll(".link").data(c).enter().append("line").attr("class","link");k.attr("class","link from"),k.attr("marker-end","url(#from)");var l=i.selectAll(".node").data(b).enter().append("g").attr("class","node").call(j.drag);l.append("image").attr("xlink:href",function(a){return a.imageUrl}).attr("x",-15).attr("y",-15).attr("width",30).attr("height",30),l.append("text").attr("dx",20).attr("dy",".35em").text(function(a){return a.label}),j.on("tick",function(){k.attr("x1",function(a){return a.source.x}).attr("y1",function(a){return a.source.y}).attr("x2",function(a){return a.target.x}).attr("y2",function(a){return a.target.y}),l.attr("transform",function(a){return"translate("+a.x+","+a.y+")"})})}}function c(a,b,c){var d={};a.forEach(function(a){var b=a.id;void 0===b?console.log("No node found for node "+JSON.stringify(a)):(void 0===a.edges&&(a.edges=[]),a.label||(a.label="node "+b),d[b]=a)});var e=d3.values(d);return b.forEach(function(a){var b=d[a.source],e=d[a.target];if(void 0===b||void 0===e)console.log("Bad link!  "+b+" target "+e+" for "+a);else{var f={source:b,target:e};c.push(f),b.edges.push(f),e.edges.push(f)}}),e}function d(b,c,d,e,h,i,j){function k(a){var b=a.dagre.points.slice(0),c=dagre.util.intersectRect(a.source.dagre,b.length>0?b[0]:a.source.dagre),d=dagre.util.intersectRect(a.target.dagre,b.length>0?b[b.length-1]:a.source.dagre);return b.unshift(c),b.push(d),d3.svg.line().x(function(a){return a.x}).y(function(a){return a.y}).interpolate("linear")(b)}function l(a,b,c){a.dagre.points.forEach(function(a){a.x=Math.max(0,Math.min(z.width,a.x+b)),a.y=Math.max(0,Math.min(z.height,a.y+c))})}void 0===i&&(i=!1),void 0===j&&(j=null);var m=10,n=[],o=a.createGraphStates(b,c,n),p=h?d3.select(h):d3.select("svg");h&&$(h).children("g").remove(),$(p).children("g").remove(),$("svg").children("g").remove();var q=p.append("g").attr("transform","translate(5, 5)"),b=q.selectAll("g .node").data(o).enter().append("g").attr("class","node").attr("data-cid",function(a){return a.cid}).attr("id",function(a){return"node-"+a.label});b.append("title").text(function(a){return a.tooltip||""});var r=q.selectAll("path .edge").data(n).enter().append("path").attr("class","edge");null==navigator.userAgent.match(/Trident.*rv[ :]*11\./)&&r.attr("marker-end","url(#arrowhead)");var s=b.append("rect").attr("rx","4").attr("ry","4").attr("class",function(a){return a.type}),t=b.append("image").attr("xlink:href",function(a){return a.imageUrl}).attr("x",-12).attr("y",-20).attr("height",24).attr("width",24),u=b.append("text").attr("text-anchor","end").attr("class","counter").attr("x",0).attr("dy",0).text(f),v=(b.append("text").attr("text-anchor","middle").attr("class","inflight").attr("x",10).attr("dy",-32).text(g),b.append("text").attr("text-anchor","middle").attr("x",0));v.append("tspan").attr("x",0).attr("dy",28).text(function(a){return a.label});var w=12,x=80;v.each(function(a){var b=this.getBBox();a.bbox=b;var c=b.width;c<x&&(c=x),a.width=c+2*m,a.height=b.height+2*m+w}),s.attr("x",function(a){return-(a.bbox.width/2+m)}).attr("y",function(a){return-(a.bbox.height/2+m+w/2)}).attr("width",function(a){return a.width}).attr("height",function(a){return a.height}),null!=j&&s.on("click",j),t.attr("x",function(a){return-a.bbox.width/2}),v.attr("x",function(a){return-a.bbox.width/2}).attr("y",function(a){return-a.bbox.height/2}),u.attr("x",function(a){return a.bbox.width/2}),dagre.layout().nodeSep(50).edgeSep(10).rankSep(50).nodes(o).edges(n).debugLevel(1).run(),b.attr("transform",function(a){return"translate("+a.dagre.x+","+a.dagre.y+")"}),r.attr("id",function(a){return a.dagre.id}).attr("d",function(a){return k(a)});var y=p.node();if(y){var z=y.getBBox();z&&(p.attr("width",z.width+10),p.attr("height",z.height+10))}if(i){var A=d3.behavior.drag().origin(function(a){return a.pos?{x:a.pos.x,y:a.pos.y}:{x:a.dagre.x,y:a.dagre.y}}).on("drag",function(a,b){var c=a.dagre.x,d=a.dagre.y;a.dagre.x=Math.max(a.width/2,Math.min(z.width-a.width/2,d3.event.x)),a.dagre.y=Math.max(a.height/2,Math.min(z.height-a.height/2,d3.event.y)),d3.select(this).attr("transform","translate("+a.dagre.x+","+a.dagre.y+")");var e=a.dagre.x-c,f=a.dagre.y-d;a.edges.forEach(function(a){l(a,e,f),d3.select("#"+a.dagre.id).attr("d",k(a))})}),B=d3.behavior.drag().on("drag",function(a,b){l(a,d3.event.dx,d3.event.dy),d3.select(this).attr("d",k(a))});b.call(A),r.call(B)}return o}function e(a){var b=d3.select("svg");b.selectAll("text.counter").text(f),b.selectAll("text.inflight").text(g),b.selectAll("g .node title").text(function(a){return a.tooltip||""})}function f(a){return a.counter||""}function g(a){return a.inflight||""}a.d3ForceGraph=b,a.createGraphStates=c,a.dagreLayoutGraph=d,a.dagreUpdateGraphData=e}(Core||(Core={}));var Camel;!function(a){a._module.controller("Camel.RouteController",["$scope","$rootScope","$routeParams","$element","$timeout","workspace","$location","jolokia","localStorage",function(b,c,d,e,f,g,h,i,j){function k(){var c=null;if(!b.ignoreRouteXmlNode&&(c=a.getSelectedRouteNode(g,u),c||(c=b.nodeXmlNode),c&&"route"!==c.localName)){var d=document.createElement("route");d.appendChild(c.cloneNode(!0)),c=d}if(b.mbean=a.getSelectionCamelContextMBean(g,u),!b.mbean&&b.contextId&&(b.mbean=a.getCamelContextMBean(g,b.contextId,u)),c){b.nodes={};var e=[],f=[];b.processorTree=a.camelProcessorMBeansById(g,u);var h=c.getAttribute("id");if(0===b.viewSettings.routes.length){var j={name:h,selected:!0};b.viewSettings.routes.push(j)}a.addRouteXmlChildren(b,c,e,f,null,0,0),q(e,f)}else b.mbean?i.request({type:"exec",mbean:b.mbean,operation:"dumpRoutesAsXml()"},onSuccess(y)):v.info("No camel context bean! Selection: "+g.selection)}function l(a){if(a){var b=a.getAttribute("class");return b&&b.endsWith(z)}return!1}function m(a,b){var c=!1;if(a){var d=a.getAttribute("class");if(d&&d.endsWith(z))d=d.substring(0,d.length-z.length);else{if(!b)return c;d+=z,c=!0}a.setAttribute("class",d)}return c}function n(a){h.path("/camel/properties").search({tab:"camel",nid:a}),Core.$apply(b)}function o(c){var d=c.cid,e=b.routes;if(e){var f=null,h=$.parseXML(e);if(f=$(h).find("#"+d).parents("route")||$(h).find("[uri='"+d+"']").parents("route"),f&&f.length||!c.rid||(f=$(h).find("[id='"+c.rid+"']")),f&&f.length){var i=null;angular.forEach(g.selection.children,function(a){a.title===f[0].id&&(i=a)}),i&&(i.children.length?p(c,f,i):a.processRouteXml(g,g.jolokia,i,function(b){a.addRouteChildren(i,b,u),p(c,b,i)},u))}else v.debug("No route found for "+d)}}function p(c,d,e){var f=c.cid;$("#cameltree").dynatree("getTree").getNodeByKey(e.key).expand("true");var g=e.findDescendant(function(a){var b=c.uri;return b&&b.indexOf("?")>0&&(b=b.substring(0,b.indexOf("?"))),a.title===c.cid||a.routeXmlNode.nodeName===c.type&&a.title===b});if(g&&(f=g.key),b.model=a.getCamelSchema("route"),b.model){var h=[];b.model.group&&(h=b.model.group.split(",")),b.labels=h,b.nodeData=a.getRouteNodeJSON(d[0]),b.icon=a.getRouteNodeIcon(e),b.viewTemplate="app/camel/html/nodePropertiesView.html"}n(f)}function q(a,c){var d,f=$(e),g=r(),j=s(),k=f.children("svg")[0],n=h.path();if(d=n.startsWith("/camel/debugRoute")||n.startsWith("/camel/traceRoute")?null:A,b.graphData=Core.dagreLayoutGraph(a,c,g,j,k,!1,d),n.startsWith("/camel/debugRoute")||n.startsWith("/camel/traceRoute")){var o=f.find("g.node");o.click(function(){var a=l(this);o.each(function(a,b){m(b,!1)});var c=null;a||(c=this.getAttribute("data-cid"),m(this,!0)),b.$emit("camel.diagram.selectedNodeId",c),Core.$apply(b)})}return b.mbean&&Core.register(i,b,{type:"exec",mbean:b.mbean,operation:"dumpRoutesStatsAsXml",arguments:[!0,!0]},onSuccess(t,{silent:!0,error:!1})),b.$emit("camel.diagram.layoutComplete"),g}function r(){return $(e).width()}function s(){var b=$(e);return a.getCanvasHeight(b)}function t(a){function c(a,c){var d=c.getAttribute("id"),e=c.getAttribute("exchangesCompleted"),f=c.hasAttribute("exchangesInflight")?c.getAttribute("exchangesInflight"):0,g="";if(d&&e){var h=a?b.routeNodes:b.nodes,i=h[d];if(i||angular.forEach(h,function(a,b){i||d!==a.elementId||(i=a)}),i){var j=parseInt(e),k=c.getAttribute("exchangesFailed");k&&(j+=parseInt(k));g="total: "+j+"\ninflight:"+f+"\nlast: "+c.getAttribute("lastProcessingTime")+" (ms)\nmean: "+c.getAttribute("meanProcessingTime")+" (ms)\nmin: "+c.getAttribute("minProcessingTime")+" (ms)\nmax: "+c.getAttribute("maxProcessingTime")+" (ms)",i.counter=j,b.camelShowInflightCounter&&(i.inflight=f);var l=i.labelSummary;l&&(g=l+"\n\n"+g),i.tooltip=g}}}var d=a.value;if(d){var e=$.parseXML(d),f=$(e).find("routeStat");f.each(function(a,b){c(!0,b)});var f=$(e).find("processorStat");f.each(function(a,b){c(!1,b)}),Core.dagreUpdateGraphData(b.graphData)}}var u=j.camelJmxDomain||"org.apache.camel",v=Logger.get("Camel");b.workspace=g,b.viewSettings={routes:[]},b.routes=[],b.routeNodes={},null!=d&&(b.contextId=d.contextId,b.routeId=Core.trimQuotes(d.routeId),b.isJmxTab=!d.contextId||!d.routeId),b.camelIgnoreIdForLabel=a.ignoreIdForLabel(j),b.camelMaximumLabelWidth=a.maximumLabelWidth(j),b.camelShowInflightCounter=a.showInflightCounter(j);var w=Core.throttled(k,1e3),x=300;c.$on("ignoreIdForLabel",function(a,c){b.camelIgnoreIdForLabel=c,f(w,x)}),b.updateSelectedRoute=function(){f(w,x)},b.$on("$routeChangeSuccess",function(a,b,c){f(w,x)}),b.$watch("workspace.selection",function(){b.isJmxTab&&g.moveIfViewInvalid()||f(w,x)}),b.$on("jmxTreeUpdated",function(){f(w,x)}),b.$watch("nodeXmlNode",function(){b.isJmxTab&&g.moveIfViewInvalid()||f(w,x)});var y=function(c){var d=c.value;b.routes=d,b.nodes={},b.routeNodes={};var e=[],f=[],h=b.routeId;if(h||(h=a.getSelectedRouteId(g)),d){var i=$.parseXML(d);if(0===b.viewSettings.routes.length){$(i).find("route").each(function(a,c){var d=c.getAttribute("id"),e={name:d,selected:!0};b.viewSettings.routes.push(e)})}b.processorTree=a.camelProcessorMBeansById(g,u),a.loadSelectedRouteXmlNodes(b,i,e,f,r(),function(a){if(b.viewSettings.routes.length>0)for(var c in b.viewSettings.routes){var d=b.viewSettings.routes[c];if(d.name===a)return d.selected}return null==h||h===a}),q(e,f)}else console.log("No data from route XML!");Core.$apply(b)},z=" selected",A=function(a){v.debug("Clicked on Camel Route Diagram node: "+a.cid),g.isRoutesFolder(u)?o(a):n(a.cid)}}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.SendMessageController",["$route","$scope","$element","$timeout","workspace","jolokia","localStorage","$location","activeMQMessage",function(b,c,d,e,f,g,h,i,j){function k(b,d){var e=f.selection;if(e){var i=e.objectName;if(i){var j=null;c.headers.length&&(j={},angular.forEach(c.headers,function(a){var b=a.name;b&&(j[b]=a.value)}),q.info("About to send headers: "+JSON.stringify(j)));var k=onSuccess(d);if(e.domain===p){var l=a.getContextAndTargetEndpoint(f,p),m=l.uri;if((i=l.mbean)&&m){var n=!0;a.isCamelVersionEQGT(2,14,f,g,p)&&(g.execute(i,"canSendToEndpoint(java.lang.String)",m)||(Core.notification("warning","Camel does not support sending to this endpoint."),n=!1)),n&&(j?g.execute(i,"sendBodyAndHeaders(java.lang.String, java.lang.Object, java.util.Map)",m,b,j,k):g.execute(i,"sendStringBody(java.lang.String, java.lang.String)",m,b,k))}else i?Core.notification("error","Failed to determine endpoint name!"):Core.notification("error","Could not find CamelContext MBean!"),q.debug("Parsed context and endpoint: ",l)}else{var o=h.activemqUserName,r=h.activemqPassword;j||(j={}),j.JMSDeliveryMode||(j.JMSDeliveryMode="2"),g.execute(i,"sendTextMessage(java.util.Map, java.lang.String, java.lang.String, java.lang.String)",j,b,o,r,k)}}}}function l(){return!0}function m(){return!0}function n(){Fabric.fabricCreated(f)&&(c.container=Fabric.getCurrentContainer(g,["versionId","profileIds"]),g.execute(Fabric.managerMBean,"currentContainerConfigurationFiles",onSuccess(o)))}function o(a){c.profileFileNameToProfileId=a,c.profileFileNames=Object.keys(a).filter(function(a){return a.toLowerCase().startsWith("data/")}).sort(),c.showChoose=!!c.profileFileNames.length,c.selectedFiles={},Core.$apply(c)}var p=h.camelJmxDomain||"org.apache.camel",q=Logger.get("Camel");if(c.workspace=f,c.noCredentials=!1,c.showChoose=!1,c.profileFileNames=[],c.profileFileNameToProfileId={},c.selectedFiles={},c.container={},c.message="\n\n\n\n",c.headers=[],Core.bindModelToSearchParam(c,i,"tab","subtab","compose"),Core.bindModelToSearchParam(c,i,"searchText","q",""),Core.reloadWhenParametersChange(b,c,i),c.checkCredentials=function(){c.noCredentials=Core.isBlank(h.activemqUserName)||Core.isBlank(h.activemqPassword)},i.path().has("activemq")){if(c.localStorage=h,c.$watch("localStorage.activemqUserName",c.checkCredentials),c.$watch("localStorage.activemqPassword",c.checkCredentials),null!==j.message&&(c.message=j.message.bodyText,null!==j.message.PropertiesText))for(var r in j.message.StringProperties)c.headers.push({name:r,value:j.message.StringProperties[r]});j.message=null}c.openPrefs=function(){i.search("pref","ActiveMQ"),c.$emit("hawtioOpenPrefs")};var s="defaultLanguageFormat",t=f.getLocalStorage(s)||"javascript";c.codeMirror=void 0;var u={mode:{name:t},onChange:function(a){c.codeMirror||(c.codeMirror=a)}};c.codeMirrorOptions=CodeEditor.createEditorSettings(u),c.addHeader=function(){c.headers.push({name:"",value:""}),d&&e(function(){d.find("input.headerName").last().focus()},100)},c.removeHeader=function(a){c.headers=c.headers.remove(a)},c.defaultHeaderNames=function(){function b(a){angular.forEach(a.definitions.headers.properties,function(a,b){c.push(b)})}var c=[];return m()&&b(a.jmsHeaderSchema),l()&&b(a.camelHeaderSchema),c},c.$watch("workspace.selection",function(){f.moveIfViewInvalid(),Fabric.fabricCreated(f)&&n()}),c.$watch("codeMirrorOptions.mode.name",function(a,b){f.setLocalStorage(s,a)});var v=function(){c.message="",Core.notification("success","Message sent!")};c.autoFormat=function(){setTimeout(function(){CodeEditor.autoFormatEditor(c.codeMirror)},50)},c.sendMessage=function(){k(c.message,v)},c.fileSelection=function(){var a=[];return angular.forEach(c.selectedFiles,function(b,c){b&&a.push(c)}),a},c.sendSelectedFiles=function(){function a(f){if(b.length){var h=b.pop();if(h){var i=c.profileFileNameToProfileId[h];if(i){var j=Fabric.getConfigFile(g,e,i,h);j||(q.warn("No body for message "+h),j=""),k(j,a)}}}else{var l=Core.maybePlural(d,"Message")+" sent!";Core.notification("success",l)}}var b=c.fileSelection(),d=b.length,e=c.container.versionId||"1.0";a(null)}}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.SourceController",["$scope","workspace","localStorage",function(b,c,d){function e(a){function b(a,b){var c=b.getAttribute("customId");"route"===b.nodeName&&(c="true"),c&&"true"===c||b.removeAttribute("id"),b.removeAttribute("customId"),b.removeAttribute("_cid"),b.removeAttribute("group")}var c=$(a).clone();c.each(b),c.find("*").each(b);var d=c&&c.length?c[0]:a;return Core.xmlNodeToString(d)}function f(){var d=a.getSelectedRouteNode(c,g);if(d)b.source=e(d),Core.$apply(b);else{if(b.mbean=a.getSelectionCamelContextMBean(c,g),!b.mbean){var f=Core.pathGet(c,["selection","parent"]);f&&"context"===f.title&&(b.mbean=f.children[0].objectName)}if(b.mbean){c.jolokia.request({type:"exec",mbean:b.mbean,operation:"dumpRoutesAsXml()"},onSuccess(h))}}}var g=d.camelJmxDomain||"org.apache.camel";b.workspace=c,b.camelContextMBean=a.getSelectionCamelContextMBean(c,g),b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(f,50)}),b.$watch("workspace.selection",function(){c.moveIfViewInvalid()||f()}),b.mode="xml";var h=function(d){var f=d.value,g=a.getSelectedRouteId(c);if(f&&g){var h=$.parseXML(f),i=$(h).find('route[id="'+g+'"]');if(i&&i.length){var j=i[0],k=j.parentNode;k&&"routes"===k.nodeName&&k.attributes&&angular.forEach(k.attributes,function(a){if(a.name.startsWith("xmlns")){var b=h.createAttribute(a.name);b.value=a.value,j.attributes.setNamedItem(b)}});var l=e(j);l&&(f=l)}}b.source=f,Core.$apply(b)},i=function(){Core.notification("success","Route updated!"),a.clearSelectedRouteNode(c,g),f()};b.saveRouteXml=function(){var d=b.source;if(d){var e=decodeURIComponent(d);a.log.debug("addOrUpdateRoutesFromXml xml decoded: "+e);var f=c.jolokia,h=a.getSelectionCamelContextMBean(c,g);h?f.execute(h,"addOrUpdateRoutesFromXml(java.lang.String)",e,onSuccess(i)):Core.notification("error","Could not find CamelContext MBean!")}}}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.TraceRouteController",["$scope","workspace","jolokia","localStorage","tracerStatus",function(b,c,d,e,f){function g(){b.tracing=!1,null!=f.jhandle&&(m.debug("Unregistering jolokia handle"),d.unregister(f.jhandle),f.jhandle=null);var e=a.getSelectionCamelTraceMBean(c,l);if(e)if(b.tracing=d.getAttribute(e,"Enabled",onSuccess(null)),b.tracing){var g=e;g&&null===f.jhandle&&(m.debug("Registering jolokia handle"),f.jhandle=d.register(h,{type:"exec",mbean:g,operation:"dumpAllTracedMessagesAsXml()",ignoreErrors:!0,arguments:[]})),b.graphView="app/camel/html/routes.html",b.tableView="app/camel/html/browseMessages.html"}else f.messages=[],b.messages=[],b.graphView=null,b.tableView=null}function h(d){m.debug("Populating response "+d);var e=a.getSelectedRouteId(c),g=d.value;if(angular.isString(g)){var h=$.parseXML(g),i=$(h).find("fabricTracerEventMessage");i&&i.length||(i=$(h).find("backlogTracerEventMessage")),i.each(function(c,d){if($(d).find("routeId").text()===e){var f=a.createMessageFromXml(d),g=$(d).find("toNode").text();g&&(f.toNode=g),m.debug("Adding new message to trace table with id "+f.id),b.messages.push(f)}}),f.messages=b.messages,Core.$apply(b)}}function i(){angular.forEach(b.gridOptions.selectedItems,function(b){if(b){var c=b.toNode;if(c){var d=d3.select("svg").selectAll("g .node");a.highlightSelectedNode(d,c)}}})}function j(a){g(),Core.$apply(b)}function k(b){var f=a.getSelectionCamelTraceMBean(c,l);if(f){if(f.toString().endsWith("BacklogTracer")){var g=a.maximumTraceOrDebugBodyLength(e),h=a.traceOrDebugIncludeStreams(e);d.setAttribute(f,"BodyMaxChars",g),d.setAttribute(f,"BodyIncludeStreams",h),d.setAttribute(f,"BodyIncludeFiles",h)}d.setAttribute(f,"Enabled",b,onSuccess(j))}}var l=e.camelJmxDomain||"org.apache.camel",m=Logger.get("CamelTracer");b.workspace=c,b.tracing=!1,b.messages=[],b.graphView=null,b.tableView=null,b.mode="text",b.messageDialog=new UI.Dialog,b.gridOptions=a.createBrowseGridOptions(),b.gridOptions.selectWithCheckboxOnly=!1,b.gridOptions.showSelectionCheckbox=!1,b.gridOptions.multiSelect=!1,b.gridOptions.afterSelectionChange=i,b.gridOptions.columnDefs.push({field:"toNode",displayName:"To Node"}),b.startTracing=function(){m.info("Start tracing"),k(!0)},b.stopTracing=function(){m.info("Stop tracing"),k(!1)},b.clear=function(){m.debug("Clear messages"),f.messages=[],b.messages=[],b.row&&b.messageDialog.close(),Core.$apply(b)},b.$watch("workspace.selection",function(){c.moveIfViewInvalid()||(b.messages=f.messages,g())}),b.openMessageDialog=function(a){var c=Core.pathGet(a,["rowIndex"]);b.selectRowIndex(c),b.row&&(b.mode=CodeEditor.detectTextFormat(b.row.body),b.messageDialog.open())},b.selectRowIndex=function(a){b.rowIndex=a;var c=b.gridOptions.selectedItems;c.splice(0,c.length),a>=0&&a<b.messages.length?(b.row=b.messages[a],b.row&&c.push(b.row)):b.row=null,i()},m.info("Re-activating tracer with "+f.messages.length+" existing messages"),b.messages=f.messages,b.tracing=null!=f.jhandle}])}(Camel||(Camel={}));var Camel;!function(a){function b(a,b,c){b&&b.children.isEmpty()&&(b.children=c.children,a.children.push(b))}function c(a,b){b&&b.trim().length&&(a.expand=!0)}function d(a,b,d,e){void 0===e&&(e=null),b.children&&0==b.children.length&&(angular.forEach(a,function(a,d){"context"!==d&&"routes"!==d&&"endpoints"!==d&&"components"!==d&&"dataformats"!==d&&Core.matchFilterIgnoreCase(a.title,e)&&(b.children.push(a),c(b,e))}),b.children.length&&(b.sortChildren(!1),d.children.push(b)))}a._module.controller("Camel.TreeHeaderController",["$scope","$location",function(a,b,c){a.contextFilterText="",a.$watch("contextFilterText",function(b,c){b!==c&&a.$emit("camel-contextFilterText",b)}),a.expandAll=function(){Tree.expandAll("#cameltree")},a.contractAll=function(){Tree.contractAll("#cameltree")}}]),a._module.controller("Camel.TreeController",["$scope","$location","$timeout","workspace","$rootScope","localStorage",function(e,f,g,h,i,j){function k(g){void 0===g&&(g=null),e.fullScreenViewLink=a.linkToFullScreenView(h);var i=[],j=m,k=h.tree;if(k){var n=new Folder("Camel Contexts");n.addClass="org-apache-camel-context-folder",n.children=i,n.typeName="context",n.key="camelContexts",n.domain=j;var o=e.contextFilterText;e.lastContextFilterText=o,a.log.debug("Reloading the tree for filter: "+o);var p=k.get(j);p&&angular.forEach(p.children,function(e,f){var g=e.map;if(g){var h=g.context,k=g.routes,l=g.endpoints,p=g.components,q=g.dataformats;if(h){var r=h.children[0];if(r){var s=r.title,t=new Folder(s);if(t.addClass="org-apache-camel-context",t.domain=j,t.objectName=r.objectName,t.entries=r.entries,t.typeName=r.typeName,t.key=r.key,t.version=r.version,k){var u=new Folder("Routes");u.addClass="org-apache-camel-routes-folder",u.parent=h,angular.forEach(k.children,function(a){Core.matchFilterIgnoreCase(a.title,o)&&(u.children.push(a),a.addClass="org-apache-camel-routes",c(u,o))}),u.children.isEmpty()||t.children.push(u),u.typeName="routes",u.key=k.key,u.domain=k.domain}if(l){var v=new Folder("Endpoints");v.addClass="org-apache-camel-endpoints-folder",v.parent=h,angular.forEach(l.children,function(b){Core.matchFilterIgnoreCase(b.title,o)&&(b.addClass="org-apache-camel-endpoints",a.getContextId(b,m)||(v.children.push(b),b.entries.context=r.entries.context),c(v,o))}),v.children.isEmpty()||t.children.push(v),
v.entries=r.entries,v.typeName="endpoints",v.key=l.key,v.domain=l.domain}if(p){var w=new Folder("Components");w.addClass="org-apache-camel-components-folder",w.parent=h,angular.forEach(p.children,function(b){Core.matchFilterIgnoreCase(b.title,o)&&(b.addClass="org-apache-camel-components",a.getContextId(b,m)||(w.children.push(b),b.entries.context=r.entries.context),c(w,o))}),w.children.isEmpty()||t.children.push(w),w.entries=r.entries,w.typeName="components",w.key=p.key,w.domain=p.domain}if(q){var x=new Folder("Dataformats");x.addClass="org-apache-camel-dataformats-folder",x.parent=h,angular.forEach(q.children,function(b){Core.matchFilterIgnoreCase(b.title,o)&&(b.addClass="org-apache-camel-dataformats",a.getContextId(b,m)||(x.children.push(b),b.entries.context=r.entries.context),c(x,o))}),x.children.isEmpty()||t.children.push(x),x.entries=r.entries,x.typeName="dataformats",x.key=q.key,x.domain=q.domain}var y=new Folder("MBeans");d(g,y,t,o),Core.matchFilterIgnoreCase(r.title,o)&&!t.children.find(function(a){return 1==a.expand})?(b(t,u,k),b(t,v,l),b(t,w,p),b(t,x,q),d(g,y,t),t.parent=n,i.push(t)):t.children.length&&(t.children.find(function(a){return 1==a.expand})&&(t.expand=!0),t.parent=n,i.push(t))}}}});var q=$("#cameltree");Jmx.enableTree(e,f,h,q,[n],!0),setTimeout(function(){l(),angular.isFunction(g)&&g()},50)}}function l(){Jmx.updateTreeSelectionFromURLAndAutoSelect(f,$("#cameltree"),function(a){var b=a.getChildren();if(b&&1===b.length){a=b[0],a.expand(!0);var c=a.getChildren();if(c&&c.length){var d=c[0];if("routes"===d.data.typeName)return a=d}}return null},!0),e.fullScreenViewLink=a.linkToFullScreenView(h)}e.contextFilterText=f.search().cq,e.fullScreenViewLink=a.linkToFullScreenView(h);var m=j.camelJmxDomain||"org.apache.camel";e.$on("$routeChangeSuccess",function(a,b,c){setTimeout(l,50)});var n=Core.throttled(k,500);e.$watch("workspace.tree",function(){n()}),e.$watch("contextFilterText",function(){e.contextFilterText!=e.lastContextFilterText&&k(function(){$("#camelContextIdFilter").focus()})}),i.$on("camel-contextFilterText",function(a,b){e.contextFilterText=b}),e.$on("jmxTreeUpdated",function(){n()})}])}(Camel||(Camel={}));var Camel;!function(a){a._module.controller("Camel.TypeConverterController",["$scope","$location","$timeout","workspace","jolokia","localStorage",function(b,c,d,e,f,g){function h(a){var c=a.value;c&&(b.mbeanAttributes=c,Core.$apply(b))}function i(a){var c=a.value;if(c){var d=[];for(var e in c){var f=c[e];for(var g in f)d.push({from:e,to:g})}d=d.sortBy("from"),b.data=d,b.selectedMBean=a.request.mbean,Core.$apply(b)}}function j(){console.log("Loading TypeConverter data...");var c=a.getSelectionCamelTypeConverter(e,k);if(c){var d={type:"read",mbean:c,attribute:["AttemptCounter","FailedCounter","HitCounter","MissCounter","NumberOfTypeConverters","StatisticsEnabled"]};f.request(d,onSuccess(h)),scopeStoreJolokiaHandle(b,f,f.register(h,d)),f.request({type:"exec",mbean:c,operation:"listTypeConverters"},onSuccess(i))}}var k=g.camelJmxDomain||"org.apache.camel";b.workspace=e,b.data=[],b.selectedMBean=null,b.mbeanAttributes={},b.enableTypeConvertersStats=!1,b.disableTypeConvertersStats=!1,b.defaultTimeout=3e3;var l=[{field:"from",displayName:"From",cellFilter:null,width:"*",resizable:!0},{field:"to",displayName:"To",cellFilter:null,width:"*",resizable:!0}];b.gridOptions={data:"data",displayFooter:!0,displaySelectionCheckbox:!1,canSelectRows:!1,enableSorting:!0,columnDefs:l,selectedItems:[],filterOptions:{filterText:""}},b.renderIcon=function(b){return a.iconClass(b)},b.disableStatistics=function(){b.disableTypeConvertersStats=!0,b.selectedMBean&&f.setAttribute(b.selectedMBean,"StatisticsEnabled",!1),d(function(){b.disableTypeConvertersStats=!1},b.defaultTimeout)},b.enableStatistics=function(){b.enableTypeConvertersStats=!0,b.selectedMBean&&f.setAttribute(b.selectedMBean,"StatisticsEnabled",!0),d(function(){b.enableTypeConvertersStats=!1},b.defaultTimeout)},b.resetStatistics=function(){b.selectedMBean&&f.request({type:"exec",mbean:b.selectedMBean,operation:"resetTypeConversionCounters"},onSuccess(null,{silent:!0}))},j()}])}(Camel||(Camel={}));var Camin;!function(a){var b="camin";a._module=angular.module(b,["bootstrap","ngResource","ngGrid","hawtioCore","elasticjs.service"]),a._module.config(["$routeProvider",function(a){a.when("/camin",{templateUrl:"app/camin/html/camin.html"}).when("/camin/:exchangeId",{templateUrl:"app/camin/html/camin.html"})}]),a._module.run(["workspace","viewRegistry","helpRegistry",function(a,b,c){b.camin="app/camin/html/layoutCamin.html",c.addUserDoc("camin","app/camin/doc/help.md",function(){return Fabric.hasFabric(a)}),a.topLevelTabs.push({id:"camin",content:"Camel",title:"Insight into Camel",isValid:function(a){return Fabric.hasFabric(a)},href:function(){return"#/camin"},isActive:function(a){return a.isLinkActive("camin")}})}]),hawtioPluginLoader.addModule(b)}(Camin||(Camin={}));var Camin;!function(a){a._module.controller("Camin.Controller",["$scope","jolokia","localStorage","$routeParams","ejsResource",function(b,c,d,e,f){b.query="",b.breadcrumbs=[],b.onQueryChange=function(){b.breadcrumbs=[b.query],i()};var g=Logger.get("Camin"),h=new Jolokia(Core.getJolokiaUrl()).execute("io.fabric8.insight:type=Elasticsearch","getRestUrl","insight"),i=(f(h),function(){var a='exchange.id:"'+b.breadcrumbs.join('" OR exchange.id:"')+'" OR exchange.in.headers.ExtendedBreadcrumb:"'+b.breadcrumbs.join('" OR exchange.in.headers.ExtendedBreadcrumb:"')+'" OR exchange.out.headers.ExtendedBreadcrumb:"'+b.breadcrumbs.join('" OR exchange.out.headers.ExtendedBreadcrumb:"')+'"';ejs.Request().types("camel").from(0).size(1e3).query(ejs.QueryStringQuery(a)).doSearch().then(function(a){if(!angular.isUndefined(a.error))return void g.error(a.error);g.debug("Results",a);for(var c=b.breadcrumbs.length,d=0;d<a.hits.hits.length;d++){var e=function(a){if(a){"string"==typeof a&&(a=[a]);for(var c=0;c<a.length;c++){var d=a[c];b.breadcrumbs.indexOf(d)<0&&b.breadcrumbs.push(d)}}};angular.isDefined(a.hits.hits[d]._source.exchange.in)&&e(a.hits.hits[d]._source.exchange.in.headers.ExtendedBreadcrumb),angular.isDefined(a.hits.hits[d]._source.exchange.out)&&e(a.hits.hits[d]._source.exchange.out.headers.ExtendedBreadcrumb)}if(g.debug("Found "+a.hits.total+" ids"),c!=b.breadcrumbs.length)i();else{for(var f=[],d=0;d<a.hits.hits.length;d++){var h=a.hits.hits[d]._id;f.indexOf(h)<0&&f.push(h)}ejs.Request().types("camel").from(0).size(1e3).query(ejs.MatchAllQuery()).filter(ejs.IdsFilter(f)).sort("@timestamp").doSearch().then(function(a){if(!angular.isUndefined(a.error))return void g.error(a.error);g.debug("Found "+a.hits.total+" exchanges");for(var b=[],c=0;c<a.hits.hits.length;c++){var d=a.hits.hits[c]._source;b.push(d)}n(b)})}})}),j=function(a){var b,c,d=0,e=[1,4,5,6,7,10,11];if(c=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(a)){for(var f,g=0;f=e[g];++g)c[f]=+c[f]||0;c[2]=(+c[2]||1)-1,c[3]=+c[3]||1,"Z"!==c[8]&&void 0!==c[9]&&(d=60*c[10]+c[11],"+"===c[9]&&(d=0-d)),b=Date.UTC(c[1],c[2],c[3],c[4],c[5]+d,c[6],c[7])}else b=Date.parse(a);return b},k=function(b){var c=new a.Sequence,d={};b=b.sort(function(a,b){return j(a["@timestamp"])-j(b["@timestamp"])});for(var e=0;e<b.length;e++)if("Created"===b[e].event){var f=b[e],h=_.find(b,function(a,b){return"Completed"===a.event&&f.exchange.id===a.exchange.id});if(null===h){g.debug("Could not find matching Completed exchange for "+f.exchange.id);continue}var i=c.endpoint(h.exchange.fromEndpoint,h.exchange.routeId,h.exchange.contextId,h.host),k=c.exec(f.exchange.id,i,j(f["@timestamp"]),j(h["@timestamp"]));d[f.exchange.id]=k}for(var l={},e=0;e<b.length;e++)if("Sending"===b[e].event&&b[e].exchange.in&&b[e].exchange.in.headers){var m=b[e].exchange.in.headers.AuditCallId;if(m&&void 0===l[m]){var n=b[e],o=_.find(b,function(a,b){return"Sent"===a.event&&n.exchange.id===a.exchange.id&&a.exchange.in.headers.AuditCallId===m}),f=_.find(b,function(a,b){return"Created"===a.event&&n.exchange.id!==a.exchange.id&&a.exchange.in.headers.AuditCallId===m}),p=d[n.exchange.id],q=f?d[f.exchange.id]:null;if(null!==o&&null!==f&&null!==p&&null!=q){var r=c.call(m,p,q,j(n["@timestamp"]),j(o["@timestamp"]));l[m]=r}else g.debug("Could not find Execution for exchange "+n.exchange.id)}}return c},l=function(b){for(var c=new a.Diagram,d={},e=[],f=b.start(),g=0;g<b.endpoints.length;g++){var h=c.actor("ep"+g),i=b.endpoints[g];d[i.url+"|"+i.routeId+"|"+i.contextId+"|"+i.host]=h}for(var g=0;g<b.calls.length;g++){var j=b.calls[g];if(j.execB){var k=j.execA.endpoint,l=k.url+"|"+k.routeId+"|"+k.contextId+"|"+k.host,m=j.execB.endpoint,n=m.url+"|"+m.routeId+"|"+m.contextId+"|"+m.host,o=d[l],p=d[n],q=j.start-f,r=j.execB.start-f,s=j.execB.stop-f,t=j.stop-f;e.push({actorA:o,actorB:p,message:q+"ms - "+r+"ms",timestamp:q}),e.push({actorA:p,actorB:o,message:s+"ms - "+t+"ms",timestamp:s})}}e=e.sort(function(a,b){return a["@timestamp"]-b["@timestamp"]});for(var g=0;g<e.length;g++)c.signal(e[g].actorA,e[g].actorB,e[g].message);return c},m=function(b){for(var c=new a.Gantt,d=0;d<b.endpoints.length;d++)for(var e=b.endpoints[d],f=c.resource(e),g=0;g<b.execs.length;g++){var h=b.execs[g];h.endpoint===e&&c.task(f,h.start,h.stop,h)}for(var d=0;d<b.calls.length;d++){var i=b.calls[d];if(i.execB){var j=c.taskByData(i.execA),k=c.taskByData(i.execB);c.link(i.start,j,i.stop,k,i)}}return c.layout(),c},n=function(a){b.definition="",a=a.sort(function(a,b){return j(a["@timestamp"])-j(b["@timestamp"])}),g.debug("Events",a);var c=k(a);g.debug("Sequence",c);var d=m(c);g.debug("Gantt",d),$("#gantt").html(""),p("#gantt",d);var e=l(c);g.debug("Diagram",e),$("#diagram").html(""),o("#diagram",e)},o=function(a,b){for(var c=10,d=10,e=100,f=30,g=40,h=30,i=20,j=14,k=b.actors.length*(e+2*f),l=(b.signals.length+1)*h+2*g+2*d,m=d3.select(a).append("svg").attr("width",k+2*d).attr("height",l+2*d),n=m.append("g").attr("text-anchor","middle"),o=0;o<b.actors.length;o++){var p=b.actors[o],q=n.append("g").attr("transform","translate("+(o*(e+2*f)+f)+","+g+")");q.append("rect").attr("width",e).attr("height",g).attr("stroke","#000").attr("stroke-width","2").attr("fill","#FFFFFF"),q.append("text").attr("x",e/2).attr("y",g/2).attr("stroke-width","0").attr("dominant-baseline","middle").attr("font-size",i).text(p.name),n.append("line").attr("x1",o*(e+2*f)+e/2+f).attr("y1",2*g).attr("x2",o*(e+2*f)+e/2+f).attr("y2",l-g).attr("stroke","#000").attr("stroke-width","2");var q=n.append("g").attr("transform","translate("+(o*(e+2*f)+f)+","+(l-g)+")");q.append("rect").attr("width",e).attr("height",g).attr("stroke","#000").attr("stroke-width","2").attr("fill","white"),q.append("text").attr("x",e/2).attr("y",g/2).attr("stroke-width","0").attr("dominant-baseline","middle").attr("font-size",i).text(p.name)}for(var o=0;o<b.signals.length;o++){var r,s,t,u,v;r=b.signals[o].actorA.index*(e+2*f)+e/2+f,s=(o+1)*h+2*g,t=Math.abs(b.signals[o].actorA.index-b.signals[o].actorB.index)*(e+2*f),u=b.signals[o].actorB.index>b.signals[o].actorA.index?1:-1,v=b.signals[o].message;var q=n.append("g").attr("transform","translate("+r+","+s+")").attr("stroke-width","2");q.append("rect").attr("x",Math.min(3,t*u+3)).attr("y","-16").attr("width",Math.abs((t-6)*u)).attr("height","19").attr("stroke","white").attr("stroke-width","0").attr("fill","white"),q.append("line").attr("x1",0).attr("y1",0).attr("x2",t*u).attr("y2",0).attr("stroke","#000").attr("stroke-width","2"),q.append("line").attr("x1",t*u-c*u).attr("y1",-c).attr("x2",t*u).attr("y2",0).attr("stroke","#000").attr("stroke-width","2"),q.append("line").attr("x1",t*u).attr("y1",0).attr("x2",t*u-c*u).attr("y2",c).attr("stroke","#000").attr("stroke-width","2"),q.append("text").attr("x",t*u/2).attr("y",-8).attr("stroke-width","0").attr("dominant-baseline","middle").attr("font-size",j).text(v)}},p=function(a,b){var c=35,d=3,e=4,f=800,g=c*b.resources.length,h={top:20,right:40,bottom:20,left:250},i=b.start,j=b.stop,k=d3.scale.linear().domain([i-.1*(j-i),j+.1*(j-i)]).range([0,f]),l=function(a){return a.resource.index*c+d+a.index*(c-2*d)/(a.max+1)},m=function(a){return 2*(c-2*d)/(a.max+1)},n=d3.select(a).append("svg").attr("width",f+h.left+h.right).attr("height",g+h.top+h.bottom),o=n.append("g").attr("width",f).attr("height",g).attr("transform","translate(0,"+h.top+")").selectAll("text").data(b.resources).enter();o.append("text").attr("x",0).attr("y",function(a){return a.index*c+c/2}).attr("dy","-0.2em").attr("text-anchor","start").text(function(a){var b=a.data,c=b.url;return 0==c.indexOf("Endpoint[")&&(c=c.substring(9,c.length-1)),c}),o.append("text").attr("x",0).attr("y",function(a){return a.index*c+c/2}).attr("dy","0.8em").attr("text-anchor","start").text(function(a){var b=a.data;return b.host+"/"+b.contextId+"/"+b.routeId});var p=n.append("g").attr("width",f).attr("height",g).attr("transform","translate("+h.left+","+h.top+")");p.append("g").attr("width",f).attr("height",g).selectAll("rect").data(b.tasks).enter().append("rect").attr("rx",2*d).attr("ry",2*d).attr("x",function(a){return k(a.start)}).attr("y",l).attr("height",m).attr("width",function(a){return k(a.stop)-k(a.start)}).attr("stroke","#000000").attr("stroke-width","2").attr("fill",function(a){return d3.hsl(360*Math.random(),.8,.8).toString()});var q=p.append("g").attr("width",f).attr("height",g).attr("stroke","#404040").attr("stroke-width","2").selectAll("line").data(b.links).enter();q.append("line").attr("x1",function(a){return k(a.start)}).attr("y1",function(a){return l(a.taskA)+m(a.taskA)}).attr("x2",function(a){return k(a.start)}).attr("y2",function(a){return l(a.taskB)+m(a.taskB)/2}),q.append("line").attr("x1",function(a){return k(a.start)}).attr("y1",function(a){return l(a.taskB)+m(a.taskB)/2}).attr("x2",function(a){return k(a.taskB.start)}).attr("y2",function(a){return l(a.taskB)+m(a.taskB)/2}),q.append("line").attr("x1",function(a){return k(a.taskB.start)}).attr("y1",function(a){return l(a.taskB)+m(a.taskB)/2}).attr("x2",function(a){return k(a.taskB.start)-e}).attr("y2",function(a){return l(a.taskB)+m(a.taskB)/2-e}),q.append("line").attr("x1",function(a){return k(a.taskB.start)}).attr("y1",function(a){return l(a.taskB)+m(a.taskB)/2}).attr("x2",function(a){return k(a.taskB.start)-e}).attr("y2",function(a){return l(a.taskB)+m(a.taskB)/2+e}),q.append("line").attr("x1",function(a){return k(a.taskB.stop)}).attr("y1",function(a){return l(a.taskB)+m(a.taskB)/2}).attr("x2",function(a){return k(a.stop)}).attr("y2",function(a){return l(a.taskB)+m(a.taskB)/2}),q.append("line").attr("x1",function(a){return k(a.stop)}).attr("y1",function(a){return l(a.taskB)+m(a.taskB)/2}).attr("x2",function(a){return k(a.stop)}).attr("y2",function(a){return l(a.taskA)+m(a.taskA)}),q.append("line").attr("x1",function(a){return k(a.stop)}).attr("y1",function(a){return l(a.taskA)+m(a.taskA)}).attr("x2",function(a){return k(a.stop)-e}).attr("y2",function(a){return l(a.taskA)+m(a.taskA)+e}),q.append("line").attr("x1",function(a){return k(a.stop)}).attr("y1",function(a){return l(a.taskA)+m(a.taskA)}).attr("x2",function(a){return k(a.stop)+e}).attr("y2",function(a){return l(a.taskA)+m(a.taskA)+e})};e.exchangeId&&(b.query=e.exchangeId,b.onQueryChange())}])}(Camin||(Camin={}));var Camin;!function(a){var b=function(){function a(){this.actors=[],this.signals=[]}return a.prototype.actor=function(a){for(var b=0;b<this.actors.length;b++)if(this.actors[b].name===a)return this.actors[b];var d=new c(a,this.actors.length);return this.actors.push(d),d},a.prototype.signal=function(a,b,c){var e=new d(a,b,c);return this.signals.push(e),e},a}();a.Diagram=b;var c=function(){function a(a,b){this.name=a,this.index=b}return a}();a.Actor=c;var d=function(){function a(a,b,c){this.actorA=a,this.actorB=b,this.message=c}return a.prototype.isSelf=function(){return this.actorA.index===this.actorB.index},a}();a.Signal=d}(Camin||(Camin={}));var Camin;!function(a){var b=function(){function a(){this.resources=[],this.tasks=[],this.links=[]}return a.prototype.resource=function(a){var b=new c(a,this.resources.length);return this.resources.push(b),b},a.prototype.task=function(a,b,c,d){var e=a.task(b,c,d);return this.tasks.push(e),e},a.prototype.link=function(a,b,c,d,f){var g=new e(a,b,c,d,f);return this.links.push(g),g},a.prototype.layout=function(){for(var a=0;a<this.resources.length;a++)this.resources[a].layout(),this.start=this.start?Math.min(this.start,this.resources[a].start):this.resources[a].start,this.stop=this.stop?Math.max(this.stop,this.resources[a].stop):this.resources[a].stop;for(var a=0;a<this.links.length;a++)this.start=this.start?Math.min(this.start,this.links[a].start):this.links[a].start,this.stop=this.stop?Math.max(this.stop,this.links[a].stop):this.links[a].stop},a.prototype.taskByData=function(a){for(var b=0;b<this.tasks.length;b++)if(this.tasks[b].data===a)return this.tasks[b]},a}();a.Gantt=b;var c=function(){function a(a,b){this.tasks=[],this.index=b,this.data=a}return a.prototype.task=function(a,b,c){var e=new d(a,b,c,this);return this.tasks.push(e),e},a.prototype.layout=function(){this.tasks.sort(function(a,b){return a.start-b.start});for(var a=[],b=0;b<this.tasks.length;b++){this.start=this.start?Math.min(this.start,this.tasks[b].start):this.tasks[b].start,this.stop=this.stop?Math.max(this.stop,this.tasks[b].stop):this.tasks[b].stop;for(var c=0;c<a.length;c++)if(a[c]<this.tasks[b].start){a[c]=this.tasks[b].stop,this.tasks[b].index=c;break}if(!this.tasks[b].index){var d=a.length;this.tasks[b].index=d,a[d]=this.tasks[b].stop}}for(var b=0;b<this.tasks.length;b++)this.tasks[b].max=a.length},a}();a.Resource=c;var d=function(){function a(a,b,c,d){this.start=a,this.stop=b,this.data=c,this.resource=d}return a}();a.Task=d;var e=function(){function a(a,b,c,d,e){this.start=a,this.stop=c,this.taskA=b,this.taskB=d,this.data=e}return a}();a.Link=e}(Camin||(Camin={}));var Camin;!function(a){var b=function(){function a(){this.endpoints=[],this.execs=[],this.calls=[]}return a.prototype.endpoint=function(a,b,d,e){for(var f=0;f<this.endpoints.length;f++)if(this.endpoints[f].url===a&&this.endpoints[f].routeId===b&&this.endpoints[f].contextId===d&&this.endpoints[f].host===e)return this.endpoints[f];var g=new c(a,b,d,e);return this.endpoints.push(g),g},a.prototype.exec=function(a,b,c,e){var f=new d(a,b,c,e);return this.execs.push(f),f},a.prototype.call=function(a,b,c,d,f){var g=new e(a,b,c,d,f);return this.calls.push(g),g},a.prototype.start=function(){for(var a,b=0;b<this.execs.length;b++)a=a?Math.min(a,this.execs[b].start):this.execs[b].start;for(var b=0;b<this.calls.length;b++)a=a?Math.min(a,this.calls[b].start):this.calls[b].start;return a},a.prototype.stop=function(){for(var a,b=0;b<this.execs.length;b++)a=a?Math.max(a,this.execs[b].stop):this.execs[b].stop;for(var b=0;b<this.calls.length;b++)a=a?Math.max(a,this.calls[b].stop):this.calls[b].stop;return a},a}();a.Sequence=b;var c=function(){function a(a,b,c,d){this.url=a,this.routeId=b,this.contextId=c,this.host=d}return a}();a.Endpoint=c;var d=function(){function a(a,b,c,d){this.exchangeId=a,this.endpoint=b,this.start=c,this.stop=d}return a}();a.Execution=d;var e=function(){function a(a,b,c,d,e){this.callId=a,this.execA=b,this.execB=c,this.start=d,this.stop=e}return a}();a.Call=e}(Camin||(Camin={}));var Core;!function(a){a._module.controller("Core.AboutController",["$scope","$location","jolokia","branding","localStorage",function(b,c,d,e,f){Logger.get("About");$.ajax({url:"app/core/doc/about.md",dataType:"html",cache:!1,success:function(c,f,g){if(b.html="Unable to download about.md",angular.isDefined(c)){b.html=marked(c),b.branding=e,b.customBranding=e.enabled;try{b.hawtioVersion=d.request({type:"read",mbean:"hawtio:type=About",attribute:"HawtioVersion"}).value}catch(a){b.hawtioVersion="N/A"}b.jolokiaVersion=d.version().agent,b.serverProduct=d.version().info.product,b.serverVendor=d.version().info.vendor,b.serverVersion=d.version().info.version}a.$apply(b)},error:function(c,d,e){b.html="Unable to download about.md",a.$apply(b)}})}])}(Core||(Core={}));var Core;!function(a){a.ConsoleController=a._module.controller("Core.ConsoleController",["$scope","$element","$templateCache",function(b,c,d){b.setHandler=function(e){function f(){var a=d.get("logClipboardTemplate").lines();a.removeAt(0),a.removeAt(a.length-1),a.push("<ul>"),c.find("#log-panel-statements").children().each(function(b,c){a.push("  <li>"+c.innerHTML+"</li>")}),a.push("</ul>"),e.setText(a.join("\n"))}function g(){c.find("#log-panel-statements").children().remove()}e.on("mouseDown",function(d,e){var h=c.find(".icon-copy"),i=c.find(".icon-trash");this!==h.get(0)&&this!==i.get(0)||(this==h.get(0)?f():(g(),a.notification("info","Cleared logging console")),a.$apply(b))})}}]),a.AppController=a._module.controller("Core.AppController",["$scope","$location","$window","workspace","jolokia","jolokiaStatus","$document","pageTitle","localStorage","userDetails","lastLocation","jolokiaUrl","branding","ConnectOptions","$timeout","locationChangeStartTasks","$route","keycloakContext",function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){function t(){return Perspective.defaultPage(c,e,f,j)}b.collapse="",b.match=null,b.pageTitle=[],b.userDetails=k,b.confirmLogout=!1,b.connectionFailed=!1,b.connectFailure={},b.showPrefs=!1,b.keycloakEnabled=s.enabled,b.logoClass=function(){return n.logoOnly?"without-text":"with-text"},b.branding=n,b.hasMBeans=function(){return e.hasMBeans()},b.$watch("jolokiaStatus.xhr",function(){var a=g.xhr;if(b.connectionFailed=!!a,b.connectFailure.summaryMessage=null,b.connectionFailed){b.connectFailure.status=a.status,b.connectFailure.statusText=a.statusText;var c=a.responseText;if(c)try{var d=$(c),e=d.find("body");e&&e.length&&(d=e),d.each(function(a,b){var c=b.localName;c&&c.startsWith("h")&&$(b).addClass("ajaxError")});var f=$("<div></div>");f.append(d),b.connectFailure.summaryMessage=f.html(),console.log("Found HTML: "+b.connectFailure.summaryMessage)}catch(a){c.indexOf("<")<0&&(b.connectFailure.summaryMessage="<p>"+c+"</p>")}}}),b.showPreferences=function(){b.showPrefs=!0},b.closePreferences=function(){b.showPrefs=!1},b.confirmConnectionFailed=function(){window.close()},b.setPageTitle=function(){b.pageTitle=i.getTitleArrayExcluding([n.appName]);var c=e.getActiveTab();c&&c.content?a.setPageTitleWithTab(h,i,c.content):a.setPageTitle(h,i)},b.setRegexIndicator=function(){try{var a=angular.fromJson(j.regexs);a&&a.reverse().each(function(a){new RegExp(a.regex,"g").test(c.absUrl())&&(b.match={name:a.name,color:a.color})})}catch(a){}},b.loggedIn=function(){return null!==k.username&&"public"!==k.username},b.showLogout=function(){return b.loggedIn()},b.logout=function(){b.confirmLogout=!0},b.getUsername=function(){return k.username&&!k.username.isBlank()?k.username:"user"},b.doLogout=function(){b.confirmLogout=!1,a.logout(m,k,j,b)},b.$watch(function(){return j.regexs},b.setRegexIndicator),b.reloaded=!1,b.maybeRedirect=function(){if(null===k.username){var a=c.url();a.startsWith("/login")?b.reloaded||(r.reload(),b.reloaded=!0):(l.url=a,c.url("/login"))}else if(c.url().startsWith("/login")){var d=t();angular.isDefined(l.url)&&(d=l.url),c.url(d)}},b.$watch("userDetails",function(a,c){b.maybeRedirect()},!0),b.$on("hawtioOpenPrefs",function(){b.showPrefs=!0}),b.$on("hawtioClosePrefs",function(){b.showPrefs=!1}),b.$on("$routeChangeStart",function(a,c){c&&c.params&&c.params.pref||!b.showPrefs||(b.showPrefs=!1),b.maybeRedirect()}),b.$on("$routeChangeSuccess",function(){b.setPageTitle(h,a.PageTitle),b.maybeRedirect()}),b.fullScreen=function(){if(c.path().startsWith("/login"))return n.fullscreenLogin;var a=c.search().tab;return!!a&&"fullscreen"===a},b.login=function(){return c.path().startsWith("/login")},b.redirectToKeycloakAccountMgmt=function(){s.keycloak.accountManagement()},b.redirectToKeycloakAdminConsole=function(){var a=encodeURIComponent(s.keycloak.realm),b=s.keycloak.authServerUrl+"/admin/"+a+"/console/index.html";d.location.href=b}}])}(Core||(Core={})),$(function(){hawtioPluginLoader.loadPlugins(function(){var a=(angular.element(document),angular.element(document.documentElement));Core.injector=angular.bootstrap(a,hawtioPluginLoader.getModules()),Logger.get("Core").debug("Bootstrapped application, injector: ",Core.injector),a.attr("xmlns:ng","http://angularjs.org"),a.attr("ng-app","hawtioCore")})});var Core;!function(a){a._module.directive("noClick",function(){return function(a,b,c){b.click(function(a){a.preventDefault()})}}),a._module.directive("logToggler",["localStorage",function(a){return{restrict:"A",link:function(b,c,d){$(c).click(function(){var b=$("#log-panel"),c=$("body");return 0!==b.height()?(a.showLog="false",b.css({bottom:"110%"}),c.css({"overflow-y":"auto"})):(a.showLog="true",b.css({bottom:"50%"}),c.css({"overflow-y":"hidden"})),!1})}}}]),a._module.directive("autofill",["$timeout",function(b){return{restrict:"A",require:"ngModel",link:function(c,d,e,f){function g(){var b=c.$eval(h),e=d.val();if(e&&!b)a.pathSet(c,h,e);else if(d.trigger("input"),d.trigger("change"),d.length){var f=$(d[0]);f.trigger("input"),f.trigger("change")}}var h=e.ngModel;if(h){Logger.get("Core");b(g,200),b(g,800),b(g,1500)}}}}])}(Core||(Core={}));var Core;!function(a){a._module.controller("Core.CorePreferences",["$scope","localStorage",function(b,c){a.initPreferenceScope(b,c,{updateRate:{value:5e3,post:function(a){b.$emit("UpdateRate",a)}},showWelcomePage:{value:!0,converter:a.parseBooleanValue},regexs:{value:"",converter:function(b){return angular.isArray(b)?b:a.isBlank(b)?[]:angular.fromJson(b)},formatter:function(a){return angular.toJson(a)},compareAsObject:!0}}),b.newHost={},b.forms={},b.addRegexDialog=new UI.Dialog,b.onOk=function(c,d){b.addRegexDialog.close(),c.color=UI.colors.sample(),angular.isArray(b.regexs)?b.regexs.push(c):b.regexs=[c],b.newHost={},a.$apply(b)},b.hostSchema={properties:{name:{description:"Indicator name",type:"string",required:!0},regex:{description:"Indicator regex",type:"string",required:!0}}},b.delete=function(a){b.regexs.removeAt(a)},b.moveUp=function(a){var c=b.regexs[a];b.regexs[a]=b.regexs[a-1],b.regexs[a-1]=c},b.moveDown=function(a){var c=b.regexs[a];b.regexs[a]=b.regexs[a+1],b.regexs[a+1]=c}}])}(Core||(Core={}));var Themes;!function(a){function b(){return Object.extended(a.definitions).keys()}function c(){return Object.extended(a.brandings).keys()}function d(b){var c=a.brandings[b];return c&&c.setFunc||(c=a.brandings.hawtio),c}function e(a,b){var c=$(a);c.prop("disabled",!0),c.attr({href:b}),c.prop("disabled",!1)}function f(a){$("#favicon").remove(),$("head").append('<link id="favicon" rel="icon" type="image/ico" href="'+a+'">"')}function g(b,c){b&&b.file&&b.label?(a.log.debug("Setting theme to ",b.label),e("#theme",b.file),b.loginBg&&(c.loginBg=b.loginBg)):(a.log.info("invalid theme, setting theme to Default"),e("#theme",a.definitions.Default.file),c.loginBg=a.definitions.Default.loginBg)}function h(b,c){var g=d(b);c=g.setFunc(c),a.log.debug("Set branding to: ",c),c.favicon&&f(c.favicon),c.css&&e("#branding",c.css),a.currentBranding=g.label,localStorage.branding=a.currentBranding}function i(b,c){b in a.definitions||(b="Default",a.log.info("unknown theme name, using default theme")),g(Core.pathGet(a.definitions,[b]),c),a.currentTheme=b,localStorage.theme=a.currentTheme}a.defaultLoginBg="app/themes/img/default/hawtio-nologo.jpg",a.definitions={Default:{label:"Default",file:"app/themes/css/default.css",loginBg:a.defaultLoginBg},Dark:{label:"Dark",file:"app/themes/css/dark.css",loginBg:a.defaultLoginBg},3270:{label:"Dark",file:"app/themes/css/3270.css",loginBg:a.defaultLoginBg}},a.brandings={hawtio:{label:"hawtio",setFunc:function(a){return a.appName="hawtio",a.appLogo="img/hawtio_logo.svg",a.css="css/site-branding.css",a.logoOnly=!0,a.fullscreenLogin=!1,a.favicon="favicon.ico",a.welcomePageUrl="app/core/doc/welcome.md",a.onWelcomePage=function(a){return marked(a)},a}},Example:{label:"Example",setFunc:function(a){return a.appName="Example",a.appLogo="",a.logoOnly=!1,a.welcomePageUrl="app/themes/doc/welcome_example.md",a}}},a.currentTheme="Default",a.currentBranding="hawtio",a.getAvailableThemes=b,a.getAvailableBrandings=c,a.setBranding=h,a.setTheme=i,a.pluginName="themes",a.log=Logger.get("Themes"),a._module=angular.module(a.pluginName,["hawtioCore"]),a._module.run(["localStorage","branding","preferencesRegistry",function(b,c,d){var e=b.theme;a.setTheme(e,c);var f=b.branding;a.setBranding(f,c),d.addTab("Theme","app/themes/html/preferences.html"),a.log.debug("Loaded")}]),hawtioPluginLoader.addModule(a.pluginName)}(Themes||(Themes={}));var Core;!function(a){a._module.factory("workspace",["$location","jmxTreeLazyLoadRegistry","$compile","$templateCache","localStorage","jolokia","jolokiaStatus","$rootScope","userDetails",function(b,c,d,e,f,g,h,i,j){var k=new a.Workspace(g,h,c,b,d,e,f,i,j);return k.loadTree(),k}]),a._module.service("ConnectOptions",["$location",function(b){var c=a.ConnectionName;if(!a.isBlank(c)){var d=a.getConnectOptions(c);return a.log.debug("ConnectOptions: ",d),d}return a.log.debug("No connection options, connected to local JVM"),null}]),a._module.service("localStorage",function(){return a.getLocalStorage()}),a._module.factory("pageTitle",function(){return new a.PageTitle}),a._module.factory("viewRegistry",function(){return{}}),a._module.factory("lastLocation",function(){return{}}),a._module.factory("locationChangeStartTasks",function(){return new a.ParameterizedTasksImpl}),a._module.factory("postLoginTasks",function(){return a.postLoginTasks}),a._module.factory("preLogoutTasks",function(){return a.preLogoutTasks}),a._module.factory("postLogoutTasks",function(){return a.postLogoutTasks}),a._module.factory("helpRegistry",["$rootScope",function(b){return new a.HelpRegistry(b)}]),a._module.factory("preferencesRegistry",function(){return new a.PreferencesRegistry}),a._module.factory("toastr",["$window",function(a){var b=a.toastr;return b||(b={},a.toaster=b),b}]),a._module.factory("metricsWatcher",["$window",function(a){var b=a.metricsWatcher;return b||(b={},a.metricsWatcher=metricsWatcher),b}]),a._module.factory("xml2json",function(){return $.xml2json}),a._module.factory("jolokiaUrl",function(){return a.jolokiaUrl}),a._module.factory("jolokiaStatus",function(){return{xhr:null,listMethod:a.LIST_GENERAL,listMBean:"hawtio:type=security,name=RBACRegistry"}}),a.LIST_GENERAL="list",a.LIST_WITH_RBAC="list_rbac",a.LIST_CANT_DETERMINE="cant_determine",a.DEFAULT_MAX_DEPTH=7,a.DEFAULT_MAX_COLLECTION_SIZE=5e4,a._module.factory("jolokiaParams",["jolokiaUrl","localStorage",function(b,c){var d={canonicalNaming:!1,ignoreErrors:!0,mimeType:"application/json",maxDepth:a.DEFAULT_MAX_DEPTH,maxCollectionSize:a.DEFAULT_MAX_COLLECTION_SIZE};return"jolokiaParams"in c?d=angular.fromJson(c.jolokiaParams):c.jolokiaParams=angular.toJson(d),d.url=b,d}]),a._module.factory("branding",function(){var a=Themes.brandings.hawtio.setFunc({});return a.logoClass=function(){return a.logoOnly?"without-text":"with-text"},a}),a._module.factory("ResponseHistory",function(){return a.getResponseHistory()}),a._module.factory("userDetails",["ConnectOptions","localStorage","$window","$rootScope",function(b,c,d,e){var f={username:null,password:null};if("userDetails"in d)f=d.userDetails,a.log.debug("User details loaded from parent window: ",StringHelpers.toString(f)),a.executePostLoginTasks();else if("userDetails"in c)f=angular.fromJson(c.userDetails),a.log.debug("User details loaded from local storage: ",StringHelpers.toString(f)),a.executePostLoginTasks();else if(a.isChromeApp())f={username:"user",password:""},a.log.debug("Running as a Chrome app, using fake UserDetails: "),a.executePostLoginTasks();else{a.log.debug("No username set, checking if we have a session");var g="user";$.ajax(g,{type:"GET",success:function(b){if(a.log.debug("Got user response: ",b),null===b)return f.username=null,f.password=null,a.log.debug("user response was null, no session available"),void a.$apply(e);f.username=b,"user"===b?(a.log.debug("Authentication disabled, using dummy credentials"),
f.loginDetails={}):a.log.debug("User details loaded from existing session: ",StringHelpers.toString(f)),a.executePostLoginTasks(),a.$apply(e)},error:function(b,c,d){f.username=null,f.password=null,a.log.debug("Failed to get session username: ",d),a.$apply(e)}}),a.log.debug("Created empty user details to be filled in: ",StringHelpers.toString(f))}return f}]),a._module.factory("jmxTreeLazyLoadRegistry",function(){return a.lazyLoaders})}(Core||(Core={}));var Core;!function(a){a.fileUploadMBean="hawtio:type=UploadManager";var b=function(){function b(){this.restrict="A",this.replace=!0,this.templateUrl=a.templatePath+"fileUpload.html",this.scope={files:"=hawtioFileUpload",target:"@",showFiles:"@"},this.controller=["$scope","$element","$attrs","jolokia",function(b,c,d,e){b.target="",b.response="",b.percentComplete=0,UI.observe(b,d,"target",""),UI.observe(b,d,"showFiles",!0),b.update=function(c){var d=angular.toJson(c.value);b.responseJson!==d&&(b.responseJson=d,b.files=c.value,a.$applyNowOrLater(b))},b.delete=function(c){e.request({type:"exec",mbean:a.fileUploadMBean,operation:"delete(java.lang.String, java.lang.String)",arguments:[b.target,c]},{success:function(){a.$apply(b)},error:function(d){a.notification("error","Failed to delete "+c+" due to: "+d.error),a.$apply(b)}})},b.$watch("target",function(c,d){d!==c&&a.unregister(e,b),a.register(e,b,{type:"exec",mbean:a.fileUploadMBean,operation:"list(java.lang.String)",arguments:[b.target]},onSuccess(b.update))})}],this.link=function(b,c,d){var e=c.find("input[type=file]"),f=c.find("form[name=file-upload]"),g=c.find("input[type=button]"),h=function(){g.prop("disabled",!0);var c=e.get(0).files,d=c.length+" files";return 1===c.length&&(d=c[0].name),f.ajaxSubmit({beforeSubmit:function(c,e,f){a.notification("info","Uploading "+d),b.percentComplete=0,a.$apply(b)},success:function(c,e,f,h){a.notification("success","Uploaded "+d),setTimeout(function(){g.prop("disabled",!1),b.percentComplete=0,a.$apply(b)},1e3),a.$apply(b)},error:function(c,e,f,h){a.notification("error","Failed to upload "+d+" due to "+e),setTimeout(function(){g.prop("disabled",!1),b.percentComplete=0,a.$apply(b)},1e3),a.$apply(b)},uploadProgress:function(c,d,e,f){b.percentComplete=f,a.$apply(b)}}),!1};g.click(function(){return g.prop("disabled")||e.click(),!1}),f.submit(function(){return!1}),$.browser.msie?e.click(function(a){setTimeout(function(){e.val().length>0&&h()},0)}):e.change(h)}}return b}();a.FileUpload=b,a._module.directive("hawtioFileUpload",function(){return new a.FileUpload})}(Core||(Core={}));var Core;!function(a){var b=function(){function b(a){var b=this;this.$window=a,this.restrict="C",this.link=function(a,c,d){return b.doLink(a,c,d)}}return b.prototype.doLink=function(b,c,d){var e=0,f=angular.bind(this,function(a){var b=c.position().top,d=$(this.$window).height(),f=d-b-15,g=f+"px";c.css({"min-height":g,height:g}),e!==f&&(e=f,c.trigger("resize"))});f(),b.$watch(f),angular.element(window).on("resize",function(){return f(),a.$apply(b),!1}),c.on("$destroy",angular.bind(this,function(){$(this.$window).off("resize"),angular.element(window).off("resize")}))},b}();a.GridStyle=b,a._module.directive("gridStyle",["$window",function(b){return new a.GridStyle(b)}])}(Core||(Core={}));var Core;!function(a){a._module.controller("Core.HelpController",["$scope","$routeParams","marked","helpRegistry","branding",function(b,c,d,e,f){b.branding=f,b.topics=e.getTopics(),b.topic="topic"in c?c.topic:"index",b.subTopic="subtopic"in c?c.subtopic:Object.extended(b.topics[b.topic]).keys().first(),a.log.debug("topic: ",b.topic," subtopic: ",b.subTopic);var g="index"===b.topic,h=b.subTopic;g&&"developer"!==h&&(h="user"),b.breadcrumbs=[{topic:"index",subTopic:"user",label:"User Guide"},{topic:"index",subTopic:"faq",label:"FAQ"},{topic:"index",subTopic:"changes",label:"Changes"},{topic:"index",subTopic:"developer",label:"Developers"}],b.sectionLink=function(b){var c=b.topic||"",d=b.subTopic||"",f=a.pathGet(e.topics,[c,d]);return f&&f.indexOf("#")>=0?f:"#/help/"+c+"/"+d};var i=b.breadcrumbs.find(function(a){return a.topic===b.topic&&a.subTopic===b.subTopic});i&&(i.active=!0),b.sections=[],angular.forEach(b.topics,function(a,c){"index"!==c&&a[h]&&b.sections.push({topic:c,subTopic:h,label:e.mapTopicName(c),active:c===b.topic})}),b.sections=b.sections.sortBy("label"),b.$on("hawtioNewHelpTopic",function(){b.topics=e.getTopics()}),b.$watch("topics",function(c,d){a.log.debug("Topics: ",b.topics)}),angular.isDefined(b.topics[b.topic])?$.ajax({url:b.topics[b.topic][b.subTopic],dataType:"html",cache:!1,success:function(c,e,f){b.html="Unable to download help data for "+b.topic,angular.isDefined(c)&&(b.html=d(c)),a.$apply(b)},error:function(c,d,e){b.html="Unable to download help data for "+b.topic,a.$apply(b)}}):b.html="Unable to download help data for "+b.topic}])}(Core||(Core={}));var Core;!function(a){a._module.controller("Core.JmxPreferences",["$scope","localStorage",function(b,c){a.initPreferenceScope(b,c,{activemqJmxDomain:{value:"org.apache.activemq"},camelJmxDomain:{value:"org.apache.camel"},jmxMaxFolderSize:{value:100,converter:parseInt,formatter:parseInt}})}])}(Core||(Core={}));var Core;!function(a){a._module.controller("Core.JolokiaPreferences",["$scope","localStorage","jolokiaParams","$window",function(b,c,d,e){a.initPreferenceScope(b,c,{maxDepth:{value:a.DEFAULT_MAX_DEPTH,converter:parseInt,formatter:parseInt,post:function(a){d.maxDepth=a,c.jolokiaParams=angular.toJson(d)}},maxCollectionSize:{value:a.DEFAULT_MAX_COLLECTION_SIZE,converter:parseInt,formatter:parseInt,post:function(a){d.maxCollectionSize=a,c.jolokiaParams=angular.toJson(d)}}}),b.reboot=function(){e.location.reload()}}])}(Core||(Core={}));var Core;!function(a){a._module.factory("jolokia",["$location","localStorage","jolokiaStatus","$rootScope","userDetails","jolokiaParams","jolokiaUrl",function(b,c,d,e,f,g,h){if(a.log.debug("Jolokia URL is "+h),h){var i=a.getConnectionNameParameter(b.search()),j=a.getConnectOptions(i),k=null,l=null,m=!1;try{window.opener&&"passUserDetails"in window.opener&&(k=window.opener.passUserDetails.username,l=window.opener.passUserDetails.password,m=!0)}catch(a){}if(m)f.remoteJolokiaUserDetails={username:k,password:l};else if(j&&j.userName&&j.password)k=j.userName,l=j.password;else if(angular.isDefined(f)&&angular.isDefined(f.username)&&angular.isDefined(f.password))k=f.username,l=f.password;else{var n=hawtioPluginLoader.parseQueryString();k=n._user,l=n._pwd,angular.isArray(k)&&(k=k[0]),angular.isArray(l)&&(l=l[0])}if(k&&l){f.username=k,f.password=l,$.ajaxSetup({beforeSend:function(b){b.setRequestHeader("Authorization",a.getBasicAuthHeader(k,l))}});var o=h.replace("jolokia","auth/login/");$.ajax(o,{type:"POST",async:!1,success:function(b){if(d.xhr=null,b.credentials||b.principals)f.loginDetails={credentials:b.credentials,principals:b.principals};else{var c=a.pathGet(b,["children",0,"innerHTML"]);c&&a.log.debug("Response is a document (ignoring this): ",c)}a.executePostLoginTasks()},error:function(b,c,e){d.xhr=b,a.executePostLoginTasks()}})}g.ajaxError=function(b,g,h){401===b.status||403===b.status?a.executePreLogoutTasks(function(){if(c.jvmConnect&&"undefined"!=c.jvmConnect){var b=angular.fromJson(c.jvmConnect);_.each(b,function(a){delete a.userName,delete a.password}),c.setItem("jvmConnect",angular.toJson(b))}c.removeItem("activemqUserName"),c.removeItem("activemqPassword"),a.executePostLogoutTasks(function(){a.log.debug("Executing logout callback after successfully executed postLogoutTasks"),f.username=null,f.password=null,f.loginDetails=null,f.remoteJolokiaUserDetails=null,delete c.userDetails})}):(d.xhr=b,!b.responseText&&h&&(b.responseText=h.stack)),a.$apply(e)};var p=new Jolokia(g);return c.url=h,p.stop(),a.checkJolokiaOptimization(p,d),p}var q={running:!1,request:function(a,b){return null},register:function(a,b){return null},list:function(a,b){return null},search:function(a,b){return null},getAttribute:function(a,b,c,d){return null},setAttribute:function(a,b,c,d,e){},version:function(a){return null},execute:function(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];return null},start:function(a){q.running=!0},stop:function(){q.running=!1},isRunning:function(){return q.running},jobs:function(){return[]}};return q}])}(Core||(Core={}));var Core;!function(a){a._module.controller("Core.LoggingPreferences",["$scope",function(b){a.initPreferenceScope(b,localStorage,{logBuffer:{value:100,converter:parseInt,formatter:parseInt,post:function(a){window.LogBuffer=a}},logLevel:{value:'{"value": 2, "name": "INFO"}',post:function(a){var b=angular.fromJson(a);Logger.setLevel(b)}}})}])}(Core||(Core={}));var Core;!function(a){a.NavBarController=a._module.controller("Core.NavBarController",["$scope","$location","workspace","$route","jolokia","localStorage","NavBarViewCustomLinks",function(b,c,d,e,f,g,h){function i(){var e=Perspective.getPerspectives(c,d,f,g),h=Perspective.currentPerspectiveId(c,d,f,g),i=Perspective.getTopLevelTabsForPerspective(c,d,f,g),j=i.subtract(b.topLevelTabs);j&&j.length>0&&(b.topLevelTabs=i,b.perspectiveId=h,b.perspectives=e,b.perspectiveDetails.perspective=b.perspectives.find(function(a){return a.id===h}),a.$apply(b))}b.hash=d.hash(),b.topLevelTabs=[],b.subLevelTabs=d.subLevelTabs,b.currentPerspective=null,b.localStorage=g,b.recentConnections=[],b.goTo=function(a){c.url(a)},b.$watch("localStorage.recentConnections",function(c,d){b.recentConnections=a.getRecentConnections(g)}),b.openConnection=function(b){var c=a.getConnectOptions(b);c&&a.connectToServer(g,c)},b.goHome=function(){window.open(".")},b.clearConnections=a.clearConnections,b.perspectiveDetails={perspective:null},a.postLoginTasks.addTask("navbarReloadPerspectives",i),b.getCurrentTopLevelTabs=function(){return i(),d.topLevelTabs},b.$on("jmxTreeUpdated",function(){i()}),b.$watch("workspace.topLevelTabs",function(a,b){a&&i()}),b.validSelection=function(a){return d.validSelection(a)},b.isValid=function(a){return a&&a.isValid(d)},b.switchPerspective=function(e){if(e.onSelect&&angular.isFunction(e.onSelect))return void e.onSelect.apply();var h=c.search()[Perspective.perspectiveSearchId];if(e&&(b.currentPerspective!==e||e.id!==h)){Logger.debug("Changed the perspective to "+JSON.stringify(e)+" from search id "+h),b.currentPerspective&&(b.currentPerspective.lastPage=c.url());var j=e.id;c.search(Perspective.perspectiveSearchId,j),Logger.debug("Setting perspective to "+j),b.currentPerspective=e,i(),b.topLevelTabs=Perspective.getTopLevelTabsForPerspective(c,d,f,g);var k,l,m=a.getDefaultPlugin(j,d,f,g);if(m?(b.topLevelTabs.forEach(function(a){a.id===m.id&&(k=a)}),k&&(l=a.trimLeading(k.href(),"#"))):e.lastPage&&(l=a.trimLeading(e.lastPage,"#")),l){var n=l.indexOf("?p=")||l.indexOf("&p=");n>0&&(l=l.substring(0,n));l+=(l.indexOf("?")>=0?"&":"?")+"p="+j,c.url(l)}}},b.$watch("hash",function(b,c){b!==c&&a.log.debug("hash changed from ",c," to ",b)}),b.$on("$routeChangeSuccess",function(){b.hash=d.hash(),i()}),b.link=function(b,d){void 0===d&&(d=!1);var e;e=angular.isString(b)?b:angular.isObject(b)?b.href():null,e=e||"";var f=["tab","nid","chapter","pref","q"];return!d&&e&&(e.indexOf("?p=")>=0||e.indexOf("&p=")>=0)&&f.push("p"),a.createHref(c,e,f)},b.fullScreenLink=function(){var b=c.search().tab;b||(b="notree"),b.match(/notree$/)||(b+=":notree");var d="#"+c.path()+"?tab="+b;return a.createHref(c,d,["tab"])},b.addToDashboardLink=function(){var a="#"+c.path()+d.hash(),b="#/dashboard/add?tab=dashboard&href="+encodeURIComponent(a);if(c.url().has("/jmx/charts")){var e={size_x:4,size_y:3};b+="&size="+encodeURIComponent(angular.toJson(e))}return b},b.isActive=function(a){if(angular.isString(a))return d.isLinkActive(a);var b=a.isActive;return b?b(d):d.isLinkActive(a.href())},b.isTopTabActive=function(a){if(angular.isString(a))return d.isTopTabActive(a);var b=a.isActive;return b?b(d):d.isTopTabActive(a.href())},b.activeLink=function(){var a=b.getCurrentTopLevelTabs();if(!a)return"Loading...";var c=a.find(function(a){return b.isActive(a)});return c?c.content:""},b.navBarViewCustomLinks=h,b.isCustomLinkSet=function(){return b.navBarViewCustomLinks.list.length}}]),a._module.service("NavBarViewCustomLinks",["$location","$rootScope",function(a,b){return{list:[],dropDownLabel:"Extra"}}])}(Core||(Core={}));var Core;!function(a){a.PluginPreferences=a._module.controller("Core.PluginPreferences",["$scope","localStorage","$location","workspace","jolokia",function(b,c,d,e,f){function g(d){var g=a.configuredPluginsForPerspectiveId(d.id,e,f,c);b.plugins=g,b.perspectiveId=d.id,a.log.debug("Updated to perspective "+b.perspectiveId+" with "+g.length+" plugins")}a.initPreferenceScope(b,c,{autoRefresh:{value:!0,converter:a.parseBooleanValue}}),b.perspectiveId=null,b.perspectives=[],b.plugins=[],b.pluginDirty=!1,b.pluginMoveUp=function(a){b.pluginDirty=!0;var c=b.plugins[a];b.plugins[a]=b.plugins[a-1],b.plugins[a-1]=c},b.pluginMoveDown=function(a){b.pluginDirty=!0;var c=b.plugins[a];b.plugins[a]=b.plugins[a+1],b.plugins[a+1]=c},b.pluginDisable=function(a){b.pluginDirty=!0;var c=!1;b.plugins.forEach(function(b,d){d!=a&&b.enabled&&(c=!0)}),c&&(b.plugins[a].enabled=!1,b.plugins[a].isDefault=!1)},b.pluginEnable=function(a){b.pluginDirty=!0,b.plugins[a].enabled=!0},b.pluginDefault=function(a){b.pluginDirty=!0,b.plugins.forEach(function(a){a.isDefault=!1}),b.plugins[a].isDefault=!0,b.plugins[a].enabled=!0},b.pluginApply=function(){b.pluginDirty=!1;var d=!0;b.plugins.forEach(function(a,b){a.isDefault&&(d=!1),a.index=b}),d&&(b.plugins.find(function(a){return 1==a.enabled}).isDefault=!0);var e=angular.toJson(b.plugins);if(e){a.log.debug("Saving plugin settings for perspective "+b.perspectiveId+" -> "+e);var f="plugins-"+b.perspectiveId;c[f]=e}setTimeout(function(){window.location.hash="#"},10)},b.$watch("perspectiveId",function(c,d){if(c!==d){var e=Perspective.getPerspectiveById(c);e&&(g(e),a.$apply(b))}}),b.perspectives=Perspective.getPerspectives(d,e,f,c),a.log.debug("There are "+b.perspectives.length+" perspectives");var h,i=Perspective.currentPerspectiveId(d,e,f,c);i&&(h=b.perspectives.find(function(a){return a.id===i})),h||(h=b.perspectives[0]),g(h),a.$apply(b)}])}(Core||(Core={}));var Core;!function(a){a._module.controller("Core.PreferencesController",["$scope","$location","workspace","preferencesRegistry","$element",function(b,c,d,e,f){a.bindModelToSearchParam(b,c,"pref","pref","Core"),b.panels={},b.$watch(function(){return f.is(":visible")},function(c,d){c&&setTimeout(function(){b.panels=e.getTabs(),a.log.debug("Panels: ",b.panels),a.$apply(b)},50)})}])}(Core||(Core={}));var Core;!function(a){a._module.controller("Core.ResetPreferences",["$scope","userDetails","jolokiaUrl","localStorage",function(b,c,d,e){b.doReset=function(){a.log.info("Resetting");var f=function(){e.clear(),setTimeout(function(){window.location.reload()},10)};a.isBlank(c.username)&&a.isBlank(c.password)?f():a.logout(d,c,e,b,f)}}])}(Core||(Core={}));var Core;!function(a){a.ViewController=a._module.controller("Core.ViewController",["$scope","$route","$location","layoutTree","layoutFull","viewRegistry",function(b,c,d,e,f,g){function h(b){var c=void 0;return Object.extended(g).keys(function(d,e){if(!c)if(d.startsWith("/")&&d.endsWith("/")){var f=d.substring(1,d.length-1);try{var g=new RegExp(f,"");g.exec(b)&&(c=e)}catch(b){a.log.debug("Invalid RegExp "+f+" for viewRegistry value: "+e)}}else b.startsWith(d)&&(c=e)}),c}function i(){var c=null,f=d.search(),g=f.tab;if(angular.isString(g)&&(g.match(/:notree$/)&&(g="notree"),c=h(g)),!c){var i=d.path();i&&(i.startsWith("/")&&(i=i.substring(1)),c=h(i))}return c||(c=e),b.viewPartial=c,a.log.debug("Using view partial: "+c),c}i(),b.$on("$routeChangeSuccess",function(a,b,c){i()})}])}(Core||(Core={}));var Core;!function(a){a._module.controller("Core.WelcomeController",["$scope","$location","branding","localStorage",function(b,c,d,e){b.branding=d;var f=Logger.get("Welcome");b.stopShowingWelcomePage=function(){f.debug("Stop showing welcome page"),e.showWelcomePage=!1,c.path("/")},b.$watch("branding.welcomePageUrl",function(c,e){$.ajax({url:d.welcomePageUrl,dataType:"html",cache:!1,success:function(c,e,f){b.html="Unable to download welcome.md",angular.isDefined(c)&&(b.html=d.onWelcomePage(c)),a.$apply(b)},error:function(c,d,e){b.html="Unable to download welcome.md",a.$apply(b)}})})}])}(Core||(Core={}));var Dashboard;!function(a){function b(a){var b={};return angular.forEach(a,function(a,c){angular.isString(c)&&(c.startsWith("$")||c.startsWith("_"))||(b[c]=a)}),b}function c(a){if(!a)return a;var b={};return angular.forEach(a,function(a,c){b[c]=a?decodeURIComponent(a):a}),b}function d(a){console.log("Completed adding the dashboard with response "+JSON.stringify(a))}a.log=Logger.get("Dashboard"),a.cleanDashboardData=b,a.decodeURIComponentProperties=c,a.onOperationComplete=d}(Dashboard||(Dashboard={}));var Dashboard;!function(a){var b=[{title:"Monitor",group:"Personal",widgets:[{id:"w1",title:"Operating System",row:1,col:1,size_x:3,size_y:4,path:"jmx/attributes",include:"app/jmx/html/attributes.html",search:{nid:"root-java.lang-OperatingSystem"},hash:""},{id:"w3",title:"Java Heap Memory",row:1,col:6,size_x:2,size_y:2,path:"jmx/widget/donut",include:"app/jmx/html/donutChart.html",search:{},hash:"",routeParams:'{"type":"donut","title":"Java Heap Memory","mbean":"java.lang:type=Memory","attribute":"HeapMemoryUsage","total":"Max","terms":"Used","remaining":"Free"}'},{id:"w4",title:"Java Non Heap Memory",row:1,col:8,size_x:2,size_y:2,path:"jmx/widget/donut",include:"app/jmx/html/donutChart.html",search:{},hash:"",routeParams:'{"type":"donut","title":"Java Non Heap Memory","mbean":"java.lang:type=Memory","attribute":"NonHeapMemoryUsage","total":"Max","terms":"Used","remaining":"Free"}'},{id:"w5",title:"",row:3,col:4,size_x:6,size_y:2,path:"jmx/charts",include:"app/jmx/html/charts.html",search:{size:"%7B%22size_x%22%3A2%2C%22size_y%22%3A2%7D",title:"Java%20Non%20Heap%20Memory",routeParams:"%7B%22type%22%3A%22donut%22%2C%22title%22%3A%22Java%20Non%20Heap%20Memory%22%2C%22mbean%22%3A%22java.lang%3Atype",nid:"root-java.lang-Threading"},hash:""},{id:"w6",title:"System CPU Load",row:1,col:4,size_x:2,size_y:2,path:"jmx/widget/area",include:"app/jmx/html/areaChart.html",search:{},hash:"",routeParams:'{"type":"area","title":"System CPU Load","mbean":"java.lang:type=OperatingSystem","attribute":"SystemCpuLoad"}'}],id:"4e9d116173ca41767e"}],c=function(){function b(a,b,c){this.workspace=a,this.jolokia=b,this.localStorage=c,this.repository=null}return b.prototype.putDashboards=function(a,b,c){this.getRepository().putDashboards(a,b,c)},b.prototype.deleteDashboards=function(a,b){this.getRepository().deleteDashboards(a,b)},b.prototype.getDashboards=function(a){this.getRepository().getDashboards(function(b){a(b)})},b.prototype.getDashboard=function(a,b){this.getRepository().getDashboard(a,b)},b.prototype.createDashboard=function(a){return this.getRepository().createDashboard(a)},b.prototype.cloneDashboard=function(a){return this.getRepository().cloneDashboard(a)},b.prototype.getType=function(){return this.getRepository().getType()},b.prototype.isValid=function(){return this.getRepository().isValid()},b.prototype.getRepository=function(){if(this.repository&&this.repository.isValid())return this.repository;if(Fabric.hasFabric(this.workspace))return this.repository=new a.FabricDashboardRepository(this.workspace,this.jolokia,this.localStorage),this.repository;var b=Git.createGitRepository(this.workspace,this.jolokia,this.localStorage);return b?(this.repository=new e(this.workspace,b),this.repository):(this.repository=new d(this.workspace),this.repository)},b}();a.DefaultDashboardRepository=c;var d=function(){function c(a){this.workspace=a,this.localStorage=null,this.localStorage=a.localStorage,"userDashboards"in this.localStorage||this.storeDashboards(b)}return c.prototype.loadDashboards=function(){var b=angular.fromJson(localStorage.userDashboards);return 0===b.length&&b.push(this.createDashboard({})),a.log.debug("returning dashboards: ",b),b},c.prototype.storeDashboards=function(b){return a.log.debug("storing dashboards: ",b),localStorage.userDashboards=angular.toJson(b),this.loadDashboards()},c.prototype.putDashboards=function(a,b,c){var d=this.loadDashboards();a.forEach(function(a){var b=d.findIndex(function(b){return b.id===a.id});b>=0?d[b]=a:d.push(a)}),c(this.storeDashboards(d))},c.prototype.deleteDashboards=function(a,b){var c=this.loadDashboards();angular.forEach(a,function(a){c.remove(function(b){return b.id===a.id})}),b(this.storeDashboards(c))},c.prototype.getDashboards=function(a){a(this.loadDashboards())},c.prototype.getDashboard=function(a,b){b(this.loadDashboards().find(function(b){return b.id===a}))},c.prototype.createDashboard=function(a){var b={title:"New Dashboard",group:"Personal",widgets:[]};return b=angular.extend(b,a),b.id=Core.getUUID(),b},c.prototype.cloneDashboard=function(a){var b=Object.clone(a);return b.id=Core.getUUID(),b.title="Copy of "+a.title,b},c.prototype.getType=function(){return"container"},c.prototype.isValid=function(){return!Fabric.hasFabric(this.workspace)&&!Git.hasGit(this.workspace)},c}();a.LocalDashboardRepository=d;var e=function(){function b(a,b){this.workspace=a,this.git=b,this.branch=null}return b.prototype.putDashboards=function(a,b,c){var d=this,e=a.length,f=function(){0===(e-=1)&&d.getDashboards(c)};angular.forEach(a,function(a){var c=d.getDashboardPath(a),e=JSON.stringify(a,null,"  ");d.git.write(d.branch,c,b,e,function(){f()})})},b.prototype.deleteDashboards=function(a,b){var c=this,d=a.length,e=function(){0===(d-=1)&&c.getDashboards(b)};angular.forEach(a,function(a){var b=c.getDashboardPath(a),d="Removing dashboard "+b;c.git.remove(c.branch,b,d,function(){e()})})},b.prototype.createDashboard=function(a){var b={title:"New Dashboard",group:"Personal",widgets:[]};return b=angular.extend(b,a),b.id=Core.getUUID(),b},b.prototype.cloneDashboard=function(a){var b=Object.clone(a);return b.id=Core.getUUID(),b.title="Copy of "+a.title,b},b.prototype.getType=function(){return"git"},b.prototype.isValid=function(){return Git.hasGit(this.workspace)},b.prototype.getDashboardPath=function(a){var b=a.id||Core.getUUID();return this.getUserDashboardPath(b)},b.prototype.getDashboards=function(b){var c=this,d=this.getUserDashboardDirectory(),e=[];this.git.read(this.branch,d,function(d){var f=d.children,g=f.length,h=function(){0===(g-=1)&&(e=e.sort(function(a,b){var c=a.title,d=b.title;return c.localeCompare(d)}),b(e))};if(0===f.length)return e.push(c.createDashboard({})),void b(e);angular.forEach(f,function(b,d){var g=b.path;!b.directory&&g.endsWith(".json")&&c.git.read(c.branch,g,function(b){var c=b.text;if(c)try{var i=JSON.parse(c);i.uri=g,e.push(i)}catch(a){console.log("Failed to parse: "+c+" due to: "+a)}a.log.debug("git - read ",d," files, total: ",f.length),h()})})})},b.prototype.getDashboard=function(a,b){var c=this.getUserDashboardPath(a);this.git.read(this.branch,c,function(a){var c=null,d=a.text;if(d)try{c=JSON.parse(d)}catch(a){console.log("Failed to parse: "+d+" due to: "+a)}b(c)})},b.prototype.getUserDashboardDirectory=function(){return"/dashboards/team/all"},b.prototype.getUserDashboardPath=function(a){return this.getUserDashboardDirectory()+"/"+a+".json"},b}();a.GitDashboardRepository=e}(Dashboard||(Dashboard={}));var Dashboard;!function(a){var b=function(){function b(){this.restrict="A",this.replace=!0,this.controller=["$scope","$element","$attrs","$location","$routeParams","$injector","$route","$templateCache","workspace","dashboardRepository","$compile",function(b,c,d,e,f,g,h,i,j,k,l){function m(a,c,d){var e=t(),f=b.widgetMap[a.id],g=f.widget,h=f.scope;c(f),e.resize_widget(g,f.size_x,f.size_y),e.set_dom_grid_height(),setTimeout(function(){var c=i.get("widgetTemplate"),e=$("<div></div>");e.html(c),g.html(l(e.contents())(h)),q(),Core.$apply(b),setTimeout(function(){d(a)},50)},30)}function n(){b.id=f.dashboardId,b.idx=f.dashboardIndex,b.id?(b.$emit("loadDashboards"),k.getDashboard(b.id,o)):k.getDashboards(function(a){b.$emit("dashboardsUpdated",a);var c=b.idx?parseInt(b.idx):0,d=null;if(a.length>0){var f=a.length>c?a[c]:f[0];d=f.id}d?e.path("/dashboard/id/"+d):e.path("/dashboard/edit?tab=dashboard"),Core.$apply(b)})}function o(d){b.dashboard=d;var f=(d?d.widgets:null)||[],g=10,h=6;angular.forEach(f,function(a){if(angular.isDefined(a.row)&&g<a.row&&(g=a.row+1),angular.isDefined(a.size_x&&angular.isDefined(a.col))){var b=a.col+a.size_x;b>h&&(h=b+1)}});var k=c.gridster({widget_margins:[w,w],widget_base_dimensions:[b.gridX,b.gridY],extra_rows:g,extra_cols:h,max_size_x:h,max_size_y:g,draggable:{stop:function(a,b){p()&&s("Changing dashboard layout")}}}).data("gridster"),m=i.get("widgetTemplate");angular.forEach(f,function(c){var d=b.$new(!1);d.widget=c;var f=c.path,g=null;c.search&&(g=a.decodeURIComponentProperties(c.search));var h=c.hash,i=new a.RectangleLocation(e,f,g,h),n=null;c.routeParams&&(n=angular.fromJson(c.routeParams));var o=j.createChildWorkspace(i);if(o.$location=i,g){var p=i.search().nid;if(p&&j.tree&&(o.selection=j.keyToNodeMap[p],!o.selection)){var q=decodeURIComponent(p);o.selection=j.keyToNodeMap[q]}}var r={workspace:o,location:i,$location:i,$routeParams:n};d.$$scopeInjections=r,d.inDashboard=!0,(!c.size_x||c.size_x<1)&&(c.size_x=1),(!c.size_y||c.size_y<1)&&(c.size_y=1);var s=$("<div></div>");s.html(m);var t=$('<li class="grid-block" style="display: list-item; position: absolute"></li>');t.html(l(s.contents())(d));var u=k.add_widget(t,c.size_x,c.size_y,c.col,c.row);b.widgetMap[c.id]={widget:u,scope:d}}),q(),t().enable(),Core.$apply(b)}function p(){var a=t();if(a){var c=a.serialize(),d=b.dashboard.widgets||[];return angular.forEach(d,function(a,b){var d=c[b];d&&a&&angular.forEach(d,function(b,c){return a[c]=b})}),!0}return!1}function q(){var a=$(".grid-block");a.resizable("destroy"),a.resizable({grid:[v+2*w,v+2*w],animate:!1,minWidth:v,minHeight:v,autoHide:!1,start:function(a,b){u=t().$el.height()},resize:function(a,b){var c=t(),d=v+2*w;if(a.offsetY>c.$el.height()){var e=Math.floor((a.offsetY-u)/d+1),f=u+e*d;c.$el.css("height",f)}},stop:function(a,b){var c=$(this);setTimeout(function(){r(c)},300)}}),$(".ui-resizable-handle").hover(function(){t().disable()},function(){t().enable()})}function r(a){for(var b=a.find(".widget-area"),c=a.width()-v,d=a.height()-v,e=1;c>0;c-=v+2*w)e++;for(var f=1;d>0;d-=v+2*w)f++;m({id:b.attr("data-widgetId")},function(a){a.size_x=e,a.size_y=f},function(a){p()&&s("Changed size of widget: "+a.id)})}function s(c){if(b.dashboard){var d=c;b.dashboard&&b.dashboard.title&&(d+=" on dashboard "+b.dashboard.title),k.putDashboards([b.dashboard],d,a.onOperationComplete)}}function t(){return c.gridster().data("gridster")}b.route=h,b.injector=g;var u,v=150,w=6;b.gridX=v,b.gridY=v,b.widgetMap={},b.$on("$destroy",function(){angular.forEach(b.widgetMap,function(a,b){if("scope"in a){a.scope.$destroy()}})}),n(),b.removeWidget=function(a){var c=t(),d=null,e=b.widgetMap[a.id];if(e){delete b.widgetMap[a.id];var f=e.scope;d=e.widget,f&&f.$destroy()}if(d||(d=$("div").find("[data-widgetId='"+a.id+"']").parent()),c&&d&&c.remove_widget(d),b.dashboard){var g=b.dashboard.widgets;g&&g.remove(a)}s("Removed widget "+a.title)},b.onWidgetRenamed=function(a){s("Renamed widget to "+a.title)}}]}return b}();a.GridsterDirective=b}(Dashboard||(Dashboard={}));var Dashboard;!function(a){a.templatePath="app/dashboard/html/",a.pluginName="dashboard",a._module=angular.module(a.pluginName,["bootstrap","ngResource","hawtioCore","hawtio-ui"]),a._module.config(["$routeProvider",function(b){b.when("/dashboard/add",{templateUrl:a.templatePath+"addToDashboard.html"}).when("/dashboard/edit",{templateUrl:a.templatePath+"editDashboards.html"}).when("/dashboard/idx/:dashboardIndex",{templateUrl:a.templatePath+"dashboard.html"}).when("/dashboard/id/:dashboardId",{templateUrl:a.templatePath+"dashboard.html"}).when("/dashboard/id/:dashboardId/share",{templateUrl:a.templatePath+"share.html"}).when("/dashboard/import",{templateUrl:a.templatePath+"import.html"})}]),a._module.value("ui.config",{jq:{gridster:{widget_margins:[10,10],widget_base_dimensions:[140,140]}}}),a._module.factory("dashboardRepository",["workspace","jolokia","localStorage",function(b,c,d){return new a.DefaultDashboardRepository(b,c,d)}]),a._module.directive("hawtioDashboard",function(){return new a.GridsterDirective}),a._module.run(["$location","workspace","viewRegistry","helpRegistry",function(a,b,c,d){c.dashboard="app/dashboard/html/layoutDashboard.html",d.addUserDoc("dashboard","app/dashboard/doc/help.md"),b.topLevelTabs.push({id:"dashboard",content:"Dashboard",title:"View and edit your own custom dashboards",isValid:function(a){return a.hasMBeans()},href:function(){return"#/dashboard/idx/0?tab=dashboard"},isActive:function(a){return a.isTopTabActive("dashboard")}})}]),hawtioPluginLoader.addModule(a.pluginName)}(Dashboard||(Dashboard={}));var Dashboard;!function(a){a._module.controller("Dashboard.EditDashboardsController",["$scope","$routeParams","$route","$location","$rootScope","dashboardRepository","jolokia","workspace","$timeout",function(a,b,c,d,e,f,g,h,i){function j(){var c=b.href;c&&(a.url=decodeURIComponent(c));var d=b.routeParams;d&&(a.routeParams=decodeURIComponent(d));var e=b.size;e&&(e=decodeURIComponent(e),a.preferredSize=angular.fromJson(e));var g=b.title;g&&(g=decodeURIComponent(g),a.widgetTitle=g),f.getDashboards(function(a){k(null,a)})}function k(b,c){a._dashboards=c,null===b&&a.$emit("dashboardsUpdated",c),Core.$apply(a)}function l(){return a._dashboards}function m(b,c){a.gridOptions.$gridScope.allSelected=void 0===c?b.config.selectedItems.length==a._dashboards.length:c}function n(){a.selectedItems.splice(0),a.gridOptions.$gridScope.allSelected=!1}a.hash=h.hash(),a.selectedItems=[],a.repository=f,a.duplicateDashboards=new UI.Dialog,a.selectedProfilesDialog=[],a._dashboards=[],a.edit=!1,e.$on("dashboardsUpdated",k),a.hasUrl=function(){return!!a.url},a.navigateTo=function(b){a.edit||d.url(b)},a.$on("editablePropertyEdit",function(b,c){i(function(){a.edit=c},0,!1)}),a.hasSelection=function(){return 0!==a.selectedItems.length},a.gridOptions={selectedItems:a.selectedItems,showFilter:!1,showColumnMenu:!1,filterOptions:{filterText:""},data:"_dashboards",selectWithCheckboxOnly:!0,showSelectionCheckbox:!0,columnDefs:[{field:"title",displayName:"Dashboard",cellTemplate:'<div class="ngCellText"><span class="a" ng-click="navigateTo(\'/dashboard/id/{{row.getProperty(\'id\')}}{{hash}}\')"><editable-property class="inline-block" on-save="onDashRenamed(row.entity)" property="title" ng-model="row.entity"></editable-property></span></div>'},{field:"group",displayName:"Group"}],afterSelectionChange:m},a.onDashRenamed=function(a){f.putDashboards([a],"Renamed dashboard",function(a){k(null,a)})},a.usingGit=function(){return"git"===f.getType()},a.usingFabric=function(){return"fabric"===f.getType()},a.usingLocal=function(){return"container"===f.getType()},a.usingFabric()&&(a.container=Fabric.getCurrentContainer(g,["versionId","profileIds"]),a.gridOptions.columnDefs.add([{field:"versionId",displayName:"Version"},{field:"profileId",displayName:"Profile"},{field:"fileName",displayName:"File Name"}])),a.$on("$routeChangeSuccess",function(a,b,c){setTimeout(j,100)}),a.goBack=function(){var b=Core.trimLeading(a.url,"#");b&&d.url(b)},a.duplicateToProfiles=function(){a.hasSelection()&&a.duplicateDashboards.open()},a.doDuplicateToProfiles=function(){a.duplicateDashboards.close();var b=[];a.selectedItems.forEach(function(c){a.selectedProfilesDialog.forEach(function(a){var d=f.cloneDashboard(c);d.profileId=a.id,d.title=c.title,b.push(d)})});var c="Duplicating "+a.selectedItems.length+" dashboards to "+a.selectedProfilesDialog.length+" profiles";f.putDashboards(b,c,function(a){n(),k(null,a)})},a.addViewToDashboard=function(){var b=null;if(a.selectedItems&&0!=a.selectedItems.length){angular.forEach(a.selectedItems,function(d){var e=a.url,f=null;if(e){var g=e.indexOf("?");g&&g>0&&(f=e.substring(g+1),e=e.substring(0,g)),
e=Core.trimLeading(e,"#")}var h={};if(f){var i=f.split("&");angular.forEach(i,function(a){if(a){var b=a.split("="),c=b[0],d=b.length>1?b[1]:null;d&&(d=encodeURIComponent(d));var e=h[c];e?(angular.isArray(e)||(e=[e],h[c]=e),e.push(d)):h[c]=d}})}if(c&&c.routes){var j=c.routes[e];if(j){var k=j.templateUrl;if(k){d.widgets||(d.widgets=[]);var l=d.widgets.length+1,m={id:"w"+l,title:"",row:1,col:1,size_x:1,size_y:1,path:Core.trimLeading(e,"/"),include:k,search:h,hash:""};a.widgetTitle&&(m.title=a.widgetTitle);var n=0;d.widgets.forEach(function(a){var b=a.col+a.size_x;b>n&&(n=b)}),a.preferredSize&&(m.size_x=parseInt(a.preferredSize.size_x),m.size_y=parseInt(a.preferredSize.size_y));var o=!1,p=function(a){return a.col},q=function(a){return a.col+a.size_x-1},r=function(a){return a.row},s=function(a){return a.row+a.size_y-1},t=function(a,b){return!(p(b)>q(a)||q(b)<p(a)||r(b)>s(a)||s(b)<r(a))};for(d.widgets.isEmpty()&&(o=!0);!o;){for(m.col=1,m.col+m.size_x>n&&(d.widgets.forEach(function(a,b){m.row<=a.row&&m.row++}),o=!0);m.col+m.size_x<=n;m.col++)if(!d.widgets.any(function(a){return t(a,m)})){o=!0;break}o||(m.row=m.row+1),m.row>50&&(o=!0)}a.routeParams&&(m.routeParams=a.routeParams),d.widgets.push(m),!b&&d.id&&(b="/dashboard/id/"+d.id)}}}});f.putDashboards(a.selectedItems,"Add widget",function(c){b&&(delete d.search().href,d.path(b),Core.$apply(a))})}},a.create=function(){var a=l().length+1,b="Untitled"+a,c=f.createDashboard({title:b});f.putDashboards([c],"Created new dashboard: "+b,function(a){n(),k(null,a)})},a.duplicate=function(){var b=[],c="Duplicated dashboard(s) ";angular.forEach(a.selectedItems,function(a,c){var d=(a.title,f.cloneDashboard(a));b.push(d)}),n(),c+=b.map(function(a){return a.title}).join(","),f.putDashboards(b,c,function(a){k(null,a)})},a.deleteDashboard=function(){a.hasSelection()&&f.deleteDashboards(a.selectedItems,function(a){n(),k(null,a)})},a.gist=function(){if(a.selectedItems.length>0){var b=a.selectedItems[0].id;d.path("/dashboard/id/"+b+"/share")}},j()}])}(Dashboard||(Dashboard={}));var Dashboard;!function(a){var b=function(){function b(a,b,c){this.workspace=a,this.jolokia=b,this.localStorage=c,this.details=this.getBranchAndProfiles()}return b.prototype.getBranchAndProfiles=function(){if(Fabric.fabricCreated(this.workspace)){var a=Fabric.getCurrentContainer(this.jolokia,["id","versionId","profiles"]),b=[];return a.profiles&&(b=a.profiles.unique(),b=Fabric.filterProfiles(this.jolokia,a.versionId,b)),{branch:a.versionId,profiles:b}}return{branch:"1.0",profiles:[]}},b.prototype.putDashboards=function(b,c,d){var e=this,f=this.jolokia,g=this.details,h=b.length,i=function(){0===(h-=1)&&e.getDashboards(d)};b.forEach(function(b){var c=angular.toJson(b,!0),d=b.profileId;d||(d=g.profiles.first());var e=b.fileName;e||(e=Core.getUUID()+".dashboard"),Fabric.saveConfigFile(f,g.branch,d,e,c.encodeBase64(),function(){i()},function(c){a.log.error("Failed to store dashboard: ",b.title," due to: ",c.error," stack trace: ",c.stacktrace),i()})})},b.prototype.deleteDashboards=function(b,c){var d=this,e=this.jolokia,f=this.details,g=[],h=[];b.forEach(function(a){g.push(a.profileId),h.push(a.fileName)}),Fabric.deleteConfigFiles(e,f.branch,g,h,function(){d.getDashboards(c)},function(b){a.log.error("Failed to delete selected dashboards due to: ",b.error," stack trace: ",b.stacktrace),d.getDashboards(c)})},b.prototype.createDashboard=function(a){var b={title:"New Dashboard",group:"Fabric",versionId:this.details.branch,profileId:this.details.profiles.first(),widgets:[]};b=angular.extend(b,a);var c=Core.getUUID();return b.id=c,b.fileName=c+".dashboard",b},b.prototype.cloneDashboard=function(a){var b=Object.clone(a),c=Core.getUUID();return b.id=c,b.fileName=c+".dashboard",b.title="Copy of "+a.title,b},b.prototype.getType=function(){return"fabric"},b.prototype.isValid=function(){return Fabric.hasFabric(this.workspace)},b.prototype.getDashboards=function(b){var c=this,d=this.jolokia,e=this.details,f=[];d.request({type:"exec",mbean:Fabric.managerMBean,operation:"getConfigurationFiles",arguments:[e.branch,e.profiles,".*dashboard"]},{method:"POST",success:function(a){angular.forEach(a.value,function(a,b){angular.forEach(a,function(a,c){var d=angular.fromJson(a.decodeBase64());d.versionId=e.branch,d.profileId=b,d.fileName=c,f.push(d)})}),f.isEmpty()&&f.push(c.createDashboard({})),f=f.sort(function(a,b){var c=a.title,d=b.title;return c.localeCompare(d)}),b(f)},error:function(c){a.log.error("Failed to load dashboard data: error: ",c.error," stack trace: ",c.stacktrace),b([])}})},b.prototype.getDashboard=function(a,b){this.getDashboards(function(c){var d=c.find(function(b){return b.id===a});b(d)})},b}();a.FabricDashboardRepository=b}(Dashboard||(Dashboard={}));var Dashboard;!function(a){a._module.controller("Dashboard.ImportController",["$scope","$location","$routeParams","workspace","dashboardRepository",function(b,c,d,e,f){b.placeholder="Paste the JSON here for the dashboard configuration to import...",b.source=b.placeholder;var g={mode:{name:"javascript"}};b.codeMirrorOptions=CodeEditor.createEditorSettings(g),b.isValid=function(){return b.source&&b.source!==b.placeholder},b.importJSON=function(){var d=[];try{d=JSON.parse(b.source)}catch(a){Core.notification("error","Could not parse the JSON\n"+a),d=[]}var e=[];angular.isArray(d)?e=d:angular.isObject(d)&&e.push(d),e.length&&(angular.forEach(e,function(a,b){angular.copy(a,f.createDashboard(a))}),f.putDashboards(e,"Imported dashboard JSON",a.onOperationComplete),c.path("/dashboard/edit"))}}])}(Dashboard||(Dashboard={}));var Dashboard;!function(a){a._module.controller("Dashboard.NavBarController",["$scope","$routeParams","$rootScope","workspace","dashboardRepository","$location","$timeout",function(b,c,d,e,f,g,h){function i(c,e){a.log.debug("navbar dashboardLoaded: ",e),b._dashboards=e,null===c&&(d.$broadcast("dashboardsUpdated",e),Core.$apply(b))}function j(a){f.getDashboards(function(c){i(a,c),Core.$apply(b)})}b.hash=e.hash(),b._dashboards=[],b.edit=!1,b.activeDashboard=c.dashboardId,d.$on("loadDashboards",j),d.$on("dashboardsUpdated",i),b.navigateTo=function(a){b.edit||g.url(a)},b.$on("editablePropertyEdit",function(a,c){h(function(){b.edit=c},0,!1)}),b.dashboards=function(){return b._dashboards},b.isActive=function(a){return e.isLinkActive("#/dashboard/id/"+a.id)},b.isEditing=function(){return e.isLinkActive("#/dashboard/edit")},b.onTabRenamed=function(a){f.putDashboards([a],"Renamed dashboard",function(a){i(null,a)})}}])}(Dashboard||(Dashboard={}));var Dashboard;!function(a){var b=function(){function a(a,b,c,d){this.delegate=a,this._path=b,this._search=c,this._hash=d}return a.prototype.absUrl=function(){return this.protocol()+this.host()+":"+this.port()+this.path()+this.search()},a.prototype.hash=function(a){return void 0===a&&(a=null),a?this.delegate.hash(a).search("tab",null):this._hash},a.prototype.host=function(){return this.delegate.host()},a.prototype.path=function(a){return void 0===a&&(a=null),a?this.delegate.path(a).search("tab",null):this._path},a.prototype.port=function(){return this.delegate.port()},a.prototype.protocol=function(){return this.delegate.port()},a.prototype.replace=function(){return this},a.prototype.search=function(a){return void 0===a&&(a=null),a?this.delegate.search(a):this._search},a.prototype.url=function(a){return void 0===a&&(a=null),a?this.delegate.url(a).search("tab",null):this.absUrl()},a}();a.RectangleLocation=b}(Dashboard||(Dashboard={}));var Dashboard;!function(a){a.ShareController=a._module.controller("Dashboard.ShareController",["$scope","$location","$routeParams","workspace","dashboardRepository",function(b,c,d,e,f){function g(c){b.dashboard=a.cleanDashboardData(c),b.json={description:"hawtio dashboards",public:!0,files:{"dashboards.json":{content:JSON.stringify(b.dashboard,null,"  ")}}},b.source=JSON.stringify(b.dashboard,null,"  "),Core.$applyNowOrLater(b)}var h=d.dashboardId;f.getDashboard(h,g);var i={mode:{name:"javascript"}};b.codeMirrorOptions=CodeEditor.createEditorSettings(i)}])}(Dashboard||(Dashboard={}));var DataTable;!function(a){var b=function(){function a(a,b,c,d,e){var f=this;void 0===e&&(e={}),this.scope=a,this.$templateCache=b,this.$compile=c,this.dataTableColumns=d,this.config=e,this.ignoreColumnHash={},this.flattenColumnHash={},this.detailTemplate=null,this.openMessages=[],this.addedExpandNodes=!1,this.tableElement=null,this.sortColumns=null,this.dataTableConfig={bPaginate:!1,sDom:"Rlfrtip",bDestroy:!0,bAutoWidth:!0},this.dataTable=null,angular.forEach(e.ignoreColumns,function(a){f.ignoreColumnHash[a]=!0}),angular.forEach(e.flattenColumns,function(a){f.flattenColumnHash[a]=!0});var g=e.rowDetailTemplateId;g&&(this.detailTemplate=this.$templateCache.get(g))}return a.prototype.addData=function(a){this.dataTable.fnAddData(a)},a.prototype.populateTable=function(a){var b=this,c=this.scope;if(a){c.messages=a;var d=function(a,c){var d=a.fnGetData(c),e=$("<div>");return e.addClass("innerDetails"),b.populateDetailDiv(d,e),e},e=a;angular.isArray(a)||angular.isObject(a)&&(e=[],angular.forEach(a,function(a){return e.push(a)}));var f=this.tableElement;f||(f=$("#grid"));var g=Core.getOrCreateElements(f,["thead","tr"]),h=(Core.getOrCreateElements(f,["tbody"]),$(g).find("th"),[]);angular.forEach(this.dataTableColumns,function(a){return h.push(a)});var i=function(a,b){h.push({sDefaultContent:"",mData:null,mDataProp:a}),g&&$("<th>"+b+"</th>").appendTo(g)},j=function(a,c,d){if(!b.ignoreColumnHash[c]&&!h.any(function(a,b){return"mDataProp"===a&&b===c}))if(b.flattenColumnHash[c]){if(angular.isObject(a)){var e=d+c+".";angular.forEach(a,function(a,b){return j(a,b,e)})}}else i(d+c,Core.humanizeValue(c))};if(!this.config.disableAddColumns&&angular.isArray(e)&&e.length>0){var k=e[0];angular.isObject(k)&&angular.forEach(k,function(a,b){return j(a,b,"")})}if(h.length>1){var l=h[0];if(!this.sortColumns&&!l.mDataProp&&!l.mData){var m=[[1,"asc"]];this.sortColumns=m}}e.length&&angular.isArray(e[0]),this.dataTableConfig.aaData=e,this.dataTableConfig.aoColumns=h,this.sortColumns&&(this.dataTableConfig.aaSorting=this.sortColumns),this.dataTableConfig.oLanguage={sSearch:"Filter:"},this.dataTable?(this.dataTable.fnClearTable(!1),this.dataTable.fnAddData(e),this.dataTable.fnDraw()):this.dataTable=f.dataTable(this.dataTableConfig);var n=this;if(this.dataTable){var o=new KeyTable({table:f[0],datatable:this.dataTable});if(o.fnSetPosition(0,0),angular.isArray(a)&&a.length){var p=a[0],q=n.config.selectHandler;p&&q&&q(p)}}$(f).focus();var n=this,r=function(){var a=n.dataTable,b=this.parentNode,e=n.openMessages,f=$.inArray(b,e),g=$("i",this);if(-1===f){g.removeClass("icon-plus"),g.addClass("icon-minus");var h=d(a,b),i=$(a.fnOpen(b,h,"details"));i.css("padding","0"),setTimeout(function(){i.find(".innerDetails").slideDown(400,function(){$(b).addClass("opened"),e.push(b)})},20)}else $(b.nextSibling).find(".innerDetails").slideUp(400,function(){$(b).removeClass("opened"),g.removeClass("icon-minus"),g.addClass("icon-plus"),a.fnClose(b),e.splice(f,1)});Core.$apply(c)};this.addedExpandNodes||(this.addedExpandNodes=!0,$(f).on("click","td.control",r),o.event.action(0,null,function(a){r.call(a)})),o.event.focus(null,null,function(a){var b=n.dataTable,c=a;if(a){var d=a.nodeName;if(d){"td"===d.toLowerCase()&&(c=$(a).parents("tr")[0]);var e=b.fnGetData(c),f=n.config.selectHandler;e&&f&&f(e)}}}),$(f).find("td.control").on("click",function(a){var b=n.dataTable;if($(this).hasClass("selected"))$(this).removeClass("focus selected");else{n.config.multiSelect||b.$("td.selected").removeClass("focus selected"),$(this).addClass("focus selected");var c=$(this).parents("tr")[0],d=b.fnGetData(c),e=n.config.selectHandler;d&&e&&e(d)}})}else c.messages=[];Core.$apply(c)},a.prototype.populateDetailDiv=function(a,b){delete a[0];var c=this.scope.$new();c.row=a,c.templateDiv=b;var d=this.detailTemplate;if(!d){var e=this.config.rowDetailTemplateId;e&&(this.detailTemplate=this.$templateCache.get(e),d=this.detailTemplate)}d&&(b.html(d),this.$compile(b.contents())(c))},a}();a.TableWidget=b}(DataTable||(DataTable={}));var DataTable;!function(a){a.pluginName="datatable",a.log=Logger.get("DataTable"),a._module=angular.module(a.pluginName,["bootstrap","ngResource"]),a._module.config(["$routeProvider",function(a){a.when("/datatable/test",{templateUrl:"app/datatable/html/test.html"})}]),a._module.directive("hawtioDatatable",["$templateCache","$compile","$timeout","$filter",function(b,c,d,e){return function(f,g,h){function i(){Core.$applyNowOrLater(f)}function j(a){var b={mData:a.field,sDefaultContent:""},d=a.displayName;d&&(b.sTitle=d);var g=a.width;angular.isNumber(g)?b.sWidth=g+"px":angular.isString(g)&&!g.startsWith("*")&&(b.sWidth=g);var h=a.cellTemplate;if(h)b.fnCreatedCell=function(a,b,d,e,g){var i=t[e];i||(i=f.$new(!1),t[e]=i);var j=d;i.row={entity:j,getProperty:function(a){return j[a]}};var k=$(a);k.html(h);var l=k.contents();l.removeClass("ngCellText"),c(l)(i)};else{var i=a.cellFilter,j=a.render;if(i&&!j){var k=e(i);k&&(j=function(a,b,c){return k(a)})}j&&(b.mRender=j)}return b}function k(){angular.forEach(t,function(a){a.$destroy()}),t=[]}function l(a){a&&w&&(w.splice(0,w.length),w.push(a),Core.$apply(f))}function m(d){if(o=d){if(w=o.selectedItems,u=o.rowDetailTemplate,v=o.rowDetailTemplateId,null===q){var e={selectHandler:l,disableAddColumns:!0,rowDetailTemplateId:v,ignoreColumns:o.ignoreColumns,flattenColumns:o.flattenColumns},h=$(g),m=h.children("table");m.length||($("<table class='table table-bordered table-condensed'></table>").appendTo(h),m=h.children("table")),m.removeClass("table-striped"),m.addClass("dataTable");var r=Core.getOrCreateElements(m,["thead","tr"]);k();var t=[],x=1,y=u||v;if(y){t.push({mDataProp:null,sClass:"control center",sWidth:"30px",sDefaultContent:'<i class="icon-plus"></i>'});var z=r.children("th");z.length<x++&&$("<th></th>").appendTo(r)}var A=o.columnDefs;angular.isString(A)&&(A=f[A]),angular.forEach(A,function(a){if(z=r.children("th"),z.length<x++){var b=a.displayName||"";$("<th>"+b+"</th>").appendTo(r)}t.push(j(a))}),q=new a.TableWidget(f,b,c,t,e),q.tableElement=m;var B=o.sortInfo;if(B&&A){var C=[],D=B.field;if(D){var E=A.findIndex({field:D});if(E>=0){y&&(E+=1);var F=B.direction||"asc";F=F.toLowerCase(),C.push([E,F])}}C.length&&(q.sortColumns=C)}t.every(function(a){return a.sWidth})&&(q.dataTableConfig.bAutoWidth=!1);var G=null,H=o.filterOptions;H&&(G=H.filterText),(G||angular.isDefined(o.showFilter)&&!o.showFilter)&&(q.dataTableConfig.sDom="Rlrtip"),G&&f.$watch(G,function(a){var b=q.dataTable;b&&b.fnFilter(a)}),angular.isDefined(o.displayFooter)&&!o.displayFooter&&q.dataTableConfig.sDom&&(q.dataTableConfig.sDom=q.dataTableConfig.sDom.replace("i",""))}if(!p&&(p=o.data)){var I=function(a){(s||a&&(!angular.isArray(a)||a.length))&&(s=!0,k(),q.populateTable(a),n())};f.$watch(p,I),f.$on("hawtio.datatable."+p,function(a){var b=Core.pathGet(f,p);I(b)})}}i()}function n(){r=d(function(){i()},300)}var o=null,p=null,q=null,r=null,s=!1,t=[],u=null,v=null,w=null;f.$watch(h.hawtioDatatable,m),g.bind("$destroy",function(){k(),d.cancel(r)}),n()}}]),hawtioPluginLoader.addModule(a.pluginName)}(DataTable||(DataTable={}));var FilterHelpers;!function(a){function b(a,b,d,e){void 0===d&&(d=-1),void 0===e&&(e=!0);var f=b.split(" "),g=f.filter(function(b){return c(a,b,d)});return e?g.length===f.length:g.length>0}function c(a,b,d,e){if(void 0===d&&(d=-1),void 0===e&&(e=0),d>0&&e>=d||e>50)return!1;var f=b.toLowerCase(),g=!1;return angular.isString(a)?g=a.toLowerCase().has(f):angular.isNumber(a)?g=(""+a).toLowerCase().has(f):angular.isArray(a)?g=a.some(function(a){return c(a,f,d,e+1)}):angular.isObject(a)&&(g=c(Object.extended(a).values(),f,d,e)),g}a.log=Logger.get("FilterHelpers"),a.search=b,a.searchObject=c}(FilterHelpers||(FilterHelpers={}));var DataTable;!function(a){function b(a,b,c){var d=c,e=!1;return angular.forEach(b,function(b){var c=a[b];!e&&angular.isDefined(c)&&(d=c,e=!0)}),d}var c=Core.isBlank,d=function(){function d(a){var b=this;this.$compile=a,this.restrict="A",this.scope={config:"=hawtioSimpleTable",target:"@",showFiles:"@"},this.link=function(a,c,d){return b.doLink(a,c,d)}}return d.prototype.doLink=function(d,e,f){function g(){var a=j.selectedItems;if(a||(a=[],j.selectedItems=a),angular.isString(a)){var b=a;a=Core.pathGet(m,b),a||(a=[],m[b]=a)}return a}function h(){var a=d.config.multiSelect;return angular.isUndefined(a)&&(a=!0),a}var i=function(a,b){return a.id||a._id||a.name||b},j=d.config,k=j.data||"data",l=j.primaryKeyFn||i;d.rows=[];var m=d.$parent||d,n=function(b){var c=Core.pathGet(m,k);if(c&&!angular.isArray(c)&&(c=[c],Core.pathSet(m,k,c)),!("sortInfo"in j)&&"columnDefs"in j){var e,f=j.columnDefs.first().defaultSort;e=angular.isUndefined(f)||!0===f?j.columnDefs.first().field:j.columnDefs.slice(1).first().field,j.sortInfo={sortBy:e,ascending:!0}}var g=d.config.sortInfo;for(var h in c){var i=c[h];for(var n in i){null===i[n]&&(c[h][n]="")}}var o=-1;d.rows=(c||[]).sortBy(g.sortBy,!g.ascending).map(function(a){return o++,{entity:a,index:o,getProperty:function(b){return a[b]}}}),Core.pathSet(m,["hawtioSimpleTable",k,"rows"],d.rows);var p=[];d.rows.forEach(function(b,c){var d=l(b.entity,b.index);j.selectedItems.some(function(a){var b=l(a,a.index);return angular.equals(d,b)})&&(b.entity.index=b.index,p.push(b.entity),a.log.debug("Data changed so keep selecting row at index "+b.index))}),j.selectedItems=p};m.$watch(k,n),m.$on("hawtio.datatable."+k,n),d.toggleAllSelections=function(){var a=d.config.allRowsSelected,b=a,c=g();c.splice(0,c.length),angular.forEach(d.rows,function(d){d.selected=b,a&&c.push(d.entity)})},d.toggleRowSelection=function(a){if(a){var b=g();h()||(b.splice(0,b.length),angular.forEach(d.rows,function(b){b!==a&&(b.selected=!1)}));var c=a.entity;if(c){var e=b.indexOf(c);a.selected?e<0&&b.push(c):(d.config.allRowsSelected=!1,e>=0&&b.splice(e,1))}}},d.sortBy=function(a){d.config.sortInfo.sortBy===a?d.config.sortInfo.ascending=!d.config.sortInfo.ascending:(d.config.sortInfo.sortBy=a,d.config.sortInfo.ascending=!0),d.$emit("hawtio.datatable."+k)},d.getClass=function(a){return"sortInfo"in d.config&&d.config.sortInfo.sortBy===a?d.config.sortInfo.ascending?"asc":"desc":""},d.showRow=function(a){var b=Core.pathGet(d,["config","filterOptions","filterText"]);if(Core.isBlank(b))return!0;var c=null;try{c=a.entity.title}catch(a){}return c||(c=a.entity),FilterHelpers.search(c,b)},d.isSelected=function(a){return a&&j.selectedItems.some(function(b){var c=l(b,b.index),d=l(a.entity,a.index);return angular.equals(c,d)})},d.onRowClicked=function(a){var b=d.config.gridKey;if(b){var c=d.config.onClickRowHandlers[b];c&&c(a)}},d.onRowSelected=function(b){var c=j.selectedItems.indexOf(b.entity);c>=0?(a.log.debug("De-selecting row at index "+b.index),j.selectedItems.splice(c,1)):(j.multiSelect||(j.selectedItems.length=0),a.log.debug("Selecting row at index "+b.index),b.entity.index=b.index,j.selectedItems.push(b.entity))};var o=e;o.empty();var p,q=b(j,["showSelectionCheckbox","displaySelectionCheckbox"],!0),r=b(j,["enableRowClickSelection"],!1);p=r?"ng-mousedown='onRowSelected(row)' ":"";var s="<thead><tr>",t="<tbody><tr ng-repeat='row in rows track by $index' ng-show='showRow(row)' ng-click='onRowClicked(row)'"+p+"ng-class=\"{'selected': isSelected(row)}\" >",u=0;if(q){var v=h()?"<input type='checkbox' ng-show='rows.length' ng-model='config.allRowsSelected' ng-change='toggleAllSelections()'>":"";s+="\n<th class='simple-table-checkbox'>"+v+"</th>",t+="\n<td class='simple-table-checkbox'><input type='checkbox' ng-model='row.selected' ng-change='toggleRowSelection(row)'></td>"}angular.forEach(j.columnDefs,function(a){var b=a.field,d=a.cellTemplate||'<div class="ngCellText" title="{{row.entity.'+b+'}}">{{row.entity.'+b+"}}</div>",e=a.sortable;s+="\n<th class='clickable no-fade table-header'",(c(e)||e)&&(s+="ng-click=\"sortBy('"+b+"')\""),s+="ng-class=\"getClass('"+b+"')\">{{config.columnDefs["+u+"].displayName}}<span class='indicator'></span></th>",t+="\n<td>"+d+"</td>",u+=1});var w=s+"\n</tr></thead>\n"+t+"\n</tr></tbody>",x=this.$compile(w)(d);o.html(x)},d}();a.SimpleDataTable=d,a._module.directive("hawtioSimpleTable",["$compile",function(b){return new a.SimpleDataTable(b)}])}(DataTable||(DataTable={}));var Diagnostics;!function(a){function b(a,b,e){a.isActive=function(a){var c=Core.trimLeading(a,"#");return b.path()===c},a.isValid=function(a){return a&&a.isValid(e)},a.breadcrumbs=[{content:'<i class="icon-plane"></i> Flight Recorder',title:"Make flight recordings",isValid:function(a){return d(a,"jfrCheck")},href:"#/diagnostics/jfr"},{content:'<i class="icon-hdd"></i> Heap Use',title:"See heap use",isValid:function(a){return d(a,"gcClassHistogram")},href:"#/diagnostics/heap"},{content:'<i class="icon-gear"></i> JVM Flags',title:"JVM Flags",isValid:function(a){return c(a)},href:"#/diagnostics/flags"}]}function c(a){return a.treeContainsDomainAndProperties("com.sun.management",{type:"HotSpotDiagnostic"})}function d(a,b){var c=a.findMBeanWithProperties("com.sun.management",{type:"DiagnosticCommand"});return c&&c.mbean&&c.mbean.op&&c.mbean.op[b]}function e(a){return d(a,"jfrCheck")?"/jfr":d(a,"gcClassHistogram")?"/heap":c(a)?"/flags":""}function f(a){var b=/pid:(\d+)/g,c=b.exec(a);return c&&c[1]?c[1]:null}a.log=Logger.get("Diagnostics"),a.connectControllerKey="jvmConnectSettings",a.connectionSettingsKey=Core.connectionSettingsKey,a.logoPath="img/icons/jvm/",a.configureScope=b,a.hasHotspotDiagnostic=c,a.hasDiagnosticFunction=d,a.initialTab=e,a.findMyPid=f}(Diagnostics||(Diagnostics={}));var Diagnostics;!function(a){a.rootPath="app/diagnostics",a.templatePath=a.rootPath+"/html/",a.pluginName="diagnostics",a._module=angular.module(a.pluginName,["bootstrap","ngResource","datatable","hawtioCore","hawtio-forms","ui"]),a._module.config(["$routeProvider",function(b){b.when("/diagnostics/jfr",{templateUrl:a.templatePath+"jfr.html"}).when("/diagnostics/heap",{templateUrl:a.templatePath+"heap.html"}).when("/diagnostics/flags",{templateUrl:a.templatePath+"flags.html"})}]),a._module.constant("mbeanName","com.sun.management:type=DiagnosticCommand"),a._module.run(["$location","workspace","viewRegistry","layoutFull","helpRegistry","preferencesRegistry",function(b,c,d,e,f,g){d[a.pluginName]=a.templatePath+"layoutDiagnostics.html",f.addUserDoc("diagnostics","app/diagnostics/doc/help.md"),Core.addCSS(a.rootPath+"/css/diagnostics.css"),c.topLevelTabs.push({id:"diagnostics",content:"Diagnostics",title:"JVM Diagnostics",isValid:function(b){return b.treeContainsDomainAndProperties("com.sun.management")&&a.initialTab(b)},href:function(){return"#/diagnostics"+a.initialTab(c)},isActive:function(a){return a.isLinkActive("diagnostics")}})}]),hawtioPluginLoader.addModule(a.pluginName)}(Diagnostics||(Diagnostics={}));var Diagnostics;!function(a){a._module.controller("Diagnostics.FlagsController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(c){for(var d=0;d<b.flags.length;d++)b.flags[d].deregisterWatch();b.flags=c.value.DiagnosticOptions;for(var d=0;d<b.flags.length;d++){var h=b.flags[d];h.value=g(h.value),h.writeable?h.dataType=typeof h.value:h.dataType="readonly",h.deregisterWatch=b.$watch("flags["+d+"]",function(b,c){b.value!=c.value&&e.request([{type:"exec",mbean:"com.sun.management:type=HotSpotDiagnostic",operation:"setVMOption(java.lang.String,java.lang.String)",arguments:[b.name,b.value]},i],onSuccess(function(c){"read"===c.request.type?f(c):a.log.info("Set VM option "+b.name+"="+b.value)}))},!0)}Core.$apply(b)}function g(a){if("string"==typeof a){if(a.match(/true/))return!0;if(a.match(/false/))return!1;if(a.match(/\d+/))return Number(a)}return a}function h(){return{selectedItems:[],data:"flags",showFilter:!0,filterOptions:{filterText:""},showSelectionCheckbox:!1,enableRowClickSelection:!0,multiSelect:!1,primaryKeyFn:function(a,b){return a.name},columnDefs:[{field:"name",displayName:"VM Flag",resizable:!0},{field:"origin",displayName:"Origin",resizable:!0},{field:"value",displayName:"Value",resizable:!0,cellTemplate:'<div ng-switch on="row.entity.dataType"><span ng-switch-when="readonly">{{row.entity.value}}</span><input ng-switch-when="boolean" type="checkbox" ng-model="row.entity.value"></input><input ng-switch-when="string" type="text" ng-model="row.entity.value"></input><input ng-switch-when="number" type="number" ng-model="row.entity.value"></input></div>'}]}}b.flags=[],b.tableDef=h();var i={type:"read",mbean:"com.sun.management:type=HotSpotDiagnostic",arguments:[]};Core.register(e,b,[i],onSuccess(f))}])}(Diagnostics||(Diagnostics={}));var Diagnostics;!function(a){a._module.controller("Diagnostics.HeapController",["$scope","$window","$location","workspace","jolokia",function(b,c,d,e,f){function g(a){b.classHistogram=a.value;for(var c=a.value.split("\n"),d=[],e={},f={},g=0;g<c.length;g++){var i=c[g].match(/\s*(\d+):\s*(\d+)\s*(\d+)\s*(\S+)\s*/);if(i&&i.length>=5){var j=k(i[4]),m=i[2],n=i[3],o=l(j),p={num:i[1],count:m,bytes:n,name:j,deltaCount:h(b.instanceCounts,j,m),deltaBytes:h(b.byteCounts,j,n),sourceReference:o};d.push(p),e[j]=m,f[j]=n}}b.classes=d,b.instanceCounts=e,b.byteCounts=f,b.loading=!1,b.lastLoaded=Date.now(),Core.$apply(b)}function h(a,b,c){if(!a)return"";var d=a[b];return d?d-c:c}function i(a){return'<div class="rightAlignedNumber ngCellText" title="{{row.entity.'+a+'}}">{{row.entity.'+a+"}}</div>"}function j(){return{selectedItems:[],data:"classes",showFilter:!0,filterOptions:{filterText:""},showSelectionCheckbox:!1,enableRowClickSelection:!0,multiSelect:!1,primaryKeyFn:function(a,b){return a.num},columnDefs:[{field:"num",displayName:"#"},{field:"count",displayName:"Instances",cellTemplate:i("count")},{field:"deltaCount",displayName:"<delta",cellTemplate:i("deltaCount")},{field:"bytes",displayName:"Bytes",cellTemplate:i("bytes")},{field:"deltaBytes",displayName:"<delta",cellTemplate:i("deltaBytes")},{field:"name",displayName:"Class name",cellTemplate:'<span ng-switch on="!!row.entity.sourceReference"><hawtio-open-ide ng-switch-when="true" file-name="{{row.entity.sourceReference.fileName}}" class-name="{{row.entity.sourceReference.className}}"></hawtio-open-ide> {{row.entity.name}}</span>'}]}}function k(a){if(1==a.length)switch(a.charAt(0)){case"I":return"int";case"S":return"short";case"C":return"char";case"Z":return"boolean";case"D":return"double";case"F":return"float";case"J":return"long";case"B":return"byte"}else switch(a.charAt(0)){case"[":return k(a.substring(1))+"[]";case"L":if(a.endsWith(";"))return k(a.substring(1,a.indexOf(";")));default:return a}}function l(a){var b=a;b.indexOf("[")>-1&&(b=b.substring(0,a.indexOf("[")));var c=b.lastIndexOf(".");if(c<0)return null;var d=b.substring(c+1),e=d.indexOf("$");return e>-1&&(d=d.substring(0,e)),{className:b,fileName:d+".java",line:null,column:null}}b.classHistogram="",b.status="",b.tableDef=j(),b.classes=[{num:null,count:null,bytes:null,deltaBytes:null,deltaCount:null,name:"Click reload to read class histogram",sourceReference:null}],b.loading=!1,b.lastLoaded="n/a",b.pid=a.findMyPid(b.pageTitle),b.loadClassStats=function(){b.loading=!0,Core.$apply(b),f.request({type:"exec",mbean:"com.sun.management:type=DiagnosticCommand",operation:"gcClassHistogram([Ljava.lang.String;)",arguments:[""]},{success:g,error:function(a){b.status="Could not get class histogram : "+a.error,b.loading=!1,Core.$apply(b)}})}}])}(Diagnostics||(Diagnostics={}));var Forms;!function(a){function b(){return{type:void 0}}function c(){return{}}function d(){return{properties:{}}}function e(){return{rowSchema:{},rows:[]}}a.createFormElement=b,a.createFormTabs=c,a.createFormConfiguration=d,a.createFormGridConfiguration=e}(Forms||(Forms={}));var Diagnostics;!function(a){function b(a){return a.match(/Dumped recording "(.+)",(.+) written to:\r?\n\r?\n(.+)/)}function c(a){var b=[];return a.name&&a.name.length>0&&b.push('name="'+a.name+'"'),a.filename&&a.filename.length>0&&b.push('filename="'+a.filename+'"'),b.push("dumponexit="+a.dumpOnExit),"unlimited"!=a.limitType&&b.push(a.limitType+"="+a.limitValue),b}function d(a){return['filename="'+a.filename+'"','name="'+a.name+'"']}a.JfrController=a._module.controller("Diagnostics.JfrController",["$scope","$location","workspace","jolokia",function(e,f,g,h){function i(a){var b=a.value;if(e.jfrEnabled=-1==b.indexOf("not enabled"),e.isRunning=b.indexOf("(running)")>-1,e.isRecording=e.isRunning||b.indexOf("(stopped)")>-1,(b.indexOf("Use JFR.")>-1||b.indexOf("Use VM.")>-1)&&e.pid&&(b=b.replace("Use ","Use command line: jcmd "+e.pid+" ")),e.jfrStatus=b,e.isRecording){var c=/recording=(\d+) name="(.+?)"/g;e.isRunning&&(c=/recording=(\d+) name="(.+?)".+?\(running\)/g);var d=c.exec(b);e.jfrSettings.recordingNumber=d[1],e.jfrSettings.name=d[2];var f=b.match(/filename="(.+)"/);f&&f[1]?e.jfrSettings.filename=f[1]:e.jfrSettings.filename="recording"+d[1]+".jfr"}Core.$apply(e)}function j(a,b){for(var c=0;c<b.length;c++)if(b[c].file===a.file)return void(b[c]=a);b.add(a)}function k(arguments){for(var a="",b=0;b<arguments.length;b++)!1,a+=arguments[b];return a}function l(b,c,arguments,d){a.log.debug(Date.now()+" Invoking operation "+b+" with arguments"+arguments+" settings: "+JSON.stringify(e.jfrSettings)),e.jcmd="jcmd "+e.pid+" "+c+" "+k(arguments),h.request([{type:"exec",operation:b,mbean:"com.sun.management:type=DiagnosticCommand",arguments:arguments},{type:"exec",operation:"jfrCheck([Ljava.lang.String;)",mbean:"com.sun.management:type=DiagnosticCommand",arguments:[""]}],onSuccess(function(c){a.log.debug("Diagnostic Operation "+b+" was successful"+c.value),c.request.operation.indexOf("jfrCheck")>-1?i(c):(d&&d(c.value),Core.$apply(e))},{error:function(c){a.log.warn("Diagnostic Operation "+b+" failed",c)}}))}e.forms={},e.pid=a.findMyPid(e.pageTitle),e.recordings=[],e.settingsVisible=!1,e.jfrSettings={limitType:"unlimited",limitValue:"",compress:!1,name:"",dumpOnExit:!0,recordingNumber:"",filename:""},e.formConfig={properties:{name:{type:"java.lang.String",tooltip:"Name for this connection","input-attributes":{placeholder:"Recording name (optional)..."}},limitType:{type:"java.lang.String",tooltip:"Duration if any",enum:["unlimited","duration","maxsize"]},limitValue:{type:"java.lang.String",tooltip:"Limit value. duration: [val]s/m/h, maxsize: [val]kB/MB/GB",required:!1,"input-attributes":{"ng-show":"jfrSettings.limitType != 'unlimited'"}},dumpOnExit:{type:"java.lang.Boolean",tooltip:"Automatically dump recording on VM exit"},filename:{type:"java.lang.String",tooltip:"Filename","input-attributes":{placeholder:"Specify file name *.jfr (optional)..."}}}},e.unlock=function(){l("vmUnlockCommercialFeatures()","VM.unlock_commercial_features",[],null)},e.startRecording=function(){e.isRecording&&(e.jfrSettings.name=null,e.jfrSettings.filename=null),l("jfrStart([Ljava.lang.String;)","JFR.start",[c(e.jfrSettings)],null)},e.dumpRecording=function(){l("jfrDump([Ljava.lang.String;)","JFR.dump",[d(e.jfrSettings)],function(c){var d=b(c);if(a.log.debug("response: "+c+" split: "+d+"split2: "+d),d){var f={number:d[1],size:d[2],file:d[3],time:Date.now()};a.log.debug("data: "+f),j(f,e.recordings)}})},e.stopRecording=function(){var a=e.jfrSettings.name;e.jfrSettings.filename="",e.jfrSettings.name="",l("jfrStop([Ljava.lang.String;)","JFR.stop",['name="'+a+'"'],null)},e.toggleSettingsVisible=function(){e.settingsVisible=!e.settingsVisible,Core.$apply(e)},Core.register(h,e,[{type:"exec",operation:"jfrCheck([Ljava.lang.String;)",mbean:"com.sun.management:type=DiagnosticCommand",arguments:[""]}],onSuccess(i))}])}(Diagnostics||(Diagnostics={}));var Diagnostics;!function(a){a._module.controller("Diagnostics.NavController",["$scope","$location","workspace",function(b,c,d){a.configureScope(b,c,d)}])}(Diagnostics||(Diagnostics={}));var Dozer;!function(a){function b(b,c){var d=b;angular.isString(b)&&(d=$.parseXML(b)),console.log("Has Dozer XML document: "+d);var e=new a.Mappings(d),f=d.documentElement;return o(e,f),$(f).children("mapping").each(function(a,b){var c=l(b);e.mappings.push(c)}),e}function c(b){
var c=b.doc.documentElement.cloneNode(!1);return q(b.mappings,c,null,1),a.addTextNode(c,"\n"),'<?xml version="1.0" encoding="UTF-8"?>\n'+Core.xmlNodeToString(c)}function d(b,c,d){e(b,c.class_a.value,null,function(b){var e=[];angular.forEach(b,function(b){console.log("got property "+JSON.stringify(b,null,"  "));var d=b.name;d&&(c.hasFromField(d)||e.push(new a.UnmappedField(d,b)))}),d(e)})}function e(a,b,c,d){void 0===c&&(c=null),void 0===d&&(d=null);var e=g(a);return e?c?a.jolokia.execute(e,"findProperties",b,c,onSuccess(d)):a.jolokia.execute(e,"getProperties",b,onSuccess(d)):d?d([]):[]}function f(a,b,c,d){void 0===c&&(c=20),void 0===d&&(d=null);var e=g(a);return e?a.jolokia.execute(e,"findClassNames",b,c,onSuccess(d)):d?d([]):[]}function g(b){return a.introspectorMBean}function h(a,b){return b.mappings=[],angular.forEach(a.childList,function(a){var c=Core.pathGet(a,["data","entity"]);c&&b.mappings.push(c)}),b}function i(b){var c="mappings",d=new Folder(c);return d.addClass="net-sourceforge-dozer-mappings",d.domain=a.jmxDomain,d.typeName="mappings",d.entity=b,d.key=Core.toSafeDomID(c),angular.forEach(b.mappings,function(a){var b=j(a,d);d.children.push(b)}),d}function j(b,c){var d=b.name(),e=new Folder(d);return e.addClass="net-sourceforge-dozer-mapping",e.typeName="mapping",e.domain=a.jmxDomain,e.key=(c?c.key+"_":"")+Core.toSafeDomID(d),e.parent=c,e.entity=b,e.icon=Core.url("/app/dozer/img/class.gif"),angular.forEach(b.fields,function(a){k(a,e)}),e}function k(b,c){var d=b.name(),e=new Folder(d);return e.addClass="net-sourceforge-dozer-field",e.typeName="field",e.domain=a.jmxDomain,e.key=c.key+"_"+Core.toSafeDomID(d),e.parent=c,e.entity=b,e.icon=Core.url("/app/dozer/img/attribute.gif"),c.children.push(e),e}function l(b){var c=new a.Mapping,d=$(b);return c.class_a=n(d.children("class-a")),c.class_b=n(d.children("class-b")),d.children("field").each(function(a,b){var d=m(b);c.fields.push(d)}),o(c,b),c}function m(b){if(b){var c=$(b),d=c.children("a").text(),e=c.children("b").text(),f=new a.Field(new a.FieldDefinition(d),new a.FieldDefinition(e));return o(f,b),f}return new a.Field(new a.FieldDefinition(""),new a.FieldDefinition(""))}function n(b){if(b&&b[0]){var c=b[0],d=c.textContent;if(d){var e=new a.MappingClass(d);return o(e,c),e}}return new a.MappingClass("")}function o(a,b){for(var c=b.attributes,d=0;d<c.length;d++){var e=c,f=e.item(d);if(f){var g=f.localName,h=f.value;if(g&&!g.startsWith("xmlns")){a[Forms.safeIdentifier(g)]=h}}}}function p(a,b,c){angular.forEach(a,function(a,d){if(c.any(d));else if(a){var e=a.toString(),f=d.replace(/_/g,"-");b.setAttribute(f,e)}})}function q(b,c,d,e){void 0===d&&(d=null),void 0===e&&(e=0);var f=null;if(angular.isArray(b))angular.forEach(b,function(a){f=q(a,c,d,e)});else if(b){if(!d){var g=Core.pathGet(b,["constructor","name"]);g?(d=a.elementNameMappings[g])||console.log("WARNING: could not map class name "+g+" to an XML element name"):console.log("WARNING: no class name for value "+b)}if(d){if(e){var h=t(e);a.addTextNode(c,h)}var i=c.ownerDocument||document,j=i.createElement(d),k=b.saveToElement;if(k?k.apply(b,[j]):angular.forEach(b,function(a,b){console.log("has key "+b+" value "+a)}),$(j).children().length){var h=t(e);a.addTextNode(j,h)}c.appendChild(j),f=j}}return f}function r(a){var b=angular.isObject(a)?a.value:null;return!b&&angular.isString(a)&&(b=a),b||"?"}function s(a,b){if(b){var c=a.ownerDocument||document,d=c.createTextNode(b);a.appendChild(d)}}function t(a){for(var b="\n",c=0;c<a;c++)b+="  ";return b}a.jmxDomain="net.sourceforge.dozer",a.introspectorMBean="hawtio:type=Introspector",a.excludedPackages=["java.lang","int","double","long"],a.elementNameMappings={Mapping:"mapping",MappingClass:"class",Field:"field"},a.log=Logger.get("Dozer"),a.loadDozerModel=b,a.saveToXmlText=c,a.findUnmappedFields=d,a.findProperties=e,a.findClassNames=f,a.getIntrospectorMBean=g,a.loadModelFromTree=h,a.createDozerTree=i,a.createMappingFolder=j,a.addMappingFieldFolder=k,a.appendAttributes=p,a.appendElement=q,a.nameOf=r,a.addTextNode=s}(Dozer||(Dozer={}));var Dozer;!function(a){var b=function(){function a(a,b){void 0===b&&(b=[]),this.doc=a,this.mappings=b}return a}();a.Mappings=b;var c=function(){function b(){this.fields=[],this.map_id=Core.getUUID(),this.class_a=new d(""),this.class_b=new d("")}return b.prototype.name=function(){return a.nameOf(this.class_a)+" -> "+a.nameOf(this.class_b)},b.prototype.hasFromField=function(a){return this.fields.find(function(b){return a===b.a.value})},b.prototype.hasToField=function(a){return this.fields.find(function(b){return a===b.b.value})},b.prototype.saveToElement=function(b){a.appendElement(this.class_a,b,"class-a",2),a.appendElement(this.class_b,b,"class-b",2),a.appendElement(this.fields,b,"field",2),a.appendAttributes(this,b,["class_a","class_b","fields"])},b}();a.Mapping=c;var d=function(){function b(a){this.value=a}return b.prototype.saveToElement=function(b){a.addTextNode(b,this.value),a.appendAttributes(this,b,["value","properties","error"])},b}();a.MappingClass=d;var e=function(){function b(a,b){this.a=a,this.b=b}return b.prototype.name=function(){return a.nameOf(this.a)+" -> "+a.nameOf(this.b)},b.prototype.saveToElement=function(b){a.appendElement(this.a,b,"a",3),a.appendElement(this.b,b,"b",3),a.appendAttributes(this,b,["a","b"])},b}();a.Field=e;var f=function(){function b(a){this.value=a}return b.prototype.saveToElement=function(b){a.addTextNode(b,this.value),a.appendAttributes(this,b,["value","properties","error"])},b}();a.FieldDefinition=f;var g=function(){function a(a,b,c){void 0===c&&(c=null),this.fromField=a,this.property=b,this.toField=c}return a}();a.UnmappedField=g}(Dozer||(Dozer={}));var Dozer;!function(a){function b(){function a(a){return'<input type="text" ng-model="dozerEntity.'+a+'.value" typeahead="title for title in classNames($viewValue) | filter:$viewValue" typeahead-editable="true"  title="The Java class name"/>'}io_hawt_dozer_schema_Field.tabs={Fields:["a.value","b.value"],"From Field":["a\\..*"],"To Field":["b\\..*"],"Field Configuration":["*"]},io_hawt_dozer_schema_Mapping.tabs={Classes:["class-a.value","class-b.value"],"From Class":["class-a\\..*"],"To Class":["class-b\\..*"],"Class Configuration":["*"]},io_hawt_dozer_schema_Mapping.properties.fieldOrFieldExclude.hidden=!0,Core.pathSet(io_hawt_dozer_schema_Field,["properties","a","properties","value","label"],"From Field"),Core.pathSet(io_hawt_dozer_schema_Field,["properties","b","properties","value","label"],"To Field"),Core.pathSet(io_hawt_dozer_schema_Mapping,["properties","class-a","properties","value","label"],"From Class"),Core.pathSet(io_hawt_dozer_schema_Mapping,["properties","class-b","properties","value","label"],"To Class"),Core.pathSet(io_hawt_dozer_schema_Field,["properties","a","ignorePrefixInLabel"],!0),Core.pathSet(io_hawt_dozer_schema_Field,["properties","b","ignorePrefixInLabel"],!0),Core.pathSet(io_hawt_dozer_schema_Mapping,["properties","class-a","ignorePrefixInLabel"],!0),Core.pathSet(io_hawt_dozer_schema_Mapping,["properties","class-b","ignorePrefixInLabel"],!0),Core.pathSet(io_hawt_dozer_schema_Mapping,["properties","class-a","properties","value","formTemplate"],a("class_a")),Core.pathSet(io_hawt_dozer_schema_Mapping,["properties","class-b","properties","value","formTemplate"],a("class_b")),Core.pathSet(io_hawt_dozer_schema_Field,["properties","a","properties","value","formTemplate"],'<input type="text" ng-model="dozerEntity.a.value" typeahead="title for title in fromFieldNames($viewValue) | filter:$viewValue" typeahead-editable="true"  title="The Java class name"/>'),Core.pathSet(io_hawt_dozer_schema_Field,["properties","b","properties","value","formTemplate"],'<input type="text" ng-model="dozerEntity.b.value" typeahead="title for title in toFieldNames($viewValue) | filter:$viewValue" typeahead-editable="true"  title="The Java class name"/>')}a.schemaConfigure=b}(Dozer||(Dozer={}));var ES;!function(a){a.config={elasticsearch:"http://"+window.location.hostname+":9200",indice:"twitter",doctype:"tweet",query:"*"}}(ES||(ES={}));var ES;!function(a){function b(a){return $.isEmptyObject(a)}function c(c,d,e,f){function g(){console.log("ES Server = "+c.esServer),console.log("Indice = "+c.indice),console.log("Type = "+c.docType),console.log("Query = "+c.queryTerm),b(c.indice)||(o=c.indice),b(c.esServer)||(k=c.esServer),b(c.docType)||(p=c.docType),b(c.queryTerm)||(l=c.queryTerm);var a=f(c.esServer);j=a.Request().indices(o).types(p),console.log("Request to call ElasticSearch defined")}function h(a){return f(a)}var i,j,k=c.esServer=a.config.elasticsearch,l=c.queryTerm=a.config.query,m=c.facetField="tags",n=c.facetType="terms",o=c.indice=a.config.indice,p=c.docType=a.config.doctype;c.log=e,c.search=function(){b(i)&&(console.log("Init EJS server"),i=h(k)),g(),j=j.query(i.QueryStringQuery(l));var a=j.doSearch();console.log("Do Elastic Search"),a.then(function(a){if(c.queryTerm="",void 0!==a.error)return void console.error("ES error : "+a.error);console.log(a.hits.total+" : results retrieved"),c.results=a})},c.facetTermsSearch=function(){b(i)&&(console.log("Init EJS server"),i=h(k)),g(),b(c.facetField)||(m=c.facetField),b(c.facetType)||(n=c.facetType),j=j.query(i.QueryStringQuery(l)).facet(i.TermsFacet("termFacet").field(m).size(50));var a=j.doSearch();console.log("Do Elastic Search"),a.then(function(a){if(c.queryTerm="",void 0!==a.error)return void console.error("ES error : "+a.error);console.log(a.hits.total+" : results retrieved"),c.results=a})},c.facetDateHistogramSearch=function(){b(i)&&(console.log("Init EJS server"),i=h(k)),g(),b(c.facetField)||(m=c.facetField),b(c.facetType)||(n=c.facetType),j=j.query(i.QueryStringQuery(l)).facet(i.DateHistogramFacet("dateHistoFacet").field(m).interval("minute"));var a=j.doSearch();console.log("Do Elastic Search"),a.then(function(a){if(c.queryTerm="",void 0!==a.error)return void console.error("ES error : "+a.error);console.log(a.hits.total+" : results retrieved"),c.results=a})},c.indexSampleDocs=function(){var a="http://"+location.host;b(i)&&(console.log("EJS object is not defined - create it - setupEsRequest"),i=h(k));var c=[];$.getJSON(a+"/hawtio/app/elasticsearch/js/data.json",function(a){$.each(a,function(a,b){console.log("Field : "+b),c[a]=i.Document(o,p,a).source(b),c[a].refresh(!0).doIndex()})})},c.parse_error=function(a){var b=a.match("nested: (.*?);");return null==b?a:b[1]}}a.isEmptyObject=b,a.SearchCtrl=c}(ES||(ES={}));var ES;!function(a){var b="elasticsearch";a._module=angular.module(b,["bootstrap","ngResource","elasticjs.service","dangle"]),a._module.config(["$routeProvider",function(a){a.when("/elasticsearch",{templateUrl:"app/elasticsearch/html/es.html"})}]),a._module.run(["$location","workspace","viewRegistry","helpRegistry",function(a,c,d,e){d[b]="app/elasticsearch/html/es.html",e.addUserDoc(b,"app/elasticsearch/doc/help.md",function(){return!1})}])}(ES||(ES={}));var PluginHelpers;!function(a){function b(a,b){return function(c,d){return a.controller(b+"."+c,d)}}function c(a){return function(b,c){return void 0===c&&(c=!0),{templateUrl:UrlHelpers.join(a,b),reloadOnSearch:c}}}a.createControllerFunction=b,a.createRoutingFunction=c}(PluginHelpers||(PluginHelpers={}));var Wiki;!function(a){var b=function(){function a(a){this.factoryMethod=a,this.directoryPrefix=""}return a.prototype.getRepositoryLabel=function(a,b){this.git().getRepositoryLabel(a,b)},a.prototype.exists=function(a,b,c){var d=this.getPath(b);return this.git().exists(a,d,c)},a.prototype.completePath=function(a,b,c,d){return this.git().completePath(a,b,c,d)},a.prototype.getPage=function(a,b,c,d){var e=this,f=this.git();if(b=b||"/",f)if(c){var g=this.getLogPath(b);f.getContent(c,g,function(a){d({text:a,directory:!1})})}else{var h=this.getPath(b);f.read(a,h,function(a){var b=a.children;angular.forEach(b,function(a){var b=a.path;if(b){var c="/"+e.directoryPrefix;b.startsWith(c)&&(b="/"+b.substring(c.length),a.path=b)}}),d(a)})}return f},a.prototype.diff=function(a,b,c,d){var e=this.getLogPath(c),f=this.git();return f&&f.diff(a,b,e,function(a){d({text:a,format:"diff",directory:!1})}),f},a.prototype.commitInfo=function(a,b){this.git().commitInfo(a,b)},a.prototype.commitTree=function(a,b){this.git().commitTree(a,b)},a.prototype.putPage=function(a,b,c,d,e){var f=this.getPath(b);this.git().write(a,f,d,c,e)},a.prototype.putPageBase64=function(a,b,c,d,e){var f=this.getPath(b);this.git().writeBase64(a,f,d,c,e)},a.prototype.createDirectory=function(a,b,c,d){var e=this.getPath(b);this.git().createDirectory(a,e,c,d)},a.prototype.revertTo=function(a,b,c,d,e){var f=this.getLogPath(c);this.git().revertTo(a,b,f,d,e)},a.prototype.rename=function(a,b,c,d,e){var f=this.getPath(b),g=this.getPath(c);d||(d="Renaming page "+b+" to "+c),this.git().rename(a,f,g,d,e)},a.prototype.removePage=function(a,b,c,d){var e=this.getPath(b);c||(c="Removing page "+b),this.git().remove(a,e,c,d)},a.prototype.getPath=function(a){var b=this.directoryPrefix;return b?b+a:a},a.prototype.getLogPath=function(a){return Core.trimLeading(this.getPath(a),"/")},a.prototype.history=function(a,b,c,d,e){var f=this.getLogPath(c),g=this.git();return g&&g.history(a,b,f,d,e),g},a.prototype.getContent=function(a,b,c){var d=this.getLogPath(b),e=this.git();return e&&e.getContent(a,d,c),e},a.prototype.branches=function(a){var b=this.git();return b&&b.branches(a),b},a.prototype.jsonChildContents=function(a,b,c,d){var e=this.getLogPath(a),f=this.git();return f&&f.readJsonChildContent(e,b,c,d),f},a.prototype.git=function(){var a=this.factoryMethod();return a||console.log("No repository yet! TODO we should use a local impl!"),a},a}();a.GitWikiRepository=b}(Wiki||(Wiki={}));var Wiki;!function(a){a.pluginName="wiki",a.templatePath="app/wiki/html/",a.tab=null,a._module=angular.module(a.pluginName,["bootstrap","ui.bootstrap.dialog","ui.bootstrap.tabs","ngResource","hawtioCore","hawtio-ui","tree","camel"]),a.controller=PluginHelpers.createControllerFunction(a._module,"Wiki"),a.route=PluginHelpers.createRoutingFunction(a.templatePath),a._module.config(["$routeProvider",function(b){angular.forEach(["","/branch/:branch"],function(c){b.when(UrlHelpers.join("/wiki",c,"view"),a.route("viewPage.html",!1)).when(UrlHelpers.join("/wiki",c,"create/*page"),a.route("create.html",!1)).when("/wiki"+c+"/view/*page",{templateUrl:"app/wiki/html/viewPage.html",reloadOnSearch:!1}).when("/wiki"+c+"/book/*page",{templateUrl:"app/wiki/html/viewBook.html",reloadOnSearch:!1}).when("/wiki"+c+"/edit/*page",{templateUrl:"app/wiki/html/editPage.html"}).when("/wiki"+c+"/version/*page/:objectId",{templateUrl:"app/wiki/html/viewPage.html"}).when("/wiki"+c+"/history/*page",{templateUrl:"app/wiki/html/history.html"}).when("/wiki"+c+"/commit/*page/:objectId",{templateUrl:"app/wiki/html/commit.html"}).when("/wiki"+c+"/diff/*page/:objectId/:baseObjectId",{templateUrl:"app/wiki/html/viewPage.html",reloadOnSearch:!1}).when("/wiki"+c+"/formTable/*page",{templateUrl:"app/wiki/html/formTable.html"}).when("/wiki"+c+"/dozer/mappings/*page",{templateUrl:"app/wiki/html/dozerMappings.html"}).when("/wiki"+c+"/configurations/*page",{templateUrl:"app/wiki/html/configurations.html"}).when("/wiki"+c+"/configuration/:pid/*page",{templateUrl:"app/wiki/html/configuration.html"}).when("/wiki"+c+"/newConfiguration/:factoryPid/*page",{templateUrl:"app/wiki/html/configuration.html"}).when("/wiki"+c+"/camel/diagram/*page",{templateUrl:"app/wiki/html/camelDiagram.html"}).when("/wiki"+c+"/camel/canvas/*page",{templateUrl:"app/wiki/html/camelCanvas.html"}).when("/wiki"+c+"/camel/properties/*page",{templateUrl:"app/wiki/html/camelProperties.html"})})}]),a._module.factory("wikiRepository",["workspace","jolokia","localStorage",function(b,c,d){return new a.GitWikiRepository(function(){return Git.createGitRepository(b,c,d)})}]),a._module.factory("wikiBranchMenu",function(){var a={items:[],addExtension:function(b){a.items.push(b)},applyMenuExtensions:function(b){if(0!==a.items.length){var c=[{heading:"Actions"}];a.items.forEach(function(a){a.valid()&&c.push(a)}),c.length>1&&b.add(c)}}};return a}),a._module.factory("fileExtensionTypeRegistry",function(){return{image:["svg","png","ico","bmp","jpg","gif"],markdown:["md","markdown","mdown","mkdn","mkd"],htmlmixed:["html","xhtml","htm"],"text/x-java":["java"],"text/x-scala":["scala"],javascript:["js","json","javascript","jscript","ecmascript","form"],xml:["xml","xsd","wsdl","atom"],properties:["properties"]}}),a._module.filter("fileIconClass",function(){return a.iconClass}),a._module.run(["$location","workspace","viewRegistry","jolokia","localStorage","layoutFull","helpRegistry","preferencesRegistry","wikiRepository","postLoginTasks","$rootScope",function(b,c,d,e,f,g,h,i,j,k,l){d.wiki=a.templatePath+"layoutWiki.html",h.addUserDoc("wiki","app/wiki/doc/help.md",function(){return a.isWikiEnabled(c,e,f)}),i.addTab("Git","app/wiki/html/gitPreferences.html"),a.tab={id:"wiki",content:"Wiki",title:"View and edit wiki pages",isValid:function(b){return a.isWikiEnabled(b,e,f)},href:function(){return"#/wiki/view"},isActive:function(a){return a.isLinkActive("/wiki")&&!a.linkContains("fabric","profiles")&&!a.linkContains("editFeatures")}},c.topLevelTabs.push(a.tab),k.addTask("wikiGetRepositoryLabel",function(){j.getRepositoryLabel(function(b){a.tab.content=b,Core.$apply(l)},function(a){})}),a.documentTemplates.forEach(function(a){a.regex||(a.regex=/(?:)/)})}]),hawtioPluginLoader.addModule(a.pluginName)}(Wiki||(Wiki={}));var Fabric;!function(a){a.templatePath="app/fabric/html/",a.activeMQTemplatePath="app/activemq/html/",a._module=angular.module("fabric",["bootstrap","ui.bootstrap","ui.bootstrap.dialog","ngResource","ngGrid","hawtio-forms","hawtioCore","wiki"]),a._module.config(["$routeProvider",function(b){b.when("/fabric/containers/createContainer",{templateUrl:a.templatePath+"createContainer.html",reloadOnSearch:!1}).when("/fabric/map",{templateUrl:a.templatePath+"map.html"}).when("/fabric/clusters/*page",{templateUrl:a.templatePath+"clusters.html"}).when("/fabric/containers",{templateUrl:a.templatePath+"containers.html",reloadOnSearch:!1}).when("/fabric/container/:containerId",{templateUrl:a.templatePath+"container.html",reloadOnSearch:!1}).when("/fabric/assignProfile",{templateUrl:a.templatePath+"assignProfile.html"}).when("/fabric/activeProfiles",{templateUrl:a.templatePath+"activeProfiles.html"}).when("/wiki/profile/:versionId/:profileId/editFeatures",{templateUrl:a.templatePath+"editFeatures.html"}).when("/fabric/profile/:versionId/:profileId/:fname",{templateUrl:a.templatePath+"pid.html"}).when("/fabric/migrate",{templateUrl:a.templatePath+"migrateVersions.html"}).when("/fabric/patching",{templateUrl:a.templatePath+"patching.html"}).when("/fabric/configurations/:versionId/:profileId",{templateUrl:"app/osgi/html/configurations.html"}).when("/fabric/configuration/:versionId/:profileId/:pid",{templateUrl:"app/osgi/html/pid.html"}).when("/fabric/configuration/:versionId/:profileId/:pid/:factoryPid",{templateUrl:"app/osgi/html/pid.html"}).when("/fabric/mq/:versionId/brokers",{templateUrl:a.templatePath+"brokers.html"}).when("/fabric/mq/:versionId/brokerDiagram",{templateUrl:a.activeMQTemplatePath+"brokerDiagram.html",reloadOnSearch:!1}).when("/fabric/mq/:versionId/brokerNetwork",{templateUrl:a.templatePath+"brokerNetwork.html"}).when("/fabric/mq/:versionId/createBroker",{templateUrl:a.templatePath+"createBroker.html"}).when("/fabric/camel/diagram",{templateUrl:"app/camel/html/fabricDiagram.html",reloadOnSearch:!1}).when("/fabric/api",{templateUrl:a.templatePath+"apis.html"}).when("/fabric/api/wsdl",{templateUrl:"app/api/html/wsdl.html"}).when("/fabric/api/wadl",{templateUrl:"app/api/html/wadl.html"}).when("/fabric/test",{templateUrl:a.templatePath+"test.html"}).when("/fabric/profileView",{templateUrl:a.templatePath+"profileView.html",reloadOnSearch:!1}).when("/fabric/containerView",{templateUrl:a.templatePath+"containerView.html",reloadOnSearch:!1})}]),a._module.factory("serviceIconRegistry",function(){return a.serviceIconRegistry}),a._module.factory("containerIconRegistry",function(){return a.containerIconRegistry}),a._module.run(["$location","workspace","jolokia","viewRegistry","pageTitle","helpRegistry","$rootScope","postLoginTasks","preferencesRegistry","wikiBranchMenu","$dialog","layoutFull",function(b,c,d,e,f,g,h,i,j,k,l,m){var n=a.templatePath+"layoutFabric.html",o=a.templatePath+"layoutNoTabs.html";e["fabric/assignProfile"]=n,e["fabric/profileView"]=o,e["fabric/containerView"]=o,e["fabric/migrate"]=o,e["fabric/patching"]=o,e["fabric/map"]=n,e["fabric/clusters"]=n,e["fabric/container"]=n,e["fabric/activeProfiles"]=n,e["fabric/containers"]=n,e["fabric/configurations"]=n,e["fabric/configuration"]=n,e["fabric/mq"]=n,e["fabric/camel"]=n,e["fabric/api"]=n,f.addTitleElement(function(){return a.currentContainerId}),a.addWikiBranchMenuExtensions(k,l,c),i.addTask("fabricFetchContainerName",function(){""===a.currentContainerId&&a.fabricCreated(c)&&d.request({type:"exec",mbean:a.managerMBean,operation:"currentContainer()",arguments:[]},onSuccess(function(b){b.value&&(a.currentContainer=b.value,a.currentContainerId=a.currentContainer.id,"container"in Perspective.metadata&&(Core.pathSet(Perspective.metadata,["container","label"],a.currentContainerId),Core.pathSet(Perspective.metadata,["container","icon"],a.getTypeIcon(a.currentContainer))),Core.$apply(h))}))}),j.addTab("Fabric","app/fabric/html/preferences.html",function(){return a.isFMCContainer(c)}),c.topLevelTabs.push({id:"fabric.runtime",content:"Services",title:"Manage your containers in this fabric",isValid:function(b){return a.isFMCContainer(b)},href:function(){return"#/fabric/containers"},isActive:function(a){return a.isLinkActive("fabric")&&!a.isLinkActive("fabric/profileView")&&!a.isLinkActive("fabric/containerView")&&!a.isLinkActive("fabric/deploy")&&!a.isLinkActive("fabric/requirements")}}),c.topLevelTabs.push({id:"fabric.profiles",content:"Profiles",title:"Select and deploy profiles into this fabric",isValid:function(b){return a.isFMCContainer(b)},href:function(){return"#/fabric/profileView"},isActive:function(a){return a.isLinkActive("fabric/profileView")}}),c.topLevelTabs.push({id:"fabric.containers",content:"Containers",title:"View and manage containers in this fabric",isValid:function(b){return a.isFMCContainer(b)},href:function(){return"#/fabric/containerView"},isActive:function(a){return a.isLinkActive("fabric/containerView")}}),c.topLevelTabs.push({id:"fabric.configuration",content:"Wiki",title:"View the documentation and configuration of your profiles in Fabric",isValid:function(c,e){var f=a.isFMCContainer(c);if(f){var g=Perspective.currentPerspectiveId(b,c,d,localStorage);f="fabric"===(void 0===e?g:e)}return f},href:function(){return"#/wiki/branch/default-version/view/fabric/profiles"},isActive:function(a){return a.isLinkActive("/wiki")&&(a.linkContains("fabric","profiles")||a.linkContains("editFeatures"))}}),g.addUserDoc("fabric","app/fabric/doc/help.md",function(){return a.isFMCContainer(c)}),g.addDevDoc("fabric","app/fabric/doc/developer.md")}]),hawtioPluginLoader.addModule("fabric")}(Fabric||(Fabric={}));var FabricDeploy;!function(a){a.log=Logger.get("FabricDeploy"),a.pluginName="fabric-deploy",a.templatePath="app/fabric-deploy/html/",a._module=angular.module(a.pluginName,["bootstrap","fabric"]),a._module.config(["$routeProvider",function(b){b.when("/fabric/deploy",{templateUrl:a.templatePath+"deploy.html"})}]),a._module.run(["viewRegistry","layoutFull","workspace",function(b,c,d){a.log.debug("started")}]),hawtioPluginLoader.addModule(a.pluginName)}(FabricDeploy||(FabricDeploy={}));var FabricDeploy;!function(a){a.DeployArtifact=a._module.directive("fabricDeployArtifact",[function(){return a.log.debug("Creating deploy artifact directive..."),{restrict:"A",replace:!0,scope:{versionId:"@",profileId:"@"},templateUrl:a.templatePath+"deploy.html",controller:["$scope","$element","FileUploader","jolokiaUrl","$templateCache","jolokia","userDetails",function(b,c,d,e,f,g,h){b.artifactTemplate="",g.request({type:"read",mbean:Fabric.managerMBean,attribute:"MavenRepoUploadURI"},onSuccess(function(c){var g=c.value;e.has("/proxy")&&(g="proxy/"+g),a.log.debug("Maven upload URI: ",g);var i=b.artifactUploader=new d({headers:{Authorization:Core.authHeaderValue(h)},autoUpload:!0,withCredentials:!0,method:"PUT",url:g});b.doUpload=function(){i.uploadAll()},i.onWhenAddingFileFailed=function(b,c,d){a.log.debug("onWhenAddingFileFailed",b,c,d)},i.onAfterAddingFile=function(b){a.log.debug("onAfterAddingFile",b)},i.onAfterAddingAll=function(b){a.log.debug("onAfterAddingAll",b)},i.onBeforeUploadItem=function(c){c.fileSizeMB="file"in c?(c.file.size/1024/1024).toFixed(2):0,c.url=UrlHelpers.join(g,c.file.name)+"?profile="+b.profileId+"&version="+b.versionId,a.log.debug("onBeforeUploadItem",c)},i.onProgressItem=function(b,c){a.log.debug("onProgressItem",b,c)},i.onProgressAll=function(b){a.log.debug("onProgressAll",b)},i.onSuccessItem=function(b,c,d,e){a.log.debug("onSuccessItem",b,c,d,e),Core.notification("success","Added "+b.file.name)},i.onErrorItem=function(b,c,d,e){a.log.debug("onErrorItem",b,c,d,e),Core.notification("error","Failed to add "+b.file.name)},i.onCancelItem=function(b,c,d,e){a.log.debug("onCancelItem",b,c,d,e)},i.onCompleteItem=function(b,c,d,e){a.log.debug("onCompleteItem",b,c,d,e)},i.onCompleteAll=function(){a.log.debug("onCompleteAll"),i.clearQueue()},a.log.debug("uploader",i),b.artifactTemplate=f.get("fileUpload.html"),Core.$apply(b)}))}]}}])}(FabricDeploy||(FabricDeploy={}));var ObjectHelpers;!function(a){function b(a,b,c){if(!a||0===a.length)return{};var d={};return a.forEach(function(a){angular.isObject(a)&&(d[a[b]]=a,angular.isFunction(c)&&c(a))}),d}a.toMap=b}(ObjectHelpers||(ObjectHelpers={}));var SelectionHelpers;!function(a){function b(a){a.forEach(function(a){a.selected=!1})}function c(a,b){a.forEach(function(a){b?b(a)&&(a.selected=!0):a.selected=!0})}function d(a){a.selected=!a.selected}function e(a,c){b(a),d(c)}function f(a,b,c){return b.forEach(function(b){b.selected=a.any(function(a){return a[c]===b[c]})}),b.filter(function(a){return a.selected})}function g(a,b,c){var f=c.ctrlKey,g=c.metaKey;f||g?d(b):b.selected?d(b):e(a,b)}function h(a,b,c){return n(a.selected,b,c)}function i(a){a.length=0}function j(a,b,c){var d=c||b;a.any(d)?a.remove(d):a.add(b)}function k(a,b){return angular.isDefined(a)?a:b}function l(a){return k(a,!1)}function m(a){return k(a,!0)}function n(a,b,c){return a?m(b):l(c)}function o(a,b,c,d,e){if(!a)return l(d);var f=e||b;return n(a.any(f),c,d)}function p(a,b,c,d,e){if(0===a.length)return m(c);var f=e||b;return angular.isArray(b)?n(a.intersect(b).length===a.length,c,d):n(a.any(f),c,d)}function q(a,b,c){var d=[];c?a.forEach(function(a){var e=b.find(function(b){return a[c]===b[c]});e&&d.push(e)}):a.forEach(function(a){var c=b.find(function(b){return Object.equal(a,b)});c&&d.push(c)}),i(a),a.add(d)}function r(a){a.selectNone=b,a.selectAll=c,a.toggleSelection=d,a.selectOne=e,a.select=g,a.clearGroup=i,a.toggleSelectionFromGroup=j,a.isInGroup=o,a.viewOnly=!1,a.filterByGroup=p}Logger.get("SelectionHelpers");a.selectNone=b,a.selectAll=c,a.toggleSelection=d,a.selectOne=e,a.sync=f,a.select=g,a.isSelected=h,a.clearGroup=i,a.toggleSelectionFromGroup=j,a.isInGroup=o,a.filterByGroup=p,a.syncGroupSelection=q,a.decorate=r}(SelectionHelpers||(SelectionHelpers={}));var ProfileHelpers;!function(a){function b(a){var b=a.tags;return b&&b.length||(b=a.id.split("-"),b=b.first(b.length-1)),b}a.getTags=b}(ProfileHelpers||(ProfileHelpers={}));var Fabric;!function(a){a._module.service("ProfileCart",function(){return[]}),a._module.service("ProfileViewActions",["$location","$rootScope",function(b,c){return{Deploy:{index:0,icon:"icon-ok",buttonClass:"btn-success",objectName:a.managerMBean,methodName:"createContainers",title:"Deploy the selected profiles to new containers",action:function(){var a=b.path();b.path("/fabric/containers/createContainer").search({p:"fabric",vid:"",pid:"",hideProfileSelector:!0,returnTo:a,nextPage:"/fabric/containerView?groupBy=profileIds"}),Core.$apply(c)}},Assign:{index:2,icon:"icon-truck",buttonClass:"btn-primary",objectName:a.managerMBean,methodName:"addProfilesToContainer",title:"Deploy the selected profiles to existing containers",action:function(){b.path("/fabric/assignProfile"),Core.$apply(c)}}}}]),a.AppViewPaneHeaderController=a._module.controller("Fabric.AppViewPaneHeaderController",["$scope","ProfileCart","ProfileViewActions",function(a,b,c){SelectionHelpers.decorate(a);var d=[];angular.forEach(c,function(a,b){a.name=b,d.add(a)}),a.actionButtons=d,a.cartItems=b,a.getName=function(){return a.cartItems.map(function(a){return a.id}).join(", ")},a.$watch("filter",function(b,c){b!==c&&a.$emit("Fabric.AppViewPaneController.filter",b)})}]),a.AppViewController=a._module.controller("Fabric.AppViewController",["$scope","jolokia","$templateCache","ProfileCart","$location","workspace","marked",function(b,c,d,e,f,g,h){function i(c){var d=c.value;b.profiles=[],b.tags=[],d.forEach(function(c){if(!(c.abstract||c.hidden||c.overlay)){var d=c.summaryMarkdown,e=ProfileHelpers.getTags(c);b.tags.add(e),b.profiles.push({id:c.id,versionId:b.selectedVersion.id,name:c.id,tags:e,iconURL:a.toIconURL(b,c.iconURL),summary:d?h(d):"",containerCount:c.containerCount,associatedContainers:c.associatedContainers})}}),b.profiles=b.profiles.sortBy("name"),SelectionHelpers.syncGroupSelection(b.cartItems,b.profiles,"id"),b.tags=b.tags.unique().sort(),Core.$apply(b)}b.selectedVersion={},b.profiles=[],b.cartItems=e,b.tags=[],b.selectedTags=[],b.textFilter="",b.lowercaseTextFilter="",SelectionHelpers.decorate(b),b.$on("Fabric.AppViewPaneController.filter",function(a,c){b.textFilter=c}),b.filterProfiles=function(a){var c=b.filterByGroup(b.selectedTags,a.tags);if(c&&!Core.isBlank(b.textFilter)){var d=b.textFilter.toLowerCase();return FilterHelpers.searchObject(a,d)}return c};var j=["id","abstract","hidden","attributes","overlay","containerCount","associatedContainers","fileConfigurations","iconURL","summaryMarkdown","tags"],k=null;a.loadRestApi(c,g,void 0,function(d){b.restApiUrl=UrlHelpers.maybeProxy(Core.injector.get("jolokiaUrl"),d.value),a.log.debug("Scope rest API: ",b.restApiUrl),b.$watch("selectedVersion.id",function(d,e){Core.isBlank(d)||(k&&k(),k=Core.registerForChanges(c,b,{type:"exec",mbean:a.managerMBean,operation:"getProfiles(java.lang.String,java.util.List)",arguments:[d,j]},i))})}),b.viewProfile=function(b){a.gotoProfile(g,c,g.localStorage,f,b.versionId,b.id)}}])}(Fabric||(Fabric={}));var FabricRequirements;!function(a){a.requirementsContext="/fabric/requirements",a.requirementsHash="#"+a.requirementsContext,a.pluginName="FabricRequirements",a.templatePath="app/fabric-requirements/html/",a.log=Logger.get(a.pluginName),a._module=angular.module(a.pluginName,["hawtioCore","fabric"]),a.controller=PluginHelpers.createControllerFunction(a._module,a.pluginName),a.route=PluginHelpers.createRoutingFunction(a.templatePath);var b=PluginHelpers.createRoutingFunction("app/fabric/html/");a._module.config(["$routeProvider",function(c){c.when(UrlHelpers.join(a.requirementsContext,"profile"),a.route("profileRequirements.html")).when(UrlHelpers.join(a.requirementsContext,"sshConfig"),a.route("sshConfig.html")).when(UrlHelpers.join(a.requirementsContext,"dockerConfig"),a.route("dockerConfig.html")).when(UrlHelpers.join(a.requirementsContext,"status"),b("activeProfiles.html"))}]),a._module.run(["viewRegistry","layoutFull","workspace","ProfileViewActions","$location","$rootScope",function(b,c,d,e,f,g){b["fabric/requirements"]=a.templatePath+"layout.html",d.topLevelTabs.push({id:"fabric.requirements",content:"Scaling",isValid:function(a){return Fabric.isFMCContainer(a)},isActive:function(a){return a.isLinkActive("fabric/requirements")},href:function(){return"#/fabric/requirements/profile"}}),e["Add Requirements"]={index:3,icon:"icon-cog",buttonClass:"btn-primary",objectName:Fabric.managerMBean,methodName:"requirementsJson",title:"Create requirements for the selected profiles",
action:function(){f.path("/fabric/requirements/profile"),Core.$apply(g)}}}]),hawtioPluginLoader.addModule(a.pluginName)}(FabricRequirements||(FabricRequirements={}));var FileUpload;!function(a){function b(a,b,c){var d=a,e=Core.injector.get("$rootScope");d._xhrTransport=function(a){var f=new FileReader;f.onload=function(){if(2===f.readyState){var g=c(f.result);b.request(g,onSuccess(function(b){a.json=f.result,d._onSuccessItem(a,b,b.status,{}),d._onCompleteItem(a,b,b.status,{}),Core.$apply(e)},{error:function(b){d._onErrorItem(a,b,b.status,{}),d._onCompleteItem(a,b,b.status,{}),Core.$apply(e)}}))}},f.readAsText(a._file)}}a.useJolokiaTransport=b}(FileUpload||(FileUpload={}));var FabricRequirements;!function(a){a._module.service("CurrentRequirements",function(){return{$dirty:!1}}),a.RequirementsController=a.controller("RequirementsController",["$scope","jolokia","workspace","ProfileCart","$templateCache","FileUploader","userDetails","jolokiaUrl","$location","$timeout","CurrentRequirements","$element",function(b,c,d,e,f,g,h,i,j,k,l,m){b.tabs={0:{name:"Profile Requirements",href:function(){return a.requirementsHash+"/profile"},isActive:function(){return UrlHelpers.contextActive(j.path(),"profile")}},1:{name:"SSH Configuration",href:function(){return a.requirementsHash+"/sshConfig"},isActive:function(){return UrlHelpers.contextActive(j.path(),"sshConfig")}},2:{name:"Docker Configuration",href:function(){return a.requirementsHash+"/dockerConfig"},isActive:function(){return UrlHelpers.contextActive(j.path(),"dockerConfig")}},3:{name:"Status",href:function(){return a.requirementsHash+"/status"},isActive:function(){return UrlHelpers.contextActive(j.path(),"status")}}},b.requirements=l,b.template="",b.newTag="",b.addTag=function(a){a&&!b.requirements.$tags.some(function(b){return b===a})&&(b.requirements.$tags.push(a),b.newTag="",m.find("#inputNewTag").val(""))},b.cancelChanges=function(){b.requirements.$dirty&&(a.log.debug("Cancelling changes"),k(function(){Object.merge(b.requirements,b.requirementsFromServer,!0)},20),b.requirements.$dirty=!1)},b.onDrop=function(c,d,e){a.log.debug("On drop - data: ",c," model: ",d," property: ",e),d[e]||(d[e]=[]),d[e].any(c)||(d[e].push(c),b.requirements.$dirty=!0)},b.$on("hawtio-drop",function(a,c){b.onDrop(c.data,c.model,c.property)}),b.saveChanges=function(){function d(){Core.notification("success","Saved the requirements"),Core.$apply(b)}if(b.requirements.$dirty){var e=angular.toJson(b.requirements);a.log.debug("Saving requirementS: ",e),b.requirements.$dirty=!1,c.execute(Fabric.managerMBean,"requirementsJson",e,onSuccess(d))}},b.onChange=function(){b.requirements.$dirty=!0},Fabric.loadRestApi(c,d,void 0,function(a){function d(a){var b=[];["sshConfiguration","dockerConfiguration"].forEach(function(c){a[c]&&a[c].hosts&&a.sshConfiguration.hosts.forEach(function(a){b.add(a.tags)})}),a.profileRequirements.forEach(function(a){["sshScalingRequirements","dockerScalingRequirements"].forEach(function(c){a[c]&&a[c].hostTags&&b.add(a[c].hostTags)})}),a.$tags=b.unique().sort()}var h=i;b.uploader=new g({autoUpload:!0,removeAfterUpload:!0,url:h}),FileUpload.useJolokiaTransport(b.uploader,c,function(a){return{type:"exec",mbean:Fabric.managerMBean,operation:"requirementsJson",arguments:[a]}}),b.uploader.onBeforeUploadItem=function(a){Core.notification("info","Uploading "+a)},b.uploader.onSuccessItem=function(a){b.requirements=angular.fromJson(a.json)},b.uploader.onCompleteAll=function(){Core.notification("success","Imported requirements")},Core.registerForChanges(c,b,{type:"exec",mbean:Fabric.managerMBean,operation:"requirements()"},function(a){b.requirementsFromServer=a.value,b.requirements.$dirty||Object.merge(b.requirements,b.requirementsFromServer,!0);var c=b.requirements.profileRequirements;e.forEach(function(a){var d=a.id;c.some(function(a){return a.profile===d})||(c.push({profile:d,minimumInstances:null,maximumInstances:null,dependentProfiles:[]}),b.requirements.$dirty||(b.requirements.$dirty=!0))}),e.length=0,Core.isBlank(b.template)&&(b.template=f.get("pageTemplate.html")),d(b.requirements),Core.$apply(b)})})}])}(FabricRequirements||(FabricRequirements={}));var Forms;!function(a){function b(b,d,e,f,g,h,i,j,k){function l(a,b){var c=d[b];c&&angular.forEach(c,function(b,c){angular.isString(b)&&a.attr(c,b)})}function m(){l(n,"input-attributes"),angular.forEach(d,function(a,b){if(angular.isString(a)&&b.indexOf("$")<0&&"type"!==b){var c=Core.escapeHtml(a);n.attr(b,c)}})}void 0===j&&(j=!0),void 0===k&&(k=!1);var n=null,o=null,p={valueConverter:null},q=a.safeIdentifier(g),r=d.required||!1,s=c(b,d,e,f,p,q);if(s){n=angular.element(s),m(),g=q;var t=f.model||Core.pathGet(d,["input-attributes","ng-model"]);t||(t=f.getEntity()+"."+g),n.attr("ng-model",t),n.attr("name",g);var u=d.title||d.tooltip||d.label;u&&n.attr("title",u);var v=d.tooltip||d.description;v&&n.attr("tooltip",v);var w=k||d.disableHumanizeLabel,x=g;if(h||d.ignorePrefixInLabel){var y=g.lastIndexOf(".");y>0&&(x=g.substring(y+1))}if("hidden"!==n.attr("type")&&j){o=this.getControlGroup(f,f,g);var z=d.title||d.label||(w?x:Core.humanizeValue(x)),A=a.getLabel(f,f,z,r);v?A.attr("title",v):u&&A.attr("title",u),o.append(A),l(A,"label-attributes");var B=a.getControlDiv(f);B.append(n),B.append(a.getHelpSpan(f,f,g,d)),o.append(B);var C=f.showempty;if(angular.isDefined(C)){var D="true";"true"===C||"false"===C?D=C:angular.isString(g)&&(D=C+"('"+g+"')"),o.attr("ng-show",D)}l(B,"control-attributes"),l(o,"control-group-attributes");var E=f.scope;if(E&&t){var F=function(a){E.$emit("hawtio.form.modelChange",t,a)},G=F,H=p.valueConverter;H&&(G=function(){H(E,t);var a=Core.pathGet(E,t);F(a)}),E.$watch(t,G)}}}else{n=angular.element("<div></div>"),n.attr(a.normalize(b,d,e),""),m(),n.attr("entity",f.getEntity()),n.attr("mode",f.getMode());var I=f.schemaName;I&&n.attr("schema",I),i&&n.attr("data",i),(h||d.ignorePrefixInLabel)&&n.attr("ignore-prefix-in-label",!0),(k||d.disableHumanizeLabel)&&n.attr("disable-humanize-label",!0),n.attr("name",g)}var J=d.label;J&&n.attr("title",J);try{f.isReadOnly()&&(n.attr("readonly","true"),("select"===n[0].localName||"input"===n[0].localName&&"checkbox"===n.attr("type"))&&n.attr("disabled","true"))}catch(a){}return r&&("select"===n[0].localName||"input"===n[0].localName&&"checkbox"===n.attr("type")?n.removeAttr("required"):n.attr("required","true")),o||n}function c(b,c,d,e,f,g){function h(a,b){var d=Core.pathGet(a,b);if(!d&&"boolean"!=typeof d){var e=c.default||c.defaultValue;e&&(d=e,Core.pathSet(a,b,d))}return d}var i=a.resolveTypeNameAlias(b,d);if(!i)return'<input type="text"/>';if(Core.pathGet(c,["formTemplate"]))return null;var j=Core.pathGet(c,["input-element"]);if(j)return"<"+j+"></"+j+">";var k=Core.pathGet(c,["enum"]);if(k){var l=!0,m=null,n="";if(k){var o=e.scope,p=e.data;if(p&&o){var q=o[e.schemaName],r=angular.isString(p)?o[p]:p,s=g.split("."),c=null;angular.forEach(s,function(b){c=Core.pathGet(r,["properties",b]);var d=Core.pathGet(c,["type"]),e=a.lookupDefinition(d,q);e&&(r=e)});var t=Core.pathGet(c,["enum"]);angular.isUndefined(t)&&(t=k),m="$values_"+g.replace(/\./g,"_"),o[m]=t}}m&&(n+=' ng-options="value for value in '+m+'"');return"<select"+n+">"+(l?"":'<option value=""></option>')+"</select>"}if(angular.isArray(i))return null;if(!angular.isString(i))return null;var u=null,v=c.default||c.defaultValue;switch(v&&(u=function(a,b){Core.pathGet(a,b)||Core.pathSet(a,b,v)},f.valueConverter=u),i.toLowerCase()){case"int":case"integer":case"long":case"short":case"java.lang.integer":case"java.lang.long":case"float":case"double":case"java.lang.float":case"java.lang.double":return f.valueConverter=function(a,b){var c=h(a,b);if(c&&angular.isString(c)){var d=Number(c);Core.pathSet(a,b,d)}},'<input type="number"/>';case"array":case"java.lang.array":case"java.lang.iterable":case"java.util.list":case"java.util.collection":case"java.util.iterator":case"java.util.set":case"object[]":return null;case"boolean":case"bool":case"java.lang.boolean":return f.valueConverter=function(a,b){var c=h(a,b);if(c&&("true"===c||"false"===c)){var d="true"===c;Core.pathSet(a,b,d)}},'<input type="checkbox"/>';case"password":return'<input type="password"/>';case"hidden":return'<input type="hidden"/>';case"map":return null;default:return'<input type="text"/>'}}function d(a){switch(a.toLowerCase()){case"int":case"integer":case"long":case"short":case"java.lang.integer":case"java.lang.long":case"float":case"double":case"java.lang.float":case"java.lang.double":return"number";case"array":case"java.lang.array":case"java.lang.iterable":case"java.util.list":case"java.util.collection":case"java.util.iterator":case"java.util.set":case"object[]":return"text";case"boolean":case"bool":case"java.lang.boolean":return"checkbox";case"password":return"password";case"hidden":return"hidden";default:return"text"}}function e(b,c,d){if(!(b=a.resolveTypeNameAlias(b,d)))return"hawtio-form-text";if(Core.pathGet(c,["formTemplate"]))return"hawtio-form-custom";if(Core.pathGet(c,["enum"]))return"hawtio-form-select";if(angular.isArray(b))return null;if(!angular.isString(b)){try{console.log("Unsupported JSON schema type value "+JSON.stringify(b))}catch(a){console.log("Unsupported JSON schema type value "+b)}return null}switch(b.toLowerCase()){case"int":case"integer":case"long":case"short":case"java.lang.integer":case"java.lang.long":case"float":case"double":case"java.lang.float":case"java.lang.double":return"hawtio-form-number";case"array":case"java.lang.array":case"java.lang.iterable":case"java.util.list":case"java.util.collection":case"java.util.iterator":case"java.util.set":case"object[]":var e=c.items;if(!e)return"hawtio-form-string-array";var f=e.type;return f&&"string"===f?"hawtio-form-string-array":(a.log.debug("Returning hawtio-form-array for : ",c),"hawtio-form-array");case"boolean":case"bool":case"java.lang.boolean":return"hawtio-form-checkbox";case"password":return"hawtio-form-password";case"hidden":return"hawtio-form-hidden";case"map":return"hawtio-form-map";default:return"hawtio-form-text"}}a.createWidget=b,a.createStandardWidgetMarkup=c,a.mapType=d,a.normalize=e}(Forms||(Forms={}));var Forms;!function(a){var b=Logger.get("Core"),c=function(){function a(){this.name="form",this.method="post",this.entity="entity",this.schemaName="schema",this.mode="edit",this.data={},this.json=void 0,this.scope=null,this.scopeName=null,this.properties=[],this.action="",this.formclass="hawtio-form form-horizontal no-bottom-margin",this.controlgroupclass="control-group",this.controlclass="controls",this.labelclass="control-label",this.showtypes="false",this.showhelp="true",this.showempty="true",this.onsubmit="onSubmit"}return a.prototype.getMode=function(){return this.mode||"edit"},a.prototype.getEntity=function(){return this.entity||"entity"},a.prototype.isReadOnly=function(){return"view"===this.getMode()},a}();a.SimpleFormConfig=c;var d=function(){function d(a,b){var c=this;this.workspace=a,this.$compile=b,this.restrict="A",this.scope=!0,this.replace=!0,this.transclude=!0,this.attributeName="simpleForm",this.link=function(a,b,d){return c.doLink(a,b,d)}}return d.prototype.isReadOnly=function(){return!1},d.prototype.doLink=function(d,e,f){function g(a){a&&h(a)}function h(c){m=a.configure(m,c,f),m.schemaName=n,m.scopeName=u,m.scope=d;var g=m.getEntity();angular.isDefined(m.json)?m.data=$.parseJSON(m.json):m.data=c;var h=w.createForm(m);if(s=h.find("fieldset"),t=m.data,r={elements:{},locations:{},use:!1},t&&angular.isDefined(t.tabs)&&(r.use=!0,r.div=$('<div class="tabbable hawtio-form-tabs"></div>'),angular.forEach(t.tabs,function(a,b){r.elements[b]=$('<div class="tab-pane" title="'+b+'"></div>'),r.div.append(r.elements[b]),a.forEach(function(a){r.locations[a]=b})}),r.locations["*"]||(r.locations["*"]=Object.extended(t.tabs).keys()[0])),r.use||s.append('<div class="spacer"></div>'),t)if(r.use){var i={};angular.forEach(t.properties,function(a,b){var c=j(b),d=i[c];d||(d=[],i[c]=d),d.push({id:b,property:a})}),angular.forEach(t.tabs,function(a,b){a.forEach(function(a){var b=i[a];b&&angular.forEach(b,function(a){var b=a.id,c=a.property;b&&c&&k(b,c)})})})}else angular.forEach(t.properties,function(a,b){k(b,a)});if(r.use){var o=r.div;Object.keys(r.elements).length<2?angular.forEach(o.children().children(),function(a){s.append(a)}):s.append(o)}var x=function(a,b){return angular.isDefined(a[b])&&angular.isFunction(a[b])?a:angular.isDefined(a.$parent)&&null!==a.$parent?x(a.$parent,b):null},y=m.onsubmit.replace("(","").replace(")",""),z=l(x(d,y),y);null===z&&(z=function(a,c){b.debug("No submit handler defined for form:",c.get(0).name)}),angular.isDefined(z)&&h.submit(function(){if(b.debug("child scope: ",q),b.debug("form name: ",m),q[m.name].$invalid)return!1;var a=d[g];return z(a,h),!1}),s.append('<input type="submit" style="position: absolute; left: -9999px; width: 1px; height: 1px;">');var A=h.find("*[autofocus]");if((!A||!A.length)&&v){b.debug("No autofocus element, so lets add one!");var B=v.find("input").first()||v.find("select").first();B&&B.attr("autofocus","true")}p&&$(p).remove(),q&&q.$destroy(),q=d.$new(!1),p=w.$compile(h)(q);var C="forms",D=d[C];D||(D={},d[C]=D);var E=m.name;if(E){var F=q[E];F&&(D[E]=F);D[E+="$scope"]=q}$(e).append(p)}function i(a){var b=r.locations[a];return b||angular.forEach(r.locations,function(c,d){!b&&"*"!==d&&a.match(d)&&(b=c)}),b||(b=r.locations["*"]),b}function j(a){var b=null;return angular.forEach(t.tabs,function(c,d){c.forEach(function(c){!b&&"*"!==c&&a.match(c)&&(b=c)})}),b||(b="*"),b}function k(b,c,d){void 0===d&&(d=c.ignorePrefixInLabel);var e=c.type;"java.lang.String"===e&&(e="string");var f=a.lookupDefinition(e,t);f||(f=a.lookupDefinition(e,o));var g=!!t&&t.disableHumanizeLabel;if(!c.hidden){if("expression"===c.kind){f=a.lookupDefinition("expression",o);var h=b+".language",j=b+".expression",l=jQuery.extend(!0,{},f.properties.expression);l.description=c.description,l.title=c.title,l.required=c.required;var n=a.createWidget(e,f.properties.language,t,m,h,d,u,!0,g),p=a.createWidget(e,l,t,m,j,d,u,!0,g),q=n.find("select"),w=p.find("input");return q&&w&&(q.attr("style","width: 120px; margin-right: 10px"),w.attr("style","width: 470px"),w.before(q)),void s.append(p)}var x=null;if(!f&&"object"===e&&c.properties?x=c.properties:f&&a.isObjectType(f)&&(x=f.properties),x)angular.forEach(x,function(a,d){k(b+"."+d,a,c.ignorePrefixInLabel)});else{var y=!0,n=a.createWidget(e,c,t,m,b,d,u,y,g);if(r.use){var z=i(b);r.elements[z].append(n)}else s.append(n);v||(v=n)}}}function l(a,b){return null!==a?a[b]:null}var m=new c,n=f.schema,o=n?d[n]:null,p=null,q=null,r=null,s=null,t=null,u=f[this.attributeName]||f.data,v=null,w=this;d.$watch(u,g)},d.prototype.createForm=function(a){var b=$('<form class="'+a.formclass+'" novalidate><fieldset></fieldset></form>');return b.attr("name",a.name),b.attr("action",a.action),b.attr("method",a.method),b.find("fieldset").append(this.getLegend(a)),b},d.prototype.getLegend=function(a){var b=Core.pathGet(a,"data.description");return b?"<legend>"+b+"</legend>":""},d}();a.SimpleForm=d}(Forms||(Forms={}));var Forms;!function(a){var b=function(){function a(){this.name="form",this.method="post",this.entity="entity",this.tableConfig="tableConfig",this.mode="edit",this.data={},this.json=void 0,this.properties=[],this.action="",this.tableclass="table table-striped inputTable",this.controlgroupclass="control-group",this.controlclass="controls pull-right",this.labelclass="control-label",this.showtypes="true",this.removeicon="icon-remove",this.editicon="icon-edit",this.addicon="icon-plus",this.removetext="Remove",this.edittext="Edit",this.addtext="Add",this.onadd="onadd",this.onedit="onedit",this.onremove="onRemove",this.primaryKeyProperty=void 0}return a.prototype.getTableConfig=function(){return this.tableConfig||"tableConfig"},a}();a.InputTableConfig=b;var c=function(){function c(a,b){var c=this;this.workspace=a,this.$compile=b,this.restrict="A",this.scope=!0,this.replace=!0,this.transclude=!0,this.attributeName="hawtioInputTable",this.link=function(a,b,d){return c.doLink(a,b,d)}}return c.prototype.doLink=function(c,d,e){function f(a){var b=Core.pathGet(c,o);b||(b=[]),!angular.isArray(b)&&b&&(b=[b]),b=a(b),Core.pathSet(c,o,b),c.$emit("hawtio.datatable."+o,b),Core.$apply(c)}function g(a){return angular.forEach(c.config.selectedItems,function(b){var c=b._id;if(angular.isArray(a))a=a.remove(function(a){return Object.equal(a,b)}),delete b._id,a=a.remove(function(a){return Object.equal(a,b)});else if(delete b._id,c)delete a[c];else{var d=!1;angular.forEach(a,function(c,e){!d&&Object.equal(c,b)&&(console.log("Found row to delete! "+e),delete a[e],d=!0)}),d||console.log("Could not find "+JSON.stringify(b)+" in "+JSON.stringify(a))}}),a}function h(a,b){return null!==a?a[b]:null}var i=this,j=new b,k=e[this.attributeName],l=Core.pathGet(c,k);j=a.configure(j,l,e);var m=e.entity||j.data||"entity",n=e.property||"arrayData",o=m+"."+n,p=j.primaryKeyProperty,q=j.title||m;angular.isDefined(j.json)?j.data=$.parseJSON(j.json):j.data=c[j.data];var r=$("<div></div>"),l=Core.pathGet(c,k);l?(l.selectedItems=[],c.config=l):console.log("No table configuration for table "+q);var s=this.createTable(j,k),t=this.getControlGroup(j,{},""),u=this.getControlDiv(j);u.addClass("btn-group"),t.append(u);var v=null,w=null,x=null,y=null,z=null;if(!e.readonly){var A=null,B=e.data,C=B?Core.pathGet(c,B):null,D=e.schema||B,E=D?Core.pathGet(c,D):null;n&&C&&(A=Core.pathGet(C,["properties",n])),v=this.getAddButton(j),c.addDialogOptions={backdropFade:!0,dialogFade:!0},c.showAddDialog=!1,c.openAddDialog=function(){if(c.addEntity={},c.addFormConfig=a.findArrayItemsSchema(A,E),!y){var b="Add "+q;y=$('<div modal="showAddDialog" close="closeAddDialog()" options="addDialogOptions">\n<div class="modal-header"><h4>'+b+'</h4></div>\n<div class="modal-body"><div simple-form="addFormConfig" entity="addEntity" data="addFormConfig" schema="'+D+'"></div></div>\n<div class="modal-footer"><button class="btn btn-primary add" type="button" ng-click="addAndCloseDialog()">Add</button><button class="btn btn-warning cancel" type="button" ng-click="closeAddDialog()">Cancel</button></div></div>'),r.append(y),i.$compile(y)(c)}c.showAddDialog=!0,Core.$apply(c)},c.closeAddDialog=function(){c.showAddDialog=!1,c.addEntity={}},c.addAndCloseDialog=function(){var b=c.addEntity;a.log.info("About to add the new entity "+JSON.stringify(b)),b&&f(function(a){return p&&a.remove(function(a){return a[p]===b[p]}),a.push(b),a}),c.closeAddDialog()},w=this.getEditButton(j),c.editDialogOptions={backdropFade:!0,dialogFade:!0},c.showEditDialog=!1,c.openEditDialog=function(){var b=c.config.selectedItems,d={};if(b&&b.length&&angular.copy(b[0],d),c.editEntity=d,c.editFormConfig=a.findArrayItemsSchema(A,E),!z){var e="Edit "+q;z=$('<div modal="showEditDialog" close="closeEditDialog()" options="editDialogOptions">\n<div class="modal-header"><h4>'+e+'</h4></div>\n<div class="modal-body"><div simple-form="editFormConfig" entity="editEntity"></div></div>\n<div class="modal-footer"><button class="btn btn-primary save" type="button" ng-click="editAndCloseDialog()">Save</button><button class="btn btn-warning cancel" type="button" ng-click="closeEditDialog()">Cancel</button></div></div>'),r.append(z),i.$compile(z)(c)}c.showEditDialog=!0,Core.$apply(c)},c.closeEditDialog=function(){c.showEditDialog=!1,c.editEntity={}},c.editAndCloseDialog=function(){var a=c.editEntity;console.log("About to edit the new entity "+JSON.stringify(a)),a&&f(function(b){return b=g(b),b.push(a),b}),c.closeEditDialog()},x=this.getRemoveButton(j)}var F=function(a,b){return angular.isDefined(a[b])&&angular.isFunction(a[b])?a:angular.isDefined(a.$parent)&&null!==a.$parent?F(a.$parent,b):null},G=j.onremove.replace("(","").replace(")",""),H=j.onedit.replace("(","").replace(")",""),I=j.onadd.replace("(","").replace(")",""),J=h(F(c,G),G),K=h(F(c,H),H),L=h(F(c,I),I);null===J&&(J=function(){f(function(a){return g(a)})}),null===K&&(K=function(){c.openEditDialog()}),null===L&&(L=function(a){c.openAddDialog()}),v&&(v.click(function(a){return L(),!1}),u.append(v)),w&&(w.click(function(a){return K(),!1}),u.append(w)),x&&(x.click(function(a){return J(),!1}),u.append(x)),$(r).append(t),$(r).append(s),$(d).append(r),this.$compile(r)(c)},c.prototype.getAddButton=function(a){return $('<button type="button" class="btn add"><i class="'+a.addicon+'"></i> '+a.addtext+"</button>")},c.prototype.getEditButton=function(a){return $('<button type="button" class="btn edit" ng-disabled="!config.selectedItems.length"><i class="'+a.editicon+'"></i> '+a.edittext+"</button>")},c.prototype.getRemoveButton=function(a){return $('<button type="remove" class="btn remove" ng-disabled="!config.selectedItems.length"><i class="'+a.removeicon+'"></i> '+a.removetext+"</button>")},c.prototype.createTable=function(a,b){return $('<table class="'+a.tableclass+'" hawtio-simple-table="'+b+'"></table>')},c.prototype.getLegend=function(a){return Core.pathGet(a,"data.description")?"<legend>"+a.data.description+"</legend>":""},c.prototype.getControlGroup=function(a,b,c){var d=$('<div class="'+a.controlgroupclass+'"></div>');return angular.isDefined(b.description)&&d.attr("title",b.description),d},c.prototype.getControlDiv=function(a){return $('<div class="'+a.controlclass+'"></div>')},c.prototype.getHelpSpan=function(a,b,c){var d=$('<span class="help-block"></span>');return angular.isDefined(b.type)&&"false"!==a.showtypes&&d.append("Type: "+b.type),d},c}();a.InputTable=c}(Forms||(Forms={}));var Forms;!function(a){var b=function(){function a(){this.name="input",this.type="",this.description="",this._default="",this.scope=null,this.mode="edit",this.schemaName="schema",this.controlgroupclass="control-group",this.controlclass="controls",this.labelclass="control-label",this.showtypes="false",this.formtemplate=null,this.entity="entity",this.model=void 0}return a.prototype.getEntity=function(){return this.entity||"entity"},a.prototype.getMode=function(){return this.mode||"edit"},a.prototype.isReadOnly=function(){return"view"===this.getMode()},a}();a.InputBaseConfig=b;var c=function(){function c(a,b){var c=this;this.workspace=a,this.$compile=b,this.restrict="A",this.scope=!0,this.replace=!1,this.transclude=!1,this.attributeName="",this.link=function(a,b,d){return c.doLink(a,b,d)}}return c.prototype.doLink=function(c,d,e){function f(a){c.$emit("hawtio.form.modelChange",j,a)}var g=new b;g=a.configure(g,null,e),g.scope=c,g.schemaName=e.schema||"schema";var h=a.safeIdentifier(g.name),i=this.getControlGroup(g,g,h),j=g.model;angular.isDefined(j)||(j=g.getEntity()+"."+h);var k=h;if("true"===e.ignorePrefixInLabel){var l=h.lastIndexOf(".");l>0&&(k=h.substring(l+1))}var m="true"===e.disableHumanizeLabel,n=e.title||(m?k:Core.humanizeValue(k));i.append(a.getLabel(g,g,n));var o=a.getControlDiv(g);o.append(this.getInput(g,g,h,j)),o.append(a.getHelpSpan(g,g,h)),i.append(o),$(d).append(this.$compile(i)(c)),c&&j&&c.$watch(j,f)},c.prototype.getControlGroup=function(b,c,d){return a.getControlGroup(b,c,d)},c.prototype.getInput=function(a,b,c,d){var e=$('<span class="form-data"></span>');return d&&(e.attr("ng-model",d),e.append("{{"+d+"}}")),e},c}();a.InputBase=c;var d=function(a){function b(b,c){a.call(this,b,c),this.workspace=b,this.$compile=c,this.type="text"}return __extends(b,a),b.prototype.getInput=function(b,c,d,e){if(b.isReadOnly())return a.prototype.getInput.call(this,b,c,d,e);var f=$('<input type="'+this.type+'">');f.attr("name",d),e&&f.attr("ng-model",e),b.isReadOnly()&&f.attr("readonly","true");var g=b.$attr.required;return g&&"false"!==g&&f.attr("required","true"),f},b}(c);a.TextInput=d;var e=function(a){function b(b,c){a.call(this,b,c),this.workspace=b,this.$compile=c,this.type="hidden"}return __extends(b,a),b.prototype.getControlGroup=function(b,c,d){var e=a.prototype.getControlGroup.call(this,b,c,d);return e.css({display:"none"}),e},b.prototype.getInput=function(b,c,d,e){var f=a.prototype.getInput.call(this,b,c,d,e);return f.attr("readonly","true"),f},b}(d);a.HiddenText=e;var f=function(a){function b(b,c){a.call(this,b,c),this.workspace=b,this.$compile=c,this.type="password"}return __extends(b,a),b}(d);a.PasswordInput=f;var g=function(a){function b(b,c){a.call(this,b,c),this.workspace=b,this.$compile=c}return __extends(b,a),b.prototype.getInput=function(a,b,c,d){var e=b.formtemplate;e=Core.unescapeHtml(e);var f=$(e);return f.attr("name")||f.attr("name",c),d&&f.attr("ng-model",d),a.isReadOnly()&&f.attr("readonly","true"),f},b}(c);a.CustomInput=g;var h=function(b){function c(a,c){b.call(this,a,c),this.workspace=a,this.$compile=c}return __extends(c,b),c.prototype.getInput=function(c,d,e,f){if(c.isReadOnly())return b.prototype.getInput.call(this,c,d,e,f);var g=!0,h=g?"":'<option value=""></option>',i=$("<select>"+h+"</select>");i.attr("name",e);var j=c.scope,k=c.data;if(k&&j){var l=j[c.schemaName],m=j[k],n=e.split("."),o=null;angular.forEach(n,function(b){o=Core.pathGet(m,["properties",b]);var c=Core.pathGet(o,["type"]),d=a.lookupDefinition(c,l);d&&(m=d)});var p=Core.pathGet(o,["enum"]);j.$selectValues=p,i.attr("ng-options","value for value in $selectValues")}return f&&i.attr("ng-model",f),c.isReadOnly()&&i.attr("readonly","true"),i},c}(c);a.SelectInput=h;var i=function(a){function b(b,c){a.call(this,b,c),this.workspace=b,this.$compile=c}return __extends(b,a),b.prototype.getInput=function(b,c,d,e){function f(){var a=Core.pathGet(h,e);if(a&&angular.isString(a)){var b=Number(a);Core.pathSet(h,e,b)}}if(b.isReadOnly())return a.prototype.getInput.call(this,b,c,d,e);var g=$('<input type="number">');g.attr("name",d),angular.isDefined(c.def)&&g.attr("value",c.def),angular.isDefined(c.minimum)&&g.attr("min",c.minimum),angular.isDefined(c.maximum)&&g.attr("max",c.maximum),e&&g.attr("ng-model",e),b.isReadOnly()&&g.attr("readonly","true");var h=b.scope;return h&&(h.$watch(e,f),f()),g},b}(c);a.NumberInput=i;var j=function(b){function c(a,c){b.call(this,a,c),this.workspace=a,this.$compile=c}return __extends(c,b),c.prototype.getInput=function(b,c,d,e){function f(){var a=Core.pathGet(i,e);i[t]=a?Object.keys(a):[],i.$emit("hawtio.form.modelChange",e,a)}var g="_"+d,h="{{"+g+"}}";if(b.isReadOnly())return angular.element('<ul><li ng-repeat="'+g+" in "+e+'">'+h+"</li></ul>");var i=b.scope,j=(c.$attr||{}).schema||"schema",k=i[b.schemaName]||i[j]||{},l=k.properties||{},m=l[d]||{},n=m.items||{},o=n.type,p=!0,q=n.disableHumanizeLabel,r=null;Core.pathGet(i,e)||Core.pathSet(i,e,[]);var s="_form_stringArray"+g+"_",t=s+"keys",u=s+"add",v=s+"remove";f(),i[u]=function(){var a=Core.pathGet(i,e)||[];a.push(""),Core.pathSet(i,e,a),f()},i[v]=function(a){var b=Core.pathGet(i,e)||[];a<b.length&&b.splice(a,1),Core.pathSet(i,e,b),f()};var w=e+"["+g+"]",x={model:w},y=!1,z=a.createWidget(o,n,k,x,w,p,r,y,q);z||(z=angular.element(h));var A=angular.element('<div class="controls" style="white-space: nowrap" ng-repeat="'+g+" in "+t+'"></div>');return A.append(z),A.append(angular.element('<a ng-click="'+v+"("+g+')" title="Remove this value"><i class="red icon-remove"></i></a>')),A.after(angular.element('<a ng-click="'+u+'()" title="Add a new value"><i class="icon-plus"></i></a>')),A},c}(c);a.StringArrayInput=j;var k=function(c){function d(a,b){c.call(this,a,b),this.workspace=a,this.$compile=b}return __extends(d,c),d.prototype.doLink=function(c,d,e){function f(a,b,c){if(c){var d=c.description;return d||angular.forEach(c,function(a,b){a&&!d&&(d=a)}),d}return null}var g=new b;g=a.configure(g,null,e);var h=g.name,i=e.data||"",j=e.entity||g.entity,k=e.schema||g.schemaName,l=["properties",h,"inputTable"],m=null;if(Core.pathGet(c,l),!m){var n=l.join("."),o="true"===e.disableHumanizeLabel,p=o?h:Core.humanizeValue(h);m={formConfig:g,title:p,data:g.entity+"."+h,displayFooter:!1,showFilter:!1,columnDefs:[{field:"_id",displayName:p,render:f}]},Core.pathSet(c,l,m)}var q=$('<div hawtio-input-table="'+n+'" data="'+i+'" property="'+h+'" entity="'+j+'" schema="'+k+'"></div>');g.isReadOnly()&&q.attr("readonly","true"),$(d).append(this.$compile(q)(c))},d}(c);a.ArrayInput=k;var l=function(a){function b(b,c){a.call(this,b,c),this.workspace=b,this.$compile=c}return __extends(b,a),b.prototype.getInput=function(a,b,c,d){function e(){var a=Core.pathGet(g,d);a&&"true"===a&&Core.pathSet(g,d,!0)}var f=$('<input class="hawtio-checkbox" type="checkbox">');f.attr("name",c),a.isReadOnly()&&f.attr("disabled","true"),d&&f.attr("ng-model",d),a.isReadOnly()&&f.attr("readonly","true");var g=a.scope;return g&&(g.$watch(d,e),e()),f},b}(c);a.BooleanInput=l}(Forms||(Forms={}));var Forms;!function(a){var b=function(){function a(){var a=this;this.restrict="A",this.scope=!0,this.link=function(b,c,d){return a.doLink(b,c,d)}}return a.prototype.doLink=function(a,b,c){var d=$(b),e="form[name="+c.hawtioSubmit+"]";d.click(function(){return $(e).submit(),!1})},a}();a.SubmitForm=b}(Forms||(Forms={}));var Forms;!function(a){var b=function(){function a(){var a=this;this.restrict="A",this.scope=!0,this.link=function(b,c,d){return a.doLink(b,c,d)}}return a.prototype.doLink=function(a,b,c){var d=$(b),e="form[name="+c.hawtioReset+"]";d.click(function(){for(var a=$(e),b=0;b<a.length;b++)a[b].reset();return!1})},a}();a.ResetForm=b}(Forms||(Forms={}));var Forms;!function(a){a.pluginName="hawtio-forms",a.templateUrl="app/forms/html/",a._module=angular.module(a.pluginName,["bootstrap","ngResource","hawtioCore","datatable","ui.bootstrap","ui.bootstrap.dialog","hawtio-ui"]),a._module.config(["$routeProvider",function(a){a.when("/forms/test",{templateUrl:"app/forms/html/test.html"}).when("/forms/testTable",{templateUrl:"app/forms/html/testTable.html"})}]),a._module.directive("simpleForm",["workspace","$compile",function(b,c){return new a.SimpleForm(b,c)}]),a._module.directive("hawtioForm",["workspace","$compile",function(b,c){return new a.SimpleForm(b,c)}]),a._module.directive("hawtioInputTable",["workspace","$compile",function(b,c){return new a.InputTable(b,c)}]),a._module.directive("hawtioFormText",["workspace","$compile",function(b,c){return new a.TextInput(b,c)}]),a._module.directive("hawtioFormPassword",["workspace","$compile",function(b,c){return new a.PasswordInput(b,c)}]),a._module.directive("hawtioFormHidden",["workspace","$compile",function(b,c){return new a.HiddenText(b,c)}]),a._module.directive("hawtioFormNumber",["workspace","$compile",function(b,c){return new a.NumberInput(b,c)}]),a._module.directive("hawtioFormSelect",["workspace","$compile",function(b,c){return new a.SelectInput(b,c)}]),a._module.directive("hawtioFormArray",["workspace","$compile",function(b,c){return new a.ArrayInput(b,c)}]),a._module.directive("hawtioFormStringArray",["workspace","$compile",function(b,c){return new a.StringArrayInput(b,c)}]),a._module.directive("hawtioFormCheckbox",["workspace","$compile",function(b,c){return new a.BooleanInput(b,c)}]),a._module.directive("hawtioFormCustom",["workspace","$compile",function(b,c){return new a.CustomInput(b,c)}]),a._module.directive("hawtioSubmit",function(){return new a.SubmitForm}),a._module.directive("hawtioReset",function(){return new a.ResetForm}),a._module.run(["helpRegistry",function(a){a.addDevDoc("forms","app/forms/doc/developer.md")}]),hawtioPluginLoader.addModule(a.pluginName)}(Forms||(Forms={}));var Forms;!function(a){a._module.directive("hawtioFormGrid",["$templateCache","$interpolate","$compile",function(b,c,d){return{restrict:"A",replace:!0,scope:{configuration:"=hawtioFormGrid"},templateUrl:a.templateUrl+"formGrid.html",link:function(e,f,g){function h(){return[]}function i(){var a=h();if(angular.isDefined(e.configuration.rowSchema.columnOrder)){e.configuration.rowSchema.columnOrder.forEach(function(b){var c=Core.pathGet(e.configuration.rowSchema.properties,[b]);Core.pathSet(c,["key"],b),a.push(c)})}return angular.forEach(e.configuration.rowSchema.properties,function(b,c){a.some(function(a){return a.key===c})||(b.key=c,a.push(b))}),a}function j(){var a=f.find("thead");return a.empty(),a.append(b.get("rowTemplate.html")).find("tr")}function k(a){var d=j();a.forEach(function(a){var f=a.label||a.key
;e.configuration.rowSchema.disableHumanizeLabel||(f=f.titleize());var g=a.headerTemplate||b.get("headerCellTemplate.html"),h=c(g);d.append(h({label:f}))}),d.append(b.get("emptyHeaderCellTemplate.html"))}function l(){var a=f.find("tbody");return a.empty(),a}function m(){return angular.element(b.get("rowTemplate.html"))}function n(d,f){e.configuration.rows.forEach(function(e,g){var h=m();d.forEach(function(d){var e=a.mapType(d.type);if("number"===e&&"input-attributes"in d){var f=d.template||b.get("cellNumberTemplate.html"),i=c(f);h.append(i({row:"configuration.rows["+g+"]",type:e,key:d.key,min:d["input-attributes"].min?d["input-attributes"].min:"",max:d["input-attributes"].max?d["input-attributes"].max:""}))}else{var f=d.template||b.get("cellTemplate.html"),i=c(f);h.append(i({row:"configuration.rows["+g+"]",type:e,key:d.key}))}});var i=c(b.get("deleteRowTemplate.html"));h.append(i({index:g})),f.append(h)})}e.removeThing=function(a){e.configuration.rows.removeAt(a)},e.addThing=function(){e.configuration.rows.push(e.configuration.onAdd())},e.getHeading=function(){return Core.isBlank(e.configuration.rowName)?"items".titleize():e.configuration.rowName.pluralize().titleize()},e.$watch("configuration.noDataTemplate",function(a,c){var g=e.configuration.noDataTemplate||b.get("heroUnitTemplate.html");f.find(".nodata").html(d(g)(e))}),e.$watch("configuration.rowSchema",function(a,b){if(a!==b){k(i())}},!0),e.$watchCollection("configuration.rows",function(a,b){if(a!==b){var c=l(),f=i(),g=angular.element("<div></div>");n(f,g),c.append(d(g.children())(e))}})}}}])}(Forms||(Forms={}));var FabricRequirements;!function(a){a.DockerConfigController=a.controller("DockerConfigController",["$scope","jolokia","$templateCache",function(b,c,d){b.gridConfig=Forms.createFormGridConfiguration(),b.tableTemplate="",b.requirements.dockerConfiguration||(b.requirements.dockerConfiguration=Fabric.createDockerConfiguration()),b.requirements.dockerConfiguration.hosts||(b.requirements.dockerConfiguration.hosts=[]),b.$watch("requirements.dockerConfiguration.hosts",function(a,c){a!==c&&(b.requirements.$dirty=!0)},!0),Fabric.getDtoSchema(void 0,"io.fabric8.api.DockerConfiguration",c,function(e){a.log.debug("Received dockerConfigurationSchema: ",e),Fabric.getDtoSchema(void 0,"io.fabric8.api.DockerHostConfiguration",c,function(c){a.log.debug("Received dockerHostConfigurationSchema: ",c),["password","passPhrase"].forEach(function(a){Core.pathSet(c,["properties",a,"type"],"password")}),["maximumContainerCount","port"].forEach(function(a){Core.pathSet(c,["properties",a,"type"],"integer"),Core.pathSet(c,["properties",a,"input-attributes","min"],"1"),Core.pathSet(c,["properties",a,"input-attributes","max"],"65535")}),b.gridConfig.rowSchema=c,b.gridConfig.rowName="docker host",b.gridConfig.heading=!0,b.gridConfig.noDataTemplate=d.get("noDataTemplate"),b.gridConfig.rowSchema.columnOrder=["hostName","port","username","password","privateKeyFile","passPhrase","path","preferredAddress","tags"],Core.pathSet(b.gridConfig,["rowSchema","properties","tags","template"],d.get("tagCell.html")),b.gridConfig.rows=b.requirements.dockerConfiguration.hosts,b.gridConfig.onAdd=function(){var a=Fabric.createDockerHostConfiguration();return a.hostName="New Host",a},b.tableTemplate=d.get("tableTemplate"),Core.$apply(b)})})}])}(FabricRequirements||(FabricRequirements={}));var Health;!function(a){function b(a){var b=c(a);return!!b&&(!angular.isArray(b)||b.length>=1)}function c(a){if(a){var b=a.mbeanServicesToDomain.Health||{},c=a.selection;if(c){var d=c.domain;if(d){var e=b[d];if(e)return e}}if(b){var f=[];return angular.forEach(b,function(a){angular.isArray(a)?f=f.concat(a):f.push(a)}),f}return null}}function d(a){a.levelSorting={ERROR:0,WARNING:1,INFO:2},a.colorMaps={ERROR:{Health:"#ff0a47",Remaining:"#e92614"},WARNING:{Health:"#33cc00",Remaining:"#f7ee09"},INFO:{Health:"#33cc00",Remaining:"#00cc33"}},a.showKey=function(a){return"colorMap"!==a&&"data"!==a},a.sanitize=function(b){var c={};return Object.extended(b).keys().forEach(function(d){a.showKey(d)&&b[d]&&(c[d]=b[d])}),c},a.getTitle=function(a){return a?a.healthId.endsWith("profileHealth")?"Profile: <strong>"+a.profile+"</strong>":"HealthID: <strong>"+a.healthId+"</strong>":""},a.generateChartData=function(b){var c=0,d=1;if("healthPercent"in b){c=b.healthPercent.round(3),d=1-c,d=d.round(3)}b.data={total:1,terms:[{term:"Health",count:c},{term:"Remaining",count:d}]},b.colorMap=a.colorMaps[b.level]}}a.log=Logger.get("Health"),a.healthDomains={"org.apache.activemq":"ActiveMQ","org.apache.camel":"Camel","io.fabric8":"Fabric8"},a.hasHealthMBeans=b,a.getHealthMBeans=c,a.decorate=d}(Health||(Health={}));var FabricRequirements;!function(a){a.ProfileRequirementsController=a.controller("ProfileRequirementsController",["$scope","jolokia","$templateCache",function(b,c,d){Health.decorate(b),b.hideTitle=!0,b.healthTemplate="",Core.registerForChanges(c,b,{type:"exec",mbean:Fabric.healthMBean,operation:"healthList",arguments:[]},function(c){b.fabricHealth=ObjectHelpers.toMap(c.value,"profile",b.generateChartData),Core.isBlank(b.healthTemplate)?b.healthTemplate=d.get("healthTemplate.html"):b.healthTemplate=b.healthTemplate+" ",a.log.debug("Got health mbean list: ",b.fabricHealth),Core.$apply(b)}),b.profileRequirementsString=angular.toJson((b.requirements||{}).profileRequirements||[],!0),b.remove=function(a){var c=b.requirements.profileRequirements.length;b.requirements.profileRequirements.remove(function(b){return b.profile===a.profile}),c>b.requirements.profileRequirements.length&&(b.requirements.$dirty=!0)}}])}(FabricRequirements||(FabricRequirements={}));var FabricRequirements;!function(a){a.SshConfigController=a.controller("SshConfigController",["$scope","jolokia","$templateCache",function(b,c,d){b.forms={sshConfig:{}},b.tableTemplate="",b.requirements.sshConfiguration||(b.requirements.sshConfiguration=Fabric.createSshConfiguration()),b.requirements.sshConfiguration.hosts||(b.requirements.sshConfiguration.hosts=[]),b.gridConfig=Forms.createFormGridConfiguration(),b.$watch("requirements.sshConfiguration.hosts",function(a,c){a!==c&&(b.requirements.$dirty=!0)},!0),b.$watch("forms.sshConfig.$dirty",function(a){a&&(b.requirements.$dirty=!0)}),b.noop=function(){},Fabric.getDtoSchema(void 0,"io.fabric8.api.SshConfiguration",c,function(e){Fabric.getDtoSchema(void 0,"io.fabric8.api.SshHostConfiguration",c,function(c){["defaultPassword","defaultPassPhrase"].forEach(function(a){Core.pathSet(e,["properties",a,"type"],"password")}),Core.pathSet(e,["properties","defaultPort","type"],"integer"),Core.pathSet(e,["properties","defaultPort","input-attributes","min"],"1"),["password","passPhrase"].forEach(function(a){Core.pathSet(c,["properties",a,"type"],"password")}),["maximumContainerCount","port"].forEach(function(a){Core.pathSet(c,["properties",a,"type"],"integer"),Core.pathSet(c,["properties",a,"input-attributes","min"],"1"),Core.pathSet(c,["properties",a,"input-attributes","max"],"65535")}),e.tabs={Defaults:["defaultUsername","defaultPassword","defaultPort","defaultPrivateKeyFile","defaultPassPhrase","defaultPath","*"]},delete e.properties.hosts,b.gridConfig.rowSchema=c,b.gridConfig.rowName="host",b.gridConfig.heading=!0,b.gridConfig.noDataTemplate=d.get("noDataTemplate"),b.gridConfig.rowSchema.columnOrder=["hostName","port","username","password","privateKeyFile","passPhrase","path","preferredAddress","tags"],Core.pathSet(b.gridConfig,["rowSchema","properties","tags","template"],d.get("tagCell.html")),b.gridConfig.rows=b.requirements.sshConfiguration.hosts,b.gridConfig.onAdd=function(){var a=Fabric.createSshHostConfiguration();return a.hostName="New Host",a},a.log.debug("gridConfig: ",b.gridConfig),b.formConfig=e,b.tableTemplate=d.get("tableTemplate"),Core.$apply(b)})})}])}(FabricRequirements||(FabricRequirements={}));var Fabric;!function(a){a._module.controller("Fabric.ActiveProfileController",["$scope","jolokia",function(b,c){b.managerMBean=a.managerMBean,b.addToDashboardLink=function(){var a=angular.toJson({size_y:1,size_x:5});return"#/dashboard/add?tab=dashboard&href="+encodeURIComponent("#/fabric/activeProfiles")+"&size="+encodeURIComponent(a)+"&title="+encodeURIComponent("Active Profiles")}}])}(Fabric||(Fabric={}));var Fabric;!function(a){a._module.controller("Fabric.FabricApisController",["$scope","localStorage","$routeParams","$location","jolokia","workspace","$compile","$templateCache",function(b,c,d,e,f,g,h,i){function j(a){var b=a.objectName;if(b){var c=Core.objectNameProperties(b);c&&angular.forEach(c,function(b,c){a[c]||(a[c]=b)})}return null}function k(a,b,c){void 0===c&&(c=""),angular.forEach(b,function(b,d){function e(a){return angular.forEach(["container","objectName"],function(c){var d=b[c];d&&(a+="&"+c+"="+encodeURIComponent(d))}),a}var f=c+"/"+d,g=b.services;if(g&&angular.isArray(g)&&b.id){if(b.path=f,g.length){var h=g[0];b.endpoint=h,j(b),h=Core.useProxyIfExternal(h),b.serviceName=Core.trimQuotes(b.service);var i=b.apidocs,l=b.wadl,m=b.wsdl;i&&(b.apidocsHref=e("/hawtio-swagger/index.html?baseUri="+h+i)),l&&(b.wadlHref=e("#/fabric/api/wadl?wadl="+encodeURIComponent(h+l))),m&&(b.wsdlHref=e("#/fabric/api/wsdl?wsdl="+encodeURIComponent(h+m)))}a.push(b)}else k(a,b,f)})}function l(a){b.initDone=!0;var c=null;if(a&&(c=a.value),b.responseJson!==c){b.apis=[],b.responseJson=c;try{var d=JSON.parse(c);k(b.apis,d),Core.$apply(b)}catch(a){console.log("Failed to parse JSON "+a),console.log("JSON: "+c)}}}if(b.path="apis",a.initScope(b,e,f,g),b.apis=null,b.selectedApis=[],b.initDone=!1,b.versionId=a.getDefaultVersionId(f),b.apiOptions={data:"apis",showFilter:!1,showColumnMenu:!1,filterOptions:{filterText:"",useExternalFilter:!1},selectedItems:b.selectedApis,rowHeight:32,showSelectionCheckbox:!1,selectWithCheckboxOnly:!0,columnDefs:[{field:"serviceName",displayName:"Service",cellTemplate:'<div class="ngCellText">{{row.entity.serviceName}}</div>',width:"***"},{field:"wadlHref",displayName:"APIs",cellTemplate:'<div class="ngCellText"><a ng-show="row.entity.apidocsHref" ng-href="{{row.entity.apidocsHref}}"><i class="icon-puzzle-piece"></i> Swagger</a> <a ng-show="row.entity.wadlHref" ng-href="{{row.entity.wadlHref}}"><i class="icon-puzzle-piece"></i> WADL</a> <a ng-show="row.entity.wsdlHref" ng-href="{{row.entity.wsdlHref}}"><i class="icon-puzzle-piece"></i> WSDL</a></div>',sortable:!1,width:"*"},{field:"container",displayName:"Container",cellTemplate:'<div class="ngCellText"><span fabric-container-link="{{row.entity.container}}"/></div>',width:"*"},{field:"version",displayName:"Version",cellTemplate:'<div class="ngCellText">{{row.entity.version}}</div>',width:"*"},{field:"endpoint",displayName:"Location",cellTemplate:'<div class="ngCellText"><a target="endpoint" href="{{row.entity.endpoint}}">{{row.entity.endpoint}}</a></div>',width:"***"}]},a.fabricCreated(g)){var m={type:"exec",mbean:a.managerMBean,operation:"clusterJson",arguments:[b.path]};scopeStoreJolokiaHandle(b,f,f.register(l,m))}}])}(Fabric||(Fabric={}));var Fabric;!function(a){a.AssignProfileController=a._module.controller("Fabric.AssignProfileController",["$scope","jolokia","$location","$routeParams","workspace","ProfileCart",function(b,c,d,e,f,g){b.profileId=e.pid,b.versionId=e.vid,g.length>0&&(b.profileId=g.map(function(a){return a.id}),b.versionId=g.first().versionId),a.initScope(b,d,c,f),b.containerIdFilter="";var h=!0;b.profileId||(a.log.debug("No profile ID specified, redirecting to app view"),h=!1),!b.versionId&&h&&(a.log.debug("No version ID specified, redirecting to app view"),h=!1),h||d.path("/profiles"),b.gotoCreate=function(){var a=b.profileId;angular.isArray(a)&&(a=a.join(",")),d.path("/fabric/containers/createContainer").search({versionId:b.versionId,profileIds:a})},b.$watch("containers",function(a,c){a!==c&&a&&(b.selected=a.filter(function(a){return a.selected}))},!0),b.assignProfiles=function(){var e=[],f=b.profileId;angular.isArray(f)||(f=[f]),b.selected.forEach(function(b){e.push({type:"exec",mbean:a.managerMBean,operation:"addProfilesToContainer",arguments:[b.id,f]})});var h=e.length;c.request(e,onSuccess(function(){0===(h-=1)&&(Core.notification("success","Applied "+b.profileId),SelectionHelpers.clearGroup(g),Core.$apply(b))})),setTimeout(function(){d.path("/fabric/containers"),Core.$apply(b)},30)}}])}(Fabric||(Fabric={}));var Fabric;!function(a){a.FabricBrokersController=a._module.controller("Fabric.FabricBrokersController",["$scope","localStorage","$routeParams","$location","jolokia","workspace","$compile","$templateCache",function(b,c,d,e,f,g,h,i){function j(a){var c=b.searchFilter;return!c||a&&a.toLowerCase().has(c.toLowerCase())}function k(c){function d(a,b,c,d){var e=a.find(function(a){return a&&a.id===b});if(!e){e=d(),e.id=b,a.push(e);var f=c[b];e.expanded=!f||f.expanded,c[b]=e}return e}if(c){var e=angular.toJson(c.value);if(b.responseJson===e)return;b.responseJson=e;var f=c.value;b.groups=[];var g=b.maps;angular.forEach(f,function(a){var c=a.group||"Unknown",e=a.profile||"Unknown",f=a.brokerName||"Unknown",h=a.container,i=a.version||"1.0",j=d(b.groups,c,g.group,function(){return{profiles:[]}}),k=d(j.profiles,e,g.profile,function(){return{group:c,version:i,requirements:{minimumInstances:a.minimumInstances},brokers:[],containers:{}}}),l=(a.networks||[]).join(","),m=d(k.brokers,f,g.broker,function(){return{group:c,profile:e,version:i,containers:[],connectTo:l}});if(h){var n=d(m.containers,h,g.container,function(){return a});n.master&&(n.masterTooltip=" is the master for broker: "+f),k.containers[h]=n}}),angular.forEach(b.groups,function(b){angular.forEach(b.profiles,function(b){angular.forEach(b.brokers,function(a){a.containers=a.containers.sortBy(function(a){return a.id})});var c=Object.values(b.containers).length,d=b.requirements.minimumInstances||0,e=b.requirements.maximumInstances||-1;b.requireStyle=a.containerCountBadgeStyle(d,e,c),b.count=c,b.requiredToolTip="this profile requires "+Core.maybePlural(d,"container")+" to be running but is currently running "+Core.maybePlural(c,"container"),d>c&&(b.requiredToolTip+=". click here to create more containers")})}),Core.$apply(b)}}if(a.initScope(b,e,f,g),b.maps={group:{},profile:{},broker:{},container:{}},b.version=d.versionId,"default-version"==b.version&&(b.version=a.getDefaultVersionId(f)),b.selectedVersion={id:b.version},b.showBroker=function(b){var d=b.version,h=b.profile,i=b.id,j=a.brokerConfigLink(g,f,c,d,h,i);e.path(j)},b.connectToBroker=function(c,d){a.connectToBroker(b,c)},b.createBroker=function(a,c){var d={};if(a){var f=a.id;f&&(d.group=f)}if(c){var g=c.id;g&&(d.profile=g)}e.url("/fabric/mq/"+b.selectedVersion.id+"/createBroker").search(d)},b.groupMatchesFilter=function(a){return j(a.id)||a.profiles.find(function(a){return b.profileMatchesFilter(a)})},b.profileMatchesFilter=function(a){return j(a.id)||j(a.group)||j(a.version)||a.brokers.find(function(a){return b.brokerMatchesFilter(a)})},b.brokerMatchesFilter=function(a){return j(a.id)||j(a.group)||j(a.version)||a.containers.find(function(a){return b.containerMatchesFilter(a)})},b.containerMatchesFilter=function(a){return j(a.id)||j(a.group)||j(a.profile)||j(a.version)||j(a.brokerName)||a.master&&b.searchFilter&&b.searchFilter.has("master")},a.hasMQManager){var l=null;b.$watch("selectedVersion.id",function(c,d){Core.isBlank(c)||(l&&l(),l=Core.register(f,b,{type:"exec",mbean:a.mqManagerMBean,operation:"loadBrokerStatus(java.lang.String)",arguments:[c]},onSuccess(k)))})}}])}(Fabric||(Fabric={}));var Fabric;!function(a){a._module.controller("Fabric.ClusterController",["$scope","$location","$routeParams","workspace","jolokia","$templateCache",function(b,c,d,e,f,g){function h(){j();var c=a.getZooKeeperFacadeMBean(e);c&&f.execute(c,"read",b.path,onSuccess(i))}function i(a){if(b.children=[],b.stringData=null,b.html=null,a&&(angular.forEach(a.children,function(a){b.children.push({name:a})}),!b.children.length)){var c=a.stringData;if(c){b.stringData=c;var d=Core.tryParseJson(c);b.html=d?Core.valueToHtml(d):c}}Core.$apply(b)}function j(){var a="#/fabric/clusters";b.breadcrumbs=[{href:a+"/",name:"/"}];var c=b.path,d=c?c.split("/"):[];angular.forEach(d,function(c){c&&(c.startsWith("/")||a.endsWith("/")||(a+="/"),a+=c,b.breadcrumbs.push({href:a,name:c}))})}b.path=d.page||"/",b.path.startsWith("/")||(b.path="/"+b.path),b.getIconClass=Wiki.iconClass,b.gridOptions={data:"children",displayFooter:!1,sortInfo:{fields:["name"],directions:["asc"]},columnDefs:[{field:"name",displayName:"Name",cellTemplate:g.get("fileCellTemplate.html"),headerCellTemplate:g.get("fileColumnTemplate.html"),cellFilter:""}]},b.isTabActive=function(a){var b=Core.trimLeading(a,"#");return c.path()===b},b.childLink=function(a){var d="#/fabric/clusters/"+Core.trimLeading(b.path,"/")+"/",e=a.name;return Core.createHref(c,d+e+"")},b.$watch("workspace.tree",function(){setTimeout(h,50)}),b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(h,50)}),h()}])}(Fabric||(Fabric={}));var Log;!function(a){function b(a){if(!a)return"";var b=a.entity;return f(b?b:a)}function c(a){return a.treeContainsDomainAndProperties("hawtio",{type:"LogQuery"})||a.treeContainsDomainAndProperties("io.fabric8.insight",{type:"LogQuery"})}function d(a){return a.hasDomainAndProperties("hawtio",{type:"LogQuery"})||a.hasDomainAndProperties("io.fabric8.insight",{type:"LogQuery"})}function e(a){var b=a.findMBeanWithProperties("hawtio",{type:"LogQuery"});return b||(b=a.findMBeanWithProperties("io.fabric8.insight",{type:"LogQuery"})),b?b.objectName:null}function f(b){var c=a.removeQuestion(b.fileName),d=a.removeQuestion(b.className),e=b.properties,f="";if(e&&(f=e["maven.coordinates"]),f&&c){var g="#/source/view/"+f+"/class/"+d+"/"+c,h=b.lineNumber;return h&&(g+="?line="+h),g}return""}function g(a){var b=a.properties;if(!b)return!1;var c="";return b&&(c=b["maven.coordinates"]),angular.isDefined(c)&&""!==c}function h(a){var b=a.lineNumber;return angular.isDefined(b)&&""!==b&&"?"!==b}function i(a){return a&&"?"!==a?a:null}function j(b){if(!b)return"";if(!angular.isArray(b)&&angular.isString(b)&&(b=b.split("\n")),!angular.isArray(b))return"";var c='<ul class="unstyled">\n';return b.each(function(b){c+="<li>"+a.formatStackLine(b)+"</li>\n"}),c+="</ul>\n"}function k(a){var b=m.exec(a);if(b&&b.length>6){var c=b[1],d=b[4],a=b[5],e=b[6];if(c&&d&&e){var f=c,g=c.lastIndexOf(".");g>0&&(f=c.substring(0,g));var h="#/source/view/"+e+"/class/"+f+"/"+d;return angular.isDefined(a)&&(h+="?line="+a),"<div class='stack-line'>  at <a href='"+h+"'>"+c+"</a>(<span class='fileName'>"+d+"</span>:<span class='lineNumber'>"+a+"</span>)[<span class='mavenCoords'>"+e+"</span>]</div>"}}var i=!0;return a&&(a=a.trim(),a.startsWith("at")&&(a="  "+a,i=!1)),i?'<pre class="stack-line bold">'+a+"</pre>":'<pre class="stack-line">'+a+"</pre>"}function l(a){var b=a.logCacheSize;return b?parseInt(b):1e3}a.log=Logger.get("Logs"),a.logSourceHref=b,a.treeContainsLogQueryMBean=c,a.isSelectionLogQueryMBean=d,a.findLogQueryMBean=e,a.logSourceHrefEntity=f,a.hasLogSourceHref=g,a.hasLogSourceLineHref=h,a.removeQuestion=i;var m=/\s*at\s+([\w\.$_]+(\.([\w$_]+))*)\((.*)?:(\d+)\).*\[(.*)\]/;a.formatStackTrace=j,a.formatStackLine=k,a.getLogCacheSize=l}(Log||(Log={}));var Fabric;!function(a){a._module.controller("Fabric.ContainerController",["$scope","$routeParams","$location","jolokia","workspace","userDetails",function(b,c,d,e,f,g){function h(a){var c=a.value;c&&(b.mavenRepoUploadUri=c.MavenRepoUploadURI,b.mavenRepoDownloadUri=c.MavenRepoURI,b.zookeeperUrl=c.ZookeeperUrl)}function i(c){angular.isDefined(b.responseJson)||(b.loading=!1);var d=angular.toJson(c.value);if(b.responseJson!==d){if(b.responseJson=d,b.row=c.value,b.container=b.row,b.row){var e=b.row;e.debugHost=e.publicIp||e.localHostname||e.localIp||e.ip||e.manualIp,angular.isDefined(b.row.provisionException)&&angular.isString(b.row.provisionException)&&(b.row.provisionExceptionArray=b.row.provisionException.lines()),b.services=a.getServiceList(b.row),angular.isDefined(b.resolverWatch)&&angular.isFunction(b.resolverWatch)&&b.resolverWatch(),b.resolverWatch=b.$watch("row.resolver",function(a,c){a!==c&&b.updateContainerProperty("resolver",b.row)}),b.row.jmxDomains&&b.row.jmxDomains.length>0&&(b.row.jmxDomains=b.row.jmxDomains.sortBy(function(a){return a.toString().toLowerCase()})),b.displayJvmOpts()&&b.getJvmOpts()}Core.$apply(b)}}a.initScope(b,d,e,f);var j=["getContainer(java.lang.String)","getContainer(java.lang.String, java.util.List)"];if(b.inDashboard?b.operation=j[1]:b.operation=j[0],b.mavenRepoUploadUri,b.mavenRepoDownloadUri,b.zookeeperUrl,b.username=g.username,b.password=g.password,b.knownTabs=["Status","Settings","URLs","Provision list"],b.tab=c.tab,b.tab?b.knownTabs.any(function(a){return a==b.tab})||(b.tab="Status"):b.tab="Status",b.$watch("tab",function(a,b){a!==b&&d.search({tab:a}).replace()}),b.loading=!0,b.containerId=c.containerId,b.addToDashboardLink=function(){var a=angular.toJson(c),d=b.containerId;return"#/dashboard/add?tab=dashboard&href="+encodeURIComponent("#/fabric/container/:containerId")+"&routeParams="+encodeURIComponent(a)+"&title="+encodeURIComponent(d)},b.versionTitle="Migrate to:",b.selectedProfiles=[],b.selectedProfilesDialog=[],b.selectedProfilesString="",b.addProfileDialog=new UI.Dialog,b.deleteProfileDialog=new UI.Dialog,b.deleteContainerDialog=new UI.Dialog,b.$watch("selectedProfiles",function(a,c){a!==c&&(b.selectedProfilesString="",b.selectedProfiles.each(function(a){b.selectedProfilesString+="<li>"+a.id+"</li>\n"}))},!0),b.stop=function(){ContainerHelpers.doStopContainer(b,e,b.containerId)},b.start=function(){ContainerHelpers.doStartContainer(b,e,b.containerId)},b.statusIcon=function(){return a.statusIcon(b.row)},b.getGitURL=function(a){var c=a?a.replace("jolokia","git/fabric"):null;if(null!==c){var d="git clone -b 1.0 "+c;null!==b.username&&null!==b.password&&(d=d.replace("://","://"+b.username+":"+b.password+"@")),c=d}return c},b.getSshURL=function(a){if(!a)return"";var c=a;if(null!==b.username&&null!==b.password){var d=a.split(":");2===d.length&&(c="ssh -p "+d[1]+" "+b.username+"@"+d[0])}return c},b.getJmxURL=function(a){return a},b.getType=function(){return b.row?b.row.ensembleServer?"Fabric Server":b.row.managed?"Managed Container":"Unmanaged Container":""},b.updateContainerProperty=function(c,d){a.setContainerProperty(e,d.id,c,d[c],function(){Core.$apply(b)},function(a){Core.notification("error","Failed to set container property due to : "+a.error),Core.$apply(b)})},b.updateJvmOpts=function(){e.execute(a.managerMBean,"setJvmOpts(java.lang.String,java.lang.String)",b.containerId,b.jvmOpts,onSuccess(function(){Core.$apply(b)},{error:function(b){a.log.debug(b.error)}}))},b.getJvmOpts=function(){e.execute(a.managerMBean,"getJvmOpts(java.lang.String)",b.containerId,onSuccess(function(a){b.jvmOpts=a,Core.$apply(b)},{error:function(b){a.log.debug(b.error)}}))},b.displayJvmOpts=function(){var a=!1;if(b.row)try{var c=b.row.metadata.createOptions.providerType;"karaf"!=b.row.type||"child"!=c&&"ssh"!=c||(a=!0)}catch(a){}return a},b.getClass=function(a){return b.provisionListFilter?Core.matchFilterIgnoreCase(a,b.provisionListFilter)?"match-filter":"no-match-filter":"no-filter"},b.addProfiles=function(){b.addProfileDialog.close();var c=b.selectedProfilesDialog.map(function(a){return a.id}),d=Core.maybePlural(c.length,"profile");a.addProfilesToContainer(e,b.row.id,c,function(){Core.notification("success","Successfully added "+d),b.selectedProfilesDialog=[],b.$broadcast("fabricProfileRefresh"),Core.$apply(b)},function(a){Core.notification("error","Failed to add "+d+" due to "+a.error),b.selectedProfilesDialog=[],Core.$apply(b)})},b.getArguments=function(){return b.inSafeMode?[b.containerId,["alive","aliveAndOK","children","childrenIds","debugPort","ensembleServer","geoLocation","httpUrl","id","ip","jmxDomains","jmxUrl","jolokiaUrl","localHostname","localIp","location","manualIp","maximumPort","metadata","minimumPort","parent","parentId","processId","profileIds","profiles","provisionChecksums","provisionException","provisionList","provisionResult","provisionStatus","provisionStatusMap","provisioningComplete","provisioningPending","publicHostname","publicIp","resolver","root","sshUrl","type","version","versionId"]]:b.inDashboard?[b.containerId,["id","versionId","profileIds","provisionResult","jolokiaUrl","alive","jmxDomains","ensembleServer","debugPort"]]:[b.containerId]},b.deleteProfiles=function(){b.deleteProfileDialog.close();var c=b.selectedProfiles.map(function(a){return a.id}),d=Core.maybePlural(c.length,"profile");a.removeProfilesFromContainer(e,b.row.id,c,function(){Core.notification("success","Successfully removed "+d),b.selectedProfiles=[],b.$broadcast("fabricProfileRefresh"),Core.$apply(b)},function(a){Core.notification("error","Failed to remove "+d+" due to "+a.error),b.selectedProfiles=[],Core.$apply(b)})},b.$on("fabricProfileRefresh",function(){setTimeout(function(){e.request({type:"exec",mbean:a.managerMBean,operation:b.operation,arguments:b.getArguments()},{method:"POST",success:function(a){i(a)}})},500)}),angular.isDefined(b.containerId)){Core.register(e,b,{type:"read",mbean:a.managerMBean,attribute:["MavenRepoURI","MavenRepoUploadURI","ZookeeperUrl"]},onSuccess(h));try{e.execute(a.managerMBean,b.operation,b.getArguments())}catch(a){b.inSafeMode=!0,b.operation=j[1]}Core.register(e,b,{type:"exec",mbean:a.managerMBean,operation:b.operation,arguments:b.getArguments()},onSuccess(i))}b.formatStackTrace=function(a){return Log.formatStackTrace(a)}}])}(Fabric||(Fabric={}));var Fabric;!function(a){function b(b,c,d,e,f,g,h){b.containerArgs=["id","alive","parentId","profileIds","versionId","provisionResult","jolokiaUrl","root","jmxDomains","type","metadata","location"],b.profileFields=["id","hidden"],b.containersOp="containers(java.util.List, java.util.List)",b.ensembleContainerIdListOp="EnsembleContainers",b.containers=[],b.activeProfiles=[],b.selectedContainers=[],b.selectedContainerIds=[],b.showSelect=!0,b.requirements=null,b.name="ContainerListDirectiveController",a.initScope(b,f,e,g),SelectionHelpers.decorate(b),b.currentPage=h.get("addProfileRequirements"),b.editRequirements={dialog:new UI.Dialog,excludeProfiles:[],selectedProfiles:[],excludeDependentProfiles:[],selectedDependentProfiles:[],addDependentProfileDialog:new UI.Dialog,versionId:null,addProfileSelectShow:!1,dialogOpen:function(a){var c={profileRequirements:[]};b.requirements&&angular.copy(b.requirements,c);var d=c.profileRequirements;d&&angular.forEach(b.activeProfiles,function(a){var b=a.requirements;b||(b={profile:a.id},a.requirements=b),d.find(function(a){return a.profile===b.profile})||d.push(b)}),!a&&b.activeProfiles.length&&(a=b.activeProfiles[0]),a&&(b.editRequirements.versionId=a.versionId),b.editRequirements.entity=c,b.editRequirements.dialog.open()},addDependentProfileDialogOpen:function(a){b.editRequirements.addDependentProfileDialogProfile=a.profile,b.editRequirements.selectedDependentProfiles.splice(0,b.editRequirements.selectedDependentProfiles.length),b.editRequirements.excludeDependentProfiles=[a.profile].concat(a.dependentProfiles||[]),b.editRequirements.addDependentProfilesToRequirement=a,b.editRequirements.addDependentProfileDialogShow=!0},addDependentProfileDialogHide:function(){b.editRequirements.addDependentProfileDialogShow=!1},addDependentProfileDialogApply:function(){var a=b.editRequirements.addDependentProfilesToRequirement;angular.forEach(b.editRequirements.selectedDependentProfiles,function(b){var c=b.id;c&&a&&(a.dependentProfiles||(a.dependentProfiles=[]),a.dependentProfiles.find(function(a){return a===c})||a.dependentProfiles.push(c))}),b.editRequirements.addDependentProfileDialogHide()},addProfileRequirementOpen:function(){b.editRequirements.selectedProfiles.splice(0,b.editRequirements.selectedProfiles.length),b.editRequirements.excludeProfiles=b.editRequirements.entity.profileRequirements.map(function(a){return a.profile}),b.editRequirements.addProfileRequirementShow=!0},addProfileRequirementHide:function(){b.editRequirements.addProfileRequirementShow=!1},addProfileRequirementApply:function(){var a=b.editRequirements.entity,c=a.profileRequirements;c||(c=[],a.profileRequirements=c),angular.forEach(b.editRequirements.selectedProfiles,function(a){var b=a.id;b&&c.push({profile:b})}),b.editRequirements.addProfileRequirementHide()}},b.getFilteredName=function(a){return a.versionId+" / "+a.id},b.filterContainer=function(a){var c=b.containerIdFilter,d=b.getFilteredName(a);if(!Core.matchFilterIgnoreCase(d,c)){var e=a.profileIds;return!!e&&e.any(function(a){return Core.matchFilterIgnoreCase(a,c)})}return!0},b.$watch("editRequirements.addDependentProfileDialogShow",function(a,c){a!==c&&(b.currentPage=a?h.get("addDependentProfile"):h.get("addProfileRequirements"))}),b.$watch("editRequirements.addProfileRequirementShow",function(a,c){a!==c&&(b.currentPage=a?h.get("addProfileRequirement"):h.get("addProfileRequirements"))}),b.updateActiveProfiles=function(){var a=b.activeProfiles;b.activeProfiles=b.getActiveProfiles(),b.activeProfiles.each(function(b){var c=a.find(function(a){return a.id===b.id&&a.versionId===b.versionId});c?(b.selected=c.selected,b.expanded=c.expanded):(b.selected=!1,b.expanded=!1)})},b.updateContainers=function(c){var d=angular.toJson(c);if(b.containersResponse!==d){b.containersResponse=d,c=c.sortBy("id");var e=c.exclude(function(a){return!a.root}),f=c.exclude(function(a){return a.root});if(f.length>0){var g=[];e.each(function(a){g.add(a);var b=f.exclude(function(b){return b.parentId!==a.id});g.add(b)}),c=g}angular.isDefined(b.atVersion)&&(c=c.filter(function(a){return a.versionId===b.atVersion})),angular.isDefined(b.withoutProfile)&&(c=c.filter(function(a){return!a.profileIds.any(function(a){return a===b.withoutProfile})})),c.each(function(c){c.services=a.getServiceList(c),c.icon=a.getTypeIcon(c);var d=b.containers.find(function(a){return a.id===c.id});c.selected=!!d&&d.selected,b.selectedContainerIds.any(c.id)&&(c.selected=!0)}),b.containers=c,b.updateActiveProfiles(),Core.$apply(b)}},b.getActiveProfiles=function(){var c=[];return b.containers.each(function(a){a.profileIds.each(function(b){var d=a.profiles.find(function(a){return a.id===b});if(!d||!Core.parseBooleanValue(d.hidden)){var e=c.find(function(c){return c.versionId===a.versionId&&c.id===b});e?(e.containers=e.containers.include(a.id).unique(),e.count=e.containers.length):c.push({id:b,count:1,versionId:a.versionId,containers:[a.id],selected:!1,requirements:null,requireStyle:null})}})}),b.requirements&&angular.forEach(b.requirements.profileRequirements,function(d){function e(){var b=0;return i&&(b=i.count),a.containerCountBadgeStyle(g,h,b)}var f=d.profile,g=d.minimumInstances,h=d.maximumInstances;if(f){var i=c.find(function(a){return a.id===f});i?(i.requirements=d,i.requireStyle=e()):c.push({id:f,count:0,versionId:b.requirements.version||"1.0",containers:[],selected:!1,requirements:d,requireStyle:e()})}}),c},b.updateEnsembleContainerIdList=function(a){var c=angular.toJson(a);b.ensembleContainerIdsResponse!==c&&(b.ensembleContainerIdsResponse=c,b.ensembleContainerIds=a,Core.$apply(b))},b.dispatch=function(a){switch(a.request.operation){case b.containersOp:return void b.updateContainers(a.value)}switch(a.request.attribute){case b.ensembleContainerIdListOp:return void b.updateEnsembleContainerIdList(a.value)}},b.setActiveProfile=function(a){b.clearSelection(b.activeProfiles),a&&null!==a&&(a.selected=!0)},Core.register(e,b,[{type:"exec",mbean:a.managerMBean,operation:b.containersOp,arguments:[b.containerArgs,b.profileFields]},{type:"read",mbean:a.clusterManagerMBean,attribute:b.ensembleContainerIdListOp}],onSuccess(b.dispatch,{silent:!0}))}function c(a,b,c){a.showSelect=Core.parseBooleanValue(UI.getIfSet("showSelect",c,"true"));var d=UI.getIfSet("atVersion",c,null),e=UI.getIfSet("withoutProfile",c,null);null!==d&&(a.atVersion=a.$eval(d)),null!==e&&(a.withoutProfile=a.$eval(e))}function d(c,d,e,f,g,h,i,j){function k(a){var b=angular.toJson(a.value);b!==c.requirementsResponse&&(c.requirementsResponse=b,
c.requirements=a.value,c.updateActiveProfiles(),Core.$apply(c))}b(c,d,e,f,g,h,i),c.name="ActiveProfileListController",c.searchFilter="",c.isOpen=function(a){return""!==c.searchFilter?"opened":"closed"},c.containersForProfile=function(a){return c.containers.filter(function(b){return b.profileIds.some(a)})},c.containersForProfileAndVersion=function(a,b){return c.containers.filter(function(c){return c.profileIds.some(a)&&c.versionId==b})},c.profileMatchesFilter=function(a){var b=c.searchFilter;return Core.matchFilterIgnoreCase(a.id,b)||!a.containers.filter(function(a){return Core.matchFilterIgnoreCase(a,b)}).isEmpty()},c.containerMatchesFilter=function(a){var b=c.searchFilter;return Core.matchFilterIgnoreCase(a.id,b)||!a.profileIds.filter(function(a){return Core.matchFilterIgnoreCase(a,b)}).isEmpty},c.updateRequirements=function(b){function d(a){c.requirements=b,Core.notification("success","Updated the requirements"),c.updateActiveProfiles(),Core.$apply(c)}if(b){c.editRequirements.dialog.close();var e=JSON.stringify(b);f.execute(a.managerMBean,"requirementsJson",e,onSuccess(d))}},Core.register(f,c,{type:"exec",mbean:a.managerMBean,operation:"requirements()"},onSuccess(k))}a.ContainerListDirectiveController=b,a.ContainerListDirectiveLink=c,a.ActiveProfileListController=d}(Fabric||(Fabric={}));var StorageHelpers;!function(a){function b(a){var b=a.$scope.name+":"||"::",c=b+a.modelName,d=a.to||Core.doNothing,e=a.from||Core.doNothing,f=function(b){angular.isFunction(a.onChange)&&a.onChange(b);var e=d(b);return a.localStorage[c]=e,e},g=function(b){return void 0!==b&&null!==b||(b=a.localStorage[c]),e(b)},h=g(void 0);ControllerHelpers.bindModelToSearchParam(a.$scope,a.$location,a.modelName,a.paramName,h||a.initialValue,f,g)}a.bindModelToLocalStorage=b}(StorageHelpers||(StorageHelpers={}));var Fabric;!function(a){a.ContainerViewController=a._module.controller("Fabric.ContainerViewController",["$scope","jolokia","$location","localStorage","$route","workspace","marked","ProfileCart","$dialog",function(b,c,d,e,f,g,h,i,j){function k(a,b,c){angular.isArray(b)?b.forEach(function(b){k(a,b,c)}):a.any(function(a){return b[c]===a[c]})||a.add(b)}function l(a){var b={};return a.forEach(function(a){var c=a.versionId,d=b[c]||{containers:[],profiles:[]};k(d.containers,a,"id"),k(d.profiles,a.profiles,"id"),b[c]=d}),b}function m(a){var b={};return a.forEach(function(a){var c=a.location,d=b[c]||{containers:Array()};k(d.containers,a,"id"),b[c]=d}),b}b.name=a.ContainerViewController.name,b.containers=[],b.selectedContainers=[],b.groupBy="none",b.filter="",b.cartItems=[],b.versionIdFilter="",b.profileIdFilter="",b.locationIdFilter="",b.hasCounts=!0,b.toString=Core.toString,b.filterContainersText="Filter Containers...",b.filterProfilesText="Filter Profiles...",b.filterLocationsText="Filter Locations...",b.filterBoxText=b.filterContainersText,b.selectedTags=[],b.createLocationDialog=ContainerHelpers.getCreateLocationDialog(b,j);var n=["id","profileIds","profiles","versionId","location","alive","type","ensembleServer","provisionResult","root","jolokiaUrl","jmxDomains","metadata","parentId"],o=["id","hidden","version","summaryMarkdown","iconURL","tags"];a.initScope(b,d,c,g),SelectionHelpers.decorate(b),b.viewOnly=!0,StorageHelpers.bindModelToLocalStorage({$scope:b,$location:d,localStorage:e,modelName:"groupBy",paramName:"groupBy",initialValue:b.groupBy}),StorageHelpers.bindModelToLocalStorage({$scope:b,$location:d,localStorage:e,modelName:"versionIdFilter",paramName:"versionIdFilter",initialValue:b.versionIdFilter}),StorageHelpers.bindModelToLocalStorage({$scope:b,$location:d,localStorage:e,modelName:"profileIdFilter",paramName:"profileIdFilter",initialValue:b.profileIdFilter}),StorageHelpers.bindModelToLocalStorage({$scope:b,$location:d,localStorage:e,modelName:"locationIdFilter",paramName:"locationIdFilter",initialValue:b.locationIdFilter}),b.groupByClass=ControllerHelpers.createClassSelector({profileIds:"btn-primary",location:"btn-primary",none:"btn-primary"}),b.$watch("containers",function(a,c){a!==c&&(b.selectedContainers=b.containers.filter(function(a){return a.selected}))},!0),b.maybeShowLocation=function(){return("location"===b.groupBy||"none"===b.groupBy)&&b.selectedContainers.length>0},b.showContainersFor=function(a){angular.isString(a)?b.locationIdFilter=a:(b.profileIdFilter=a.id,b.versionIdFilter=a.version),b.groupBy="none"},b.filterLocation=function(a){return FilterHelpers.searchObject(a,b.filter)},b.filterProfiles=function(a){return FilterHelpers.searchObject(a.id,b.filter)},b.filterContainers=function(a){return!(!Core.isBlank(b.versionIdFilter)&&a.versionId!==b.versionIdFilter)&&(!(!Core.isBlank(b.profileIdFilter)&&!a.profileIds.any(b.profileIdFilter))&&(!(!Core.isBlank(b.locationIdFilter)&&a.location!==b.locationIdFilter)&&FilterHelpers.searchObject(a.id,b.filter)))},b.filterContainer=b.filterContainers,b.viewProfile=function(b){a.gotoProfile(g,c,g.localStorage,d,b.version,b.id)},a.loadRestApi(c,g,void 0,function(d){b.restApiUrl=UrlHelpers.maybeProxy(Core.injector.get("jolokiaUrl"),d.value),a.log.debug("Scope rest API: ",b.restApiUrl),Core.registerForChanges(c,b,{type:"exec",mbean:a.managerMBean,operation:"containers(java.util.List, java.util.List)",arguments:[n,o]},function(d){var e=d.value;SelectionHelpers.sync(b.selectedContainers,e,"id");var f={},g={};e.forEach(function(b){Core.isBlank(b.location)&&(b.location=ContainerHelpers.NO_LOCATION),b.profiles=b.profiles.filter(function(a){return!a.hidden}),b.icon=a.getTypeIcon(b),b.services=a.getServiceList(b)});var f=l(e);angular.forEach(f,function(c,d){c.profiles.forEach(function(d){var e=c.containers.filter(function(a){return a.profileIds.some(d.id)});d.aliveCount=e.count(function(a){return a.alive}),d.deadCount=e.length-d.aliveCount,d.summary=d.summaryMarkdown?h(d.summaryMarkdown):"",d.iconURL=a.toIconURL(b,d.iconURL),d.tags=ProfileHelpers.getTags(d)})});var g=m(e),i=ContainerHelpers.extractLocations(e);b.locationMenu=ContainerHelpers.buildLocationMenu(b,c,i),b.locations=g,b.versions=f;var j=e.sortBy("id"),k=j.exclude(function(a){return!a.root}),n=j.exclude(function(a){return a.root});if(n.length>0){var o=[];k.each(function(a){o.add(a);var b=n.exclude(function(b){return b.parentId!==a.id});o.add(b)}),e=o}b.containers=e,Core.$apply(b)}),Core.registerForChanges(c,b,{type:"read",mbean:a.clusterManagerMBean,attribute:"EnsembleContainers"},function(a){b.ensembleContainerIds=a.value,Core.$apply(b)})})}])}(Fabric||(Fabric={}));var Fabric;!function(a){a._module.controller("Fabric.ContainersController",["$scope","$location","$route","jolokia","workspace","$dialog",function(b,c,d,e,f,g){a.initScope(b,c,e,f),b.selectedContainers=[],b.createLocationDialog=ContainerHelpers.getCreateLocationDialog(b,g),Core.bindModelToSearchParam(b,c,"containerIdFilter","q",""),Core.reloadWhenParametersChange(d,b,c),b.showDeleteButton=function(){return b.selectedContainers.length>0&&b.selectedContainers.all(function(a){return!(b.deletePending[a.id]||a.root&&b.ensembleContainerIds.includes(a.id))})},b.addToDashboardLink=function(){var a=angular.toJson({size_y:1,size_x:4});return"#/dashboard/add?tab=dashboard&href="+encodeURIComponent("#/fabric/containers")+"&size="+encodeURIComponent(a)+"&title="+encodeURIComponent("Containers")},b.$watch("containers",function(a,c){if(a!==c){b.selectedContainers=b.containers.filter(function(a){return a.selected});var d=ContainerHelpers.extractLocations(b.containers);b.locationMenu=ContainerHelpers.buildLocationMenu(b,e,d),b.selectedContainers.length>0&&(b.activeContainerId=""),b.containers.forEach(function(a){Core.isBlank(a.location)&&(a.location=ContainerHelpers.NO_LOCATION)})}},!0)}])}(Fabric||(Fabric={}));var Fabric;!function(a){a.CreateBrokerController=a._module.controller("Fabric.CreateBrokerController",["$scope","localStorage","$routeParams","$location","jolokia","workspace","$compile","$templateCache",function(b,c,d,e,f,g,h,i){function j(){var a=b.entity.group;b.possibleNetworks=[].concat(b.groups),a&&(b.possibleNetworks=b.possibleNetworks.remove(a))}function k(a){delete a.properties.username,delete a.properties.password,delete a.properties.properties;var b="entity.kind == 'Replicated'";Core.pathSet(a.properties,["group","required"],!0),Core.pathSet(a.properties,["group","tooltip"],"The peer group name of message brokers. The group is name is used by messaging clients to connect to a broker; so it represents a peer group of brokers used for load balancing."),Core.pathSet(a.properties,["group","input-attributes","typeahead"],"title for title in groups | filter:$viewValue"),Core.pathSet(a.properties,["group","input-attributes","typeahead-editable"],"true"),Core.pathSet(a.properties,["brokerName","required"],!0),Core.pathSet(a.properties,["brokerName","tooltip"],"The name of the broker."),Core.pathSet(a.properties,["brokerName","input-attributes","autofocus"],"true"),Core.pathSet(a.properties,["parentProfile","tooltip"],"The parent profile used by the profile."),Core.pathSet(a.properties,["parentProfile","input-attributes","typeahead"],"p.id for p in parentProfiles | filter:$viewValue"),Core.pathSet(a.properties,["parentProfile","input-attributes","typeahead-editable"],"false"),Core.pathSet(a.properties,["parentProfile","input-attributes","placeholder"],"{{"+b+" ? 'mq-replicated' : 'mq-base'}}"),Core.pathSet(a.properties,["profile","tooltip"],"The profile to create instances of this broker."),Core.pathSet(a.properties,["profile","input-attributes","typeahead"],"title for title in profiles | filter:$viewValue"),Core.pathSet(a.properties,["profile","input-attributes","typeahead-editable"],"true"),Core.pathSet(a.properties,["profile","input-attributes","placeholder"],"mq-broker-{{entity.group || 'default'}}.{{entity.brokerName || 'brokerName'}}"),Core.pathSet(a.properties,["clientProfile","tooltip"],"The profile used by messaging clients to connect to this group of brokers."),Core.pathSet(a.properties,["clientProfile","input-attributes","typeahead"],"title for title in profiles | filter:$viewValue"),Core.pathSet(a.properties,["clientProfile","input-attributes","typeahead-editable"],"true"),Core.pathSet(a.properties,["clientProfile","input-attributes","placeholder"],"mq-client-{{entity.group || 'default'}}"),Core.pathSet(a.properties,["clientParentProfile","tooltip"],"The parent profile used by the client profile."),Core.pathSet(a.properties,["clientParentProfile","input-attributes","typeahead"],"p.id for p in parentProfiles | filter:$viewValue"),Core.pathSet(a.properties,["clientParentProfile","input-attributes","typeahead-editable"],"false"),Core.pathSet(a.properties,["clientParentProfile","input-attributes","placeholder"],"mq-client-base"),Core.pathSet(a.properties,["parentProfile","input-attributes","placeholder"],"default"),Core.pathSet(a.properties,["data","input-attributes","placeholder"],"${karaf.base}/data/{{entity.brokerName || 'brokerName'}}"),Core.pathSet(a.properties,["configUrl","input-attributes","placeholder"],"profile:broker.xml"),Core.pathSet(a.properties,["replicas","control-group-attributes","ng-show"],b),Core.pathSet(a.properties,["replicas","input-attributes","value"],"{{3}}"),Core.pathSet(a.properties,["replicas","input-attributes","min"],"1"),Core.pathSet(a.properties,["minimumInstances","control-group-attributes","ng-hide"],b),Core.pathSet(a.properties,["minimumInstances","input-attributes","value"],"{{entity.kind == 'StandAlone' ? 1 : 2}}"),Core.pathSet(a.properties,["minimumInstances","input-attributes","min"],"1"),Core.pathSet(a.properties,["networksPassword","type"],"password"),Core.pathSet(a.properties,["networks","items","input-attributes","typeahead-editable"],"true"),Core.pathSet(a.properties,["networks","input-attributes","ng-hide"],"otherEntity.networkConnectAll"),Core.pathSet(a.properties,["networks","tooltip"],"The broker groups to create a store and forward network to"),Core.pathSet(a.properties,["networkConnectAll","type"],"boolean"),Core.pathSet(a.properties,["networkConnectAll","input-attributes","ng-model"],"otherEntity.networkConnectAll"),Core.pathSet(a.properties,["networkConnectAll","label"],"Network to all groups"),Core.pathSet(a.properties,["networkConnectAll","tooltip"],"Should this broker create a store and forward network to all the known groups of brokers"),Core.pathSet(a.properties,["version","input-attributes","value"],"{{'"+d.versionId+"'}}"),Core.pathSet(a.properties,["version","input-attributes","readonly"],"true"),Core.pathSet(a.properties,["version","label"],"Fabric version"),a.tabs={Default:["group","brokerName","kind","profile","clientProfile","data","configUrl","replicas","minimumInstances","version","networkConnectAll","networks"],Advanced:["parentProfile","clientParentProfile","networksUserName","networksPassword","*"]}}function l(c){var d=c.map(function(a){return a.networks}).flatten().unique(),e=c.map(function(a){return a.group}).unique();b.groups=d.concat(e).unique().sort(),b.profiles=c.map(function(a){return a.profile}).unique().sort(),b.brokerNames=c.map(function(a){return a.brokerName}).unique().sort(),j();var g=c.map(function(a){return a.version}).find(function(a){return a})||"1.0";g&&f.execute(a.managerMBean,"getProfiles(java.lang.String,java.util.List)",g,["id","abstract"],onSuccess(m)),Core.$apply(b)}function m(a){a&&(b.parentProfiles=a.filter(function(a){return!a.abstract}).sortBy("id"))}function n(a){Core.notification("success","Created broker "+b.message),Core.$apply(b)}a.initScope(b,e,f,g),b.defaultGroup="default",b.defaultBrokerName="brokerName",b.groups=[],b.possibleNetworks=[],b.profiles=[],b.parentProfiles=[],b.entity={group:b.defaultGroup,ssl:!0,version:d.versionId},b.otherEntity={networkConnectAll:!1},b.forms={},b.onSubmit=function(c,g){b.message=(b.entity.brokerName||"unknown")+" in group "+(b.entity.group||"unknown"),Core.notification("info","Creating broker "+b.message);var h=JSON.stringify(b.entity,null,"  ");f.execute(a.mqManagerMBean,"saveBrokerConfigurationJSON",h,onSuccess(n)),e.path("/fabric/mq/"+d.versionId+"/brokers"),Core.$apply(b)},b.brokerNameExists=function(){var a=b.entity.brokerName;return a&&b.brokerNames.indexOf(a)>=0},b.$watch("entity.group",j),b.$watch("otherEntity.networkConnectAll",function(){b.otherEntity.networkConnectAll&&(b.entity.networks=b.possibleNetworks)}),angular.forEach(["group","profile"],function(a){var c=d[a];c&&(b.entity[a]=c)}),b.entity.kind||(b.entity.kind="MasterSlave"),a.getDtoSchema("brokerConfig","io.fabric8.api.jmx.MQBrokerConfigDTO",f,function(c){b.schema=c,k(c),f.execute(a.mqManagerMBean,"loadBrokerStatus(java.lang.String)",d.versionId,onSuccess(l)),Core.$apply(b)})}])}(Fabric||(Fabric={}));var Fabric;!function(a){a.CreateContainerController=a._module.controller("Fabric.CreateContainerController",["$scope","$element","$compile","$location","workspace","jolokia","localStorage","userDetails","ProfileCart",function(b,c,d,e,f,g,h,i,j){function k(){var a=b.entity.providerType,c=m[a];angular.forEach(c,function(a,c){var d=b.entity[c];d&&(h[a]=d)})}var l=Logger.get("Fabric");b.versionsOp="versions()",b.entity={number:1,saveJmxCredentials:!0};var m={child:{},openshift:{serverUrl:"openshift.serverUrl",domain:"openshift.domain",gearProfile:"openshift.gearProfile"},jclouds:{owner:"jclouds.owner",credential:"jclouds.credential",providerName:"jclouds.providerName",imageId:"jclouds.imageId",hardwareId:"jclouds.hardwareId",locationId:"jclouds.locationId",group:"jclouds.group",instanceType:"jclouds.instanceType"}};b.providers=a.registeredProviders(g),b.selectedProvider=b.providers[Object.extended(b.providers).keys().first()],b.resolvers=[],b.schema={},b.response={},b.versions=[],b.profiles=[],b.selectedVersion={},b.selectedProfiles=[],b.selectedProfileIds="",b.selectedVersionId="",b.profileIdFilter="",b.hideProfileSelector=!1,b.returnTo="/fabric/containerView?groupBy=none",b.nextPage="/fabric/containerView?groupBy=none",Core.bindModelToSearchParam(b,e,"hideProfileSelector","hideProfileSelector",b.hideProfileSelector,Core.parseBooleanValue),Core.bindModelToSearchParam(b,e,"returnTo","returnTo",b.returnTo),Core.bindModelToSearchParam(b,e,"nextPage","nextPage",b.nextPage),b.child={rootContainers:[]},b.allContainers=[],b.openShift={loginDataKey:"openshift.loginData",params:null,domains:[],gearProfiles:[],tryLogin:"",login:function(){var c=b.entity,d=Core.pathGet(c,["serverUrl"])||"openshift.redhat.com",e=Core.pathGet(c,["login"]),i=Core.pathGet(c,["password"]);l.debug("Invoking login to server "+d+" user "+e),b.openShift.loginFailed=!1,d&&e&&i&&(b.openShift.domains=[],a.getOpenShiftDomains(f,g,d,e,i,function(c){b.openShift.domains=c,l.debug("found openshift domains: "+c),1===c.length&&(b.entity.domain=c[0]),Core.$apply(b),a.getOpenShiftGearProfiles(f,g,d,e,i,function(c){b.openShift.gearProfiles=c,l.debug("found openshift gears: "+b.openShift.gearProfiles),a.OpenShiftCredentials.username=e,a.OpenShiftCredentials.password=i,k();var d={domains:b.openShift.domains,gearProfiles:b.openShift.gearProfiles};h[b.openShift.loginDataKey]=angular.toJson(d),Core.$apply(b)})},function(a){b.openShift.loginFailed=!0,Core.$apply(b)}))}},b.jclouds={},b.forms={},b.showAddProfileDialog=!1,b.$watch("selectedProvider",function(c,d){b.selectedProvider&&a.getSchema(b.selectedProvider.id,b.selectedProvider.className,g,function(c){b.schema=c,b.resolvers=a.getResolvers(b.selectedProvider.id),Core.$apply(b)})},!0),b.$watch("schema",function(c,d){if(c!==d){b.entity.providerType=b.selectedProvider.id,e.search("tab",b.selectedProvider.id);var f=b.entity.providerType,j=m[f];if(angular.forEach(j,function(a,c){var d=h[a];d&&(b.entity[c]=d,l.debug("Defaulted entity "+c+" to "+d+" from localStorage"))}),"openshift"===f){Core.pathSet(b.entity,["login"],a.OpenShiftCredentials.username),Core.pathSet(b.entity,["password"],a.OpenShiftCredentials.password);var k=h[b.openShift.loginDataKey];if(k){l.debug("Loaded openshift login details: "+k);var n=Wiki.parseJson(k);n&&angular.forEach(["domains","gearProfiles"],function(a){var c=n[a];c&&angular.isArray(c)&&c.length&&(b.openShift[a]=c)})}}if(Forms.defaultValues(b.entity,b.schema),b.allContainers=a.getContainerIds(g),"child"===b.selectedProvider.id){var o=a.getRootContainers(g);b.child.rootContainers=o,o&&1===o.length&&!b.entity.parent&&(b.entity.parent=o[0]),Core.pathSet(b.entity,["jmxUser"],i.username),Core.pathSet(b.entity,["jmxPassword"],i.password)}else"parent"in b.entity&&delete b.entity.parent;window.setTimeout(function(){$("input[ng-model]").trigger("input")},100)}},!0),b.$watch("versions",function(a,c){a!==c&&(b.selectedVersion||(""!==b.selectedVersionId?b.selectedVersion=b.versions.find(function(a){return a.id===b.selectedVersionId}):b.selectedVersion=b.versions.find(function(a){return a.defaultVersion})))}),b.$watch("selectedVersionId",function(a,c){c!==a&&a&&"id"in a&&(b.selectedVersionId=a.id,e.search("versionId",b.selectedVersionId))},!0),b.deselect=function(a){a.selected=!1,b.selectedProfiles.remove(function(b){return b.id===a.id})},b.$watch("selectedProfiles",function(a,c){c!==a&&(l.debug("selectedProfiles: ",b.selectedProfiles),b.selectedProfiles.length>0?b.selectedProfileIds=b.selectedProfiles.map(function(a){return a.id}).join(","):b.selectedProfileIds="",l.debug("selectedProfileIds: ",b.selectedProfileIds))},!0),b.$watch("selectedProfileIds",function(a,c){if(Core.isBlank(b.selectedProfileIds))b.selectedProfiles.length=0,e.search("profileIds",null);else{var d=b.selectedProfileIds.split(","),f=[];d.each(function(a){f.push({id:a,selected:!0})}),b.selectedProfiles=f,e.search("profileIds",b.selectedProfileIds)}}),b.massage=function(a){return"name"===a?"containerName":a},b.rootContainers=function(){return a.getRootContainers(g)},b.init=function(){var a=e.search().tab;a&&(b.selectedProvider=b.providers[a]);var c=e.search().parentId;c&&(b.entity.parent=c);var d=e.search().versionId;d?b.selectedVersion={id:d}:j.length>0&&(b.selectedVersion={id:j.first().versionId});var f=e.search().profileIds;f?b.selectedProfileIds=f:j.length>0&&(b.selectedProfileIds=j.map(function(a){return a.id}).join(","));var g=e.search().number;g&&(b.entity.number=g)},b.init(),b.$on("$routeUpdate",b.init),b.goBack=function(){var a=new URI(b.returnTo);e.path(a.path()).search(a.search(!0))},b.goForward=function(){var a=new URI(b.nextPage);e.path(a.path()).search(a.search(!0))},b.onSubmit=function(c,d){b.entity.providerType;c=a.sanitizeJson(c),1===c.number&&delete c.number;var e=b.selectedVersion;e&&(c.version=e.id),b.selectedProfiles.length>0&&(c.profiles=b.selectedProfiles.map(function(a){return a.id}));var f=angular.toJson(c);l.debug("createContainers json:\n"+f),setTimeout(function(){g.execute(a.managerMBean,"createContainers(java.util.Map)",f,{method:"post",success:function(d){l.debug("Response from creating container(s): ",d);var e=!1;if("<not available>"in d){var f=d["<not available>"];if(f.toLowerCase().has("exception")){e=!0;var h="container";c.number&&(h=Core.maybePlural(c.number,"container")),Core.notification("error","Creating "+h+" failed: "+f)}}var i=d[c.name];if(i&&i.toLowerCase().has("already exists")&&(e=!0,Core.notification("error","Creating container "+c.name+" failed as a container with that name already exists.")),angular.forEach(d.value,function(a,b){e=!0,Core.notification("error","Creating container "+b+" failed: "+a)}),!e){SelectionHelpers.clearGroup(j);var k=a.getContainerFields(g,c.parent,["location"]).location;if(!Core.isBlank(k)&&k!==ContainerHelpers.NO_LOCATION){var m=[];if(c.number)for(var n=1;n<=c.number;n++)m.push(c.name+n);else m=[c.name];var o=a.getContainerIds(g);angular.forEach(o,function(c){m.indexOf(c)>=0&&a.setContainerProperty(g,c,"location",k,function(){Core.$apply(b)},function(a){Core.notification("error","Failed to set container loction due to : "+a.error),Core.$apply(b)})})}Core.notification("success","Successfully created containers")}Core.$apply(b)},error:function(a){Core.notification("error","Error creating containers: "+a.error),Core.$apply(b)}}),Core.$apply(b)},10),b.goForward()}}])}(Fabric||(Fabric={}));var Fabric;!function(a){a._module.controller("Fabric.CreateFabricController",["$scope","jolokia","$location","workspace","branding",function(b,c,d,e,f){b.$on("$routeChangeSuccess",function(){e.treeContainsDomainAndProperties(a.jmxDomain,{type:"Fabric"})&&d.url("/fabric/view")}),a.getSchema("createEnsemble","io.fabric8.api.CreateEnsembleOptions",c,function(a){b.schema=a,Core.$apply(b)}),b.creating=!1,b.entity={zooKeeperServerPort:2181,globalResolver:"localhostname",resolver:"localhostname",agentEnabled:!0,autoImportEnabled:!0,minimumPort:0,maximumPort:65535,profiles:["fabric","hawtio"]},f.profile&&b.entity.profiles.push(f.profile),b.forms={},b.onSubmit=function(e,f){e=a.sanitizeJson(e),setTimeout(function(){c.execute(a.clusterBootstrapManagerMBean,"createCluster(java.util.Map)",angular.toJson(e),{method:"post",success:function(a){Core.notification("success","Created fabric!"),d.url("/fabric/containers"),Core.$apply(b)},error:function(a){Core.notification("error","Error creating fabric: "+a.error),Core.$apply(b)}}),Core.notification("info","Creating fabric, please wait..."),d.url("/openlogs"),Core.$apply(b)},30)}}])}(Fabric||(Fabric={}));var Fabric;!function(a){a._module.controller("Fabric.FeatureEditController",["$scope","$routeParams","$location","jolokia","xml2json","workspace",function(b,c,d,e,f,g){a.initScope(b,d,e,g),SelectionHelpers.decorate(b),b.getProfileFeaturesOp="getProfileFeatures(java.lang.String, java.lang.String)",b.versionId=c.versionId,b.profileId=c.profileId,b.features=[],b.selectedRepoFeatures=[],b.deletingFeatures=[],b.addingFeatures=[],b.selectedRepoSelectedFeatures=[],b.featureGridOptions={data:"selectedRepoFeatures",selectedItems:b.selectedRepoSelectedFeatures,displayFooter:!1,showFilter:!1,keepLastSelected:!0,showSelectionCheckbox:!0,filterOptions:{filterText:""},columnDefs:[{field:"name",displayName:"Name"},{field:"version",displayName:"Version"}]},b.filter=function(a){return FilterHelpers.searchObject(a,b.featureGridOptions.filterOptions.filterText,2)},b.$watch("features",function(a,c){a!==c&&(b.parentFeatures=b.features.filter(function(a){return a.isParentFeature}),b.profileFeatures=b.features.filter(function(a){return!a.isParentFeature}),b.addingFeatures=b.features.filter(function(a){return a.adding}),b.deletingFeatures=b.features.filter(function(a){return a.deleting}))},!0),b.$watch("addingFeatures",function(a,b){},!0),b.getClass=function(a){return a.adding?"adding":a.deleting?"deleting":""},b.removeFeature=function(a){a.adding?b.features.remove(function(b){return b.id===a.id}):a.deleting=!a.deleting},b.addSelectedFeatures=function(a){b.selectedRepoSelectedFeatures.forEach(function(c){var d=c.name;a&&(d=d+"/"+c.version),b.features.push({id:d,adding:!0})})},b.save=function(){e.request({type:"exec",mbean:a.managerMBean,operation:"getConfigurationFile(java.lang.String, java.lang.String, java.lang.String)",arguments:[b.versionId,b.profileId,"io.fabric8.agent.properties"]},onSuccess(b.doSave))},b.doSave=function(c){var d=c.value.decodeBase64(),f=d.lines();f=f.filter(function(a){return""!=a.trim()}),b.deletingFeatures.length>0&&b.deletingFeatures.each(function(a){f.remove(function(b){return b.startsWith("feature."+a.id)})}),b.addingFeatures.length>0&&b.addingFeatures.each(function(a){f.add("feature."+a.id+" = "+a.id)}),d=f.join("\n"),a.saveConfigFile(e,b.versionId,b.profileId,"io.fabric8.agent.properties",d.encodeBase64(),function(){Core.notification("success","Updated feature definitions..."),Core.$apply(b)})},b.selectFeature=function(a,c){SelectionHelpers.select(b.selectedRepoFeatures,a,c),b.selectedRepoSelectedFeatures=b.selectedRepoFeatures.filter(function(a){return SelectionHelpers.isSelected(a)})},Core.registerForChanges(e,b,{type:"exec",mbean:a.managerMBean,operation:b.getProfileFeaturesOp,arguments:[b.versionId,b.profileId]},function(a){b.features=a.value.featureDefinitions;var c=a.value.repositoryDefinitions,d=[];c.forEach(function(a){var b=f(a.data);if("feature"in b){var c=b.feature;angular.isArray(c)||(c=[c]),d=d.include(c)}}),b.selectedRepoSelectedFeatures=SelectionHelpers.sync(b.selectedRepoSelectedFeatures,d,"id"),b.selectedRepoFeatures=d.sortBy("name"),Core.$apply(b)})}])}(Fabric||(Fabric={}));var Fabric;!function(a){a._module.directive("fabricVersionSelector",["$templateCache",function(b){return a.VersionSelector(b)}]),a._module.directive("fabricProfileSelector",function(){return new a.ProfileSelector}),a._module.directive("fabricContainerList",function(){return{restrict:"A",replace:!0,templateUrl:a.templatePath+"containerList.html",scope:!1,controller:["$scope","$element","$attrs","jolokia","$location","workspace","$templateCache",a.ContainerListDirectiveController],link:["$scope","$element","$attrs",a.ContainerListDirectiveLink]}}),a._module.directive("fabricProfileDetails",function(){return new a.ProfileDetails}),a._module.directive("fabricActiveProfileList",function(){return{restrict:"A",replace:!0,templateUrl:a.templatePath+"activeProfileList.html",scope:!1,controller:["$scope","$element","$attrs","jolokia","$location","workspace","$templateCache","$timeout",a.ActiveProfileListController],link:["$scope","$element","$attrs",a.ContainerListDirectiveLink]}}),a._module.directive("fabricProfileLink",["workspace","jolokia","localStorage",function(b,c,d){return{restrict:"A",link:function(e,f,g){var h=g.fabricProfileLink;if(h&&!h.isBlank()&&a.fabricCreated(b)){var i=a.getCurrentContainer(c,["versionId"]),j=i.versionId;if(j&&!j.isBlank()){var k="#"+a.profileLink(b,c,d,j,h);angular.isDefined(g.file)&&(k=k+"/"+g.file),f.attr("href",k)}}}}}]),a._module.directive("fabricContainers",["$location","jolokia","workspace","$compile",function(b,c,d,e){return{restrict:"A",link:function(f,g,h){var i=h.fabricContainers,j=h.profile,k=f.versionId||f.version||"1.0";if(i&&!i.isBlank()&&j&&!j.isBlank()){a.initScope(f,b,c,d);var l=a.getContainerIdsForProfile(c,k,j);a.log.info("Searching for containers for profile: "+j+" version "+k+". Found: "+l),f[i]=l,f.onCancel=function(){console.log("In our new cancel thingy!")};var m=$("<div ng-include=\"'app/fabric/html/connectToContainerDialog.html'\"></div>"),n=e(m)(f);g.append(n)}}}}]),a._module.directive("fabricContainerLink",["$location","jolokia","workspace",function(b,c,d){return{restrict:"A",scope:{containerModel:"@fabricContainerLink"},link:function(b,d,e){b.$watch("containerModel",function(e){var f=b.containerModel,g=f,h=null;if(f&&!f.isBlank()){var i=Core.pathGet(b,f);if(angular.isObject(i)){var j=i.container||i.containerId||i.id;j&&i.provisionResult&&(h=i,g=j)}if(!h){var k=["alive","provisionResult","versionId","jmxDomains"];h=a.getContainerFields(c,g,k)}var l="#/fabric/container/"+g,m=a.statusTitle(h)||"container "+g,n=a.statusIcon(h)||"",o="<a href='"+l+"' title='"+m+"'><i class='"+n+"'></i> "+g+"</a>";d.html(o)}else d.html(" ")})}}}]),a._module.directive("fabricContainerConnect",["$location","jolokia",function(b,c){return{restrict:"A",link:function(b,d,e){var f=e.fabricContainerConnect,g=e.view;if(f&&!f.isBlank()){var h=["jolokiaUrl"],i=function(){var d=a.getContainerFields(c,f,h);a.log.info("Connecting to container id "+f+" view + "+g),d.id=f,b.doConnect(d,g),Core.$apply(b)};d.on("click",i)}}}}]),a._module.directive("fabricVersionLink",["workspace","jolokia","localStorage",function(b,c,d){return{restrict:"A",link:function(d,e,f){var g=f.fabricVersionLink;if(g&&!g.isBlank()&&a.fabricCreated(b)){var h=a.getCurrentContainer(c,["versionId"]),i=h.versionId||"1.0";if(i&&!i.isBlank()){var j="#/wiki/branch/"+i+"/"+Core.trimLeading(g,"/");e.attr("href",j)}}}}}]),a._module.directive("containerNameAvailable",["workspace","jolokia","localStorage",function(a,b,c){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$parsers.unshift(function(b){var c=a.child.rootContainers.indexOf(b);return-1===c&&(c=a.allContainers.indexOf(b)),-1!==c?void d.$setValidity("taken",!1):(d.$setValidity("taken",!0),b)})}}}])}(Fabric||(Fabric={}));var Fabric;!function(a){a.TopLevelController=a._module.controller("Fabric.TopLevelController",["$scope",function(b){b.managerMBean=a.managerMBean,b.clusterBootstrapManagerMBean=a.clusterBootstrapManagerMBean,b.clusterManagerMBean=a.clusterManagerMBean,b.openShiftFabricMBean=a.openShiftFabricMBean,b.mqManagerMBean=a.mqManagerMBean,b.healthMBean=a.healthMBean,b.schemaLookupMBean=a.schemaLookupMBean}])}(Fabric||(Fabric={}));var Fabric;!function(a){a.startMaps=function(){},a._module.controller("Fabric.MapController",["$scope","$templateCache","jolokia",function(b,c,d){function e(d){if(d&&d.value){if(d.value.forEach(function(c){var d=!1,e=c.id,f=b.containers[e];f||(f={name:e},b.containers[e]=f,d=!0),f.alive=c.alive,f.version=c.versionId,f.profileIds=c.profileIds;var g=c.geoLocation;if(g){var h=g.split(",");if(h.length>=2){var i=Core.parseFloatValue(h[0],"lattitude"),j=Core.parseFloatValue(h[1],"longitude");if(i&&j){if(b.myMap){var k=f.marker;!d&&k||(a.log.info("Adding marker as we have map "+b.myMap),k=new google.maps.Marker({position:new google.maps.LatLng(i,j),map:b.myMap,title:c.id,tooltip:"(lattitude: "+i+", longitude: "+j+")"}),f.marker=k,b.myMarkers.push(k))}else f.marker&&(f.marker.position=new google.maps.LatLng(i,j));f.lattitude=i,f.longitude=j}}}}),b.myMarkers.length>0&&b.first&&b.myMap){var e=b.myMarkers[0];a.log.info("Auto selecting first container on map: "+e.title),b.myMap.panTo(e.getPosition()),b.first=!1}b.template=c.get("pageTemplate"),Core.$apply(b)}}b.myMarkers=[],b.containers={},b.template="",b.first=!0,b.myMap=null,b.start=function(){b.mapOptions={center:new google.maps.LatLng(35.784,-78.67),zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP},Core.register(d,b,{type:"exec",mbean:a.managerMBean,operation:"containers()",arguments:[]},onSuccess(e))},a.startMaps=b.start,$("body").append('<script type="text/javascript" src="//maps.google.com/maps/api/js?sensor=false&async=2&callback=Fabric.startMaps"><\/script>')}])}(Fabric||(Fabric={}));var Fabric;!function(a){
a._module.controller("Fabric.MigrateContainersController",["$scope","jolokia","$location",function(b,c,d){b.versions=[],b.containers=[],b.containersResponse=[],b.selectedVersion=[],b.selectedContainers=[],b.showApply=!1,b.versionGridOptions={data:"versions",selectedItems:b.selectedVersion,showSelectionCheckbox:!0,multiSelect:!1,keepLastSelected:!0,columnDefs:[{field:"id",displayName:"Version Name",width:"94%"}],filterOptions:{filterText:""}},b.containerGridOptions={data:"containers",selectedItems:b.selectedContainers,showSelectionCheckbox:!0,multiSelect:!0,keepLastSelected:!1,columnDefs:[{field:"id",displayName:"Container Name",width:"94%"}],filterOptions:{filterText:""}},b.canApply=function(){return!(b.selectedVersion.length>0&&b.selectedContainers.length>0)},b.render=function(a){"versions()"===a.request.operation&&(Object.equal(b.versions,a.value)||(b.versions=a.value,Core.$apply(b))),"containerIds()"===a.request.operation&&(Object.equal(b.containersResponse,a.value)||(b.containersResponse=a.value,b.containers=[],b.containersResponse.each(function(a){b.containers.push({id:a})}),Core.$apply(b)))},b.migrateContainers=function(){var e=b.selectedContainers.map(function(a){return a.id}),f=b.selectedVersion[0].id;Core.notification("info","Moving containers to version "+f),d.path("/fabric/containers"),a.migrateContainers(c,f,e,function(){Core.notification("success","Successfully migrated containers")},function(a){Core.notification("error","Failed to migrate containers due to "+a.error)})},Core.register(c,b,[{type:"exec",mbean:a.managerMBean,operation:"versions()"},{type:"exec",mbean:a.managerMBean,operation:"containerIds()"}],onSuccess(b.render))}])}(Fabric||(Fabric={}));var Fabric;!function(a){a._module.controller("Fabric.NavBarController",["$scope","$location","jolokia","workspace","localStorage",function(b,c,d,e,f){function g(){b.activeVersion=a.getActiveVersion(c)}function h(){if(g(),b.hasFabric=a.hasFabric(e),b.hasMQManager=a.hasMQManager(e),b.hasFabric){a.containerWebAppURL(d,"drools-wb-distribution-wars",null,i,i),b.canUpload=e.treeContainsDomainAndProperties("hawtio",{type:"UploadManager"})}}function i(a){var c=a?a.value:null;b.droolsHref=c,Core.$apply(b)}b.activeVersion="1.0",b.mapsEnabled=f.fabricEnableMaps,b.$on("$routeUpdate",g),b.isActive=function(a){return e.isLinkActive(a)},b.clusterLink=function(){return Core.createHref(c,"#/fabric/clusters/fabric/registry/clusters",["cv","cp","pv"])},h()}])}(Fabric||(Fabric={}));var Fabric;!function(a){a._module.controller("Fabric.PatchingController",["$scope","jolokia","localStorage","$location",function(b,c,d,e){b.files=[],b.targetVersion=e.search().versionId,b.newVersionName="",b.proxyUser=d["fabric.userName"],b.proxyPassword=d["fabric.password"],b.saveJmxCredentials=!1,b.cancel=function(){e.url("wiki/branch/default-version/view/fabric/profiles")},b.valid=function(){return b.files&&b.files.length>0&&null!==b.targetVersion&&b.proxyUser&&b.proxyPassword},b.go=function(){var f=b.files.length+" patches";1===b.files.length&&(f="patch: "+b.files[0].fileName),Core.notification("info","Applying "+f),b.saveJmxCredentials&&(d["fabric.userName"]=b.proxyUser,d["fabric.password"]=b.proxyPassword);var g=b.files.map(function(a){return a.absolutePath});a.applyPatches(c,g,b.targetVersion,b.newVersionName,b.proxyUser,b.proxyPassword,function(){Core.notification("success","Successfully applied "+f),e.url("/fabric/view"),Core.$apply(b)},function(c){a.log.error("Failed to apply ",f," due to ",c.error),a.log.info("Stack trace: ",c.stacktrace),Core.$apply(b)})}}])}(Fabric||(Fabric={}));var Fabric;!function(a){a._module.controller("Fabric.PIDController",["$scope","$routeParams","jolokia","$location",function(b,c,d,e){function f(a){Object.equal(b.response,a.value)||(b.response=a.value,b.data=b.response.decodeBase64(),b.mode=b.getMode(),Core.$apply(b))}b.versionId=c.versionId,b.profileId=c.profileId,b.fname=c.fname,b.response=void 0,b.data="",b.dirty=!1,b.getMode=function(){var a=b.fname.split("."),c=a[a.length-1];if(!c)return"text";switch(c){case"cfg":c="properties"}return c},b.mode=b.getMode(),angular.isDefined(b.versionId)&&angular.isDefined(b.profileId)&&angular.isDefined(b.fname)&&Core.register(d,b,{type:"exec",mbean:a.managerMBean,operation:"getConfigurationFile(java.lang.String,java.lang.String,java.lang.String)",arguments:[b.versionId,b.profileId,b.fname]},onSuccess(f)),b.save=function(){a.saveConfigFile(d,b.versionId,b.profileId,b.fname,b.data.encodeBase64(),function(){b.dirty=!1,Core.notification("success","Saved "+b.fname),e.path("/fabric/profile/"+b.versionId+"/"+b.profileId)},function(a){Core.notification("error","Failed to save "+b.fname+" due to "+a.error)})}}])}(Fabric||(Fabric={}));var Fabric;!function(a){a._module.controller("Fabric.PreferencesController",["$scope","localStorage",function(a,b){Core.initPreferenceScope(a,b,{fabricAlwaysPrompt:{value:!1,converter:Core.parseBooleanValue},fabricEnableMaps:{value:!0,converter:Core.parseBooleanValue},fabricVerboseNotifications:{value:!0,converter:Core.parseBooleanValue}})}])}(Fabric||(Fabric={}));var Osgi;!function(a){function b(a,b,d){var e=d;return angular.forEach(d,function(b){b.ImportData=g(b.ImportedPackages),b.ExportData=g(b.ExportedPackages),b.IdentifierLink=l(a,b.Identifier),b.Hosts=k(a,b.Hosts,e),b.Fragments=k(a,b.Fragments,e),b.ImportedPackages=b.ImportedPackages.union([]),b.StateStyle=c("label",b.State),b.RequiringBundles=k(a,b.RequiringBundles,e)}),d}function c(a,b){switch(b){case"INSTALLED":return a+"-important";case"RESOLVED":return a+"-inverse";case"STARTING":return a+"-warning";case"ACTIVE":return a+"-success";case"STOPPING":return a+"-info";case"UNINSTALLED":return"";default:return a+"-important"}}function d(a,b,c){return angular.forEach(c,function(b){b.BundleIdentifier=l(a,b.BundleIdentifier)}),c}function e(a,b,c){function d(b,c){c||(c=b);var d=b.Name,f=b.Version;if(d&&!d.startsWith("#")){b.VersionLink="<a href='"+Core.url("#/osgi/package/"+d+"/"+f+a.hash())+"'>"+f+"</a>";var g=c.ImportingBundles||b.ImportingBundles,h=c.ExportingBundles||b.ExportingBundles;b.ImportingBundleLinks=l(a,g),b.ImportingBundleLinks=l(a,g),b.ExportingBundleLinks=l(a,h),e.push(b)}}var e=[],f=c.values;return f&&angular.forEach(f,d),angular.forEach(c,function(a){angular.forEach(a,function(b){angular.forEach(b,function(b){d(b,a)})})}),e}function f(a,b,c){var d=[];return angular.forEach(c,function(b){var c={};c.Pid=b[0],c.PidLink="<a href='"+Core.url("#/osgi/pid/"+b[0]+a.hash())+"'>"+b[0]+"</a>",c.Bundle=b[1],d.push(c)}),d}function g(a){for(var b={},c=0;c<a.length;c++){var d=a[c],e=d.indexOf(";");if(e>0){var f=d.substring(0,e),g=d.substring(e+1),h=b[f];void 0===h&&(h={},b[f]=h),h.ReportedVersion=g}}return b}function h(a,b){var c={},d={},e=a[b];if(void 0===e)return c;for(var f=e.Value,g=!0,h=!1,j="",k="",l=0;l<f.length;l++){var m=f[l];'"'!==m?h?k+=m:";"!==m?","!==m?g?j+=m:k+=m:(i(d,k),c[j]=d,d={},j="",k="",g=!0):g?g=!1:(i(d,k),k=""):h=!h}return i(d,k),c[j]=d,c}function i(a,b){var c=b.indexOf(":=");if(c>0)return void(a["D"+b.substring(0,c)]=b.substring(c+2));var d=b.indexOf("=");return d>0?void(a["A"+b.substring(0,d)]=b.substring(d+1)):void 0}function j(a){var b=a;return angular.isArray(a)||(b=[a]),b}function k(a,b,c){var d="",e=j(b).sort(function(a,b){return a-b});return angular.forEach(e,function(b,e){var f="";d.length>0&&(f=" ");var g=c[b]||{},h=g.SymbolicName;d+=f+"<a class='label' href='"+Core.url("#/osgi/bundle/"+b+a.hash())+"'>"+h+"</a>"}),d}function l(a,b){var c="",d=j(b).sort(function(a,b){return a-b});return angular.forEach(d,function(b,d){var e="";c.length>0&&(e=" "),c+=e+"<a class='label' href='"+Core.url("#/osgi/bundle/"+b+a.hash())+"'>"+b+"</a>"}),c}function m(a,b){var c="";return angular.forEach(j(b),function(b,d){var e="";c.length>0&&(e=" "),c+=e+"<a href='"+Core.url("#/osgi/bundle/"+b+a.hash())+"'>"+b+"</a>"}),c}function n(a,b){var c="";return angular.forEach(b,function(b){var d=b.Identifier;if(a===d.toString())return c=b}),c}function o(b){if(b){var c=b.tree.navigate("osgi.core","bundleState");return a.findFirstObjectName(c)}return null}function p(a){if(a){var b=a.objectName;if(b)return b;var c=a.children;if(c&&c.length)return p(c[0])}return null}function q(b){if(b){var c=b.tree.navigate("osgi.core","framework");return a.findFirstObjectName(c)}return null}function r(b){if(b){var c=b.tree.navigate("osgi.core","serviceState");return a.findFirstObjectName(c)}return null}function s(b){if(b){var c=b.tree.navigate("osgi.core","packageState");return a.findFirstObjectName(c)}return null}function t(b){if(b){var c=b.tree.navigate("osgi.compendium","cm");return a.findFirstObjectName(c)}return null}function u(a){if(a){return((a.mbeanTypesToDomain.MetaTypeFacade||{})["io.fabric8"]||{}).objectName}return null}function v(a){if(a){return((a.mbeanTypesToDomain.ProfileMetadata||{})["io.fabric8"]||{}).objectName}return null}function w(a){if(a){return((a.mbeanTypesToDomain.OSGiTools||{}).hawtio||{}).objectName}return null}function x(a){if(a){return((a.mbeanTypesToDomain.ConfigAdmin||{}).hawtio||{}).objectName}return null}function y(a,b,c,d){return void 0===d&&(d=!1),Core.url("#"+z(a,c,d)+b.hash())}function z(a,b,c){void 0===c&&(c=!1);var d=b,e=a.versionId;a.profileId;if(e&&e){return"/wiki/branch/"+e+(c?"/newConfiguration/":"/configuration/")+d+"/"+a.pageId}return"/osgi/pid/"+d}function A(a,b,c,d,e,f,g){void 0===g&&(g=null),Wiki.initScope(a,b,c),a.versionId=b.versionId||a.branch,a.profileId=b.profileId||Fabric.pagePathToProfileId(a.pageId),a.pageId||(a.pageId=Fabric.fabricTopLevel+Fabric.profilePath(a.profileId)),g||(g=function(){return null});var h=a.versionId,i=a.profileId;a.profileNotRunning=!1,a.profileMetadataMBean=null,h&&i?(a.inFabricProfile=!0,a.configurationsLink="/wiki/branch/"+h+"/configurations/"+a.pageId,a.profileMetadataMBean=v(f),a.profileMetadataMBean?(a.profileNotRunning=!0,a.jolokia=e,a.workspace=f,g()):Fabric.profileJolokia(e,i,h,function(b){b?(a.jolokia=b,a.workspace=Core.createRemoteWorkspace(b,f.jolokiaStatus,c,d)):(a.jolokia=e,a.workspace=f,a.profileNotRunning=!0,a.profileMetadataMBean=v(f)),g()})):(a.configurationsLink="/osgi/configurations",a.jolokia=e,a.workspace=f,g())}function B(a,b,c,d){var e=t(a),f=null;return b&&e&&(f=b.execute(e,"getProperties",c,onSuccess(d))),f}function C(a,b){if(a&&b){if(a.startsWith(b))return a.substring(b.length+1);var c=b.lastIndexOf(".");if(c>0){var d=b.substring(0,c+1);return Core.trimLeading(a,d)}}return a}a.log=Logger.get("OSGi"),a.defaultBundleValues=b,a.getStateStyle=c,a.defaultServiceValues=d,a.defaultPackageValues=e,a.defaultConfigurationValues=f,a.parseActualPackages=g,a.parseManifestHeader=h,a.toCollection=j,a.labelBundleLinks=k,a.bundleLinks=l,a.pidLinks=m,a.findBundle=n,a.getSelectionBundleMBean=o,a.findFirstObjectName=p,a.getSelectionFrameworkMBean=q,a.getSelectionServiceMBean=r,a.getSelectionPackageMBean=s,a.getSelectionConfigAdminMBean=t,a.getMetaTypeMBean=u,a.getProfileMetadataMBean=v,a.getHawtioOSGiToolsMBean=w,a.getHawtioConfigAdminMBean=x,a.createConfigPidLink=y,a.createConfigPidPath=z,a.initProfileScope=A,a.getConfigurationProperties=B,a.removeFactoryPidPrefix=C}(Osgi||(Osgi={}));var Maven;!function(a){function b(a){if(a){return((a.mbeanTypesToDomain.Indexer||{}).hawtio||{}).objectName}return null}function c(a){if(a){return((a.mbeanTypesToDomain.AetherFacade||{}).hawtio||{}).objectName}return null}function d(a){var b=null;if(a)if(a.startsWith("mvn:"))b=a.substring(4);else{var c=a.indexOf(":mvn:");c>0&&(b=a.substring(c+5))}return b?"#/maven/artifact/"+b:null}function e(a){var b=(a.group||a.groupId)+"/"+(a.artifact||a.artifactId);return a.version&&(b+="/"+a.version),a.classifier&&(b+="/"+a.classifier),a.packaging&&(b+="/"+a.packaging),b}function f(c,d,e,f,g){var h=b(e);if(!angular.isDefined(h))return c.when([]);var i=g.split("/");return 1===i.length?a.completeGroupId(h,c,d,e,f,g,null,null):2===i.length?a.completeArtifactId(h,c,d,e,f,i[0],i[1],null,null):3===i.length?a.completeVersion(h,c,d,e,f,i[0],i[1],i[2],null,null):c.when([])}function g(a,b,c,d,e,f,g,h,i,j){var k=b.defer();return e.request({type:"exec",mbean:a,operation:"versionComplete(java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.lang.String)",arguments:[f,g,h,i,j]},{method:"POST",success:function(a){c.$apply(function(){k.resolve(a.value.sortBy().first(15))})},error:function(a){c.$apply(function(){console.log("got back an error: ",a),k.reject()})}}),k.promise}function h(a,b,c,d,e,f,g,h,i){var j=b.defer();return e.request({type:"exec",mbean:a,operation:"artifactIdComplete(java.lang.String, java.lang.String, java.lang.String, java.lang.String)",arguments:[f,g,h,i]},{method:"POST",success:function(a){c.$apply(function(){j.resolve(a.value.sortBy().first(15))})},error:function(a){c.$apply(function(){console.log("got back an error: ",a),j.reject()})}}),j.promise}function i(a,b,c,d,e,f,g,h){if(f.length<5)return b.when([]);var i=b.defer();return e.request({type:"exec",mbean:a,operation:"groupIdComplete(java.lang.String, java.lang.String, java.lang.String)",arguments:[f,g,h]},{method:"POST",success:function(a){c.$apply(function(){i.resolve(a.value.sortBy().first(15))})},error:function(a){console.log("got back an error: ",a),c.$apply(function(){i.reject()})}}),i.promise}function j(b,c){b.detailLink=function(a){var b=a.groupId,c=a.artifactId,d=a.version||"",e=a.classifier||"",f=a.packaging||"";return b&&c?"#/maven/artifact/"+b+"/"+c+"/"+d+"/"+e+"/"+f:""},b.javadocLink=function(a){var b=a.groupId,c=a.artifactId,d=a.version;return b&&c&&d?"javadoc/"+b+":"+c+":"+d+"/":""},b.versionsLink=function(a){var b=a.groupId,c=a.artifactId,d=a.classifier||"",e=a.packaging||"";return b&&c?"#/maven/versions/"+b+"/"+c+"/"+d+"/"+e:""},b.dependenciesLink=function(a){var b=a.groupId,c=a.artifactId,d=a.classifier||"",e=a.packaging||"",f=a.version;return b&&c?"#/maven/dependencies/"+b+"/"+c+"/"+f+"/"+d+"/"+e:""},b.hasDependencyMBean=function(){var b=a.getAetherMBean(c);return angular.isDefined(b)},b.sourceLink=function(a){var b=a.groupId,c=a.artifactId,d=a.version;return b&&c&&d?"#/source/index/"+b+":"+c+":"+d+"/":""}}a.log=Logger.get("Maven"),a.getMavenIndexerMBean=b,a.getAetherMBean=c,a.mavenLink=d,a.getName=e,a.completeMavenUri=f,a.completeVersion=g,a.completeArtifactId=h,a.completeGroupId=i,a.addMavenFunctions=j}(Maven||(Maven={}));var Fabric;!function(a){var b=function(){function b(){this.restrict="A",this.replace=!0,this.templateUrl=a.templatePath+"profileDetailsDirective.html",this.scope={versionId:"=",profileId:"="},this.controller=["$scope","$element","$attrs","$routeParams","jolokia","$location","workspace","marked","$q",function(b,c,d,e,f,g,h,i,j){function k(c){angular.isDefined(b.row)||(b.loading=!1);var d=angular.toJson(c.value);if(b.profileResponseJson!==d){b.activeTab||(b.activeTab="features"),b.profileResponseJson=d,b.row=c.value;var e=b.row.id,f=b.row.version;angular.isDefined(b.row)&&null!=b.row.summaryMarkdown?b.summaryHtml=i(b.row.summaryMarkdown):b.summaryHtml=null,b.row.systemProperties=[],angular.forEach(b.row.containerConfiguration,function(a,c){c.startsWith("system.")&&b.row.systemProperties.push({name:c.substring(7),value:a})}),b.sysPropsTableData={rows:b.row.systemProperties},b.configFolderLink=null,b.hasFabricWiki()&&e&&f&&(b.configFolderLink="#/wiki/branch/"+f+"/view/fabric/profiles/"+a.profilePath(e)),b.row.iconURL=a.toIconURL(b,c.value.iconURL),a.log.info("Icon URL "+b.row.iconURL),Core.$apply(b)}}b.inDirective=!0,b.managerMBean=a.managerMBean,a.initScope(b,g,f,h),a.loadRestApi(f,h,b),b.loading=!0,b.mavenMBean=Maven.getMavenIndexerMBean(h),angular.isDefined(b.versionId)||(b.versionId=e.versionId),angular.isDefined(b.profileId)||(b.profileId=e.profileId),b.newFileDialog=!1,b.deleteFileDialog=!1,b.newFileName="",b.markedForDeletion="",b.newProfileName="",b.deleteThingDialog=!1,b.changeParentsDialog=!1,b.removeParentDialog=!1,b.newThingName="",b.selectedParents=[],b.profilePath=a.profilePath,b.pageId=a.fabricTopLevel+a.profilePath(b.profileId),b.gotoCreateContainer=function(){var a=g.path();g.path("/fabric/containers/createContainer").search({versionId:b.versionId,profileIds:b.profileId,hideProfileSelector:!0,returnTo:a,nextPage:a})};var l=b.versionId,m=b.profileId;l&&l&&a.profileJolokia(f,m,l,function(a){b.profileJolokia=a,a||(b.profileNotRunning=!0,b.profileMetadataMBean=Osgi.getProfileMetadataMBean(h))}),b.$watch("activeTab",function(a,c){a!==c&&(b.newThingName="")}),b.$watch("versionId",function(a,c){angular.isDefined(b.versionId)&&angular.isDefined(b.profileId)&&b.doRegister()}),b.$watch("profileId",function(a,c){angular.isDefined(b.versionId)&&angular.isDefined(b.profileId)&&b.doRegister()}),b.doCompletionFabric=function(a){return a.startsWith("mvn:")?(b.prefix="mvn:",Maven.completeMavenUri(j,b,h,f,a.from(4))):(b.prefix="",j.when([]))},b.uriParts=[],b.$watch("newThingName",function(a,c){a!==c&&(b.uriParts=a.split("/"))}),b.$watch("uriParts",function(a,c){if(a!==c){if(!b.prefix||""===b.prefix)return;if(a&&a.length>0&&!a.first().startsWith(b.prefix)){if(""===a.first()||a.first().length<b.prefix.length)return;if(0===c.length)return;if(1===c.length)b.newThingName=b.prefix+a.first();else{var d=c.first(c.length-1).include(a.first());b.newThingName=d.join("/")}}}},!0),b.doRegister=function(){Core.unregister(f,b),b.versionId&&b.profileId&&!b.versionId.isBlank()&&!b.profileId.isBlank()&&Core.register(f,b,{type:"exec",mbean:a.managerMBean,operation:"getProfile(java.lang.String, java.lang.String)",arguments:[b.versionId,b.profileId]},onSuccess(k))},b.showChangeParentsDialog=function(){b.selectedParents=b.row.parentIds.map(function(a){return{id:a,selected:!0}}),b.changeParentsDialog=!0},b.removeParentProfile=function(a){b.markedForDeletion=a,b.removeParentDialog=!0},b.doRemoveParentProfile=function(){var c=b.row.parentIds.exclude(b.markedForDeletion);a.changeProfileParents(f,b.versionId,b.profileId,c,function(){Core.notification("success","Removed parent profile "+b.markedForDeletion+" from "+b.profileId),Core.$apply(b)},function(a){Core.notification("error","Failed to change parent profiles of "+b.profileId+" due to "+a.error),Core.$apply(b)})},b.changeAttribute=function(c,d){f.request({type:"exec",method:"post",mbean:a.managerMBean,operation:"setProfileAttribute",arguments:[b.versionId,b.profileId,c,d]},{success:function(){a.log.debug("Set attribute ",c," to ",d),Core.$apply(b)},error:function(e){a.log.debug("Failed to set attribute ",c," to ",d," due to ",e.error),Core.$apply(b)}})},b.doChangeParents=function(){b.changeParentsDialog=!1;var c=b.selectedParents.map(function(a){return a.id});a.changeProfileParents(f,b.versionId,b.profileId,c,function(){a.log.debug("Successfully changed parent profiles of ",b.profileId),Core.$apply(b)},function(c){a.log.debug("Failed to change parent profiles of ",b.profileId," due to ",c.error),Core.$apply(b)})},b.goto=function(a){g.url(a)},b.addNewDeployment=function(a,c,d){Core.isBlank(b.newDeploymentThingName)||(b.newThingName=b.newDeploymentThingName,b.addNewThing(a,c,d),b.newDeploymentThingName="")},b.addNewFeatureRepository=function(a,c,d){Core.isBlank(b.newFeatureRepositoryName)||(b.newThingName=b.newFeatureRepositoryName,b.addNewThing(a,c,d),b.newFeatureRepositoryName="")},b.addNewThing=function(a,c,d){Core.isBlank(b.newThingName)||(b.thingName=a,b.currentThing=d,b.currentThingType=c,b.doAddThing())},b.deleteThing=function(a,c,d,e){b.thingName=a,b.currentThing=d,b.currentThingType=c,b.currentThingItem=e,b.deleteThingDialog=!0},b.updateThing=function(a,c,d){b.thingName=a,b.currentThing=d,b.currentThingType=c,b.callSetProfileThing("Changed","change",a)},b.mavenLink=function(a){return Maven.mavenLink(a)},b.callSetProfileThing=function(c,d,e){f.request({type:"exec",mbean:a.managerMBean,operation:"setProfile"+b.currentThingType+"(java.lang.String, java.lang.String, java.util.List)",arguments:[b.versionId,b.profileId,b.currentThing]},{method:"POST",success:function(){Core.notification("success",c+" "+e),b.newThingName="",Core.$apply(b)},error:function(a){Core.notification("error","Failed to "+d+" "+e+" due to "+a.error),Core.$apply(b)}})},b.doDeleteThing=function(){b.currentThing.remove(b.currentThingItem),b.callSetProfileThing("Deleted","delete",b.currentThingItem)},b.doAddThing=function(){b.currentThing.any(b.newThingName)?Core.notification("error","There is already a "+b.thingName+" with the name "+b.newThingName):(b.currentThing.push(b.newThingName),b.addThingDialog=!1,b.callSetProfileThing("Added","add",b.newThingName))},b.deleteFile=function(a){b.markedForDeletion=a,b.deleteFileDialog=!0},b.doDeleteFile=function(){b.deleteFileDialog=!1,a.deleteConfigFile(f,b.versionId,b.profileId,b.markedForDeletion,function(){Core.notification("success","Deleted file "+b.markedForDeletion),b.markedForDeletion="",Core.$apply(b)},function(a){Core.notification("error","Failed to delete file "+b.markedForDeletion+" due to "+a.error),b.markedForDeletion="",Core.$apply(b)})},b.doCreateFile=function(){b.newFileDialog=!1,a.newConfigFile(f,b.versionId,b.profileId,b.newFileName,function(){Core.notification("success","Created new configuration file "+b.newFileName),g.path("/fabric/profile/"+b.versionId+"/"+b.profileId+"/"+b.newFileName)},function(a){Core.notification("error","Failed to create "+b.newFileName+" due to "+a.error)})},b.copyProfile=function(){if(b.copyProfileDialog=!1,b.profileId.has("-")&&!b.newProfileName.has("-")){var c=b.profileId.split("-");c.pop(),c.push(b.newProfileName),b.newProfileName=c.join("-")}if(f.request({type:"exec",mbean:a.managerMBean,operation:"getProfile(java.lang.String,java.lang.String)",arguments:[b.versionId,b.newProfileName]}).value)return Core.notification("error","Failed to create new profile "+b.newProfileName+". A profile with the same name already exists."),void Core.$apply(b);Core.notification("info","Copying "+b.profileId+" to "+b.newProfileName),a.copyProfile(f,b.versionId,b.profileId,b.newProfileName,!0,function(){Core.notification("success","Created new profile "+b.newProfileName),a.gotoProfile(h,f,localStorage,g,b.versionId,{id:b.newProfileName}),Core.$apply(b)},function(a){Core.notification("error","Failed to create new profile "+b.newProfileName+" due to "+a.error),Core.$apply(b)})},b.sysPropsTableConfig={data:"sysPropsTableData.rows",multiSelect:!1,showSelectionCheckbox:!1,enableRowClickSelection:!0,primaryKeyProperty:"name",properties:{rows:{items:{properties:{name:{description:"System property name",type:"java.lang.String"},value:{description:"System property value",type:"java.lang.String"}}}}},displayFooter:!1,showFilter:!1,columnDefs:[{field:"name",displayName:"Name"},{field:"value",displayName:"Value"}]},b.$on("hawtio.datatable.sysPropsTableData.rows",function(c,d){var e={};angular.forEach(d,function(a){e[a.name]=a.value}),f.request({type:"exec",mbean:a.managerMBean,operation:"setProfileSystemProperties(java.lang.String, java.lang.String, java.util.Map)",arguments:[b.versionId,b.profileId,e]},{method:"POST",success:function(){Core.notification("success","System properties updated"),Core.$apply(b)},error:function(a){Core.notification("error","Failed to update system properties due to "+a.error),Core.$apply(b)}})})}]}return b}();a.ProfileDetails=b}(Fabric||(Fabric={}));var Fabric;!function(a){var b=function(){function b(){this.restrict="A",this.replace=!0,this.templateUrl=a.templatePath+"profileSelector.html",this.scope={selectedProfiles:"=fabricProfileSelector",versionId:"=",filterWatch:"@",selectedWatch:"@",clearOnVersionChange:"@",noLinks:"@",showHeader:"@",useCircles:"@",expanded:"@",excludedProfiles:"=",includedProfiles:"="},this.controller=["$scope","$element","$attrs","workspace","jolokia","localStorage","$location",function(b,c,d,e,f,g,h){b.profiles=[],b.responseJson="",b.filterText="",b.clearOnVersionChange=!1,b.noLinks=!1,b.selectedAll=!1,b.indeterminate=!1,b.showFilter=!0,b.useCircles=!1,b.expanded=!1,b.tree=[],b.showProfile=function(a){return Core.matchFilterIgnoreCase(a.id,b.filterText)},b.showBranch=function(a){return b.filterText.isBlank()||a.profiles.some(function(a){return Core.matchFilterIgnoreCase(a.id,b.filterText)})},b.goto=function(c){a.gotoProfile(e,f,g,h,b.versionId,c)},b.render=function(a){var c=angular.toJson(a.value);if(b.responseJson!==c){b.responseJson=c;var d=b.selectedProfiles;b.profiles=a.value.sortBy(function(a){return a.id}),angular.forEach(d,function(a){var c=b.profiles.find(function(b){return b.id===a.id});c&&a&&(c.selected=a.selected)}),b.profiles=b.profiles.exclude(function(a){return a.hidden}),b.excludedProfiles&&(b.profiles=b.excluded()),b.includedProfiles&&(b.profiles=b.included());var e=[];b.profiles.each(function(a){var b=a.id.split("-");a.name=b.last(),a.path=b.exclude(a.name).join(" / "),e.push(a.path)}),e=e.unique().sortBy("length").sortBy(function(a){return a});var f=[];e.forEach(function(a){var c={expanded:b.expanded,path:a,profiles:b.profiles.filter(function(b){return b.path===a})};f.push(c)}),b.tree=f,Core.$apply(b)}},b.excluded=function(){return b.profiles.exclude(function(a){return b.excludedProfiles.some(function(b){return b===a.id})})},b.included=function(){return b.profiles.exclude(function(a){return b.includedProfiles.none(function(b){return b===a.id})})},b.isOpen=function(a){return""!==b.filterText?"opened":a.expanded?"opened":"closed"},b.isOpenIcon=function(a){return a.expanded?"icon-folder-open":"icon-folder-closed"},b.$watch("includedProfiles",function(a,c){a!==c&&b.init()},!0),b.$watch("excludedProfiles",function(a,c){a!==c&&b.init()},!0),b.abstract=function(){return b.profiles.filter(function(a){return a.abstract})},b.selected=function(){return b.profiles.filter(function(a){return a.selected})},b.selectAll=function(){b.profiles.each(function(a){a.selected=!0})},b.selectNone=function(){b.profiles.each(function(a){delete a.selected})},b.$parent.profileSelectAll=b.selectAll,b.$parent.profileSelectNone=b.selectNone,b.getSelectedClass=function(a){return a.abstract?"abstract":a.selected?"selected":""},b.$watch("selectedAll",function(a,c){b.indeterminate||a===c||(a?b.selectAll():b.selectNone())}),b.$watch("profiles",function(a,c){a!==c&&(b.selectedProfiles=b.selected())},!0),b.$on("fabricProfileRefresh",function(){b.versionId&&f.request({type:"exec",mbean:a.managerMBean,operation:"getProfiles(java.lang.String, java.util.List)",arguments:[b.versionId,["id","hidden"]]},{method:"POST",success:function(a){b.render(a)}})}),b.init=function(){a.log.debug("Initializing profile selector, version: ",b.versionId),b.responseJson=null,Core.unregister(f,b),""!==b.versionId&&(b.clearOnVersionChange&&b.selectNone(),b.versionId&&Core.register(f,b,{type:"exec",mbean:a.managerMBean,operation:"getProfiles(java.lang.String, java.util.List)",arguments:[b.versionId,["id","hidden","abstract"]]},onSuccess(b.render,{error:function(c){a.log.debug("Error fetching profiles: ",c.error," unregistering poller"),Core.unregister(f,b)}})))},b.$watch("versionId",function(c,d){a.log.debug("versionId, newValue: ",c," oldValue: ",d),b.versionId&&""!==b.versionId&&(a.log.debug("Unregistering old poller"),Core.unregister(f,b),f.request({type:"exec",mbean:a.managerMBean,operation:"versions()",arguments:[]},{method:"POST",success:function(d){d.value.some(function(a){return a.id===c})&&(a.log.debug("registering new poller"),b.init(),Core.$apply(b))},error:function(a){Core.$apply(b)}}))})}],this.link=function(a,b,c){var d=b.find("#selector");angular.isDefined(c.showHeader)?a.showFilter=c.showHeader:a.showFilter=!0,angular.isDefined(c.filterWatch)&&a.$parent.$watch(c.filterWatch,function(b,c){b!==c&&(a.filterText=b)}),a.$watch("indeterminate",function(b,c){b!==c&&d.prop("indeterminate",a.indeterminate)}),a.$watch("selectedProfiles",function(b,c){b!==c&&(c.each(function(b){var c=a.profiles.find(function(a){return a.id==b.id});void 0!==c&&(c.selected=!1)}),b.each(function(b){var c=a.profiles.find(function(a){return a.id==b.id});void 0!==c&&(c.selected=!0)}),a.selectedProfiles.length>0?a.selectedProfiles.length!==a.profiles.length?(a.indeterminate=!0,a.selectedAll=!1,a.$parent.profileSomeSelected=!0,a.$parent.profileNoneSelected=!1,a.$parent.profileAllSelected=!1):(a.indeterminate=!1,a.selectedAll=!0,a.$parent.profileSomeSelected=!1,a.$parent.profileNoneSelected=!1,a.$parent.profileAllSelected=!0):(a.indeterminate=!1,a.selectedAll=!1,a.$parent.profileSomeSelected=!1,a.$parent.profileNoneSelected=!0,a.$parent.profileAllSelected=!1))},!0)}}return b}();a.ProfileSelector=b}(Fabric||(Fabric={}));var Fabric;!function(a){a._module.controller("Fabric.TestController",["$scope","jolokia","$q","workspace","$templateCache",function(b,c,d,e,f){b.mavenMBean=Maven.getMavenIndexerMBean(e),b.html="text/html",b.versionSelector=f.get("versionSelectorTemplate"),b.profileIncludes=f.get("profile-includes"),b.profileExcludes=f.get("profile-excludes"),b.containerList=f.get("containerListTemplate"),b.profileLink=f.get("profileLinkTemplate"),b.version={},b.versionId="",b.someUri="",b.uriParts=[],b.version={},b.osp=[],b.vid="1.0",b.someProfiles=["a-mq","aws-ec2"],b.selectedProfiles=[{id:"1-dot-0",selected:!0},{id:"a-mq",selected:!0}],b.selectedProfilesString="",b.$watch("version",function(a,c){a!==c&&b.version&&!Object.equal(b.version,{})&&(b.versionId=b.version.id)}),b.$watch("osp",function(a,c){b.selectedProfilesString=angular.toJson(b.osp)}),b.$watch("someUri",function(a,c){a!==c&&(b.uriParts=a.split("/"))}),b.$watch("uriParts",function(a,c){if(a!==c&&1===a.length&&a.length<c.length&&""!==c.last()&&a.first().has(c.last())){var d=c.first(c.length-1).include(a.first());b.someUri=d.join("/")}},!0),b.doCompletionMaven=function(a){return Maven.completeMavenUri(d,b,e,c,a)},b.doCompletionFabric=function(f){return a.completeUri(d,b,e,c,f)}}])}(Fabric||(Fabric={}));var Fabric;!function(a){function b(b){return{restrict:"A",replace:!0,templateUrl:a.templatePath+"versionSelector.html",scope:{selectedVersion:"=fabricVersionSelector",availableVersions:"=?",menuBind:"=?",exclude:"@"},controller:["$scope","$element","$attrs","jolokia",function(b,c,d,e){function f(a,b){return angular.isString(b)&&(b=b.has("[")&&b.has("]")?angular.fromJson(b):[b]),b&&0!==b.length?a.exclude(function(a){return b.some(function(b){return b===a.id})}):a}function g(a){return b.versions.map(function(a){return{title:a.id,action:function(){b.selectedVersion=a,Core.isBlank(b.onPick)||b.$parent.$eval(b.onPick,{version:a.id})}}})}function h(c){b.versions=a.sortVersions(c,b.desc),b.versions=f(b.versions,b.exclude),b.config&&(b.config.items=g(b.versions)),b.availableVersions=b.versions}b.versions=[],b.responseJson="",b.$watch("selectedVersion",function(a,c){a!==c&&(b.selectedVersion=a&&"id"in a?b.versions.find(function(b){return b.id===a.id}):b.versions.find(function(a){return a.defaultVersion}))}),b.$watch("versions",function(a,c){a!==c&&(b.selectedVersion&&"id"in b.selectedVersion?b.selectedVersion=b.versions.find(function(a){return a.id===b.selectedVersion.id}):b.selectedVersion=b.versions.find(function(a){return a.defaultVersion}))},!0),b.$watch("exclude",function(a,c){if(a!==c&&b.responseJson){h(angular.fromJson(b.responseJson))}}),b.render=function(a){var c=angular.toJson(a.value);b.responseJson!==c&&(b.responseJson=c,h(a.value),Core.$apply(b))},Core.register(e,b,{type:"exec",mbean:a.managerMBean,operation:"versions(java.util.List)",arguments:[["id","defaultVersion"]]},onSuccess(b.render))}],link:function(a,c,d){a.template=b.get("withSelect"),Core.parseBooleanValue(d.useMenu)&&(a.config={title:"Version"},Core.isBlank(d.menuTitle)||(a.config.title=d.menuTitle),Core.isBlank(d.menuBind)||a.$watch("menuBind",function(b,c){Core.isBlank(b)||(a.config.title=b)}),Core.isBlank(d.onPick)||(a.onPick=d.onPick),Core.isBlank(d.useIcon)||(a.config.icon=d.useIcon),a.desc="desc"in d,a.template=b.get("withMenu"))}}}a.VersionSelector=b}(Fabric||(Fabric={}));var ForceGraph;!function(a){var b="forceGraph";a._module=angular.module(b,["bootstrap","ngResource"]),a._module.directive("hawtioForceGraph",function(){return new a.ForceGraphDirective}),hawtioPluginLoader.addModule(b)
}(ForceGraph||(ForceGraph={}));var ForceGraph;!function(a){var b=(Logger.get("ForceGraph"),function(){function a(){this.restrict="A",this.replace=!0,this.transclude=!1,this.scope={graph:"=graph",nodesize:"@",selectedModel:"@",linkDistance:"@",markerKind:"@",charge:"@"},this.link=function(a,b,c){a.trans=[0,0],a.scale=1,a.$watch("graph",function(a,b){d()}),a.redraw=function(){a.trans=d3.event.translate,a.scale=d3.event.scale,a.viewport.attr("transform","translate("+a.trans+") scale("+a.scale+")")},a.tick=function(){a.graphEdges.attr("d",function(a){var b=a.target.x-a.source.x,c=a.target.y-a.source.y,d=Math.sqrt(b*b+c*c);return"M"+a.source.x+","+a.source.y+"A"+d+","+d+" 0 0,1 "+a.target.x+","+a.target.y}),a.graphNodes.attr("transform",function(a){return"translate("+a.x+","+a.y+")"}),a.graphLabels.attr("transform",function(a){return"translate("+a.x+","+a.y+")"}),!Object.hasOwnProperty.call(window,"ActiveXObject")&&window.ActiveXObject||a.svg.selectAll(".link").each(function(){this.parentNode.insertBefore(this,this)})},a.mover=function(b){null!=b.popup&&$("#pop-up").fadeOut(100,function(){null!=b.popup.title?$("#pop-up-title").html(b.popup.title):$("#pop-up-title").html(""),null!=b.popup.content?$("#pop-up-content").html(b.popup.content):$("#pop-up-content").html("");var c=b.x*a.scale+a.trans[0]+20,d=b.y*a.scale+a.trans[1]+20;$("#pop-up").css({left:c,top:d}),$("#pop-up").fadeIn(100)})},a.mout=function(a){$("#pop-up").fadeOut(50)};var d=function(){function c(a){return a.image&&a.image.url}var d=$(b),e=$(b).parent().height(),f=$(b).parent().width();d.children("svg").remove(),a.svg=d3.select(d[0]).append("svg").attr("width",f).attr("height",e);var g=null;if(a.graph&&(g=a.graph.linktypes),g&&(a.svg.append("svg:defs").selectAll("marker").data(g).enter().append("svg:marker").attr("id",String).attr("viewBox","0 -5 10 10").attr("refX",15).attr("refY",-1.5).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5"),a.svg.append("svg:g").append("svg:rect").attr("class","graphbox.frame").attr("width",f).attr("height",e),a.viewport=a.svg.append("svg:g").call(d3.behavior.zoom().on("zoom",a.redraw)).append("svg:g"),a.viewport.append("svg:rect").attr("width",1e6).attr("height",1e6).attr("class","graphbox").attr("transform","translate(-50000, -500000)"),a.graph)){var h=a.$parent||a,i=a.selectedModel||"selectedNode";a.force=d3.layout.force().nodes(a.graph.nodes).links(a.graph.links).size([f,e]).on("tick",a.tick),angular.isDefined(a.linkDistance)&&a.force.linkDistance(a.linkDistance),angular.isDefined(a.charge)&&a.force.charge(a.charge);var j=a.markerKind||"marker-end";a.graphEdges=a.viewport.append("svg:g").selectAll("path").data(a.force.links()).enter().append("svg:path").attr("class",function(a){return"link "+a.type}).attr(j,function(a){return"url(#"+a.type+")"}),a.graphNodes=a.viewport.append("svg:g").selectAll("circle").data(a.force.nodes()).enter().append("a").attr("xlink:href",function(a){return a.navUrl}).on("mouseover.onLink",function(a,b){d3.select(d3.event.target).classed("selected",!0),h[i]=a,Core.pathSet(h,i,a),Core.$apply(h)}).on("mouseout.onLink",function(a,b){d3.select(d3.event.target).classed("selected",!1)}),a.graphNodes.filter(function(a){return null!=a.image}).append("image").attr("xlink:href",function(a){return a.image.url}).attr("x",function(a){return-a.image.width/2}).attr("y",function(a){return-a.image.height/2}).attr("width",function(a){return a.image.width}).attr("height",function(a){return a.image.height}),a.graphNodes.filter(function(a){return!c(a)}).append("circle").attr("class",function(a){return a.type}).attr("r",function(b){return b.size||a.nodesize}),a.graphLabels=a.viewport.append("svg:g").selectAll("g").data(a.force.nodes()).enter().append("svg:g"),a.graphLabels.append("svg:text").attr("x",8).attr("y",".31em").attr("class","shadow").text(function(a){return a.name}),a.graphLabels.append("svg:text").attr("x",8).attr("y",".31em").text(function(a){return a.name}),a.force.start(),a.graphNodes.call(a.force.drag).on("mouseover",a.mover).on("mouseout",a.mout)}}}}return a}());a.ForceGraphDirective=b}(ForceGraph||(ForceGraph={}));var Forms;!function(a){a._module.directive("hawtioFormMap",[function(){return{restrict:"A",replace:!0,templateUrl:UrlHelpers.join(a.templateUrl,"formMapDirective.html"),scope:{description:"@",entity:"=",mode:"=",data:"=",name:"@"},link:function(b,c,d){b.deleteKey=function(c){try{delete b.entity[b.name][""+c]}catch(d){a.log.debug("failed to delete key: ",c," from entity: ",b.entity)}},b.addItem=function(a){b.entity||(b.entity={}),Core.pathSet(b.entity,[b.name,a.key],a.value),b.showForm=!1},b.$watch("showForm",function(a){a&&(b.newItem={key:void 0,value:void 0})})}}}])}(Forms||(Forms={}));var Forms;!function(a){a.FormTestController=a._module.controller("Forms.FormTestController",["$scope",function(a){a.editing=!1,a.html="text/html",a.javascript="javascript",a.basicFormEx1Entity={key:"Some key",value:"Some value"},a.basicFormEx1EntityString=angular.toJson(a.basicFormEx1Entity,!0),a.basicFormEx1Result="",a.toggleEdit=function(){a.editing=!a.editing},a.view=function(){return a.editing?"edit":"view"},a.basicFormEx1='<div simple-form name="some-form" action="#/forms/test" method="post" data="basicFormEx1SchemaObject" entity="basicFormEx1Entity" onSubmit="callThis()"></div>',a.toObject=function(a){return angular.fromJson(a.replace("'",'"'))},a.fromObject=function(b){return angular.toJson(a[b],!0)},a.basicFormEx1Schema='{\n   "properties": {\n     "key": {\n       "description": "Argument key",\n       "type": "java.lang.String"\n     },\n     "value": {\n       "description": "Argument Value",\n       "type": "java.lang.String"\n     },\n     "longArg": {\n       "description": "Long argument",\n       "type": "Long",\n       "minimum": "5",\n       "maximum": "10"\n     },\n     "intArg": {\n       "description": "Int argument",\n       "type": "Integer"\n     },\n     "objectArg": {\n       "description": "some object",\n       "type": "object"\n     },\n     "booleanArg": {\n       "description": "Some boolean value",\n       "type": "java.lang.Boolean"\n     }\n   },\n   "description": "Show some stuff in a form",\n   "type": "java.lang.String",\n   "tabs": {\n     "Tab One": ["key", "value"],\n     "Tab Two": ["*"],\n     "Tab Three": ["booleanArg"]\n   }\n}',a.basicFormEx1SchemaObject=a.toObject(a.basicFormEx1Schema),a.updateSchema=function(){a.basicFormEx1SchemaObject=a.toObject(a.basicFormEx1Schema)},a.updateEntity=function(){a.basicFormEx1Entity=angular.fromJson(a.basicFormEx1EntityString)},a.hawtioResetEx='<a class="btn" href="" hawtio-reset="some-form"><i class="icon-refresh"></i> Clear</a>',a.hawtioSubmitEx='      <a class="btn" href="" hawtio-submit="some-form"><i class="icon-save"></i> Save</a>',a.callThis=function(b,c){a.basicFormEx1Result=angular.toJson(b,!0),Core.notification("success",'Form "'+c.get(0).name+'" submitted...'),Core.$apply(a)},a.config={name:"form-with-config-object",action:"/some/url",method:"post",data:"setVMOption",showtypes:"false"},a.cheese={key:"keyABC",value:"valueDEF",intArg:999},a.onCancel=function(a){Core.notification("success",'Cancel clicked on form "'+a.get(0).name+'"')},a.onSubmit=function(a,b){Core.notification("success",'Form "'+b.get(0).name+'" submitted... (well not really), data:'+JSON.stringify(a))},a.derp=function(a,b){Core.notification("error","derp with json "+JSON.stringify(a))},a.inputTableData={rows:[{id:"object1",name:"foo"},{id:"object2",name:"bar"}]},a.inputTableConfig={data:"inputTableData.rows",displayFooter:!1,showFilter:!1,showSelectionCheckbox:!1,enableRowClickSelection:!0,primaryKeyProperty:"id",properties:{rows:{items:{type:"string",properties:{id:{description:"Object ID",type:"java.lang.String"},name:{description:"Object Name",type:"java.lang.String"}}}}},columnDefs:[{field:"id",displayName:"ID"},{field:"name",displayName:"Name"}]}}])}(Forms||(Forms={}));var Health;!function(a){var b="health";a._module=angular.module(b,["bootstrap","ngResource","hawtioCore","hawtio-ui"]),a._module.config(["$routeProvider",function(a){a.when("/health",{templateUrl:"app/health/html/health.html"})}]),a._module.run(["$location","workspace","viewRegistry","layoutFull","helpRegistry",function(b,c,d,e,f){d.health=e,f.addUserDoc("health","app/health/doc/help.md",function(){return a.hasHealthMBeans(c)}),c.topLevelTabs.push({id:"health",content:"Health",title:"View the health of the various sub systems",isValid:function(b){return a.hasHealthMBeans(b)},href:function(){return"#/health"},isActive:function(a){return a.isTopTabActive("health")}})}]),hawtioPluginLoader.addModule(b)}(Health||(Health={}));var Health;!function(a){a.HealthController=a._module.controller("Health.HealthController",["$scope","jolokia","workspace","$templateCache",function(b,c,d,e){function f(b){return angular.forEach(b,function(b){var c=b.domain;if(!c){var d=b.healthId;if(d){var e=d.lastIndexOf(".");if(e>0){c=d.substring(0,e);var f=a.healthDomains[c];f&&(c=f);var g=b.kind;g||(g=Core.humanizeValue(d.substring(e+1)),b.kind=g)}}b.domain=c}}),b}function g(a){return{healthId:a.domain,level:"INFO",message:a.title+" is OK",instances:1,healthPercent:1}}a.decorate(b),b.results=[],b.responses={},b.mbeans=[],b.mbeanStatus={},b.displays=[],b.page="",b.pageFilter="",b.$watch("mbeans",function(d,e){Core.unregister(c,b),d&&(b.mbeanStatus={},d.forEach(function(d){var e=Core.register(c,b,{type:"exec",mbean:d,operation:"healthList()"},{success:b.render,error:function(b){a.log.info("Failed to invoke healthList() on mbean: "+d+" due to: ",b.error),a.log.debug("Stack trace: ",b.stacktrace.split("\n")),e()}}),f=function(b){b.error.has("AttributeNotFoundException")||(a.log.info("Failed to read CurrentStatus on mbean: "+d+" due to: ",b.error),a.log.debug("Stack trace: ",b.stacktrace.split("\n")))};c.request({type:"read",mbean:d,attribute:"CurrentStatus"},{success:function(a){b.mbeanStatus[a.request.mbean]=a.value,Core.register(c,b,{type:"read",mbean:d,attribute:"CurrentStatus"},{success:function(a){a.value!==b.mbeanStatus[a.request.mbean]&&(b.mbeanStatus[a.request.mbean]=a.value,Core.$apply(b))},error:f})},error:f})}))},!0),b.getTitleClass=function(a){if(!a)return"warning";if(!a.values||0===a.values.length)return"ok";var b="ok";return a.values.forEach(function(a){"warning"!==b&&a.level&&"info"!==a.level.toLowerCase()&&(b="warning")}),b},b.getHumanName=function(a){var b=a;if(a.startsWith("org.apache.activemq")){var c=a.split(",");return c.forEach(function(a){if(a.startsWith("brokerName")){var c=a.split("=");c[1]&&(b="Broker: "+c[1])}}),b}if(a.startsWith("io.fabric8:service"))return"Fabric8";var c=a.split(",");return c.forEach(function(a){if(a.startsWith("desc")){var c=a.split("=");c[1]&&(b=c[1])}}),b},b.getMBeans=function(){var b=a.getHealthMBeans(d);if(a.log.debug("HealthMap: ",b),b){if(!angular.isArray(b))return[b.objectName];var c=b.map(function(a){return a.objectName});return a.log.debug("Health mbeans: ",c),c}return a.log.debug("No health mbeans found..."),[]},b.$on("jmxTreeUpdated",function(){b.mbeans=b.getMBeans()}),b.$on("$routeChangeSuccess",function(){b.mbeans=b.getMBeans()}),b.mbeans=b.getMBeans(),b.render=function(c){var d=c.request.mbean,h=c.value;if(null!==h&&0==h.length){var i=b.getHumanName(d),j=i;d.startsWith("org.apache.activemq")&&(j=a.healthDomains["org.apache.activemq"]);h=[g({domain:j,title:i})]}var k=angular.toJson(h);if(!(d in b.responses&&b.responses[d]===k)){b.responses[d]=k;var l=b.displays.find(function(a){return a.mbean===d});h=f(h),h=h.sortBy(function(a){return a.level?b.levelSorting[a.level]:99}),h.forEach(b.generateChartData),l?l.values=h:b.displays.push({mbean:d,values:h}),""===b.page&&(b.page=e.get("pageTemplate")),Core.$apply(b)}},b.filterValues=function(a){var c=angular.toJson(a);return Core.matchFilterIgnoreCase(c,b.pageFilter)},b.isPercentage=function(a){return void 0!==a&&a.toUpperCase().indexOf("PERCENT")>0}}])}(Health||(Health={}));var ArrayHelpers;!function(a){function b(a,b,c){void 0===c&&(c="id");var d=a.length;return a.remove(function(a){return!b.any(function(b){return b[c]===a[c]})}),a.length!==d}function c(a,c,d){void 0===d&&(d="id");var e=b(a,c,d);return c.forEach(function(b){var c=a.find(function(a){return a[d]===b[d]});c?b!==c&&(angular.copy(b,c),e=!0):(e=!0,a.push(b))}),e}a.removeElements=b,a.sync=c}(ArrayHelpers||(ArrayHelpers={}));var PollHelpers;!function(a){function b(a,b,d,e,f){if(void 0===d&&(d=2e3),a.$hasPoller)return void c.debug("scope already has polling set up, ignoring subsequent polling request");a.$hasPoller=!0,e||(e=Core.injector.get("$timeout")),f||(f=Core.injector.get("jolokia"));var g=void 0,h=a.name||"anonymous scope",i=function(){b(function(){f.isRunning()&&a.$hasPoller&&(g=e(i,d))})};return a.$on&&(a.$on("$destroy",function(){c.debug("scope",h," being destroyed, cancelling polling"),delete a.$hasPoller,e.cancel(g)}),a.$on("$routeChangeStart",function(){c.debug("route changing, cancelling polling for scope: ",h),delete a.$hasPoller,e.cancel(g)})),i}var c=Logger.get("PollHelpers");a.setupPolling=b}(PollHelpers||(PollHelpers={}));var Infinispan;!function(a){var b=function(){function b(a,b){this.workspace=a,this.jolokia=b,this.cacheName=null,this.sessionId=null,this.useSessionIds=!0}return b.prototype.setCacheName=function(a){if(a){a=Core.trimQuotes(a);var b="(local)";a.endsWith(b)&&(a=a.substring(0,a.length-b.length))}this.cacheName&&this.cacheName===a||(this.sessionId&&this.deleteSession(this.sessionId),this.cacheName=a,this.createSession())},b.prototype.createSession=function(){var b=this;if(this.useSessionIds){var c=a.getInterpreterMBean(this.workspace);if(c){this.jolokia.execute(c,"createSessionId",this.cacheName,onSuccess(function(a){console.log("Has session ID: "+a),b.sessionId=a}))}else this.warnMissingMBean()}},b.prototype.execute=function(b,c){if(b){b=b.trim(),b.endsWith(";")||(b+=";");var d=this.useSessionIds?this.sessionId:null;if(this.useSessionIds||(b="cache "+this.cacheName+"; "+b),d||!this.useSessionIds){var e=a.getInterpreterMBean(this.workspace);e?this.jolokia.execute(e,"execute",d,b,onSuccess(c)):this.warnMissingMBean()}else Core.notification("warning","Cannot evaluate SQL as we don't have a sessionId yet!")}},b.prototype.deleteSession=function(a){},b.prototype.warnMissingMBean=function(){Core.notification("error","No Interpreter MBean available")},b}();a.CLI=b}(Infinispan||(Infinispan={}));var Infinispan;!function(a){function b(a){if(a){var b=a._id;if(b){var c='name="',d=b.indexOf(c);if(d>0){d+=c.length;var e=b.indexOf('"',d+1);return e>0?b.substring(d,e):b.substring(d)}}return b}return null}function c(b){if(b){var c=b.findMBeanWithProperties(a.jmxDomain,{component:"Interpreter",type:"CacheManager"});if(c)return c.objectName}return null}function d(b){var c=b.selection;return c&&c.domain===a.jmxDomain?c.entries.name:null}a.infinispanCacheName=b,a.getInterpreterMBean=c,a.getSelectedCacheName=d}(Infinispan||(Infinispan={}));var Infinispan;!function(a){var b="infinispan";a.jmxDomain="";var c="jboss.infinispan";a._module=angular.module(b,["bootstrap","ngResource","hawtioCore"]),a._module.config(["$routeProvider",function(a){a.when("/infinispan/query",{templateUrl:"app/infinispan/html/query.html"})}]),a._module.filter("infinispanCacheName",function(){return a.infinispanCacheName}),a._module.run(["workspace","viewRegistry","helpRegistry",function(b,d,e){b.treeContainsDomainAndProperties(c)?a.jmxDomain=c:a.jmxDomain="org.infinispan",d.infinispan="app/infinispan/html/layoutCacheTree.html",e.addUserDoc("infinispan","app/infinispan/doc/help.md",function(){return b.treeContainsDomainAndProperties(a.jmxDomain)}),b.attributeColumnDefs[a.jmxDomain+"/Caches/folder"]=[{field:"_id",displayName:"Name",cellTemplate:'<div class="ngCellText" title="Infinispan cache">{{row.entity | infinispanCacheName}}</div>',width:"**"},{field:"numberOfEntries",displayName:"Entries"},{field:"hits",displayName:"Hits"},{field:"hitRatio",displayName:"Hit Ratio"},{field:"stores",displayName:"Stores"},{field:"averageReadTime",displayName:"Avg Read Time"},{field:"averageWriteTime",displayName:"Avg Write Time"}],b.topLevelTabs.push({id:"infinispan",content:"Infinispan",title:"View your distributed data",isValid:function(b){return b.treeContainsDomainAndProperties(a.jmxDomain)},href:function(){return"#/jmx/attributes?tab=infinispan"},isActive:function(a){return a.isTopTabActive("infinispan")}}),b.subLevelTabs.push({content:'<i class="icon-pencil"></i> Query',title:"Perform InSQL commands on the cache",isValid:function(b){return a.getSelectedCacheName(b)&&a.getInterpreterMBean(b)},href:function(){return"#/infinispan/query"}})}]),hawtioPluginLoader.addModule(b)}(Infinispan||(Infinispan={}));var Infinispan;!function(a){a._module.controller("Infinispan.QueryController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(a){if(b.output=null,a){var c=a.ERROR||"",d=a.STACKTRACE||"";if(c||d)d&&(c+="\n"+d),Core.notification("error",c);else{var e=a.OUTPUT;e?(b.output=e,console.log("==== output: "+e),Core.$apply(b)):Core.notification("error","No results!")}}else console.log("no output...")}function g(){var b=a.getSelectedCacheName(d);console.log("selected cacheName is: "+b),b&&h.setCacheName(b)}var h=new a.CLI(d,e);b.logs=[],b.filteredLogs=[],b.selectedItems=[],b.searchText="",b.filter={logLevelQuery:"",logLevelExactMatch:!1};var i=[{field:"key",displayName:"Key"},{field:"value",displayName:"Value"}];b.gridOptions={selectedItems:b.selectedItems,data:"filteredLogs",displayFooter:!1,showFilter:!1,filterOptions:{filterText:"searchText"},columnDefs:i,rowDetailTemplateId:"logDetailTemplate"},b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(g,50)}),b.$watch("workspace.selection",function(){g()}),b.doQuery=function(){b.sql&&h.execute(b.sql,f)}}])}(Infinispan||(Infinispan={}));var Infinispan;!function(a){a._module.controller("Infinispan.TreeHeaderController",["$scope",function(a){a.expandAll=function(){Tree.expandAll("#infinispantree")},a.contractAll=function(){Tree.contractAll("#infinispantree")}}]),a._module.controller("Infinispan.TreeController",["$scope","$location","workspace",function(b,c,d){function e(a,b){if(a){a.children&&angular.forEach(a.children,function(c,d){if(c.objectName&&"Statistics"===c.title){var f=c.parent.parent.title||c.title,g=Core.humanizeValue(f),h=new Folder(g);h.addClass="org-infinispn-cache",h.typeName="Cache",h.parent=a,h.key=b.key+"-"+f,h.objectName=c.objectName,h.domain=c.domain,h.entries=c.entries,h.tooltip="Cache name: "+f,b.children.push(h)}else e(c,b)})}}function f(){Jmx.updateTreeSelectionFromURL(c,$("#infinispantree"),!0)}b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(f,50)}),b.$watch("workspace.tree",function(){if(!d.moveIfViewInvalid()){var g=[],h=d.tree;if(h){var i=a.jmxDomain,j=h.get(i);if(j){var k=new Folder("Caches");k.domain=i,k.key="root-Infinispan-Caches",k.typeName="Caches",g.push(k),e(j,k)}var l=$("#infinispantree");Jmx.enableTree(b,c,d,l,g),setTimeout(f,50)}}})}])}(Infinispan||(Infinispan={}));var Insight;!function(a){a.pluginName="insight",a._module=angular.module(a.pluginName,["hawtioCore"]),a._module.config(["$routeProvider",function(a){a.when("/insight/all",{templateUrl:"app/insight/html/all.html"}).when("/insight/jvms",{templateUrl:"app/insight/html/jvms.html"}).when("/insight/elasticsearch",{templateUrl:"app/insight/html/eshead.html"}).when("/insight/logs",{redirectTo:function(){return"/insight/dashboard?kbnId=app/insight/dashboards/logs&p=insight&tab=insight-logs"}}).when("/insight/camel",{redirectTo:function(){return"/insight/dashboard?kbnId=app/insight/dashboards/camel&p=insight&tab=insight-camel"}}).when("/insight/dashboard",{templateUrl:"../hawtio-kibana/app/partials/dashboard.html"})}]),a._module.run(["workspace","viewRegistry","helpRegistry","serviceIconRegistry","layoutFull",function(b,c,d,e,f){e.addIcons({title:"Fabric8 Insight",type:"icon",src:"icon-eye-open"},"org.fusesource.insight","io.fabric8.insight"),Perspective.metadata.insight={icon:{title:"Fabric8 Insight",type:"icon",src:"icon-eye-open"},label:"Insight",isValid:function(b){return a.hasInsight(b)},topLevelTabs:{includes:[{href:"#/camin"},{id:"insight-logs"},{id:"insight-camel"},{id:"insight-eshead"}]}},c.insight="../hawtio-kibana/app/partials/hawtioLayout.html",c.eshead=f,d.addUserDoc("insight","app/insight/doc/help.md",function(){return Fabric.hasFabric(b)&&a.hasInsight(b)}),b.topLevelTabs.push({id:"insight-metrics",content:"Metrics",title:"View Insight metrics",href:function(){return"#/insight/all"},isValid:function(b){return Fabric.hasFabric(b)&&a.hasInsight(b)}}),b.topLevelTabs.push({id:"insight-logs",content:"Logs",title:"View Insight Logs",href:function(){return"#/insight/logs"},isValid:function(b){return Fabric.hasFabric(b)&&a.hasInsight(b)&&a.hasKibana(b)},isActive:function(){return b.isTopTabActive("insight-logs")}}),b.topLevelTabs.push({id:"insight-camel",content:"Camel Events",title:"View Insight Camel",href:function(){return"#/insight/camel"},isValid:function(b){return Fabric.hasFabric(b)&&a.hasInsight(b)&&a.hasKibana(b)},isActive:function(){return b.isTopTabActive("insight-camel")}}),b.topLevelTabs.push({id:"insight-eshead",content:"Elasticsearch",title:"View Insight Elasticsearch",href:function(){return"#/insight/elasticsearch?tab=eshead"},isValid:function(b){return Fabric.hasFabric(b)&&a.hasInsight(b)&&a.hasEsHead(b)},isActive:function(){return b.isTopTabActive("insight-eshead")}})}]),hawtioPluginLoader.addModule(a.pluginName)}(Insight||(Insight={}));var Insight;!function(a){a._module.controller("Insight.AllController",["$scope","jolokia","localStorage","workspace",function(b,c,d,e){function f(c){Object.equal(b.result,c.value)||(b.result=c.value,b.containers=[],b.profiles=[a.allContainers],b.versions=[],b.result.forEach(function(a){b.profiles=b.profiles.union(a.profileIds.map(function(a){return{id:a}})),b.versions=b.versions.union([a.versionId]),b.containers.push({name:a.id,alive:a.alive,version:a.versionId,profileIds:a.profileIds})}),Core.$apply(b))}function g(a,c){var d=c.tree.getSelectedNodes();b.chartsMeta=d.map(function(a){var b=a.data;return{name:b.field,field:b.field,type:b.type,host:b.hasHost}}),j()}function h(a,b){return"title"===a.getEventTargetType(b)&&a.toggleSelect(),!0}function i(a,b){if(32===b.which)return a.toggleSelect(),!1}function j(){var d=[];b.chartsMeta.forEach(function(c){var e=void 0!==b.metrics[c.type]?b.metrics[c.type][c.field]:void 0;c.host?b.containers.forEach(function(f){(b.profile===a.allContainers||$.inArray(b.profile.id,f.profileIds)>=0)&&d.push({name:(void 0!==e?e.description:c.name)+" ["+f.name+"]",type:"sta-"+c.type,field:c.field,query:'host: "'+f.name+'"',meta:e})}):d.push({name:void 0!==e?e.description:c.name,type:"sta-"+c.type,field:c.field,meta:e})}),a.createCharts(b,d,"#charts",c)}b.result=null,b.containers=[],b.profiles=[a.allContainers],b.versions=[],b.profile=a.allContainers,b.time_options=["1m","5m","15m","1h","6h","12h"],b.timespan="1m",b.updateRate=parseInt(d.updateRate),b.chartsMeta=[],Core.register(c,b,{type:"exec",mbean:a.managerMBean,operation:"containers()",arguments:[]},onSuccess(f));var k=a.getInsightMetricsCollectorMBean(e);b.metrics={},k&&(b.metrics=jQuery.parseJSON(c.getAttribute(k,"Metrics")));var l={type:"exec",mbean:"org.elasticsearch:service=restjmx",operation:"exec",arguments:["GET","/_all/_mapping",""]};c.request(l,{success:function(b){var c=jQuery.parseJSON(b.value),d={},e=[];for(var f in c)if(f.startsWith("insight-"))for(var j in c[f])if(j.startsWith("sta-")){var k=j.substring(4);d[k]||(d[k]=!0,e.push({title:k,expand:!0,children:a.getChildren(c[f][j],k,"",void 0!==c[f][j].properties.host)}))}$("#insighttree").dynatree({checkbox:!0,selectMode:2,onSelect:g,onClick:h,onKeydown:i,children:e})}}),b.set_timespan=function(a){b.timespan=a,j()},b.profile_changed=function(){j()}}])}(Insight||(Insight={}));var Insight;!function(a){a._module.controller("Insight.ElasticSearchController",["$scope","jolokia","localStorage",function(b,c,d){function e(){a.createCharts(b,f,g,c)}b.time_options=["1m","5m","15m","1h","6h","12h"],b.timespan="1m",b.metrics=[],b.updateRate=parseInt(d.updateRate),b.data=[];var f=[{name:"active primary shards",type:"sta-elasticsearch",field:"active_primary_shards"},{name:"active shards",type:"sta-elasticsearch",field:"active_shards"},{name:"relocating shards",type:"sta-elasticsearch",field:"relocating_shards"},{name:"initializing shards",type:"sta-elasticsearch",field:"initializing_shards"},{name:"unassigned shards",type:"sta-elasticsearch",field:"unassigned_shards"}],g="#charts";b.set_timespan=function(a){b.timespan=a,e()},e()}])}(Insight||(Insight={}));var Insight;!function(a){a._module.controller("JVMsController",["$scope","jolokia","localStorage",function(b,c,d){function e(c){Object.equal(b.result,c.value)||(b.result=c.value,b.containers=[],b.profiles=[a.allContainers],b.versions=[],b.result.forEach(function(a){b.profiles=b.profiles.union(a.profileIds.map(function(a){return{id:a}})),b.versions=b.versions.union([a.versionId]),b.containers.push({name:a.id,alive:a.alive,version:a.versionId,profileIds:a.profileIds})}),Core.$apply(b),f())}function f(){var d=[];g.forEach(function(c){b.containers.forEach(function(e){(b.profile===a.allContainers||$.inArray(b.profile.id,e.profileIds)>=0)&&d.push({name:c.name+" ["+e.name+"]",type:c.type,field:c.field,query:'host: "'+e.name+'"'})})}),a.createCharts(b,d,h,c)}b.time_options=["1m","5m","15m","1h","6h","12h"],b.timespan="1m",b.containers=[],b.profiles=[a.allContainers],b.versions=[],b.profile=a.allContainers,b.metrics=[],b.updateRate=parseInt(d.updateRate),b.data=[];var g=[{name:"threads",type:"sta-jvm",field:"threads.count"},{name:"mem",type:"sta-jvm",field:"mem.heap_used"}],h="#charts";b.set_timespan=function(a){b.timespan=a,f()},b.profile_changed=function(){f()},Core.register(c,b,{type:"exec",mbean:a.managerMBean,operation:"containers()",arguments:[]},onSuccess(e))}])}(Insight||(Insight={}));var JBoss;!function(a){function b(a){return a&&a.lastIndexOf(".war")>-1?a.replace(".war",""):a}function c(a){return a?"/"+b(a):""}function d(a){if(a)switch(a.toString().toLowerCase()){case"started":case"ok":case"true":return"green icon-play-circle"}return"orange icon-off"}a.cleanWebAppName=b,a.cleanContextPath=c,a.iconClass=d}(JBoss||(JBoss={}));var JBoss;!function(a){var b="jboss";a._module=angular.module(b,["bootstrap","ngResource","ui.bootstrap.dialog","hawtioCore"]),a._module.config(["$routeProvider",function(a){a.when("/jboss/server",{templateUrl:"app/jboss/html/server.html"}).when("/jboss/applications",{templateUrl:"app/jboss/html/applications.html"}).when("/jboss/dmr",{templateUrl:"app/jboss/html/dmr.html"}).when("/jboss/connectors",{templateUrl:"app/jboss/html/connectors.html"})}]),a._module.filter("jbossIconClass",function(){return a.iconClass}),a._module.run(["$location","workspace","viewRegistry","helpRegistry",function(a,c,d,e){d.jboss="app/jboss/html/layoutJBossTabs.html",e.addUserDoc(b,"app/"+b+"/doc/help.md",function(){return c.treeContainsDomainAndProperties("jboss.as")||c.treeContainsDomainAndProperties("jboss.jta")||c.treeContainsDomainAndProperties("jboss.modules")}),c.topLevelTabs.push({id:"jboss",content:"JBoss",title:"Manage your JBoss container",isValid:function(a){return a.treeContainsDomainAndProperties("jboss.as")||a.treeContainsDomainAndProperties("jboss.jta")||a.treeContainsDomainAndProperties("jboss.modules")},href:function(){return"#/jboss/applications"},isActive:function(a){return a.isTopTabActive("jboss")}})}]),hawtioPluginLoader.addModule(b)}(JBoss||(JBoss={}));var JBoss;!function(a){a._module.controller("JBoss.ConnectorsController",["$scope","$location","workspace","jolokia",function(a,b,c,d){function e(b){function c(b){var c=b.value;c&&(c.mbean=b.request.mbean,c.port||(c.port=c.boundPort),c.name||(c.name="mail-smtp"),a.connectors.push(c),Core.$apply(a))}a.connectors=[],angular.forEach(b,function(a,b){var e=a;"jboss.as:socket-binding-group=standard-sockets"!==e.toString()&&(e.toString().lastIndexOf("management")>0?d.request({type:"read",mbean:e,attribute:["boundPort","name","bound"]},onSuccess(c)):e.toString().lastIndexOf("mail-smtp")>0?d.request({type:"read",mbean:e,attribute:["port"]},onSuccess(c)):d.request({type:"read",mbean:e,attribute:["port","name","bound"]},onSuccess(c)))}),Core.$apply(a)}function f(){setTimeout(g,50)}function g(){console.log("Loading JBoss connector data..."),d.search("jboss.as:socket-binding-group=standard-sockets,*",onSuccess(e))}var h='<div class="ngCellText pagination-centered" title="{{row.getProperty(col.field)}}"><i class="{{row.getProperty(col.field) | jbossIconClass}}"></i></div>';a.connectors=[];var i=[{field:"bound",displayName:"State",cellTemplate:h,width:56,minWidth:56,maxWidth:56,resizable:!1},{field:"name",displayName:"Name",cellFilter:null,width:"*",resizable:!0},{field:"port",displayName:"Port",cellFilter:null,width:"*",resizable:!0}];a.gridOptions={data:"connectors",displayFooter:!1,displaySelectionCheckbox:!1,canSelectRows:!1,columnDefs:i,filterOptions:{filterText:""}},a.$on("jmxTreeUpdated",f),a.$watch("workspace.tree",f)}])}(JBoss||(JBoss={}));var JBoss;!function(a){a._module.controller("JBoss.DmrController",["$scope","$location","workspace",function(a,b,c){function d(b){if(b){var c=null;if(i){var d=dmr.ModelNode.fromBase64(b),e=d.toJSONString();c=JSON.parse(e)}else c=JSON.parse(b),c=c.result;a.row=c,Core.$apply(a),console.log("Response: "+JSON.stringify(c,null,"  "))}}var e=b.search(),f=Core.url("/proxy/localhost/9990/management"),g=e._user||"",h=e._pwd||"";g&&(f+="?_user="+g,h&&(f+="&_pwd="+h));var i="dmr"===e._format,j=null,k="application/dmr-encoded";if(i){var l=new dmr.ModelNode;l.get("operation").set("read-attribute"),l.get("address").setEmptyList(),l.get("name").set("release-version"),j=l.toBase64String()}else{k="application/json";var m={operation:"read-resource"};j=JSON.stringify(m)}console.log("Using dmr: "+i+" with content type: "+k+" and data "+j),$.ajax({url:f,data:j,processData:!1,type:"POST",dataType:"text",contentType:k,accepts:k,headers:{"Content-type":k,Accept:k}}).done(d)}])}(JBoss||(JBoss={}));var JBoss;!function(a){a._module.controller("JBoss.JBossController",["$scope","$location","jolokia",function(b,c,d){function e(e){function f(e){function f(){g.url=i+g.contextPath}var g=e.value;if(g){g.mbean=e.request.mbean;var h=g.mbean;if(h){g.name=a.cleanWebAppName(g.name),g.contextPath=a.cleanContextPath(g.name);var i=Core.extractTargetUrl(c,b.httpScheme,b.httpPort);f();var j=h+",subsystem=web";d.request({type:"read",mbean:j,attribute:["contextRoot"]},onSuccess(function(a){var c=a.value;if(c){var d=c.contextRoot;d&&(g.contextPath=d,f(),Core.$apply(b))}}));var j=h+",subsystem=undertow";d.request({type:"read",mbean:j,attribute:["contextRoot"]},onSuccess(function(a){var c=a.value;if(c){var d=c.contextRoot;d&&(g.contextPath=d,f(),Core.$apply(b))}}));var k=b.mbeanIndex[h];angular.isDefined(k)?b.webapps[h]=g:(b.mbeanIndex[h]=b.webapps.length,b.webapps.push(g)),Core.$apply(b)}}}b.webapps=[],b.mbeanIndex={},b.selected.length=0,angular.forEach(e,function(a,b){var c=a;d.request({type:"read",mbean:c,attribute:["name","status"]},onSuccess(f))}),Core.$apply(b)}function f(){setTimeout(g,50)}function g(){console.log("Loading JBoss webapp data...");var a=d.search("jboss.as:socket-binding-group=standard-sockets,*");if(a){var c=!1;angular.forEach(a,function(a,e){var f=a;if(!c){var g=d.request({type:"read",mbean:f,attribute:["port","name"]});g&&g.value&&g.value.name&&"http"===g.value.name.toString().toLowerCase()&&(c=!0,b.httpPort=g.value.port,b.httpScheme="http")}})}d.search("jboss.as:deployment=*",onSuccess(e))}var h='<div class="ngCellText pagination-centered" title="{{row.getProperty(col.field)}}"><i class="{{row.getProperty(col.field) | jbossIconClass}}"></i></div>',i='<div class="ngCellText" title="{{row.getProperty(col.field)}}"><a ng-href="{{row.getProperty(col.field)}}" target="_blank">{{row.getProperty(col.field)}}</a></div>'
;b.uninstallDialog=new UI.Dialog,b.httpPort,b.httpScheme="http",b.webapps=[],b.selected=[];var j=[{field:"status",displayName:"State",cellTemplate:h,width:56,minWidth:56,maxWidth:56,resizable:!1},{field:"name",displayName:"Name",cellFilter:null,width:"*",resizable:!0},{field:"contextPath",displayName:"Context-Path",cellFilter:null,width:"*",resizable:!0},{field:"url",displayName:"Url",cellTemplate:i,cellFilter:null,width:"*",resizable:!0}];b.gridOptions={data:"webapps",displayFooter:!0,selectedItems:b.selected,selectWithCheckboxOnly:!0,columnDefs:j,filterOptions:{filterText:""}},b.controlWebApps=function(a){var c=b.selected.map(function(a){return a.mbean});angular.isArray(c)||(c=[c]);var e=(c.length||1)-1;angular.forEach(c,function(c,f){var g=f>=e?b.onLastResponse:b.onResponse;d.request({type:"exec",mbean:c,operation:a,arguments:null},onSuccess(g,{error:g}))})},b.start=function(){b.controlWebApps("deploy")},b.stop=function(){b.controlWebApps("undeploy")},b.reload=function(){b.controlWebApps("redeploy")},b.uninstall=function(){b.controlWebApps("remove"),b.uninstallDialog.close()},b.onLastResponse=function(a){b.onResponse(a),g()},b.onResponse=function(a){},b.$on("jmxTreeUpdated",f),b.$watch("workspace.tree",f),b.jbossServerVersion="",b.jbossServerName="",b.jbossServerLaunchType="";var k=d.search("jboss.as:management-root=*");if(k&&1===k.length)b.jbossServerVersion=d.getAttribute(k[0],"releaseVersion"),b.jbossServerName=d.getAttribute(k[0],"name"),b.jbossServerLaunchType=d.getAttribute(k[0],"launchType");else{var l="jboss.as:management-root=server",m=d.request({type:"read",mbean:l,attribute:["releaseVersion","name","launchType"]});if(m){var n=m.value;n&&(b.jbossServerVersion=n.releaseVersion,b.jbossServerName=n.name,b.jbossServerLaunchType=n.launchType)}else console.log("Cannot find JBoss/Wildfly server or there was more than one server")}}])}(JBoss||(JBoss={}));var Jclouds;!function(a){function b(a,b){if(!angular.isDefined(a))return b[0];var c=b.findIndex(function(b){return b===a});return-1!==c?b[c]:b[0]}function c(a,b){var c=s(a);return a.jolokia.request({type:"read",mbean:c}).value.Contexts.find(function(a){return a.name===b})}function d(a){angular.forEach(a,function(a){e(a)})}function e(a){var b=a.views,c=!1;angular.forEach(b,function(b){c||(b.has("blob")?(a.type="blobstore",c=!0):b.has("compute")&&(a.type="compute",c=!0))})}function f(a,b){return""===b?a:a.findAll(function(a){return a.operatingSystem.family===b})}function g(a,b,c){var d=[];return d=""===b?a:a.findAll(function(a){return a.group===b}),""===c?d:d.findAll(function(a){return a.locationId===c})}function h(a,b,c,d,e,f){b.request({type:"exec",mbean:t(a,c),operation:"resumeNode(java.lang.String)",arguments:[d]},onSuccess(e,{error:f}))}function i(a,b,c,d,e,f){b.request({type:"exec",mbean:t(a,c),operation:"suspendNode(java.lang.String)",arguments:[d]},onSuccess(e,{error:f}))}function j(a,b,c,d,e,f){b.request({type:"exec",mbean:t(a,c),operation:"rebootNode(java.lang.String)",arguments:[d]},onSuccess(e,{error:f}))}function k(a,b,c,d,e,f){b.request({type:"exec",mbean:t(a,c),operation:"destroyNode(java.lang.String)",arguments:[d]},onSuccess(e,{error:f}))}function l(a,b){return""===b?a:a.findAll(function(a){return a.type===b})}function m(a){angular.forEach(a,function(a){n(a)})}function n(a){var b=a.api.views,c=!1;angular.forEach(b,function(b){c||(b.has("blob")?(a.type="blobstore",c=!0):b.has("compute")&&(a.type="compute",c=!0))})}function o(a,b){return""===b?a:a.findAll(function(a){return a.type===b})}function p(a){if(a){var b=a.objectName;if(b)return b;var c=a.children;if(c&&c.length)return p(c[0])}return null}function q(a){var b=[];return angular.forEach(a.children,function(a){b.push(a.title)}),b}function r(a,b){if(a){return q(a.tree.navigate("org.jclouds",b))}return null}function s(a){if(a){return p(a.tree.navigate("org.jclouds","management","core"))}return null}function t(a,b){if(a){return p(a.tree.navigate("org.jclouds","compute",b))}return null}function u(a,b){if(a){return p(a.tree.navigate("org.jclouds","blobstore",b))}return null}Array.prototype.unique=function(){for(var a=[],b=this.length,c=0;c<b;c++){for(var d=c+1;d<b;d++)this[c]===this[d]&&(d=++c);a.push(this[c])}return a},a.setSelect=b,a.findContextByName=c,a.populateTypeForApis=d,a.populateTypeForApi=e,a.filterImages=f,a.filterNodes=g,a.resumeNode=h,a.suspendNode=i,a.rebootNode=j,a.destroyNode=k,a.apisOfType=l,a.populateTypeForProviders=m,a.populateTypeForProvider=n,a.providersOfType=o,a.findFirstObjectName=p,a.childsOfType=q,a.listJcloudsMBeanNameOfType=r,a.getSelectionJcloudsMBean=s,a.getSelectionJcloudsComputeMBean=t,a.getSelectionJcloudsBlobstoreMBean=u}(Jclouds||(Jclouds={}));var Jclouds;!function(a){var b="jclouds";a._module=angular.module(b,["bootstrap","ngResource","ngGrid","hawtioCore"]),a._module.config(["$routeProvider",function(a){a.when("/jclouds/api",{templateUrl:"app/jclouds/html/api-list.html"}).when("/jclouds/api/:apiId",{templateUrl:"app/jclouds/html/api.html"}).when("/jclouds/provider",{templateUrl:"app/jclouds/html/provider-list.html"}).when("/jclouds/provider/:providerId",{templateUrl:"app/jclouds/html/provider.html"}).when("/jclouds/compute/service",{templateUrl:"app/jclouds/html/compute/compute-service-list.html"}).when("/jclouds/compute/service/:computeId",{templateUrl:"app/jclouds/html/compute/compute-service.html"}).when("/jclouds/compute/node/:computeId",{templateUrl:"app/jclouds/html/compute/node-list.html"}).when("/jclouds/compute/node/:computeId/*nodeId",{templateUrl:"app/jclouds/html/compute/node.html"}).when("/jclouds/compute/image/:computeId",{templateUrl:"app/jclouds/html/compute/image-list.html"}).when("/jclouds/compute/image/:computeId/*imageId",{templateUrl:"app/jclouds/html/compute/image.html"}).when("/jclouds/compute/hardware/:computeId",{templateUrl:"app/jclouds/html/compute/hardware-list.html"}).when("/jclouds/compute/hardware/:computeId/*hardwareId",{templateUrl:"app/jclouds/html/compute/hardware.html"}).when("/jclouds/compute/location/:computeId",{templateUrl:"app/jclouds/html/compute/location-list.html"}).when("/jclouds/compute/location/:computeId/*locationId",{templateUrl:"app/jclouds/html/compute/location.html"}).when("/jclouds/blobstore/service",{templateUrl:"app/jclouds/html/blobstore/blobstore-service-list.html"}).when("/jclouds/blobstore/service/:blobstoreId",{templateUrl:"app/jclouds/html/blobstore/blobstore-service.html"}).when("/jclouds/blobstore/location/:blobstoreId",{templateUrl:"app/jclouds/html/blobstore/location-list.html"}).when("/jclouds/blobstore/location/:blobstoreId/*locationId",{templateUrl:"app/jclouds/html/blobstore/location.html"}).when("/jclouds/blobstore/container/:blobstoreId",{templateUrl:"app/jclouds/html/blobstore/container-list.html"}).when("/jclouds/blobstore/container/:blobstoreId/:containerId",{templateUrl:"app/jclouds/html/blobstore/container.html"}).when("/jclouds/blobstore/container/:blobstoreId/:containerId/*directory",{templateUrl:"app/jclouds/html/blobstore/container.html"})}]),a._module.run(["workspace","viewRegistry","helpRegistry",function(a,b,c){b.jclouds="app/jclouds/html/layoutJclouds.html",c.addUserDoc("jclouds","app/jclouds/doc/help.md",function(){return a.treeContainsDomainAndProperties("org.jclouds")}),a.topLevelTabs.push({id:"jclouds",content:"jclouds",title:"Visualise and manage the Jclouds Compute/BlobStore providers and apis",isValid:function(a){return a.treeContainsDomainAndProperties("org.jclouds")},href:function(){return"#/jclouds/api"},isActive:function(a){return a.isLinkActive("jclouds")}})}]),hawtioPluginLoader.addModule(b)}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.ApiListController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(c){Object.equal(b.result,c.value)||(b.result=c.value,b.apis=b.result.Apis,a.populateTypeForApis(b.apis),Core.$apply(b))}b.result={},b.apis=[],b.type="",b.types=["","blobstore","compute","loadbalancer"];var g=c.search().type;g&&(b.type=g),b.selectedApis=[],b.apiTable={data:"apis",showFilter:!1,showColumnMenu:!1,filterOptions:{useExternalFilter:!0},selectedItems:b.selectedApis,rowHeight:32,selectWithCheckboxOnly:!0,columnDefs:[{field:"id",displayName:"Id",cellTemplate:'<div class="ngCellText"><a href="#/jclouds/api/{{row.getProperty(col.field)}}{{hash}}">{{row.getProperty(col.field)}}</a></div>',width:200,resizable:!1},{field:"name",displayName:"Name",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:350},{field:"type",displayName:"Type",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:100}]},Core.register(e,b,{type:"read",mbean:a.getSelectionJcloudsMBean(d)},onSuccess(f))}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("JClouds.ApiController",["$scope","$filter","workspace","$routeParams",function(b,c,d,e){function f(c){a.populateTypeForApi(c),b.row=c,Core.$apply(b)}function g(){var c=a.getSelectionJcloudsMBean(d),e=d.jolokia;c&&f(e.request({type:"exec",mbean:a.getSelectionJcloudsMBean(d),operation:"findApiById(java.lang.String)",arguments:[b.apiId]}).value)}b.apiId=e.apiId,g()}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.BlobstoreNavigationController",["$scope","$routeParams","workspace",function(a,b,c){a.blobstoreId=b.blobstoreId,a.isActive=function(a){if(angular.isString(a))return c.isLinkActive(a);var b=a.isActive;return b?b(c):c.isLinkActive(a.href())}}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.BlobstoreListController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(c){if(!Object.equal(b.result,c)){b.result=c,b.blobstoreServiceIds=b.result;var e=[];angular.forEach(b.blobstoreServiceIds,function(b){e.push(a.findContextByName(d,b))}),b.blobstoreServices=e,Core.$apply(b)}}b.result={},b.blobstoreServiceIds=[],b.blobstoreServices=[],b.blobstoreTable={plugins:[],data:"blobstoreServices",showFilter:!1,showColumnMenu:!1,filterOptions:{useExternalFilter:!0},selectedItems:b.selectedBlobstoreServices,rowHeight:32,selectWithCheckboxOnly:!0,columnDefs:[{field:"name",displayName:"Service Name",cellTemplate:'<div class="ngCellText"><a href="#/jclouds/blobstore/service/{{row.getProperty(col.field)}}{{hash}}">{{row.getProperty(col.field)}}</a></div>',width:200,resizable:!1},{field:"providerId",displayName:"Proivder",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200,resizable:!1},{field:"identity",displayName:"Identity",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200,resizable:!1}]},f(a.listJcloudsMBeanNameOfType(d,"blobstore"))}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.BlobstoreContainerListController",["$scope","$location","workspace","jolokia","$routeParams",function(b,c,d,e,f){function g(a){Object.equal(b.result,a.value)||(b.result=a.value,b.containers=b.result,Core.$apply(b))}b.blobstoreId=f.blobstoreId,b.result={},b.containers=[],b.selectedContainers=[],b.containerTable={plugins:[],data:"containers",showFilter:!1,showColumnMenu:!1,filterOptions:{useExternalFilter:!0},selectedItems:b.selectedContainers,rowHeight:32,selectWithCheckboxOnly:!0,columnDefs:[{field:"name",displayName:"Name",cellTemplate:'<div class="ngCellText"><a href="#/jclouds/blobstore/container/{{blobstoreId}}/{{row.getProperty(col.field)}}{{hash}}">{{row.getProperty(col.field)}}</a></div>',width:200,resizable:!1},{field:"creationDate",displayName:"Created",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200,resizable:!1}]},Core.register(e,b,{type:"exec",mbean:a.getSelectionJcloudsBlobstoreMBean(d,b.blobstoreId),operation:"list()"},onSuccess(g))}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.BlobstoreContainerController",["$scope","$filter","workspace","$routeParams",function(b,c,d,e){function f(a){b.contents=i(h(a,b.directory),b.directory),Core.$apply(b)}function g(){var c=d.jolokia,e=a.getSelectionJcloudsBlobstoreMBean(d,b.blobstoreId);e&&f(b.directory?c.request({type:"exec",mbean:e,operation:"list(java.lang.String, java.lang.String)",arguments:[b.containerId,b.directory]}).value:c.request({type:"exec",mbean:e,operation:"list(java.lang.String)",arguments:[b.containerId]}).value)}function h(a,b){return a.filter(function(a){return a.name!==b})}function i(a,b){var c=[];return angular.forEach(a,function(a){var d=a;d.fullpath=a.name,d.name.startsWith(b)&&(d.name=d.name.substring(b.length+1)),c.push(d)}),c}function j(a,b,c){var d="#/jclouds/blobstore/container/"+a+"/"+b,e=[{href:d,name:"/"+b}],f=c?c.split("/"):[];return angular.forEach(f,function(a){a.startsWith("/")||d.endsWith("/")||(d+="/"),d+=a,e.push({href:d,name:a})}),e}b.blobstoreId=e.blobstoreId,b.containerId=e.containerId,b.directory=e.directory,b.contents=[],b.breadcrumbs=j(b.blobstoreId,b.containerId,b.directory),b.contentTable={data:"contents",displayFooter:!1,columnDefs:[{field:"name",displayName:"Content",cellTemplate:'<div class="ngCellText"><a href="#/jclouds/blobstore/container/{{blobstoreId}}/{{containerId}}/{{row.entity.fullpath}}{{hash}}">{{row.getProperty(col.field)}}</a></div>',cellFilter:""},{field:"createdDate",displayName:"Created",cellFilter:"date:'EEE, MMM d, y : hh:mm:ss a'"},{field:"lastModifiedDate",displayName:"Modified",cellFilter:"date:'EEE, MMM d, y : hh:mm:ss a'"}]},g(),b.isBlob=function(a){return"BLOB"===a.type}}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.BlobstoreLocationListController",["$scope","$location","workspace","jolokia","$routeParams",function(b,c,d,e,f){function g(a){Object.equal(b.result,a.value)||(b.result=a.value,b.locations=b.result,Core.$apply(b))}b.blobstoreId=f.blobstoreId,b.result={},b.locations=[],b.selectedLocations=[],b.locationTable={plugins:[],data:"locations",showFilter:!1,showColumnMenu:!1,filterOptions:{useExternalFilter:!0},selectedItems:b.selectedLocations,rowHeight:32,selectWithCheckboxOnly:!0,columnDefs:[{field:"id",displayName:"Id",cellTemplate:'<div class="ngCellText"><a href="#/jclouds/blobstore/location/{{blobstoreId}}/{{row.getProperty(col.field)}}{{hash}}">{{row.getProperty(col.field)}}</a></div>',width:200,resizable:!1},{field:"description",displayName:"Description",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200,resizable:!1}]},Core.register(e,b,{type:"exec",mbean:a.getSelectionJcloudsBlobstoreMBean(d,b.blobstoreId),operation:"listAssignableLocations()"},onSuccess(g))}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.BlobstoreLocationController",["$scope","$filter","workspace","$routeParams",function(b,c,d,e){function f(a){b.row=h(a,b.locationId),Core.$apply(b)}function g(){var c=d.jolokia,e=a.getSelectionJcloudsBlobstoreMBean(d,b.blobstoreId);e&&f(c.request({type:"exec",mbean:e,operation:"listAssignableLocations()"}).value)}function h(a,b){return a.find(function(a){return a.id===b})}b.blobstoreId=e.blobstoreId,b.locationId=e.locationId,g()}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.ComputeNavigationController",["$scope","$routeParams","workspace",function(a,b,c){a.computeId=b.computeId,a.isActive=function(a){if(angular.isString(a))return c.isLinkActive(a);var b=a.isActive;return b?b(c):c.isLinkActive(a.href())}}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.ComputeListController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(c){if(!Object.equal(b.result,c)){b.result=c,b.computeServiceIds=b.result;var e=[];angular.forEach(b.computeServiceIds,function(b){e.push(a.findContextByName(d,b))}),b.computeServices=e,Core.$apply(b)}}b.result={},b.computeServiceIds=[],b.computeServices=[],b.computeTable={plugins:[],data:"computeServices",showFilter:!1,showColumnMenu:!1,filterOptions:{useExternalFilter:!0},selectedItems:b.selectedComputeServices,rowHeight:32,selectWithCheckboxOnly:!0,columnDefs:[{field:"name",displayName:"Service Name",cellTemplate:'<div class="ngCellText"><a href="#/jclouds/compute/service/{{row.getProperty(col.field)}}{{hash}}">{{row.getProperty(col.field)}}</a></div>',width:200,resizable:!1},{field:"providerId",displayName:"Proivder",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200,resizable:!1},{field:"identity",displayName:"Identity",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200,resizable:!1}]},f(a.listJcloudsMBeanNameOfType(d,"compute"))}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.HardwareListController",["$scope","$location","workspace","jolokia","$routeParams",function(b,c,d,e,f){function g(a){Object.equal(b.result,a.value)||(b.result=a.value,b.hardwares=b.result,Core.$apply(b))}b.computeId=f.computeId,b.result={},b.hardwares=[],b.selectedHardwares=[],b.hardwareTable={plugins:[],data:"hardwares",showFilter:!1,showColumnMenu:!1,filterOptions:{useExternalFilter:!0},selectedItems:b.selectedHardwares,rowHeight:32,selectWithCheckboxOnly:!0,columnDefs:[{field:"id",displayName:"Id",cellTemplate:'<div class="ngCellText"><a href="#/jclouds/compute/hardware/{{computeId}}/{{row.getProperty(col.field)}}{{hash}}">{{row.getProperty(col.field)}}</a></div>',width:200,resizable:!1},{field:"name",displayName:"Name",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200,resizable:!1},{field:"ram",displayName:"Ram",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200,resizable:!1},{field:"hypervisor",displayName:"Hypervisor",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200,resizable:!1}]},Core.register(e,b,{type:"exec",mbean:a.getSelectionJcloudsComputeMBean(d,b.computeId),operation:"listHardwareProfiles()"},onSuccess(g)),b.is64BitIcon=function(a){return a?"icon-thumbs-up":"icon-thumbs-down"}}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.HardwareController",["$scope","$filter","workspace","$routeParams",function(b,c,d,e){function f(a){b.row=h(a,b.hardwareId),b.processors=b.row.processors,b.volumes=b.row.volumes,Core.$apply(b)}function g(){var c=d.jolokia,e=a.getSelectionJcloudsComputeMBean(d,b.computeId);e&&f(c.request({type:"exec",mbean:e,operation:"listHardwareProfiles()"}).value)}function h(a,b){return a.find(function(a){return a.id===b})}b.computeId=e.computeId,b.hardwareId=e.hardwareId,g(),b.processorsTable={plugins:[],data:"processors",showFilter:!1,displayFooter:!1,displaySelectionCheckbox:!1,showColumnMenu:!1,rowHeight:32,columnDefs:[{field:"cores",displayName:"Cores",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:50,resizable:!1},{field:"speed",displayName:"Speed",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:100,resizable:!1}]},b.volumesTable={plugins:[],data:"volumes",showFilter:!1,displayFooter:!1,displaySelectionCheckbox:!1,showColumnMenu:!1,rowHeight:32,columnDefs:[{field:"id",displayName:"Id",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:100,resizable:!1},{field:"type",displayName:"Type",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:100,resizable:!1},{field:"device",displayName:"Device",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:100,resizable:!1},{field:"size",displayName:"Size",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:100,resizable:!1},{field:"bootDevice",displayName:"Boot Device",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:100,resizable:!1},{field:"durable",displayName:"Durable",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:100,resizable:!1}]}}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.ImageListController",["$scope","$location","workspace","jolokia","$routeParams",function(b,c,d,e,f){function g(a){Object.equal(b.result,a.value)||(b.result=a.value,b.images=b.result,b.operatingSystemFamilies=h(b.images),Core.$apply(b))}function h(a){var b=[];return b.push(""),angular.forEach(a,function(a){var c=a.operatingSystem.family;b.push(c)}),b.unique()}b.computeId=f.computeId,b.result={},b.images=[],b.operatingSystemFamily="",b.operatingSystemFamilies=[];var i=c.search().os;i&&(b.operatingSystemFamily=i),b.selectedImages=[],b.imageTable={data:"images",showFilter:!1,showColumnMenu:!1,filterOptions:{useExternalFilter:!0},selectedItems:b.selectedImages,rowHeight:32,selectWithCheckboxOnly:!0,columnDefs:[{field:"id",displayName:"Id",cellTemplate:'<div class="ngCellText"><a href="#/jclouds/compute/image/{{computeId}}/{{row.getProperty(col.field)}}{{hash}}">{{row.getProperty(col.field)}}</a></div>',width:200,resizable:!1},{field:"name",displayName:"Name",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200,resizable:!1},{field:"operatingSystem.family",displayName:"Operating System",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200},{field:"operatingSystem.is64Bit",displayName:"64 bit",cellTemplate:'<div class="ngCellText pagination-centered"><i class="icon1point5x {{is64BitIcon(row.getProperty(col.field))}}"></i></div>',width:200},{field:"status",displayName:"Status",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:300}]},Core.register(e,b,{type:"exec",mbean:a.getSelectionJcloudsComputeMBean(d,b.computeId),operation:"listImages()"},onSuccess(g)),b.is64BitIcon=function(a){return a?"icon-thumbs-up":"icon-thumbs-down"}}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.ImageController",["$scope","$filter","workspace","$routeParams",function(b,c,d,e){function f(a){b.row=a,Core.$apply(b)}function g(){var c=d.jolokia,e=a.getSelectionJcloudsComputeMBean(d,b.computeId);e&&f(c.request({type:"exec",mbean:e,operation:"getImage(java.lang.String)",arguments:[b.imageId]}).value)}b.computeId=e.computeId,b.imageId=e.imageId,g()}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.ComputeLocationListController",["$scope","$location","workspace","jolokia","$routeParams",function(b,c,d,e,f){function g(a){Object.equal(b.result,a.value)||(b.result=a.value,b.locations=b.result,Core.$apply(b))}b.computeId=f.computeId,b.result={},b.locations=[],b.selectedLocations=[],b.locationTable={plugins:[],data:"locations",showFilter:!1,showColumnMenu:!1,filterOptions:{useExternalFilter:!0},selectedItems:b.selectedLocations,rowHeight:32,selectWithCheckboxOnly:!0,columnDefs:[{field:"id",displayName:"Id",cellTemplate:'<div class="ngCellText"><a href="#/jclouds/compute/location/{{computeId}}/{{row.getProperty(col.field)}}{{hash}}">{{row.getProperty(col.field)}}</a></div>',width:200,resizable:!1},{field:"description",displayName:"Description",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200,resizable:!1}]},Core.register(e,b,{type:"exec",mbean:a.getSelectionJcloudsComputeMBean(d,b.computeId),operation:"listAssignableLocations()"},onSuccess(g))}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.ComputeLocationController",["$scope","$filter","workspace","$routeParams",function(b,c,d,e){function f(a){b.row=h(a,b.locationId),Core.$apply(b)}function g(){var c=d.jolokia,e=a.getSelectionJcloudsComputeMBean(d,b.computeId);e&&f(c.request({type:"exec",mbean:e,operation:"listAssignableLocations()"}).value)}function h(a,b){return a.find(function(a){return a.id===b})}b.computeId=e.computeId,b.locationId=e.locationId,g()}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.NodeListController",["$scope","$location","workspace","jolokia","$routeParams",function(b,c,d,e,f){function g(a){Object.equal(b.result,a.value)||(b.result=a.value,b.nodes=b.result,b.locations=i(b.nodes),b.groups=h(b.nodes),Core.$apply(b))}function h(a){var b=[];return b.push(""),angular.forEach(a,function(a){var c=a.group;b.push(c)}),b.unique()}function i(a){var b=[];return b.push(""),angular.forEach(a,function(a){var c=a.locationId;b.push(c)}),b.unique()}b.computeId=f.computeId,b.result={},b.nodes=[],b.group="",b.groups=[],b.location="",b.locations=[];var j=c.search().group;j&&(b.group=j);var k=c.search().location;k&&(b.location=k),b.selectedNodes=[],b.nodeTable={data:"nodes",showFilter:!1,showColumnMenu:!1,filterOptions:{useExternalFilter:!0},selectedItems:b.selectedNodes,rowHeight:32,selectWithCheckboxOnly:!0,columnDefs:[{field:"id",displayName:"Id",cellTemplate:'<div class="ngCellText"><a href="#/jclouds/compute/node/{{computeId}}/{{row.getProperty(col.field)}}{{hash}}">{{row.getProperty(col.field)}}</a></div>',width:200,resizable:!1},{field:"group",displayName:"Group",cellTemplate:'<div class="ngCellText"><a href="#/jclouds/compute/node/{{row.getProperty(col.field)}}{{hash}}">{{row.getProperty(col.field)}}</a></div>',width:200,resizable:!1},{field:"operatingSystem.family",displayName:"Operating System",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200},{field:"locationId",displayName:"Location",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200},{field:"hostname",displayName:"Host Name",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:300}]},Core.register(e,b,{type:"exec",mbean:a.getSelectionJcloudsComputeMBean(d,b.computeId),operation:"listNodes()"},onSuccess(g)),b.resume=function(){b.selectedNodes.forEach(function(c){a.resumeNode(d,e,b.computeId,c.id,function(){console.log("Resumed!")},function(){console.log("Failed to resume!")})})},b.suspend=function(){b.selectedNodes.forEach(function(c){a.suspendNode(d,e,b.computeId,c.id,function(){console.log("Suspended!")},function(){console.log("Failed to suspend!")})})},b.reboot=function(){b.selectedNodes.forEach(function(c){a.rebootNode(d,e,b.computeId,c.id,function(){console.log("Rebooted!")},function(){console.log("Failed to reboot!")})})},b.destroy=function(){b.selectedNodes.forEach(function(c){a.destroyNode(d,e,b.computeId,c.id,function(){console.log("Destroyed!")},function(){console.log("Failed to destroy!")})})}}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.NodeController",["$scope","$filter","workspace","$routeParams",function(b,c,d,e){function f(a){b.row=a,Core.$apply(b)}function g(){var c=a.getSelectionJcloudsComputeMBean(d,b.computeId),e=d.jolokia;c&&f(e.request({type:"exec",mbean:c,operation:"getNode(java.lang.String)",arguments:[b.nodeId]}).value)}b.computeId=e.computeId,b.nodeId=e.nodeId,g(),b.resume=function(){a.resumeNode(d,d.jolokia,b.computeId,b.nodeId,function(){console.log("Resumed!")},function(){console.log("Failed to resume!")})},b.suspend=function(){a.suspendNode(d,d.jolokia,b.computeId,b.nodeId,function(){console.log("Suspended!")},function(){console.log("Failed to suspend!")})},b.reboot=function(){a.rebootNode(d,d.jolokia,b.computeId,b.nodeId,function(){console.log("Rebooted!")},function(){console.log("Failed to reboot!")})},b.destroy=function(){a.destroyNode(d,d.jolokia,b.computeId,b.nodeId,function(){console.log("Destroyed!")},function(){console.log("Failed to destroy!")})}}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.ProviderListController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(c){Object.equal(b.result,c.value)||(b.result=c.value,b.providers=b.result.Providers,a.populateTypeForProviders(b.providers),Core.$apply(b))}b.result={},b.providers=[],b.type="",b.types=["","blobstore","compute","loadbalancer"];var g=c.search().type;g&&(b.type=g),b.selectedProviders=[],b.providerTable={data:"providers",showFilter:!1,showColumnMenu:!1,filterOptions:{useExternalFilter:!0},selectedItems:b.selectedProviders,rowHeight:32,selectWithCheckboxOnly:!0,columnDefs:[{field:"id",displayName:"Id",cellTemplate:'<div class="ngCellText"><a href="#/jclouds/provider/{{row.getProperty(col.field)}}{{hash}}">{{row.getProperty(col.field)}}</a></div>',width:200,resizable:!1},{field:"name",displayName:"Name",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:350},{field:"type",displayName:"Type",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:100}]},Core.register(e,b,{type:"read",mbean:a.getSelectionJcloudsMBean(d)},onSuccess(f))}])}(Jclouds||(Jclouds={}));var Jclouds;!function(a){a._module.controller("Jclouds.ProviderController",["$scope","$filter","workspace","$routeParams",function(b,c,d,e){function f(c){a.populateTypeForProvider(c),b.row=c,Core.$apply(b)}function g(){var c=a.getSelectionJcloudsMBean(d),e=d.jolokia;c&&f(e.request({type:"exec",mbean:a.getSelectionJcloudsMBean(d),operation:"findProviderById(java.lang.String)",arguments:[b.providerId]}).value)}b.providerId=e.providerId,g()}])}(Jclouds||(Jclouds={}));var Jetty;!function(a){function b(a){if(a)switch(a.toString().toLowerCase()){case"started":case"true":return"green icon-play-circle"}return"orange icon-off"}function c(a,b){var c=(a.state||"").toLowerCase();return angular.isArray(b)?b.any(function(a){return c.startsWith(a)}):c.startsWith(b)}a.iconClass=b,a.isState=c}(Jetty||(Jetty={}));var Jetty;!function(a){var b="jetty";a._module=angular.module(b,["bootstrap","ngResource","ui.bootstrap.dialog","hawtioCore"]),a._module.config(["$routeProvider",function(a){a.when("/jetty/server",{templateUrl:"app/jetty/html/server.html"}).when("/jetty/applications",{templateUrl:"app/jetty/html/applications.html"}).when("/jetty/connectors",{templateUrl:"app/jetty/html/connectors.html"}).when("/jetty/threadpools",{templateUrl:"app/jetty/html/threadpools.html"})}]),a._module.filter("jettyIconClass",function(){return a.iconClass}),a._module.run(["$location","workspace","viewRegistry","helpRegistry",function(a,b,c,d){c.jetty="app/jetty/html/layoutJettyTabs.html",d.addUserDoc("jetty","app/jetty/doc/help.md",function(){return b.treeContainsDomainAndProperties("org.eclipse.jetty.server")}),b.topLevelTabs.push({id:"jetty",content:"Jetty",title:"Manage your Jetty container",isValid:function(a){return a.treeContainsDomainAndProperties("org.eclipse.jetty.server")},href:function(){return"#/jetty/applications"},isActive:function(a){return a.isTopTabActive("jetty")}})}]),hawtioPluginLoader.addModule(b)}(Jetty||(Jetty={}));var Jetty;!function(a){a._module.controller("Jetty.ConnectorsController",["$scope","$location","workspace","jolokia",function(a,b,c,d){function e(b){function c(b){var c=b.value;if(c){if(c.mbean=b.request.mbean,c.protocols="[http]",c.default="http",c.port=c.port,c.running=void 0===c.running||c.running,a.connectors.push(c),c.confidentialPort){var d={protocols:"[https]",default:"https",port:c.confidentialPort,running:c.running,mbean:c.mbean};a.connectors.push(d)}Core.$apply(a)}}a.connectors=[],a.selected.length=0,angular.forEach(b,function(a,b){var e=a;d.request({type:"read",mbean:e,attribute:[]},onSuccess(c))}),Core.$apply(a)}function f(b){function c(b){var c=b.value;c&&(c.mbean=b.request.mbean,c.protocols=c.protocols,c.default=c.defaultProtocol,c.port=c.port,c.running="STARTED"==c.state,a.connectors.push(c),Core.$apply(a))}a.connectors=[],a.selected.length=0,angular.forEach(b,function(a,b){var e=a;d.request({type:"read",mbean:e,attribute:[]},onSuccess(c))}),Core.$apply(a)}function g(){setTimeout(h,50)}function h(){console.log("Loading Jetty connector data...");c.tree;d.search("org.eclipse.jetty.server.nio:type=selectchannelconnector,*",onSuccess(e)),d.search("org.eclipse.jetty.server:type=serverconnector,*",onSuccess(f))}function i(){var a=d.search("org.eclipse.jetty.server.nio:type=selectchannelconnector,*");return a&&a.length>=1?a[0]:(a=d.search("org.eclipse.jetty.server:type=serverconnector,*"),a&&a.length>=1?a[0]:null)}
var j='<div class="ngCellText pagination-centered" title="{{row.getProperty(col.field)}}"><i class="{{row.getProperty(col.field) | jettyIconClass}}"></i></div>';a.connectors=[],a.selected=[],a.sampleConnector=i();var k=[{field:"running",displayName:"State",cellTemplate:j,width:56,minWidth:56,maxWidth:56,resizable:!1},{field:"port",displayName:"Port",cellFilter:null,width:"*",resizable:!0},{field:"protocols",displayName:"Protocols",cellFilter:null,width:"*",resizable:!0},{field:"default",displayName:"Default",cellFilter:null,width:"*",resizable:!0}];a.gridOptions={data:"connectors",displayFooter:!0,selectedItems:a.selected,columnDefs:k,filterOptions:{filterText:""},title:"Connectors"},a.controlConnectors=function(b){var c=a.selected.map(function(a){return a.mbean});angular.isArray(c)||(c=[c]);var e=(c.length||1)-1;angular.forEach(c,function(c,f){var g=f>=e?a.onLastResponse:a.onResponse;d.request({type:"exec",mbean:c,operation:b,arguments:null},onSuccess(g,{error:g}))})},a.stop=function(){a.controlConnectors("stop")},a.start=function(){a.controlConnectors("start")},a.anySelectionIsRunning=function(){var b=a.selected||[];return b.length&&b.any(function(a){return a.running})},a.everySelectionIsRunning=function(b){var c=a.selected||[];return c.length&&c.every(function(a){return a.running})},a.onLastResponse=function(b){a.onResponse(b),h()},a.onResponse=function(a){},a.$on("jmxTreeUpdated",g),a.$watch("workspace.tree",g)}])}(Jetty||(Jetty={}));var Jetty;!function(a){a._module.controller("Jetty.JettyController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(){setTimeout(g,50)}function g(){console.log("Loading Jetty webapp data...");var a=e.search("org.eclipse.jetty.server.nio:type=selectchannelconnector,*");if(a||(a=e.search("org.eclipse.jetty.server:type=serverconnector,*")),a){var c=!1;angular.forEach(a,function(a,d){var f=a;if(!c){var g=e.request({type:"read",mbean:f,attribute:["port","protocols"]});g&&g.value&&g.value.protocols&&g.value.protocols.toString().toLowerCase().startsWith("http")&&(c=!0,b.httpPort=g.value.port,b.httpScheme="http")}})}angular.forEach(l,function(a){e.search(a,onSuccess(i))})}function h(){for(var a=0;a<l.length;a++){var b=e.search(l[a]);if(b&&b.length>=1)return b[0]}return null}function i(a){function d(a){var d=a.value;if(d){d.mbean=a.request.mbean,d.state||(d.state=void 0===d.running||d.running?"started":"stopped");var e=Core.extractTargetUrl(c,b.httpScheme,b.httpPort);d.url=e+d.contextPath;var f=d.mbean;if(f){var g=b.mbeanIndex[f];angular.isDefined(g)?b.webapps[f]=d:(b.mbeanIndex[f]=b.webapps.length,b.webapps.push(d)),Core.$apply(b)}}}b.webapps=[],b.mbeanIndex={},b.selected.length=0,angular.forEach(a,function(a,b){var c=a;e.request({type:"read",mbean:c,attribute:[]},onSuccess(d))}),Core.$apply(b)}var j='<div class="ngCellText pagination-centered" title="{{row.getProperty(col.field)}}"><i class="{{row.getProperty(col.field) | jettyIconClass}}"></i></div>',k='<div class="ngCellText" title="{{row.getProperty(col.field)}}"><a ng-href="{{row.getProperty(col.field)}}" target="_blank">{{row.getProperty(col.field)}}</a></div>',l=["org.mortbay.jetty.plugin:type=jettywebappcontext,*","org.eclipse.jetty.webapp:type=webappcontext,*","org.eclipse.jetty.servlet:type=servletcontexthandler,*","org.ops4j.pax.web.service.jetty.internal:type=httpservicecontext,*"];b.uninstallDialog=new UI.Dialog,b.uninstall=function(){b.controlWebApps("destroy"),b.uninstallDialog.close()},b.httpPort,b.httpScheme="http",b.webapps=[],b.selected=[],b.sampleWebApp=h();var m=[{field:"state",displayName:"State",cellTemplate:j,width:56,minWidth:56,maxWidth:56,resizable:!1},{field:"displayName",displayName:"Name",cellFilter:null,width:"*",resizable:!0},{field:"contextPath",displayName:"Context-Path",cellFilter:null,width:"*",resizable:!0},{field:"url",displayName:"Url",cellTemplate:k,cellFilter:null,width:"*",resizable:!0}];b.gridOptions={data:"webapps",displayFooter:!0,selectedItems:b.selected,columnDefs:m,filterOptions:{filterText:""},title:"Web applications"},b.controlWebApps=function(a){var c=b.selected.map(function(a){return a.mbean});angular.isArray(c)||(c=[c]);var d=(c.length||1)-1;angular.forEach(c,function(c,f){var g=f>=d?b.onLastResponse:b.onResponse;e.request({type:"exec",mbean:c,operation:a,arguments:null},onSuccess(g,{error:g}))})},b.stop=function(){b.controlWebApps("stop")},b.start=function(){b.controlWebApps("start")},b.anySelectionHasState=function(c){var d=b.selected||[];return d.length&&d.any(function(b){return a.isState(b,c)})},b.everySelectionHasState=function(c){var d=b.selected||[];return d.length&&d.every(function(b){return a.isState(b,c)})},b.onLastResponse=function(a){b.onResponse(a),g()},b.onResponse=function(a){},b.$on("jmxTreeUpdated",f),b.$watch("workspace.tree",f),b.jettyServerVersion="",b.jettyServerStartupTime="";var n=e.search("org.eclipse.jetty.server:type=server,*");if(n&&1===n.length)b.jettyServerVersion=e.getAttribute(n[0],"version"),b.jettyServerStartupTime=e.getAttribute(n[0],"startupTime");else{var o=e.search("org.ops4j.pax.web.service.jetty.internal:type=jettyserverwrapper,*");o&&1===o.length?(b.jettyServerVersion=e.getAttribute(o[0],"version"),b.jettyServerStartupTime=e.getAttribute(o[0],"startupTime")):console.log("Cannot find jetty server or there was more than one server. response is: "+n.concat(o))}}])}(Jetty||(Jetty={}));var Jetty;!function(a){a._module.controller("Jetty.ThreadPoolsController",["$scope","$location","workspace","jolokia",function(a,b,c,d){function e(){setTimeout(f,50)}function f(){console.log("Loading Jetty thread pool data...");c.tree;d.request({type:"read",mbean:"org.eclipse.jetty.util.thread:type=queuedthreadpool,*"},onSuccess(function(b){a.threadpools.length=0,a.threadpools=[],angular.forEach(b.value,function(b,c){b&&(b.running=void 0!==b.running?b.running:"STARTED"==b.state,b.idleTimeout=void 0!==b.idleTimeout?b.idleTimeout:b.maxIdleTimeMs,a.threadpools.push(b))}),Core.$apply(a)}))}var g='<div class="ngCellText pagination-centered" title="{{row.getProperty(col.field)}}"><i class="{{row.getProperty(col.field) | jettyIconClass}}"></i></div>';a.threadpools=[];var h=[{field:"running",displayName:"State",cellTemplate:g,width:56,minWidth:56,maxWidth:56,resizable:!1},{field:"threads",displayName:"Threads",cellFilter:null,width:"*",resizable:!0},{field:"minThreads",displayName:"Min Threads",cellFilter:null,width:"*",resizable:!0},{field:"maxThreads",displayName:"Max Threads",cellFilter:null,width:"*",resizable:!0},{field:"idleThreads",displayName:"Idle Threads",cellFilter:null,width:"*",resizable:!0},{field:"idleTimeout",displayName:"Idle Timeout (ms)",cellFilter:null,width:"*",resizable:!0},{field:"name",displayName:"Name",cellFilter:null,width:"*",resizable:!0}];a.gridOptions={data:"threadpools",displayFooter:!0,canSelectRows:!1,columnDefs:h,title:"Thread Pools"},a.$on("jmxTreeUpdated",e),a.$watch("workspace.tree",e)}])}(Jetty||(Jetty={}));var Jmx;!function(a){function b(a,b){var c="#"+a.route,d=angular.toJson(b),e=b.title,f=angular.toJson({size_x:a.size_x,size_y:a.size_y});return"/dashboard/add?tab=dashboard&href="+encodeURIComponent(c)+"&size="+encodeURIComponent(f)+"&title="+encodeURIComponent(e)+"&routeParams="+encodeURIComponent(d)}function c(b){return a.jmxWidgetTypes.find(function(a){return a.type===b.type})}a.createDashboardLink=b,a.getWidgetType=c,a.jmxWidgetTypes=[{type:"donut",icon:"icon-smile",route:"/jmx/widget/donut",size_x:2,size_y:2,title:"Add Donut chart to Dashboard"},{type:"area",icon:"icon-bar-chart",route:"/jmx/widget/area",size_x:4,size_y:2,title:"Add Area chart to Dashboard"}],a.jmxWidgets=[{type:"donut",title:"Java Heap Memory",mbean:"java.lang:type=Memory",attribute:"HeapMemoryUsage",total:"Max",terms:"Used",remaining:"Free"},{type:"donut",title:"Java Non Heap Memory",mbean:"java.lang:type=Memory",attribute:"NonHeapMemoryUsage",total:"Max",terms:"Used",remaining:"Free"},{type:"donut",title:"File Descriptor Usage",mbean:"java.lang:type=OperatingSystem",total:"MaxFileDescriptorCount",terms:"OpenFileDescriptorCount",remaining:"Free"},{type:"donut",title:"Loaded Classes",mbean:"java.lang:type=ClassLoading",total:"TotalLoadedClassCount",terms:"LoadedClassCount,UnloadedClassCount",remaining:"-"},{type:"donut",title:"Swap Size",mbean:"java.lang:type=OperatingSystem",total:"TotalSwapSpaceSize",terms:"FreeSwapSpaceSize",remaining:"Used Swap"},{type:"area",title:"Process CPU Time",mbean:"java.lang:type=OperatingSystem",attribute:"ProcessCpuTime"},{type:"area",title:"Process CPU Load",mbean:"java.lang:type=OperatingSystem",attribute:"ProcessCpuLoad"},{type:"area",title:"System CPU Load",mbean:"java.lang:type=OperatingSystem",attribute:"SystemCpuLoad"},{type:"area",title:"System CPU Time",mbean:"java.lang:type=OperatingSystem",attribute:"SystemCpuTime"}]}(Jmx||(Jmx={}));var Jmx;!function(a){var b="jmx";a.currentProcessId="",a._module=angular.module(b,["bootstrap","dangle","ui.bootstrap","ui.bootstrap.modal"]),a._module.config(["$routeProvider",function(a){a.when("/jmx/attributes",{templateUrl:"app/jmx/html/attributes.html"}).when("/jmx/operations",{templateUrl:"app/jmx/html/operations.html"}).when("/jmx/charts",{templateUrl:"app/jmx/html/charts.html"}).when("/jmx/chartEdit",{templateUrl:"app/jmx/html/chartEdit.html"}).when("/jmx/help/:tabName",{templateUrl:"app/core/html/help.html"}).when("/jmx/widget/donut",{templateUrl:"app/jmx/html/donutChart.html"}).when("/jmx/widget/area",{templateUrl:"app/jmx/html/areaChart.html"})}]),a._module.factory("jmxWidgetTypes",function(){return a.jmxWidgetTypes}),a._module.factory("jmxWidgets",function(){return a.jmxWidgets}),a._module.run(["$location","workspace","viewRegistry","layoutTree","jolokia","pageTitle","helpRegistry",function(b,c,d,e,f,g,h){d.jmx=e,h.addUserDoc("jmx","app/jmx/doc/help.md"),g.addTitleElement(function(){if(""===a.currentProcessId){try{a.currentProcessId=f.getAttribute("java.lang:type=Runtime","Name")}catch(a){}a.currentProcessId&&a.currentProcessId.has("@")&&(a.currentProcessId="pid:"+a.currentProcessId.split("@")[0])}return a.currentProcessId}),c.topLevelTabs.push({id:"jmx",content:"JMX",title:"View the JMX MBeans in this process",isValid:function(a){return a.hasMBeans()},href:function(){return"#/jmx/attributes"},isActive:function(a){return a.isTopTabActive("jmx")}}),c.subLevelTabs.add({content:'<i class="icon-list"></i> Attributes',title:"View the attribute values on your selection",isValid:function(a){return!0},href:function(){return"#/jmx/attributes"},index:-1},0),c.subLevelTabs.push({content:'<i class="icon-leaf"></i> Operations',title:"Execute operations on your selection",isValid:function(a){return!0},href:function(){return"#/jmx/operations"}}),c.subLevelTabs.push({content:'<i class="icon-bar-chart"></i> Chart',title:"View a chart of the metrics on your selection",isValid:function(a){return!0},href:function(){return"#/jmx/charts"}}),c.subLevelTabs.push({content:'<i class="icon-cog"></i> Edit Chart',title:"Edit the chart configuration",isValid:function(a){return a.isLinkActive("jmx/chart")},href:function(){return"#/jmx/chartEdit"}})}]),hawtioPluginLoader.addModule(b)}(Jmx||(Jmx={}));var Jmx;!function(a){a.AreaChartController=a._module.controller("Jmx.AreaChartController",["$scope","$routeParams","jolokia","$templateCache","localStorage",function(a,b,c,d,e){a.mbean=b.mbean,a.attribute=b.attribute,a.duration=e.updateRate,a.width=308,a.height=296,a.template="",a.entries=[],a.data={entries:a.entries},a.req=[{type:"read",mbean:a.mbean,attribute:a.attribute}],a.render=function(b){a.entries.push({time:b.timestamp,count:b.value}),a.entries=a.entries.last(15),""===a.template&&(a.template=d.get("areaChart")),a.data={_type:"date_histogram",entries:a.entries},Core.$apply(a)},Core.register(c,a,a.req,onSuccess(a.render))}])}(Jmx||(Jmx={}));var Jmx;!function(a){a.propertiesColumnDefs=[{field:"name",displayName:"Property",width:"27%",cellTemplate:'<div class="ngCellText" title="{{row.entity.attrDesc}}" data-placement="bottom"><div ng-show="!inDashboard" class="inline" compile="row.entity.getDashboardWidgets()"></div><a href="" ng-click="row.entity.onViewAttribute()">{{row.entity.name}}</a></div>'},{field:"value",displayName:"Value",width:"70%",cellTemplate:'<div class="ngCellText mouse-pointer" ng-click="row.entity.onViewAttribute()" title="{{row.entity.tooltip}}" ng-bind-html-unsafe="row.entity.summary"></div>'}],a.foldersColumnDefs=[{displayName:"Name",cellTemplate:'<div class="ngCellText"><a href="{{row.entity.folderHref(row)}}"><i class="{{row.entity.folderIconClass(row)}}"></i> {{row.getProperty("title")}}</a></div>'}],a.AttributesController=a._module.controller("Jmx.AttributesController",["$scope","$element","$location","workspace","jolokia","jmxWidgets","jmxWidgetTypes","$templateCache","localStorage","$browser",function(b,c,d,e,f,g,h,i,j,k){function l(){m()}function m(){Core.unregister(f,b),b.gridData=[],b.mbeanIndex=null;var c=e.getSelectedMBeanName(),g=null,h=e.selection;if(null===h||angular.isUndefined(h)||h.key!==b.lastKey){if(b.attributesInfoCache=null,null==c){var i=d.search().nid,k=e.keyToNodeMap[i];k&&(c=k.objectName)}if(c){var l=function(a){return{type:"LIST",method:"post",path:escapeMBeanPath(a),ignoreErrors:!0}},m=l(c);f.request(m,onSuccess(function(d){b.attributesInfoCache=d.value,a.log.debug("Updated attributes info cache for mbean "+c)}))}}if(c)g={type:"read",mbean:c},(null===h||angular.isUndefined(h)||h.key!==b.lastKey)&&(b.gridOptions.columnDefs=a.propertiesColumnDefs,b.gridOptions.enableRowClickSelection=!1);else if(h){h.key!==b.lastKey&&(b.gridOptions.columnDefs=[],b.gridOptions.enableRowClickSelection=!0);var o=h.children;if(o){var q=o.map(function(a){return a.objectName}),r=q.filter(function(a){return FilterHelpers.search(a,b.gridOptions.filterOptions.filterText)}),s=j.jmxMaxFolderSize;if(r=r.slice(0,s)){var t=a.getUniqueTypeNames(o);if(t.length<=1){var u=r.map(function(a){return{type:"READ",mbean:a,ignoreErrors:!0}});u.length>0&&(g=u,b.mbeanIndex={},b.mbeanRowCounter=0,b.mbeanCount=r.length)}else console.log("Too many type names "+t)}}}var v=onSuccess(n);g?(b.request=g,Core.register(f,b,g,v)):h&&(h.key!==b.lastKey&&(b.gridOptions.columnDefs=a.foldersColumnDefs,b.gridOptions.enableRowClickSelection=!0),b.gridData=h.children,p(b.gridData)),h&&(b.lastKey=h.key),Core.$apply(b)}function n(c){var d=c.value,f=b.mbeanIndex,g=c.request.mbean;if(g&&(d._id=g),f)if(g){var h=f[g];if(angular.isDefined(h)||(h=b.mbeanRowCounter,f[g]=h,b.mbeanRowCounter+=1),0===h&&(b.selectedIndices=b.selectedItems.map(function(a){return b.gridData.indexOf(a)}),b.gridData=[],!b.gridOptions.columnDefs.length)){var i=e.selectionConfigKey();b.gridOptions.gridKey=i,b.gridOptions.onClickRowHandlers=e.onClickRowHandlers;var j=e.attributeColumnDefs[i]||[],k=j.length,l={};angular.forEach(j,function(a,b){var c=a.field;c&&(l[c]=a)});var m=[];angular.forEach(d,function(a,b){t(b,a)&&(l[b]||m.push({field:b,displayName:"_id"===b?"Object name":Core.humanizeValue(b),visible:0===k}))}),m=m.sort(function(a,b){return a.field.startsWith("_")?1:b.field.startsWith("_")?-1:a.field.localeCompare(b.field)}),m.forEach(function(a){j.push(a)}),b.gridOptions.columnDefs=j,b.gridOptions.enableRowClickSelection=!0}angular.forEach(d,function(a,b){t(b,a)&&(d[b]=o(a))}),b.gridData[h]=d,p(b.gridData);var n=b.mbeanCount;if(!n||h+1>=n){var u=b.selectedIndices.map(function(a){return b.gridData[a]}).filter(function(a){return a});b.selectedItems.splice(0,b.selectedItems.length),b.selectedItems.push.apply(b.selectedItems,u),Core.$apply(b)}}else console.log("No mbean name in request "+JSON.stringify(c.request));else{b.gridOptions.columnDefs=a.propertiesColumnDefs,b.gridOptions.enableRowClickSelection=!1;if(angular.isObject(d)){var v=Array();if(angular.forEach(d,function(a,b){if((!0||t(b,a))&&!b.startsWith("_")){"ObjectName"===b&&(a=q(a)),angular.isArray(a)&&(a=a.map(function(a){return q(a)}));var c=s(b),d={key:b,name:Core.humanizeValue(b),value:o(safeNullAsString(a,c))};r(b,d),v.push(d)}}),!v.any(function(a){return"ObjectName"===a.key})){var w={key:"ObjectName",name:"Object Name",value:g};r(w.key,w),v.push(w)}v=v.sortBy("name"),b.selectedItems=[d],d=v}b.gridData=d,p(b.gridData),Core.$apply(b)}}function o(a){if("string"!=typeof a)return a;var b=/^ERROR: Reading attribute .+ \(class java\.lang\.SecurityException\)$/,c=/^ERROR: java\.lang\.UnsupportedOperationException: .+ \(class javax\.management\.RuntimeMBeanException\)$/;return a.match(b)?"**********":a.match(c)?"(Not supported)":a}function p(a){a.forEach(function(a){a.inDashboard=b.inDashboard,a.getDashboardWidgets=function(){return b.getDashboardWidgets(a)},a.onViewAttribute=function(){b.onViewAttribute(a)},a.folderIconClass=function(a){return b.folderIconClass(a)},a.folderHref=function(a){return b.folderHref(a)}})}function q(a){if(!angular.isObject(a))return a;var b=Object.keys(a);return 1===b.length&&"objectName"===b[0]?a.objectName:a}function r(a,c){var d=Core.escapeHtml(c.value);if(!angular.isArray(d)&&angular.isObject(d)){var e="<table class='table table-striped'>",f="",g=d,h=Object.keys(d).sort();angular.forEach(h,function(a){var b=g[a];e+="<tr><td>"+Core.humanizeValue(a)+"</td><td>"+b+"</td></tr>",f+=Core.humanizeValue(a)+": "+b+"  "}),e+="</table>",c.summary=f,c.detailHtml=e,c.tooltip=f}else{var i=d;if(""===i?(i="&nbsp;",c.tooltip=""):c.tooltip=i,c.summary=""+i,c.detailHtml="<pre>"+i+"</pre>",angular.isArray(d)){var j="<ul>";angular.forEach(d,function(a){j+="<li>"+a+"</li>"}),j+="</ul>",c.detailHtml=j}}if(c.rw=!1,c.attrDesc=c.name,c.type="string",null!=b.attributesInfoCache&&"attr"in b.attributesInfoCache){var k=b.attributesInfoCache.attr[a];angular.isDefined(k)&&(c.rw=k.rw,c.attrDesc=k.desc,c.type=k.type)}}function s(a){if(null!=b.attributesInfoCache&&"attr"in b.attributesInfoCache){var c=b.attributesInfoCache.attr[a];if(angular.isDefined(c))return c.type}return null}function t(a,b){return!angular.isObject(b)}function u(a,b){if(a){var c=a.toLowerCase();if(c.startsWith("int")||"long"===c||"short"===c||"byte"===c||c.endsWith("int"))return"integer";if("double"===c||"float"===c||"bigdecimal"===c)return"number";if("boolean"===c||"java.lang.boolean"===c)return"boolean";if("string"===c||"java.lang.String"===c)return"string"}return"string"}b.searchText="",b.nid="empty",b.selectedItems=[],b.lastKey=null,b.attributesInfoCache={},b.entity={},b.attributeSchema={},b.gridData=[],b.attributes="",b.$watch("gridData.length",function(a,c){a!==c&&(b.attributes=a>0?i.get("gridTemplate"):"")});var v={properties:{key:{tooltip:"Attribute key",type:"string",readOnly:"true"},description:{description:"Description",tooltip:"Attribute description",type:"string",formTemplate:"<textarea class='input-xlarge' rows='2' readonly='true'></textarea>"},type:{tooltip:"Attribute type",type:"string",readOnly:"true"},jolokia:{tooltip:"Jolokia REST URL",type:"string",readOnly:"true"}}};b.gridOptions={scope:b,selectedItems:[],showFilter:!1,canSelectRows:!1,enableRowSelection:!1,enableRowClickSelection:!1,keepLastSelected:!1,multiSelect:!0,showColumnMenu:!0,displaySelectionCheckbox:!1,filterOptions:{filterText:""},data:"gridData",columnDefs:a.propertiesColumnDefs},b.$watch(function(a){return a.gridOptions.selectedItems.map(function(a){return a.key||a})},function(c,d){c!==d&&(a.log.debug("Selected items: ",c),b.selectedItems=c)},!0),b.$on("$routeChangeSuccess",function(c,f,g){d.url().endsWith("/jmx/attributes")&&(a.log.debug("Reset selection in JMX plugin"),e.selection=null,b.lastKey=null),b.nid=d.search().nid,a.log.debug("nid: ",b.nid),w=setTimeout(m,50)}),b.$on("jmxTreeUpdated",function(){Core.unregister(f,b),w&&clearTimeout(w),w=setTimeout(m,500)});var w=null;b.$watch("gridOptions.filterOptions.filterText",function(a,c){Core.unregister(f,b),w&&clearTimeout(w),w=setTimeout(m,500)}),b.$watch("workspace.selection",function(){if(e.moveIfViewInvalid())return void Core.unregister(f,b);w&&clearTimeout(w),w=setTimeout(function(){b.gridData=[],Core.$apply(b),setTimeout(m,10)},10)}),b.hasWidget=function(a){return!0},b.onCancelAttribute=function(){b.entity={}},b.onUpdateAttribute=function(){var a=b.entity.attrValueEdit,c=b.entity.key;b.entity={};var d=e.getSelectedMBeanName();d&&f.setAttribute(d,c,a,onSuccess(function(a){Core.notification("success","Updated attribute "+c)}))},b.onViewAttribute=function(a){if(a.summary){b.entity={},b.entity.key=a.key,b.entity.description=a.attrDesc,b.entity.type=a.type;var c=escapeMBean(e.getSelectedMBeanName()),f=d.protocol()+"://"+d.host()+":"+d.port()+k.baseHref();b.entity.jolokia=f+j.url+"/read/"+c+"/"+b.entity.key,b.entity.rw=a.rw;var g=(u(a.type,a.key),!a.rw),h=a.summary.length,i=h/40+1;if(i>10&&(i=10),g){"&nbsp;"===a.summary?b.entity.attrValueView="":b.entity.attrValueView=a.summary,b.attributeSchemaView={};for(var l in v)b.attributeSchemaView[l]=v[l];b.attributeSchemaView.properties.attrValueView={description:"Value",label:"Value",tooltip:"Attribute value",type:"string",formTemplate:"<textarea class='input-xlarge' rows='"+i+"' readonly='true'></textarea>"},b.attributeSchemaView&&delete b.attributeSchemaView.properties.attrValueEdit}else{"&nbsp;"===a.summary?b.entity.attrValueEdit="":b.entity.attrValueEdit=a.summary,b.attributeSchemaEdit={};for(var l in v)b.attributeSchemaEdit[l]=v[l];b.attributeSchemaEdit.properties.attrValueEdit={description:"Value",label:"Value",tooltip:"Attribute value",type:"string",formTemplate:"<textarea class='input-xlarge' rows='"+i+"'></textarea>"},b.attributeSchemaEdit&&delete b.attributeSchemaEdit.properties.attrValueView}b.showAttributeDialog=!0}},b.getDashboardWidgets=function(c){var d=e.getSelectedMBeanName();if(!d)return"";var f=g.filter(function(a){return d===a.mbean});if(f.isEmpty())return"";if(f=f.filter(function(a){return a.attribute===c.key||a.total===c.key}),f.isEmpty())return"";c.addChartToDashboard=function(a){b.addChartToDashboard(c,a)};var h=[];return f.forEach(function(b){var c=a.getWidgetType(b);h.push('<i class="'+c.icon+' clickable" title="'+c.title+'" ng-click="row.entity.addChartToDashboard(\''+c.type+"')\"></i>")}),h.join()+"&nbsp;"},b.addChartToDashboard=function(b,c){var f=e.getSelectedMBeanName(),h=g.filter(function(a){return f===a.mbean});h=h.filter(function(a){return a.attribute===b.key||a.total===b.key}),h=h.filter(function(a){return a.type===c});var i=h.first(),j=a.getWidgetType(i);d.url(a.createDashboardLink(j,i))},b.toolBarTemplate=function(){return a.getAttributeToolBar(e.selection)},b.invokeSelectedMBeans=function(a,c){void 0===c&&(c=null);var d=[];if(angular.forEach(b.selectedItems||[],function(b){var c=b._id;if(c){var e=a;angular.isFunction(a)&&(e=a(b)),d.push({type:"exec",operation:e,mbean:c})}}),d.length){var e=function(){c?c():l()};f.request(d,onSuccess(e,{error:e}))}},b.folderHref=function(a){if(!a.getProperty)return"";var b=a.getProperty("key");return b?Core.createHref(d,"#"+d.path()+"?nid="+b,["nid"]):""},b.folderIconClass=function(a){return a.getProperty?a.getProperty("objectName")?"icon-cog":"icon-folder-close":""}}])}(Jmx||(Jmx={}));var Jmx;!function(a){a._module.controller("Jmx.ChartEditController",["$scope","$location","workspace","jolokia",function(a,b,c,d){function e(){var e=c.selection;if(angular.isDefined(e)&&null!==e){a.selectedAttributes=[],a.selectedMBeans=[],a.metrics={},a.mbeans={};var f=0,g=0,h=e.children;h&&h.length&&!e.objectName||(h=[e]),h&&h.forEach(function(c){var e=c.objectName,h=c.title;if(h&&e){f++,a.mbeans[h]=h;var i=function(a){return{type:"list",path:escapeMBeanPath(a),ignoreErrors:!0}},j=i(e);d.request(j,onSuccess(function(c){var d=c.value.attr;if(d){for(var e in d){var h=d[e];if(h){isNumberTypeName(h.type)&&(a.metrics[e]||(a.metrics[e]=e))}}if(++g>=f){var i=b.search(),j=toSearchArgumentArray(i.att),k=toSearchArgumentArray(i.el);if(j&&j.length&&j.forEach(function(b){a.metrics[b]&&a.selectedAttributes.none(function(a){return a===b})&&a.selectedAttributes.push(b)}),k&&k.length&&k.forEach(function(b){a.mbeans[b]&&a.selectedMBeans.none(function(a){return a===b})&&a.selectedMBeans.push(b)}),a.selectedMBeans.length<1&&(a.selectedMBeans=Object.keys(a.mbeans)),a.selectedAttributes.length<1){var l=Object.keys(a.metrics).sort();a.selectedMBeans.length>1?a.selectedAttributes=[l.first()]:a.selectedAttributes=l}$("#attributes").attr("size",Object.size(a.metrics)),$("#mbeans").attr("size",Object.size(a.mbeans)),Core.$apply(a)}}Core.$apply(a)},{method:"post"}))}})}}a.selectedAttributes=[],a.selectedMBeans=[],a.metrics={},a.mbeans={},a.size=function(a){return angular.isObject(a)?Object.size(a):angular.isArray(a)?a.length:1},a.canViewChart=function(){return a.selectedAttributes.length&&a.selectedMBeans.length&&a.size(a.mbeans)>0&&a.size(a.metrics)>0},a.canEditChart=function(){return c.selection&&c.selection.isFolder()?a.selectedAttributes.length&&a.selectedMBeans.length&&a.size(a.mbeans)+a.size(a.metrics)>2:a.selectedAttributes.length&&a.selectedMBeans.length&&a.size(a.mbeans)>0&&a.size(a.metrics)>0},a.showAttributes=function(){return a.canViewChart()&&a.size(a.metrics)>1},a.showElements=function(){return a.canViewChart()&&a.size(a.mbeans)>1},a.viewChart=function(){var d=b.search();a.selectedAttributes.length===a.size(a.metrics)?delete d.att:d.att=a.selectedAttributes,c.selection.isFolder()||a.selectedMBeans.length!==a.size(a.mbeans)||1!==a.size(a.mbeans)?d.el=a.selectedMBeans:delete d.el,b.search(d),b.path("jmx/charts")},a.$watch("workspace.selection",e),a.$on("$routeChangeSuccess",function(a,b,c){setTimeout(e,50)})}])}(Jmx||(Jmx={}));var Jmx;!function(a){a._module.controller("Jmx.ChartController",["$scope","$element","$location","workspace","localStorage","jolokiaUrl","jolokiaParams",function(a,b,c,d,e,f,g){function h(){var e=d.selection;if(null!=e){if(!angular.isDefined(e)||!angular.isDefined(a.updateRate)||0===a.updateRate)return setTimeout(j,500),void Core.$apply(a);var f=594,h=b.find("#charts");if(!h)return setTimeout(j,500),void Core.$apply(a);f=h.width(),a.reset(),a.charts=h,a.jolokia=new Jolokia(g),a.jolokia.start(a.updateRate);var k=e.objectName;a.metrics=[];var l=cubism.context().serverDelay(a.updateRate).clientDelay(a.updateRate).step(a.updateRate).size(f);a.context=l,a.jolokiaContext=l.jolokia(a.jolokia);var m=c.search(),n=toSearchArgumentArray(m.att);if(k){var o=function(a){return{type:"list",path:escapeMBeanPath(a),ignoreErrors:!0}},p=o(k),q=a.jolokia.request(p,{method:"post"});if(q){q.error&&Core.defaultJolokiaErrorHandler(q,{});var r=q.value?q.value.attr:null;if(r){var s=[];for(var t in r){var u=r[t];if(u){isNumberTypeName(u.type)&&s.push(t)}}if(n.length){var v=s.filter(function(a){return n.indexOf(a)>=0});v.length&&(s=v)}s=s.sort(),angular.forEach(s,function(b){var c=a.jolokiaContext.metric({type:"read",mbean:k,attribute:b},Core.humanizeValue(b));c&&a.metrics.push(c)})}}}else{var w=toSearchArgumentArray(m.el);if(n&&n.length&&w&&w.length){var x={};w.forEach(function(a){var b=e.get(a);if(!b&&e.children&&(b=e.children.find(function(b){return a===b.title})),b){var c=b.objectName;c&&(x[a]=c)}}),n=n.sort(),n.forEach(function(b){angular.forEach(x,function(c,d){var e=Core.humanizeValue(b),f=d+": "+e,g=a.jolokiaContext.metric({type:"read",mbean:c,attribute:b},f);g&&a.metrics.push(g)})})}e.children.length&&!a.metrics.length&&c.path("jmx/chartEdit")}if(a.metrics.length>0){var y=d3.select(h.get(0)),z=y.selectAll(".axis"),A=!1;if(z.data(["top","bottom"]).enter().append("div").attr("class",function(a){return a+" axis"}).each(function(a){if(!A)try{d3.select(this).call(l.axis().ticks(12).orient(a))}catch(a){A||(A=!0)}}),A)return a.reset(),setTimeout(j,500),void Core.$apply(a);y.append("div").attr("class","rule").call(l.rule()),l.on("focus",function(a){try{y.selectAll(".value").style("right",null===a?null:l.size()-a+"px")}catch(a){i.info("error: ",a)}}),a.metrics.forEach(function(a){y.call(function(b){b.append("div").data([a]).attr("class","horizon").call(l.horizon())})})}else a.reset();Core.$apply(a)}}var i=Logger.get("JMX");a.metrics=[],a.updateRate=1e3,a.context=null,a.jolokia=null,a.charts=null,a.reset=function(){a.context&&(a.context.stop(),a.context=null),a.jolokia&&(a.jolokia.stop(),a.jolokia=null),a.charts&&(a.charts.empty(),a.charts=null)},a.$on("$destroy",function(){try{a.deregRouteChange()}catch(a){}try{a.dereg()}catch(a){}a.reset()}),a.errorMessage=function(){return 0===a.updateRate?"updateRate":0===a.metrics.length?"metrics":void 0};var j=Core.throttled(h,200);a.deregRouteChange=a.$on("$routeChangeSuccess",function(a,b,c){j()}),a.dereg=a.$watch("workspace.selection",function(){d.moveIfViewInvalid()||j()}),j()}])}(Jmx||(Jmx={}));var Jmx;!function(a){a.DonutChartController=a._module.controller("Jmx.DonutChartController",["$scope","$routeParams","jolokia","$templateCache",function(a,b,c,d){if(a.mbean=b.mbean,a.total=b.total,a.attribute=b.attribute,a.terms=b.terms,a.remainder=b.remaining,a.template="",a.termsArray=a.terms.split(","),a.data={total:0,terms:[]},a.attribute){var e=a.termsArray.include(a.total);a.reqs=[{type:"read",mbean:a.mbean,attribute:a.attribute,paths:e.join(",")}],a.termsArray.forEach(function(b){a.data.terms.push({term:b,count:0})})}else a.reqs=[{type:"read",mbean:a.mbean,attribute:a.total}],a.termsArray.forEach(function(b){a.reqs.push({type:"read",mbean:a.mbean,attribute:b}),a.data.terms.push({term:b,count:0})});a.remainder&&"-"!==a.remainder&&a.data.terms.push({term:a.remainder,count:0}),a.render=function(b){var c=null;if(a.remainder&&"-"!==a.remainder&&(c=a.data.terms.find(function(b){return b.term===a.remainder})),a.attribute)b.request.attribute===a.attribute&&(a.data.total=b.value[a.total.toLowerCase()],a.data.terms.forEach(function(c){c.term!==a.remainder&&(c.count=b.value[c.term.toLowerCase()])}),c&&(c.count=a.data.total,a.data.terms.forEach(function(b){b.term!==a.remainder&&(c.count=c.count-b.count)})));else if(b.request.attribute===a.total)a.data.total=b.value;else{var e=a.data.terms.find(function(a){return a.term===b.request.attribute});e&&(e.count=b.value),c&&(c.count=a.data.total,a.data.terms.forEach(function(b){b.term!==a.remainder&&(c.count=c.count-b.count)}))}""===a.template&&(a.template=d.get("donut")),a.data=Object.clone(a.data),Core.$apply(a)},Core.register(c,a,a.reqs,onSuccess(a.render))}])}(Jmx||(Jmx={}));var Jmx;!function(a){a._module.controller("Jmx.TreeHeaderController",["$scope",function(a){a.expandAll=function(){Tree.expandAll("#jmxtree")},a.contractAll=function(){Tree.contractAll("#jmxtree")}}]),a._module.controller("Jmx.MBeansController",["$scope","$location","workspace","$route",function(b,c,d,e){function f(){a.updateTreeSelectionFromURL(c,$("#jmxtree"))}b.num=1,b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(f,50)}),b.$on("$routeUpdate",function(a,b){b&&b.params&&b.params.tab&&b.params.tab.match(/notree$/)&&e.reload()}),b.select=function(a){b.workspace.updateSelectionNode(a),Core.$apply(b)},b.populateTree=function(){var e=$("#jmxtree");b.tree=d.tree,a.enableTree(b,c,d,e,b.tree.children,!0),setTimeout(f,50)},b.$on("jmxTreeUpdated",b.populateTree),b.populateTree()}])}(Jmx||(Jmx={}));var Jmx;!function(a){a._module.controller("Jmx.OperationController",["$scope","workspace","jolokia","$timeout","$location","localStorage","$browser",function(b,c,d,e,f,g,h){function i(){b.item.args.forEach(function(a){switch(a.type){case"boolean":a.value=!1;break;default:a.value=null}})}function j(){b.isExecuting=!0,b.executeIcon="icon-spinner icon-spin",Core.$apply(b)}function k(c){e(function(){a.log.debug("END: execute -",c),b.isExecuting=!1,b.executeIcon="icon-ok",Core.$apply(b)},500)}b.item=b.selectedOperation,b.title=b.item.humanReadable,b.desc=b.item.desc,b.operationResult="",b.isExecuting=!1,b.executeIcon="icon-ok",b.mode="text",b.entity={},b.formConfig={properties:{},description:b.objectName+"::"+b.item.name};var l=escapeMBean(c.getSelectedMBeanName()),m=f.protocol()+"://"+f.host()+":"+f.port()+h.baseHref();b.jolokiaUrl=m+g.url+"/exec/"+l+"/"+b.item.name,i(),b.item.args.forEach(function(a){b.formConfig.properties[a.name]={type:a.type,tooltip:a.desc,help:"Type: "+a.type}}),e(function(){$("html, body").animate({scrollTop:0
},"medium")},250);var n=function(a){return a&&a.forEach(function(a){switch(a.type){case"int":case"long":a.formType="number";break;default:a.formType="text"}}),a};b.args=n(b.item.args),b.dump=function(a){console.log(a)},b.ok=function(){if(b.isExecuting)return void a.log.debug("ok: rejected, operation still executing");a.log.debug("ok: clear operation result"),b.operationResult=""},b.reset=function(){i(),b.entity={}},b.close=function(){b.$parent.showInvoke=!1},b.handleResponse=function(a){b.operationStatus="success",b.operationResult=null===a||"null"===a?"Operation Succeeded!":"string"==typeof a?a:angular.toJson(a,!0),b.mode=CodeEditor.detectTextFormat(b.operationResult),Core.$apply(b),k("success")},b.onSubmit=function(c,d){if(a.log.debug("onSubmit: json:",c," form: ",d),b.isExecuting)return void a.log.debug("onSubmit: already executing");j(),a.log.debug("$scope.item.args: ",b.item.args),angular.forEach(c,function(a,c){b.item.args.find(function(a){return a.name===c}).value=a}),e(b.execute,100)},b.execute=function(){a.log.debug("START: execute");var e=c.selection,f=e.objectName;if(!e||!f)return void k("node or objectName null");var g=[f,b.item.name];b.item.args&&b.item.args.forEach(function(a){g.push(a.value)}),g.push(onSuccess(b.handleResponse,{error:function(a){b.operationStatus="error";var c=a.error;b.operationResult=c;var d=a.stacktrace;d&&(b.operationResult=d),Core.$apply(b),k("error")}})),d.execute.apply(d,g)}}]),a._module.controller("Jmx.OperationsController",["$scope","workspace","jolokia","rbacACLMBean","$templateCache",function(b,c,d,e,f){function g(a){return"("+a.map(function(a){return a.type}).join()+")"}function h(a){for(var b in a)b=""+b,a[b].name=b,a[b].humanReadable=Core.humanizeValue(b);return a}function i(c,f){var g={};g[c]=[],angular.forEach(f,function(a,b){g[c].push(a.name)}),e.then(function(e){d.request({type:"exec",mbean:e,operation:"canInvoke(java.util.Map)",arguments:[g]},onSuccess(function(d){var e=d.value;angular.forEach(e[c],function(a,b){f[b].canInvoke=a.CanInvoke}),a.log.debug("Got operations: ",b.operations),Core.$apply(b)},{error:function(c){a.log.debug("Failed to fetch ACL for operations: ",c),Core.$apply(b)}}))})}function j(a){var c=a.value.op,d={};angular.forEach(c,function(a,b){angular.isArray(a)?angular.forEach(a,function(a,c){d[b+g(a.args)]=a}):d[b+g(a.args)]=a}),b.operations=h(d),b.isOperationsEmpty()?Core.$apply(b):(i(b.objectName,b.operations),Core.$apply(b))}b.operations={},b.objectName="",b.methodFilter="",b.workspace=c,b.selectedOperation=null,b.showInvoke=!1,b.template="",b.invokeOp=function(a){b.canInvoke(a)&&(b.selectedOperation=a,b.showInvoke=!0)},b.getJson=function(a){return angular.toJson(a,!0)},b.cancel=function(){b.selectedOperation=null,b.showInvoke=!1},b.$watch("showInvoke",function(a,c){a!==c&&(b.template=a?f.get("operationTemplate"):"")});var k=Core.throttled(function(){var a=c.selection;a&&(b.objectName=a.objectName,b.objectName&&d.request({type:"list",path:escapeMBeanPath(b.objectName)},onSuccess(j)))},500);b.isOperationsEmpty=function(){return $.isEmptyObject(b.operations)},b.doFilter=function(a){return!!Core.isBlank(b.methodFilter)||!(!a.name.toLowerCase().has(b.methodFilter.toLowerCase())&&!a.humanReadable.toLowerCase().has(b.methodFilter.toLowerCase()))},b.canInvoke=function(a){return!("canInvoke"in a)||a.canInvoke},b.getClass=function(a){return b.canInvoke(a)?"can-invoke":"cant-invoke"},b.$watch("workspace.selection",function(a,b){c.selection&&!c.moveIfViewInvalid()&&k()})}])}(Jmx||(Jmx={}));var JUnit;!function(a){a._module.controller("JUnit.TreeController",["$scope","$location","workspace","jolokia","inProgressStatus",function(b,c,d,e,f){function g(){Jmx.updateTreeSelectionFromURL(c,$("#junittree"),!0)}function h(a){var c=a?a.key:null;k.debug("Selection is now: "+c);var d=b.testClasses;b.selectionKey=c,c&&(d=b.testClassMap[c]||[c]),b.selectedTests=d.map(function(a){return{id:a}}),Core.$apply(b)}function i(){function f(a){b.testClasses=a,b.testClassMap={},angular.forEach(a,function(a){for(var c=a.split("."),e=c.length-1,f=k,g="",h=0;h<e;h++){var i=c[h];g&&(g+="."),g+=i;var l=b.testClassMap[g];l||(l=[],b.testClassMap[g]=l),l.push(a),f=d.folderGetOrElse(f,i),f.key=g}var m=c[e],n=new Folder(m);n.addClass="testClass",n.domain=j,n.key=a,f.children.push(n)}),Core.$apply(b);var e=$("#junittree");Jmx.enableTree(b,c,d,e,l,!0,function(a){h(a.data),Core.$apply(b)}),setTimeout(g,50)}var i=a.getIntrospectorMBean(d),j="org.unit",k=new Folder("Test Cases");k.addClass="testCases",k.typeName="testCases",k.domain=j,k.key="";var l=[k];i&&e.execute(i,"findJUnitTestClassNames",onSuccess(f))}function j(c){b.clearResults();var g=a.getJUnitMBean(d);g&&c&&c.length&&null===f.jhandle&&(k.info("Registering jolokia handle"),f.jhandle=e.register(l,{type:"exec",mbean:g,operation:"inProgress()",ignoreErrors:!0,arguments:[]}),e.execute(g,"runTestClasses",c,onSuccess(m)))}var k=Logger.get("JUnit");b.inProgressData=null,b.alertClass="success",b.testClasses=[],b.testClassMap={},b.gridOptions={selectedItems:[],data:"selectedTests",displayFooter:!1,showFilter:!1,filterOptions:{filterText:""},showSelectionCheckbox:!0,columnDefs:[{field:"id",displayName:"Test Class"}]},b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(g,50)}),b.$on("jmxTreeUpdated",function(){i()}),b.runAllTests=function(){j(b.testClasses)},b.runTests=function(){j((b.gridOptions.selectedItems||[]).map(function(a){return a.id}))},b.runTest=function(a){a&&j([a])},b.clearResults=function(){b.testResults=null,b.alertClass="success",f.data=null,f.result=null,f.alertClass="success"},i(),b.runningTests=function(){return!(null===f.data||!f.data.running)&&(b.inProgressData=f.data,b.alertClass=f.alertClass,!0)},b.hasTestResults=function(){return null!==f.result&&(b.testResults=f.result,b.alertClass=f.alertClass,!0)};var l=function(a){var c=a.value;if(c){k.info("Render inProgress: "+c),f.data=c,b.inProgressData=f.data;var d="success";c.failureCount>0&&(d="error"),f.alertClass=d,b.alertClass=f.alertClass,c.running||null===f.jhandle||(k.info("Unit test done, unreigster jolokia handle"),e.unregister(f.jhandle),f.jhandle=null),Core.$apply(b)}},m=function(a){if(a){k.info("Render results: "+a),f.data=null,f.alertClass=null,f.result=a;var c="success",d="success",e="JUnit testing succeded with "+a.runCount+" runs.";a.failureCount>0&&(c="error",d="warning",e="JUnit testing failed with "+a.failureCount+" failures."),b.alertClass=c,b.testResults=f.result,Core.notification(d,e),Core.$apply(b)}}}])}(JUnit||(JUnit={}));var JVM;!function(a){function b(b,e,f){b.isActive=function(a){var b=Core.trimLeading(a,"#");return e.path()===b},b.isValid=function(a){return a&&a.isValid(f)},b.hasLocalMBean=function(){return a.hasLocalMBean(f)},b.breadcrumbs=[{content:'<i class=" icon-signin"></i> Remote',title:"Connect to a remote JVM running Jolokia",isValid:function(a){return!0},href:"#/jvm/connect"},{content:'<i class="icon-list-ul"></i> Local',title:"View a diagram of the route",isValid:function(a){return c(a)},href:"#/jvm/local"},{content:'<i class="icon-signin"></i> Discovery',title:"Discover",isValid:function(a){return d(a)},href:"#/jvm/discover"}]}function c(a){return a.treeContainsDomainAndProperties("hawtio",{type:"JVMList"})}function d(a){return a.treeContainsDomainAndProperties("jolokia",{type:"Discovery"})}a.log=Logger.get("JVM"),a.connectControllerKey="jvmConnectSettings",a.connectionSettingsKey=Core.connectionSettingsKey,a.logoPath="img/icons/jvm/",a.logoRegistry={jetty:a.logoPath+"jetty-logo-80x22.png",tomcat:a.logoPath+"tomcat-logo.gif",generic:a.logoPath+"java-logo.svg"},a.configureScope=b,a.hasLocalMBean=c,a.hasDiscoveryMBean=d}(JVM||(JVM={}));var JVM;!function(a){a.rootPath="app/jvm",a.templatePath=a.rootPath+"/html/",a.pluginName="jvm",a._module=angular.module(a.pluginName,["bootstrap","ngResource","datatable","hawtioCore","hawtio-forms","ui"]),a._module.config(["$routeProvider",function(b){b.when("/jvm/discover",{templateUrl:a.templatePath+"discover.html"}).when("/jvm/connect",{templateUrl:a.templatePath+"connect.html"}).when("/jvm/local",{templateUrl:a.templatePath+"local.html"})}]),a._module.constant("mbeanName","hawtio:type=JVMList"),a._module.run(["$location","workspace","viewRegistry","layoutFull","helpRegistry","preferencesRegistry","ConnectOptions",function(b,c,d,e,f,g,h){d[a.pluginName]=a.templatePath+"layoutConnect.html",f.addUserDoc("jvm","app/jvm/doc/help.md"),g.addTab("Connect","app/jvm/html/reset.html"),c.topLevelTabs.push({id:"connect",content:"Connect",title:"Connect to other JVMs",isValid:function(a){return null==h||null==h.name},href:function(){return"#/jvm/connect"},isActive:function(a){return a.isLinkActive("jvm")}})}]),hawtioPluginLoader.addModule(a.pluginName)}(JVM||(JVM={}));var JVM;!function(a){a.ConnectController=a._module.controller("JVM.ConnectController",["$scope","$location","localStorage","workspace",function(b,c,d,e){function f(){return Core.createConnectOptions({scheme:"http",host:"localhost",path:"jolokia",port:8181,userName:"",password:""})}b.forms={};var g=e&&e.tree&&e.tree.children&&e.tree.children.length;if(b.disableProxy=!g||Core.isChromeApp(),b.lastConnection="",a.connectControllerKey in d)try{b.lastConnection=angular.fromJson(d[a.connectControllerKey])}catch(c){b.lastConnection="",delete d[a.connectControllerKey]}b.connectionConfigs=Core.loadConnectionMap(),Core.isBlank(b.lastConnection)?b.currentConfig=f():b.currentConfig=b.connectionConfigs[b.lastConnection],b.formConfig={properties:{name:{type:"java.lang.String",tooltip:"Name for this connection",required:!0,"input-attributes":{placeholder:"Unnamed..."}},scheme:{type:"java.lang.String",tooltip:"HTTP or HTTPS",enum:["http","https"],required:!0},host:{type:"java.lang.String",tooltip:"Target host to connect to",required:!0},port:{type:"java.lang.Integer",tooltip:"The HTTP port used to connect to the server","input-attributes":{min:"0"},required:!0},path:{type:"java.lang.String",tooltip:"The URL path used to connect to Jolokia on the remote server"}}},b.newConnection=function(){b.lastConnection=""},b.deleteConnection=function(){delete b.connectionConfigs[b.lastConnection],Core.saveConnectionMap(b.connectionConfigs);var a=Object.extended(b.connectionConfigs).keys();0===a.length?b.lastConnection="":b.lastConnection=a[0]},b.$watch("lastConnection",function(c,e){a.log.debug("lastConnection: ",c),c!==e&&(Core.isBlank(c)?b.currentConfig=f():b.currentConfig=b.connectionConfigs[c],d[a.connectControllerKey]=angular.toJson(c))},!0),b.save=function(){b.gotoServer(b.currentConfig,null,!0)},b.gotoServer=function(a,c,e){a||(a=Core.getConnectOptions(b.lastConnection));var f=a.name;if(b.connectionConfigs[f]=a,b.lastConnection=f,!0===e)return Core.saveConnectionMap(b.connectionConfigs),b.connectionConfigs=Core.loadConnectionMap(),angular.extend(b.currentConfig,b.connectionConfigs[b.lastConnection]),void Core.$apply(b);var g=a.view||"#/";a.view=g,Core.connectToServer(d,a),b.connectionConfigs=Core.loadConnectionMap(),angular.extend(b.currentConfig,b.connectionConfigs[b.lastConnection]),Core.$apply(b)};var h=c.search();if(void 0!==h&&void 0!==h.name){var i=Core.createConnectOptions({scheme:h.scheme?h.scheme:"http",host:h.host,path:h.path,port:h.port,userName:h.userName,password:h.password,name:h.name});b.gotoServer(i,null,!1),window.close()}}])}(JVM||(JVM={}));var JVM;!function(a){a._module.controller("JVM.DiscoveryController",["$scope","localStorage","jolokia",function(b,c,d){function e(a){for(var c in a){var d=a[c];if(d.url&&!d.secured){var e=Core.createJolokia(d.url,d.username,d.password);d.startTime=e.getAttribute("java.lang:type=Runtime","StartTime"),b.hasName(d)||(d.command=e.getAttribute("java.lang:type=Runtime","SystemProperties","sun.java.command"))}}}function f(a){if(!a.url)return void Core.notification("warning","No URL available to connect to agent");var b=Core.createConnectOptions();b.name=a.agent_description||"discover-"+a.agent_id;var d=Core.parseUrl(a.url);angular.extend(b,d),b.userName=a.username,b.password=a.password,Core.connectToServer(c,b)}b.discovering=!0,b.agents=void 0,b.$watch("agents",function(a,c){a!==c&&(b.selectedAgent=b.agents.find(function(a){return a.selected}))},!0),b.closePopover=function(a){$(a.currentTarget).parents(".popover").prev().popover("hide")},b.connectWithCredentials=function(a,c){b.closePopover(a),f(c)},b.gotoServer=function(a,b){b.secured?$(a.currentTarget).popover("show"):f(b)},b.getElementId=function(a){return a.agent_id.dasherize().replace(/\./g,"-")},b.getLogo=function(b){return b.server_product?a.logoRegistry[b.server_product]:a.logoRegistry.generic},b.filterMatches=function(a){return!!Core.isBlank(b.filter)||angular.toJson(a).toLowerCase().has(b.filter.toLowerCase())},b.getAgentIdClass=function(a){return b.hasName(a)?"":"strong"},b.hasName=function(a){return!!(a.server_vendor&&a.server_product&&a.server_version)},b.render=function(a){if(b.discovering=!1,a){var c=angular.toJson(a,!0);b.responseJson!==c&&(b.responseJson=c,b.agents=a,e(b.agents))}Core.$apply(b)},b.fetch=function(){b.discovering=!0,d.execute("jolokia:type=Discovery","lookupAgentsWithTimeout(int)",1e4,onSuccess(b.render))},b.fetch()}])}(JVM||(JVM={}));var JVM;!function(a){a._module.controller("JVM.JVMsController",["$scope","$window","$location","localStorage","workspace","jolokia","mbeanName",function(b,c,d,e,f,g,h){function i(a){a.request.operation.indexOf("listLocalJVMs")>-1&&j(a)}function j(a){b.initDone=!0,b.data=a.value,0===b.data.length&&(b.status="Could not discover local JVM processes"),Core.$apply(b)}a.configureScope(b,d,f),b.data=[],b.deploying=!1,b.status="",b.initDone=!1,b.filter="";var k={type:"exec",mbean:h,operation:"listLocalJVMs()",arguments:[]};b.filterMatches=function(a){return!!Core.isBlank(b.filter)||a.alias.toLowerCase().has(b.filter.toLowerCase())},b.fetch=function(){g.request(k,{success:j,error:function(a){b.data=[],b.initDone=!0,b.status="Could not discover local JVM processes: "+a.error,Core.$apply(b)}})},b.stopAgent=function(a){g.request([{type:"exec",mbean:h,operation:"stopAgent(java.lang.String)",arguments:[a]},k],onSuccess(i))},b.startAgent=function(a){g.request([{type:"exec",mbean:h,operation:"startAgent(java.lang.String)",arguments:[a]},k],onSuccess(i))},b.connectTo=function(c,d,f,g,h){var i={};i.scheme=d,i.host=f,i.port=g,i.path=h,i.userName="",i.password="",i.view="#/";var j=Core.createConnectToServerOptions(i);j.name="local",a.log.debug("Connecting to local JVM agent: "+c),Core.connectToServer(e,j),Core.$apply(b)},b.fetch()}])}(JVM||(JVM={}));var JVM;!function(a){a._module.controller("JVM.NavController",["$scope","$location","workspace",function(b,c,d){a.configureScope(b,c,d)}])}(JVM||(JVM={}));var JVM;!function(a){a._module.controller("JVM.ResetController",["$scope","localStorage",function(b,c){b.doClearConnectSettings=function(){!function(){delete c[a.connectControllerKey],delete c[a.connectionSettingsKey],setTimeout(function(){window.location.reload()},10)}()}}])}(JVM||(JVM={}));var Karaf;!function(a){function b(a,b){if(!angular.isDefined(a))return b[0];var c=b.findIndex(function(b){return b.id===a.id});return-1!==c?b[c]:b[0]}function c(b,c,d,e,f){a.log.info("installing URI: ",d),c.request({type:"exec",mbean:y(b),operation:"addRepository(java.lang.String)",arguments:[d]},onSuccess(e,{error:f}))}function d(b,c,d,e,f){a.log.info("uninstalling URI: ",d),c.request({type:"exec",mbean:y(b),operation:"removeRepository(java.lang.String)",arguments:[d]},onSuccess(e,{error:f}))}function e(a,b,c,d,e,f){b.request({type:"exec",mbean:y(a),operation:"installFeature(java.lang.String, java.lang.String)",arguments:[c,d]},onSuccess(e,{error:f}))}function f(a,b,c,d,e,f){b.request({type:"exec",mbean:y(a),operation:"uninstallFeature(java.lang.String, java.lang.String)",arguments:[c,d]},onSuccess(e,{error:f}))}function g(a){var b=a;return angular.isArray(a)||(b=[a]),b}function h(a,b,c){return"<a href='"+Core.url("#/karaf/feature/"+b+"/"+c+a.hash())+"'>"+c+"</a>"}function i(a,b,c){var d=[];return n(a,d,[]),d.find(function(a){return a.Name==b&&a.Version==c})}function j(a){return C.test(a)}function k(a){return I.test(a)}function l(a){return E.test(a)}function m(a){return G.test(a)}function n(a,b,c){var d=a.Features;angular.forEach(a.Repositories,function(a){c.push({id:a.Name,uri:a.Uri}),d&&angular.forEach(a.Features,function(c){angular.forEach(c,function(c){if(void 0!==d[c.Name]){var e=Object.extended(d[c.Name][c.Version]).clone();e.Id=c.Name+"/"+c.Version,e.RepositoryName=a.Name,e.RepositoryURI=a.Uri,b.push(e)}})})})}function o(a){var b=[];return angular.forEach(a,function(a){b.push({Name:a.name,State:a.statusName})}),b}function p(a,b,c){var d=[];return angular.forEach(c,function(c){d.push({Name:c,State:q(u(a,b,c))})}),d}function q(a){switch(a){case 2:return"Enabled";case 4:return"Unsatisfied";case 8:return"Activating";case 16:return"Active";case 32:return"Registered";case 64:return"Factory";case 128:return"Deactivating";case 256:return"Destroying";case 1024:return"Disabling";case 2048:return"Disposing"}return"Unknown"}function r(a,b){var c=A(a),d=b.request({type:"read",mbean:c,arguments:[]});return"Components"in d.value?d.value.Components.values:(d=b.request({type:"exec",mbean:c,operation:"listComponents()"}),p(a,b,d.value))}function s(a,b,c){return r(a,b).find(function(a){return a.Name==c})}function t(a,b,c){return b.request({type:"exec",mbean:A(a),operation:"isComponentActive(java.lang.String)",arguments:[c]}).value}function u(a,b,c){return b.request({type:"exec",mbean:A(a),operation:"componentState(java.lang.String)",arguments:[c]}).value}function v(a,b,c,d,e){b.request({type:"exec",mbean:A(a),operation:"activateComponent(java.lang.String)",arguments:[c]},onSuccess(d,{error:e}))}function w(a,b,c,d,e){b.request({type:"exec",mbean:A(a),operation:"deactiveateComponent(java.lang.String)",arguments:[c]},onSuccess(d,{error:e}))}function x(a,b,c){angular.forEach(b,function(b){angular.forEach(b,function(b){var d=i(a,b.Name,b.Version);d.id=b.Name+"/"+b.Version,c.push(d)})})}function y(a){var b="features";if(a){var c=a.mbeanTypesToDomain[b];c||(b="feature",c=a.mbeanTypesToDomain[b]||{});var d=c["org.apache.karaf"]||{},e=d.objectName;if(e)return e;var f=a.tree.navigate("org.apache.karaf",b);if(!f&&(f=a.tree.navigate("org.apache.karaf"))){var g=f.children;f=null,angular.forEach(g,function(a){f||(f=a.navigate(b))})}if(f){var g=f.children;if(g){var h=g[0];if(h)return h.objectName}return f.objectName}}return null}function z(a){if(a){var b=a.mbeanServicesToDomain.Scr||{},c=b["io.fabric8"]||{},d=c.objectName;if(d)return d}return null}function A(a){if(a){var b=a.mbeanTypesToDomain.scr||{},c=b["org.apache.karaf"]||{},d=c.objectName;if(d)return d;var e=a.tree.navigate("org.apache.karaf","scr");if(!e&&(e=a.tree.navigate("org.apache.karaf"))){var f=e.children;e=null,angular.forEach(f,function(a){e||(e=a.navigate("scr"))})}if(e){var f=e.children;if(f){var g=f[0];if(g)return g.objectName}return e.objectName}}return null}a.log=Logger.get("Karaf"),a.setSelect=b,a.installRepository=c,a.uninstallRepository=d,a.installFeature=e,a.uninstallFeature=f,a.toCollection=g,a.featureLinks=h,a.extractFeature=i;var B=["^org.apache.aries","^org.apache.karaf","^activemq-karaf","^org.apache.commons","^org.apache.felix","^io.fabric8","^io.fabric8.fab","^io.fabric8.insight","^io.fabric8.mq","^io.fabric8.patch","^io.fabric8.runtime","^io.fabric8.security","^org.apache.geronimo.specs","^org.apache.servicemix.bundles","^org.objectweb.asm","^io.hawt","^io.hawt.log","^javax.mail","^javax","^org.jvnet","^org.mvel2","^org.apache.mina.core","^org.apache.sshd.core","^org.apache.neethi","^org.apache.servicemix.specs","^org.apache.xbean","^org.apache.santuario.xmlsec","^biz.aQute.bndlib","^groovy-all","^com.google.guava","jackson-\\w+-asl","^com.fasterxml.jackson","^org.ops4j","^org.springframework","^bcprov$","^jline$","scala-library$","^org.scala-lang","^stax2-api$","^woodstox-core-asl","^org.jboss.amq.mq-fabric","^gravia-","^joda-time$","^org.apache.ws","-commands$","patch.patch","org.fusesource.insight","activeio-core","activemq-osgi","^org.eclipse.jetty","org.codehaus.jettison.jettison","org.jledit.core","org.fusesource.jansi","org.eclipse.equinox.region"],C=new RegExp(B.join("|")),D=["^org.apache.camel","camel-karaf-commands$","activemq-camel$"],E=new RegExp(D.join("|")),F=["^org.apache.cxf"],G=new RegExp(F.join("|")),H=["^org.apache.activemq","activemq-karaf$","activemq-camel$"],I=new RegExp(H.join("|"));a.isPlatformBundle=j,a.isActiveMQBundle=k,a.isCamelBundle=l,a.isCxfBundle=m,a.populateFeaturesAndRepos=n,a.createFabricScrComponentsView=o,a.createScrComponentsView=p,a.getComponentStateDescription=q,a.getAllComponents=r,a.getComponentByName=s,a.isComponentActive=t,a.getComponentState=u,a.activateComponent=v,a.deactivateComponent=w,a.populateDependencies=x,a.getSelectionFeaturesMBean=y,a.getSelectionFabricScrMBean=z,a.getSelectionScrMBean=A}(Karaf||(Karaf={}));var Karaf;!function(a){var b="karaf";a._module=angular.module(b,["bootstrap","ngResource","hawtioCore"]),a._module.config(["$routeProvider",function(a){a.when("/osgi/server",{templateUrl:"app/karaf/html/server.html"}).when("/osgi/features",{templateUrl:"app/karaf/html/features.html",reloadOnSearch:!1}).when("/osgi/scr-components",{templateUrl:"app/karaf/html/scr-components.html"}).when("/osgi/scr-component/:name",{templateUrl:"app/karaf/html/scr-component.html"}).when("/osgi/feature/:name/:version",{templateUrl:"app/karaf/html/feature.html"})}]),a._module.run(["workspace","viewRegistry","helpRegistry",function(a,b,c){c.addUserDoc("karaf","app/karaf/doc/help.md",function(){return a.treeContainsDomainAndProperties("org.apache.karaf")})}]),hawtioPluginLoader.addModule(b)}(Karaf||(Karaf={}));var Karaf;!function(a){a._module.controller("Karaf.FeatureController",["$scope","jolokia","workspace","$routeParams",function(b,c,d,e){function f(c){if(b.row=a.extractFeature(c.value,b.name,b.version),b.row){i(b.row);var d=[];angular.forEach(b.row.Dependencies,function(a,b){angular.forEach(a,function(a,c){d.push({Name:b,Version:c})})}),b.row.Dependencies=d}Core.$apply(b)}function g(a){Osgi.defaultBundleValues(d,b,a.values),angular.forEach(a.value,function(a){var c=a.Location;b.bundlesByLocation[c]=a})}function h(){var b=a.getSelectionFeaturesMBean(d),c=Osgi.getSelectionBundleMBean(d),e=d.jolokia;c&&g(e.request({type:"exec",mbean:c,operation:"listBundles()"})),b&&e.request({type:"read",mbean:b},onSuccess(f))}function i(a){var c=[];angular.forEach(a.Bundles,function(a){var d=b.bundlesByLocation[a];d?(d.Installed=!0,c.push(d)):c.push({Location:a,Installed:!1})}),a.BundleDetails=c}b.hasFabric=Fabric.hasFabric(d),b.name=e.name,b.version=e.version,b.bundlesByLocation={},b.props="properties",h(),b.install=function(){a.installFeature(d,c,b.name,b.version,function(){Core.notification("success","Installed feature "+b.name)},function(a){Core.notification("error","Failed to install feature "+b.name+" due to "+a.error)})},b.uninstall=function(){a.uninstallFeature(d,c,b.name,b.version,function(){Core.notification("success","Uninstalled feature "+b.name)},function(a){Core.notification("error","Failed to uninstall feature "+b.name+" due to "+a.error)})},b.toProperties=function(a){var b="";return angular.forEach(a,function(a,c){b+=a.Key+" = "+a.Value+"\n"}),b.trim()}}])}(Karaf||(Karaf={}));var Karaf;!function(a){a._module.controller("Karaf.FeaturesController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(c){var d=angular.toJson(c.value);if(b.responseJson!==d){b.responseJson=d,null===c.value.Features?b.featuresError=!0:b.featuresError=!1,b.features=[],b.repositories=[];var e=[],f=[];a.populateFeaturesAndRepos(c.value,e,f);var g=e.filter(function(a){return Core.parseBooleanValue(a.Installed)}),h=e.filter(function(a){return!Core.parseBooleanValue(a.Installed)});if(b.installedFeatures=g.sortBy(function(a){return a.Name}),h=h.sortBy(function(a){return a.Name}),f.sortBy("id").forEach(function(a){b.repositories.push({repository:a.id,uri:a.uri,features:h.filter(function(b){return b.RepositoryName===a.id})})}),!Core.isBlank(b.newRepositoryURI)){var i=f.find(function(a){return a.uri===b.newRepositoryURI});i&&(b.selectedRepositoryId=i.id),b.newRepositoryURI=""}Core.isBlank(b.selectedRepositoryId)?b.selectedRepository=b.repositories.first():b.selectedRepository=b.repositories.find(function(a){return a.repository===b.selectedRepositoryId}),Core.$apply(b)}}b.hasFabric=Fabric.hasFabric(d),b.responseJson="",b.filter="",b.installedFeatures=[],b.features=[],b.repositories=[],b.selectedRepositoryId="",b.selectedRepository={},b.newRepositoryURI="",b.init=function(){var a=c.search().repositoryId;a&&(b.selectedRepositoryId=a);var d=c.search().filter;d&&(b.filter=d)},b.init(),b.$watch("selectedRepository",function(a,d){a!==d&&(b.selectedRepositoryId=a?a.repository:"",c.search("repositoryId",b.selectedRepositoryId))},!0),b.$watch("filter",function(a,b){a!==b&&c.search("filter",a)});var g=a.getSelectionFeaturesMBean(d);a.log.debug("Features mbean: ",g),g&&Core.register(e,b,{type:"read",mbean:g},onSuccess(f,{silent:!0,error:!1})),b.inSelectedRepository=function(a){return b.selectedRepository&&"repository"in b.selectedRepository&&a&&"RepositoryName"in a&&a.RepositoryName===b.selectedRepository.repository?"in-selected-repository":""},b.isValidRepository=function(){return Core.isBlank(b.newRepositoryURI)},b.installRepository=function(){var c=b.newRepositoryURI;Core.notification("info","Adding feature repository URL"),a.installRepository(d,e,c,function(){Core.notification("success","Added feature repository URL"),b.selectedRepository={},b.selectedRepositoryId="",b.responseJson=null,b.triggerRefresh()},function(d){a.log.error("Failed to add feature repository URL ",c," due to ",d.error),a.log.info("stack trace: ",d.stacktrace),Core.$apply(b)})},b.uninstallRepository=function(){var c=b.selectedRepository.uri;Core.notification("info","Removing feature repository "+c),a.uninstallRepository(d,e,c,function(){Core.notification("success","Removed feature repository "+c),b.responseJson=null,b.selectedRepositoryId="",b.selectedRepository={},b.triggerRefresh()},function(d){a.log.error("Failed to remove feature repository ",c," due to ",d.error),a.log.info("stack trace: ",d.stacktrace),Core.$apply(b)})},b.triggerRefresh=function(){e.request({type:"read",method:"POST",mbean:g},onSuccess(f))},b.install=function(c){b.hasFabric||(Core.notification("info","Installing feature "+c.Name),a.installFeature(d,e,c.Name,c.Version,function(){Core.notification("success","Installed feature "+c.Name),b.installedFeatures.add(c),b.responseJson=null,b.triggerRefresh()},function(d){a.log.error("Failed to install feature ",c.Name," due to ",d.error),a.log.info("stack trace: ",d.stacktrace),Core.$apply(b)}))},b.uninstall=function(c){b.hasFabric||(Core.notification("info","Uninstalling feature "+c.Name),a.uninstallFeature(d,e,c.Name,c.Version,function(){Core.notification("success","Uninstalled feature "+c.Name),b.installedFeatures.remove(c),b.responseJson=null,b.triggerRefresh()},function(d){a.log.error("Failed to uninstall feature ",c.Name," due to ",d.error),a.log.info("stack trace: ",d.stacktrace),Core.$apply(b)}))},b.filteredRows=["Bundles","Configurations","Configuration Files","Dependencies"],b.showRow=function(a,c){return!b.filteredRows.any(a)&&((!angular.isArray(c)||0!==c.length)&&((!angular.isString(c)||!Core.isBlank(c))&&!(angular.isObject(c)&&(!c||Object.equal(c,{})))))},b.installed=function(a){return Core.parseBooleanValue(a)},b.showValue=function(a){if(angular.isArray(a)){var b=['<ul class="zebra-list">'];return a.forEach(function(a){b.push("<li>"+a+"</li>")}),b.push("</ul>"),b.join("\n")}if(angular.isObject(a)){var b=['<table class="table">',"<tbody>"];return angular.forEach(a,function(a,c){b.push("<tr>"),b.push("<td>"+c+"</td>"),b.push("<td>"+a+"</td>"),b.push("</tr>")}),b.push("</tbody>"),b.push("</table>"),b.join("\n")}return""+a},b.getStateStyle=function(a){return Core.parseBooleanValue(a.Installed)?"badge badge-success":"badge"},b.filterFeature=function(a){return!!Core.isBlank(b.filter)||!!Core.matchFilterIgnoreCase(a.Id,b.filter)}}])}(Karaf||(Karaf={}));var Karaf;!function(a){a._module.controller("Karaf.NavBarController",["$scope","workspace",function(b,c){b.hash=c.hash(),b.isKarafEnabled=c.treeContainsDomainAndProperties("org.apache.karaf"),b.isFeaturesEnabled=a.getSelectionFeaturesMBean(c),b.isScrEnabled=a.getSelectionScrMBean(c),b.$on("$routeChangeSuccess",function(){b.hash=c.hash()}),b.isActive=function(a){return c.isLinkActive(a)},b.isPrefixActive=function(a){return c.isLinkPrefixActive(a)}}])}(Karaf||(Karaf={}));var Karaf;!function(a){a._module.controller("Karaf.ScrComponentController",["$scope","$location","$timeout","workspace","jolokia","$routeParams",function(b,c,d,e,f,g){function h(){b.row=a.getComponentByName(e,f,b.name),Core.$apply(b)}b.showActivateEventFeedback=!1,b.showDeactivateEventFeedback=!1,b.defaultTimeout=3e3,b.name=g.name,h(),b.canActivate=function(){return"Active"!==b.row.State},b.activate=function(){b.showActivateEventFeedback=!0,d(function(){b.showActivateEventFeedback=!1},b.defaultTimeout),a.activateComponent(e,f,b.row.Name,function(){console.log("Activated!"),h()},function(){console.log("Failed to activate!"),h()})},b.deactivate=function(){b.showDeactivateEventFeedback=!0,d(function(){b.showDeactivateEventFeedback=!1},b.defaultTimeout),a.deactivateComponent(e,f,b.row.Name,function(){console.log("Deactivated!"),h()},function(){console.log("Failed to deactivate!"),h()})}}])}(Karaf||(Karaf={}));var Karaf;!function(a){a.ScrComponentsController=a._module.controller("Karaf.ScrComponentsController",["$scope","$location","$timeout","workspace","jolokia",function(b,c,d,e,f){function g(){return[{Name:"",Status:!1}]}function h(a){Object.equal(b.result,a)||(b.components=a,b.result=b.components,Core.$apply(b))}b.component=g(),b.result=[],b.components=[],b.selectedComponents=[],b.showActivateEventFeedback=!1,b.showDeactivateEventFeedback=!1,b.defaultTimeout=3e3,b.scrOptions={data:"components",showFilter:!1,showColumnMenu:!1,filterOptions:{useExternalFilter:!1},sortInfo:{fields:["Name"],directions:["asc"]},selectedItems:b.selectedComponents,rowHeight:32,selectWithCheckboxOnly:!0,columnDefs:[{field:"Name",displayName:"Name",cellTemplate:'<div class="ngCellText"><a href="#/osgi/scr-component/{{row.entity.Name}}?p=container">{{row.getProperty(col.field)}}</a></div>',width:600},{field:"State",displayName:"State",cellTemplate:'<div class="ngCellText">{{row.getProperty(col.field)}}</div>',width:200}]};var i=a.getSelectionFabricScrMBean(e);i?Core.register(f,b,{type:"exec",mbean:i,operation:"listComponents()"},onSuccess(function(b){b.value;h(a.createFabricScrComponentsView(b.value))})):(i=a.getSelectionScrMBean(e))&&h(a.getAllComponents(e,f)),b.canActivateAllSelected=function(){return b.selectedComponents.length>0&&b.selectedComponents.all(function(a){return"Active"!==a.State})},b.canDeactivateAllSelected=function(){return b.selectedComponents.length>0&&b.selectedComponents.all(function(a){return"Active"===a.State})},b.activate=function(){b.showActivateEventFeedback=!0,d(function(){b.showActivateEventFeedback=!1},b.defaultTimeout),b.selectedComponents.forEach(function(b){a.activateComponent(e,f,b.Name,function(){console.log("Activated!")},function(){console.log("Failed to activate!")})}),b.selectedComponents.splice(0,b.selectedComponents.length)},b.deactivate=function(){b.showDeactivateEventFeedback=!0,d(function(){b.showDeactivateEventFeedback=!1},b.defaultTimeout),b.selectedComponents.forEach(function(b){a.deactivateComponent(e,f,b.Name,function(){console.log("Deactivated!")},function(){console.log("Failed to deactivate!")})}),b.selectedComponents.splice(0,b.selectedComponents.length)}}])}(Karaf||(Karaf={}));var Karaf;!function(a){a._module.controller("Karaf.ServerController",["$scope","$location","workspace","jolokia",function(a,b,c,d){function e(){setTimeout(f,50)}function f(){j.info("Loading Karaf data..."),
k&&d.search("org.apache.karaf:type=admin,*",onSuccess(g)),l&&d.search("org.apache.karaf:type=instance,*",onSuccess(h))}function g(a){if(angular.isArray(a)){var b=a[0];b&&(j.debug("Karaf 2.x detected"),d.getAttribute(b,"Instances",onSuccess(function(a){i(a,b)})))}else k=!1}function h(a){if(angular.isArray(a)){var b=a[0];b&&(j.debug("Karaf 3.x detected"),d.getAttribute(b,"Instances",onSuccess(function(a){i(a,b)})))}else l=!1}function i(b,c){if(b){var e=Core.parseMBean(c),f="root";"attributes"in e&&"name"in e.attributes&&(f=e.attributes.name),j.enabledFor(Logger.DEBUG)&&(j.debug("mbean: ",Core.parseMBean(c)),j.debug("Instances: ",b));var g=b[f];a.data.name=g.Name,a.data.state=g.State,a.data.root=g["Is Root"],a.data.location=g.Location,a.data.sshPort=g["SSH Port"],a.data.rmiRegistryPort=g["RMI Registry Port"],a.data.rmiServerPort=g["RMI Server Port"],a.data.pid=g.Pid,a.data.version="?",a.data.startLevel="?",a.data.framework="?",a.data.frameworkVersion="?";var h="org.apache.karaf:type=system,name="+g.Name,i=d.request({type:"read",mbean:h,attribute:["StartLevel","Framework","Version"]},onSuccess(null)),k=i.value;k&&(a.data.version=k.Version,a.data.startLevel=k.StartLevel,a.data.framework=k.Framework);var l=d.search("osgi.core:type=bundleState,*",onSuccess(null));if(angular.isArray(l)){var c=l[0];if(c){var m=d.request({type:"exec",mbean:c,operation:"getVersion(long)",arguments:[0]},onSuccess(null)),n=m.value;n&&(a.data.frameworkVersion=n)}}}Core.$apply(a)}var j=Logger.get("Karaf"),k=!0,l=!0;a.data={name:"",version:"",state:"",root:"",startLevel:"",framework:"",frameworkVersion:"",location:"",sshPort:"",rmiRegistryPort:"",rmiServerPort:"",pid:""},a.$on("jmxTreeUpdated",e),a.$watch("workspace.tree",e)}])}(Karaf||(Karaf={}));var Log;!function(a){var b="log",c=!1;a._module=angular.module(b,["bootstrap","ngResource","ngGrid","ngSanitize","datatable","hawtioCore"]),a._module.config(["$routeProvider",function(a){a.when("/logs",{templateUrl:"app/log/html/logs.html",reloadOnSearch:!1}).when("/openlogs",{redirectTo:function(){return c?"/logs":"/home"},reloadOnSearch:!1})}]),a._module.run(["$location","workspace","viewRegistry","layoutFull","helpRegistry","preferencesRegistry",function(b,d,e,f,g,h){c=a.treeContainsLogQueryMBean(d),e.log=f,g.addUserDoc("log","app/log/doc/help.md",function(){return a.treeContainsLogQueryMBean(d)}),h.addTab("Server Logs","app/log/html/preferences.html",function(){return a.treeContainsLogQueryMBean(d)}),d.topLevelTabs.push({id:"logs",content:"Logs",title:"View and search the logs of this container",isValid:function(b){return a.treeContainsLogQueryMBean(b)},href:function(){return"#/logs"}}),d.subLevelTabs.push({content:'<i class="icon-list-alt"></i> Log',title:"View the logs in this process",isValid:function(b){return a.isSelectionLogQueryMBean(b)},href:function(){return"#/logs"}})}]),a._module.filter("logDateFilter",["$filter",function(a){var b=a("date");return function(a){return a?a.timestampMs?b(a.timestampMs,"yyyy-MM-dd HH:mm:ss.sss"):b(a.timestamp,"yyyy-MM-dd HH:mm:ss"):null}}]),hawtioPluginLoader.addModule(b)}(Log||(Log={}));var Log;!function(a){var b=Logger.get("Log");a._module.controller("Log.LogController",["$scope","$rootScope","$routeParams","$location","localStorage","workspace","jolokia","$window","$document","$templateCache",function(c,d,e,f,g,h,i,j,k,l){c.sortAsc=!0;var m=g.logSortAsc;angular.isString(m)&&(c.sortAsc="true"===m),c.autoScroll=!0,m=g.logAutoScroll,angular.isString(m)&&(c.autoScroll="true"===m),m=g.logBatchSize,c.logBatchSize=angular.isNumber(m)?m:20,d.$on("logBatchSize",function(a,b){angular.isNumber(b)&&(c.logBatchSize=b,c.logFilter.count=b)}),c.logs=[],c.showRowDetails=!1,c.showRaw={expanded:!1};var n=a.findLogQueryMBean(h);c.init=function(){c.searchText=e.s,angular.isDefined(c.searchText)||(c.searchText=""),c.filter={logLevelQuery:e.l,logLevelExactMatch:Core.parseBooleanValue(e.e),messageOnly:Core.parseBooleanValue(e.o)},angular.isDefined(c.filter.logLevelQuery)||(c.filter.logLevelQuery=""),angular.isDefined(c.filter.logLevelExactMatch)||(c.filter.logLevelExactMatch=!1),angular.isDefined(c.filter.messageOnly)||(c.filter.messageOnly=!1)},c.$on("$routeUpdate",c.init),c.$watch("searchText",function(a,b){a!==b&&f.search("s",a)}),c.$watch("filter.logLevelQuery",function(a,b){a!==b&&f.search("l",a)}),c.$watch("filter.logLevelExactMatch",function(a,b){a!==b&&f.search("e",a)}),c.$watch("filter.messageOnly",function(a,b){a!==b&&f.search("o",a)}),c.init(),c.toTime=0,c.logFilter={afterTimestamp:c.toTime,count:c.logBatchSize},c.logFilterJson=JSON.stringify(c.logFilter),c.queryJSON={type:"EXEC",mbean:n,operation:"jsonQueryLogResults",arguments:[c.logFilterJson],ignoreErrors:!0},c.logLevels=["TRACE","DEBUG","INFO","WARN","ERROR"],c.logLevelMap={},c.skipFields=["seq"],angular.forEach(c.logLevels,function(a,b){c.logLevelMap[a]=b,c.logLevelMap[a.toLowerCase()]=b}),c.selectedClass=function(a){return a===c.selectedRowIndex?"selected":""},c.$watch("selectedRowIndex",function(b,d){if(b!==d){if(b<0||b>c.logs.length)return c.selectedRow=null,void(c.showRowDetails=!1);a.log.debug("New index: ",b),c.selectedRow=c.logs[b],c.showRowDetails||(c.showRowDetails=!0)}}),c.hasOSGiProps=function(a){if(!a)return!1;if(!("properties"in a))return!1;var b=a.properties;return Object.extended(b).keys().any(function(a){return a.startsWith("bundle")})},c.selectRow=function(a){if(c.selectedRowIndex==a)return void(c.showRowDetails=!0);c.selectedRowIndex=a},c.getSelectedRowJson=function(){return angular.toJson(c.selectedRow,!0)},c.logClass=function(a){return a?logLevelClass(a.level):""},c.logIcon=function(a){if(!a)return"";var b=c.logClass(a);return"error"===b?"red icon-warning-sign":"warning"===b?"orange icon-exclamation-sign":"info"===b?"icon-info-sign":"icon-cog"},c.logSourceHref=a.logSourceHref,c.hasLogSourceHref=function(b){return!!b&&a.hasLogSourceHref(b)},c.hasLogSourceLineHref=function(b){return!!b&&a.hasLogSourceLineHref(b)},c.dateFormat="yyyy-MM-dd HH:mm:ss",c.formatException=function(b){return a.formatStackLine(b)},c.getSupport=function(){if(c.selectedRow){var a="https://access.redhat.com/knowledge/solutions",b=c.selectedRow.message;a=a+"?logger="+c.selectedRow.logger+"&text="+b,window.location.href=a}},c.addToDashboardLink=function(){var a=angular.toJson(e),b=angular.toJson({size_x:8,size_y:3}),d="Logs";return""!==c.filter.logLevelQuery&&(d=d+" LogLevel: "+c.filter.logLevelQuery),c.filter.logLevelExactMatch&&(d+=" Exact Match"),""!==c.searchText&&(d=d+" Filter: "+c.searchText),c.filter.messageOnly&&(d+=" Message Only"),"#/dashboard/add?tab=dashboard&href="+encodeURIComponent("#/logs")+"&routeParams="+encodeURIComponent(a)+"&title="+encodeURIComponent(d)+"&size="+encodeURIComponent(b)},c.isInDashboardClass=function(){return angular.isDefined(c.inDashboard&&c.inDashboard)?"log-table-dashboard":""},c.sortIcon=function(){return c.sortAsc?"icon-arrow-down":"icon-arrow-up"},c.filterLogMessage=function(a){var b=c.filter.messageOnly;if(""!==c.filter.logLevelQuery){var d=c.filter.logLevelExactMatch,e=c.filter.logLevelQuery,f=d?0:c.logLevelMap[e];if(d){if(a.level!==e)return!1}else{var g=c.logLevelMap[a.level];if(!(g>=f||g<0))return!1}}return c.searchText.startsWith("l=")?Core.matchFilterIgnoreCase(a.logger,c.searchText.last(c.searchText.length-2)):c.searchText.startsWith("m=")?Core.matchFilterIgnoreCase(a.message,c.searchText.last(c.searchText.length-2)):b?Core.matchFilterIgnoreCase(a.message,c.searchText):Core.matchFilterIgnoreCase(a.logger,c.searchText)||Core.matchFilterIgnoreCase(a.message,c.searchText)},c.formatStackTrace=function(a){if(!a)return"";var b='<ul class="unstyled">\n';return a.forEach(function(a){b=b+"<li>"+c.formatException(a)+"</li>"}),b+="\n</ul>"};var o=function(d){var e=!1;if(!c.inDashboard){var f=$(j);if(0===c.logs.length&&(e=!0),c.sortAsc)var h=f.scrollTop()+f.height(),i=Core.getDocHeight()-100;else var h=f.scrollTop()+f.height(),i=100;h>i&&(e=!0)}var l=d.events,m=d.toTimestamp;if(m&&angular.isNumber(m)&&(m<0?console.log("ignoring dodgy value of toTime: "+m):(c.toTime=m,c.logFilter.afterTimestamp=c.toTime,c.logFilterJson=JSON.stringify(c.logFilter),c.queryJSON.arguments=[c.logFilterJson])),l){var n=a.getLogCacheSize(g);c.inDashboard&&(n=50);var o=0;if(l.forEach(function(a){a&&(a.sanitizedMessage=Core.escapeHtml(a.message),c.logs.any(function(b,c){return c.message===a.message&&c.seq===a.message&&c.timestamp===a.timestamp})||(o+=1,null!=a.seq&&(a.timestampMs=a.seq),c.sortAsc?c.logs.push(a):c.logs.unshift(a)))}),n>0){var p=c.logs.length;if(p>n){var q=p-n,h=0;c.sortAsc||(h=p-q),c.logs.splice(h,q),c.showRowDetails&&(c.sortAsc?c.selectedRowIndex-=q:c.selectedRowIndex+=q)}}o&&(c.autoScroll&&e&&setTimeout(function(){var a=0;c.sortAsc&&(a=k.height()-f.height()),b.debug("Scrolling to position: "+a),k.scrollTop(a)},20),Core.$apply(c))}},p=function(a){var b=a.value;b?o(b):Core.notification("error","Failed to get a response! "+JSON.stringify(a.error,null,4))},q=onSuccess(p,{error:function(a){p(a)},silent:!0});if(n){var r=function(a){o(a),Core.register(i,c,c.queryJSON,q)};i.execute(n,"getLogResults(int)",1e3,onSuccess(r))}}])}(Log||(Log={}));var Log;!function(a){a._module.controller("Log.PreferencesController",["$scope","localStorage",function(a,b){Core.initPreferenceScope(a,b,{logCacheSize:{value:1e3,converter:parseInt},logSortAsc:{value:!0,converter:Core.parseBooleanValue},logAutoScroll:{value:!0,converter:Core.parseBooleanValue},logBatchSize:{value:20,converter:parseInt,post:function(b){a.$emit("logBatchSize",b)}}})}])}(Log||(Log={}));var Maven;!function(a){var b="maven";a._module=angular.module(b,["bootstrap","ngResource","datatable","tree","hawtioCore","hawtio-ui"]),a._module.config(["$routeProvider",function(a){a.when("/maven/search",{templateUrl:"app/maven/html/search.html"}).when("/maven/advancedSearch",{templateUrl:"app/maven/html/advancedSearch.html"}).when("/maven/artifact/:group/:artifact/:version/:classifier/:packaging",{templateUrl:"app/maven/html/artifact.html"}).when("/maven/artifact/:group/:artifact/:version/:classifier",{templateUrl:"app/maven/html/artifact.html"}).when("/maven/artifact/:group/:artifact/:version",{templateUrl:"app/maven/html/artifact.html"}).when("/maven/dependencies/:group/:artifact/:version/:classifier/:packaging",{templateUrl:"app/maven/html/dependencies.html"}).when("/maven/dependencies/:group/:artifact/:version/:classifier",{templateUrl:"app/maven/html/dependencies.html"}).when("/maven/dependencies/:group/:artifact/:version",{templateUrl:"app/maven/html/dependencies.html"}).when("/maven/versions/:group/:artifact/:classifier/:packaging",{templateUrl:"app/maven/html/versions.html"}).when("/maven/view/:group/:artifact/:version/:classifier/:packaging",{templateUrl:"app/maven/html/view.html"}).when("/maven/test",{templateUrl:"app/maven/html/test.html"})}]),a._module.run(["$location","workspace","viewRegistry","helpRegistry",function(b,c,d,e){d.maven="app/maven/html/layoutMaven.html",c.topLevelTabs.push({id:"maven",content:"Maven",title:"Search maven repositories for artifacts",isValid:function(b){return a.getMavenIndexerMBean(b)},href:function(){return"#/maven/search"},isActive:function(a){return a.isLinkActive("/maven")}}),e.addUserDoc("maven","app/maven/doc/help.md",function(){return null!==a.getMavenIndexerMBean(c)}),e.addDevDoc("maven","app/maven/doc/developer.md")}]),hawtioPluginLoader.addModule(b)}(Maven||(Maven={}));var Maven;!function(a){a._module.controller("Maven.ArtifactController",["$scope","$routeParams","workspace","jolokia",function(b,c,d,e){function f(){var b=a.getMavenIndexerMBean(d);b?e.execute(b,"search",h.groupId,h.artifactId,h.version,h.packaging,h.classifier,"",onSuccess(g)):console.log("No MavenIndexerMBean!")}function g(a){if(a&&a.length){var c=a[0];h.name=c.name,h.description=c.description}Core.$apply(b)}b.row={groupId:c.group||"",artifactId:c.artifact||"",version:c.version||"",classifier:c.classifier||"",packaging:c.packaging||""};var h=b.row;b.id=a.getName(h),a.addMavenFunctions(b,d),b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(f,50)}),b.$watch("workspace.selection",function(){f()})}])}(Maven||(Maven={}));var Maven;!function(a){a._module.controller("Maven.DependenciesController",["$scope","$routeParams","$location","workspace","jolokia",function(b,c,d,e,f){function g(){var c=a.getAetherMBean(e);c?f.execute(c,"resolveJson(java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String)",b.group,b.artifact,b.version,b.packaging,b.classifier,onSuccess(h)):console.log("No AetherMBean!")}function h(a){if(a){var c=JSON.parse(a);c&&(b.dependencyTree=new Folder("Dependencies"),b.dependencyActivations=[],i(b.dependencyTree,c),b.dependencyActivations.reverse(),b.rootDependency=b.dependencyTree.children[0])}Core.$apply(b)}function i(c,d){var e=a.getName(d),f=new Folder(e);f.key=e.replace(/\//g,"_"),f.dependency=d,b.dependencyActivations.push(f.key),c.children.push(f);var g=d.children;angular.forEach(g,function(a){i(f,a)})}b.artifacts=[],b.group=c.group||"",b.artifact=c.artifact||"",b.version=c.version||"",b.classifier=c.classifier||"",b.packaging=c.packaging||"",b.dependencyTree=null,a.addMavenFunctions(b,e),b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(g,50)}),b.$watch("workspace.selection",function(){g()}),b.onSelectNode=function(a){b.selected=a},b.onRootNode=function(a){},b.validSelection=function(){return b.selected&&b.selected!==b.rootDependency},b.viewDetails=function(){var a=Core.pathGet(b.selected,["dependency"]),c=b.detailLink(a);if(c){var e=Core.trimLeading(c,"#");console.log("going to view "+e),d.path(e)}}}])}(Maven||(Maven={}));var Maven;!function(a){a._module.controller("Maven.PomXmlController",["$scope",function(a){function b(a){return a||""}a.mavenPomXml="\n  <dependency>\n    <groupId>"+b(a.row.groupId)+"</groupId>\n    <artifactId>"+b(a.row.artifactId)+"</artifactId>\n    <version>"+b(a.row.version)+"</version>\n  </dependency>\n"}])}(Maven||(Maven={}));var Maven;!function(a){a._module.controller("Maven.SearchController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(a){if(g.debug("Search done, preparing result."),b.done=!0,b.inProgress=!1,a.length>i){var c=a.length===j;b.tooManyResponses=c?"This search returned more than "+(j-1)+" artifacts, showing the first "+i+", please refine your search":"This search returned "+a.length+" artifacts, showing the first "+i+", please refine your search"}else b.tooManyResponses="";b.artifacts=a.first(i),Core.$apply(b)}var g=Logger.get("Maven");b.artifacts=[],b.selected=[],b.done=!1,b.inProgress=!1,b.form={searchText:""},b.search="",b.searchForm="app/maven/html/searchForm.html",a.addMavenFunctions(b,d);var h=[{field:"groupId",displayName:"Group"},{field:"artifactId",displayName:"Artifact",cellTemplate:'<div class="ngCellText" title="Name: {{row.entity.name}}">{{row.entity.artifactId}}</div>'},{field:"version",displayName:"Version",cellTemplate:'<div class="ngCellText" title="Name: {{row.entity.name}}"><a ng-href="{{detailLink(row.entity)}}">{{row.entity.version}}</a</div>'}];b.gridOptions={data:"artifacts",displayFooter:!0,selectedItems:b.selected,selectWithCheckboxOnly:!0,columnDefs:h,rowDetailTemplateId:"artifactDetailTemplate",filterOptions:{filterText:"search"}},b.hasAdvancedSearch=function(a){return a.searchGroup||a.searchArtifact||a.searchVersion||a.searchPackaging||a.searchClassifier||a.searchClassName},b.doSearch=function(){b.done=!1,b.inProgress=!0,b.artifacts=[],setTimeout(function(){Core.$apply(b)},50);var c=a.getMavenIndexerMBean(d),h=b.form;if(c){var i=h.searchText,j=h.artifactType;if(j)if("className"===j)g.debug("Search for: "+h.searchText+" className"),e.execute(c,"searchClasses",i,onSuccess(f));else{var k=j.split("/"),l=k[0],m=k[1];g.debug("Search for: "+h.searchText+" packaging "+l+" classifier "+m),e.execute(c,"searchTextAndPackaging",i,l,m,onSuccess(f))}else i?(g.debug("Search text is: "+h.searchText),e.execute(c,"searchText",h.searchText,onSuccess(f))):b.hasAdvancedSearch(h)&&(g.debug("Searching for "+h.searchGroup+"/"+h.searchArtifact+"/"+h.searchVersion+"/"+h.searchPackaging+"/"+h.searchClassifier+"/"+h.searchClassName),e.execute(c,"search",h.searchGroup||"",h.searchArtifact||"",h.searchVersion||"",h.searchPackaging||"",h.searchClassifier||"",h.searchClassName||"",onSuccess(f)))}else Core.notification("error","Cannot find the Maven Indexer MBean!")};var i=1e3,j=10*i+1}])}(Maven||(Maven={}));var Maven;!function(a){a._module.controller("Maven.TestController",["$scope","workspace","jolokia","$q","$templateCache",function(b,c,d,e,f){b.html="text/html",b.someUri="",b.uriParts=[],b.mavenCompletion=f.get("mavenCompletionTemplate"),b.$watch("someUri",function(a,c){a!==c&&(b.uriParts=a.split("/"))}),b.$watch("uriParts",function(a,c){if(a!==c&&1===a.length&&a.length<c.length&&""!==c.last()&&a.first().has(c.last())){var d=c.first(c.length-1).include(a.first());b.someUri=d.join("/")}},!0),b.doCompletionMaven=function(f){return a.completeMavenUri(e,b,c,d,f)}}])}(Maven||(Maven={}));var Maven;!function(a){a._module.controller("Maven.VersionsController",["$scope","$routeParams","workspace","jolokia",function(b,c,d,e){function f(){var c=a.getMavenIndexerMBean(d);c?e.execute(c,"versionComplete",b.group,b.artifact,b.version,b.packaging,b.classifier,onSuccess(g)):console.log("No MavenIndexerMBean!")}function g(a){b.artifacts=[],angular.forEach(a,function(a){for(var c=Core.parseVersionNumbers(a),d=0,e=0;e<=4;e++){var f=e>=c.length?0:c[e];d*=1e3,d+=f}b.artifacts.push({groupId:b.group,artifactId:b.artifact,packaging:b.packaging,classifier:b.classifier,version:a,versionNumber:d})}),Core.$apply(b)}b.artifacts=[],b.group=c.group||"",b.artifact=c.artifact||"",b.version="",b.classifier=c.classifier||"",b.packaging=c.packaging||"";var h=b.group+"/"+b.artifact;b.classifier&&(h+="/"+b.classifier),b.packaging&&(h+="/"+b.packaging);var i=h+" versions",j=[{field:"version",displayName:i,cellTemplate:'<div class="ngCellText"><a href="#/maven/artifact/{{row.entity.groupId}}/{{row.entity.artifactId}}/{{row.entity.version}}">{{row.entity.version}}</a></div>'}];b.gridOptions={data:"artifacts",displayFooter:!0,selectedItems:b.selected,selectWithCheckboxOnly:!0,columnDefs:j,rowDetailTemplateId:"artifactDetailTemplate",sortInfo:{field:"versionNumber",direction:"DESC"},filterOptions:{filterText:"search"}},a.addMavenFunctions(b,d),b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(f,50)}),b.$watch("workspace.selection",function(){f()})}])}(Maven||(Maven={}));var Maven;!function(a){a._module.controller("Maven.ViewController",["$scope","$location","workspace","jolokia",function(a,b,c,d){function e(){}a.$watch("workspace.tree",function(){setTimeout(e,50)}),a.$on("$routeChangeSuccess",function(a,b,c){setTimeout(e,50)})}])}(Maven||(Maven={}));var OpenEJB;!function(a){var b="openejb";a._module=angular.module(b,["bootstrap","ngResource","hawtioCore"]),a._module.config(["$routeProvider",function(a){}]),a._module.run(["$location","workspace","viewRegistry","helpRegistry",function(a,b,c,d){c.openojb="app/openejb/html/layoutOpenEJBTree.html",d.addUserDoc("openejb","app/openejb/doc/help.md",function(){return b.treeContainsDomainAndProperties("openejb")}),b.topLevelTabs.push({id:"openejb",content:"OpenEJB",title:"Manage your OpenEJB resources",isValid:function(a){return a.treeContainsDomainAndProperties("openejb")},href:function(){return"#/jmx/attributes?tab=openejb"},isActive:function(a){return a.isTopTabActive("openejb")}})}]),hawtioPluginLoader.addModule(b)}(OpenEJB||(OpenEJB={}));var OpenEJB;!function(a){a._module.controller("OpenEJB.TreeController",["$scope","$location","workspace",function(a,b,c){function d(){Jmx.updateTreeSelectionFromURL(b,$("#openejbTree"),!0)}a.$on("$routeChangeSuccess",function(a,b,c){setTimeout(d,50)}),a.$watch("workspace.tree",function(){if(!c.moveIfViewInvalid()){var e=[],f=c.tree;if(f){var g=f.children;angular.forEach(g,function(a){var b=a.children;a.title.startsWith("openejb")&&b&&(e=e.concat(b))})}var h=$("#openejbTree");Jmx.enableTree(a,b,c,h,e,!0),setTimeout(d,50)}})}])}(OpenEJB||(OpenEJB={}));var Osgi;!function(a){var b="osgi";a._module=angular.module(b,["bootstrap","ngResource","ngGrid","hawtioCore","hawtio-ui"]),a._module.config(["$routeProvider",function(a){a.when("/osgi/bundle-list",{templateUrl:"app/osgi/html/bundle-list.html"}).when("/osgi/bundles",{templateUrl:"app/osgi/html/bundles.html"}).when("/osgi/bundle/:bundleId",{templateUrl:"app/osgi/html/bundle.html"}).when("/osgi/services",{templateUrl:"app/osgi/html/services.html"}).when("/osgi/packages",{templateUrl:"app/osgi/html/packages.html"}).when("/osgi/package/:package/:version",{templateUrl:"app/osgi/html/package.html"}).when("/osgi/configurations",{templateUrl:"app/osgi/html/configurations.html"}).when("/osgi/pid/:pid/:factoryPid",{templateUrl:"app/osgi/html/pid.html"}).when("/osgi/pid/:pid",{templateUrl:"app/osgi/html/pid.html"}).when("/osgi/fwk",{templateUrl:"app/osgi/html/framework.html"}).when("/osgi/dependencies",{templateUrl:"app/osgi/html/svc-dependencies.html",reloadOnSearch:!1})}]),a._module.run(["workspace","viewRegistry","helpRegistry",function(a,b,c){b.osgi="app/osgi/html/layoutOsgi.html",c.addUserDoc("osgi","app/osgi/doc/help.md",function(){return a.treeContainsDomainAndProperties("osgi.core")}),a.topLevelTabs.push({id:"osgi",content:"OSGi",title:"Visualise and manage the bundles and services in this OSGi container",isValid:function(a){return a.treeContainsDomainAndProperties("osgi.core")},href:function(){return"#/osgi/bundle-list"},isActive:function(a){return a.isLinkActive("osgi")}})}]),a._module.factory("osgiDataService",["workspace","jolokia",function(b,c){return new a.OsgiDataService(b,c)}]),hawtioPluginLoader.addModule(b)}(Osgi||(Osgi={}));var Osgi;!function(a){a._module.controller("Osgi.BundleListController",["$scope","workspace","jolokia","localStorage",function(b,c,d,e){function f(a){return!!(b.display.showPlatformBundles&&Karaf.isPlatformBundle(a.SymbolicName)||b.display.showActiveMQBundles&&Karaf.isActiveMQBundle(a.SymbolicName)||b.display.showCxfBundles&&Karaf.isCxfBundle(a.SymbolicName)||b.display.showCamelBundles&&Karaf.isCamelBundle(a.SymbolicName)||b.display.showAllBundles)}function g(e){var f=e.value,g=angular.toJson(f);b.responseJson!==g&&(b.responseJson=g,b.bundles=[],angular.forEach(f,function(a,c){var d={Identifier:a.Identifier,Name:"",SymbolicName:a.SymbolicName,Fragment:a.Fragment,State:a.State,Version:a.Version,LastModified:new Date(Number(a.LastModified)),Location:a.Location,StartLevel:void 0};a.Headers["Bundle-Name"]&&(d.Name=a.Headers["Bundle-Name"].Value),b.bundles.push(d)}),b.bundles=b.bundles.sortBy(b.display.sortField),Core.$apply(b),setTimeout(function(){for(var e=[],f=0;f<b.bundles.length;f++){var g=b.bundles[f];e.push({type:"exec",mbean:a.getSelectionBundleMBean(c),operation:"getStartLevel(long)",arguments:[g.Identifier]})}var h=e.length;d.request(e,onSuccess(function(c){var d=c.request.arguments.first();if(angular.isDefined(d)){var e=b.bundles[d];e&&(a.log.debug("Setting bundle: ",e.Identifier," start level to: ",c.value),e.StartLevel=c.value)}h-=1,a.log.debug("oustanding responses: ",h),0===h&&(a.log.debug("Updating page..."),Core.$apply(b))},{error:function(a){}}))},500))}b.result={},b.bundles=[],b.bundleUrl="",b.display={bundleField:"Name",sortField:"Identifier",bundleFilter:"",startLevelFilter:0,showActiveMQBundles:!1,showCamelBundles:!1,showCxfBundles:!1,showPlatformBundles:!1,showAllBundles:!1},"bundleList"in e&&(b.display=angular.fromJson(e.bundleList)),b.$watch("display",function(a,b){a!==b&&(e.bundleList=angular.toJson(a))},!0),b.installDisabled=function(){return""===b.bundleUrl},b.install=function(){d.request({type:"exec",mbean:a.getSelectionFrameworkMBean(c),operation:"installBundle(java.lang.String)",arguments:[b.bundleUrl]},{success:function(e){var f=e.value;d.request({type:"exec",mbean:a.getSelectionBundleMBean(c),operation:"isFragment(long)",arguments:[f]},{success:function(e){e.value?(Core.notification("success","Fragment installed successfully."),b.bundleUrl="",Core.$apply(b)):d.request({type:"exec",mbean:a.getSelectionFrameworkMBean(c),operation:"startBundle(long)",arguments:[f]},{success:function(a){Core.notification("success","Bundle installed and started successfully."),b.bundleUrl="",Core.$apply(b)},error:function(a){Core.notification("error",a.error)}})},error:function(a){Core.notification("error",a.error)}})},error:function(a){Core.notification("error",a.error)}})},b.$watch("display.sortField",function(a,c){a!==c&&(b.bundles=b.bundles.sortBy(a))}),b.getStateStyle=function(b){return a.getStateStyle("badge",b)},b.getLabel=function(a){var c;return"Name"===b.display.bundleField?""===(c=a.Name)&&(c=a.SymbolicName):c=a.SymbolicName,c},b.filterBundle=function(a){if(b.display.startLevelFilter>0&&a.StartLevel<b.display.startLevelFilter)return!1;var c=b.getLabel(a);return b.display.bundleFilter?!!c.toLowerCase().has(b.display.bundleFilter.toLowerCase())&&(!(b.display.showActiveMQBundles||b.display.showPlatformBundles||b.display.showCxfBundles||b.display.showCamelBundles)||!!f(a)):!!f(a)},Core.register(d,b,{type:"exec",mbean:a.getSelectionBundleMBean(c),operation:"listBundles()"},onSuccess(g))}])}(Osgi||(Osgi={}));var Osgi;!function(a){function b(a){var b=a.indexOf(";");return b<=0?"":a.substring(b+1).trim()}function c(a,b){var c="";if(!a)return c;for(var d=Object.keys(a).sort(),e=0;e<d.length;e++){var f,g=d[e],h=g.charAt(0),i="";if("A"===h&&(i="=",f="text-info"),"D"===h&&(i=":=",f="muted"),""!==i){if(b&&"Aversion"===g)continue;var j=a[g];j.length>15&&(j=j.replace(/[,]/g,",<br/>&nbsp;&nbsp;")),c+="<tr><td><strong class='"+f+"'>"+g.substring(1)+"</strong>"+i+j+"</td></tr>"}}return c}function d(a){if(Object.isArray(a))return e(a);var b=a.toString(),c=b.lastIndexOf(".");return b.substring(c+1)}function e(a){for(var b=[],c=0;c<a.length;c++)b.add(d(a[c]));return b=b.filter(function(a,b,c){return c.indexOf(a)===b}),b.sort(),b.toString()}a.readBSNHeaderData=b,a.formatAttributesAndDirectivesForPopover=c,a.formatServiceName=d,a._module.controller("Osgi.BundleController",["$scope","$location","$timeout","workspace","$routeParams","jolokia",function(e,f,g,h,i,j){function k(){document.getElementById("loadClassResult").innerHTML+="<div class='alert alert-error'><button type='button' class='close' data-dismiss='alert'>&times;</button>The hawtio.OSGiTools MBean is not available. Please contact technical support.</div>"}function l(a){document.getElementById("loadClassResult").innerHTML+="<div class='alert alert-error'><button type='button' class='close' data-dismiss='alert'>&times;</button>Problem invoking hawtio.OSGiTools MBean. "+a+"</div>"}function m(c){var d=c.value;e.bundles=d,a.defaultBundleValues(h,e,d),e.row=a.findBundle(e.bundleId,d),Core.$apply(e),$(".accordion-body.collapse").hover(function(){$(this).css("overflow","visible")},function(){$(this).css("overflow","hidden")}),$("#bsn").tooltip({title:b(e.row.Headers["Bundle-SymbolicName"].Value),placement:"right"}),n(),o(),p()}function n(){var b=a.parseManifestHeader(e.row.Headers,"Import-Package");for(var d in e.row.ImportData){var f=b[d],g="<small><table><tr><td><strong>Imported Version=</strong>"+e.row.ImportData[d].ReportedVersion+"</td></tr>";if(void 0!==f)g+=c(f,!1),"optional"!==b[d].Dresolution&&$(document.getElementById("import."+d)).addClass("badge-info");else{$(document.getElementById("import."+d)).addClass("badge-important");var h=e.row.Headers["DynamicImport-Package"];void 0!==h&&(h=h.Value,g+="<tr><td>Dynamic Import. Imported due to:</td></tr>",g+="<tr><td><strong>DynamicImport-Package=</strong>"+h+"</td></tr>")}g+="</table></small>",$(document.getElementById("import."+d)).popover({title:"attributes and directives",content:g,trigger:"hover",html:!0}),b[d]=void 0}var i="";for(var d in b)void 0!==b[d]&&void 0===e.row.ExportData[d]&&(i+="<tr><td><div class='less-big badge badge-warning' id='unsatisfied."+d+"'>"+d+"</div></td></tr>");""!==i&&(i="<p/><p class='text-warning'>The following optional imports were not satisfied:<table>"+i+"</table></p>",document.getElementById("unsatisfiedOptionalImports").innerHTML=i);for(var d in b)if(void 0!==b[d]){var g="<small><table>";g+=c(b[d],!1),g+="</table></small>",$(document.getElementById("unsatisfied."+d)).popover({title:"attributes and directives",content:g,trigger:"hover",html:!0})}}function o(){var b=a.parseManifestHeader(e.row.Headers,"Export-Package");for(var d in e.row.ExportData){var f="<small><table><tr><td><strong>Exported Version=</strong>"+e.row.ExportData[d].ReportedVersion+"</td></tr>";f+=c(b[d],!0),f+="</table></small>",$(document.getElementById("export."+d)).popover({title:"attributes and directives",content:f,trigger:"hover",html:!0})}}function p(){if(void 0!==e.row.RegisteredServices&&0!==e.row.RegisteredServices.length||void 0!==e.row.ServicesInUse&&0!==e.row.ServicesInUse){var b=a.getSelectionServiceMBean(h);b&&j.request({type:"exec",mbean:b,operation:"listServices()"},onSuccess(q))}}function q(b){var c=b.value;for(var f in c){var g=document.getElementById("registers.service."+f),i=document.getElementById("uses.service."+f);(void 0!==g&&null!==g||void 0!==i&&null!==i)&&j.request({type:"exec",mbean:a.getSelectionServiceMBean(h),operation:"getProperties",arguments:[f]},onSuccess(function(a,b,f){return function(g){for(var h=g.value,i=Object.keys(h).sort(),j="<small><table>",k=0;k<i.length;k++){var l=h[i[k]];if(void 0!==l){var m=l.Value;m.length>15&&(m=m.replace(/[,]/g,",<br/>&nbsp;&nbsp;")),j+="<tr><td valign='top'>"+i[k]+"</td><td>"+m+"</td></tr>"}}var n=c[a].BundleIdentifier;j+="<tr><td>Registered&nbsp;by</td><td>Bundle "+n+" <div class='less-big label'>"+e.bundles[n].SymbolicName+"</div></td></tr>",j+="</table></small>",void 0!==b&&null!==b&&(b.innerText=" "+d(c[a].objectClass),$(b).popover({title:"service properties",content:j,trigger:"hover",html:!0})),void 0!==f&&null!==f&&(f.innerText=" "+d(c[a].objectClass),$(f).popover({title:"service properties",content:j,trigger:"hover",html:!0}))}}(f,g,i)))}}function r(){var b=a.getSelectionBundleMBean(h);b&&j.request({type:"exec",mbean:b,operation:"listBundles()"},onSuccess(m))}e.bundleId=i.bundleId,r(),e.showValue=function(a){switch(a){case"Bundle-Name":case"Bundle-SymbolicName":case"Bundle-Version":case"Export-Package":case"Import-Package":return!1;default:return!0}},e.showStartEventFeedback=!1,e.showStopEventFeedback=!1,e.showRefreshEventFeedback=!1,e.showUpdateEventFeedback=!1,e.showUninstallEventFeedback=!1,e.defaultTimeout=3e3,e.executeLoadClass=function(b){var c=a.getHawtioOSGiToolsMBean(h);c?j.request({type:"exec",mbean:c,operation:"getLoadClassOrigin",arguments:[e.bundleId,b]},{success:function(c){var d,f,g=document.getElementById("loadClassResult"),i=c.value;-1===i?(d="",f="Class can not be loaded from this bundle."):(d="alert-success",f="Class is served from Bundle "+a.bundleLinks(h,i)),g.innerHTML+="<div class='alert "+d+"'><button type='button' class='close' data-dismiss='alert'>&times;</button>Loading class <strong>"+b+"</strong> in Bundle "+e.bundleId+". "+f+"</div>"},error:function(a){l(a)}}):k()},e.executeFindResource=function(b){var c=a.getHawtioOSGiToolsMBean(h);c?j.request({type:"exec",mbean:c,operation:"getResourceURL",arguments:[e.bundleId,b]},{success:function(a){var c,d,f=document.getElementById("loadClassResult"),g=a.value;null===g?(c="",d="Resource can not be found from this bundle."):(c="alert-success",d="Resource is available from: "+g),f.innerHTML+="<div class='alert "+c+"'><button type='button' class='close' data-dismiss='alert'>&times;</button>Finding resource <strong>"+b+"</strong> in Bundle "+e.bundleId+". "+d+"</div>"},error:function(a){l(a)}}):k()},e.mavenLink=function(a){return angular.isObject(a)?Maven.mavenLink(a.Location):""},e.startBundle=function(b){e.showStartEventFeedback=!0,g(function(){e.showStartEventFeedback=!1},e.defaultTimeout),j.request([{type:"exec",mbean:a.getSelectionFrameworkMBean(h),operation:"startBundle",arguments:[b]}],onSuccess(r))},e.stopBundle=function(b){
e.showStopEventFeedback=!0,g(function(){e.showStopEventFeedback=!1},e.defaultTimeout),j.request([{type:"exec",mbean:a.getSelectionFrameworkMBean(h),operation:"stopBundle",arguments:[b]}],onSuccess(r))},e.updateBundle=function(b){e.showUpdateEventFeedback=!0,g(function(){e.showUpdateEventFeedback=!1},e.defaultTimeout),j.request([{type:"exec",mbean:a.getSelectionFrameworkMBean(h),operation:"updateBundle",arguments:[b]}],onSuccess(r))},e.refreshBundle=function(b){e.showRefreshEventFeedback=!0,g(function(){e.showRefreshEventFeedback=!1},e.defaultTimeout),j.request([{type:"exec",mbean:a.getSelectionFrameworkMBean(h),operation:"refreshBundle",arguments:[b]}],onSuccess(r))},e.uninstallBundle=function(b){e.showUninstallEventFeedback=!0,g(function(){e.showUninstallEventFeedback=!1},e.defaultTimeout),j.request([{type:"exec",mbean:a.getSelectionFrameworkMBean(h),operation:"uninstallBundle",arguments:[b]}],onSuccess(function(){f.path("/osgi/bundle-list"),Core.$apply(e)}))}}])}(Osgi||(Osgi={}));var Osgi;!function(a){a._module.controller("Osgi.BundlesController",["$scope","$timeout","workspace","jolokia",function(b,c,d,e){function f(a){Object.equal(b.result,a.value)||(b.selected.length=0,b.result=a.value,b.bundles=[],angular.forEach(b.result,function(a,c){var d={Identifier:a.Identifier,Name:"",SymbolicName:a.SymbolicName,State:a.State,Version:a.Version,LastModified:a.LastModified,Location:a.Location};a.Headers["Bundle-Name"]&&(d.Name=a.Headers["Bundle-Name"].Value),b.bundles.push(d)}),b.loading=!1,Core.$apply(b))}b.result={},b.bundles=[],b.selected=[],b.loading=!0,b.bundleUrl="",b.showStartEventFeedback=!1,b.showStopEventFeedback=!1,b.showRefreshEventFeedback=!1,b.showUpdateEventFeedback=!1,b.showUninstallEventFeedback=!1,b.defaultTimeout=3e3,b.installDisabled=function(){return""===b.bundleUrl};var g=[{field:"Identifier",displayName:"Identifier",width:"48",headerCellTemplate:'<div ng-click="col.sort()" class="ngHeaderSortColumn {{col.headerClass}}" ng-style="{\'cursor\': col.cursor}" ng-class="{ \'ngSorted\': !noSortVisible }"><div class="ngHeaderText colt{{$index}} pagination-centered" title="Identifier"><i class="icon-tag"></i></div><div class="ngSortButtonDown" ng-show="col.showSortButtonDown()"></div><div class="ngSortButtonUp" ng-show="col.showSortButtonUp()"></div></div>'},{field:"State",displayName:"Bundle State",width:"24",headerCellTemplate:'<div ng-click="col.sort()" class="ngHeaderSortColumn {{col.headerClass}}" ng-style="{\'cursor\': col.cursor}" ng-class="{ \'ngSorted\': !noSortVisible }"><div class="ngHeaderText colt{{$index}} pagination-centered" title="State"><i class="icon-tasks"></i></div><div class="ngSortButtonDown" ng-show="col.showSortButtonDown()"></div><div class="ngSortButtonUp" ng-show="col.showSortButtonUp()"></div></div>',cellTemplate:'<div class="ngCellText" title="{{row.getProperty(col.field)}}"><i class="{{row.getProperty(col.field)}}"></i></div>'},{field:"Name",displayName:"Name",width:"***",cellTemplate:'<div class="ngCellText"><a href="#/osgi/bundle/{{row.entity.Identifier}}?p=container">{{row.getProperty(col.field)}}</a></div>'},{field:"SymbolicName",displayName:"Symbolic Name",width:"***",cellTemplate:'<div class="ngCellText"><a href="#/osgi/bundle/{{row.entity.Identifier}}?p=container">{{row.getProperty(col.field)}}</a></div>'},{field:"Version",displayName:"Version",width:"**",sortable:!1},{field:"Location",displayName:"Update Location",width:"***"}];b.gridOptions={data:"bundles",showFilter:!1,selectedItems:b.selected,selectWithCheckboxOnly:!0,columnDefs:g,filterOptions:{filterText:""}},b.onResponse=function(){e.request({type:"exec",mbean:a.getSelectionBundleMBean(d),operation:"listBundles()"},{success:f,error:f})},b.controlBundles=function(c){var f=b.selected.map(function(a){return a.Identifier});angular.isArray(f)||(f=[f]),e.request({type:"exec",mbean:a.getSelectionFrameworkMBean(d),operation:c,arguments:[f]},{success:b.onResponse,error:b.onResponse})},b.stop=function(){b.showStopEventFeedback=!0,c(function(){b.showStopEventFeedback=!1},b.defaultTimeout),b.controlBundles("stopBundles([J)")},b.start=function(){b.showStartEventFeedback=!0,c(function(){b.showStartEventFeedback=!1},b.defaultTimeout),b.controlBundles("startBundles([J)")},b.update=function(){b.showUpdateEventFeedback=!0,c(function(){b.showUpdateEventFeedback=!1},b.defaultTimeout),b.controlBundles("updateBundles([J)")},b.refresh=function(){b.showRefreshEventFeedback=!0,c(function(){b.showRefreshEventFeedback=!1},b.defaultTimeout),b.controlBundles("refreshBundles([J)")},b.uninstall=function(){b.showUninstallEventFeedback=!0,c(function(){b.showUninstallEventFeedback=!1},b.defaultTimeout),b.controlBundles("uninstallBundles([J)")},b.install=function(){e.request({type:"exec",mbean:a.getSelectionFrameworkMBean(d),operation:"installBundle(java.lang.String)",arguments:[b.bundleUrl]},{success:function(c){console.log("Got: ",c),b.bundleUrl="",e.request({type:"exec",mbean:a.getSelectionFrameworkMBean(d),operation:"startBundle(long)",arguments:[c.value]},{success:b.onResponse,error:b.onResponse})},error:function(a){b.bundleUrl="",b.onResponse()}})},Core.register(e,b,{type:"exec",mbean:a.getSelectionBundleMBean(d),operation:"listBundles()"},onSuccess(f))}])}(Osgi||(Osgi={}));var Osgi;!function(a){a.configuration={pidMetadata:{"io.fabric8.container.java":{name:"Java Container"},"io.fabric8.container.process":{name:"Process Container"},"io.fabric8.container.process.overlay.resources":{name:"Container Overlay Resources",description:"The resources overlaid over the distribution of the process",schemaExtensions:{disableHumanizeLabel:!0}},"io.fabric8.dosgi":{name:"Fabric8 DOSGi",description:"The configuration for the Distributed OSGi implementation in Fabric8"},"io.fabric8.environment":{name:"Environment Variables",description:"The operating system Environment Variables which are exported into any child processes",schemaExtensions:{disableHumanizeLabel:!0}},"io.fabric8.fab.osgi.url":{name:"FAB URL",description:"Configures the 'fab:' URL handler for deploying JARs as bundles"},"io.fabric8.mq.fabric.server":{name:"ActiveMQ Broker",description:"The configuration of the Apache ActiveMQ server configured via the fabric"},"io.fabric8.openshift":{name:"OpenShift"},"io.fabric8.ports":{name:"Ports",description:"The network ports exported by the container",schemaExtensions:{disableHumanizeLabel:!0}},"io.fabric8.system":{name:"System Properties",description:"The Java System Properties which are exported into any child Java processes",schemaExtensions:{disableHumanizeLabel:!0}},"io.fabric8.version":{name:"Versions",schemaExtensions:{disableHumanizeLabel:!0}},"org.ops4j.pax.logging":{name:"Logging",description:"The configuration of the logging subsystem"},"org.ops4j.pax.url.mvn":{name:"Maven URL",description:"Configures the Maven 'mvn:' URL handler for referencing maven artifacts"},"org.ops4j.pax.url.war":{name:"WAR URL",description:"Configures the 'war:' URL handler for referencing WAR deployments"},"org.ops4j.pax.url.wrap":{name:"Wrap URL",description:"Configures the 'wrap:' URL handler for wrapping JARs as bundles"}},ignorePids:["jmx.acl","io.fabric8.agent","io.fabric8.git","io.fabric8.mq.fabric.template","io.fabric8.openshift.agent","io.fabric8.service.ZkDataStoreImpl","org.apache.felix.fileinstall","org.apache.karaf.command.acl.","org.apache.karaf.service.acl."],tabs:{fabric8:{label:"Fabric8",description:"Configuration options for the Fabric8 services",pids:["io.fabric8"]},karaf:{label:"Karaf",description:"Configuration options for the Apache Karaf container and subsystem",pids:["org.apache.karaf"]}}}}(Osgi||(Osgi={}));var Osgi;!function(a){a._module.controller("Osgi.ConfigurationsController",["$scope","$routeParams","$location","workspace","jolokia",function(b,c,d,e,f){function g(c){var d={};angular.forEach(c,function(a){var b=a[0],c=a[1],e=q(b,c);r(b)||(e.hasValue=!0,e.kind=x.pid,d[b]=e)}),b.pids=d;var e=a.getSelectionConfigAdminMBean(b.workspace);e&&b.jolokia.execute(e,"getConfigurations","(service.factoryPid=*)",onSuccess(h,w("Failed to load factory PID configurations: "))),l()}function h(c){var d=a.getSelectionConfigAdminMBean(b.workspace),e=b.pids;e&&d&&angular.forEach(c,function(c){var f=c[0],g=c[1];if(f&&!r(f)){var h=e[f];h&&(h.isFactoryInstance=!0,b.jolokia.execute(d,"getFactoryPid",f,onSuccess(function(c){if(h.factoryPid=c,h.name=a.removeFactoryPidPrefix(f,c),c){var d=s(c,g,e);d&&(t(f,d,h),b.inFabricProfile&&a.getConfigurationProperties(b.workspace,b.jolokia,f,function(d){var e=Core.pathGet(d,["fabric.zookeeper.pid","Value"]);e&&(h.name=a.removeFactoryPidPrefix(e,c),h.zooKeeperPid=e,Core.$apply(b))}),Core.$apply(b))}})))}}),k()}function i(a){b.metaType=a,k()}function j(){var a=b.pids,c=[];angular.forEach(a,function(a,b){a.isFactoryInstance||c.push(a)}),b.configurations=c.sortBy("name"),Core.$apply(b)}function k(c){void 0===c&&(c=!0);var d=b.metaType;if(d){var e=a.configuration.pidMetadata,f=b.pids||{};angular.forEach(d.pids,function(a,b){var d=null,g=c?s(b,d):f[b];if(g){var h=a.factoryPidBundleIds;h&&h.length&&u(g),g.name=Core.pathGet(e,[b,"name"])||o(a.name)||b;var i=Core.pathGet(e,[b,"description"])||a.description;g.description=i}})}j()}function l(){if(b.pids)if(b.profileNotRunning&&b.profileMetadataMBean&&b.versionId&&b.profileId)f.execute(b.profileMetadataMBean,"metaTypeSummary",b.versionId,b.profileId,onSuccess(i));else{var c=a.getMetaTypeMBean(b.workspace);c&&b.jolokia.execute(c,"metaTypeSummary",onSuccess(i))}}function m(){if(b.configurations=[],b.profileNotRunning&&b.profileMetadataMBean&&b.versionId&&b.profileId)f.execute(b.profileMetadataMBean,"metaTypeSummary",b.versionId,b.profileId,onSuccess(n,{silent:!0}));else if(b.jolokia){var c=a.getSelectionConfigAdminMBean(b.workspace);c&&b.jolokia.execute(c,"getConfigurations","(service.pid=*)",onSuccess(g,w("Failed to load PID configurations: ")))}}function n(a){var c=a;if(c){var d={};angular.forEach(c.pids,function(a,b){if(a&&!r(b)){var c="mvn:"+b,e={pid:b,name:a.name,class:"pid",description:a.description,bundle:c,kind:x.pid,pidLink:v(b)};d[b]=e}}),angular.forEach(d,function(a,b){var c=b.indexOf("-");if(c>0){var e=b.substring(0,c),f=b.substring(c+1,b.length),g=d[e];if(!g){g=s(e,a.bundle,d)}g&&(t(b,g,a,e),a.name=f,d[e]=g,delete d[b])}}),b.pids=d}b.metaType=c,k(!1)}function o(a){return angular.forEach(["Fabric8 ","Apache "],function(b){a&&a.startsWith(b)&&a.length>b.length&&(a=a.substring(b.length))}),a}function p(b,c){var d=a.configuration.pidMetadata;return Core.pathGet(d,[b,"description"])||"pid: "+b+"\nbundle: "+c}function q(b,c){var d=a.configuration.pidMetadata;return{pid:b,name:Core.pathGet(d,[b,"name"])||b,class:"pid",description:Core.pathGet(d,[b,"description"])||p(b,c),bundle:c,kind:x.pidNoValue,pidLink:v(b)}}function r(b){var c=!1;return angular.forEach(a.configuration.ignorePids,function(a){b.startsWith(a)&&(c=!0)}),c}function s(c,d,e){if(void 0===e&&(e=null),r(c))return a.log.info("ignoring pid "+c),null;e||(e=b.pids);var f=e[c];return f||(f=q(c,d),e[c]=f,j()),f}function t(a,b,c,d){void 0===d&&(d=null),u(b,d,a);var e=b.children;d&&(b.pidLink=v(d,!0)),e||(e={},b.children=e),e[a]=c}function u(a,b,c){void 0===b&&(b=null),void 0===c&&(c=null),a.isFactory=!0,a.class="factoryPid",a.kind=x.factory,b||(b=a.factoryPid||""),c||(c=a.pid||""),b||(b=c,c=null),a.pidLink=v(b)}function v(c,d){return void 0===d&&(d=!1),a.createConfigPidLink(b,e,c,d)}function w(a){return{error:function(b){Core.notification("error",a+b.error||b),Core.defaultJolokiaErrorHandler(b)}}}b.selectedItems=[],b.grid={data:"configurations",showFilter:!1,showColumnMenu:!1,multiSelect:!1,filterOptions:{filterText:"",useExternalFilter:!1},selectedItems:b.selectedItems,showSelectionCheckbox:!1,displaySelectionCheckbox:!1,columnDefs:[{field:"Pid",displayName:"Configuration",cellTemplate:'<div class="ngCellText"><a ng-href="{{row.entity.pidLink}}" title="{{row.entity.description}}">{{row.entity.name}}</a></div>'}]};var x={factory:{class:"badge badge-info",title:"Configuration factory used to create separate instances of the configuration"},pid:{class:"badge badge-success",title:"Configuration which has a set of properties associated with it"},pidNoValue:{class:"badge badge-warning",title:"Configuration which does not yet have any bound values"}};b.addPidDialog=new UI.Dialog,a.initProfileScope(b,c,d,localStorage,f,e,function(){b.$watch("workspace.selection",function(){m()}),m()}),b.addPid=function(c){if(b.configurations.any(function(a){return a.pid==c}))return void Core.notification("error",'pid "'+c+'" already exists.');b.addPidDialog.close();var d=a.getHawtioConfigAdminMBean(b.workspace);if(d&&c){var e=JSON.stringify({});b.jolokia.execute(d,"configAdminUpdate",c,e,onSuccess(function(a){Core.notification("success","Successfully created pid: "+c),m()}))}},b.createConfigInstance=function(c,d){c.preventDefault();var f=a.getHawtioConfigAdminMBean(e);if(f){var g=a.getSelectionConfigAdminMBean(b.workspace);b.jolokia.execute(g,"createFactoryConfiguration",d.pid,onSuccess(function(a){var c=a,d=JSON.stringify({});b.jolokia.execute(f,"configAdminUpdate",c,d,onSuccess(function(a){Core.notification("success","Successfully created pid: "+c),m()},w("Failed to create new PID: ")))},w("Failed to create new PID: ")))}},b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(m,50)})}])}(Osgi||(Osgi={}));var Osgi;!function(a){a._module.controller("Osgi.FrameworkController",["$scope","$dialog","workspace",function(b,c,d){function e(a,b){Core.notification(a,b),g()}function f(a){b.startLevel=a.value.FrameworkStartLevel,b.initialBundleStartLevel=a.value.InitialBundleStartLevel,Core.$apply(b)}function g(){var b=a.getSelectionFrameworkMBean(d);if(b){d.jolokia.request({type:"read",mbean:b},onSuccess(f))}}b.editDialog=new UI.Dialog,g(),b.edit=function(a,c){b.editAttr=a,b.editDisplayName=c,b.editDialog.open()},b.edited=function(c,f,g){if(b.editDialog.close(),angular.isNumber(g))if("FrameworkStartLevel"==c&&g<b.initialBundleStartLevel)e("error","Can't set Framework Start Level below Initial Bundle Start Level");else{var h=a.getSelectionFrameworkMBean(d);if(h){var i=d.jolokia;i.request({type:"write",mbean:h,attribute:c,value:g},{error:function(a){e("error",a.error)},success:function(a){e("success",f+" changed to "+g)}})}}}}])}(Osgi||(Osgi={}));var Osgi;!function(a){var b=function(){function b(a,b){this.jolokia=b,this.workspace=a}return b.prototype.getBundles=function(){var b={},c=this.jolokia.request({type:"exec",mbean:a.getSelectionBundleMBean(this.workspace),operation:"listBundles()"},onSuccess(null));return angular.forEach(c.value,function(a,c){var d={Identifier:a.Identifier,Name:"",SymbolicName:a.SymbolicName,Fragment:a.Fragment,State:a.State,Version:a.Version,LastModified:new Date(Number(a.LastModified)),Location:a.Location,StartLevel:void 0,RegisteredServices:a.RegisteredServices,ServicesInUse:a.ServicesInUse};a.Headers["Bundle-Name"]&&(d.Name=a.Headers["Bundle-Name"].Value),b[a.Identifier]=d}),b},b.prototype.getServices=function(){var b={},c=this.jolokia.request({type:"exec",mbean:a.getSelectionServiceMBean(this.workspace),operation:"listServices()"},onSuccess(null)),d=c.value;return angular.forEach(d,function(a,c){b[a.Identifier]=a}),b},b.prototype.getPackages=function(){var b={};return this.jolokia.request({type:"exec",mbean:a.getSelectionPackageMBean(this.workspace),operation:"listPackages()"},onSuccess(null)).value.values.forEach(function(a){b[a.Name+"-"+a.Version]=a}),b},b}();a.OsgiDataService=b}(Osgi||(Osgi={}));var Osgi;!function(a){var b=function(){function a(a,b,c,d,e,f){this.filteredBundles={},this.bundles=null,this.services=null,this.packages=null,this.PREFIX_BUNDLE="Bundle-",this.PREFIX_SVC="Service-",this.PREFIX_PKG="Package-",this.osgiDataService=a,this.bundleFilter=b,this.packageFilter=c,this.showServices=d,this.showPackages=e,this.hideUnused=f,this.graphBuilder=new ForceGraph.GraphBuilder}return a.prototype.getBundles=function(){return null==this.bundles&&(this.bundles=this.osgiDataService.getBundles()),this.bundles},a.prototype.getServices=function(){return null==this.services&&(this.services=this.osgiDataService.getServices()),this.services},a.prototype.getPackages=function(){return null==this.packages&&(this.packages=this.osgiDataService.getPackages()),this.packages},a.prototype.bundleNodeId=function(a){return this.PREFIX_BUNDLE+a.Identifier},a.prototype.serviceNodeId=function(a){return this.PREFIX_SVC+a.Identifier},a.prototype.pkgNodeId=function(a){return this.PREFIX_PKG+a.Name+"-"+a.Version},a.prototype.buildSvcNode=function(a){return{id:this.serviceNodeId(a),name:""+a.Identifier,type:"service",used:!1,popup:{title:"Service ["+a.Identifier+"]",content:function(){var b="";return null!=a&&a.objectClass.forEach(function(a){b.length>0&&(b+="<br/>"),b+=a}),b}}}},a.prototype.buildBundleNode=function(a){return{id:this.bundleNodeId(a),name:a.SymbolicName,type:"bundle",used:!1,navUrl:"#/osgi/bundle/"+a.Identifier,popup:{title:"Bundle ["+a.Identifier+"]",content:"<p>"+a.SymbolicName+"<br/>Version "+a.Version+"</p>"}}},a.prototype.buildPackageNode=function(a){return{id:this.pkgNodeId(a),name:a.Name,type:"package",used:!1,popup:{title:"Package ["+a.Name+"]",content:"<p>"+a.Version+"</p>"}}},a.prototype.exportingBundle=function(a){var b=this,c=null;return a.ExportingBundles.forEach(function(a){null!=b.filteredBundles[b.PREFIX_BUNDLE+a]&&(c=a)}),c},a.prototype.addFilteredBundles=function(){var a=this;d3.values(this.getBundles()).forEach(function(b){if(null==a.bundleFilter||""==a.bundleFilter||b.SymbolicName.startsWith(a.bundleFilter)){var c=a.buildBundleNode(b);if(a.filteredBundles[c.id]=b,c.used=!0,a.graphBuilder.addNode(c),a.showServices){var d=a.getServices();b.RegisteredServices.forEach(function(b){if(d[b]){var e=a.buildSvcNode(d[b]);a.graphBuilder.addNode(e),a.graphBuilder.addLink(c.id,e.id,"registered")}})}}})},a.prototype.addFilteredServices=function(){var a=this;this.showServices&&d3.values(this.getBundles()).forEach(function(b){b.ServicesInUse.forEach(function(c){var d=a.PREFIX_SVC+c;if(null!=a.graphBuilder.getNode(d)){a.graphBuilder.getNode(d).used=!0;var e=a.graphBuilder.getNode(a.bundleNodeId(b))||a.buildBundleNode(b);e.used=!0,a.graphBuilder.addNode(e),a.graphBuilder.addLink(d,e.id,"inuse")}})})},a.prototype.addFilteredPackages=function(){var a=this;this.showPackages&&d3.values(this.getPackages()).forEach(function(b){if(null==a.packageFilter||""==a.packageFilter||b.Name.startsWith(a.packageFilter)){var c=a.exportingBundle(b);if(null!=c){var d=a.graphBuilder.getNode(a.PREFIX_BUNDLE+c);d.used=!0;var e=a.buildPackageNode(b);a.graphBuilder.addNode(e),a.graphBuilder.addLink(d.id,e.id,"registered"),b.ImportingBundles.forEach(function(b){var c=a.graphBuilder.getNode(a.PREFIX_BUNDLE+b)||a.buildBundleNode(a.getBundles()[b]);c.used=!0,e.used=!0,a.graphBuilder.addNode(c),a.graphBuilder.addLink(c.id,e.id,"inuse")})}}})},a.prototype.buildGraph=function(){var a=this;return this.addFilteredBundles(),this.addFilteredServices(),this.addFilteredPackages(),this.hideUnused&&(this.graphBuilder.filterNodes(function(a){return a.used}),this.graphBuilder.filterNodes(function(b){return a.graphBuilder.hasLinks(b.id)})),this.graphBuilder.buildGraph()},a}();a.OsgiGraphBuilder=b}(Osgi||(Osgi={}));var Osgi;!function(a){a.TopLevelController=a._module.controller("Osgi.TopLevelController",["$scope","workspace",function(b,c){b.frameworkMBean=a.getSelectionFrameworkMBean(c),b.bundleMBean=a.getSelectionBundleMBean(c),b.serviceMBean=a.getSelectionServiceMBean(c),b.packageMBean=a.getSelectionPackageMBean(c),b.configAdminMBean=a.getSelectionConfigAdminMBean(c),b.metaTypeMBean=a.getMetaTypeMBean(c),b.osgiToolsMBean=a.getHawtioOSGiToolsMBean(c),b.hawtioConfigAdminMBean=a.getHawtioConfigAdminMBean(c),b.scrMBean=Karaf.getSelectionScrMBean(c),b.featuresMBean=Karaf.getSelectionFeaturesMBean(c)}])}(Osgi||(Osgi={}));var Osgi;!function(a){a._module.controller("Osgi.PackageController",["$scope","$filter","workspace","$routeParams",function(b,c,d,e){function f(c){var e=a.defaultPackageValues(d,b,c.value);b.row=e.filter({Name:b.package,Version:b.version})[0],Core.$apply(b)}function g(){var b=a.getSelectionPackageMBean(d);if(b){d.jolokia.request({type:"exec",mbean:b,operation:"listPackages"},onSuccess(f))}}b.package=e.package,b.version=e.version,g()}])}(Osgi||(Osgi={}));var Osgi;!function(a){a.PackagesController=a._module.controller("Osgi.PackagesController",["$scope","$filter","$element","workspace","$templateCache","$compile",function(b,c,d,e,f,g){function h(c){i(a.defaultPackageValues(e,b,c.value))}function i(c){var d={},f=function(a){angular.forEach(a.value,function(a,b){var c={Identifier:a.Identifier,Name:"",SymbolicName:a.SymbolicName,State:a.State,Version:a.Version,LastModified:a.LastModified,Location:a.Location};a.Headers["Bundle-Name"]&&(c.Name=a.Headers["Bundle-Name"].Value),d[c.Identifier]=c}),angular.forEach(c,function(a,b){angular.forEach(a.ExportingBundles,function(b,c){a.ExportingBundles[c]=d[b]}),angular.forEach(a.ImportingBundles,function(b,c){a.ImportingBundles[c]=d[b]})}),k||(b.widget.populateTable(c),Core.$apply(b))};e.jolokia.request({type:"exec",mbean:a.getSelectionBundleMBean(e),operation:"listBundles()"},{success:f,error:f})}function j(){var b=a.getSelectionPackageMBean(e);if(b){e.jolokia.request({type:"exec",mbean:b,operation:"listPackages"},onSuccess(h))}}var k=(c("date"),!1);d.on("$destroy",function(){k=!0}),b.widget=new DataTable.TableWidget(b,f,g,[{mDataProp:null,sClass:"control center",sDefaultContent:'<i class="icon-plus"></i>'},{mDataProp:"Name"},{mDataProp:"VersionLink"},{mDataProp:"RemovalPending"}],{rowDetailTemplateId:"packageBundlesTemplate",disableAddColumns:!0}),b.$watch("workspace.selection",function(){j()})}])}(Osgi||(Osgi={}));var Osgi;!function(a){a._module.controller("Osgi.PidController",["$scope","$timeout","$routeParams","$location","workspace","jolokia",function(b,c,d,e,f,g){function h(c,d,f){var h=function(c){if(Core.notification("success","Successfully updated pid: "+d),d&&b.factoryPid&&b.newPid){var f=a.createConfigPidPath(b,d);e.path(f)}else b.setEditMode(!1),b.canSave=!1,b.saved=!0},j=onSuccess(h,i("Failed to update: "+d));if(b.inFabricProfile)g.execute(Fabric.managerMBean,"setProfileProperties",b.versionId,b.profileId,d,f,j);else{var k=JSON.stringify(f);b.jolokia.execute(c,"configAdminUpdate",d,k,j)}}function i(a){return{error:function(b){Core.notification("error",a+"\n"+b.error||b),Core.defaultJolokiaErrorHandler(b)}}}function j(){b.editMode&&(b.canSave=!0)}function k(a){function c(a){angular.forEach(a,function(a,b){var c=d[b];c&&(c.Value=a)}),l(),Core.$apply(b)}b.modelLoaded=!0;var d=a||{};b.configValues=d,b.zkPid=Core.pathGet(d,["fabric.zookeeper.pid","Value"]),b.zkPid&&b.saved?g.execute(Fabric.managerMBean,"getProfileProperties",b.versionId,b.profileId,b.zkPid,onSuccess(c)):l()}function l(){n();var c=b.configValues;if(c)if(b.profileNotRunning&&b.profileMetadataMBean&&b.versionId&&b.profileId){var d=b.factoryPid||b.pid;g.execute(b.profileMetadataMBean,"getPidMetaTypeObject",b.versionId,b.profileId,d,onSuccess(m))}else{var e=null,d=null,f=c["service.factoryPid"];f&&!d&&(d=f.Value);var h=a.getMetaTypeMBean(b.workspace);h&&b.jolokia.execute(h,"getPidMetaTypeObject",d,e,onSuccess(m))}Core.$apply(b)}function m(a){b.metaType=a,n(),Core.$apply(b)}function n(){var c={},d=[];b.defaultValues={};var e={type:"object",required:d,properties:c},f="span12",g="control-label",h=g,i=b.metaType;if(i){var j=a.configuration.pidMetadata,k=i.id;e.id=k,e.name=Core.pathGet(j,[k,"name"])||i.name,e.description=Core.pathGet(j,[k,"description"])||i.description;var l=Core.pathGet(j,[k,"schemaExtensions","disableHumanizeLabel"]);angular.forEach(i.attributes,function(a){var e=a.id;if(p(e)){var i=q(e,k),j=s(a.typeName,a.id),m={title:a.name,tooltip:a.description,"input-attributes":{class:f},"label-attributes":{class:g},type:j};l&&(m.title=e),"char"===a.typeName&&(m.maxLength=1,m.minLength=1),a.cardinality&&(m["input-attributes"].class=null,m.type="array",m.items={"input-attributes":{class:""},"label-attributes":{class:h},type:j}),a.required&&d.push(e);var n=a.defaultValue;n&&(angular.isArray(n)&&1===n.length&&(n=n[0]),b.defaultValues[i]=n);var o=a.optionLabels,r=a.optionValues;if(o&&o.length&&r&&r.length){for(var t={},u=0;u<o.length;u++){var v=o[u];t[r[u]]=v}b.selectValues[i]=t,Core.pathSet(m,["input-element"],"select"),Core.pathSet(m,["input-attributes","ng-options"],"key as value for (key, value) in selectValues."+i)}c[i]=m}});var m=Core.pathGet(a.configuration.pidMetadata,[k,"schemaExtensions"]);m&&o(e,m)}var n={};angular.forEach(b.configValues,function(a,b){if(p(b)){var d=q(b,k),e=a,h="string";angular.isObject(a)&&(e=a.Value,h=s(a.Type,b));var i=c[d];if(i){"array"===i.type&&(angular.isArray(e)||(e=e?e.split(","):[]))}else i={"input-attributes":{class:f},"label-attributes":{class:g},type:h},c[d]=i,"org.osgi.service.http.port"==b&&(c[d]["input-attributes"].disabled="disabled",c[d]["input-attributes"].title="Changing port of OSGi http service is not possible from Hawtio");l&&(i.title=b),d=d.replace(/-/g,"_"),n[d]=e}}),angular.forEach(b.defaultValues,function(a,b){var c=n[b];angular.isDefined(c)||(n[b]=a)}),b.entity=n,b.schema=e,b.fullSchema=e}function o(a,b){angular.isObject(a)&&angular.isObject(b)&&angular.forEach(b,function(b,c){if(angular.isObject(b)){var d=a[c];d||(d={},a[c]=d),o(d,b)}else a[c]=b})}function p(a){return a&&x.indexOf(a)<0}function q(a,b){return a.replace(/\./g,"__")}function r(a,b){return a.replace(/__/g,".")}function s(a,b){if(a){var c=a.toLowerCase();return c.startsWith("int")||"long"===c||"short"===c||"byte"===c||c.endsWith("int")?"integer":"double"===c||"float"===c||"bigdecimal"===c?"number":"string"===c?b&&b.endsWith("password")?"password":"string":a}return"string"}function t(a){b.modelLoaded=!0;var c={};b.configValues=c,angular.forEach(a,function(a,b){var d=b.replace(/:/g,"_").replace(/\//g,"_");c[d]={Key:d,Value:a}}),b.zkPid=Core.pathGet(c,["fabric.zookeeper.pid","Value"]),l(),Core.$apply(b)}function u(){b.modelLoaded=!1,b.inFabricProfile||b.profileNotRunning?g.execute(Fabric.managerMBean,"getOverlayProfileProperties",b.versionId,b.profileId,b.pid,onSuccess(t)):a.getConfigurationProperties(b.workspace,b.jolokia,b.pid,k)}if(b.deletePropDialog=new UI.Dialog,b.deletePidDialog=new UI.Dialog,b.addPropertyDialog=new UI.Dialog,b.factoryPid=d.factoryPid,b.pid=d.pid,b.createForm={pidInstanceName:null},b.newPid=b.factoryPid&&!b.pid,b.newPid&&(b.editMode=!0),b.pid&&!b.factoryPid){var v=b.pid.indexOf("-");v>0&&(b.factoryPid=b.pid.substring(0,v),b.factoryInstanceName=b.pid.substring(v+1,b.pid.length))}b.selectValues={},b.modelLoaded=!1,b.canSave=!1,b.setEditMode=function(a){b.editMode=a,b.formMode=a?"edit":"view",a&&b.entity||(b.entity={},u())};var w=b.factoryPid&&!d.pid;b.setEditMode(w),b.$on("hawtio.form.modelChange",function(){b.modelLoaded&&(j(),Core.$apply(b))}),a.initProfileScope(b,d,e,localStorage,g,f,function(){u()}),b.pidSave=function(){var c={};angular.forEach(b.entity,function(a,d){var e=void 0;angular.isString(a)?e=a:angular.isDefined(a)&&(e=a.toString()),angular.isDefined(e)&&(c[r(d,b.pid)]=e)});var d=a.getHawtioConfigAdminMBean(f);if(d||b.inFabricProfile){var e=a.getSelectionConfigAdminMBean(b.workspace),g=b.pid,j=b.zkPid,k=b.factoryPid;if(!b.inFabricProfile&&k&&e&&!j)b.jolokia.execute(e,"createFactoryConfiguration",k,onSuccess(function(a){(g=a)&&h(d,g,c)},i("Failed to create new PID: ")));else{if(b.newPid){var l=b.createForm.pidInstanceName;if(!l||!k)return;g=k+"-"+l}else j&&(g=j);h(d,g,c)}}},b.addPropertyConfirmed=function(a,c){b.addPropertyDialog.close(),b.configValues[a]={Key:a,Value:c,Type:"String"},j(),n()},b.deletePidProp=function(a){b.deleteKey=a.Key,b.deletePropDialog.open()},b.deletePidPropConfirmed=function(){b.deletePropDialog.close(),document.getElementById("pid."+b.deleteKey).parentElement.remove(),j()},b.deletePidConfirmed=function(){function c(a){Core.notification("error",a.error)}function d(a){Core.notification("success","Successfully deleted pid: "+b.pid),e.path(b.configurationsLink)}if(b.deletePidDialog.close(),b.inFabricProfile){if(b.pid){var f=b.pid+".properties";g.execute(Fabric.managerMBean,"deleteConfigurationFile",b.versionId,b.profileId,f,onSuccess(d,{error:c}))}}else{var h=a.getSelectionConfigAdminMBean(b.workspace);h&&b.jolokia.request({type:"exec",mbean:h,operation:"delete",arguments:[b.pid]},{error:c,success:d})}};var x=["service.pid","service.factoryPid","fabric.zookeeper.pid"]}])}(Osgi||(Osgi={}));var Osgi;!function(a){a.ServiceController=a._module.controller("Osgi.ServiceController",["$scope","$filter","$element","workspace","$templateCache","$compile",function(b,c,d,e,f,g){function h(c){var d={},f=function(a){angular.forEach(a.value,function(a,b){var c={Identifier:a.Identifier,Name:"",SymbolicName:a.SymbolicName,State:a.State,Version:a.Version,LastModified:a.LastModified,Location:a.Location};a.Headers["Bundle-Name"]&&(c.Name=a.Headers["Bundle-Name"].Value),d[c.Identifier]=c}),angular.forEach(c,function(a,b){angular.forEach(a.UsingBundles,function(b,c){a.UsingBundles[c]=d[b]})}),i||(b.widget.populateTable(c),Core.$apply(b))};e.jolokia.request({type:"exec",mbean:a.getSelectionBundleMBean(e),operation:"listBundles()"},{success:f,error:f})}var i=(c("date"),!1);d.on("$destroy",function(){i=!0}),b.widget=new DataTable.TableWidget(b,f,g,[{mDataProp:null,sClass:"control center",sDefaultContent:'<i class="icon-plus"></i>'},{mDataProp:"Identifier"},{mDataProp:"BundleIdentifier",sType:"num-html"},{mDataProp:"objectClass"}],{rowDetailTemplateId:"osgiServiceTemplate",disableAddColumns:!0}),b.$watch("workspace.selection",function(){var b=a.getSelectionServiceMBean(e);if(b){e.jolokia.request({type:"exec",mbean:b,operation:"listServices()"},onSuccess(j))}});var j=function(c){h(a.defaultServiceValues(e,b,c.value))}}])}(Osgi||(Osgi={}));var Osgi;!function(a){a._module.controller("Osgi.ServiceDependencyController",["$scope","$location","$routeParams","workspace","osgiDataService",function(b,c,d,e,f){b.init=function(){d.bundleFilter?b.bundleFilter=d.bundleFilter:b.bundleFilter="",d.pkgFilter?b.packageFilter=d.pkgFilter:b.packageFilter="","packages"==d.view?b.selectView="packages":b.selectView="services",d.hideUnused?b.hideUnused="true"==d.hideUnused:b.hideUnused=!0},b.updateLink=function(){var a=c.search;b.bundleFilter&&""!=b.bundleFilter?a.bundleFilter=b.bundleFilter:delete a.bundleFilter,b.packageFilter&&""!=b.packageFilter?a.pkgFilter=b.packageFilter:delete a.pkgFilter,a.view=b.selectView,b.hideUnused?a.hideUnused="true":a.hideUnused="false",c.search(a)},b.addToDashboardLink=function(){var a=angular.toJson(d),b=angular.toJson({size_x:2,size_y:2});return"#/dashboard/add?tab=dashboard&href="+encodeURIComponent("#/osgi/dependencies")+"&routeParams="+encodeURIComponent(a)+"&size="+encodeURIComponent(b)+"&title="+encodeURIComponent("OSGi dependencies")},b.$on("$routeUpdate",function(){var a=c.search;a.bundleFilter?b.bundleFilter=d.bundleFilter:b.bundleFilter="",a.pkgFilter?b.packageFilter=d.pkgFilter:b.packageFilter="","packages"==a.view?b.selectView="packages":b.selectView="services",a.hideUnused?b.hideUnused="true"==d.hideUnused:b.hideUnused=!0,b.updateLink(),b.updateGraph()}),b.updateGraph=function(){b.updateLink(),b.updatePkgFilter();var c=new a.OsgiGraphBuilder(f,b.bundleFilter,b.packageFilter,"services"==b.selectView,"packages"==b.selectView,b.hideUnused);b.graph=c.buildGraph(),Core.$apply(b)},b.updatePkgFilter=function(){null==b.packageFilter||""==b.packageFilter?(b.selectView="services",b.disablePkg=!0):b.disablePkg=!1},b.init(),b.updateGraph()}])}(Osgi||(Osgi={}));var Perspective;!function(a){var b="perspective";a._module=angular.module(b,["hawtioCore"]),a._module.config(["$routeProvider",function(a){a.when("/perspective/defaultPage",{templateUrl:"app/perspective/html/defaultPage.html"}).otherwise({redirectTo:function(a,b,c){return"/perspective/defaultPage"}})}]),a._module.run(["viewRegistry","layoutFull","locationChangeStartTasks",function(a,b,c){a.perspective=b}]),
hawtioPluginLoader.addModule(b)}(Perspective||(Perspective={}));var Perspective;!function(a){function b(b,c,d,e,f){var g=c.search(),h=a.defaultPage(c,e,f,d),i=Core.trimLeading(h,"#");i?(a.log.debug("Redirecting to default page: ",i," page params: ",g),c.url(i)):a.log.debug("No default page could be chosen")}a.DefaultPageController=b,a._module.controller("Perspective.DefaultPageController",["$scope","$location","localStorage","workspace","jolokia",b])}(Perspective||(Perspective={}));var Quartz;!function(a){function b(a){if(a)switch(a.toString().toLowerCase()){case"true":case"normal":return"green icon-play-circle";case"paused":return"orange icon-off"}return"orange icon-off"}function c(a){if(a)switch(a){case-1:return"ignore";case 0:return"smart";case 1:return"fire once now";case 2:return"do nothing"}return"unknown"}function d(a){return"<i class='icon-info-sign'> "+a+"</i>"}function e(a,b){var c=a.Started;return angular.isArray(b)?b.any(function(a){return c.startsWith(a)}):c.startsWith(b)}function f(a){return g(a)}function g(a){return Core.getMBeanTypeObjectName(a,"quartz","QuartzScheduler")}function h(a){return a.hasDomainAndProperties("quartz",{type:"QuartzScheduler"})}function i(b){var c=b.selection;return c&&c.domain===a.jmxDomain?c.entries.name:null}a.log=Logger.get("Quartz"),a.iconClass=b,a.misfireText=c,a.jobDataClassText=d,a.isState=e,a.isQuartzPluginEnabled=f,a.getQuartzMBean=g,a.isScheduler=h,a.getSelectedSchedulerName=i}(Quartz||(Quartz={}));var Quartz;!function(a){var b="quartz";a.jmxDomain="quartz",a._module=angular.module(b,["bootstrap","ngResource","hawtioCore"]),a._module.config(["$routeProvider",function(a){a.when("/quartz/scheduler",{templateUrl:"app/quartz/html/scheduler.html"}).when("/quartz/triggers",{templateUrl:"app/quartz/html/triggers.html"}).when("/quartz/jobs",{templateUrl:"app/quartz/html/jobs.html"})}]),a._module.filter("quartzIconClass",function(){return a.iconClass}),a._module.filter("quartzMisfire",function(){return a.misfireText}),a._module.filter("quartzJobDataClassText",function(){return a.jobDataClassText}),a._module.run(["$location","workspace","viewRegistry","layoutFull","helpRegistry",function(b,c,d,e,f){d.quartz="app/quartz/html/layoutQuartzTree.html",f.addUserDoc("quartz","app/quartz/doc/help.md",function(){return c.treeContainsDomainAndProperties(a.jmxDomain)}),c.topLevelTabs.push({id:"quartz",content:"Quartz",title:"Quartz Scheduler",isValid:function(b){return b.treeContainsDomainAndProperties(a.jmxDomain)},href:function(){return"#/quartz/scheduler"},isActive:function(a){return a.isTopTabActive("quartz")}})}]),hawtioPluginLoader.addModule(b)}(Quartz||(Quartz={}));var Quartz;!function(a){a._module.controller("Quartz.QuartzController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(a){var b=a.jobDataMap;if(!angular.isArray(b)&&angular.isObject(b)){var c="<table class='table table-striped'>";c+="<thead><th>Key</th><th>Value</th></thead>";var d=b,e=Object.keys(b).sort();angular.forEach(e,function(a){var b=d[a];c+="<tr><td>"+safeNull(a)+"</td><td>"+safeNull(b)+"</td></tr>"}),c+="</table>",a.detailHtml=c}}function g(a){Core.notification("error","Could not manually fire trigger "+a.request.arguments[1]+"/"+a.request.arguments[0]+" due to: "+a.error)}function h(a){Core.notification("success","Manually fired trigger "+a.request.arguments[1]+"/"+a.request.arguments[0])}function i(){function f(a){angular.forEach(a,function(a,b){var c=e.request({type:"read",mbean:a,attribute:["SchedulerName"]}),d=c.value.SchedulerName,f=new Folder(d);f.addClass="quartz-scheduler",f.typeName="quartzScheduler",f.domain=h,f.objectName=a,f.key=d,i.children.push(f)}),l.debug("Setitng up Quartz tree with nid "+c.search().nid);var f=c.search().nid;if(f){var g=i.children.filter(function(a){return a.key===f});l.debug("Found nid in tree "+g),g&&1===g.length&&k(g[0])}Core.$apply(b);var n=$("#quartztree");Jmx.enableTree(b,c,d,n,m,!0,function(a){k(a.data),Core.$apply(b)}),setTimeout(j,50)}l.debug("Reloading Quartz Tree");var g=a.getQuartzMBean(d),h="quartz",i=new Folder("Quartz Schedulers");i.addClass="quartz-folder",i.typeName="quartzSchedulers",i.domain=h,i.key="";var m=[i];g&&e.search("quartz:type=QuartzScheduler,*",onSuccess(f))}function j(){Jmx.updateTreeSelectionFromURLAndAutoSelect(c,$("#quartztree"),function(a){var b=a.getChildren();return b&&1===b.length?a=b[0]:a},!0)}function k(a){var d=a?a.objectName:null;if(l.debug("Selection is now: "+d),d){b.selectedSchedulerMBean=d,c.search("nid",a.key);var f=[{type:"read",mbean:b.selectedSchedulerMBean}];Core.unregister(e,b),Core.register(e,b,f,onSuccess(b.renderQuartz))}else Core.unregister(e,b),b.selectedSchedulerMBean=null,b.selectedScheduler=null,b.triggers=[],b.jobs=[],b.updatedTrigger={}}var l=Logger.get("Quartz");b.valueDetails=new UI.Dialog,b.selectedScheduler=null,b.selectedSchedulerMBean=null,b.triggers=[],b.jobs=[],b.misfireInstructions=[{id:"-1",title:"Ignore"},{id:"0",title:"Smart"},{id:"1",title:"Fire once now"},{id:"2",title:"Do nothing"}],b.updatedTrigger={},b.manualTrigger={},b.triggerSchema={properties:{cron:{description:"Cron expression",label:"Cron expression",tooltip:"Specify a cron expression for the trigger",type:"string",hidden:!1},repeatCount:{description:"Repeat count",tooltip:"Number of times to repeat. Use -1 for forever.",type:"integer",hidden:!1},repeatInterval:{description:"Repeat interval",tooltip:"Elapsed time in millis between triggering",type:"integer",hidden:!1},misfireInstruction:{description:"Misfire instruction",tooltip:"What to do when misfiring happens",type:"string",hidden:!1,"input-element":"select","input-attributes":{"ng-options":"mi.id as mi.title for mi in misfireInstructions"}}}},b.manualTriggerSchema={properties:{name:{type:"string"},group:{type:"string"},parameters:{tooltip:"Parameters if any (java.util.Map in JSON syntax)",type:"string"}}},b.gridOptions={selectedItems:[],data:"triggers",showFilter:!0,filterOptions:{filterText:""},showSelectionCheckbox:!1,enableRowClickSelection:!0,multiSelect:!1,primaryKeyFn:function(a,b){return a.group+"/"+a.name},columnDefs:[{field:"state",displayName:"State",cellTemplate:'<div class="ngCellText pagination-centered" title="{{row.entity.state}}"><i class="{{row.entity.state | quartzIconClass}}"></i></div>',width:56,minWidth:56,maxWidth:56,resizable:!1},{field:"group",displayName:"Group",resizable:!0,width:150},{field:"name",displayName:"Name",resizable:!0,width:150},{field:"type",displayName:"Type",resizable:!1,width:70},{field:"expression",displayName:"Expression",resizable:!0,width:180},{field:"misfireInstruction",displayName:"Misfire Instruction",cellTemplate:'<div class="ngCellText" title="{{row.entity.misfireInstruction}}">{{row.entity.misfireInstruction | quartzMisfire}}</div>',width:150},{field:"previousFireTime",displayName:"Previous Fire"},{field:"nextFireTime",displayName:"Next Fire"},{field:"finalFireTime",displayName:"Final Fire"}]},b.jobsGridOptions={selectedItems:[],data:"jobs",showFilter:!0,filterOptions:{filterText:""},showSelectionCheckbox:!1,enableRowClickSelection:!0,multiSelect:!1,primaryKeyFn:function(a,b){return a.group+"/"+a.name},columnDefs:[{field:"group",displayName:"Group",resizable:!0,width:150},{field:"name",displayName:"Name",resizable:!0,width:150},{field:"durability",displayName:"Durable",width:70,resizable:!1},{field:"shouldRecover",displayName:"Recover",width:70,resizable:!1},{field:"jobClass",displayName:"Job ClassName",width:350},{field:"description",displayName:"Description",resizable:!0}]},b.openJobDetailView=function(){1===b.jobsGridOptions.selectedItems.length&&b.valueDetails.open()},b.renderIcon=function(b){return a.iconClass(b)},b.renderQuartz=function(a){b.selectedSchedulerDetails=[],l.debug("Selected scheduler mbean "+b.selectedScheduler);var c=a.value;c&&(b.selectedScheduler=c,b.triggers=[],b.job=[],c.AllTriggers.forEach(function(a){var d=e.request({type:"exec",mbean:b.selectedSchedulerMBean,operation:"getTriggerState",arguments:[a.name,a.group]});a.state=d?d.value:"unknown",a.id=a.name+"/"+a.group;var f=c.AllJobDetails[a.jobName];if(f&&(f=f[a.group])){var g,h,i=f.jobDataMap||{};if(a.type=i.CamelQuartzTriggerType,a.type&&"cron"==a.type)a.expression=i.CamelQuartzTriggerCronExpression;else if(a.type&&"simple"==a.type)a.expression="every "+i.CamelQuartzTriggerSimpleRepeatInterval+" ms.",g=i.CamelQuartzTriggerSimpleRepeatCounter,h=i.CamelQuartzTriggerSimpleRepeatInterval,a.expression+=g>0?" ("+g+" times)":" (forever)",a.repeatCounter=g,a.repeatInterval=h;else{var j=i.CamelQuartzEndpoint;if(j){var k=Core.getQueryParameterValue(j,"cron");k&&(a.type="cron",k=k.replace(/\++/g," "),a.expression=k),g=Core.getQueryParameterValue(j,"trigger.repeatCount"),h=Core.getQueryParameterValue(j,"trigger.repeatInterval"),(g||h)&&(a.type="simple",a.expression="every "+h+" ms.",a.expression+=g&&g>0?" ("+g+" times)":" (forever)",a.repeatCounter=g,a.repeatInterval=h)}}}b.triggers.push(a)}),b.jobs=[],b.triggers.forEach(function(a){var d=c.AllJobDetails[a.jobName];d&&(d=d[a.group])&&(f(d),d.id=d.jobName+"/"+d.group,b.jobs.push(d))})),Core.$apply(b)},b.pauseScheduler=function(){b.selectedSchedulerMBean&&e.request({type:"exec",mbean:b.selectedSchedulerMBean,operation:"standby"},onSuccess(function(a){Core.notification("success","Paused scheduler "+b.selectedScheduler.SchedulerName)}))},b.startScheduler=function(){b.selectedSchedulerMBean&&e.request({type:"exec",mbean:b.selectedSchedulerMBean,operation:"start"},onSuccess(function(a){Core.notification("success","Started scheduler "+b.selectedScheduler.SchedulerName)}))},b.enableSampleStatistics=function(){b.selectedSchedulerMBean&&e.setAttribute(b.selectedSchedulerMBean,"SampledStatisticsEnabled",!0)},b.disableSampleStatistics=function(){b.selectedSchedulerMBean&&e.setAttribute(b.selectedSchedulerMBean,"SampledStatisticsEnabled",!1)},b.pauseTrigger=function(){if(1===b.gridOptions.selectedItems.length){var a=b.gridOptions.selectedItems[0].group,c=b.gridOptions.selectedItems[0].name;e.request({type:"exec",mbean:b.selectedSchedulerMBean,operation:"pauseTrigger",arguments:[c,a]},onSuccess(function(b){Core.notification("success","Paused trigger "+a+"/"+c)}))}},b.resumeTrigger=function(){if(1===b.gridOptions.selectedItems.length){var a=b.gridOptions.selectedItems[0].group,c=b.gridOptions.selectedItems[0].name;e.request({type:"exec",mbean:b.selectedSchedulerMBean,operation:"resumeTrigger",arguments:[c,a]},onSuccess(function(b){Core.notification("success","Resumed trigger "+a+"/"+c)}))}},b.onBeforeUpdateTrigger=function(){var a=b.gridOptions.selectedItems[0];a&&"cron"===a.type?(b.updatedTrigger.type="cron",b.updatedTrigger.cron=a.expression,b.updatedTrigger.repeatCount=null,b.updatedTrigger.repeatInterval=null,b.updatedTrigger.misfireInstruction=""+a.misfireInstruction,b.triggerSchema.properties.cron.hidden=!1,b.triggerSchema.properties.repeatCount.hidden=!0,b.triggerSchema.properties.repeatInterval.hidden=!0,b.showTriggerDialog=!0):a&&"simple"===a.type?(b.updatedTrigger.type="simple",b.updatedTrigger.cron=null,b.updatedTrigger.repeatCount=a.repeatCounter,b.updatedTrigger.repeatInterval=a.repeatInterval,b.updatedTrigger.misfireInstruction=""+a.misfireInstruction,b.triggerSchema.properties.cron.hidden=!0,b.triggerSchema.properties.repeatCount.hidden=!1,b.triggerSchema.properties.repeatInterval.hidden=!1,b.showTriggerDialog=!0):(b.updatedTrigger={},b.showTriggerDialog=!1)},b.onBeforeManualTrigger=function(){var a=b.gridOptions.selectedItems[0];a?(b.manualTrigger.name=a.jobName,b.manualTrigger.group=a.jobGroup,b.manualTrigger.parameters="{}",b.showManualTriggerDialog=!0):(b.manualTrigger={},b.showManualTriggerDialog=!1)},b.onUpdateTrigger=function(){var a=b.updatedTrigger.cron,c=b.updatedTrigger.repeatCount,d=b.updatedTrigger.repeatInterval,f=parseInt(b.updatedTrigger.misfireInstruction);b.updatedTrigger={};var g=b.gridOptions.selectedItems[0].group,h=b.gridOptions.selectedItems[0].name;a?(l.info("Updating trigger "+g+"/"+h+" with cron "+a),e.request({type:"exec",mbean:"hawtio:type=QuartzFacade",operation:"updateCronTrigger",arguments:[b.selectedSchedulerMBean,h,g,f,a,null]},onSuccess(function(a){Core.notification("success","Updated trigger "+g+"/"+h)}))):(c||d)&&(null==c&&(c=-1),null==d&&(d=1e3),l.info("Updating trigger "+g+"/"+h+" with interval "+d+" ms. for "+c+" times"),e.request({type:"exec",mbean:"hawtio:type=QuartzFacade",operation:"updateSimpleTrigger",arguments:[b.selectedSchedulerMBean,h,g,f,c,d]},onSuccess(function(a){Core.notification("success","Updated trigger "+g+"/"+h)})))},b.onManualTrigger=function(){var a=JSON.parse(b.manualTrigger.parameters),c=b.manualTrigger.group,d=b.manualTrigger.name;b.manualTrigger={},l.info("Mannually firing trigger "+c+"/"+d+" with parameters "+a),e.request({type:"exec",mbean:b.selectedSchedulerMBean,operation:"triggerJob",arguments:[d,c,a]},onSuccess(h,{error:g}))},b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(j,50)}),b.$on("jmxTreeUpdated",function(){i()}),i()}])}(Quartz||(Quartz={}));var RBAC;!function(a){function b(a,c){Core.isBlank(c.objectName)||(a[c.objectName]=c),c.children&&c.children.length>0&&c.children.forEach(function(c){b(a,c)})}function c(a){if(Core.isBlank(a))return a;var b=a.split(" "),c=[];return b.forEach(function(a){"can-invoke"===a&&"cant-invoke"===a||c.push(a)}),c.join(" ").trim()}function d(a,b){if(Core.isBlank(a))return b;var c=a.split(" ");return c.push(b),c.unique().join(" ").trim()}a.log=Logger.get("RBAC"),a.flattenMBeanTree=b,a.stripClasses=c,a.addClass=d}(RBAC||(RBAC={}));var RBAC;!function(a){var b=function(a){function b(b){a.call(this),this.deferred=b,this.ACLMBean=null}return __extends(b,a),b.prototype.initialize=function(b){this.ACLMBean=b,this.deferred.resolve(this.ACLMBean),a.prototype.execute.call(this)},b.prototype.getACLMBean=function(){return this.deferred,this.deferred.promise},b}(Core.TasksImpl);a.RBACTasksImpl=b,a.rbacTasks=null}(RBAC||(RBAC={}));var RBAC;!function(a){a.pluginName="hawtioRbac",a._module=angular.module(a.pluginName,["hawtioCore"]);var b="rbacTreePostprocessor";a._module.factory("rbacTasks",["postLoginTasks","jolokia","$q",function(b,c,d){return a.rbacTasks=new a.RBACTasksImpl(d.defer()),b.addTask("FetchJMXSecurityMBeans",function(){c.request({type:"search",mbean:"*:type=security,area=jmx,*"},onSuccess(function(b){var c=b.value,d="";if(0===c.length)return void a.log.info("Didn't discover any JMXSecurity mbeans, client-side role based access control is disabled");if(1===c.length)d=c.first();else if(c.length>1){var e=!1;c.forEach(function(a){e||a.has("HawtioDummy")||a.has("rank=")||(d=a,e=!0)})}a.log.info("Using mbean ",d," for client-side role based access control"),a.rbacTasks.initialize(d)}))}),a.rbacTasks}]),a._module.factory("rbacACLMBean",["rbacTasks",function(a){return a.getACLMBean()}]),a._module.run(["jolokia","jolokiaStatus","rbacTasks","preLogoutTasks","workspace","$rootScope",function(c,d,e,f,g,h){f.addTask("resetRBAC",function(){a.log.debug("Resetting RBAC tasks"),e.reset(),g.removeTreePostProcessors(b)}),e.addTask("JMXTreePostProcess",function(){g.addTreePostProcessor(function(b){e.getACLMBean().then(function(e){var f={};a.flattenMBeanTree(f,b);var i=[],j={};if(d.listMethod!=Core.LIST_WITH_RBAC){angular.forEach(f,function(a,b){if(!("canInvoke"in a)&&(i.push({type:"exec",mbean:e,operation:"canInvoke(java.lang.String)",arguments:[b]}),a.mbean&&a.mbean.op)){var c=a.mbean.op;a.mbean.opByString={};var d=[];angular.forEach(c,function(b,c){function e(b,c){var e=Core.operationToString(b,c.args);a.mbean.opByString[e]=c,d.push(e)}angular.isArray(b)?b.forEach(function(a){e(c,a)}):e(c,b)}),j[b]=d}}),i.push({type:"exec",mbean:e,operation:"canInvoke(java.util.Map)",arguments:[j]});var k=0,l=function(){(k+=1)>=i.length&&(g.redrawTree(),a.log.debug("Enriched workspace tree: ",b),Core.$apply(h))};c.request(i,onSuccess(function(b){var c=b.request.arguments[0];if(c&&angular.isString(c)){f[c].canInvoke=b.value;var d="cant-invoke";b.value&&(d="can-invoke"),f[c].addClass=a.stripClasses(f[c].addClass),f[c].addClass=a.addClass(f[c].addClass,d),l()}else{var e=b.value;angular.forEach(e,function(a,b){angular.forEach(a,function(a,c){f[b].mbean.opByString[c].canInvoke=a.CanInvoke})}),l()}},{error:function(a){l()}}))}else angular.forEach(f,function(b,c){var d="cant-invoke";b.mbean&&b.mbean.canInvoke&&(d="can-invoke"),f[c].addClass=a.stripClasses(f[c].addClass),f[c].addClass=a.addClass(f[c].addClass,d)})})},-1,b)})}]),hawtioPluginLoader.addModule(a.pluginName)}(RBAC||(RBAC={}));var RBAC;!function(a){function b(a,b,c){var g=d;return Core.isBlank(b)||(g=e),Core.isBlank(c)||(g=f),g}function c(a,b,c,g){var arguments=[];return a===d?arguments.push(b):a===e?(arguments.push(b),arguments.push(c)):a===f&&(arguments.push(b),arguments.push(c),arguments.push(g.split(",").map(function(a){return a.trim()}))),arguments}var d="canInvoke(java.lang.String)",e="canInvoke(java.lang.String,java.lang.String)",f="canInvoke(java.lang.String,java.lang.String,[Ljava.lang.String;)",g="hide";a.hawtioShow=a._module.directive("hawtioShow",["workspace",function(a){return{restrict:"A",replace:!1,link:function(d,e,f){function h(a,b){a?"inverse"===b&&e.css({display:"none"}):"remove"===b?e.css({display:"none"}):b===g&&e.css({visibility:"hidden"})}var i=f.objectName;i&&d.$watch(function(){var d=f.methodName,e=f.argumentTypes,j=f.mode||g,k=b(i,d,e),l=c(k,i,d,e);if(i=l[0],d=l[1],i){var m=Core.parseMBean(i),n=a.findMBeanWithProperties(m.domain,m.attributes);if(n){var o;o=d?a.hasInvokeRights(n,d):a.hasInvokeRights(n),h(o,j)}}})}}}])}(RBAC||(RBAC={}));var Runtime;!function(a){function b(a,b,c){a.isActive=function(a){var c=Core.trimLeading(a,"#");return b.path()===c},a.isValid=function(a){return a&&a.isValid(c)},a.breadcrumbs=[{content:"Overview",title:"Summary of Java process",isValid:function(a){return!0},href:"#/runtime/overview"},{content:"System Properties",title:"List system properties",isValid:function(a){return!0},href:"#/runtime/systemProperties"},{content:"Metrics",title:"JVM Flags",isValid:function(a){return!0},href:"#/runtime/metrics"}]}a.pluginName="runtime",a.log=Logger.get("Runtime"),a.contextPath="app/runtime",a.templatePath=a.contextPath+"/html/",a.runtimeMbean="java.lang:type=Runtime",a.osMbean="java.lang:type=OperatingSystem",a._module=angular.module(a.pluginName,["hawtioCore"]),a.configureScope=b}(Runtime||(Runtime={}));var Runtime;!function(a){function b(){return{selectedItems:[],data:"metrics",showFilter:!0,filterOptions:{filterText:""},showSelectionCheckbox:!1,enableRowClickSelection:!0,multiSelect:!1,primaryKeyFn:function(a,b){return a.index},columnDefs:[{field:"index",displayName:"#"},{field:"name",displayName:"Metric",resizable:!0},{field:"category",displayName:"Category",resizable:!0,cellTemplate:'<div class="ngCellText ng-binding" title="row.entity.category"><a href="{{row.entity.link}}">{{row.entity.category}}</a></div>'},{field:"value",displayName:"Value",resizable:!0,cellTemplate:'<div class="align-right ngCellText ng-binding" title="row.entity.value">{{row.entity.value}}</div>'},{field:"referenceValue",displayName:"",resizable:!0,cellTemplate:'<div class="align-right ngCellText ng-binding" title="row.entity.referenceValue">{{row.entity.referenceValue}}</div>'}]}}function c(a,b){function c(a){return b("number")(100*a,2)+"%"}function d(a){for(var b=""+a,c="",d=0;d<b.length;d++){var e=b.charAt(d);(b.length-d)%3==0&&(c+=" "),c+=e}return c}function e(a,b){var e=d(a);return e+=" (",e+=c(1*a/b),e+=")"}var f=[],g=1;if(a.operatingSystem){var h="jmx/attributes?nid=root-java.lang-OperatingSystem";f.push({index:g++,name:"File descriptors (open/max)",category:"OS",value:d(a.operatingSystem.OpenFileDescriptorCount),referenceValue:d(a.operatingSystem.MaxFileDescriptorCount),link:h}),f.push({index:g++,name:"System CPU load",category:"OS",value:c(a.operatingSystem.SystemCpuLoad),referenceValue:"",link:h}),f.push({index:g++,name:"Physical memory (free/total)",category:"OS",link:h,value:e(a.operatingSystem.FreePhysicalMemorySize,a.operatingSystem.TotalPhysicalMemorySize),referenceValue:d(a.operatingSystem.TotalPhysicalMemorySize)}),f.push({index:g++,name:"Swap memory space (free/total)",category:"OS",link:h,value:e(a.operatingSystem.FreeSwapSpaceSize,a.operatingSystem.TotalSwapSpaceSize),referenceValue:d(a.operatingSystem.TotalSwapSpaceSize)}),f.push({index:g++,name:"Process CPU (load/time)",category:"OS",link:h,value:c(a.operatingSystem.ProcessCpuLoad),referenceValue:Core.humanizeMilliseconds(a.operatingSystem.ProcessCpuTime/1e6)})}a.heapUsage&&f.push({index:g++,name:"Heap usage (used/max)",category:"Memory",link:"diagnostics/heap",value:e(a.heapUsage.used,a.heapUsage.max),referenceValue:d(a.heapUsage.max)}),a.threading&&f.push({index:g++,name:"Thread count (current/peak)",category:"Threads",link:"threads",value:a.threading.ThreadCount,referenceValue:a.threading.PeakThreadCount}),a.classLoading&&f.push({index:g++,name:"Classes loaded (current/peak)",category:"Code",link:"diagnostics/heap",value:d(a.classLoading.LoadedClassCount),referenceValue:d(a.classLoading.TotalLoadedClassCount)});for(var i in a.garbageCollectors){var j=a.garbageCollectors[i];f.push({index:g++,name:j.Name+" (collections/time)",category:"GC",link:"jmx/attributes?nid=root-java.lang-GarbageCollector",value:j.CollectionCount,referenceValue:d(j.CollectionTime)+" ms"})}return f}a._module.controller("Runtime.MetricsController",["$scope","jolokia","workspace","$filter",function(a,d,e,f){function g(b){var d=b.request.mbean,e=a.updaters[d];e&&e(b.value),(d="java.lang:type=Memory")&&(a.metrics=c(a,f),Core.$apply(a))}if(a.metricsTableConfig=b(),a.updaters={},a.garbageCollectors={},a.updaters["java.lang:type=Threading"]=function(b){a.threading=b},a.updaters["java.lang:type=OperatingSystem"]=function(b){a.operatingSystem=b},a.updaters["java.lang:type=ClassLoading"]=function(b){a.classLoading=b},e.tree){var h=e.tree.get("java.lang").map.GarbageCollector;if(h&&h.children)for(var i=0;i<h.children.length;i++){var j=h.children[i],k=j.domain+":type="+j.entries.type+",name="+j.entries.name;a.updaters[k]=function(b){a.garbageCollectors[b.Name]=b}}}a.updaters["java.lang:type=Memory"]=function(b){a.heapUsage=b.HeapMemoryUsage};var l=[];for(var m in a.updaters)l.push({type:"read",mbean:m,arguments:[]});Core.register(d,a,l,onSuccess(g))}])}(Runtime||(Runtime={}));var Runtime;!function(a){a._module.config(["$routeProvider",function(b){b.when("/runtime/overview",{templateUrl:a.templatePath+"overview.html"}).when("/runtime/systemProperties",{templateUrl:a.templatePath+"systemProperties.html"}).when("/runtime/metrics",{templateUrl:a.templatePath+"metrics.html"})}]),a._module.run(["workspace","viewRegistry","helpRegistry","layoutFull",function(b,c,d,e){c[a.pluginName]=a.templatePath+"layoutRuntime.html",d.addUserDoc("runtime","app/runtime/doc/help.md"),b.topLevelTabs.push({id:"runtime",content:"Runtime",title:"Java Runtime Process Information",isValid:function(a){return!0},href:function(){return"#/"+a.pluginName+"/overview"},isActive:function(b){return b.isLinkActive(a.pluginName)}})}]),hawtioPluginLoader.addModule(a.pluginName)}(Runtime||(Runtime={}));var Runtime;!function(a){a._module.controller("Runtime.NavController",["$scope","$location","workspace",function(b,c,d){a.configureScope(b,c,d)}])}(Runtime||(Runtime={}));var Runtime;!function(a){function b(a){var b="",c=a.SystemProperties["java.home"];if(c){var d=a.SystemProperties["file.separator"];b+=c+d+"bin"+d}return b+="java "}function c(a){var b="";for(var c in a.InputArguments)b+=d(a.InputArguments[c])+" ";return b}function d(a){return a.replace(/ /g,"\\ ")}a._module.controller("Runtime.OverviewController",["$scope","jolokia","workspace","$location",function(e,f,g,h){function i(f){var g=f.request.mbean;if(g===a.runtimeMbean){var h=f.value;e.runtime=h;var i=/(\d+)@(.+)/g,j=i.exec(h.Name);e.pid=j[1],e.host=j[2],e.javaPath=b(h),e.classPath=d(h.ClassPath),e.vmArgs=c(h),e.workingDirectory=h.SystemProperties["user.dir"],e.uptime=Core.humanizeMilliseconds(h.Uptime)}else g===a.osMbean&&(e.operatingSystem=f.value);Core.$apply(e)}a.configureScope(e,h,g),Core.register(f,e,[{type:"read",mbean:a.runtimeMbean,arguments:[]},{type:"read",mbean:a.osMbean,arguments:[]}],onSuccess(i))}])}(Runtime||(Runtime={}));var Runtime;!function(a){function b(){return{selectedItems:[],data:"systemProperties",showFilter:!0,filterOptions:{filterText:""},showSelectionCheckbox:!1,enableRowClickSelection:!0,multiSelect:!1,primaryKeyFn:function(a,b){return a.name},columnDefs:[{field:"name",displayName:"Property",resizable:!0,cellTemplate:'<div class="forceBreakLongLines hardWidthLimitM" zero-clipboard data-clipboard-text="{{row.entity.name}}">{{row.entity.name}}</div>'},{field:"value",displayName:"Value",resizable:!0,cellTemplate:'<div class="forceBreakLongLines hardWidthLimitM" zero-clipboard data-clipboard-text="{{row.entity.value}}">{{row.entity.value}}</div>'}]}}a._module.controller("Runtime.SystemPropertiesController",["$scope","jolokia","workspace",function(c,d,e){function f(a){var b=a.value;c.systemProperties=[];for(var d in b.SystemProperties)c.systemProperties.push({name:d,value:b.SystemProperties[d]});Core.$apply(c)}c.systemPropertiesTableConfig=b(),c.systemProperties=[],Core.register(d,c,{type:"read",mbean:a.runtimeMbean,arguments:[]},onSuccess(f))}])}(Runtime||(Runtime={}));var Service;!function(a){function b(a,b){if(!a||!b)return!1;var c=!1;return angular.forEach(a.services,function(a){b===a.id&&(c=!0)}),c}function c(a,b){var c=null;return a&&b&&angular.forEach(a.services,function(a){b===a.id&&(c=a)}),c}function d(a,b){var d=c(a,b);if(d){var e=d.portalIP,f=d.port,g="http://";if(e)return f?g+e+":"+f+"/":g+e}return""}a.pluginName="Service",a.log=Logger.get(a.pluginName),a.pollServices=!1,a.hasService=b,a.findService=c,a.serviceLink=d}(Service||(Service={}));var Service;!function(a){a._module=angular.module(a.pluginName,["hawtioCore"]),a._module.factory("ServiceRegistry",["$http","$rootScope","workspace",function(b,c,d){var e={name:"ServiceRegistry",services:[],fetch:function(a){},onSuccessfulPoll:function(b,d,f,g,h){ArrayHelpers.sync(e.services,d.items)&&(a.log.debug("Services updated: ",e.services),Core.$apply(c)),b()},onFailedPoll:function(b,c,d,e,f){a.log.debug("Failed poll, data: ",c," status: ",d),b()}};return e}]),a._module.run(["ServiceRegistry","$timeout","jolokia",function(b,c,d){b.go=PollHelpers.setupPolling(b,function(a){b.fetch(a)},2e3,c,d),b.go(),a.log.debug("Loaded")}]),hawtioPluginLoader.addModule(a.pluginName)}(Service||(Service={}));var Site;!function(a){var b="site";a._module=angular.module(b,["bootstrap","ngResource","ngGrid","datatable","hawtioCore","hawtio-ui"]),a._module.config(["$routeProvider",function(a){a.when("/site",{templateUrl:"app/site/html/index.html"}).when("/site/",{templateUrl:"app/site/html/index.html"}).when("/site/book/*page",{templateUrl:"app/site/html/book.html",reloadOnSearch:!1}).when("/site/*page",{templateUrl:"app/site/html/page.html"})}]),a._module.run(["$location","workspace","viewRegistry","layoutFull","helpRegistry",function(a,c,d,e,f){d[b]=e,c.topLevelTabs.push({id:"site",content:"Site",title:"View the documentation for Hawtio",isValid:function(a){return!1},href:function(){return"#/site"}})}]),hawtioPluginLoader.addModule(b)}(Site||(Site={}));var Site;!function(a){a._module.controller("Site.IndexController",["$scope","$location",function(a,b){a.slideInterval=5e3}])}(Site||(Site={}));var Site;!function(a){a._module.controller("Site.PageController",["$scope","$routeParams","$location","$compile","$http","fileExtensionTypeRegistry",function(a,b,c,d,e,f){function g(b,c,e,g){a.contents=b,a.html=b;var h=Wiki.fileFormat(a.pageId,f)||"markdown";"markdown"===h?a.html=b?marked(b):"":h&&h.startsWith("html")&&(a.html=b),d(a.html)(a),Core.$apply(a)}var h=Logger.get("Site"),i=b.page;i||(i="README.md"),!i.startsWith("/")&&i.indexOf(":/")<0&&i.indexOf("app/site/")<0&&(i="app/site/"+i),a.pageId=i,a.pageFolder=i.substring(0,i.lastIndexOf("/")+1),h.info("Loading page '"+a.pageId+"'"),a.getContents=function(b,c){var d=a.pageFolder+b;h.info("Loading the contents of: "+d),e.get(d).success(c).error(function(){return c(" ")})},e.get(a.pageId).success(g)}])}(Site||(Site={}));var Source;!function(a){function b(a){var b=a.mbeanTypesToDomain.LogQuery||{};return(b.hawtio||b["io.fabric8.insight"]||{}).objectName}function c(a,b){var c="#/source/index/"+a,d=[{href:c,name:"root"}];if(b){var e=b.split("/"),f="";angular.forEach(e,function(a){f+="/"+a;var b=c+f;a.isBlank()||d.push({href:b,name:a||"/",fileName:"/"+f})})}return d}a.log=Logger.get("Source"),a.getInsightMBean=b,a.createBreadcrumbLinks=c}(Source||(Source={}));var Source;!function(a){var b="source";a._module=angular.module(b,["bootstrap","ngResource","hawtioCore","wiki"]),a._module.config(["$routeProvider",function(a){a.when("/source/index/:mavenCoords",{templateUrl:"app/source/html/index.html"}).when("/source/index/:mavenCoords/*page",{templateUrl:"app/source/html/index.html"}).when("/source/view/:mavenCoords/class/:className/*page",{templateUrl:"app/source/html/source.html"}).when("/source/view/:mavenCoords/*page",{templateUrl:"app/source/html/source.html"}).when("/source/javadoc/:mavenCoords/*page",{templateUrl:"app/source/html/javadoc.html"})}]),a._module.run(["$location","workspace","viewRegistry","jolokia","localStorage","layoutFull","helpRegistry",function(a,b,c,d,e,f,g){c.source=f,g.addUserDoc("source","app/source/doc/help.md")}]),hawtioPluginLoader.addModule(b)}(Source||(Source={}));var Source;!function(a){a._module.controller("Source.IndexController",["$scope","$location","$routeParams","workspace","jolokia",function(b,c,d,e,f){function g(){b.sourceFiles=k?b.allSourceFiles.filter(function(a){return a&&a.startsWith(k)}).map(function(a){return a.substring(k.length+1)}).filter(function(a){return a}):b.allSourceFiles}function h(){b.breadcrumbs=a.createBreadcrumbLinks(b.mavenCoords,k),angular.forEach(b.breadcrumbs,function(a){a.active=!1}),b.breadcrumbs.last().active=!0}function i(a){b.allSourceFiles=a?a.split("\n").map(function(a){return a.trim()}).filter(function(a){return a}):[],g(),b.loadingMessage=null,Core.$apply(b)}function j(){if(b.mavenCoords){var c=a.getInsightMBean(e);a.log.debug("In update view, mbean: ",c),c&&f.execute(c,"getSource",b.mavenCoords,null,"/",{success:i,error:function(c){a.log.error("Failed to download the source code for the maven artifact: ",b.mavenCoords),a.log.info("Stack trace: ",c.stacktrace),b.loadingMessage="Could not download index, please see console for details",Core.$apply(b)}})}}b.pageId=Wiki.pageId(d,c),b.mavenCoords=d.mavenCoords;var k=b.pageId;"/"===k&&(k=void 0),b.loadingMessage="Loading source code from artifacts <b>"+b.mavenCoords+"</b>",h(),b.setFileName=function(a){k=Core.trimLeading(a.fileName,"/"),k=Core.trimLeading(k,"/"),console.log("selected fileName '"+k+"'"),h(),g()},b.$watch("workspace.tree",function(a,c){!b.git&&Git.getGitMBean(e)&&setTimeout(l,50)}),b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(l,50)}),b.sourceLinks=function(a){var c=a,d=null,e=a.lastIndexOf("/");e>0&&(c=a.substring(e+1),d=a.substring(0,e));var f="",g=k||"";return d&&angular.forEach(d.split("/"),function(a){g&&(g+="/"),g+=a,f+="<a href='#/source/index/"+b.mavenCoords+"/"+g+"'>"+a+"</a>/"}),f+="<a href='#/source/view/"+b.mavenCoords+"/"+g+"/"+c+"'>"+c+"</a>"};var l=Core.throttled(j,1e3);setTimeout(l,50)}])}(Source||(Source={}));var Source;!function(a){a._module.controller("Source.JavaDocController",["$scope","$location","$routeParams","workspace","fileExtensionTypeRegistry","jolokia",function(b,c,d,e,f,g){function h(a){if(b.source=a,b.loadingMessage=null,!a){var c=(new Date).getTime();(!b.lastErrorTime||c-b.lastErrorTime>3e3)&&(b.lastErrorTime=c,Core.notification("error","Could not download the source code for the maven artifacts: "+j))}Core.$apply(b)}function i(){var b=a.getInsightMBean(e);b&&g.execute(b,"getJavaDoc",j,k,onSuccess(h))}b.pageId=Wiki.pageId(d,c);var j=d.mavenCoords,k=b.pageId
;b.loadingMessage="Loading javadoc code for file <b>"+k+"</b> from artifacts <b>"+j+"</b>",b.breadcrumbs=[],b.$watch("workspace.tree",function(){!b.git&&Git.getGitMBean(e)&&setTimeout(i,50)}),b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(i,50)})}])}(Source||(Source={}));var Source;!function(a){a._module.controller("Source.SourceController",["$scope","$location","$routeParams","workspace","fileExtensionTypeRegistry","jolokia",function(b,c,d,e,f,g){function h(){var a=b.codeMirror;if(a&&k){var c=k-1,d=a.getLine(c),e=d?d.length:1e3,f={line:c,ch:0},g={line:c,ch:e};a.scrollIntoView(f),a.setCursor(f),a.setSelection(f,g),a.refresh(),a.focus()}}function i(c){c?(a.log.debug("Downloaded file for the maven artifact: "+l),b.source=c,b.loadingMessage=null):(b.source=null,b.loadingMessage="Cannot download file, please see logging console for details.",a.log.error("Failed to download the source code for the Maven artifact: ",l)),Core.$apply(b),setTimeout(h,100)}function j(){var c=a.getInsightMBean(e);c&&g.execute(c,"getSource",encodeURIComponent(l),m,n,{success:i,error:function(c){a.log.error("Failed to download the source code for the Maven artifact: ",l),a.log.info("Stack trace: ",c.stacktrace),b.loadingMessage="Cannot not download file, please see logging console for details.",Core.$apply(b)}})}b.pageId=Wiki.pageId(d,c),b.format=Wiki.fileFormat(b.pageId,f);var k=c.search().line||1,l=d.mavenCoords,m=d.className||"",n=b.pageId||"/",o=m.replace(/\./g,"/");b.loadingMessage="Loading source code for class <b>"+m+"</b> from artifacts <b>"+l+"</b>",b.breadcrumbs=[];var p=n.lastIndexOf("/"),q="/",r=n;p>0?(q=n.substring(0,p),r=n.substring(p+1)):m&&m.indexOf(".")>0&&(q=o,(p=q.lastIndexOf("/"))>0&&(r=q.substring(p+1),q=q.substring(0,p))),b.breadcrumbs=a.createBreadcrumbLinks(l,q),b.breadcrumbs.push({href:c.url(),name:r,active:!0}),b.javaDocLink=function(){var a=o;return!a&&n&&n.endsWith(".java")&&(a=n.substring(0,n.length-5)),a?"javadoc/"+encodeURIComponent(l)+"/"+a+".html":null},b.$watch("workspace.tree",function(a,c){!b.git&&Git.getGitMBean(e)&&setTimeout(s,50)}),b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(s,50)});var s=Core.throttled(j,1e3);setTimeout(s,50)}])}(Source||(Source={}));var SpringBoot;!function(a){var b="springBoot";a._module=angular.module(b,["bootstrap","ngResource","ui.bootstrap.dialog","hawtioCore"]),a._module.config(["$routeProvider",function(a){a.when("/springBoot/metrics",{templateUrl:"app/springBoot/html/metrics.html"}).when("/springBoot/beans",{templateUrl:"app/springBoot/html/beans.html"})}]),a._module.run(["$location","$http","workspace","viewRegistry","helpRegistry","jolokia",function(b,c,d,e,f,g){e.springBoot="app/springBoot/html/layoutSpringBootTabs.html",a.callIfSpringBootAppAvailable(g,function(){d.topLevelTabs.push({id:"springBoot",content:"Spring Boot",title:"Manage your Spring Boot application",isValid:function(a){return!0},href:function(){return"#/springBoot/metrics"},isActive:function(a){return a.isTopTabActive("springBoot")}})})}]),hawtioPluginLoader.addModule(b)}(SpringBoot||(SpringBoot={}));var SpringBoot;!function(a){function b(b,c){b.execute(a.metricsMBean,a.metricsMBeanOperation,onSuccess(function(a){c()}))}function c(a,b){var c,e=[];for(c in Object.keys(b)){var f=Object.keys(b)[c],g=d[f];e[c]=g?{code:f,name:g,value:b[f]}:{code:f,name:f,value:b[f]}}a.metrics=e,a.$apply()}a.metricsMBean="org.springframework.boot:type=Endpoint,name=metricsEndpoint",a.metricsMBeanOperation="getData()",a.callIfSpringBootAppAvailable=b;var d={"counter.status.200.favicon.ico":"Successful Favicon requests","counter.status.200.jolokia":"Successful Jolokia requests","counter.status.200.jolokia.exec.org.springframework.boot:type=Endpoint,name=metricsEndpoint.getData()":"Successful metrics Jolokia requests","counter.status.200.jolokia.read.java.lang:type=Runtime.Name":"Successful Jolokia Runtime.Name reads","counter.status.200.jolokia.root":"Successful Jolokia root requests","counter.status.200.jolokia.search.*:type=Connector,*":"Successful Jolokia connectors search queries","counter.status.200.metrics":"Successful metrics REST requests","counter.status.405.auth.login.root":"Method Not Allowed (405) login responses","gauge.response.auth.login.root":"Authentication time (ms)","gauge.response.jolokia":"Jolokia response time (ms)","gauge.response.jolokia.exec.org.springframework.boot:type=Endpoint,name=metricsEndpoint.getData()":"Metrics Jolokia response time (ms)","gauge.response.jolokia.root":"Jolokia root response time (ms)","gauge.response.metrics":"Metrics response time (ms)","gc.ps_marksweep.count":"Parallel scavenge mark-sweep collector count","gc.ps_marksweep.time":"Parallel scavenge mark-sweep collector time (ms)","gc.ps_scavenge.count":"Parallel scavenge collector count","gc.ps_scavenge.time":"Parallel scavenge collector time (ms)",mem:"Memory used (bytes)","mem.free":"Memory available (bytes)",processors:"Processors number",uptime:"Node uptime (ms)","instance.uptime":"Service uptime (ms)","heap.committed":"Heap committed (bytes)","heap.init":"Initial heap (bytes)","heap.used":"Heap used (bytes)",heap:"Total Heap (bytes)",classes:"Classes","classes.loaded":"Classes loaded","classes.unloaded":"Classes unloaded",threads:"Threads count","threads.daemon":"Daemon threads","threads.peak":"Threads peak count"};a.convertRawMetricsToUserFriendlyFormat=c}(SpringBoot||(SpringBoot={}));var SpringBoot;!function(a){a._module.controller("SpringBoot.BeansController",["$scope","jolokia",function(b,c){c.execute("org.springframework.boot:type=Endpoint,name=beansEndpoint",a.metricsMBeanOperation,onSuccess(function(a){b.beans=a[0].beans,b.$apply()},{error:function(){b.loadingError="Cannot read beans data.",b.$apply()}}))}])}(SpringBoot||(SpringBoot={}));var SpringBoot;!function(a){a._module.controller("SpringBoot.MetricsController",["$scope","jolokia",function(b,c){c.execute(a.metricsMBean,a.metricsMBeanOperation,onSuccess(function(c){a.convertRawMetricsToUserFriendlyFormat(b,c)},{error:function(){b.loadingError="Cannot read metrics data.",b.$apply()}})),b.metricsGridOptions={data:"metrics",showSelectionCheckbox:!1,sortInfo:{sortBy:"name",ascending:!0},columnDefs:[{field:"name",displayName:"Metric",cellTemplate:'<div class="ngCellText" hawtio-template-popover content="metricDetails" title="Metric details">{{row.entity.name}}</div>'},{field:"value",displayName:"Metric value"}]}}])}(SpringBoot||(SpringBoot={}));var SpringBatch;!function(a){function b(a){var b;return b=a.indexOf("\\")>=0?a.indexOf("\\"):a.indexOf(":"),a.substring(0,b)}function c(a){return a.substring(a.indexOf(":")+1,a.indexOf("/"))}function d(a){return a.indexOf("/")!=a.lastIndexOf("/")?a.substring(a.indexOf("/")+1,a.lastIndexOf("/")):""}function e(a,b,c){var d="";return d=a+"\\:"+b,c&&("/"!=c.charAt(0)?d=d+"/"+c:d+=c),"/"!=d.charAt(d.length-1)&&(d+="/"),d}a.getHost=b,a.getPort=c,a.getServerSuffix=d,a.getServerUrl=e}(SpringBatch||(SpringBatch={}));var SpringBatch;!function(a){a.templatePath="app/springbatch/html/",a.pluginName="SpringBatch",a._module=angular.module(a.pluginName,["bootstrap","ngResource","hawtioCore","hawtio-ui"]),a._module.config(["$routeProvider",function(b){b.when("/springbatch/servers",{templateUrl:a.templatePath+"serverList.html"}).when("/springbatch/jobs",{templateUrl:a.templatePath+"jobs.html"}).when("/springbatch/jobs/:jobName/executions",{templateUrl:a.templatePath+"overview.html"}).when("/springbatch/jobs/:jobName/executions/:jobInstanceId",{templateUrl:a.templatePath+"overview.html"}).when("/springbatch/jobs/executions",{templateUrl:a.templatePath+"jobsExecutionList.html"}).when("/springbatch/connect",{templateUrl:a.templatePath+"connectSpringBatch.html"}).when("/springbatch/jobs/:jobId/executions/:jobName/:jobExecutionId",{templateUrl:a.templatePath+"jobExecutionContext.html"}).when("/springbatch/jobs/:jobName/:jobId/history/executions",{templateUrl:a.templatePath+"executionHistory.html"}).when("/springbatch/jobs/:jobId/executions/:jobName/:jobExecutionId/steps/:stepExecutionId",{templateUrl:a.templatePath+"stepExecutionContext.html"}).when("/springbatch/jobs/:host/:port/:serverSuffix",{templateUrl:a.templatePath+"jobs.html"}).when("/springbatch/jobs/:host/:port",{templateUrl:a.templatePath+"jobs.html"})}]),a._module.run(["$location","workspace","viewRegistry","$rootScope","$resource",function(a,b,c,d,e){c.springbatch="app/springbatch/html/layoutSpringBatch.html",b.topLevelTabs.push({id:"springbatch",content:"SpringBatch",title:"View Spring-Batch jobs",isValid:function(a){return!1},href:function(){return"#/springbatch/servers"},isActive:function(a){return a.isTopTabActive("springbatch")}}),d.proxyUrl="/hawtio/proxy/",d.alert={enable:!1,content:"",type:"",hide:function(){this.enable=!1},show:function(){this.enable=!0}}}])}(SpringBatch||(SpringBatch={}));var SpringBatch;!function(a){a._module.controller("SpringBatch.ConnectSpringBatchController",["$scope","$routeParams","$location","workspace","$rootScope","$resource","$http",function(b,c,d,e,f,g,h){b.host="localhost",b.port=8080,b.connectSpringBatch=function(){b.selectedSpringBatchServer&&(f.springBatchServer=b.selectedSpringBatchServer,f.alert.content="Connected successfully.",f.alert.type="alert-success",f.alert.show())},b.addSpringBatchServerToGlobalList=function(){var c=a.getServerUrl(b.host,b.port,b.path);if(f.springBatchServerList.indexOf(b.selectedSpringBatchServer)>0)return f.alert.content="Server already in the list.",f.alert.type="alert-error",void f.alert.show();h.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",h.post("/hawtio/springBatch","server="+c).success(function(a){f.springBatchServerList.add(c),f.springBatchServer=b.selectedSpringBatchServer,f.alert.content="Server added.",f.alert.type="alert-success",f.alert.show()}).error(function(a){f.alert.content="Could not add server.",f.alert.type="alert-error",f.alert.show()})},b.removeServer=function(a){h.delete("/hawtio/springBatch?server="+encodeURIComponent(b.selectedSpringBatchServer)).success(function(a){b.springBatchServerList.splice(b.springBatchServerList.indexOf(b.selectedSpringBatchServer),1),f.alert.content="Server deleted.",f.alert.type="alert-info",f.alert.show()}).error(function(a){f.alert.content="Could not delete server.",f.alert.type="alert-error",f.alert.show()})},b.editServer=function(){b.host=a.getHost(b.selectedSpringBatchServer),b.port=parseInt(a.getPort(b.selectedSpringBatchServer)),b.path=a.getServerSuffix(b.selectedSpringBatchServer)},b.updateServer=function(){var c=a.getServerUrl(b.host,b.port,b.path),d=b.selectedSpringBatchServer;h.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",h.post("/hawtio/springBatch","server="+c+"&replaceServer="+d).success(function(a){f.springBatchServerList[f.springBatchServerList.indexOf(b.selectedSpringBatchServer)]=c,f.alert.content="Server updated.",f.alert.type="alert-success",f.alert.show()}).error(function(a){f.alert.content="Could not add server.",f.alert.type="alert-error",f.alert.show()})}}])}(SpringBatch||(SpringBatch={}));var SpringBatch;!function(a){a._module.controller("SpringBatch.ExecutionHistoryController",["$scope","$routeParams","$location","workspace","$resource","$rootScope",function(a,b,c,d,e,f){var g=f.springBatchServer;a.predicate="id",a.reverse=!1,e("/hawtio/proxy/"+g+"jobs/:jobName/executions.json").get({jobName:b.jobName},function(c){var d=new Array;for(var e in c.jobExecutions)c.jobExecutions[e].id=e,d.add(c.jobExecutions[e]);a.executionHistory=d,a.jobName=b.jobName,a.jobId=b.jobId})}])}(SpringBatch||(SpringBatch={}));var SpringBatch;!function(a){a._module.controller("SpringBatch.jobExecutionContextController",["$scope","$routeParams","$http","$rootScope",function(a,b,c,d){var e=d.springBatchServer,f="/hawtio",g=b.jobExecutionId,h=b.jobName,i=b.jobId;a.springBatchServer=e;c.get(f+"/contextFormatter?jobExecutionId="+g+"&server="+e+"&contextType=jobExecution").success(function(b){a.htmlView=b});a.jobId=i,a.jobName=h}])}(SpringBatch||(SpringBatch={}));var SpringBatch;!function(a){a._module.controller("SpringBatch.NavBarController",["$scope","$routeParams","$location","workspace",function(a,b,c,d){var e=[{uri:"servers",name:"Servers List"},{uri:"jobs/executions",name:"Jobs Execution List"},{uri:"connect",name:"Connect"}];a.subLevelTabs=e,a.isActive=function(a){return!1}}])}(SpringBatch||(SpringBatch={}));var SpringBatch;!function(a){a._module.controller("SpringBatch.JobOverviewExecListController",["$scope","$routeParams","$location","workspace","jolokia","$resource","$rootScope","$http",function(a,b,c,d,e,f,g,h){var i=g.springBatchServer,j=i+"jobs/:jobName",k=g.proxyUrl,l="/:jobInstanceId/executions.json",m="jobs/:jobName/:jobInstanceId",n=b.jobName;a.jobName=b.jobName;var o=null,p=f(k+j);a.springBatchServer=encodeURIComponent(i),a.executionPredicate="name",a.executionReverse=!1,a.stepPredicate="name",a.stepReverse=!1,a.fetchAllExecutions=function(b){if(void 0!=b){f(k+j+l).get({jobName:n,jobInstanceId:b.id},function(b){var c=new Array;for(var d in b.jobInstance.jobExecutions)b.jobInstance.jobExecutions[d].id=d,c.add(b.jobInstance.jobExecutions[d]);a.jobName=n,a.jobExecutionList=c})}},a.fetchParams=function(b,c,d){f(k+j+m).get({jobName:b,jobInstanceId:c+".json"},function(b){var c=new Array;if(d)for(var e in b.jobInstance.jobExecutions[d].jobParameters)c.add({name:e,value:b.jobInstance.jobExecutions[d].jobParameters[e]});else{for(var f in b.jobInstance.jobExecutions){for(var e in b.jobInstance.jobExecutions[f].jobParameters)c.add({name:e,value:b.jobInstance.jobExecutions[f].jobParameters[e]});break}a.jobParams=c}})},a.removeParam=function(a,b){a.splice(b,1)},a.addParam=function(a,b){a.add({name:"",value:""})},a.runJob=function(a,b){if(a&&b){var c=i.replace("\\",""),d=k+c+"jobs/"+a+".json";h.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var e="";for(var f in b)e=e+b[f].name+"="+b[f].value,f+1!=b.length&&(e+=",");e=encodeURIComponent(e),h.post(d,"jobParameters="+e).success(function(a){if(a.jobExecution)g.alert.content="Job started successfully.",g.alert.type="alert-success",g.alert.show();else if(a.errors){g.alert.content="";for(var b in a.errors)g.alert.content+=a.errors[b]+"\n",g.alert.type="alert-error",g.alert.show()}}).error(function(a){g.alert.content="Count not start the job",g.alert.type="alert-error",g.alert.show()})}},p.get({jobName:n+".json"},function(c){for(var d in c.job.jobInstances)c.job.jobInstances[d].id=d,o=c.job.jobInstances;if(void 0==b.jobInstanceId)for(var d in c.job.jobInstances){a.jobInstance=o[d];break}else o&&o[b.jobInstanceId]&&(a.jobInstance=o[b.jobInstanceId]);a.jobInstance?(a.fetchAllExecutions(a.jobInstance),a.fetchParams(n,a.jobInstance.id)):a.jobParams=new Array}),a.refreshJobInstance=function(b){f(k+j).get({jobName:n+".json"},function(c){for(var d in c.job.jobInstances)c.job.jobInstances[d].id=d;var e=null;if(b&&b.id)e=b.id,a.jobInstance=c.job.jobInstances[e],a.fetchAllExecutions(c.job.jobInstances[e]),a.fetchParams(n,e);else for(var d in c.job.jobInstances){a.jobInstance=c.job.jobInstances[d],a.fetchAllExecutions(c.job.jobInstances[d]),a.fetchParams(n,d);break}a.stepExecutionList=null})},a.fetchNextJobInstance=function(b){var c=null;f(k+j).get({jobName:n+".json"},function(d){for(var e in d.job.jobInstances){if(d.job.jobInstances[e].id=e,b&&b.id&&parseInt(e)>parseInt(b.id)){c=e;break}b&&b.id&&(c=b.id)}if(b)a.jobInstance=d.job.jobInstances[c];else for(var e in d.job.jobInstances){a.jobInstance=d.job.jobInstances[e];break}a.jobInstance&&(a.fetchAllExecutions(a.jobInstance),a.fetchParams(n,a.jobInstance.id)),a.stepExecutionList=null})},a.fetchPrevJobInstance=function(b){var c=null;f(k+j).get({jobName:n+".json"},function(d){for(var e in d.job.jobInstances)d.job.jobInstances[e].id=e,b&&b.id&&parseInt(e)<parseInt(b.id)&&(c=e);if(b)null==c&&b.id&&(c=b.id),a.jobInstance=d.job.jobInstances[c];else for(var e in d.job.jobInstances){a.jobInstance=d.job.jobInstances[e];break}a.jobInstance&&(a.fetchAllExecutions(a.jobInstance),a.fetchParams(n,a.jobInstance.id)),a.stepExecutionList=null})},a.fetchStepsForExecution=function(b){f(k+i+"jobs/executions/:executionId").get({executionId:b+".json"},function(c){var d=new Array;for(var e in c.jobExecution.stepExecutions)c.jobExecution.stepExecutions[e].name=e,d.add(c.jobExecution.stepExecutions[e]);a.executionId=b,a.stepExecutionList=d})}}])}(SpringBatch||(SpringBatch={}));var SpringBatch;!function(a){a._module.controller("SpringBatch.ServerListController",["$scope","$location","workspace","jolokia","$resource","$rootScope","$http",function(b,c,d,e,f,g,h){var i=[],j="";for(var k in g.springBatchServerList)j+="#/springbatch/jobs/",j+=a.getHost(g.springBatchServerList[k])+"/",j+=a.getPort(g.springBatchServerList[k]),a.getServerSuffix(g.springBatchServerList[k]).length>0&&(j+="/"+a.getServerSuffix(g.springBatchServerList[k])),i.add({href:j,hostname:a.getHost(g.springBatchServerList[k]),port:a.getPort(g.springBatchServerList[k])}),j="";b.serverList=i}])}(SpringBatch||(SpringBatch={}));var SpringBatch;!function(a){a._module.controller("SpringBatch.SpringBatchJobExecutionListController",["$scope","$resource","$rootScope",function(a,b,c){var d=c.springBatchServer;if(void 0==d)return c.alert.content="No Server selected. Please, use Connect or Server List screen to select one.",c.alert.type="alert-error",void c.alert.show();var e=d+"jobs",f=c.proxyUrl;a.predicate="name",a.reverse=!1,b(f+e+"/executions.json").get(function(b){var c=new Array;for(var d in b.jobExecutions)b.jobExecutions[d].id=d,c.add(b.jobExecutions[d]);a.jobExecutions=c})}])}(SpringBatch||(SpringBatch={}));var SpringBatch;!function(a){a._module.controller("SpringBatch.JobListController",["$scope","$location","workspace","jolokia","$resource","$rootScope","$http","$routeParams",function(a,b,c,d,e,f,g,h){var i=h.host,j=h.port,k=h.serverSuffix,l=i+"\\:"+j+"/";void 0!=k&&k.length>0&&(l+=k+"/"),f.springBatchServer=l;var m=f.springBatchServer+"jobs.json",n=f.proxyUrl;a.predicate="name",a.reverse=!1,a.getJobList=function(){e(n+m).get(function(b){if(b.jobs&&b.jobs.registrations){var c=new Array;for(var d in b.jobs.registrations)b.jobs.registrations[d].showLaunchForm=!1,b.jobs.registrations[d].launchParams="",c.add(b.jobs.registrations[d]);a.jobList=c}})},a.getJobList(),a.launchJob=function(b){var c;for(var d in a.jobList)a.jobList[d].name==b&&(c=a.jobList[d]);var e=c.launchParams;if(b&&e){var h=f.springBatchServer.replace("\\",""),i=n+h+"jobs/"+b+".json";g.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",e=encodeURIComponent(e),g.post(i,"jobParameters="+e).success(function(b){if(b.jobExecution)f.alert.content="Job started successfully.",f.alert.type="alert-success",f.alert.show(),a.getJobList();else if(b.errors){f.alert.content="";for(var c in b.errors)f.alert.content+=b.errors[c]+"\n",f.alert.type="alert-error",f.alert.show()}}).error(function(a){f.alert.content="Count not start the job",f.alert.type="alert-error",f.alert.show()})}}}])}(SpringBatch||(SpringBatch={}));var SpringBatch;!function(a){a._module.controller("SpringBatch.stepExecutionContextController",["$scope","$routeParams","$http","$rootScope",function(a,b,c,d){var e=d.springBatchServer,f="/hawtio",g=b.jobExecutionId,h=b.stepExecutionId,i=b.jobName,j=b.jobId;a.springBatchServer=e;c.get(f+"/contextFormatter?jobExecutionId="+g+"&stepExecutionId="+h+"&server="+e+"&contextType=stepExecution").success(function(b){a.htmlView=b});a.jobName=i,a.jobId=j}])}(SpringBatch||(SpringBatch={}));var Themes;!function(a){a._module.controller("Themes.PreferencesController",["$scope","localStorage","branding",function(b,c,d){b.availableThemes=a.getAvailableThemes(),b.availableBrandings=a.getAvailableBrandings(),Core.initPreferenceScope(b,c,{theme:{value:a.currentTheme,override:function(b,c){b!==c&&a.setTheme(b,d)}},branding:{value:a.currentBranding,override:function(b,c){b!==c&&a.setBranding(b,d)}}})}])}(Themes||(Themes={}));var Threads;!function(a){a.pluginName="threads",a.templatePath="app/threads/html/",a.log=Logger.get("Threads"),a.jmxDomain="java.lang",a.mbeanType="Threading",a.mbean=a.jmxDomain+":type="+a.mbeanType,a._module=angular.module(a.pluginName,["bootstrap","ngResource","hawtioCore","ui"]),a._module.config(["$routeProvider",function(b){b.when("/threads",{templateUrl:a.templatePath+"index.html"})}]),a._module.run(["$location","workspace","viewRegistry","layoutFull","helpRegistry",function(b,c,d,e,f){d.threads=e,f.addUserDoc("threads","app/threads/doc/help.md"),c.topLevelTabs.push({id:"threads",content:"Threads",title:"JVM Threads",isValid:function(b){return b.treeContainsDomainAndProperties(a.jmxDomain,{type:a.mbeanType})},href:function(){return"#/threads"},isActive:function(a){return a.isTopTabActive("threads")}})}]),hawtioPluginLoader.addModule(a.pluginName)}(Threads||(Threads={}));var Threads;!function(a){a._module.controller("Threads.ThreadsController",["$scope","$routeParams","$templateCache","jolokia",function(b,c,d,e){function f(c){a.log.info("Disabled contention monitoring: ",c),Core.$apply(b)}function g(c){b.$on("$routeChangeStart",function(){e.setAttribute(a.mbean,"ThreadContentionMonitoringEnabled",!1,onSuccess(f))}),a.log.info("Enabled contention monitoring"),Core.$apply(b)}function h(a){var c=angular.toJson(a.value,!0);if(b.getThreadInfoResponseJson!==c){b.getThreadInfoResponseJson=c;var d=a.value.exclude(function(a){return null===a});b.unfilteredThreads=d,b.totals={},d.forEach(function(a){var c=a.threadState;c in b.totals?b.totals[c]++:b.totals[c]=1}),d=b.filterThreads(b.stateFilter,d),b.threads=d,Core.$apply(b)}}b.selectedRowJson="",b.lastThreadJson="",b.getThreadInfoResponseJson="",b.threads=[],b.totals={},b.support={},b.row={},b.threadSelected=!1,b.selectedRowIndex=-1,b.stateFilter="NONE",b.showRaw={expanded:!1},b.addToDashboardLink=function(){var a=angular.toJson({size_x:8,size_y:2});return"#/dashboard/add?tab=dashboard&href="+encodeURIComponent("#/threads")+"&title="+encodeURIComponent("Threads")+"&size="+encodeURIComponent(a)},b.isInDashboardClass=function(){return angular.isDefined(b.inDashboard&&b.inDashboard)?"threads-dashboard":"threads logbar"},b.$watch("searchFilter",function(a,c){a!==c&&(b.threadGridOptions.filterOptions.filterText=a)}),b.$watch("stateFilter",function(a,c){a!==c&&("NONE"===b.stateFilter?b.threads=b.unfilteredThreads:b.threads=b.filterThreads(b.stateFilter,b.unfilteredThreads))}),b.threadGridOptions={selectedItems:[],data:"threads",showSelectionCheckbox:!1,enableRowClickSelection:!0,multiSelect:!1,primaryKeyFn:function(a,b){return a.threadId},filterOptions:{filterText:""},sortInfo:{sortBy:"threadId",ascending:!1},columnDefs:[{field:"threadId",displayName:"ID"},{field:"threadState",displayName:"State",cellTemplate:d.get("threadStateTemplate")},{field:"threadName",displayName:"Name"},{field:"waitedTime",displayName:"Waited Time",cellTemplate:'<div class="ngCellText" ng-show="row.entity.waitedTime > 0">{{row.entity.waitedTime | humanizeMs}}</div>'},{field:"blockedTime",displayName:"Blocked Time",cellTemplate:'<div class="ngCellText" ng-show="row.entity.blockedTime > 0">{{row.entity.blockedTime | humanizeMs}}</div>'},{field:"inNative",displayName:"Native",cellTemplate:'<div class="ngCellText"><span ng-show="row.entity.inNative" class="orange">(in native)</span></div>'},{field:"suspended",displayName:"Suspended",cellTemplate:'<div class="ngCellText"><span ng-show="row.entity.suspended" class="red">(suspended)</span></div>'}]},b.$watch("threadGridOptions.selectedItems",function(a,c){a!==c&&(0===a.length?(b.row={},b.threadSelected=!1,b.selectedRowIndex=-1):(b.row=a.first(),b.threadSelected=!0,b.selectedRowIndex=Core.pathGet(b,["hawtioSimpleTable","threads","rows"]).findIndex(function(a){return a.entity.threadId===b.row.threadId})),b.selectedRowJson=angular.toJson(b.row,!0))},!0),b.filterOn=function(a){b.stateFilter=a},b.filterThreads=function(b,c){return a.log.debug("Filtering threads by: ",b),"NONE"===b?c:c.filter(function(a){return a&&a.threadState===b})},b.selectedFilterClass=function(a){return a===b.stateFilter?"active":""},b.deselect=function(){b.threadGridOptions.selectedItems=[]},b.selectThreadById=function(a){b.threadGridOptions.selectedItems=b.threads.filter(function(b){return b.threadId===a})},b.selectThreadByIndex=function(a){var c=Core.pathGet(b,["hawtioSimpleTable","threads","rows"])[a];b.threadGridOptions.selectedItems=b.threads.filter(function(a){return a&&a.threadId==c.entity.threadId})},b.init=function(){e.request([{type:"read",mbean:a.mbean,attribute:"ThreadContentionMonitoringSupported"},{type:"read",mbean:a.mbean,attribute:"ObjectMonitorUsageSupported"},{type:"read",mbean:a.mbean,attribute:"SynchronizerUsageSupported"}],{method:"post",success:[function(c){b.support.threadContentionMonitoringSupported=c.value,a.log.debug("ThreadContentionMonitoringSupported: ",b.support.threadContentionMonitoringSupported),b.maybeRegister()},function(c){b.support.objectMonitorUsageSupported=c.value,a.log.debug("ObjectMonitorUsageSupported: ",b.support.objectMonitorUsageSupported),b.maybeRegister()},function(c){b.support.synchronizerUsageSupported=c.value,a.log.debug("SynchronizerUsageSupported: ",b.support.synchronizerUsageSupported),b.maybeRegister()}],error:function(b){a.log.error("Failed to query for supported usages: ",b.error)}})};var i=Core.throttled(b.init,500);b.maybeRegister=function(){"objectMonitorUsageSupported"in b.support&&"synchronizerUsageSupported"in b.support&&"threadContentionMonitoringSupported"in b.support&&(a.log.debug("Registering dumpAllThreads polling"),Core.register(e,b,{type:"exec",mbean:a.mbean,operation:"dumpAllThreads",arguments:[b.support.objectMonitorUsageSupported,b.support.synchronizerUsageSupported]},onSuccess(h)),b.support.threadContentionMonitoringSupported&&e.request({type:"read",mbean:a.mbean,attribute:"ThreadContentionMonitoringEnabled"},onSuccess(b.maybeEnableThreadContentionMonitoring)))},b.maybeEnableThreadContentionMonitoring=function(c){!1===c.value?(a.log.info("Thread contention monitoring not enabled, enabling"),e.setAttribute(a.mbean,"ThreadContentionMonitoringEnabled",!0,onSuccess(g))):a.log.info("Thread contention monitoring already enabled"),Core.$apply(b)},b.getMonitorClass=function(a,b){return b.toString()},b.getMonitorName=function(a){return a=a.replace("Supported",""),a.titleize()},i()}])}(Threads||(Threads={}));var Tomcat;!function(a){function b(a){return a&&(a=a.filter(function(a){return a.startsWith("Catalina")||a.startsWith("Tomcat")})),a}function c(a){if(a)switch(a.toString().toLowerCase()){case"1":case"started":return"green icon-play-circle";case"0":case"stopped":return"orange icon-off"}return angular.isNumber(a)&&"0"===a.toString()?"orange icon-off":"icon-question-sign"}function d(a){if(a){var b=new Date(a);return b.toLocaleDateString()+" "+b.toLocaleTimeString()}return""}function e(a){return-1!==a.toString().indexOf("Apache Tomcat/5")}function f(a){return-1!==a.toString().indexOf("Apache Tomcat/6")}a.filerTomcatOrCatalina=b,a.iconClass=c,a.millisToDateFormat=d,a.isTomcat5=e,a.isTomcat6=f}(Tomcat||(Tomcat={}));var Tomcat;!function(a){var b="tomcat";a._module=angular.module(b,["bootstrap","ngResource","ui.bootstrap.dialog","hawtioCore"]),a._module.config(["$routeProvider",function(a){a.when("/tomcat/server",{templateUrl:"app/tomcat/html/server.html"}).when("/tomcat/applications",{templateUrl:"app/tomcat/html/applications.html"}).when("/tomcat/connectors",{templateUrl:"app/tomcat/html/connectors.html"}).when("/tomcat/sessions",{templateUrl:"app/tomcat/html/sessions.html"})}]),a._module.filter("tomcatIconClass",function(){return a.iconClass}),a._module.run(["$location","workspace","viewRegistry","helpRegistry",function(a,b,c,d){c.tomcat="app/tomcat/html/layoutTomcatTabs.html",d.addUserDoc("tomcat","app/tomcat/doc/help.md",function(){return b.treeContainsDomainAndProperties("Tomcat")||b.treeContainsDomainAndProperties("Catalina")}),b.topLevelTabs.push({id:"tomcat",content:"Tomcat",title:"Manage your Tomcat container",isValid:function(a){return a.treeContainsDomainAndProperties("Tomcat")||a.treeContainsDomainAndProperties("Catalina")},href:function(){return"#/tomcat/applications"},isActive:function(a){return a.isTopTabActive("tomcat")}})}]),hawtioPluginLoader.addModule(b)}(Tomcat||(Tomcat={}));var Tomcat;!function(a){a._module.controller("Tomcat.ConnectorsController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(c){function d(a){var c=a.value;c&&(c.mbean=a.request.mbean,b.connectors.push(c),Core.$apply(b))}c=a.filerTomcatOrCatalina(c),b.connectors=[],b.selected.length=0,angular.forEach(c,function(a,b){var c=a;e.request({type:"read",mbean:c,attribute:["scheme","port","protocol","secure","connectionLinger","connectionTimeout","keepAliveTimeout","minSpareThreads","maxThreads","stateName"]},onSuccess(d))}),Core.$apply(b)}function g(){setTimeout(h,50)}function h(){console.log("Loading tomcat connector data..."),e.search("*:type=Connector,*",onSuccess(f))}var i='<div class="ngCellText pagination-centered" title="{{row.getProperty(col.field)}}"><i class="{{row.getProperty(col.field) | tomcatIconClass}}"></i></div>';b.connectors=[],b.selected=[];var j=[{field:"stateName",displayName:"State",cellTemplate:i,width:56,minWidth:56,maxWidth:56,resizable:!1},{field:"port",displayName:"Port",cellFilter:null,width:"*",resizable:!0},{field:"scheme",displayName:"Scheme",cellFilter:null,width:"*",resizable:!0},{field:"protocol",displayName:"Protocol",cellFilter:null,width:"*",resizable:!0},{field:"secure",displayName:"Secure",cellFilter:null,width:"*",resizable:!0},{field:"connectionLinger",displayName:"Connection Linger",cellFilter:null,width:"*",resizable:!0},{field:"connectionTimeout",displayName:"Connection Timeout",cellFilter:null,width:"*",resizable:!0},{field:"keepAliveTimeout",displayName:"Keep Alive Timeout",cellFilter:null,width:"*",resizable:!0},{field:"minSpareThreads",displayName:"Minimum Threads",cellFilter:null,width:"*",resizable:!0},{field:"maxThreads",displayName:"Maximum Threads",cellFilter:null,width:"*",resizable:!0}];b.gridOptions={data:"connectors",displayFooter:!0,selectedItems:b.selected,selectWithCheckboxOnly:!0,columnDefs:j,filterOptions:{filterText:""}},b.controlConnector=function(a){var c=b.selected.map(function(a){return a.mbean});angular.isArray(c)||(c=[c]),c.forEach(function(c){e.request({type:"exec",mbean:c,operation:a,arguments:null},onSuccess(b.onResponse,{error:b.onResponse}))})},b.stop=function(){b.controlConnector("stop")},b.start=function(){b.controlConnector("start")},b.destroy=function(){b.controlConnector("destroy")},b.onResponse=function(a){h()},b.$on("jmxTreeUpdated",g),b.$watch("workspace.tree",g)}])}(Tomcat||(Tomcat={}));var Tomcat;!function(a){a._module.controller("Tomcat.SessionsController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(c){function d(a){var c=a.value;if(c){c.mbean=a.request.mbean;var d=c.mbean;if(d){var e=d.toString().split(",")[1];e?-1!==e.toString().indexOf("path=")?c.path=e.toString().substr(5):c.path=e.toString().substr(9):c.path="",b.sessions.push(c),Core.$apply(b)}}}c=a.filerTomcatOrCatalina(c),b.sessions=[],angular.forEach(c,function(a,b){var c=a;e.request({type:"read",mbean:c},onSuccess(d))}),Core.$apply(b)}function g(){setTimeout(h,50)}function h(){console.log("Loading tomcat session data..."),e.search("*:type=Manager,*",onSuccess(f))}var i='<div class="ngCellText pagination-centered" title="{{row.getProperty(col.field)}}"><i class="{{row.getProperty(col.field) | tomcatIconClass}}"></i></div>';b.sessions=[],b.search="";var j=[{field:"stateName",displayName:"State",cellTemplate:i,width:56,minWidth:56,maxWidth:56,resizable:!1},{field:"path",displayName:"Context-Path",cellFilter:null,width:"*",resizable:!0},{field:"activeSessions",displayName:"Active Sessions",cellFilter:null,width:"*",resizable:!0},{field:"expiredSessions",displayName:"Expired Sessions",cellFilter:null,width:"*",resizable:!0},{field:"rejectedSessions",
displayName:"Rejected Sessions",cellFilter:null,width:"*",resizable:!0},{field:"maxActive",displayName:"Max Active Sessions",cellFilter:null,width:"*",resizable:!0},{field:"maxActiveSessions",displayName:"Max Active Sessions Allowed",cellFilter:null,width:"*",resizable:!0},{field:"maxInactiveInterval",displayName:"Max Inactive Interval",cellFilter:null,width:"*",resizable:!0},{field:"sessionCounter",displayName:"Session Counter",cellFilter:null,width:"*",resizable:!0},{field:"sessionCreateRate",displayName:"Session Create Rate",cellFilter:null,width:"*",resizable:!0},{field:"sessionExpireRate",displayName:"Session Expire Rate",cellFilter:null,width:"*",resizable:!0}];b.gridOptions={data:"sessions",displayFooter:!1,displaySelectionCheckbox:!1,canSelectRows:!1,columnDefs:j,filterOptions:{filterText:""}},b.$on("jmxTreeUpdated",g),b.$watch("workspace.tree",g)}])}(Tomcat||(Tomcat={}));var Tomcat;!function(a){a._module.controller("Tomcat.TomcatController",["$scope","$location","workspace","jolokia",function(b,c,d,e){function f(d){function f(d){var e=d.value;if(e){e.mbean=d.request.mbean;var f=e.mbean,g=Core.extractTargetUrl(c,b.httpScheme,b.httpPort);if(e.url=g+e.path,f){e.startTime=a.millisToDateFormat(e.startTime);var h=b.mbeanIndex[f];angular.isDefined(h)?b.webapps[f]=e:(b.mbeanIndex[f]=b.webapps.length,b.webapps.push(e)),Core.$apply(b)}}}d=a.filerTomcatOrCatalina(d),b.webapps=[],b.mbeanIndex={},b.selected.length=0,angular.forEach(d,function(c,d){var g=c;a.isTomcat5(b.tomcatServerVersion)?e.request({type:"read",mbean:g,attribute:["path","state","startTime"]},onSuccess(f)):a.isTomcat6(b.tomcatServerVersion)?e.request({type:"read",mbean:g,attribute:["path","stateName","startTime"]},onSuccess(f)):e.request({type:"read",mbean:g,attribute:["displayName","path","stateName","startTime"]},onSuccess(f))}),Core.$apply(b)}function g(){setTimeout(h,50)}function h(){console.log("Loading tomcat webapp data...");var a=e.search("*:type=Connector,*");if(a){var c=!1;angular.forEach(a,function(a,d){function f(a){return a&&a.toString().toLowerCase().indexOf("http")>=0}var g=a;if(!c){var h=e.request({type:"read",mbean:g,attribute:["port","scheme","protocol"]});h&&h.value&&f(h.value.protocol)&&(c=!0,b.httpPort=h.value.port,b.httpScheme=h.value.scheme)}})}e.search("*:j2eeType=WebModule,*",onSuccess(f))}var i='<div class="ngCellText pagination-centered" title="{{row.getProperty(col.field)}}"><i class="{{row.getProperty(col.field) | tomcatIconClass}}"></i></div>',j='<div class="ngCellText" title="{{row.getProperty(col.field)}}"><a ng-href="{{row.getProperty(col.field)}}" target="_blank">{{row.getProperty(col.field)}}</a></div>';b.uninstallDialog=new UI.Dialog,b.httpPort,b.httpScheme="http",b.webapps=[],b.selected=[];var k=[{field:"state",displayName:"State",cellTemplate:i,width:56,minWidth:56,maxWidth:56,resizable:!1},{field:"path",displayName:"Context-Path",cellFilter:null,width:"*",resizable:!0},{field:"url",displayName:"Url",cellTemplate:j,cellFilter:null,width:"*",resizable:!0},{field:"startTime",displayName:"Start Time",cellFilter:null,width:"*",resizable:!0}],l=[{field:"stateName",displayName:"State",cellTemplate:i,width:56,minWidth:56,maxWidth:56,resizable:!1},{field:"path",displayName:"Context-Path",cellFilter:null,width:"*",resizable:!0},{field:"url",displayName:"Url",cellTemplate:j,cellFilter:null,width:"*",resizable:!0},{field:"startTime",displayName:"Start Time",cellFilter:null,width:"*",resizable:!0}],m=[{field:"stateName",displayName:"State",cellTemplate:i,width:56,minWidth:56,maxWidth:56,resizable:!1},{field:"path",displayName:"Context-Path",cellFilter:null,width:"*",resizable:!0},{field:"displayName",displayName:"Display Name",cellFilter:null,width:"*",resizable:!0},{field:"url",displayName:"Url",cellTemplate:j,cellFilter:null,width:"*",resizable:!0},{field:"startTime",displayName:"Start Time",cellFilter:null,width:"*",resizable:!0}];b.gridOptions={data:"webapps",displayFooter:!0,selectedItems:b.selected,selectWithCheckboxOnly:!0,filterOptions:{filterText:""}},b.controlWebApps=function(a){var c=b.selected.map(function(a){return a.mbean});angular.isArray(c)||(c=[c]);var d=(c.length||1)-1;angular.forEach(c,function(c,f){var g=f>=d?b.onLastResponse:b.onResponse;e.request({type:"exec",mbean:c,operation:a,arguments:null},onSuccess(g,{error:g}))})},b.stop=function(){b.controlWebApps("stop")},b.start=function(){b.controlWebApps("start")},b.reload=function(){b.controlWebApps("reload")},b.uninstall=function(){b.controlWebApps("destroy"),b.uninstallDialog.close()},b.onLastResponse=function(a){b.onResponse(a),h()},b.onResponse=function(a){},b.$on("jmxTreeUpdated",g),b.$watch("workspace.tree",g),b.tomcatServerVersion="";var n=e.search("*:type=Server");n=a.filerTomcatOrCatalina(n),n&&1===n.length?b.tomcatServerVersion=e.getAttribute(n[0],"serverInfo"):console.log("Cannot find Tomcat server or there was more than one server. response is: "+n),a.isTomcat5(b.tomcatServerVersion)?(console.log("Using Tomcat 5"),b.gridOptions.columnDefs=k):a.isTomcat6(b.tomcatServerVersion)?(console.log("Using Tomcat 6"),b.gridOptions.columnDefs=l):(console.log("Using Tomcat 7"),b.gridOptions.columnDefs=m)}])}(Tomcat||(Tomcat={}));var UI;!function(a){a._module.directive("hawtioAutoColumns",function(){return new a.AutoColumns});var b=function(){function b(){this.restrict="A",this.link=function(b,c,d){var e=a.getIfSet("hawtioAutoColumns",d,"div"),f=a.getIfSet("minMargin",d,"3").toNumber(),g=Core.throttled(function(){var a=c.innerWidth(),b=0,d=c.children(e);if(0!==d.length&&(d.each(function(a){var c=$(this);c.is(":visible")&&c.outerWidth()>b&&(b=c.outerWidth())}),0!==b)){b+=2*f;var g=Math.floor(a/b);d.length<g&&(g=d.length);var h=(a-g*b)/g/2;d.each(function(a){$(this).css({"margin-left":h,"margin-right":h})})}},500);setTimeout(g,300),b.$watch(g),$(window).resize(g)}}return b}();a.AutoColumns=b}(UI||(UI={}));var UI;!function(a){a._module.directive("hawtioAutoDropdown",function(){return a.AutoDropDown}),a.AutoDropDown={restrict:"A",link:function(b,c,d){function e(b){var d=c.get(0);if(!(b&&b.relatedNode!==d&&b.type&&b&&"resize"!==b.type)){var e=$(c.find(".overflow")),f=$(e.find("ul.dropdown-menu")),g=0;try{e.outerWidth()-e.innerWidth(),g=e.position().left-c.position().left-50}catch(b){a.log.debug("caught "+b)}c.children("li:not(.overflow):not(.pull-right):not(:hidden)").each(function(){var a=$(this);(g-=a.outerWidth(!0))<0&&(a.detach(),a.prependTo(f))}),f.children().length>0&&e.css({visibility:"visible"});var h=function(){return"none"!==$(this).css("display")};if(g>130){var i=!1;f.children("li:not(.overflow):not(.pull-right)").filter(h).each(function(){if(!i){var a=$(this);g>a.outerWidth()?(g-=a.outerWidth(),a.detach(),a.insertBefore(e)):i=!0}})}0===f.children().filter(h).length&&e.css({visibility:"hidden"})}}$(window).resize(e),c.get(0).addEventListener("DOMNodeInserted",e),b.$watch(setTimeout(e,500))}}}(UI||(UI={}));var UI;!function(a){function b(){return{restrict:"E",replace:!0,templateUrl:a.templatePath+"breadcrumbs.html",require:"hawtioDropDown",scope:{config:"="},controller:["$scope","$element","$attrs",function(a,b,c){function d(b,c){b.level=c,c>0&&(b.breadcrumbAction=b.action,b.action=a.action),b.items&&b.items.forEach(function(a){d(a,c+1)})}function e(b,c,d){if(0!==c.length){var f=c.removeAt(0)[0];if(b&&b.items){var g=!1;b.items.forEach(function(b){g||b.title!==f||(g=!0,a.levels[d]=b,e(b,c,d+1))})}}}a.action="itemClicked(config, $event)",a.levels={},a.itemClicked=function(b,c){if(b.level&&angular.isNumber(b.level)){a.levels[b.level]=b;var d=Object.extended(a.levels).keys().sortBy("");if(d.from(b.level+1).forEach(function(b){b in a.levels&&(a.levels[b]={},delete a.levels[b])}),angular.forEach(a.levels,function(b,c){b.items&&b.items.length>0&&b.items.forEach(function(b){b.action=a.action})}),b.items)b.open=!0,b.items.forEach(function(b){b.action=a.action}),delete b.action;else{var d=Object.extended(a.levels).keys().sortBy(""),e=[];d.forEach(function(b){e.push(a.levels[b].title)});var f="/"+e.join("/");a.config.path=f}b.level>1&&(c.preventDefault(),c.stopPropagation())}},a.$watch("config.path",function(b,c){if(!Core.isBlank(b)){var d=b.split("/").exclude(function(a){return Core.isBlank(a)}),f=!0;if(d.forEach(function(b,c){f&&(a.levels[c]&&!Core.isBlank(a.levels[c].title)&&a.levels[c].title===b||(f=!1))}),f)return;a.levels=[],a.levels[0]=a.config,e(a.config,d.from(0),1)}}),a.$watch("config",function(b,c){d(a.config,0),a.levels[0]=a.config})}]}}a.hawtioBreadcrumbs=b,a._module.directive("hawtioBreadcrumbs",a.hawtioBreadcrumbs)}(UI||(UI={}));var UI;!function(a){a._module.directive("hawtioColorPicker",function(){return new a.ColorPicker}),a.selected="color-picker-selected",a.unselected="unselected";var b=function(){function b(){this.restrict="A",this.replace=!0,this.scope={property:"=hawtioColorPicker"},this.templateUrl=a.templatePath+"colorPicker.html",this.compile=function(b,c,d){return{post:function(b,c,d,e){b.colorList=[],angular.forEach(a.colors,function(c){var d=a.unselected;b.property===c&&(d=a.selected),b.colorList.push({color:c,select:d})})}}},this.controller=["$scope","$element","$timeout",function(b,c,d){b.popout=!1,b.$watch("popout",function(){c.find(".color-picker-popout").toggleClass("popout-open",b.popout)}),b.selectColor=function(c){for(var d=0;d<b.colorList.length;d++)b.colorList[d].select=a.unselected,b.colorList[d]===c&&(b.property=c.color,b.colorList[d].select=a.selected)}}]}return b}();a.ColorPicker=b}(UI||(UI={}));var UI;!function(a){a._module.directive("hawtioConfirmDialog",function(){return new a.ConfirmDialog});var b=function(){function b(){this.restrict="A",this.replace=!0,this.transclude=!0,this.templateUrl=a.templatePath+"confirmDialog.html",this.scope={show:"=hawtioConfirmDialog",title:"@",okButtonText:"@",showOkButton:"@",cancelButtonText:"@",onCancel:"&?",onOk:"&?",onClose:"&?"},this.controller=["$scope","$element","$attrs","$transclude","$compile",function(a,b,c,d,e){function f(){setTimeout(function(){var a=$("div.modal-backdrop");a&&a.length&&(Logger.get("ConfirmDialog").debug("Removing the backdrop div! "+a),a.remove())},200)}a.clone=null,d(function(b){a.clone=$(b).filter(".dialog-body")}),a.$watch("show",function(){a.show&&setTimeout(function(){a.body=$(".modal-body"),a.body.html(e(a.clone.html())(a.$parent)),Core.$apply(a)},50)}),c.$observe("okButtonText",function(b){angular.isDefined(b)||(a.okButtonText="OK")}),c.$observe("cancelButtonText",function(b){angular.isDefined(b)||(a.cancelButtonText="Cancel")}),c.$observe("title",function(b){angular.isDefined(b)||(a.title="Are you sure?")}),a.cancel=function(){a.show=!1,a.$parent.$eval(a.onCancel),f()},a.submit=function(){a.show=!1,a.$parent.$eval(a.onOk),f()},a.close=function(){a.$parent.$eval(a.onClose),f()}}]}return b}();a.ConfirmDialog=b}(UI||(UI={}));var UI;!function(a){a._module.controller("UI.DeveloperPageController",["$scope","$http",function(a,b){a.getContents=function(a,c){b({method:"GET",url:"app/ui/html/test/"+a}).success(function(a,b,d,e){c(a)}).error(function(b,d,e,f){c("Failed to fetch "+a+": "+b)})}}])}(UI||(UI={}));var UI;!function(a){a.hawtioDrag=a._module.directive("hawtioDrag",[function(){return{replace:!1,transclude:!0,restrict:"A",template:"<span ng-transclude></span>",scope:{data:"=hawtioDrag"},link:function(a,b,c){b.attr({draggable:"true"});var d=b[0];d.draggable=!0,d.addEventListener("dragstart",function(c){return c.dataTransfer.effectAllowed="move",c.dataTransfer.setData("text",a.data),b.addClass("drag-started"),!1},!1),d.addEventListener("dragend",function(a){b.removeClass("drag-started")},!1)}}}]),a.hawtioDrop=a._module.directive("hawtioDrop",[function(){return{replace:!1,transclude:!0,restrict:"A",template:"<span ng-transclude></span>",scope:{onDrop:"&?hawtioDrop",ngModel:"=",property:"@",prefix:"@"},link:function(a,b,c){var d=function(a){return a.preventDefault&&a.preventDefault(),b.addClass("drag-over"),!1},e=b[0];e.addEventListener("dragenter",d,!1),e.addEventListener("dragover",d,!1),e.addEventListener("dragleave",function(a){return b.removeClass("drag-over"),!1},!1),e.addEventListener("drop",function(c){c.stopPropagation&&c.stopPropagation(),b.removeClass("drag-over");var d=c.dataTransfer.getData("text");a.onDrop&&a.$eval(a.onDrop,{data:d,model:a.ngModel,property:a.property});var e="hawtio-drop";return Core.isBlank(a.prefix)||(e=a.prefix+"-"+e),a.$emit(e,{data:d,model:a.ngModel,property:a.property}),Core.$apply(a),!1},!1)}}}])}(UI||(UI={}));var UI;!function(a){a._module.directive("editableProperty",["$parse",function(b){return new a.EditableProperty(b)}]);var b=function(){function b(b){this.$parse=b,this.restrict="E",this.scope=!0,this.templateUrl=a.templatePath+"editableProperty.html",this.require="ngModel",this.link=null,this.link=function(a,c,d,e){function f(){return":input[type="+a.inputType+"]"}a.inputType=d.type||"text",a.min=d.min,a.max=d.max,a.getText=function(){return a.text?"password"===a.inputType?StringHelpers.obfusicate(a.text):a.text:""},a.editing=!1,$(c.find(".icon-pencil")[0]).hide(),a.getPropertyName=function(){var c=b(d.property)(a);return c||0===c||(c=d.property),c},e.$render=function(){e.$viewValue&&(a.text=e.$viewValue[a.getPropertyName()])},a.getInputStyle=function(){if(!a.text)return{};var b=(a.text+"").length/1.2;return b<5&&(b=5),{width:b+"em"}},a.showEdit=function(){$(c.find(".icon-pencil")[0]).show()},a.hideEdit=function(){$(c.find(".icon-pencil")[0]).hide()},a.$watch("editing",function(b,d){b!==d&&(b?$(c.find(f())).focus().select():a.$emit("editablePropertyEdit",!1))}),a.doEdit=function(){a.editing=!0,a.$emit("editablePropertyEdit",!0)},a.stopEdit=function(){$(c.find(f())[0]).val(e.$viewValue[a.getPropertyName()]),a.editing=!1},a.saveEdit=function(){var b=$(c.find(f())[0]).val(),g=e.$viewValue;if("number"==a.inputType&&""!=b)try{var h=parseInt(b),i=""!=a.min?parseInt(a.min):Number.MIN_VALUE,j=""!=a.max?parseInt(a.max):Number.MAX_VALUE;h<i||h>j||(g[a.getPropertyName()]=b,e.$setViewValue(g),e.$render(),a.editing=!1,a.$parent.$eval(d.onSave))}catch(a){}else g[a.getPropertyName()]=b,e.$setViewValue(g),e.$render(),a.editing=!1,a.$parent.$eval(d.onSave)}}}return b}();a.EditableProperty=b}(UI||(UI={}));var UI;!function(a){function b(b){return{restrict:"A",replace:!0,templateUrl:a.templatePath+"editor.html",scope:{text:"=hawtioEditor",mode:"=",outputEditor:"@",name:"@"},controller:["$scope","$element","$attrs",function(b,c,d){b.codeMirror=null,b.doc=null,b.options=[],a.observe(b,d,"name","editor"),b.applyOptions=function(){b.codeMirror&&(b.options.each(function(a){b.codeMirror.setOption(a.key,a.value)}),b.options=[])},b.$watch("doc",function(){b.doc&&b.codeMirror.on("change",function(a){b.text=b.doc.getValue(),b.dirty=!b.doc.isClean(),Core.$apply(b)})}),b.$watch("codeMirror",function(){b.codeMirror&&(b.doc=b.codeMirror.getDoc())}),b.$watch("text",function(a,c){if(b.codeMirror&&b.doc&&!b.codeMirror.hasFocus()){var d=b.text||"";(angular.isArray(d)||angular.isObject(d))&&(d=JSON.stringify(d,null,"  "),b.mode="javascript",b.codeMirror.setOption("mode","javascript")),b.doc.setValue(d)}})}],link:function(a,c,d){"dirty"in d&&(a.dirtyTarget=d.dirty,a.$watch("$parent['"+a.dirtyTarget+"']",function(b,c){b!==c&&(a.dirty=b)}));var e=Object.extended(d).clone();if(delete e.$$element,delete e.$attr,delete e.class,delete e.hawtioEditor,delete e.mode,delete e.dirty,delete e.outputEditor,"onChange"in d){var f=d.onChange;delete e.onChange,a.options.push({onChange:function(c){var d=b(f);d&&d(a.$parent,{codeMirror:c})}})}angular.forEach(e,function(b,c){a.options.push({key:c,value:b})}),a.$watch("mode",function(){a.mode&&(a.codeMirror?a.codeMirror.setOption("mode",a.mode):a.options.push({key:"mode",value:a.mode}))}),a.$watch("dirty",function(b,c){a.dirty&&!a.doc.isClean()&&a.doc.markClean(),b!==c&&"dirtyTarget"in a&&(a.$parent[a.dirtyTarget]=a.dirty)}),a.$watch(function(){return c.is(":visible")},function(b,c){b!==c&&a.codeMirror&&a.codeMirror.refresh()}),a.$watch("text",function(){if(!a.codeMirror){var b={value:a.text};b=CodeEditor.createEditorSettings(b),a.codeMirror=CodeMirror.fromTextArea(c.find("textarea").get(0),b);var d=a.outputEditor;if(d){var e=a.$parent||a;Core.pathSet(e,d,a.codeMirror)}a.applyOptions()}})}}}a._module.directive("hawtioEditor",["$parse",function(b){return a.Editor(b)}]),a.Editor=b}(UI||(UI={}));var UI;!function(a){function b(a){return a.hasClass("opened")||!a.hasClass("closed")}function c(a){return!!a}a._module.directive("expandable",function(){return new a.Expandable});var d=function(){function a(){var a=this;this.log=Logger.get("Expandable"),this.restrict="C",this.replace=!1,this.link=null,this.link=function(d,e,f){var g=a,h=e,i=null,j=null;angular.isDefined(f.model)&&(i=f.model,j=d[i],angular.isDefined(d[i].expanded)?j.expanded?g.forceOpen(j,h,d):g.forceClose(j,h,d):j.expanded=h.hasClass("opened"),i&&d.$watch(i+".expanded",function(a,b){c(a)!==c(b)&&(a?g.open(j,h,d):g.close(j,h,d))}));var k=h.find(".title");h.find(".cancel").bind("click",function(){return j=d[i],g.forceClose(j,h,d),!1}),k.bind("click",function(){return j=d[i],b(h)?g.close(j,h,d):g.open(j,h,d),!1})}}return a.prototype.open=function(a,b,c){b.find(".expandable-body").slideDown(400,function(){b.hasClass("opened")||b.addClass("opened"),b.removeClass("closed"),a&&(a.expanded=!0),Core.$apply(c)})},a.prototype.close=function(a,b,c){b.find(".expandable-body").slideUp(400,function(){b.removeClass("opened"),b.hasClass("closed")||b.addClass("closed"),a&&(a.expanded=!1),Core.$apply(c)})},a.prototype.forceClose=function(a,b,c){b.find(".expandable-body").slideUp(0,function(){b.hasClass("closed")||b.addClass("closed"),b.removeClass("opened"),a&&(a.expanded=!1),Core.$apply(c)})},a.prototype.forceOpen=function(a,b,c){b.find(".expandable-body").slideDown(0,function(){b.hasClass("opened")||b.addClass("opened"),b.removeClass("closed"),a&&(a.expanded=!0),Core.$apply(c)})},a}();a.Expandable=d}(UI||(UI={}));var UI;!function(a){a._module.directive("hawtioFileDrop",[function(){return{restrict:"A",replace:!1,link:function(b,c,d){var e=d.hawtioFileDrop,f=d.downloadUrl,g=d.mimeType||"application/octet-stream";if(!Core.isBlank(e)&&!Core.isBlank(f)){if(!f.startsWith("http")){f=(new URI).path(f).toString()}var h=g+":"+e+":"+f;c.attr({draggable:!0}),c[0].addEventListener("dragstart",function(b){b.dataTransfer?(a.log.debug("Drag started, event: ",b,"File details: ",h),b.dataTransfer.setData("DownloadURL",h)):a.log.debug("Drag event object doesn't contain data transfer: ",b)})}}}}])}(UI||(UI={}));var UI;!function(a){a.hawtioFilter=a._module.directive("hawtioFilter",[function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:a.templatePath+"filter.html",scope:{placeholder:"@",cssClass:"@",saveAs:"@?",ngModel:"="},controller:["$scope","localStorage","$location","$element",function(a,b,c,d){if(a.getClass=function(){var b=[];return Core.isBlank(a.cssClass)||b.push(a.cssClass),Core.isBlank(a.ngModel)||b.push("has-text"),b.join(" ")},!Core.isBlank(a.saveAs)){if(a.saveAs in b){var e=b[a.saveAs];Core.isBlank(e)?a.ngModel="":a.ngModel=e}else a.ngModel="";var f=function(){b[a.saveAs]=a.ngModel};a.$watch("ngModel",f)}}]}}])}(UI||(UI={}));var UI;!function(a){a._module.directive("gridster",function(){return new a.GridsterDirective});var b=function(){function a(){this.restrict="A",this.replace=!0,this.controller=["$scope","$element","$attrs",function(a,b,c){}],this.link=function(a,b,c){var d=[6,6],e=[150,150],f=10,g=6;angular.isDefined(c.extraRows)&&(f=c.extraRows.toNumber()),angular.isDefined(c.extraCols)&&(g=c.extraCols.toNumber());var h=$('<ul style="margin: 0"></ul>'),i='<style type="text/css">',i=i+"</style>";b.append($(i)),b.append(h),a.gridster=h.gridster({widget_margins:d,grid_size:e,extra_rows:f,extra_cols:g}).data("gridster")}}return a}();a.GridsterDirective=b}(UI||(UI={}));var UI;!function(a){function b(){return function(a,b){function c(a,c,d){c[e]=!0,c[f]=!1,g=c[b],d>0&&(a[d-1][f]=!0)}function d(a){a[e]=!1,a[f]=!1}if(0===a.length)return a;if(Core.isBlank(b))return a;var e="newGroup",f="endGroup",g=void 0;return a.forEach(function(e,f){var h=e[b]!==g;if(angular.isArray(e[b]))if(void 0===g)h=!0;else{var i=e[b];i.length!==g.length?h=!0:(h=!1,i.forEach(function(a){h||g.any(function(b){return b===a})||(h=!0)}))}h?c(a,e,f):d(e)}),a}}a.groupBy=b,a._module.filter("hawtioGroupBy",a.groupBy)}(UI||(UI={}));var UI;!function(a){function b(){return a.log.debug("Creating icon directive"),{restrict:"E",replace:!0,templateUrl:a.templatePath+"icon.html",scope:{icon:"=config"},link:function(a,b,c){a.icon&&("type"in a.icon||Core.isBlank(a.icon.src)||(a.icon.src.startsWith("icon-")?a.icon.type="icon":a.icon.type="img"))}}}a.IconTestController=a._module.controller("UI.IconTestController",["$scope","$templateCache",function(a,b){a.exampleHtml=b.get("example-html"),a.exampleConfigJson=b.get("example-config-json"),a.$watch("exampleConfigJson",function(b,c){a.icons=angular.fromJson(a.exampleConfigJson)})}]),a.hawtioIcon=b,a._module.directive("hawtioIcon",a.hawtioIcon)}(UI||(UI={}));var UI;!function(a){a._module.directive("hawtioJsplumb",["$timeout","$window",function(b,c){return{restrict:"A",link:function(d,e,f){function g(a){var b=$(a),c=b.attr("id"),d=b.attr("anchors");return Core.isBlank(d)||!d.has("{{")&&!d.has("}}")?(d=Core.isBlank(d)?["Continuous"]:d.split(",").map(function(a){return a.trim()}),{id:c,label:"node "+c,el:b,width:b.outerWidth(),height:b.outerHeight(),edges:[],connections:[],endpoints:[],anchors:d}):null}function h(a,b){var c={isSource:!0,isTarget:!0,anchor:b.anchors,connector:u,maxConnections:-1};angular.isFunction(d.customizeEndpointOptions)&&d.customizeEndpointOptions(a,b,c);var f=a.addEndpoint(b.el,c);b.endpoints.push(f),k&&a.draggable(b.el,{containment:e})}function i(){var a=e.find(".jsplumb-node");v.length,angular.forEach(a,function(a){if(!x[a.id]){var b=g(a);b&&(v.push(b),x[b.id]=b)}}),angular.forEach(v,function(a){var b=a.el.attr("connect-to");b&&(b=b.split(","),angular.forEach(b,function(b){var c=x[b.trim()];if(c){var d={source:a,target:c};w.push(d),a.edges.push(d),c.edges.push(d)}}))})}function j(){if(!d.jsPlumb){d.jsPlumb=jsPlumb.getInstance({Container:e});var a={Anchor:"AutoDefault",Connector:"Flowchart",ConnectorStyle:u,DragOptions:{cursor:"pointer",zIndex:2e3},Endpoint:r,PaintStyle:{strokeStyle:"#42a62c",lineWidth:4},HoverPaintStyle:{strokeStyle:"#42a62c",lineWidth:4},ConnectionOverlays:[t,s]};k||(a.ConnectionsDetachable=!1),angular.isFunction(d.customizeDefaultOptions)&&d.customizeDefaultOptions(a),d.jsPlumb.importDefaults(a)}i(),d.jsPlumbNodes=v,d.jsPlumbNodesById=x,d.jsPlumbTransitions=w,l&&(d.layout=dagre.layout().nodeSep(n).edgeSep(o).rankSep(p).rankDir(m).nodes(v).edges(w).run()),angular.forEach(d.jsPlumbNodes,function(a){if(l){var b=a.el.width(),c=a.el.height(),e=a.dagre.y-c/2,f=a.dagre.x-b/2;a.el.css({top:e,left:f})}h(d.jsPlumb,a)}),angular.forEach(d.jsPlumbTransitions,function(a){var b={connector:u,maxConnections:-1},c={source:a.source.el,target:a.target.el};angular.isFunction(d.customizeConnectionOptions)&&d.customizeConnectionOptions(d.jsPlumb,a,c,b);var e=d.jsPlumb.connect(c,b);a.source.connections.push(e),a.target.connections.push(e)}),d.jsPlumb.recalculateOffsets(e),d.jsPlumb.isSuspendDrawing()||d.jsPlumb.repaintEverything(),angular.isDefined(d.jsPlumbCallback)&&angular.isFunction(d.jsPlumbCallback)&&d.jsPlumbCallback(d.jsPlumb,d.jsPlumbNodes,d.jsPlumbNodesById,d.jsPlumbTransitions)}c.addEventListener("resize",function(){d.jsPlumb&&(d.jsPlumb.recalculateOffsets(e),d.jsPlumb.repaintEverything())});var k=!0;angular.isDefined(f.draggable)&&(k=Core.parseBooleanValue(f.draggable));var l=!0;angular.isDefined(f.layout)&&(l=Core.parseBooleanValue(f.layout));var m="TB";if(angular.isDefined(f.direction))switch(f.direction){case"down":m="LR";break;default:m="TB"}var n=50,o=10,p=50;angular.isDefined(f.nodeSep)&&(n=Core.parseIntValue(f.nodeSep)),angular.isDefined(f.edgeSep)&&(o=Core.parseIntValue(f.edgeSep)),angular.isDefined(f.rankSep)&&(p=Core.parseIntValue(f.rankSep));var q=100;angular.isDefined(f.timeout)&&(q=Core.parseIntValue(f.timeout,"timeout"));var r=["Dot",{radius:10,cssClass:"jsplumb-circle",hoverClass:"jsplumb-circle-hover"}],s=["Label"],t=["Arrow",{location:1,id:"arrow",length:8,width:8,foldback:.8}],u=["Flowchart",{cornerRadius:4,gap:8}];angular.isDefined(d.connectorStyle)&&(u=d.connectorStyle);var v=[],w=[],x={};d.$on("jsplumbDoWhileSuspended",function(b,c){if(d.jsPlumb){d.jsPlumb.doWhileSuspended(function(){a.log.debug("Suspended jsplumb"),d.jsPlumb.reset(),c(),v=[],x={},w=[],j()})}}),b(j,q)}}}])}(UI||(UI={}));var UI;!function(a){function b(b,c){return{restrict:"",replace:!0,templateUrl:a.templatePath+"list.html",scope:{config:"=hawtioList"},link:function(d,e,f){d.rows=[],d.name="hawtioListScope",d.config.selectedItems||(d.config.selectedItems=[]),d.$watch("rows",function(a,b){if(a!==b){d.config.selectedItems.length=0;d.rows.findAll(function(a){return a.selected}).forEach(function(a){d.config.selectedItems.push(a.entity)})}},!0),d.cellTemplate=b.get("cellTemplateForList.html"),d.rowTemplate=b.get("rowTemplateForList.html");var g=d.config.columnDefs,h="name",i="Name";if(g&&g.length>0){var j=g.first();h=j.field||h,i=j.displayName||i,j.cellTemplate&&(d.cellTemplate=j.cellTemplate)}var k=f.hawtioList,l=d.config.data;if(!Core.isBlank(k)&&!Core.isBlank(l)){d.listRoot=function(){return e.find(".list-root")},d.getContents=function(a){var b=d.$new();b.row=a;var e=c(d.rowTemplate)(b),f=d.parentScope.$new();f.row=a,f.col={field:h};var g=c(d.cellTemplate)(f);return $(e).find(".list-row-contents").append(g),e},d.setRows=function(a){d.rows=[];var b=d.listRoot();b.empty(),a&&a.forEach(function(a){var c={entity:a,getProperty:function(b){return angular.isDefined(b)?a[b]:null}};b.append(d.getContents(c)),d.rows.push(c)})};var m=a.findParentWith(d,k);m&&(d.parentScope=m,m.$watch(l,d.setRows,!0))}}}}a.hawtioList=b,a._module.directive("hawtioList",["$templateCache","$compile",a.hawtioList])}(UI||(UI={}));var UI;!function(a){a._module.directive("hawtioObject",["$templateCache","$interpolate","$compile",function(b,c,d){return{restrict:"A",replace:!0,templateUrl:a.templatePath+"object.html",scope:{entity:"=?hawtioObject",config:"=?",path:"=?",row:"=?"},link:function(a,e,f){function g(a,b,d,e){var f=c(a);return f(d?{key:d.titleize(),data:e,path:b}:{data:e,path:b})}function h(a,b){var c=void 0,d=Core.pathGet(b,["properties"]);return!c&&d&&angular.forEach(d,function(b,d){new RegExp(d).test(a)&&(c=!c||c.override||b.override?Object.clone(b,!0):Object.merge(c,b))}),c}function i(a,b,c){var d=c,b=h(a,b);return b&&b.template&&(d=b.template),d}function j(b,c,e,f,i){var i=h(c,i);if(!i||!i.hidden){var j=null;j=i&&i.template?i.template:g(b,c,e,f);var k=a.$new();return k.row=a.row,k.entityConfig=i,k.data=f,k.path=c,d(j)(k)}}function k(a,c,d){return j(i(a,d,b.get("primitiveValueTemplate.html")),a,void 0,c,d)}function l(a,c,d){return j(i(a,d,b.get("dateValueTemplate.html")),a,void 0,c,d)}function m(a,b,c){var d=!1,e=void 0;return angular.forEach(b,function(f,g){angular.isNumber(g)&&"length"in b&&(d=!0),d||g.startsWith("$")||(e||(e=angular.element("<span></span>")),angular.isArray(f)?e.append(t(a+"/"+g,g,f,c)):angular.isObject(f)?0===Object.extended(f).size()?e.append(q(a+"/"+g,g,"empty",c)):e.append(s(a+"/"+g,g,f,c)):StringHelpers.isDate(f)?e.append(r(a+"/"+g,g,Date.create(f),c)):e.append(q(a+"/"+g,g,f,c)))}),e?e.children():e}function n(a,b,c){var d=void 0;if(!b)return d;var e=!1;return b.forEach(function(b){!e&&angular.isObject(b)?(d||(d=[]),d=Object.extended(b).keys().filter(function(a){return!angular.isFunction(b[a])}).filter(function(b){var d=h(a+"/"+b,c);return!d||!d.hidden}).union(d)):(d=void 0,e=!0)}),d&&(d=d.exclude(function(a){return(""+a).startsWith("$")})),d}function o(a,c,d,e,f,h){var i=angular.element(g(a,c,d,e)),j=i.find("thead"),k=i.find("tbody"),l=b.get("headerTemplate.html"),m=b.get("cellTemplate.html"),n=b.get("rowTemplate.html"),o=angular.element(g(n,c,void 0,void 0));return f.forEach(function(a){o.append(g(l,c+"/"+a,a,void 0))}),j.append(o),e.forEach(function(a,b){var d=angular.element(g(n,c+"/"+b,void 0,void 0));f.forEach(function(e){var f=angular.element(g(m,c+"/"+b+"/"+e,void 0,void 0));f.append(u(c+"/"+b+"/"+e,a[e],h)),d.append(f)}),k.append(d)}),i}function p(a,c,d){var e=n(a,c,d);if(e){var f=i(a,d,b.get("arrayValueTableTemplate.html"));return o(f,a,void 0,c,e,d)}var f=i(a,d,b.get("arrayValueListTemplate.html"));return j(f,a,void 0,c,d)}function q(a,c,d,e){return j(i(a,e,b.get("primitiveAttributeTemplate.html")),a,c,d,e)}function r(a,c,d,e){return j(i(a,e,b.get("dateAttributeTemplate.html")),a,c,d,e)}function s(a,c,d,e){return j(i(a,e,b.get("objectAttributeTemplate.html")),a,c,d,e)}function t(a,c,d,e){var f=n(a,d,e);if(f){var g=i(a,e,b.get("arrayAttributeTableTemplate.html"));return o(g,a,c,d,f,e)}var g=i(a,e,b.get("arrayAttributeListTemplate.html"));return j(g,a,c,d,e)}function u(a,b,c){return angular.isArray(b)?p(a,b,c):angular.isObject(b)?m(a,b,c):StringHelpers.isDate(b)?l(a,Date.create(b),c):k(a,b,c)}a.$watch("entity",function(b){if(!b)return void e.empty();a.path||(a.path=""),angular.isDefined(a.row)||(a.row={entity:b}),e.html(u(a.path,b,a.config))},!0)}}}])}(UI||(UI={}));var UI;!function(a){function b(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:a.templatePath+"pane.html",scope:{position:"@",width:"@",header:"@"},controller:["$scope","$element","$attrs","$transclude","$document","$timeout","$compile","$templateCache","$window",function(a,b,c,d,e,f,g,h,i){a.moving=!1,d(function(c){if(b.find(".pane-content").append(c),!Core.isBlank(a.header)){var d=h.get(a.header),e=b.find(".pane-header-wrapper");e.html(g(d)(a)),f(function(){b.find(".pane-viewport").css("top",e.height())},500)}}),a.setViewportTop=function(){var a=b.find(".pane-header-wrapper");f(function(){b.find(".pane-viewport").css("top",a.height())},10)},a.setWidth=function(c){c<6||(b.width(c),b.parent().css(a.padding,b.width()+"px"),a.setViewportTop())},a.open=function(){a.setWidth(a.width)},a.close=function(){a.width=b.width(),a.setWidth(6)},a.$on("pane.close",a.close),a.$on("pane.open",a.open),a.toggle=function(){a.moving||(b.width()>6?a.close():a.open())},a.startMoving=function(b){b.stopPropagation(),b.preventDefault(),b.stopImmediatePropagation(),e.on("mouseup.hawtio-pane",function(b){f(function(){a.moving=!1},250),b.stopPropagation(),b.preventDefault(),b.stopImmediatePropagation(),e.off(".hawtio-pane"),Core.$apply(a)}),e.on("mousemove.hawtio-pane",function(b){a.moving=!0,b.stopPropagation(),b.preventDefault(),b.stopImmediatePropagation(),"left"===a.position?a.setWidth(b.pageX+2):a.setWidth(i.innerWidth-b.pageX+2),Core.$apply(a)})}}],link:function(a,b,c){var d=b.parent(),e="left";a.position&&(e=a.position),b.addClass(e);var f=b.width(),g="padding-"+e;a.padding=g;var h=d.css(g);d.css(g,f+"px"),a.$on("$destroy",function(){d.css(g,h)})}}}a.hawtioPane=b,a._module.directive("hawtioPane",a.hawtioPane)}(UI||(UI={}));var UI;!function(a){a._module.directive("hawtioMessagePanel",function(){return new a.MessagePanel});var b=function(){function a(){this.restrict="A",this.link=function(a,b,c){var d="100%";if("hawtioMessagePanel"in c){var e=c.hawtioMessagePanel;e&&!e.isBlank()&&(d=e)}var f="1s";if("speed"in c){var g=c.speed;f&&!f.isBlank()&&(f=g)}b.css({position:"absolute",bottom:0,height:0,"min-height":0,transition:"all "+f+" ease-in-out"}),b.parent().mouseover(function(){b.css({height:d,"min-height":"auto"})}),b.parent().mouseout(function(){b.css({height:0,"min-height":0})})}}return a}();a.MessagePanel=b,a._module.directive("hawtioInfoPanel",function(){return new a.InfoPanel});var c=function(){function a(){this.restrict="A",this.link=function(a,b,c){var d={left:{side:"right",out:"width"},right:{side:"left",out:"width"},up:{side:"bottom",out:"height"},down:{side:"top",out:"height"}},e="right";if("hawtioInfoPanel"in c){var f=c.hawtioInfoPanel;f&&!f.isBlank()&&Object.extended(d).keys().any(f)&&(e=f)}var g="1s";if("speed"in c){var h=c.speed;g&&!g.isBlank()&&(g=h)}var i="open"
;if("toggle"in c){var j=c.toggle;i&&!i.isBlank()&&(i=j)}var k={position:"absolute",transition:"all "+g+" ease-in-out"},l={};l[d[e].out]="100%";var m={};m[d[e].out]=0,k[d[e].side]=0,k[d[e].out]=0,b.css(k),a.$watch(i,function(a,c){Core.parseBooleanValue(a)?b.css(l):b.css(m)}),b.click(function(){a[i]=!1,Core.$apply(a)})}}return a}();a.InfoPanel=c}(UI||(UI={}));var UI;!function(a){a._module.directive("hawtioRow",function(){return new a.DivRow});var b=function(){function a(){this.restrict="A",this.link=function(a,b,c){b.get(0).addEventListener("DOMNodeInserted",function(){var a=b.children(),c=0;angular.forEach(a,function(a){var b=angular.element(a);switch(b.css("display")){case"none":break;default:c=c+b.outerWidth(!0)+5}}),b.width(c)})}}return a}();a.DivRow=b}(UI||(UI={}));var UI;!function(a){a._module.directive("hawtioSlideout",function(){return new a.SlideOut});var b=function(){function b(){this.restrict="A",this.replace=!0,this.transclude=!0,this.templateUrl=a.templatePath+"slideout.html",this.scope={show:"=hawtioSlideout",direction:"@",top:"@",height:"@",title:"@"},this.controller=["$scope","$element","$attrs","$transclude","$compile",function(b,c,d,e,f){b.clone=null,e(function(a){b.clone=$(a).filter(".dialog-body")}),a.observe(b,d,"direction","right"),a.observe(b,d,"top","10%",function(a){c.css("top",a)}),a.observe(b,d,"height","80%",function(a){c.css("height",a)}),a.observe(b,d,"title",""),b.$watch("show",function(){b.show&&(b.body=c.find(".slideout-body"),b.body.html(f(b.clone.html())(b.$parent)))}),b.hidePanel=function(c){a.log.debug("Event: ",c),b.show=!1}}],this.link=function(a,b,c){a.$watch("show",function(){a.show?(b.addClass("out"),b.focus()):b.removeClass("out")})}}return b}();a.SlideOut=b}(UI||(UI={}));var UI;!function(a){a._module.directive("hawtioPager",function(){return new a.TablePager});var b=function(){function b(){var b=this;this.restrict="A",this.scope=!0,this.templateUrl=a.templatePath+"tablePager.html",this.$scope=null,this.element=null,this.attrs=null,this.tableName=null,this.setRowIndexName=null,this.rowIndexName=null,this.link=function(a,c,d){return b.doLink(a,c,d)}}return b.prototype.doLink=function(a,b,c){var d=this;this.$scope=a,this.element=b,this.attrs=c,this.tableName=c.hawtioPager||c.array||"data",this.setRowIndexName=c.onIndexChange||"onIndexChange",this.rowIndexName=c.rowIndex||"rowIndex",a.first=function(){d.goToIndex(0)},a.last=function(){d.goToIndex(a.tableLength()-1)},a.previous=function(){d.goToIndex(a.rowIndex()-1)},a.next=function(){d.goToIndex(a.rowIndex()+1)},a.isEmptyOrFirst=function(){var b=a.rowIndex();return a.tableLength()<=0||b<=0},a.isEmptyOrLast=function(){var b=a.rowIndex(),c=a.tableLength();return c<1||b+1>=c},a.rowIndex=function(){return Core.pathGet(a.$parent,d.rowIndexName.split("."))},a.tableLength=function(){var a=d.tableData();return a?a.length:0}},b.prototype.tableData=function(){return Core.pathGet(this.$scope.$parent,this.tableName.split("."))||[]},b.prototype.goToIndex=function(a){var b=this.setRowIndexName,c=this.$scope[b];angular.isFunction(c)?c(a):(console.log("No function defined in scope for "+b+" but was "+c),this.$scope[this.rowIndexName]=a)},b}();a.TablePager=b}(UI||(UI={}));var UI;!function(a){a.hawtioTagFilter=a._module.directive("hawtioTagFilter",[function(){return{restrict:"E",replace:!0,templateUrl:a.templatePath+"tagFilter.html",scope:{selected:"=",tags:"=",collection:"=?",collectionProperty:"@",saveAs:"@"},controller:["$scope","localStorage","$location",function(a,b,c){function d(){a.collection&&a.collectionProperty?(a.selected.length?e():(a.visibleTags=a.tags,a.filteredCollection=a.collection),a.visibleTags=a.visibleTags.map(function(b){return{id:b,count:a.filteredCollection.map(function(b){return b[a.collectionProperty]}).reduce(function(a,c){return c.any(b)?a+1:a},0)}})):a.visibleTags=a.tags}function e(){a.filteredCollection=a.collection.filter(function(b){return SelectionHelpers.filterByGroup(a.selected,b[a.collectionProperty])}),a.visibleTags=[],a.filteredCollection.forEach(function(b){a.visibleTags=a.visibleTags.union(b[a.collectionProperty])})}if(SelectionHelpers.decorate(a),!Core.isBlank(a.saveAs)){var f=c.search();a.saveAs in f?a.selected.add(angular.fromJson(f[a.saveAs])):a.saveAs in b&&a.selected.add(angular.fromJson(b[a.saveAs]))}a.$watch("tags",function(b,c){b!==c&&(SelectionHelpers.syncGroupSelection(a.selected,a.tags),d())}),a.$watch("selected",function(e,f){if(!Core.isBlank(a.saveAs)){var g=angular.toJson(a.selected);b[a.saveAs]=g,c.search(a.saveAs,g)}d()},!0)}]}}])}(UI||(UI={}));var UI;!function(a){a.hawtioTagList=a._module.directive("hawtioTagList",["$interpolate","$compile",function(a,b){return{restrict:"E",replace:!0,scope:{ngModel:"=?",property:"@",onChange:"&"},link:function(c,d,e){c.ngModel&&c.property&&c.ngModel[c.property]&&(c.collection=c.ngModel[c.property],c.removeTag=function(a){c.ngModel[c.property].remove(a),c.onChange&&c.$eval(c.onChange)},c.$watch("collection",function(e,f){if(c.ngModel&&c.property&&c.ngModel[c.property]){var g=c.ngModel[c.property],h=angular.element("<div></div>");g.forEach(function(b){var c=a('<span class="badge badge-success mouse-pointer">{{tag}} <i class="icon-remove" ng-click="removeTag(\'{{tag}}\')"></i></span>&nbsp;');h.append(c({tag:b}))}),d.html(b(h.children())(c))}},!0))}}}])}(UI||(UI={}));var UI;!function(a){function b(b,c,d){return{restrict:"A",link:function(e,f,g){var h=a.getIfSet("title",g,void 0),i=a.getIfSet("trigger",g,"hover"),j=!0,k=a.getIfSet("content",g,"popoverTemplate"),l=a.getIfSet("placement",g,"auto"),m=a.getIfSet("delay",g,"100"),n=a.getIfSet("container",g,"body"),o=a.getIfSet("selector",g,"false");"false"===n&&(n=!1),"false"===o&&(o=!1);var p=b.get(k);p&&(f.on("$destroy",function(){f.popover("destroy")}),f.popover({title:h,trigger:i,html:j,content:function(){var a=c(p)(e);return Core.$digest(e),a},delay:m,container:n,selector:o,placement:function(a,b){if("auto"!==l)return l;var c=f,e=c.offset(),g=d.innerWidth();return e.left+c.outerWidth()/2<g/2?"right":"left"}}))}}}a.TemplatePopover=b,a._module.directive("hawtioTemplatePopover",["$templateCache","$compile","$document",a.TemplatePopover])}(UI||(UI={}));var UI;!function(a){a._module.controller("UI.UITestController2",["$scope","$templateCache",function(a,b){a.fileUploadExMode="text/html",a.menuItems=[],a.divs=[];for(var c=0;c<20;c++)a.menuItems.push("Some Item "+c);for(var c=0;c<20;c++)a.divs.push(c+1);a.things=[{name:"stuff1",foo1:"bar1",foo2:"bar2"},{name:"stuff2",foo3:"bar3",foo4:"bar4"}],a.someVal=1,a.dropDownConfig={icon:"icon-cogs",title:"My Awesome Menu",items:[{title:"Some Item",action:"someVal=2"},{title:"Some other stuff",icon:"icon-twitter",action:"someVal=3"},{title:"I've got children",icon:"icon-file-text",items:[{title:"Hi!",action:"someVal=4"},{title:"Yo!",items:[{title:"More!",action:"someVal=5"},{title:"Child",action:"someVal=6"},{title:"Menus!",action:"someVal=7"}]}]},{title:"Call a function!",action:function(){Core.notification("info","Function called!")}}]},a.dropDownConfigTxt=angular.toJson(a.dropDownConfig,!0),a.$watch("dropDownConfigTxt",function(b,c){b!==c&&(a.dropDownConfig=angular.fromJson(a.dropDownConfigTxt))}),a.breadcrumbSelection=1,a.breadcrumbConfig={path:"/root/first child",icon:"icon-cogs",title:"root",items:[{title:"first child",icon:"icon-folder-close-alt",items:[{title:"first child's first child",icon:"icon-file-text"}]},{title:"second child",icon:"icon-file"},{title:"third child",icon:"icon-folder-close-alt",items:[{title:"third child's first child",icon:"icon-file-text"},{title:"third child's second child",icon:"icon-file-text"},{title:"third child's third child",icon:"icon-folder-close-alt",items:[{title:"More!",icon:"icon-file-text"},{title:"Child",icon:"icon-file-text"},{title:"Menus!",icon:"icon-file-text"}]}]}]},a.breadcrumbConfigTxt=angular.toJson(a.breadcrumbConfig,!0),a.$watch("breadcrumbConfigTxt",function(b,c){b!==c&&(a.breadcrumbconfig=angular.toJson(a.breadcrumbConfigTxt))}),a.breadcrumbEx=b.get("breadcrumbTemplate"),a.dropDownEx=b.get("dropDownTemplate"),a.autoDropDown=b.get("autoDropDownTemplate"),a.zeroClipboard=b.get("zeroClipboardTemplate"),a.popoverEx=b.get("myTemplate"),a.popoverUsageEx=b.get("popoverExTemplate"),a.autoColumnEx=b.get("autoColumnTemplate")}]),a._module.controller("UI.UITestController1",["$scope","$templateCache",function(b,c){b.jsplumbEx=c.get("jsplumbTemplate"),b.nodes=["node1","node2"],b.otherNodes=["node4","node5","node6"],b.anchors=["Top","Right","Bottom","Left"],b.createEndpoint=function(a){var c=b.jsPlumbNodesById[a];if(c){var d=b.anchors.subtract(c.anchors);if(console.log("anchors: ",d),d&&d.length>0){var e=d.first();c.anchors.push(e),c.endpoints.push(b.jsPlumb.addEndpoint(c.el,{anchor:e,isSource:!0,isTarget:!0,maxConnections:-1}))}}},b.expandableEx='<div class="expandable closed">\n   <div title="The title" class="title">\n     <i class="expandable-indicator"></i> Expandable title\n   </div>\n   <div class="expandable-body well">\n     This is the expandable content...  Note that adding the "well" class isn\'t necessary but makes for a nice inset look\n   </div>\n</div>',b.editablePropertyEx1='<editable-property ng-model="editablePropertyModelEx1" property="property"></editable-property>',b.editablePropertyModelEx1={property:"This is editable (hover to edit)"},b.showDeleteOne=new a.Dialog,b.showDeleteTwo=new a.Dialog,b.fileUploadEx1='<div hawtio-file-upload="files" target="test1"></div>',b.fileUploadEx2='<div hawtio-file-upload="files" target="test2" show-files="false"></div>',b.fileUploadExMode="text/html",b.colorPickerEx='My Color ({{myColor}}): <div hawtio-color-picker="myColor"></div>',b.confirmationEx1='<button class="btn" ng-click="showDeleteOne.open()">Delete stuff</button>\n\n<div hawtio-confirm-dialog="showDeleteOne.show"\ntitle="Delete stuff?"\nok-button-text="Yes, Delete the Stuff"\ncancel-button-text="No, Keep the Stuff"\non-cancel="onCancelled(\'One\')"\non-ok="onOk(\'One\')">\n  <div class="dialog-body">\n    <p>\n        Are you sure you want to delete all the stuff?\n    </p>\n  </div>\n</div>\n',b.confirmationEx2='<button class="btn" ng-click="showDeleteTwo.open()">Delete other stuff</button>\n\n\x3c!-- Use more defaults --\x3e\n<div hawtio-confirm-dialog="showDeleteTwo.show\n"  on-cancel="onCancelled(\'Two\')"\n  on-ok="onOk(\'Two\')">\n  <div class="dialog-body">\n    <p>\n      Are you sure you want to delete all the other stuff?\n    </p>\n  </div>\n</div>',b.sliderEx1='<button class="btn" ng-click="showSlideoutRight = !showSlideoutRight">Show slideout right</button>\n<div hawtio-slideout="showSlideoutRight" title="Hey look a slider!">\n   <div class="dialog-body">\n     <div>\n       Here is some content or whatever {{transcludedValue}}\n     </div>\n   </div>\n</div>',b.sliderEx2='<button class="btn" ng-click="showSlideoutLeft = !showSlideoutLeft">Show slideout left</button>\n<div hawtio-slideout="showSlideoutLeft" direction="left" title="Hey, another slider!">\n   <div class="dialog-body">\n     <div hawtio-editor="someText" mode="javascript"></div>\n   </div>\n</div>\n',b.editorEx1='Instance 1\n<div class="row-fluid">\n   <div hawtio-editor="someText" mode="mode" dirty="dirty"></div>\n   <div>Text : {{someText}}</div>\n</div>\n\nInstance 2 (readonly)\n<div class="row-fluid">\n   <div hawtio-editor="someText" read-only="true" mode="mode" dirty="dirty"></div>\n   <div>Text : {{someText}}</div>\n</div>',b.transcludedValue="and this is transcluded",b.onCancelled=function(a){Core.notification("info","cancelled "+a)},b.onOk=function(a){Core.notification("info",a+" ok!")},b.showSlideoutRight=!1,b.showSlideoutLeft=!1,b.dirty=!1,b.mode="javascript",b.someText='var someValue = 0;\nvar someFunc = function() {\n  return "Hello World!";\n}\n',b.myColor="#FF887C",b.showColorDialog=!1,b.files=[],b.$watch("files",function(a,c){a!==c&&console.log("Files: ",b.files)},!0)}])}(UI||(UI={}));var UI;!function(a){function b(a,b,c,d){var e=Logger.get("UI");return{restrict:"A",scope:{getContents:"&"},controller:["$scope","$element","$attrs",function(b,c,d){b.remaining=-1,b.render=!1,b.chapters=[],b.addChapter=function(a){console.log("Adding: ",a),b.chapters.push(a),angular.isDefined(a.text)||b.fetchItemContent(a)},b.getTarget=function(a){return a?a.replace(".","_"):""},b.getFilename=function(a,b){var c=a.split("/").last();return b&&!c.endsWith(b)&&(c=c+"."+b),c},b.$watch("remaining",function(a,c){if(a!==c){(0===a||!1)&&(b.render=!0)}}),b.fetchItemContent=function(c){var d=b;b.$eval(function(e){e.getContents({filename:c.filename,cb:function(e){e&&(c.filename.endsWith(".md")?c.text=a(e):c.text=e,b.remaining--,Core.$apply(d))}})})}}],link:function(a,c,f){function g(){var a=$(window).scrollTop();c.find("li a").removeClass("active"),$(".panel-body").each(function(){var b=$(this).offset();if(b&&b.top>=a){var c=$(this).attr("id");if(c){return p.find("a[chapter-id='"+c+"']").addClass("active"),!1}}})}function h(){var a=p.find("a");return s&&(a=a.filter(s)),a}function i(){p.get(0).id||(p.get(0).id="toc"),a.tocId="#"+p.get(0).id,a.remaining=h().length,h().each(function(b,c){e.debug("Found: ",c);var d=a.getFilename(c.href,c.getAttribute("file-extension")),f={filename:d,title:c.textContent,link:c};a.addChapter(f)}),setTimeout(function(){g()},100)}function j(a){if(e.debug("selected chapter changed: "+a),a){var b="#"+a,c=0,d=$(b);if(d.length){var f=d.offset();f&&(c=f.top-k),$("body,html").animate({scrollTop:c},r)}}}var k=0,l=$(".logbar"),m=$("#toc-content");if(l.length)k=l.height()+l.offset().top;else if(m.length){var n=m.offset();n&&(k=n.top)}k||(k=90);var o=null,p=c;m&&m.length||(m=c);var q=a.$parent||a,r=1e3,s=f.linkFilter,t=f.html;t?q.$watch(t,function(){var a=q[t];if(a&&a!==o){o=a;var b=d(a)(q);c.children().remove(),c.append(b),i()}}):i(),$(window).scroll(g),a.$watch("render",function(c,f){if(c!==f&&c&&!m.next(".hawtio-toc").length){var g=$('<div class="hawtio-toc"></div>');g.appendTo(m);var i=b.search().chapter;a.chapters.forEach(function(b,c){e.debug("index:",c);var f=$("<div></div>"),h=null,k=a.getTarget(b.filename),l=b.link;l&&l.setAttribute("chapter-id",k),c>0&&(h=$('<div class="panel-title"><a class="toc-back" href="">Back to Top</a></div>'));var m=$('<div class="panel-body" id="'+k+'">'+b.text+"</div>");h?f.append(h).append(d(m)(a)):f.append(d(m)(a)),f.hide().appendTo(g).fadeIn(1e3),k===i&&j(k)});var l=m.offset().top-k;g.find("a.toc-back").each(function(a,b){$(b).click(function(a){a.preventDefault(),$("body,html").animate({scrollTop:l},2e3)})}),h().each(function(c,d){var f=d.href,g=a.getFilename(f,d.getAttribute("file-extension"));$(d).click(function(c){e.debug("Clicked: ",c),c.preventDefault();var d=a.getTarget(g);return b.search("chapter",d),Core.$apply(q),j(d),!0})})}}),q.$on("$locationChangeSuccess",function(a,c,d){setTimeout(function(){j(b.search().chapter)},50)})}}}a.HawtioTocDisplay=b,a._module.directive("hawtioTocDisplay",["marked","$location","$anchorScroll","$compile",a.HawtioTocDisplay])}(UI||(UI={}));var UI;!function(a){a._module.directive("hawtioViewport",function(){return new a.ViewportHeight});var b=function(){function a(){this.restrict="A",this.link=function(a,b,c){var d=0,e=function(){var a=angular.element(c.hawtioViewport),e=angular.element(c.containingDiv),f=a.position().top+a.height(),g=e.height()-f;if(angular.isDefined(c.heightAdjust))var h=c.heightAdjust.toNumber();g+=h,b.css({height:g,"min-height":g}),d!==g&&(d=g,b.trigger("resize"))};e(),a.$watch(e),$().resize(function(){return e(),Core.$apply(a),!1})}}return a}();a.ViewportHeight=b,a._module.directive("hawtioHorizontalViewport",function(){return new a.HorizontalViewport});var c=function(){function b(){this.restrict="A",this.link=function(b,c,d){var e=angular.isDefined(d.adjustParent)&&Core.parseBooleanValue(d.adjustParent);c.get(0).addEventListener("DOMNodeInserted",function(){var b=c.children();c.height(b.outerHeight(!0)),e&&c.parent().height(c.outerHeight(!0)+a.getScrollbarWidth())})}}return b}();a.HorizontalViewport=c}(UI||(UI={}));var UI;!function(a){function b(a){return{restrict:"A",link:function(b,c,d){var e=new window.ZeroClipboard(c.get(0));if(e.on("complete",function(a,c){c.text&&angular.isString(c.text)&&Core.notification("info","Copied text to clipboard: "+c.text.truncate(20)),Core.$apply(b)}),"useCallback"in d){var f=a(d.useCallback);f&&f(b,{clip:e})}b.$on("$destroy",function(a){e.destroy(),e=null,c.off()})}}}ZeroClipboard.config({moviePath:"img/ZeroClipboard.swf"}),a._module.directive("zeroClipboard",["$parse",function(b){return a.ZeroClipboardDirective(b)}]),a.ZeroClipboardDirective=b}(UI||(UI={}));var WikiDrop;!function(a){a.log=Logger.get("WikiDrop"),a.pluginName="wiki-drop",a.templatePath="app/"+a.pluginName+"/html/",a._module=angular.module(a.pluginName,["bootstrap","wiki"]),a._module.config(["$routeProvider",function(b){b.when("/wiki/drop",{templateUrl:a.templatePath+"deploy.html"})}]),a._module.run(["viewRegistry","layoutFull","workspace",function(b,c,d){a.log.debug("started")}]),hawtioPluginLoader.addModule(a.pluginName)}(WikiDrop||(WikiDrop={}));var WikiDrop;!function(a){a.DropFile=a._module.directive("wikiDropFile",[function(){return a.log.debug("Creating wiki drop directive..."),{restrict:"A",replace:!0,scope:{branch:"@",path:"@",unzip:"@"},templateUrl:a.templatePath+"deploy.html",controller:["$scope","$element","FileUploader","jolokiaUrl","$templateCache","$route","$timeout","jolokia","userDetails",function(b,c,d,e,f,g,h,i,j){function k(){var c=Wiki.gitRestURL(b.branch,b.path);a.log.info("Upload URI: "+c);var e=b.artifactUploader=new d({headers:{Authorization:Core.authHeaderValue(j)},autoUpload:!0,withCredentials:!0,method:"POST",url:c});b.doUpload=function(){e.uploadAll()},e.onWhenAddingFileFailed=function(b,c,d){a.log.debug("onWhenAddingFileFailed",b,c,d)},e.onAfterAddingFile=function(b){a.log.debug("onAfterAddingFile",b)},e.onAfterAddingAll=function(b){a.log.debug("onAfterAddingAll",b)},e.onBeforeUploadItem=function(d){d.fileSizeMB="file"in d?(d.file.size/1024/1024).toFixed(2):0,d.url=c,!1!==b.unzip&&"false"!==b.unzip||(d.url+="?unzip=false"),a.log.info("Uploading files to "+c),a.log.debug("onBeforeUploadItem",d)},e.onProgressItem=function(b,c){a.log.debug("onProgressItem",b,c)},e.onProgressAll=function(b){a.log.debug("onProgressAll",b)},e.onSuccessItem=function(b,c,d,e){a.log.debug("onSuccessItem",b,c,d,e)},e.onErrorItem=function(b,c,d,e){a.log.debug("onErrorItem",b,c,d,e)},e.onCancelItem=function(b,c,d,e){a.log.debug("onCancelItem",b,c,d,e)},e.onCompleteItem=function(b,c,d,e){a.log.debug("onCompleteItem",b,c,d,e)},e.onCompleteAll=function(){a.log.debug("onCompleteAll"),e.clearQueue(),h(function(){a.log.info("Completed all uploads. Lets force a reload"),g.reload(),Core.$apply(b)},200)},a.log.debug("uploader",e),b.artifactTemplate=f.get("fileUpload.html"),Core.$apply(b)}b.artifactTemplate="",b.$watch("branch",k),b.$watch("path",k)}]}}])}(WikiDrop||(WikiDrop={}));var Wiki;!function(a){a.CamelController=a._module.controller("Wiki.CamelController",["$scope","$location","$routeParams","localStorage","workspace","wikiRepository","jolokia",function(b,c,d,e,f,g,h){function i(a){var c=Camel.createFolderXmlTree(a,null);return c&&(b.nodeXmlNode=c),c}function j(a){var c=b.doc||document,d=b.selectedFolder||b.camelContextTree,e=a._id,f=null;if(e){var g=b.treeNode;if("route"===e)g=b.rootTreeNode;else{if(!g){var h=b.rootTreeNode,k=h.getChildren();if(k&&k.length||(j(Camel.getCamelSchema("route")),k=h.getChildren()),!k||!k.length)return void console.log("Could not add a new route to the empty tree!");g=k[k.length-1]}var l=Camel.getFolderCamelNodeId(g.data);Camel.acceptOutput(l)||(f=g.getNextSibling(),g=g.getParent()||g)}if(g){var m=c.createElement(e);d=g.data;var n=Camel.addRouteChild(d,m,p);if(n){var o=g.addChild(n,f);o&&(i(o),o.expand(!0),o.select(!0),o.activate(!0))}}}else console.log("WARNING: no id for model "+JSON.stringify(a))}function k(a,c){if(b.nodeData){var d=b.nodeDataChangedFields;d&&(d[c]?l():d[c]=!0)}}function l(){b.modified=!0;var a=b.selectedFolder;if(b.treeNode&&a){var c=i(b.treeNode);if(c){var d=c.localName,e=Camel.getCamelSchema(d);e&&(Camel.updateRouteNodeLabelAndTooltip(a,c,e),b.treeNode.render(!1,!1))}a.camelNodeData=b.nodeData}}function m(a){var c=a.text;if(c){var d=Camel.loadCamelTree(c,b.pageId,p);d&&(b.camelContextTree=d)}else console.log("No XML found for page "+b.pageId);Core.$applyLater(b)}function n(){b.loadEndpointNames(),b.pageId=a.pageId(d,c),console.log("Has page id: "+b.pageId+" with $routeParams "+JSON.stringify(d)),Git.getGitMBean(f)&&(b.git=g.getPage(b.branch,b.pageId,b.objectId,m))}function o(){}a.initScope(b,d,c),Camel.initEndpointChooserScope(b,c,e,f,h);var p=e.camelJmxDomain||"org.apache.camel";b.schema=Camel.getConfiguredCamelModel(),b.modified=!1,b.switchToCanvasView=new UI.Dialog,b.findProfileCamelContext=!0,b.camelSelectionDetails={selectedCamelContextId:null,selectedRouteId:null},b.isValid=function(a){return a&&a.isValid(f)},b.camelSubLevelTabs=[{content:'<i class=" icon-sitemap"></i> Tree',title:"View the routes as a tree",isValid:function(a){return!0},href:function(){return a.startLink(b.branch)+"/camel/properties/"+b.pageId}}];var q=_apacheCamelModel.definitions.route;q._id="route",b.addDialog=new UI.Dialog,b.addDialog.options.dialogClass="modal-large",b.addDialog.options.cssClass="modal-large",b.paletteItemSearch="",b.paletteTree=new Folder("Palette"),b.paletteActivations=["Routing_aggregate"],angular.forEach(_apacheCamelModel.definitions,function(a,c){if(a.group){var d="route"===c?b.paletteTree:b.paletteTree.getOrElse(a.group);d.key||(d.key=a.group),a._id=c;var e=a.title||c,f=new Folder(e);f.key=d.key+"_"+c,f.nodeModel=a;var g=Camel.getRouteNodeIcon(a);f.icon=g;var h=a.tooltip||a.description||"";f.tooltip=h,d.children.push(f)}}),b.componentTree=new Folder("Endpoints"),b.$watch("componentNames",function(){var a=b.componentNames;a&&a.length&&(b.componentTree=new Folder("Endpoints"),angular.forEach(b.componentNames,function(a){var c=Camel.getEndpointCategory(a),d=c.label||"Core",e=c.id||d,f=b.componentTree.getOrElse(d),g=Camel.getEndpointConfig(a,c),h=a,i=g.label||a,j=new Folder(i);j.key=e+"_"+h,j.key=h,j.nodeModel=g;var k=g.tooltip||g.description||i,l=Core.url(g.icon||Camel.endpointIcon);j.icon=l,j.tooltip=k,f.children.push(j)}))}),b.componentActivations=["bean"],b.$watch("addDialog.show",function(){b.addDialog.show&&setTimeout(function(){$("#submit").focus()},50)}),b.$on("hawtio.form.modelChange",k),b.onRootTreeNode=function(a){b.rootTreeNode=a,a.data=b.camelContextTree},b.addNode=function(){b.nodeXmlNode?b.addDialog.open():j(q)},b.onPaletteSelect=function(a){b.selectedPaletteNode=a&&a.nodeModel?a:null,b.selectedPaletteNode&&(b.selectedComponentNode=null),console.log("Selected "+b.selectedPaletteNode+" : "+b.selectedComponentNode)},b.onComponentSelect=function(a){if(b.selectedComponentNode=a&&a.nodeModel?a:null,b.selectedComponentNode){b.selectedPaletteNode=null;var c=a.key;console.log("loading endpoint schema for node "+c),b.loadEndpointSchema(c),b.selectedComponentName=c}console.log("Selected "+b.selectedPaletteNode+" : "+b.selectedComponentNode)},b.selectedNodeModel=function(){var a=null;if(b.selectedPaletteNode)a=b.selectedPaletteNode.nodeModel,b.endpointConfig=null;else if(b.selectedComponentNode){var c=b.selectedComponentNode.nodeModel,d=b.endpointSchema;a=b.schema.definitions.endpoint,b.endpointConfig={key:b.selectedComponentNode.key,schema:d,details:c}}return a},b.addAndCloseDialog=function(){var a=b.selectedNodeModel();a?j(a):console.log("WARNING: no nodeModel!"),b.addDialog.close()},b.removeNode=function(){b.selectedFolder&&b.treeNode&&(b.selectedFolder.detach(),b.treeNode.remove(),b.selectedFolder=null,b.treeNode=null)},b.canDelete=function(){return!!b.selectedFolder},b.isActive=function(a){if(angular.isString(a))return f.isLinkActive(a);var b=a.isActive;return b?b(f):f.isLinkActive(a.href())},b.save=function(){if(b.modified&&b.rootTreeNode){var c=Camel.generateXmlFromFolder(b.rootTreeNode);if(c){var d=Core.xmlNodeToString(c);if(d){var e=b.commitMessage||"Updated page "+b.pageId;g.putPage(b.branch,b.pageId,d,e,function(c){a.onComplete(c),Core.notification("success","Saved "+b.pageId),b.modified=!1,o(),Core.$apply(b)})}}}},b.cancel=function(){console.log("cancelling...")},b.$watch("workspace.tree",function(){b.git||setTimeout(n,50)}),b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(n,50)}),b.onNodeSelect=function(a,c){b.selectedFolder=a,b.treeNode=c,b.propertiesTemplate=null,b.diagramTemplate=null,b.nodeXmlNode=null,a&&(b.nodeData=Camel.getRouteFolderJSON(a),b.nodeDataChangedFields={});var d=Camel.getFolderCamelNodeId(a);i(c);d&&(b.nodeModel=Camel.getCamelSchema(d),b.nodeModel&&(b.propertiesTemplate="app/wiki/html/camelPropertiesEdit.html"),b.diagramTemplate="app/camel/html/routes.html",Core.$apply(b))},b.onNodeDragEnter=function(a,b){var c=a.data,d=b.data;if(c&&d){var e=Camel.getFolderCamelNodeId(c),f=Camel.getFolderCamelNodeId(d);if(e&&f)return"route"!==f||"route"===e}return!1},b.onNodeDrop=function(a,b,c,d,e){var f=a.data,g=b.data;if(f&&g){var h=Camel.getFolderCamelNodeId(f),i=Camel.getFolderCamelNodeId(g);"route"===h?"route"===i?"over"===c&&(c="after"):c="over":Camel.acceptOutput(h)?c="over":"before"!==c&&(c="after"),console.log("nodeDrop nodeId: "+h+" sourceId: "+i+" hitMode: "+c),b.move(a,c)}},n(),b.doSwitchToCanvasView=function(){c.url(Core.trimLeading(a.startLink(b.branch)+"/camel/canvas/"+b.pageId,"#"))},b.confirmSwitchToCanvasView=function(){b.modified?b.switchToCanvasView.open():b.doSwitchToCanvasView()}}])}(Wiki||(Wiki={}));var Wiki;!function(a){a.CamelCanvasController=a._module.controller("Wiki.CamelCanvasController",["$scope","$element","workspace","jolokia","wikiRepository","$templateCache","$interpolate","$location","localStorage",function(b,c,d,e,f,g,h,i,j){function k(){return!b.selectedFolder}function l(a,b,c,d){console.log("scheme "+a+" path "+c+" parameters "+d);var e=(a?a+":"+b:"")+(c||""),f=Core.hashToString(d);return f&&(e+="?"+f),e}function m(){}function n(a){var c=b.doc||document,d=b.selectedFolder||b.rootFolder,e=a._id;if(e){var f=b.selectedFolder;if("route"===e)f=b.rootFolder;else{if(!f){var g=b.rootFolder,h=g.children;if(h&&h.length||(n(Camel.getCamelSchema("route")),h=g.children),!h||!h.length)return void console.log("Could not add a new route to the empty tree!");f=A(b.rootFolder,b.selectedRouteId)||h[h.length-1]}var i=Camel.getFolderCamelNodeId(f);Camel.acceptOutput(i)||(f=f.parent||f)}if(f){var j=c.createElement(e);d=f;var k=Camel.addRouteChild(d,j,C),l={};if("endpoint"===e&&b.endpointConfig){var e=b.endpointConfig.key;e&&(l.uri=e+":")}if(k.camelNodeData=l,k.endpointConfig=b.endpointConfig,"route"===e){for(var m=b.routeIds.length,p=null;;)if(p="route"+ ++m,!b.routeIds.find(p))break;k.routeXmlNode.setAttribute("id",p),b.selectedRouteId=p}}}else console.log("WARNING: no id for model "+JSON.stringify(a));o()}function o(a){void 0===a&&(a=!0);var c=Camel.generateXmlFromFolder(b.rootFolder),d=Camel.loadCamelTree(c,b.pageId,C);d&&(b.rootFolder=d,b.doc=Core.pathGet(d,["xmlDocument"])),b.modified=!0,p(),b.doLayout(),Core.$apply(b)}function p(){b.routeIds=[];var a=$(b.doc);b.camelSelectionDetails.selectedCamelContextId=a.find("camelContext").attr("id"),a.find("route").each(function(a,c){var d=c.getAttribute("id");d&&b.routeIds.push(d)})}function q(){if(b.doc){if(!b.selectedRouteId&&b.routeIds&&b.routeIds.length&&(b.selectedRouteId=b.routeIds[0]),b.selectedRouteId&&b.selectedRouteId!==b.drawnRouteId){var a=[],c=[];Camel.loadRouteXmlNodes(b,b.doc,b.selectedRouteId,a,c,y()),x(b.selectedRouteId),b.folders=Camel.addFoldersToIndex(b.rootFolder),r(a,c),b.drawnRouteId=b.selectedRouteId}b.camelSelectionDetails.selectedRouteId=b.selectedRouteId}}function r(a,b){v(a,b)}function s(a){if(angular.isNumber(a)){var c=a;if(!(a=b.nodeStates[c]))return console.log("Cant find node at "+c),"node-"+c}return a.cid||"node-"+a.id}function t(){return b.selectedFolder||A(b.rootFolder,b.selectedRouteId)}function u(){var a=c,b=a.find(".canvas");return b&&b.length||(b=a),b}function v(c,d){var e=[],f=Core.createGraphStates(c,d,e);a.log.debug("links: ",d),a.log.debug("transitions: ",e),b.nodeStates=f;var g=u();return B.doWhileSuspended(function(){g.css({width:"800px",height:"800px","min-height":"800px","min-width":"800px"});var c=0,h=0;g.find("div.component").each(function(b,c){a.log.debug("Checking: ",c," ",b),f.any(function(a){return c.id===s(a)})||(a.log.debug("Removing element: ",c.id),B.remove(c))}),angular.forEach(f,function(c){a.log.debug("node: ",c);var d=s(c),e=g.find("#"+d);e[0]||(e=$(b.nodeTemplate({id:d,node:c})),e.appendTo(g)),B.makeSource(e,{filter:"img.nodeIcon",anchor:"Continuous",connector:H,connectorStyle:{strokeStyle:"#666",lineWidth:3},maxConnections:-1}),B.makeTarget(e,{dropOptions:{hoverClass:"dragHover"},anchor:"Continuous"}),B.draggable(e,{containment:".camel-canvas"}),e.click(function(){var a=!e.hasClass("selected");g.find("div.component").toggleClass("selected",!1),e.toggleClass("selected",a);var c=e.attr("id");x(a?c:null),Core.$apply(b)}),e.dblclick(function(){x(e.attr("id")),Core.$apply(b)});var f=e.height(),h=e.width();(f||h)&&(c.width=h,c.height=f,e.css({"min-width":h,"min-height":f}))});var i=10;dagre.layout().nodeSep(100).edgeSep(i).rankSep(75).nodes(f).edges(e).debugLevel(1).run(),angular.forEach(f,function(a){var b=s(a),d=$("#"+b),e=d.height(),f=d.width(),g=a.dagre.x+f,j=a.dagre.y+e;c<j&&(c=j+2*i),h<g&&(h=g+2*i),d.css({top:a.dagre.y,left:a.dagre.x})}),g.css({width:h,height:c,"min-height":c,"min-width":h}),g.dblclick(function(){b.propertiesDialog.open()}),B.setSuspendEvents(!0),B.detachEveryConnection({fireEvent:!1}),angular.forEach(d,function(a){B.connect({source:s(a.source),target:s(a.target)})}),B.setSuspendEvents(!1)}),f}function w(a){return{source:a.sourceId,target:a.targetId}}function x(a){var c=null;if(angular.isString(a)){var d=a;c=d&&b.folders?b.folders[d]:null}else c=a;if(b.selectedFolder=c,c=t(),b.nodeXmlNode=null,b.propertiesTemplate=null,c){var e=Camel.getFolderCamelNodeId(c);if(b.nodeData=Camel.getRouteFolderJSON(c),b.nodeDataChangedFields={},b.nodeModel=Camel.getCamelSchema(e),b.nodeModel&&(b.propertiesTemplate="app/wiki/html/camelPropertiesEdit.html"),b.selectedEndpoint=null,"endpoint"===e){var f=b.nodeData.uri;if(f){var g=f.indexOf(":");if(g>0){var h=f.substring(0,g),i=f.substring(g+1);b.endpointPathHasSlashes=!i,i.startsWith("//")&&(i=i.substring(2),b.endpointPathHasSlashes=!0),g=i.indexOf("?");var j={};if(g>0){var k=i.substring(g+1);i=i.substring(0,g),j=Core.stringToHash(k)}b.endpointScheme=h,b.endpointPath=i,b.endpointParameters=j,console.log("endpoint "+h+" path "+i+" and parameters "+JSON.stringify(j)),b.loadEndpointSchema(h),b.selectedEndpoint={endpointScheme:h,endpointPath:i,parameters:j}}}}}}function y(){return $(c).width()}function z(a){var b=null;if(a){var c=a.routeXmlNode;c&&(b=c.getAttribute("id"))}return b}function A(a,b){var c=null;return a&&angular.forEach(a.children,function(a){if(!c){var d=z(a);b===d&&(c=a)}}),c}var B=jsPlumb.getInstance(),C=j.camelJmxDomain||"org.apache.camel";b.addDialog=new UI.Dialog,b.propertiesDialog=new UI.Dialog,b.switchToTreeView=new UI.Dialog,b.modified=!1,b.camelIgnoreIdForLabel=Camel.ignoreIdForLabel(j),b.camelMaximumLabelWidth=Camel.maximumLabelWidth(j),b.camelMaximumTraceOrDebugBodyLength=Camel.maximumTraceOrDebugBodyLength(j),b.forms={},b.nodeTemplate=h(g.get("nodeTemplate")),b.$watch("camelContextTree",function(){var a=b.camelContextTree;b.rootFolder=a,b.folders=Camel.addFoldersToIndex(b.rootFolder);var c=Core.pathGet(a,["xmlDocument"]);c&&(b.doc=c,p(),q())}),b.addAndCloseDialog=function(){var a=b.selectedNodeModel();a&&n(a),b.addDialog.close()},b.removeNode=function(){var a=t();if(a){var c=Camel.getFolderCamelNodeId(a);a.detach(),"route"===c&&(b.selectedRouteId=null),x(null),o()}},b.doLayout=function(){b.drawnRouteId=null,q()},b.getDeleteTitle=function(){return k()?"Delete this route":"Delete this node"},b.getDeleteTarget=function(){return k()?"Route":"Node"},
b.isFormDirty=function(){return a.log.debug("endpointForm: ",b.endpointForm),!!b.endpointForm.$dirty||!!b.forms.formEditor&&b.forms.formEditor.$dirty},b.updateProperties=function(){a.log.info("old URI is "+b.nodeData.uri);var d=l(b.endpointScheme,b.endpointPathHasSlashes?"//":"",b.endpointPath,b.endpointParameters);a.log.info("new URI is "+d),d&&(b.nodeData.uri=d);var e=null,f=b.selectedFolder;if(f){e=f.key;c.find(".canvas").find("[id='"+e+"']").first().remove()}o(),e&&x(e),b.isFormDirty()&&(b.endpointForm.$setPristine(),b.forms.formEditor&&b.forms.formEditor.$setPristine()),Core.$apply(b)},b.save=function(){if(b.modified&&b.rootFolder){var c=Camel.generateXmlFromFolder(b.rootFolder);if(c){var d=Core.xmlNodeToString(c);if(d){var e=decodeURIComponent(d);a.log.debug("Saving xml decoded: "+e);var g=b.commitMessage||"Updated page "+b.pageId;f.putPage(b.branch,b.pageId,e,g,function(c){a.onComplete(c),Core.notification("success","Saved "+b.pageId),b.modified=!1,m(),Core.$apply(b)})}}}},b.cancel=function(){console.log("cancelling...")},b.$watch("selectedRouteId",q);var D=["Dot",{radius:4,cssClass:"camel-canvas-endpoint"}],E={strokeStyle:"red",lineWidth:3},F=["Label"],G=["Arrow",{location:1,id:"arrow",length:8,width:8,foldback:.8}],H=["StateMachine",{curviness:10,proximityLimit:50}];B.importDefaults({Endpoint:D,HoverPaintStyle:E,ConnectionOverlays:[G,F]}),b.$on("$destroy",function(){B.reset(),delete B}),B.bind("dblclick",function(a,b){B.isSuspendDrawing()||alert("double click on connection from "+a.sourceId+" to "+a.targetId)}),B.bind("connection",function(c,d){a.log.debug("Creating connection from ",c.sourceId," to ",c.targetId);var e=w(c),f=b.nodes[e.source],g=b.folders[e.source],h=b.folders[e.target];Camel.isNextSiblingAddedAsChild(f.type)?g.moveChild(h):g.parent.insertAfter(h,g),o()}),B.bind("click",function(a){B.isSuspendDrawing()||B.detach(a)}),b.doSwitchToTreeView=function(){i.url(Core.trimLeading(b.startLink+"/camel/properties/"+b.pageId,"#"))},b.confirmSwitchToTreeView=function(){b.modified?b.switchToTreeView.open():b.doSwitchToTreeView()}}])}(Wiki||(Wiki={}));var Wiki;!function(a){a._module.controller("Wiki.CommitController",["$scope","$location","$routeParams","$templateCache","workspace","marked","fileExtensionTypeRegistry","wikiRepository","jolokia",function(b,c,d,e,f,g,h,i,j){function k(a){return a.path||a.name}function l(){var c=b.commitId;a.loadBranches(j,i,b,m),i.commitInfo(c,function(a){b.commitInfo=a,Core.$apply(b)}),i.commitTree(c,function(d){b.commits=d,angular.forEach(d,function(d){d.fileIconHtml=a.fileIconHtml(d),d.fileClass=d.name.endsWith(".profile")?"green":"";var e=d.changeType,f=k(d);f&&(d.fileLink=a.startLink(b.branch)+"/version/"+f+"/"+c),e&&(e=e.toLowerCase(),e.startsWith("a")?(d.changeClass="change-add",d.change="add",d.title="added"):e.startsWith("d")?(d.changeClass="change-delete",d.change="delete",d.title="deleted",d.fileLink=null):(d.changeClass="change-modify",d.change="modify",d.title="modified"),d.changeTypeHtml='<span class="'+d.changeClass+'">'+d.title+"</span>")}),Core.$apply(b)})}var m=Fabric.isFMCContainer(f);a.initScope(b,d,c),b.commitId=b.objectId,b.selectedItems=[],b.dateFormat="EEE, MMM d, y : hh:mm:ss a",b.gridOptions={data:"commits",showFilter:!1,multiSelect:!1,selectWithCheckboxOnly:!0,showSelectionCheckbox:!0,displaySelectionCheckbox:!0,selectedItems:b.selectedItems,filterOptions:{filterText:""},columnDefs:[{field:"path",displayName:"File Name",cellTemplate:e.get("fileCellTemplate.html"),width:"***",cellFilter:""}]},b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(l,50)}),b.$watch("workspace.tree",function(){!b.git&&Git.getGitMBean(f)&&setTimeout(l,50)}),b.canRevert=function(){return 1===b.selectedItems.length},b.revert=function(){if(b.selectedItems.length>0){var c=k(b.selectedItems[0]),d=b.commitId;if(c&&d){var e="Reverting file "+b.pageId+" to previous version "+d;i.revertTo(b.branch,d,b.pageId,e,function(b){a.onComplete(b),l()})}}},b.diff=function(){if(b.selectedItems.length>0){var d=b.selectedItems[0],e=a.startLink(b.branch)+"/diff/"+k(d)+"/"+b.commitId+"/",f=Core.trimLeading(e,"#");c.path(f)}},l()}])}(Wiki||(Wiki={}));var Wiki;!function(a){a.controller("CreateController",["$scope","$location","$routeParams","$route","$http","$timeout","workspace","jolokia","wikiRepository",function(b,c,d,e,f,g,h,i,j){function k(){var d=a.viewLink(b.branch,b.pageId,c);a.log.debug("Cancelling, going to link: ",d),a.goToLink(d,g,c)}function l(d,e,f,h,i){j.putPage(b.branch,d,h,i,function(h){a.log.debug("Created file "+e),a.onComplete(h),b.git=j.getPage(b.branch,f,b.objectId,function(e){var f=null;if(e&&e.children){a.log.debug("scanned the directory "+e.children.length+" children");var h=e.children.find(function(b){return b.name===a.fileName});h?f=b.childLink(h):a.log.debug("Could not find name '"+a.fileName+"' in the list of file names "+JSON.stringify(e.children.map(function(a){return a.name})))}f||(a.log.debug("WARNING: could not find the childLink so reverting to the wiki edit page!"),f=a.editLink(b.branch,d,c)),a.goToLink(f,g,c)})})}function m(){var c=b.selectedCreateDocumentTemplate;if(!c)return a.log.debug("No template selected."),null;var d=c.exemplar||"",e=b.newDocumentName||d;if(e.indexOf(".")<0){var f=d.lastIndexOf(".");f>0&&(e+=d.substring(f))}var g=b.pageId;if(b.isFile){var f=g.lastIndexOf("/");g=f<=0?"":g.substring(0,f)}var f=e.lastIndexOf("/");return f>0&&(g+="/"+e.substring(0,f),e=e.substring(f+1)),(g=Core.trimLeading(g,"/"))+(g?"/":"")+e}Fabric.isFMCContainer(h);a.initScope(b,d,c),b.createDocumentTree=a.createWizardTree(h,b),b.createDocumentTreeActivations=["camel-spring.xml","ReadMe.md"],b.fileExists={exists:!1,name:""},b.newDocumentName="",b.selectedCreateDocumentExtension=null,b.fileExists.exists=!1,b.fileExists.name="",b.newDocumentName="",b.cancel=function(){k()},b.onCreateDocumentSelect=function(c){b.fileExists.exists=!1,b.fileExists.name="";var d=c?c.entity:null;b.selectedCreateDocumentTemplate=d,b.selectedCreateDocumentTemplateRegex=b.selectedCreateDocumentTemplate.regex||/.*/,b.selectedCreateDocumentTemplateInvalid=b.selectedCreateDocumentTemplate.invalid||"invalid name",b.selectedCreateDocumentTemplateExtension=b.selectedCreateDocumentTemplate.extension||null,a.log.debug("Entity: ",d),d&&(d.generated?(b.formSchema=d.generated.schema,b.formData=d.generated.form(h,b)):(b.formSchema={},b.formData={}),Core.$apply(b))},b.addAndCloseDialog=function(d){function e(a){var b="fabric/profiles/"+a;return b=b.replace(/-/g,"/"),b+=".profile"}function i(a){var b=a.replace(/^fabric\/profiles\//,"");return b=b.replace(/\//g,"-"),b=b.replace(/\.profile$/,"")}b.newDocumentName=d;var n=b.selectedCreateDocumentTemplate,o=m();if(b.newDocumentName=null,b.fileExists.exists=!1,b.fileExists.name="",b.fileExtensionInvalid=null,n&&o){if(b.selectedCreateDocumentTemplateExtension){var p=o.lastIndexOf(".");if(p>0){var q=o.substring(p);if(b.selectedCreateDocumentTemplateExtension!==q)return b.fileExtensionInvalid="File extension must be: "+b.selectedCreateDocumentTemplateExtension,void Core.$apply(b)}}if(j.exists(b.branch,o,null))return b.fileExists.exists=!0,b.fileExists.name=o,void Core.$apply(b);var r=a.fileName(o),s=a.fileParent(o),t=n.exemplar,u="Created "+n.label,v=Core.url("/app/wiki/exemplar/"+t);if(n.folder)Core.notification("success","Creating new folder "+r),j.createDirectory(b.branch,o,u,function(d){var e=a.viewLink(b.branch,o,c);a.goToLink(e,g,c)});else if(n.profile){s=s.replace(/\/=?(\w*)\.profile$/,"");var w=s+"/"+r,x=i(w),y=e(x),z=Fabric.getProfile(h.jolokia,b.branch,x,!1);if(z)return b.fileExists.exists=!0,b.fileExists.name=x,void Core.$apply(b);Fabric.createProfile(h.jolokia,b.branch,x,["default"],function(){Core.$apply(b),Fabric.newConfigFile(h.jolokia,b.branch,x,"ReadMe.md",function(){Core.$apply(b);var d="Here's an empty ReadMe.md for '"+x+"', please update!";Fabric.saveConfigFile(h.jolokia,b.branch,x,"ReadMe.md",d.encodeBase64(),function(){Core.$apply(b);var d=a.viewLink(b.branch,y,c);a.goToLink(d,g,c)},function(a){Core.notification("error","Failed to set ReadMe.md data in profile "+x+" due to "+a.error),Core.$apply(b)})},function(a){Core.notification("error","Failed to create ReadMe.md in profile "+x+" due to "+a.error),Core.$apply(b)})},function(a){Core.notification("error","Failed to create profile "+x+" due to "+a.error),Core.$apply(b)})}else if(n.generated){var A={workspace:h,form:b.formData,name:d,parentId:s,branch:b.branch,success:function(c){c?j.putPageBase64(b.branch,o,c,u,function(b){a.log.debug("Created file "+r),a.onComplete(b),k()}):k()},error:function(a){Core.notification("error",a),Core.$apply(b)}};n.generated.generate(A)}else f.get(v).success(function(a,b,c,d){l(o,r,s,a,u)}).error(function(a,b,c,d){l(o,r,s,"",u)})}}}])}(Wiki||(Wiki={}));var Wiki;!function(a){a._module.controller("Wiki.DozerMappingsController",["$scope","$location","$routeParams","workspace","jolokia","wikiRepository","$templateCache",function(b,c,d,e,f,g,h){function i(a,b){return a&&a.properties?a.properties.find(function(a){return a.path.endsWith("/"+b)}):null}function j(a,b){a.bind("click",function(a){b.detach(a)})}function k(){return{strokeStyle:UI.colors.sample(),lineWidth:4}}function l(a,b){return Dozer.findProperties(e,a,b,null).map(function(a){return a.name})}function m(){b.pageId=a.pageId(d,c),Git.getGitMBean(e)&&(b.git=g.getPage(b.branch,b.pageId,b.objectId,n))}function n(a){var c=a.text;c?b.responseText!==c&&(b.responseText=c,b.model=Dozer.loadDozerModel(c,b.pageId),b.mappings=Core.pathGet(b.model,["mappings"]),b.mappingTree=Dozer.createDozerTree(b.model),angular.isDefined(b.selectedMapping)||(b.selectedMapping=b.mappings.first()),b.main=h.get("pageTemplate.html")):q.warn("No XML found for page "+b.pageId),Core.$apply(b)}function o(){b.modified=!0}function p(){}var q=Logger.get("Dozer");a.initScope(b,d,c),Dozer.schemaConfigure(),b.profileId=Fabric.pagePathToProfileId(b.pageId),b.versionId=b.branch||"1.0",b.schema={},b.addDialog=new UI.Dialog,b.propertiesDialog=new UI.Dialog,b.deleteDialog=!1,b.unmappedFieldsHasValid=!1,b.modified=!1,b.selectedItems=[],b.mappings=[],b.schemas=[],b.aName="",b.bName="",b.connectorStyle=["Bezier"],b.main="",b.tab="Mappings",b.gridOptions={selectedItems:b.selectedItems,data:"mappings",displayFooter:!1,showFilter:!1,filterOptions:{filterText:"searchText"},columnDefs:[{field:"class_a",displayName:"From",cellTemplate:'<div class="ngCellText">{{row.entity.class_a.name}}</div>'},{field:"class_b",displayName:"To",cellTemplate:'<div class="ngCellText">{{row.entity.class_b.name}}</div>'}]},b.profileId&&Fabric.profileJolokia(f,b.profileId,b.versionId,function(a){b.containerJolokia=a,b.missingContainer=!a}),b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(m,50)}),b.triggerRefresh=function(a){void 0===a&&(a=500),b.main="",setTimeout(function(){b.main=h.get("pageTemplate.html"),Core.$apply(b)},a)},b.disableReload=function(){var a=Core.pathGet(b,["selectedMapping","class_a","value"]),c=Core.pathGet(b,["selectedMapping","class_b","value"]);return a===b.aName&&c===b.bName},b.doReload=function(){b.selectedMapping.class_a.value=b.aName,b.selectedMapping.class_b.value=b.bName,b.triggerRefresh()},b.$watch("selectedMapping",function(a,c){a!==c&&(b.aName=a.class_a.value,b.bName=a.class_b.value,b.triggerRefresh())}),b.$watch("selectedMapping.class_a.value",function(a,c){a!==c&&""!==a&&b.fetchProperties(a,b.selectedMapping.class_a,"Right")}),b.$watch("selectedMapping.class_b.value",function(a,c){a!==c&&""!==a&&b.fetchProperties(a,b.selectedMapping.class_b,"Left")}),b.fetchProperties=function(a,c,d){var g=Dozer.getIntrospectorMBean(e);if(g&&!b.missingContainer){(b.containerJolokia||f).request({type:"exec",mbean:g,operation:"getProperties(java.lang.String)",arguments:[a]},{success:function(a){c.error=null,c.properties=a.value;var e="";e=angular.isDefined(c.value)?c.value:c.path,angular.forEach(c.properties,function(a){a.id=Core.getUUID(),a.path=e+"/"+a.displayName,a.anchor=d}),Core.$apply(b)},error:function(a){c.properties=null,c.error={type:a.error_type,stackTrace:a.error},q.error("got: "+a),Core.$apply(b)}})}},b.getSourceAndTarget=function(a){var b=a.source.attr("field-path");a.target.attr("field-path");return{from:b.split("/").last(),to:b.split("/").last()}},b.jsPlumbCallback=function(a,c,d,e){angular.forEach(b.selectedMapping.fields,function(c){var e=i(b.selectedMapping.class_a,c.a.value),f=i(b.selectedMapping.class_b,c.b.value);if(e&&f){var g=d[e.id],h=d[f.id],l=b.jsPlumb.connect({source:g.el,target:h.el},{connector:b.connectorStyle,maxConnections:1,paintStyle:k()});j(l,a),g.connections.push(l),h.connections.push(l)}}),a.bind("connection",function(c){j(c.connection,a),c.connection.setPaintStyle(k());var d=b.getSourceAndTarget(c),e=new Dozer.Field(new Dozer.FieldDefinition(d.from),new Dozer.FieldDefinition(d.to));b.selectedMapping.fields.push(e),b.modified=!0,Core.$apply(b)}),a.bind("connectionDetached",function(a){var c=b.getSourceAndTarget(a),d=new Dozer.Field(new Dozer.FieldDefinition(c.from),new Dozer.FieldDefinition(c.to));b.selectedMapping.fields.remove(d),b.modified=!0,Core.$apply(b)})},b.formatStackTrace=function(a){return Log.formatStackTrace(a)},b.addMapping=function(){var a=b.rootTreeNode;if(a){var c=a.data,d=new Dozer.Mapping,e=Dozer.createMappingFolder(d,c),f=a.addChild(e);f&&(f.expand(!0),f.select(!0),f.activate(!0),o()),b.mappings.push(d),b.selectedMapping=d}},b.addField=function(){b.selectedMapping&&Dozer.findUnmappedFields(e,b.selectedMapping,function(a){q.warn("has unmapped data fields: "+a),b.unmappedFields=a,b.unmappedFieldsHasValid=!1,b.addDialog.open(),Core.$apply(b)})},b.addAndCloseDialog=function(){q.info("About to add the unmapped fields "+JSON.stringify(b.unmappedFields,null,"  ")),b.selectedMapping&&angular.forEach(b.unmappedFields,function(a){if(a.valid){var c=new Dozer.Field(new Dozer.FieldDefinition(a.fromField),new Dozer.FieldDefinition(a.toField));b.selectedMapping.fields.push(c);var d=b.selectedMappingTreeNode,e=b.selectedMappingFolder;if(d&&e){var f=Dozer.addMappingFieldFolder(c,e),g=d.addChild(f);g&&(g.expand(!0),g.select(!0),g.activate(!0),o())}else q.warn("No treenode and folder for mapping node! treeNode "+d+" mappingFolder "+e)}}),b.addDialog.close()},b.canDelete=function(){return!!b.selectedFolder},b.removeNode=function(){if(b.selectedFolder&&b.treeNode){var a=b.selectedFolder,c=a.entity;if(c instanceof Dozer.Field){var d=Core.pathGet(a,["parent","entity"]);d&&d.fields.remove(c)}b.selectedFolder.detach(),b.treeNode.remove(),b.selectedFolder=null,b.treeNode=null,o()}},b.saveMappings=function(){b.model.mappings=b.mappings;var c=Dozer.saveToXmlText(b.model);if(c){var d=b.commitMessage||"Updated page "+b.pageId;g.putPage(b.branch,b.pageId,c,d,function(c){a.onComplete(c),b.modified=!1,Core.notification("success","Saved "+b.pageId),p(),Core.$apply(b)})}},b.save=function(){if("Mappings"===b.tab)return void b.saveMappings();if(b.model){var c=Dozer.loadModelFromTree(b.rootTreeNode,b.model),d=Dozer.saveToXmlText(c);if(d){var e=b.commitMessage||"Updated page "+b.pageId;g.putPage(b.branch,b.pageId,d,e,function(c){a.onComplete(c),b.modified=!1,Core.notification("success","Saved "+b.pageId),p(),Core.$apply(b)})}}},b.cancel=function(){q.info("cancelling...")},b.onRootTreeNode=function(a){b.rootTreeNode=a},b.onNodeSelect=function(a,c){if(b.selectedFolder=a,b.treeNode=c,b.propertiesTemplate=null,b.dozerEntity=null,b.selectedDescription="",b.selectedMapping=null,b.selectedMappingTreeNode=null,b.selectedMappingFolder=null,b.removeModelChangeListener&&(b.removeModelChangeListener(),b.removeModelChangeListener=null),a){var d=a.entity;b.dozerEntity=d;var e="app/wiki/html/dozerPropertiesEdit.html";d instanceof Dozer.Field?(b.propertiesTemplate=e,b.nodeModel=io_hawt_dozer_schema_Field,b.selectedDescription="Field Mapping",b.selectedMapping=Core.pathGet(a,["parent","entity"]),b.selectedMappingFolder=a.parent,b.selectedMappingTreeNode=c.parent):d instanceof Dozer.Mapping&&(b.propertiesTemplate=e,b.nodeModel=io_hawt_dozer_schema_Mapping,b.selectedDescription="Class Mapping",b.selectedMapping=d,b.selectedMappingFolder=a,b.selectedMappingTreeNode=c),b.selectedMapping&&b.removeModelChangeListener}Core.$apply(b)},b.onUnmappedFieldChange=function(a){a.valid=!!a.toField,b.unmappedFieldsHasValid=b.unmappedFields.find(function(a){return a.valid})},b.fromFieldNames=function(a){return l(Core.pathGet(b.selectedMapping,["class_a","value"]),a)},b.toFieldNames=function(a){return l(Core.pathGet(b.selectedMapping,["class_b","value"]),a)},b.classNames=function(a){return!a||a.length<2?[]:Core.time("Time the query of classes",function(){q.info("searching for class names with filter '"+a+"'");var b=Dozer.findClassNames(e,a);return q.info("Found results: "+b.length),b})},m()}])}(Wiki||(Wiki={}));var Wiki;!function(a){a._module.controller("Wiki.EditController",["$scope","$location","$routeParams","fileExtensionTypeRegistry","wikiRepository",function(b,c,d,e,f){function g(){return c.path().startsWith("/wiki/create")}function h(){g()?j():(a.log.debug("Getting page, branch: ",b.branch," pageId: ",b.pageId," objectId: ",b.objectId),f.getPage(b.branch,b.pageId,b.objectId,i))}function i(c){var d=c.text;b.entity.source=d,b.fileName=b.pageId.split("/").last(),a.log.debug("file name: ",b.fileName),a.log.debug("file details: ",c),j(),Core.$apply(b)}function j(){o?(g()&&(b.fileName||(b.fileName=Core.getUUID()+".json")),b.sourceView=null,"/"===o?k(_jsonSchema):b.git=f.getPage(b.branch,o,b.objectId,function(b){k(a.parseJson(b.text))})):b.sourceView="app/wiki/html/sourceEdit.html"}function k(c){b.formDefinition=c,b.entity.source&&(b.formEntity=a.parseJson(b.entity.source)),b.sourceView="app/wiki/html/formEdit.html",Core.$apply(b)}function l(){var d=Core.trimLeading(b.viewLink(),"#");a.log.debug("going to view "+d),c.path(a.decodePath(d)),a.log.debug("location is now "+c.path())}function m(c){var d=b.commitMessage||"Updated page "+b.pageId,e=b.entity.source;b.formEntity&&(e=JSON.stringify(b.formEntity,null,"  ")),a.log.debug("Saving file, branch: ",b.branch," path: ",b.path),f.putPage(b.branch,c,e,d,function(d){a.onComplete(d),b.modified=!1,Core.notification("success","Saved "+c),l(),Core.$apply(b)})}a.initScope(b,d,c),b.entity={source:null};var n=a.fileFormat(b.pageId,e),o=null;(n&&"javascript"===n||g())&&(o=c.search().form);var p={mode:{name:n}};b.codeMirrorOptions=CodeEditor.createEditorSettings(p),b.modified=!1,b.isValid=function(){return b.fileName},b.canSave=function(){return!b.modified},b.$watch("entity.source",function(a,c){b.modified=a&&c&&a!==c},!0),a.log.debug("path: ",b.path),b.$watch("modified",function(b,c){a.log.debug("modified: ",b)}),b.viewLink=function(){return a.viewLink(b.branch,b.pageId,c,b.fileName)},b.cancel=function(){l()},b.save=function(){b.modified&&b.fileName&&m(b.pageId)},b.create=function(){var a=b.pageId+"/"+b.fileName;console.log("creating new file at "+a),m(a)},b.onSubmit=function(a,c){g()?b.create():b.save()},b.onCancel=function(a){setTimeout(function(){l(),Core.$apply(b)},50)},h()}])}(Wiki||(Wiki={}));var Wiki;!function(a){a._module.controller("Wiki.FormTableController",["$scope","$location","$routeParams","workspace","wikiRepository",function(b,c,d,e,f){function g(d,e){var f=a.startLink(b.branch),g=d?d._id||"":"";return Core.createHref(c,f+e+"/"+b.pageId+"/"+g)}function h(c){var d=[],e=a.parseJson(c);angular.forEach(e,function(a,b){a._id=b,d.push(a)}),b.list=d,Core.$apply(b)}function i(){var a=Core.pathGet(b,["gridOptions","filterOptions","filterText"])||"";b.git=f.jsonChildContents(b.pageId,"*.json",a,h)}function j(c){var d=c.text;if(d){b.formDefinition=a.parseJson(d);var e=[],f=b.formDefinition;angular.forEach(f.properties,function(a,b){if(b&&!Forms.isArrayOrNestedObject(a,f)){var c={field:b,displayName:a.description||b,visible:!0};e.push(c)}}),e.push(k),b.columnDefs=e,b.gridOptions.columnDefs=e,b.tableView="app/wiki/html/formTableDatatable.html"}}a.initScope(b,d,c),b.columnDefs=[],b.gridOptions={data:"list",displayFooter:!1,showFilter:!1,filterOptions:{filterText:""},columnDefs:b.columnDefs},b.viewLink=function(a){return g(a,"/view")},b.editLink=function(a){return g(a,"/edit")};var k={field:"_id",displayName:"Actions",cellTemplate:'<div class="ngCellText""><a ng-href="{{viewLink(row.entity)}}" class="btn">View</a> <a ng-href="{{editLink(row.entity)}}" class="btn">Edit</a></div>'};b.$watch("workspace.tree",function(){!b.git&&Git.getGitMBean(e)&&setTimeout(i,50)}),b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(i,50)});var l=c.search().form;l&&f.getPage(b.branch,l,b.objectId,j),i(),Core.$apply(b)}])}(Wiki||(Wiki={}));var Wiki;!function(a){a._module.controller("Wiki.GitPreferences",["$scope","localStorage","userDetails",function(a,b,c){Core.initPreferenceScope(a,b,{gitUserName:{value:c.username},gitUserEmail:{value:""}})}])}(Wiki||(Wiki={}));var Wiki;!function(a){a._module.controller("Wiki.HistoryController",["$scope","$location","$routeParams","$templateCache","workspace","marked","fileExtensionTypeRegistry","wikiRepository","jolokia",function(b,c,d,e,f,g,h,i,j){function k(){b.git=i.history(b.branch,"",b.pageId,0,function(c){angular.forEach(c,function(c){var d=c.commitHashText||c.name;c.commitLink=a.startLink(b.branch)+"/commit/"+b.pageId+"/"+d}),b.logs=c,Core.$apply(b)}),a.loadBranches(j,i,b,l)}var l=Fabric.isFMCContainer(f);a.initScope(b,d,c),b.dateFormat="EEE, MMM d, y : hh:mm:ss a",b.gridOptions={data:"logs",showFilter:!1,selectedItems:[],showSelectionCheckbox:!0,displaySelectionCheckbox:!0,filterOptions:{filterText:""},columnDefs:[{field:"commitHashText",displayName:"Change",cellTemplate:e.get("changeCellTemplate.html"),cellFilter:"",width:"*"},{field:"date",displayName:"Modified",cellFilter:"date: dateFormat",width:"**"},{field:"author",displayName:"Author",cellFilter:"",width:"**"},{field:"shortMessage",displayName:"Message",cellTemplate:'<div class="ngCellText" title="{{row.entity.shortMessage}}">{{row.entity.trimmedMessage}}</div>',cellFilter:"",width:"****"}]},b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(k,50)}),b.$watch("workspace.tree",function(){!b.git&&Git.getGitMBean(f)&&setTimeout(k,50)}),b.canRevert=function(){return 1===b.gridOptions.selectedItems.length&&b.gridOptions.selectedItems[0]!==b.logs[0]},b.revert=function(){if(b.gridOptions.selectedItems.length>0){var c=b.gridOptions.selectedItems[0].name;if(c){var d="Reverting file "+b.pageId+" to previous version "+c;i.revertTo(b.branch,c,b.pageId,d,function(c){a.onComplete(c),Core.notification("success","Successfully reverted "+b.pageId),k()})}b.gridOptions.selectedItems.splice(0,b.gridOptions.selectedItems.length)}},b.diff=function(){var d=" ",e=d;b.gridOptions.selectedItems.length>0&&(e=b.gridOptions.selectedItems[0].name||d);var f=d;if(b.gridOptions.selectedItems.length>1&&(f=b.gridOptions.selectedItems[1].name||d,b.gridOptions.selectedItems[0].date<b.gridOptions.selectedItems[1].date)){var g=f;f=e,e=g}var h=a.startLink(b.branch)+"/diff/"+b.pageId+"/"+e+"/"+f,i=Core.trimLeading(h,"#");c.path(i)},k()}])}(Wiki||(Wiki={}));var Wiki;!function(a){a._module.controller("Wiki.NavBarController",["$scope","$location","$routeParams","workspace","jolokia","wikiRepository","wikiBranchMenu",function(b,c,d,e,f,g,h){function i(a,b){var c=a.href;c&&(a.href=c.replace("wiki/view",b))}function j(){var e=a.startLink(b.branch),f=e+"/view";b.breadcrumbs=[{href:f,name:"root"}];var g=a.pageId(d,c),h=g?g.split("/"):[];angular.forEach(h,function(c){c.startsWith("/")||f.endsWith("/")||(f+="/"),f+=a.encodePath(c),c.isBlank()||b.breadcrumbs.push({href:f,name:c})});var j=c.path();if(b.breadcrumbs.length){var k=b.breadcrumbs[b.breadcrumbs.length-1];k.name=a.hideFileNameExtensions(k.name);var l=!1;if(angular.forEach(a.customViewLinks(b),function(a){!l&&j.startsWith(a)&&(i(b.breadcrumbs.last(),Core.trimLeading(a,"/")),l=!0)}),!l&&c.search().form){var m=b.breadcrumbs.last().name;m&&m.endsWith(".json")&&i(b.breadcrumbs[b.breadcrumbs.length-2],"wiki/formTable")}}var n=null;if(j.startsWith("/wiki/version")&&(n=(d.objectId||"").substring(0,6)||"Version",b.breadcrumbs.push({href:"#"+j,name:n})),j.startsWith("/wiki/diff")){var o=(d.objectId||"").substring(0,6),p=(d.baseObjectId||"").substring(0,6);n="Diff",o&&(n+=p?" "+o+" "+p:" "+o),b.breadcrumbs.push({href:"#"+j,name:n})}Core.$apply(b)}var k=Fabric.isFMCContainer(e);a.initScope(b,d,c),b.branchMenuConfig={title:b.branch,items:[]},b.ViewMode=a.ViewMode,b.setViewMode=function(a){b.$emit("Wiki.SetViewMode",a)},h.applyMenuExtensions(b.branchMenuConfig.items),b.$watch("branches",function(d,e){d!==e&&d&&(b.branchMenuConfig.items=[],d.length>0&&b.branchMenuConfig.items.push({heading:k?"Versions":"Branches"}),d.sort().forEach(function(d){var e={title:d,icon:"",action:function(){}};d===b.branch?e.icon="icon-ok":e.action=function(){var e=a.branchLink(d,b.pageId,c);c.path(Core.toPath(e)),Core.$apply(b)},b.branchMenuConfig.items.push(e)}),h.applyMenuExtensions(b.branchMenuConfig.items))},!0),b.createLink=function(){var e=a.pageId(d,c);return a.createLink(b.branch,e,c,b)},b.startLink=a.startLink(b.branch),b.sourceLink=function(){var d=c.path(),e=null;return angular.forEach(a.customViewLinks(b),function(f){d.startsWith(f)&&(e=Core.createHref(c,a.startLink(b.branch)+"/view"+d.substring(f.length)))}),!e&&c.search().form?Core.createHref(c,"#"+d,["form"]):e},b.isActive=function(a){return!!a&&a.endsWith(d.page)},b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(j,50)}),j()}])}(Wiki||(Wiki={}));var Wiki;!function(a){function b(a,b){return a.dialog({resolve:b,templateUrl:"app/wiki/html/modal/renameDialog.html",controller:["$scope","dialog","callbacks","rename","fileExists","fileName",function(a,b,c,d,e,f){a.rename=d,a.fileExists=e,a.fileName=f,a.close=function(a){b.close()},a.renameAndCloseDialog=c}]})}function c(a,b){return a.dialog({resolve:b,templateUrl:"app/wiki/html/modal/moveDialog.html",controller:["$scope","dialog","callbacks","move","folderNames",function(a,b,c,d,e){a.move=d,a.folderNames=e,a.close=function(a){b.close()},a.moveAndCloseDialog=c}]})}function d(a,b){return a.dialog({resolve:b,templateUrl:"app/wiki/html/modal/deleteDialog.html",controller:["$scope","dialog","callbacks","selectedFileHtml","warning",function(a,b,c,d,e){a.selectedFileHtml=d,a.close=function(a){b.close()},a.deleteAndCloseDialog=c,a.warning=e}]})}function e(a,b){return a.dialog({resolve:b,templateUrl:"app/wiki/html/modal/cantDeleteDialog.html",controller:["$scope","dialog","warning",function(a,b,c){a.close=function(a){b.close()},a.warning=c}]})}a.getRenameDialog=b,a.getMoveDialog=c,a.getDeleteDialog=d,a.getCantDeleteDialog=e}(Wiki||(Wiki={}));var Wiki;!function(a){a.FileDropController=a._module.controller("Wiki.FileDropController",["$scope","FileUploader","$route","$timeout","userDetails",function(b,c,d,e,f){var g=a.gitRestURL(b.branch,b.pageId)+"/",h=b.uploader=new c({headers:{Authorization:Core.authHeaderValue(f)},autoUpload:!0,withCredentials:!0,method:"POST",url:g});b.doUpload=function(){h.uploadAll()},h.onWhenAddingFileFailed=function(b,c,d){a.log.debug("onWhenAddingFileFailed",b,c,d)},h.onAfterAddingFile=function(b){a.log.debug("onAfterAddingFile",b)},h.onAfterAddingAll=function(b){a.log.debug("onAfterAddingAll",b)},h.onBeforeUploadItem=function(b){b.fileSizeMB="file"in b?(b.file.size/1024/1024).toFixed(2):0,b.url=g,a.log.info("Loading files to "+g),a.log.debug("onBeforeUploadItem",b)},h.onProgressItem=function(b,c){a.log.debug("onProgressItem",b,c)},h.onProgressAll=function(b){a.log.debug("onProgressAll",b)},h.onSuccessItem=function(b,c,d,e){a.log.debug("onSuccessItem",b,c,d,e)},h.onErrorItem=function(b,c,d,e){a.log.debug("onErrorItem",b,c,d,e)},h.onCancelItem=function(b,c,d,e){a.log.debug("onCancelItem",b,c,d,e)},h.onCompleteItem=function(b,c,d,e){a.log.debug("onCompleteItem",b,c,d,e)},h.onCompleteAll=function(){a.log.debug("onCompleteAll"),h.clearQueue(),e(function(){a.log.info("Completed all uploads. Lets force a reload"),d.reload(),Core.$apply(b)},200)}}]),a.ViewController=a._module.controller("Wiki.ViewController",["$scope","$location","$routeParams","$route","$http","$timeout","workspace","marked","fileExtensionTypeRegistry","wikiRepository","$compile","$templateCache","jolokia","localStorage","$interpolate","$dialog",function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(){var a=c.path();return a&&(a.startsWith("/wiki/diff")||a.startsWith("/wiki/branch/"+b.branch+"/diff"))}function s(){if(r()){var c=d.baseObjectId;b.git=k.diff(b.objectId,c,b.pageId,v)}else b.git=k.getPage(b.branch,b.pageId,b.objectId,v);a.loadBranches(n,k,b,y)}function t(d,e){b.sourceView=null;var f=null;switch(f=r()?"diff":a.fileFormat(d,j)||b.format,a.log.debug("File format: ",f),f){case"image":var g="git/"+b.branch;a.log.debug("$scope: ",b),g=UrlHelpers.join(g,b.pageId);var h=p(m.get("imageTemplate.html"));b.html=h({imageURL:g});break;case"markdown":b.html=e?i(e):"";break;case"javascript":var l=null;l=c.search().form,b.source=e,b.form=l,l?(b.sourceView=null,"/"===l?u(_jsonSchema):b.git=k.getPage(b.branch,l,b.objectId,function(b){u(a.parseJson(b.text))})):b.sourceView="app/wiki/html/sourceView.html";break;default:b.html=null,b.source=e,b.sourceView="app/wiki/html/sourceView.html"}Core.$apply(b)}function u(c){b.formDefinition=c,b.source&&(b.formEntity=a.parseJson(b.source)),b.sourceView="app/wiki/html/formView.html",Core.$apply(b)}function v(c){var d=c.text;if(b.directory=c.directory,b.fileDetails=c,c&&c.format?b.format=c.format:b.format=a.fileFormat(b.pageId,j),b.codeMirrorOptions.mode.name=b.format,b.children=null,c.directory){var e=c.children.filter(function(a){return a.directory&&!a.name.has(".profile")}),f=c.children.filter(function(a){return a.directory&&a.name.has(".profile")}),g=c.children.filter(function(a){return!a.directory});e=e.sortBy(function(a){return a.name}),f=f.sortBy(function(a){return a.name}),g=g.sortBy(function(a){return a.name}).sortBy(function(a){return a.name.split(".").last()}),b.children=Array.create(e,f,g).map(function(c){return c.branch=b.branch,c.fileName=c.name,c.directory&&(c.fileName+=".zip"),c.downloadURL=a.gitRestURL(b.branch,c.path),c})}if(b.html=null,b.source=null,b.readMePath=null,b.isFile=!1,b.children){b.$broadcast("pane.open");var h=b.children.find(function(b){var c=(b.name||"").toLowerCase(),d=a.fileExtension(c);return c&&d&&(c.startsWith("readme.")||"readme"===c||c.startsWith("index.")||"index"===c)});if(h){var i=h.path;b.readMePath=i,k.getPage(b.branch,i,b.objectId,function(a){t(i,a.text)})}var l=b.children.find(function(b){var c=(b.name||"").toLowerCase(),d=a.fileExtension(c);return c&&d&&c.startsWith("kubernetes")&&"json"===d});l&&k.getPage(b.branch,l.path,void 0,function(a){if(a&&a.text){try{b.kubernetesJson=angular.fromJson(a.text)}catch(a){b.kubernetesJson={errorParsing:!0,error:a}}b.showAppHeader=!0,Core.$apply(b)}}),b.$broadcast("Wiki.ViewPage.Children",b.pageId,b.children)}else{b.$broadcast("pane.close");var i=b.pageId;t(i,d),b.isFile=!0}Core.$apply(b)}function w(c){b.operationCounter+=1;var d=b.operationCounter;c&&k.exists(b.branch,c,function(e){b.operationCounter===d&&(a.log.debug("checkFileExists for path "+c+" got result "+e),b.fileExists.exists=!!e,b.fileExists.name=e?e.name:null,Core.$apply(b))})}function x(){var a=b.rename.newFileName;return b.pageId&&a?b.pageId+"/"+a:null}b.name="WikiViewController";var y=Fabric.isFMCContainer(h);a.initScope(b,d,c),SelectionHelpers.decorate(b),b.fabricTopLevel="fabric/profiles/",b.versionId=b.branch,b.paneTemplate="",b.profileId=Fabric.pagePathToProfileId(b.pageId),b.showProfileHeader=!(!b.profileId||!b.pageId.endsWith(Fabric.profileSuffix)),b.showAppHeader=!1,b.operationCounter=1,b.renameDialog=null,b.moveDialog=null,b.deleteDialog=null,b.isFile=!1,b.rename={newFileName:""},b.move={moveFolder:""},b.ViewMode=a.ViewMode,Core.bindModelToSearchParam(b,c,"searchText","q",""),StorageHelpers.bindModelToLocalStorage({$scope:b,$location:c,localStorage:o,modelName:"mode",paramName:"wikiViewMode",initialValue:0,to:Core.numberToString,from:Core.parseIntValue}),
Core.reloadWhenParametersChange(e,b,c,["wikiViewMode"]),b.gridOptions={data:"children",displayFooter:!1,selectedItems:[],showSelectionCheckbox:!0,enableSorting:!1,useExternalSorting:!0,columnDefs:[{field:"name",displayName:"Name",cellTemplate:m.get("fileCellTemplate.html"),headerCellTemplate:m.get("fileColumnTemplate.html")}]},b.$on("Wiki.SetViewMode",function(c,d){switch(b.mode=d,d){case 0:a.log.debug("List view mode");break;case 1:a.log.debug("Icon view mode");break;default:b.mode=0,a.log.debug("Defaulting to list view mode")}}),b.childActions=[];var z=Core.throttled(s,1e3);b.marked=function(a){return a?i(a):""},b.$on("wikiBranchesUpdated",function(){s()}),b.createDashboardLink=function(){var a="/wiki/branch/:branch/view/*page",b=d.page,c=b?b.split("/").last():null,e=angular.toJson({size_x:2,size_y:2}),f="#/dashboard/add?tab=dashboard&href="+encodeURIComponent(a)+"&size="+encodeURIComponent(e)+"&routeParams="+encodeURIComponent(angular.toJson(d));return c&&(f+="&title="+encodeURIComponent(c)),f},b.displayClass=function(){return b.children&&0!==b.children.length?"span9":""},b.parentLink=function(){var d=a.startLink(b.branch),e=d+"/view",f=b.pageId.split("/"),g="/"+f.first(f.length-1).join("/");return Core.createHref(c,e+g,[])},b.childLink=function(d){var e=a.startLink(b.branch),f=e+"/view",g="",h=a.encodePath(d.path);if(d.directory){var i=h+".form",j=b.children;if(j){j.find(function(a){return a.path===i})&&(f=e+"/formTable",g="?form="+i)}}else{var k=d.xmlNamespaces;k&&k.length&&(k.any(function(b){return a.camelNamespaces.any(b)})?f=e+"/camel/canvas":k.any(function(b){return a.dozerNamespaces.any(b)})?f=e+"/dozer/mappings":a.log.debug("child "+h+" has namespaces "+k)),d.path.endsWith(".form")?g="?form=/":a.isIndexPage(d.path)&&(f=e+"/book")}return Core.createHref(c,f+h+g,["form"])},b.fileName=function(b){return a.hideFileNameExtensions(b.displayName||b.name)},b.fileClass=function(a){return a.name.has(".profile")?"green":""},b.fileIconHtml=function(b){return a.fileIconHtml(b)},b.format=a.fileFormat(b.pageId,j);var A={readOnly:!0,mode:{name:b.format}};b.codeMirrorOptions=CodeEditor.createEditorSettings(A),b.editLink=function(){var d=b.directory?b.readMePath:b.pageId;return d?a.editLink(b.branch,d,c):null},b.branchLink=function(d){return d?a.branchLink(d,b.pageId,c):null},b.historyLink="#/wiki"+(b.branch?"/branch/"+b.branch:"")+"/history/"+b.pageId,b.$watch("workspace.tree",function(){!b.git&&Git.getGitMBean(h)&&setTimeout(z,50)}),b.$on("$routeChangeSuccess",function(a,b,c){setTimeout(z,50)}),b.openDeleteDialog=function(){if(b.gridOptions.selectedItems.length){b.selectedFileHtml="<ul>"+b.gridOptions.selectedItems.map(function(a){return"<li>"+a.name+"</li>"}).sort().join("")+"</ul>";var c=!1;if(Fabric.isFMCContainer(h)){var d=[],e=[];if(b.gridOptions.selectedItems.map(function(a){if("inode/directory"!==a.mimeType)return null;var b=a.path;return b.match(/\.profile$/)&&(b=b.substring(0,b.length-8)),b.match(/^\/fabric\/profiles\//)&&(b=b.substring(17)),d.push(b.replace(/\//g,"-")),e.push(a.name),null}),e.length>0){var f=Fabric.getContainerIdsForProfiles(n,b.versionId,d,!0);if(f.find(function(a){return a.length>0})){c=!0,b.deleteWarning="You can't delete document(s) which represent Fabric8 profile(s).",b.deleteWarning+="<br/>These folders are profiles that are used by existing containers:<ul>";for(var g=0;g<e.length;g++)if(f[g].length>0){b.deleteWarning+="<li>"+e[g]+" (";for(var i=0;i<f[g].length;i++)i>0&&(b.deleteWarning+=", "),b.deleteWarning+=f[g][i];b.deleteWarning+=")</li>"}b.deleteWarning+="</ul>"}else b.deleteWarning="You are about to delete document(s) which may be part of Fabric8 profile(s). This really can't be undone! Wiki operations are low level and may lead to non-functional state of Fabric."}}else b.deleteWarning=null;b.deleteDialog=c?a.getCantDeleteDialog(q,{warning:function(){return b.deleteWarning}}):a.getDeleteDialog(q,{callbacks:function(){return b.deleteAndCloseDialog},selectedFileHtml:function(){return b.selectedFileHtml},warning:function(){return b.deleteWarning}}),b.deleteDialog.open()}else a.log.debug("No items selected right now! "+b.gridOptions.selectedItems)},b.deleteAndCloseDialog=function(){var c=b.gridOptions.selectedItems,d=c.length;a.log.debug("Deleting selection: "+c),angular.forEach(c,function(c,e){var f=b.pageId+"/"+c.name;a.log.debug("About to delete "+f),b.git=k.removePage(b.branch,f,null,function(a){if(e+1===d){b.gridOptions.selectedItems.splice(0,d);var c=Core.maybePlural(d,"document");Core.notification("success","Deleted "+c),Core.$apply(b),s()}})}),b.deleteDialog.close()},b.$watch("rename.newFileName",function(){var a=x();b.originalRenameFilePath===a?b.fileExists={exists:!1,name:null}:w(a)}),b.renameAndCloseDialog=function(){if(b.gridOptions.selectedItems.length){var c=b.gridOptions.selectedItems[0],d=x();if(c&&d){var e=c.name,f=a.fileName(d),g=b.pageId+"/"+e;a.log.debug("About to rename file "+g+" to "+d),b.git=k.rename(b.branch,g,d,null,function(a){Core.notification("success","Renamed file to  "+f),b.gridOptions.selectedItems.splice(0,1),b.renameDialog.close(),Core.$apply(b),s()})}}b.renameDialog.close()},b.openRenameDialog=function(){var c=null;if(b.gridOptions.selectedItems.length){c=b.gridOptions.selectedItems[0].name}c?(b.rename.newFileName=c,b.originalRenameFilePath=x(),b.renameDialog=a.getRenameDialog(q,{rename:function(){return b.rename},fileExists:function(){return b.fileExists},fileName:function(){return b.fileName},callbacks:function(){return b.renameAndCloseDialog}}),b.renameDialog.open(),g(function(){$("#renameFileName").focus()},50)):a.log.debug("No items selected right now! "+b.gridOptions.selectedItems)},b.moveAndCloseDialog=function(){var c=b.gridOptions.selectedItems,d=c.length,e=b.move.moveFolder,f=b.pageId;e&&d&&e!==f&&(a.log.debug("Moving "+d+" file(s) to "+e),angular.forEach(c,function(c,g){var h=f+"/"+c.name,i=e+"/"+c.name;a.log.debug("About to move "+h+" to "+i),b.git=k.rename(b.branch,h,i,null,function(a){if(g+1===d){b.gridOptions.selectedItems.splice(0,d);var c=Core.maybePlural(d,"document");Core.notification("success","Moved "+c+" to "+i),b.moveDialog.close(),Core.$apply(b),s()}})})),b.moveDialog.close()},b.folderNames=function(a){return k.completePath(b.branch,a,!0,null)},b.openMoveDialog=function(){b.gridOptions.selectedItems.length?(b.move.moveFolder=b.pageId,b.moveDialog=a.getMoveDialog(q,{move:function(){return b.move},folderNames:function(){return b.folderNames},callbacks:function(){return b.moveAndCloseDialog}}),b.moveDialog.open(),g(function(){$("#moveFolder").focus()},50)):a.log.debug("No items selected right now! "+b.gridOptions.selectedItems)},setTimeout(z,50),b.updateView=s,b.getContents=function(c,d){var e=c;if(b.directory)e=b.pageId+"/"+c;else{var f=b.pageId.split("/");f=f.remove(f.last()),f.push(c),e=f.join("/")}a.log.debug("pageId: ",b.pageId),a.log.debug("branch: ",b.branch),a.log.debug("filename: ",c),a.log.debug("using pageId: ",e),k.getPage(b.branch,e,void 0,function(a){d(a.text)})}}])}(Wiki||(Wiki={}));var Wiki;!function(a){a._module.directive("wikiHrefAdjuster",["$location",function(b){return{restrict:"A",link:function(c,d,e){d.bind("DOMNodeInserted",function(e){var f=d.find("a");angular.forEach(f,function(d){if(!d.hasAttribute("no-adjust")){d=$(d);var e=(d.attr("href")||"").trim();if(e){var f=d.attr("file-extension"),g=a.adjustHref(c,b,e,f);g&&d.attr("href",g)}}});var g=d.find("img");angular.forEach(g,function(a){if(!a.hasAttribute("no-adjust")){a=$(a);var b=(a.attr("src")||"").trim();b&&b.startsWith("/")&&(b=Core.url(b),a.attr("src",b),a.attr("no-adjust","true"))}})})}}}]),a._module.directive("wikiTitleLinker",["$location",function(a){return{restrict:"A",link:function(b,c,d){function e(a){if(a){var b=a.offset();if(b)return b.top}return 0}function f(){return g(a.search().hash)}function g(b){var d=!1,b=a.search().hash;if(b){var f='a[name="'+b+'"]',g=c.find(f);if(g&&g.length){var h=e($(c)),i=e(g)-h;i<0&&(i=0),$("body,html").animate({scrollTop:i},1),d=!0}}return d}function h(b){var d=c.find("h1,h2,h3,h4,h5,h6,h7"),e=!1;angular.forEach(d,function(b){var c=$(b),d=c.parent("a");if(!d||!d.length){var f=c.text();if(f){var h=f.replace(/ /g,"-"),i="#"+a.path()+"?hash="+h,j=Core.createHref(a,i,["hash"]),k=$('<a name="'+h+'" href="'+j+'" ng-click="onLinkClick()"></a>');k.on("click",function(){setTimeout(function(){g(h)},50)}),k.insertBefore(c),c.detach(),k.append(c),e=!0}}}),e&&!j&&setTimeout(function(){f()&&(j=!0)},50)}function i(a){c.unbind("DOMNodeInserted",i),h(a),c.bind("DOMNodeInserted",i)}var j=!1;c.bind("DOMNodeInserted",i)}}}]),a._module.directive("wikiFixed",["$timeout",function(a){return{restrict:"C",link:function(b,c,d){a(function(){var a=$(".logbar"),b=a.height()+8+"px";c.css({"margin-top":b,visibility:"visible"})},100,!1)}}}])}(Wiki||(Wiki={}));var Wiki;!function(a){a.TopLevelController=a._module.controller("Wiki.TopLevelController",["$scope","workspace","jolokia",function(a,b,c){a.managerMBean=Fabric.managerMBean,a.clusterBootstrapManagerMBean=Fabric.clusterBootstrapManagerMBean,a.clusterManagerMBean=Fabric.clusterManagerMBean,a.openShiftFabricMBean=Fabric.openShiftFabricMBean,a.mqManagerMBean=Fabric.mqManagerMBean,a.healthMBean=Fabric.healthMBean,a.schemaLookupMBean=Fabric.schemaLookupMBean,a.gitMBean=Git.getGitMBean(b),a.configAdminMBean=Osgi.getHawtioConfigAdminMBean(b),a.hawtioConfigAdminMBean=a.configAdminMBean,a.defaultVersion=Fabric.isFMCContainer(b)?Fabric.getDefaultVersionId(c):"1.0"}])}(Wiki||(Wiki={}));